var a5=(u,t)=>()=>(t||u((t={exports:{}}).exports,t),t.exports);var RX=a5(Zp=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const d of l)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function n(l){const d={};return l.integrity&&(d.integrity=l.integrity),l.referrerPolicy&&(d.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?d.credentials="include":l.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function r(l){if(l.ep)return;l.ep=!0;const d=n(l);fetch(l.href,d)}})();const o5=!1,l5=(u,t)=>u===t,u5=Symbol("solid-track"),KT={equals:l5};let WP=ZP;const Pf=1,YT=2,XP={owned:null,cleanups:null,context:null,owner:null};var Ia=null;let nx=null,c5=null,ma=null,ko=null,Nd=null,kE=0;function PT(u,t){const n=ma,r=Ia,l=u.length===0,d=t===void 0?r:t,f=l?XP:{owned:null,cleanups:null,context:d?d.context:null,owner:d},p=l?u:()=>u(()=>Rg(()=>xy(f)));Ia=f,ma=null;try{return zy(p,!0)}finally{ma=n,Ia=r}}function Va(u,t){t=t?Object.assign({},KT,t):KT;const n={value:u,observers:null,observerSlots:null,comparator:t.equals||void 0},r=l=>(typeof l=="function"&&(l=l(n.value)),JP(n,l));return[QP.bind(n),r]}function Dh(u,t,n){const r=rw(u,t,!1,Pf);By(r)}function zh(u,t,n){WP=h5;const r=rw(u,t,!1,Pf);r.user=!0,Nd?Nd.push(r):By(r)}function cA(u,t,n){n=n?Object.assign({},KT,n):KT;const r=rw(u,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,By(r),QP.bind(r)}function Rg(u){if(ma===null)return u();const t=ma;ma=null;try{return u()}finally{ma=t}}function Mf(u){zh(()=>Rg(u))}function jh(u){return Ia===null||(Ia.cleanups===null?Ia.cleanups=[u]:Ia.cleanups.push(u)),u}function QP(){if(this.sources&&this.state)if(this.state===Pf)By(this);else{const u=ko;ko=null,zy(()=>XT(this),!1),ko=u}if(ma){const u=this.observers?this.observers.length:0;ma.sources?(ma.sources.push(this),ma.sourceSlots.push(u)):(ma.sources=[this],ma.sourceSlots=[u]),this.observers?(this.observers.push(ma),this.observerSlots.push(ma.sources.length-1)):(this.observers=[ma],this.observerSlots=[ma.sources.length-1])}return this.value}function JP(u,t,n){let r=u.value;return(!u.comparator||!u.comparator(r,t))&&(u.value=t,u.observers&&u.observers.length&&zy(()=>{for(let l=0;l<u.observers.length;l+=1){const d=u.observers[l],f=nx&&nx.running;f&&nx.disposed.has(d),(f?!d.tState:!d.state)&&(d.pure?ko.push(d):Nd.push(d),d.observers&&eM(d)),f||(d.state=Pf)}if(ko.length>1e6)throw ko=[],new Error},!1)),t}function By(u){if(!u.fn)return;xy(u);const t=kE;d5(u,u.value,t)}function d5(u,t,n){let r;const l=Ia,d=ma;ma=Ia=u;try{r=u.fn(t)}catch(f){return u.pure&&(u.state=Pf,u.owned&&u.owned.forEach(xy),u.owned=null),u.updatedAt=n+1,tM(f)}finally{ma=d,Ia=l}(!u.updatedAt||u.updatedAt<=n)&&(u.updatedAt!=null&&"observers"in u?JP(u,r):u.value=r,u.updatedAt=n)}function rw(u,t,n,r=Pf,l){const d={fn:u,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:Ia,context:Ia?Ia.context:null,pure:n};return Ia===null||Ia!==XP&&(Ia.owned?Ia.owned.push(d):Ia.owned=[d]),d}function WT(u){if(u.state===0)return;if(u.state===YT)return XT(u);if(u.suspense&&Rg(u.suspense.inFallback))return u.suspense.effects.push(u);const t=[u];for(;(u=u.owner)&&(!u.updatedAt||u.updatedAt<kE);)u.state&&t.push(u);for(let n=t.length-1;n>=0;n--)if(u=t[n],u.state===Pf)By(u);else if(u.state===YT){const r=ko;ko=null,zy(()=>XT(u,t[0]),!1),ko=r}}function zy(u,t){if(ko)return u();let n=!1;t||(ko=[]),Nd?n=!0:Nd=[],kE++;try{const r=u();return f5(n),r}catch(r){n||(Nd=null),ko=null,tM(r)}}function f5(u){if(ko&&(ZP(ko),ko=null),u)return;const t=Nd;Nd=null,t.length&&zy(()=>WP(t),!1)}function ZP(u){for(let t=0;t<u.length;t++)WT(u[t])}function h5(u){let t,n=0;for(t=0;t<u.length;t++){const r=u[t];r.user?u[n++]=r:WT(r)}for(t=0;t<n;t++)WT(u[t])}function XT(u,t){u.state=0;for(let n=0;n<u.sources.length;n+=1){const r=u.sources[n];if(r.sources){const l=r.state;l===Pf?r!==t&&(!r.updatedAt||r.updatedAt<kE)&&WT(r):l===YT&&XT(r,t)}}}function eM(u){for(let t=0;t<u.observers.length;t+=1){const n=u.observers[t];n.state||(n.state=YT,n.pure?ko.push(n):Nd.push(n),n.observers&&eM(n))}}function xy(u){let t;if(u.sources)for(;u.sources.length;){const n=u.sources.pop(),r=u.sourceSlots.pop(),l=n.observers;if(l&&l.length){const d=l.pop(),f=n.observerSlots.pop();r<l.length&&(d.sourceSlots[f]=r,l[r]=d,n.observerSlots[r]=f)}}if(u.tOwned){for(t=u.tOwned.length-1;t>=0;t--)xy(u.tOwned[t]);delete u.tOwned}if(u.owned){for(t=u.owned.length-1;t>=0;t--)xy(u.owned[t]);u.owned=null}if(u.cleanups){for(t=u.cleanups.length-1;t>=0;t--)u.cleanups[t]();u.cleanups=null}u.state=0}function p5(u){return u instanceof Error?u:new Error(typeof u=="string"?u:"Unknown error",{cause:u})}function tM(u,t=Ia){throw p5(u)}const g5=Symbol("fallback");function YR(u){for(let t=0;t<u.length;t++)u[t]()}function m5(u,t,n={}){let r=[],l=[],d=[],f=0,p=t.length>1?[]:null;return jh(()=>YR(d)),()=>{let m=u()||[],y=m.length,b,_;return m[u5],Rg(()=>{let w,T,k,U,Y,se,te,Re,Be;if(y===0)f!==0&&(YR(d),d=[],r=[],l=[],f=0,p&&(p=[])),n.fallback&&(r=[g5],l[0]=PT(j=>(d[0]=j,n.fallback())),f=1);else if(f===0){for(l=new Array(y),_=0;_<y;_++)r[_]=m[_],l[_]=PT(A);f=y}else{for(k=new Array(y),U=new Array(y),p&&(Y=new Array(y)),se=0,te=Math.min(f,y);se<te&&r[se]===m[se];se++);for(te=f-1,Re=y-1;te>=se&&Re>=se&&r[te]===m[Re];te--,Re--)k[Re]=l[te],U[Re]=d[te],p&&(Y[Re]=p[te]);for(w=new Map,T=new Array(Re+1),_=Re;_>=se;_--)Be=m[_],b=w.get(Be),T[_]=b===void 0?-1:b,w.set(Be,_);for(b=se;b<=te;b++)Be=r[b],_=w.get(Be),_!==void 0&&_!==-1?(k[_]=l[b],U[_]=d[b],p&&(Y[_]=p[b]),_=T[_],w.set(Be,_)):d[b]();for(_=se;_<y;_++)_ in k?(l[_]=k[_],d[_]=U[_],p&&(p[_]=Y[_],p[_](_))):l[_]=PT(A);l=l.slice(0,f=y),r=m.slice(0)}return l});function A(w){if(d[_]=w,p){const[T,k]=Va(_);return p[_]=k,t(m[_],T)}return t(m[_])}}}function xl(u,t){return Rg(()=>u(t||{}))}function Od(u){const t="fallback"in u&&{fallback:()=>u.fallback};return cA(m5(()=>u.each,u.children,t||void 0))}function y5(u,t,n){let r=n.length,l=t.length,d=r,f=0,p=0,m=t[l-1].nextSibling,y=null;for(;f<l||p<d;){if(t[f]===n[p]){f++,p++;continue}for(;t[l-1]===n[d-1];)l--,d--;if(l===f){const b=d<r?p?n[p-1].nextSibling:n[d-p]:m;for(;p<d;)u.insertBefore(n[p++],b)}else if(d===p)for(;f<l;)(!y||!y.has(t[f]))&&t[f].remove(),f++;else if(t[f]===n[d-1]&&n[p]===t[l-1]){const b=t[--l].nextSibling;u.insertBefore(n[p++],t[f++].nextSibling),u.insertBefore(n[--d],b),t[l]=n[d]}else{if(!y){y=new Map;let _=p;for(;_<d;)y.set(n[_],_++)}const b=y.get(t[f]);if(b!=null)if(p<b&&b<d){let _=f,A=1,w;for(;++_<l&&_<d&&!((w=y.get(t[_]))==null||w!==b+A);)A++;if(A>b-p){const T=t[f];for(;p<b;)u.insertBefore(n[p++],T)}else u.replaceChild(n[p++],t[f++])}else f++;else t[f++].remove()}}}const WR="_$DX_DELEGATE";function v5(u,t,n,r={}){let l;return PT(d=>{l=d,t===document?u():ls(t,u(),t.firstChild?null:void 0,n)},r.owner),()=>{l(),t.textContent=""}}function Ka(u,t,n,r){let l;const d=()=>{const p=document.createElement("template");return p.innerHTML=u,p.content.firstChild},f=()=>(l||(l=d())).cloneNode(!0);return f.cloneNode=f,f}function nM(u,t=window.document){const n=t[WR]||(t[WR]=new Set);for(let r=0,l=u.length;r<l;r++){const d=u[r];n.has(d)||(n.add(d),t.addEventListener(d,T5))}}function XR(u,t,n){n==null?u.removeAttribute(t):u.setAttribute(t,n)}function QR(u,t){t==null?u.removeAttribute("class"):u.className=t}function dT(u,t,n,r){if(Array.isArray(n)){const l=n[0];u.addEventListener(t,n[0]=d=>l.call(u,n[1],d))}else u.addEventListener(t,n,typeof n!="function"&&n)}function jy(u,t,n){return Rg(()=>u(t,n))}function ls(u,t,n,r){if(n!==void 0&&!r&&(r=[]),typeof t!="function")return QT(u,t,r,n);Dh(l=>QT(u,t(),l,n),r)}function T5(u){let t=u.target;const n=`$$${u.type}`,r=u.target,l=u.currentTarget,d=m=>Object.defineProperty(u,"target",{configurable:!0,value:m}),f=()=>{const m=t[n];if(m&&!t.disabled){const y=t[`${n}Data`];if(y!==void 0?m.call(t,y,u):m.call(t,u),u.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(u.target)&&d(t.host),!0},p=()=>{for(;f()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(u,"currentTarget",{configurable:!0,get(){return t||document}}),u.composedPath){const m=u.composedPath();d(m[0]);for(let y=0;y<m.length-2&&(t=m[y],!!f());y++){if(t._$host){t=t._$host,p();break}if(t.parentNode===l)break}}else p();d(r)}function QT(u,t,n,r,l){for(;typeof n=="function";)n=n();if(t===n)return n;const d=typeof t,f=r!==void 0;if(u=f&&n[0]&&n[0].parentNode||u,d==="string"||d==="number"){if(d==="number"&&(t=t.toString(),t===n))return n;if(f){let p=n[0];p&&p.nodeType===3?p.data!==t&&(p.data=t):p=document.createTextNode(t),n=Vp(u,n,r,p)}else n!==""&&typeof n=="string"?n=u.firstChild.data=t:n=u.textContent=t}else if(t==null||d==="boolean")n=Vp(u,n,r);else{if(d==="function")return Dh(()=>{let p=t();for(;typeof p=="function";)p=p();n=QT(u,p,n,r)}),()=>n;if(Array.isArray(t)){const p=[],m=n&&Array.isArray(n);if(dA(p,t,n,l))return Dh(()=>n=QT(u,p,n,r,!0)),()=>n;if(p.length===0){if(n=Vp(u,n,r),f)return n}else m?n.length===0?JR(u,p,r):y5(u,n,p):(n&&Vp(u),JR(u,p));n=p}else if(t.nodeType){if(Array.isArray(n)){if(f)return n=Vp(u,n,r,t);Vp(u,n,null,t)}else n==null||n===""||!u.firstChild?u.appendChild(t):u.replaceChild(t,u.firstChild);n=t}}return n}function dA(u,t,n,r){let l=!1;for(let d=0,f=t.length;d<f;d++){let p=t[d],m=n&&n[u.length],y;if(!(p==null||p===!0||p===!1))if((y=typeof p)=="object"&&p.nodeType)u.push(p);else if(Array.isArray(p))l=dA(u,p,m)||l;else if(y==="function")if(r){for(;typeof p=="function";)p=p();l=dA(u,Array.isArray(p)?p:[p],Array.isArray(m)?m:[m])||l}else u.push(p),l=!0;else{const b=String(p);m&&m.nodeType===3&&m.data===b?u.push(m):u.push(document.createTextNode(b))}}return l}function JR(u,t,n=null){for(let r=0,l=t.length;r<l;r++)u.insertBefore(t[r],n)}function Vp(u,t,n,r){if(n===void 0)return u.textContent="";const l=r||document.createTextNode("");if(t.length){let d=!1;for(let f=t.length-1;f>=0;f--){const p=t[f];if(l!==p){const m=p.parentNode===u;!d&&!f?m?u.replaceChild(l,p):u.insertBefore(l,n):m&&p.remove()}else d=!0}}else u.insertBefore(l,n);return[l]}/*! For license information please see dash.all.min.js.LICENSE.txt */var E5={7267:function(u,t){t.byteLength=function(y){var b=p(y),_=b[0],A=b[1];return 3*(_+A)/4-A},t.toByteArray=function(y){var b,_,A=p(y),w=A[0],T=A[1],k=new l(function(se,te,Re){return 3*(te+Re)/4-Re}(0,w,T)),U=0,Y=T>0?w-4:w;for(_=0;_<Y;_+=4)b=r[y.charCodeAt(_)]<<18|r[y.charCodeAt(_+1)]<<12|r[y.charCodeAt(_+2)]<<6|r[y.charCodeAt(_+3)],k[U++]=b>>16&255,k[U++]=b>>8&255,k[U++]=255&b;return T===2&&(b=r[y.charCodeAt(_)]<<2|r[y.charCodeAt(_+1)]>>4,k[U++]=255&b),T===1&&(b=r[y.charCodeAt(_)]<<10|r[y.charCodeAt(_+1)]<<4|r[y.charCodeAt(_+2)]>>2,k[U++]=b>>8&255,k[U++]=255&b),k},t.fromByteArray=function(y){for(var b,_=y.length,A=_%3,w=[],T=16383,k=0,U=_-A;k<U;k+=T)w.push(m(y,k,k+T>U?U:k+T));return A===1?(b=y[_-1],w.push(n[b>>2]+n[b<<4&63]+"==")):A===2&&(b=(y[_-2]<<8)+y[_-1],w.push(n[b>>10]+n[b>>4&63]+n[b<<2&63]+"=")),w.join("")};for(var n=[],r=[],l=typeof Uint8Array<"u"?Uint8Array:Array,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0;f<64;++f)n[f]=d[f],r[d.charCodeAt(f)]=f;function p(y){var b=y.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var _=y.indexOf("=");return _===-1&&(_=b),[_,_===b?0:4-_%4]}function m(y,b,_){for(var A,w,T=[],k=b;k<_;k+=3)A=(y[k]<<16&16711680)+(y[k+1]<<8&65280)+(255&y[k+2]),T.push(n[(w=A)>>18&63]+n[w>>12&63]+n[w>>6&63]+n[63&w]);return T.join("")}r[45]=62,r[95]=63},44:function(u,t,n){var r=n(7267),l=n(7986),d=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=m,t.SlowBuffer=function(ce){return+ce!=ce&&(ce=0),m.alloc(+ce)},t.INSPECT_MAX_BYTES=50;var f=2147483647;function p(ce){if(ce>f)throw new RangeError('The value "'+ce+'" is invalid for option "size"');var ge=new Uint8Array(ce);return Object.setPrototypeOf(ge,m.prototype),ge}function m(ce,ge,G){if(typeof ce=="number"){if(typeof ge=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return _(ce)}return y(ce,ge,G)}function y(ce,ge,G){if(typeof ce=="string")return function(Ae,yt){if(typeof yt=="string"&&yt!==""||(yt="utf8"),!m.isEncoding(yt))throw new TypeError("Unknown encoding: "+yt);var zt=0|k(Ae,yt),vt=p(zt),Lt=vt.write(Ae,yt);return Lt!==zt&&(vt=vt.slice(0,Lt)),vt}(ce,ge);if(ArrayBuffer.isView(ce))return function(Ae){if(Ze(Ae,Uint8Array)){var yt=new Uint8Array(Ae);return w(yt.buffer,yt.byteOffset,yt.byteLength)}return A(Ae)}(ce);if(ce==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ce);if(Ze(ce,ArrayBuffer)||ce&&Ze(ce.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ze(ce,SharedArrayBuffer)||ce&&Ze(ce.buffer,SharedArrayBuffer)))return w(ce,ge,G);if(typeof ce=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var ae=ce.valueOf&&ce.valueOf();if(ae!=null&&ae!==ce)return m.from(ae,ge,G);var _e=function(Ae){if(m.isBuffer(Ae)){var yt=0|T(Ae.length),zt=p(yt);return zt.length===0||Ae.copy(zt,0,0,yt),zt}return Ae.length!==void 0?typeof Ae.length!="number"||at(Ae.length)?p(0):A(Ae):Ae.type==="Buffer"&&Array.isArray(Ae.data)?A(Ae.data):void 0}(ce);if(_e)return _e;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ce[Symbol.toPrimitive]=="function")return m.from(ce[Symbol.toPrimitive]("string"),ge,G);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ce)}function b(ce){if(typeof ce!="number")throw new TypeError('"size" argument must be of type number');if(ce<0)throw new RangeError('The value "'+ce+'" is invalid for option "size"')}function _(ce){return b(ce),p(ce<0?0:0|T(ce))}function A(ce){for(var ge=ce.length<0?0:0|T(ce.length),G=p(ge),ae=0;ae<ge;ae+=1)G[ae]=255&ce[ae];return G}function w(ce,ge,G){if(ge<0||ce.byteLength<ge)throw new RangeError('"offset" is outside of buffer bounds');if(ce.byteLength<ge+(G||0))throw new RangeError('"length" is outside of buffer bounds');var ae;return ae=ge===void 0&&G===void 0?new Uint8Array(ce):G===void 0?new Uint8Array(ce,ge):new Uint8Array(ce,ge,G),Object.setPrototypeOf(ae,m.prototype),ae}function T(ce){if(ce>=f)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+f.toString(16)+" bytes");return 0|ce}function k(ce,ge){if(m.isBuffer(ce))return ce.length;if(ArrayBuffer.isView(ce)||Ze(ce,ArrayBuffer))return ce.byteLength;if(typeof ce!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ce);var G=ce.length,ae=arguments.length>2&&arguments[2]===!0;if(!ae&&G===0)return 0;for(var _e=!1;;)switch(ge){case"ascii":case"latin1":case"binary":return G;case"utf8":case"utf-8":return mn(ce).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*G;case"hex":return G>>>1;case"base64":return Tn(ce).length;default:if(_e)return ae?-1:mn(ce).length;ge=(""+ge).toLowerCase(),_e=!0}}function U(ce,ge,G){var ae=!1;if((ge===void 0||ge<0)&&(ge=0),ge>this.length||((G===void 0||G>this.length)&&(G=this.length),G<=0)||(G>>>=0)<=(ge>>>=0))return"";for(ce||(ce="utf8");;)switch(ce){case"hex":return lt(this,ge,G);case"utf8":case"utf-8":return x(this,ge,G);case"ascii":return $e(this,ge,G);case"latin1":case"binary":return xe(this,ge,G);case"base64":return K(this,ge,G);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return et(this,ge,G);default:if(ae)throw new TypeError("Unknown encoding: "+ce);ce=(ce+"").toLowerCase(),ae=!0}}function Y(ce,ge,G){var ae=ce[ge];ce[ge]=ce[G],ce[G]=ae}function se(ce,ge,G,ae,_e){if(ce.length===0)return-1;if(typeof G=="string"?(ae=G,G=0):G>2147483647?G=2147483647:G<-2147483648&&(G=-2147483648),at(G=+G)&&(G=_e?0:ce.length-1),G<0&&(G=ce.length+G),G>=ce.length){if(_e)return-1;G=ce.length-1}else if(G<0){if(!_e)return-1;G=0}if(typeof ge=="string"&&(ge=m.from(ge,ae)),m.isBuffer(ge))return ge.length===0?-1:te(ce,ge,G,ae,_e);if(typeof ge=="number")return ge&=255,typeof Uint8Array.prototype.indexOf=="function"?_e?Uint8Array.prototype.indexOf.call(ce,ge,G):Uint8Array.prototype.lastIndexOf.call(ce,ge,G):te(ce,[ge],G,ae,_e);throw new TypeError("val must be string, number or Buffer")}function te(ce,ge,G,ae,_e){var Ae,yt=1,zt=ce.length,vt=ge.length;if(ae!==void 0&&((ae=String(ae).toLowerCase())==="ucs2"||ae==="ucs-2"||ae==="utf16le"||ae==="utf-16le")){if(ce.length<2||ge.length<2)return-1;yt=2,zt/=2,vt/=2,G/=2}function Lt(Bt,sn){return yt===1?Bt[sn]:Bt.readUInt16BE(sn*yt)}if(_e){var bt=-1;for(Ae=G;Ae<zt;Ae++)if(Lt(ce,Ae)===Lt(ge,bt===-1?0:Ae-bt)){if(bt===-1&&(bt=Ae),Ae-bt+1===vt)return bt*yt}else bt!==-1&&(Ae-=Ae-bt),bt=-1}else for(G+vt>zt&&(G=zt-vt),Ae=G;Ae>=0;Ae--){for(var Mt=!0,kt=0;kt<vt;kt++)if(Lt(ce,Ae+kt)!==Lt(ge,kt)){Mt=!1;break}if(Mt)return Ae}return-1}function Re(ce,ge,G,ae){G=Number(G)||0;var _e=ce.length-G;ae?(ae=Number(ae))>_e&&(ae=_e):ae=_e;var Ae=ge.length;ae>Ae/2&&(ae=Ae/2);for(var yt=0;yt<ae;++yt){var zt=parseInt(ge.substr(2*yt,2),16);if(at(zt))return yt;ce[G+yt]=zt}return yt}function Be(ce,ge,G,ae){return Qe(mn(ge,ce.length-G),ce,G,ae)}function j(ce,ge,G,ae){return Qe(function(_e){for(var Ae=[],yt=0;yt<_e.length;++yt)Ae.push(255&_e.charCodeAt(yt));return Ae}(ge),ce,G,ae)}function M(ce,ge,G,ae){return Qe(Tn(ge),ce,G,ae)}function Z(ce,ge,G,ae){return Qe(function(_e,Ae){for(var yt,zt,vt,Lt=[],bt=0;bt<_e.length&&!((Ae-=2)<0);++bt)zt=(yt=_e.charCodeAt(bt))>>8,vt=yt%256,Lt.push(vt),Lt.push(zt);return Lt}(ge,ce.length-G),ce,G,ae)}function K(ce,ge,G){return ge===0&&G===ce.length?r.fromByteArray(ce):r.fromByteArray(ce.slice(ge,G))}function x(ce,ge,G){G=Math.min(ce.length,G);for(var ae=[],_e=ge;_e<G;){var Ae,yt,zt,vt,Lt=ce[_e],bt=null,Mt=Lt>239?4:Lt>223?3:Lt>191?2:1;if(_e+Mt<=G)switch(Mt){case 1:Lt<128&&(bt=Lt);break;case 2:(192&(Ae=ce[_e+1]))==128&&(vt=(31&Lt)<<6|63&Ae)>127&&(bt=vt);break;case 3:Ae=ce[_e+1],yt=ce[_e+2],(192&Ae)==128&&(192&yt)==128&&(vt=(15&Lt)<<12|(63&Ae)<<6|63&yt)>2047&&(vt<55296||vt>57343)&&(bt=vt);break;case 4:Ae=ce[_e+1],yt=ce[_e+2],zt=ce[_e+3],(192&Ae)==128&&(192&yt)==128&&(192&zt)==128&&(vt=(15&Lt)<<18|(63&Ae)<<12|(63&yt)<<6|63&zt)>65535&&vt<1114112&&(bt=vt)}bt===null?(bt=65533,Mt=1):bt>65535&&(bt-=65536,ae.push(bt>>>10&1023|55296),bt=56320|1023&bt),ae.push(bt),_e+=Mt}return function(kt){var Bt=kt.length;if(Bt<=ue)return String.fromCharCode.apply(String,kt);for(var sn="",ti=0;ti<Bt;)sn+=String.fromCharCode.apply(String,kt.slice(ti,ti+=ue));return sn}(ae)}t.kMaxLength=f,m.TYPED_ARRAY_SUPPORT=function(){try{var ce=new Uint8Array(1),ge={foo:function(){return 42}};return Object.setPrototypeOf(ge,Uint8Array.prototype),Object.setPrototypeOf(ce,ge),ce.foo()===42}catch{return!1}}(),m.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(m.prototype,"parent",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.buffer}}),Object.defineProperty(m.prototype,"offset",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.byteOffset}}),m.poolSize=8192,m.from=function(ce,ge,G){return y(ce,ge,G)},Object.setPrototypeOf(m.prototype,Uint8Array.prototype),Object.setPrototypeOf(m,Uint8Array),m.alloc=function(ce,ge,G){return function(ae,_e,Ae){return b(ae),ae<=0?p(ae):_e!==void 0?typeof Ae=="string"?p(ae).fill(_e,Ae):p(ae).fill(_e):p(ae)}(ce,ge,G)},m.allocUnsafe=function(ce){return _(ce)},m.allocUnsafeSlow=function(ce){return _(ce)},m.isBuffer=function(ce){return ce!=null&&ce._isBuffer===!0&&ce!==m.prototype},m.compare=function(ce,ge){if(Ze(ce,Uint8Array)&&(ce=m.from(ce,ce.offset,ce.byteLength)),Ze(ge,Uint8Array)&&(ge=m.from(ge,ge.offset,ge.byteLength)),!m.isBuffer(ce)||!m.isBuffer(ge))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(ce===ge)return 0;for(var G=ce.length,ae=ge.length,_e=0,Ae=Math.min(G,ae);_e<Ae;++_e)if(ce[_e]!==ge[_e]){G=ce[_e],ae=ge[_e];break}return G<ae?-1:ae<G?1:0},m.isEncoding=function(ce){switch(String(ce).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},m.concat=function(ce,ge){if(!Array.isArray(ce))throw new TypeError('"list" argument must be an Array of Buffers');if(ce.length===0)return m.alloc(0);var G;if(ge===void 0)for(ge=0,G=0;G<ce.length;++G)ge+=ce[G].length;var ae=m.allocUnsafe(ge),_e=0;for(G=0;G<ce.length;++G){var Ae=ce[G];if(Ze(Ae,Uint8Array))_e+Ae.length>ae.length?m.from(Ae).copy(ae,_e):Uint8Array.prototype.set.call(ae,Ae,_e);else{if(!m.isBuffer(Ae))throw new TypeError('"list" argument must be an Array of Buffers');Ae.copy(ae,_e)}_e+=Ae.length}return ae},m.byteLength=k,m.prototype._isBuffer=!0,m.prototype.swap16=function(){var ce=this.length;if(ce%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var ge=0;ge<ce;ge+=2)Y(this,ge,ge+1);return this},m.prototype.swap32=function(){var ce=this.length;if(ce%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var ge=0;ge<ce;ge+=4)Y(this,ge,ge+3),Y(this,ge+1,ge+2);return this},m.prototype.swap64=function(){var ce=this.length;if(ce%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var ge=0;ge<ce;ge+=8)Y(this,ge,ge+7),Y(this,ge+1,ge+6),Y(this,ge+2,ge+5),Y(this,ge+3,ge+4);return this},m.prototype.toString=function(){var ce=this.length;return ce===0?"":arguments.length===0?x(this,0,ce):U.apply(this,arguments)},m.prototype.toLocaleString=m.prototype.toString,m.prototype.equals=function(ce){if(!m.isBuffer(ce))throw new TypeError("Argument must be a Buffer");return this===ce||m.compare(this,ce)===0},m.prototype.inspect=function(){var ce="",ge=t.INSPECT_MAX_BYTES;return ce=this.toString("hex",0,ge).replace(/(.{2})/g,"$1 ").trim(),this.length>ge&&(ce+=" ... "),"<Buffer "+ce+">"},d&&(m.prototype[d]=m.prototype.inspect),m.prototype.compare=function(ce,ge,G,ae,_e){if(Ze(ce,Uint8Array)&&(ce=m.from(ce,ce.offset,ce.byteLength)),!m.isBuffer(ce))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof ce);if(ge===void 0&&(ge=0),G===void 0&&(G=ce?ce.length:0),ae===void 0&&(ae=0),_e===void 0&&(_e=this.length),ge<0||G>ce.length||ae<0||_e>this.length)throw new RangeError("out of range index");if(ae>=_e&&ge>=G)return 0;if(ae>=_e)return-1;if(ge>=G)return 1;if(this===ce)return 0;for(var Ae=(_e>>>=0)-(ae>>>=0),yt=(G>>>=0)-(ge>>>=0),zt=Math.min(Ae,yt),vt=this.slice(ae,_e),Lt=ce.slice(ge,G),bt=0;bt<zt;++bt)if(vt[bt]!==Lt[bt]){Ae=vt[bt],yt=Lt[bt];break}return Ae<yt?-1:yt<Ae?1:0},m.prototype.includes=function(ce,ge,G){return this.indexOf(ce,ge,G)!==-1},m.prototype.indexOf=function(ce,ge,G){return se(this,ce,ge,G,!0)},m.prototype.lastIndexOf=function(ce,ge,G){return se(this,ce,ge,G,!1)},m.prototype.write=function(ce,ge,G,ae){if(ge===void 0)ae="utf8",G=this.length,ge=0;else if(G===void 0&&typeof ge=="string")ae=ge,G=this.length,ge=0;else{if(!isFinite(ge))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");ge>>>=0,isFinite(G)?(G>>>=0,ae===void 0&&(ae="utf8")):(ae=G,G=void 0)}var _e=this.length-ge;if((G===void 0||G>_e)&&(G=_e),ce.length>0&&(G<0||ge<0)||ge>this.length)throw new RangeError("Attempt to write outside buffer bounds");ae||(ae="utf8");for(var Ae=!1;;)switch(ae){case"hex":return Re(this,ce,ge,G);case"utf8":case"utf-8":return Be(this,ce,ge,G);case"ascii":case"latin1":case"binary":return j(this,ce,ge,G);case"base64":return M(this,ce,ge,G);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Z(this,ce,ge,G);default:if(Ae)throw new TypeError("Unknown encoding: "+ae);ae=(""+ae).toLowerCase(),Ae=!0}},m.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ue=4096;function $e(ce,ge,G){var ae="";G=Math.min(ce.length,G);for(var _e=ge;_e<G;++_e)ae+=String.fromCharCode(127&ce[_e]);return ae}function xe(ce,ge,G){var ae="";G=Math.min(ce.length,G);for(var _e=ge;_e<G;++_e)ae+=String.fromCharCode(ce[_e]);return ae}function lt(ce,ge,G){var ae=ce.length;(!ge||ge<0)&&(ge=0),(!G||G<0||G>ae)&&(G=ae);for(var _e="",Ae=ge;Ae<G;++Ae)_e+=nn[ce[Ae]];return _e}function et(ce,ge,G){for(var ae=ce.slice(ge,G),_e="",Ae=0;Ae<ae.length-1;Ae+=2)_e+=String.fromCharCode(ae[Ae]+256*ae[Ae+1]);return _e}function Xe(ce,ge,G){if(ce%1!=0||ce<0)throw new RangeError("offset is not uint");if(ce+ge>G)throw new RangeError("Trying to access beyond buffer length")}function ut(ce,ge,G,ae,_e,Ae){if(!m.isBuffer(ce))throw new TypeError('"buffer" argument must be a Buffer instance');if(ge>_e||ge<Ae)throw new RangeError('"value" argument is out of bounds');if(G+ae>ce.length)throw new RangeError("Index out of range")}function Dt(ce,ge,G,ae,_e,Ae){if(G+ae>ce.length)throw new RangeError("Index out of range");if(G<0)throw new RangeError("Index out of range")}function dt(ce,ge,G,ae,_e){return ge=+ge,G>>>=0,_e||Dt(ce,0,G,4),l.write(ce,ge,G,ae,23,4),G+4}function Et(ce,ge,G,ae,_e){return ge=+ge,G>>>=0,_e||Dt(ce,0,G,8),l.write(ce,ge,G,ae,52,8),G+8}m.prototype.slice=function(ce,ge){var G=this.length;(ce=~~ce)<0?(ce+=G)<0&&(ce=0):ce>G&&(ce=G),(ge=ge===void 0?G:~~ge)<0?(ge+=G)<0&&(ge=0):ge>G&&(ge=G),ge<ce&&(ge=ce);var ae=this.subarray(ce,ge);return Object.setPrototypeOf(ae,m.prototype),ae},m.prototype.readUintLE=m.prototype.readUIntLE=function(ce,ge,G){ce>>>=0,ge>>>=0,G||Xe(ce,ge,this.length);for(var ae=this[ce],_e=1,Ae=0;++Ae<ge&&(_e*=256);)ae+=this[ce+Ae]*_e;return ae},m.prototype.readUintBE=m.prototype.readUIntBE=function(ce,ge,G){ce>>>=0,ge>>>=0,G||Xe(ce,ge,this.length);for(var ae=this[ce+--ge],_e=1;ge>0&&(_e*=256);)ae+=this[ce+--ge]*_e;return ae},m.prototype.readUint8=m.prototype.readUInt8=function(ce,ge){return ce>>>=0,ge||Xe(ce,1,this.length),this[ce]},m.prototype.readUint16LE=m.prototype.readUInt16LE=function(ce,ge){return ce>>>=0,ge||Xe(ce,2,this.length),this[ce]|this[ce+1]<<8},m.prototype.readUint16BE=m.prototype.readUInt16BE=function(ce,ge){return ce>>>=0,ge||Xe(ce,2,this.length),this[ce]<<8|this[ce+1]},m.prototype.readUint32LE=m.prototype.readUInt32LE=function(ce,ge){return ce>>>=0,ge||Xe(ce,4,this.length),(this[ce]|this[ce+1]<<8|this[ce+2]<<16)+16777216*this[ce+3]},m.prototype.readUint32BE=m.prototype.readUInt32BE=function(ce,ge){return ce>>>=0,ge||Xe(ce,4,this.length),16777216*this[ce]+(this[ce+1]<<16|this[ce+2]<<8|this[ce+3])},m.prototype.readIntLE=function(ce,ge,G){ce>>>=0,ge>>>=0,G||Xe(ce,ge,this.length);for(var ae=this[ce],_e=1,Ae=0;++Ae<ge&&(_e*=256);)ae+=this[ce+Ae]*_e;return ae>=(_e*=128)&&(ae-=Math.pow(2,8*ge)),ae},m.prototype.readIntBE=function(ce,ge,G){ce>>>=0,ge>>>=0,G||Xe(ce,ge,this.length);for(var ae=ge,_e=1,Ae=this[ce+--ae];ae>0&&(_e*=256);)Ae+=this[ce+--ae]*_e;return Ae>=(_e*=128)&&(Ae-=Math.pow(2,8*ge)),Ae},m.prototype.readInt8=function(ce,ge){return ce>>>=0,ge||Xe(ce,1,this.length),128&this[ce]?-1*(255-this[ce]+1):this[ce]},m.prototype.readInt16LE=function(ce,ge){ce>>>=0,ge||Xe(ce,2,this.length);var G=this[ce]|this[ce+1]<<8;return 32768&G?4294901760|G:G},m.prototype.readInt16BE=function(ce,ge){ce>>>=0,ge||Xe(ce,2,this.length);var G=this[ce+1]|this[ce]<<8;return 32768&G?4294901760|G:G},m.prototype.readInt32LE=function(ce,ge){return ce>>>=0,ge||Xe(ce,4,this.length),this[ce]|this[ce+1]<<8|this[ce+2]<<16|this[ce+3]<<24},m.prototype.readInt32BE=function(ce,ge){return ce>>>=0,ge||Xe(ce,4,this.length),this[ce]<<24|this[ce+1]<<16|this[ce+2]<<8|this[ce+3]},m.prototype.readFloatLE=function(ce,ge){return ce>>>=0,ge||Xe(ce,4,this.length),l.read(this,ce,!0,23,4)},m.prototype.readFloatBE=function(ce,ge){return ce>>>=0,ge||Xe(ce,4,this.length),l.read(this,ce,!1,23,4)},m.prototype.readDoubleLE=function(ce,ge){return ce>>>=0,ge||Xe(ce,8,this.length),l.read(this,ce,!0,52,8)},m.prototype.readDoubleBE=function(ce,ge){return ce>>>=0,ge||Xe(ce,8,this.length),l.read(this,ce,!1,52,8)},m.prototype.writeUintLE=m.prototype.writeUIntLE=function(ce,ge,G,ae){ce=+ce,ge>>>=0,G>>>=0,ae||ut(this,ce,ge,G,Math.pow(2,8*G)-1,0);var _e=1,Ae=0;for(this[ge]=255&ce;++Ae<G&&(_e*=256);)this[ge+Ae]=ce/_e&255;return ge+G},m.prototype.writeUintBE=m.prototype.writeUIntBE=function(ce,ge,G,ae){ce=+ce,ge>>>=0,G>>>=0,ae||ut(this,ce,ge,G,Math.pow(2,8*G)-1,0);var _e=G-1,Ae=1;for(this[ge+_e]=255&ce;--_e>=0&&(Ae*=256);)this[ge+_e]=ce/Ae&255;return ge+G},m.prototype.writeUint8=m.prototype.writeUInt8=function(ce,ge,G){return ce=+ce,ge>>>=0,G||ut(this,ce,ge,1,255,0),this[ge]=255&ce,ge+1},m.prototype.writeUint16LE=m.prototype.writeUInt16LE=function(ce,ge,G){return ce=+ce,ge>>>=0,G||ut(this,ce,ge,2,65535,0),this[ge]=255&ce,this[ge+1]=ce>>>8,ge+2},m.prototype.writeUint16BE=m.prototype.writeUInt16BE=function(ce,ge,G){return ce=+ce,ge>>>=0,G||ut(this,ce,ge,2,65535,0),this[ge]=ce>>>8,this[ge+1]=255&ce,ge+2},m.prototype.writeUint32LE=m.prototype.writeUInt32LE=function(ce,ge,G){return ce=+ce,ge>>>=0,G||ut(this,ce,ge,4,4294967295,0),this[ge+3]=ce>>>24,this[ge+2]=ce>>>16,this[ge+1]=ce>>>8,this[ge]=255&ce,ge+4},m.prototype.writeUint32BE=m.prototype.writeUInt32BE=function(ce,ge,G){return ce=+ce,ge>>>=0,G||ut(this,ce,ge,4,4294967295,0),this[ge]=ce>>>24,this[ge+1]=ce>>>16,this[ge+2]=ce>>>8,this[ge+3]=255&ce,ge+4},m.prototype.writeIntLE=function(ce,ge,G,ae){if(ce=+ce,ge>>>=0,!ae){var _e=Math.pow(2,8*G-1);ut(this,ce,ge,G,_e-1,-_e)}var Ae=0,yt=1,zt=0;for(this[ge]=255&ce;++Ae<G&&(yt*=256);)ce<0&&zt===0&&this[ge+Ae-1]!==0&&(zt=1),this[ge+Ae]=(ce/yt|0)-zt&255;return ge+G},m.prototype.writeIntBE=function(ce,ge,G,ae){if(ce=+ce,ge>>>=0,!ae){var _e=Math.pow(2,8*G-1);ut(this,ce,ge,G,_e-1,-_e)}var Ae=G-1,yt=1,zt=0;for(this[ge+Ae]=255&ce;--Ae>=0&&(yt*=256);)ce<0&&zt===0&&this[ge+Ae+1]!==0&&(zt=1),this[ge+Ae]=(ce/yt|0)-zt&255;return ge+G},m.prototype.writeInt8=function(ce,ge,G){return ce=+ce,ge>>>=0,G||ut(this,ce,ge,1,127,-128),ce<0&&(ce=255+ce+1),this[ge]=255&ce,ge+1},m.prototype.writeInt16LE=function(ce,ge,G){return ce=+ce,ge>>>=0,G||ut(this,ce,ge,2,32767,-32768),this[ge]=255&ce,this[ge+1]=ce>>>8,ge+2},m.prototype.writeInt16BE=function(ce,ge,G){return ce=+ce,ge>>>=0,G||ut(this,ce,ge,2,32767,-32768),this[ge]=ce>>>8,this[ge+1]=255&ce,ge+2},m.prototype.writeInt32LE=function(ce,ge,G){return ce=+ce,ge>>>=0,G||ut(this,ce,ge,4,2147483647,-2147483648),this[ge]=255&ce,this[ge+1]=ce>>>8,this[ge+2]=ce>>>16,this[ge+3]=ce>>>24,ge+4},m.prototype.writeInt32BE=function(ce,ge,G){return ce=+ce,ge>>>=0,G||ut(this,ce,ge,4,2147483647,-2147483648),ce<0&&(ce=4294967295+ce+1),this[ge]=ce>>>24,this[ge+1]=ce>>>16,this[ge+2]=ce>>>8,this[ge+3]=255&ce,ge+4},m.prototype.writeFloatLE=function(ce,ge,G){return dt(this,ce,ge,!0,G)},m.prototype.writeFloatBE=function(ce,ge,G){return dt(this,ce,ge,!1,G)},m.prototype.writeDoubleLE=function(ce,ge,G){return Et(this,ce,ge,!0,G)},m.prototype.writeDoubleBE=function(ce,ge,G){return Et(this,ce,ge,!1,G)},m.prototype.copy=function(ce,ge,G,ae){if(!m.isBuffer(ce))throw new TypeError("argument should be a Buffer");if(G||(G=0),ae||ae===0||(ae=this.length),ge>=ce.length&&(ge=ce.length),ge||(ge=0),ae>0&&ae<G&&(ae=G),ae===G||ce.length===0||this.length===0)return 0;if(ge<0)throw new RangeError("targetStart out of bounds");if(G<0||G>=this.length)throw new RangeError("Index out of range");if(ae<0)throw new RangeError("sourceEnd out of bounds");ae>this.length&&(ae=this.length),ce.length-ge<ae-G&&(ae=ce.length-ge+G);var _e=ae-G;return this===ce&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(ge,G,ae):Uint8Array.prototype.set.call(ce,this.subarray(G,ae),ge),_e},m.prototype.fill=function(ce,ge,G,ae){if(typeof ce=="string"){if(typeof ge=="string"?(ae=ge,ge=0,G=this.length):typeof G=="string"&&(ae=G,G=this.length),ae!==void 0&&typeof ae!="string")throw new TypeError("encoding must be a string");if(typeof ae=="string"&&!m.isEncoding(ae))throw new TypeError("Unknown encoding: "+ae);if(ce.length===1){var _e=ce.charCodeAt(0);(ae==="utf8"&&_e<128||ae==="latin1")&&(ce=_e)}}else typeof ce=="number"?ce&=255:typeof ce=="boolean"&&(ce=Number(ce));if(ge<0||this.length<ge||this.length<G)throw new RangeError("Out of range index");if(G<=ge)return this;var Ae;if(ge>>>=0,G=G===void 0?this.length:G>>>0,ce||(ce=0),typeof ce=="number")for(Ae=ge;Ae<G;++Ae)this[Ae]=ce;else{var yt=m.isBuffer(ce)?ce:m.from(ce,ae),zt=yt.length;if(zt===0)throw new TypeError('The value "'+ce+'" is invalid for argument "value"');for(Ae=0;Ae<G-ge;++Ae)this[Ae+ge]=yt[Ae%zt]}return this};var Rt=/[^+/0-9A-Za-z-_]/g;function mn(ce,ge){var G;ge=ge||1/0;for(var ae=ce.length,_e=null,Ae=[],yt=0;yt<ae;++yt){if((G=ce.charCodeAt(yt))>55295&&G<57344){if(!_e){if(G>56319){(ge-=3)>-1&&Ae.push(239,191,189);continue}if(yt+1===ae){(ge-=3)>-1&&Ae.push(239,191,189);continue}_e=G;continue}if(G<56320){(ge-=3)>-1&&Ae.push(239,191,189),_e=G;continue}G=65536+(_e-55296<<10|G-56320)}else _e&&(ge-=3)>-1&&Ae.push(239,191,189);if(_e=null,G<128){if((ge-=1)<0)break;Ae.push(G)}else if(G<2048){if((ge-=2)<0)break;Ae.push(G>>6|192,63&G|128)}else if(G<65536){if((ge-=3)<0)break;Ae.push(G>>12|224,G>>6&63|128,63&G|128)}else{if(!(G<1114112))throw new Error("Invalid code point");if((ge-=4)<0)break;Ae.push(G>>18|240,G>>12&63|128,G>>6&63|128,63&G|128)}}return Ae}function Tn(ce){return r.toByteArray(function(ge){if((ge=(ge=ge.split("=")[0]).trim().replace(Rt,"")).length<2)return"";for(;ge.length%4!=0;)ge+="=";return ge}(ce))}function Qe(ce,ge,G,ae){for(var _e=0;_e<ae&&!(_e+G>=ge.length||_e>=ce.length);++_e)ge[_e+G]=ce[_e];return _e}function Ze(ce,ge){return ce instanceof ge||ce!=null&&ce.constructor!=null&&ce.constructor.name!=null&&ce.constructor.name===ge.name}function at(ce){return ce!=ce}var nn=function(){for(var ce="0123456789abcdef",ge=new Array(256),G=0;G<16;++G)for(var ae=16*G,_e=0;_e<16;++_e)ge[ae+_e]=ce[G]+ce[_e];return ge}()},6877:function(u,t){var n={parseBuffer:function(d){return new r(d).parse()},addBoxProcessor:function(d,f){typeof d=="string"&&typeof f=="function"&&(l.prototype._boxProcessors[d]=f)},createFile:function(){return new r},createBox:function(d,f,p){var m=l.create(d);return f&&f.append(m,p),m},createFullBox:function(d,f,p){var m=n.createBox(d,f,p);return m.version=0,m.flags=0,m},Utils:{}};n.Utils.dataViewToString=function(d,f){var p=f||"utf-8";if(typeof TextDecoder<"u")return new TextDecoder(p).decode(d);var m=[],y=0;if(p==="utf-8")for(;y<d.byteLength;){var b=d.getUint8(y++);b<128||(b<224?(b=(31&b)<<6,b|=63&d.getUint8(y++)):b<240?(b=(15&b)<<12,b|=(63&d.getUint8(y++))<<6,b|=63&d.getUint8(y++)):(b=(7&b)<<18,b|=(63&d.getUint8(y++))<<12,b|=(63&d.getUint8(y++))<<6,b|=63&d.getUint8(y++))),m.push(String.fromCharCode(b))}else for(;y<d.byteLength;)m.push(String.fromCharCode(d.getUint8(y++)));return m.join("")},n.Utils.utf8ToByteArray=function(d){var f,p;if(typeof TextEncoder<"u")f=new TextEncoder().encode(d);else for(f=[],p=0;p<d.length;++p){var m=d.charCodeAt(p);m<128?f.push(m):m<2048?(f.push(192|m>>6),f.push(128|63&m)):m<65536?(f.push(224|m>>12),f.push(128|63&m>>6),f.push(128|63&m)):(f.push(240|m>>18),f.push(128|63&m>>12),f.push(128|63&m>>6),f.push(128|63&m))}return f},n.Utils.appendBox=function(d,f,p){if(f._offset=d._cursor.offset,f._root=d._root?d._root:d,f._raw=d._raw,f._parent=d,p!==-1)if(p!=null){var m,y=-1;if(typeof p=="number")y=p;else{if(typeof p=="string")m=p;else{if(typeof p!="object"||!p.type)return void d.boxes.push(f);m=p.type}for(var b=0;b<d.boxes.length;b++)if(m===d.boxes[b].type){y=b+1;break}}d.boxes.splice(y,0,f)}else d.boxes.push(f)},t.parseBuffer=n.parseBuffer,t.addBoxProcessor=n.addBoxProcessor,t.createFile=n.createFile,t.createBox=n.createBox,t.createFullBox=n.createFullBox,t.Utils=n.Utils,n.Cursor=function(d){this.offset=d===void 0?0:d};var r=function(d){this._cursor=new n.Cursor,this.boxes=[],d&&(this._raw=new DataView(d))};r.prototype.fetch=function(d){var f=this.fetchAll(d,!0);return f.length?f[0]:null},r.prototype.fetchAll=function(d,f){var p=[];return r._sweep.call(this,d,p,f),p},r.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var d=l.parse(this);if(d.type===void 0)break;this.boxes.push(d)}return this},r._sweep=function(d,f,p){for(var m in this.type&&this.type==d&&f.push(this),this.boxes){if(f.length&&p)return;r._sweep.call(this.boxes[m],d,f,p)}},r.prototype.write=function(){var d,f=0;for(d=0;d<this.boxes.length;d++)f+=this.boxes[d].getLength(!1);var p=new Uint8Array(f);for(this._rawo=new DataView(p.buffer),this.bytes=p,this._cursor.offset=0,d=0;d<this.boxes.length;d++)this.boxes[d].write();return p.buffer},r.prototype.append=function(d,f){n.Utils.appendBox(this,d,f)};var l=function(){this._cursor=new n.Cursor};l.parse=function(d){var f=new l;return f._offset=d._cursor.offset,f._root=d._root?d._root:d,f._raw=d._raw,f._parent=d,f._parseBox(),d._cursor.offset=f._raw.byteOffset+f._raw.byteLength,f},l.create=function(d){var f=new l;return f.type=d,f.boxes=[],f},l.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca","meta","grpl","prsl"],l.prototype._boxProcessors={},l.prototype._procField=function(d,f,p){this._parsing?this[d]=this._readField(f,p):this._writeField(f,p,this[d])},l.prototype._procFieldArray=function(d,f,p,m){var y;if(this._parsing)for(this[d]=[],y=0;y<f;y++)this[d][y]=this._readField(p,m);else for(y=0;y<this[d].length;y++)this._writeField(p,m,this[d][y])},l.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},l.prototype._procEntries=function(d,f,p){var m;if(this._parsing)for(this[d]=[],m=0;m<f;m++)this[d].push({}),p.call(this,this[d][m]);else for(m=0;m<f;m++)p.call(this,this[d][m])},l.prototype._procSubEntries=function(d,f,p,m){var y;if(this._parsing)for(d[f]=[],y=0;y<p;y++)d[f].push({}),m.call(this,d[f][y]);else for(y=0;y<p;y++)m.call(this,d[f][y])},l.prototype._procEntryField=function(d,f,p,m){this._parsing?d[f]=this._readField(p,m):this._writeField(p,m,d[f])},l.prototype._procSubBoxes=function(d,f){var p;if(this._parsing)for(this[d]=[],p=0;p<f;p++)this[d].push(l.parse(this));else for(p=0;p<f;p++)this._rawo?this[d][p].write():this.size+=this[d][p].getLength()},l.prototype._readField=function(d,f){switch(d){case"uint":return this._readUint(f);case"int":return this._readInt(f);case"template":return this._readTemplate(f);case"string":return f===-1?this._readTerminatedString():this._readString(f);case"data":return this._readData(f);case"utf8":return this._readUTF8String();case"utf8string":return this._readUTF8TerminatedString();default:return-1}},l.prototype._readInt=function(d){var f=null,p=this._cursor.offset-this._raw.byteOffset;switch(d){case 8:f=this._raw.getInt8(p);break;case 16:f=this._raw.getInt16(p);break;case 32:f=this._raw.getInt32(p);break;case 64:var m=this._raw.getInt32(p),y=this._raw.getInt32(p+4);f=m*Math.pow(2,32)+y}return this._cursor.offset+=d>>3,f},l.prototype._readUint=function(d){var f,p,m=null,y=this._cursor.offset-this._raw.byteOffset;switch(d){case 8:m=this._raw.getUint8(y);break;case 16:m=this._raw.getUint16(y);break;case 24:m=((f=this._raw.getUint16(y))<<8)+(p=this._raw.getUint8(y+2));break;case 32:m=this._raw.getUint32(y);break;case 64:f=this._raw.getUint32(y),p=this._raw.getUint32(y+4),m=f*Math.pow(2,32)+p}return this._cursor.offset+=d>>3,m},l.prototype._readString=function(d){for(var f="",p=0;p<d;p++){var m=this._readUint(8);f+=String.fromCharCode(m)}return f},l.prototype._readTemplate=function(d){return this._readUint(d/2)+this._readUint(d/2)/Math.pow(2,d/2)},l.prototype._readTerminatedString=function(){for(var d="";this._cursor.offset-this._offset<this._raw.byteLength;){var f=this._readUint(8);if(f===0)break;d+=String.fromCharCode(f)}return d},l.prototype._readData=function(d){var f=d>0?d:this._raw.byteLength-(this._cursor.offset-this._offset);if(f>0){var p=new Uint8Array(this._raw.buffer,this._cursor.offset,f);return this._cursor.offset+=f,p}return null},l.prototype._readUTF8String=function(){var d=this._raw.byteLength-(this._cursor.offset-this._offset),f=null;return d>0&&(f=new DataView(this._raw.buffer,this._cursor.offset,d),this._cursor.offset+=d),f&&n.Utils.dataViewToString(f)},l.prototype._readUTF8TerminatedString=function(){var d=this._raw.byteLength-(this._cursor.offset-this._offset),f=null;if(d>0){var p;for(f=new DataView(this._raw.buffer,this._cursor.offset,d),p=0;p<d&&f.getUint8(p)!==0;p++);f=new DataView(this._raw.buffer,this._cursor.offset,p),this._cursor.offset+=Math.min(p+1,d)}return f&&n.Utils.dataViewToString(f)},l.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1?this._parseContainerBox():this._data=this._readData())}},l.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},l.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(l.parse(this))},l.prototype.append=function(d,f){n.Utils.appendBox(this,d,f)},l.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1)for(var d=0;d<this.boxes.length;d++)this.size+=this.boxes[d].getLength();return this._data&&this._writeData(this._data),this.size},l.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1)for(var d=0;d<this.boxes.length;d++)this.boxes[d].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},l.prototype._writeInt=function(d,f){if(this._rawo){var p=this._cursor.offset-this._rawo.byteOffset;switch(d){case 8:this._rawo.setInt8(p,f);break;case 16:this._rawo.setInt16(p,f);break;case 32:this._rawo.setInt32(p,f);break;case 64:var m=Math.floor(f/Math.pow(2,32)),y=f-m*Math.pow(2,32);this._rawo.setUint32(p,m),this._rawo.setUint32(p+4,y)}this._cursor.offset+=d>>3}else this.size+=d>>3},l.prototype._writeUint=function(d,f){if(this._rawo){var p,m,y=this._cursor.offset-this._rawo.byteOffset;switch(d){case 8:this._rawo.setUint8(y,f);break;case 16:this._rawo.setUint16(y,f);break;case 24:p=(16776960&f)>>8,m=255&f,this._rawo.setUint16(y,p),this._rawo.setUint8(y+2,m);break;case 32:this._rawo.setUint32(y,f);break;case 64:m=f-(p=Math.floor(f/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(y,p),this._rawo.setUint32(y+4,m)}this._cursor.offset+=d>>3}else this.size+=d>>3},l.prototype._writeString=function(d,f){for(var p=0;p<d;p++)this._writeUint(8,f.charCodeAt(p))},l.prototype._writeTerminatedString=function(d){if(d.length!==0){for(var f=0;f<d.length;f++)this._writeUint(8,d.charCodeAt(f));this._writeUint(8,0)}},l.prototype._writeTemplate=function(d,f){var p=Math.floor(f),m=(f-p)*Math.pow(2,d/2);this._writeUint(d/2,p),this._writeUint(d/2,m)},l.prototype._writeData=function(d){if(d)if(this._rawo){if(d instanceof Array){for(var f=this._cursor.offset-this._rawo.byteOffset,p=0;p<d.length;p++)this._rawo.setInt8(f+p,d[p]);this._cursor.offset+=d.length}d instanceof Uint8Array&&(this._root.bytes.set(d,this._cursor.offset),this._cursor.offset+=d.length)}else this.size+=d.length},l.prototype._writeUTF8String=function(d){var f=n.Utils.utf8ToByteArray(d);if(this._rawo)for(var p=new DataView(this._rawo.buffer,this._cursor.offset,f.length),m=0;m<f.length;m++)p.setUint8(m,f[m]);else this.size+=f.length},l.prototype._writeField=function(d,f,p){switch(d){case"uint":this._writeUint(f,p);break;case"int":this._writeInt(f,p);break;case"template":this._writeTemplate(f,p);break;case"string":f==-1?this._writeTerminatedString(p):this._writeString(f,p);break;case"data":this._writeData(p);break;case"utf8":this._writeUTF8String(p)}},l.prototype._boxProcessors.ardi=function(){this._procFullBox(),this._procField("audio_rendering_indication","uint",8)},l.prototype._boxProcessors.avc1=l.prototype._boxProcessors.avc2=l.prototype._boxProcessors.avc3=l.prototype._boxProcessors.avc4=l.prototype._boxProcessors.hvc1=l.prototype._boxProcessors.hev1=l.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},l.prototype._boxProcessors.ctts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(d){this._procEntryField(d,"sample_count","uint",32),this._procEntryField(d,"sample_offset",this.version===1?"int":"uint",32)})},l.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},l.prototype._boxProcessors.elng=function(){this._procFullBox(),this._procField("extended_language","utf8string")},l.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(d){this._procEntryField(d,"segment_duration","uint",this.version===1?64:32),this._procEntryField(d,"media_time","int",this.version===1?64:32),this._procEntryField(d,"media_rate_integer","int",16),this._procEntryField(d,"media_rate_fraction","int",16)})},l.prototype._boxProcessors.emsg=function(){this._procFullBox(),this.version==1?(this._procField("timescale","uint",32),this._procField("presentation_time","uint",64),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1)):(this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32)),this._procField("message_data","data",-1)},l.prototype._boxProcessors.free=l.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},l.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},l.prototype._boxProcessors.ftyp=l.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var d=-1;this._parsing&&(d=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",d,"string",4)},l.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},l.prototype._boxProcessors.imda=function(){this._procField("imda_identifier","uint",32),this._procField("data","data",-1)},l.prototype._boxProcessors.kind=function(){this._procFullBox(),this._procField("schemeURI","utf8string"),this._procField("value","utf8string")},l.prototype._boxProcessors.labl=function(){this._procFullBox(),this.is_group_label=!!(1&this.flags),this._procField("label_id","uint",16),this._procField("language","utf8string"),this._procField("label","utf8string")},l.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},l.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",this.version==1?64:32),this._parsing||typeof this.language!="string"||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},l.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",this.version==1?64:32)},l.prototype._boxProcessors.meta=function(){this._procFullBox()},l.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},l.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},l.prototype._boxProcessors.mp4a=l.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},l.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",this.version==1?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},l.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},l.prototype._boxProcessors.prft=function(){this._procFullBox(),this._procField("reference_track_ID","uint",32),this._procField("ntp_timestamp_sec","uint",32),this._procField("ntp_timestamp_frac","uint",32),this._procField("media_time","uint",this.version==1?64:32)},l.prototype._boxProcessors.prsl=function(){this._procFullBox(),this._procField("group_id","uint",32),this._procField("num_entities_in_group","uint",32),this._procEntries("entities",this.num_entities_in_group,function(d){this._procEntryField(d,"entity_id","uint",32)}),4096&this.flags&&this._procField("preselection_tag","utf8string"),8192&this.flags&&this._procField("selection_priority","uint",8),16384&this.flags&&this._procField("interleaving_tag","utf8string")},l.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},l.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},l.prototype._boxProcessors.sdtp=function(){this._procFullBox();var d=-1;this._parsing&&(d=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",d,"uint",8)},l.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",this.version==1?64:32),this._procField("first_offset","uint",this.version==1?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,function(d){this._parsing||(d.reference=(1&d.reference_type)<<31,d.reference|=2147483647&d.referenced_size,d.sap=(1&d.starts_with_SAP)<<31,d.sap|=(3&d.SAP_type)<<28,d.sap|=268435455&d.SAP_delta_time),this._procEntryField(d,"reference","uint",32),this._procEntryField(d,"subsegment_duration","uint",32),this._procEntryField(d,"sap","uint",32),this._parsing&&(d.reference_type=d.reference>>31&1,d.referenced_size=2147483647&d.reference,d.starts_with_SAP=d.sap>>31&1,d.SAP_type=d.sap>>28&7,d.SAP_delta_time=268435455&d.sap)})},l.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},l.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,function(d){this._procEntryField(d,"ranges_count","uint",32),this._procSubEntries(d,"ranges",d.ranges_count,function(f){this._procEntryField(f,"level","uint",8),this._procEntryField(f,"range_size","uint",24)})})},l.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},l.prototype._boxProcessors.sttg=function(){this._procField("settings","utf8")},l.prototype._boxProcessors.stts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(d){this._procEntryField(d,"sample_count","uint",32),this._procEntryField(d,"sample_delta","uint",32)})},l.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,function(d){this._procEntryField(d,"sample_delta","uint",32),this._procEntryField(d,"subsample_count","uint",16),this._procSubEntries(d,"subsamples",d.subsample_count,function(f){this._procEntryField(f,"subsample_size","uint",this.version===1?32:16),this._procEntryField(f,"subsample_priority","uint",8),this._procEntryField(f,"discardable","uint",8),this._procEntryField(f,"codec_specific_parameters","uint",32)})})},l.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},l.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",this.version==1?64:32)},l.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},l.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,function(d){this._procEntryField(d,"time","uint",this.version===1?64:32),this._procEntryField(d,"moof_offset","uint",this.version===1?64:32),this._procEntryField(d,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(d,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(d,"sample_number","uint",8*(this.length_size_of_sample_num+1))})},l.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",this.version==1?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},l.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},l.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,function(d){256&this.flags&&this._procEntryField(d,"sample_duration","uint",32),512&this.flags&&this._procEntryField(d,"sample_size","uint",32),1024&this.flags&&this._procEntryField(d,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(d,"sample_composition_time_offset",this.version===1?"int":"uint",32)})},l.prototype._boxProcessors["url "]=l.prototype._boxProcessors["urn "]=function(){this._procFullBox(),this.type==="urn "&&this._procField("name","string",-1),this._procField("location","string",-1)},l.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},l.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},l.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},l.prototype._boxProcessors.vtte=function(){}},9826:function(u){var t,n=typeof Reflect=="object"?Reflect:null,r=n&&typeof n.apply=="function"?n.apply:function(U,Y,se){return Function.prototype.apply.call(U,Y,se)};t=n&&typeof n.ownKeys=="function"?n.ownKeys:Object.getOwnPropertySymbols?function(U){return Object.getOwnPropertyNames(U).concat(Object.getOwnPropertySymbols(U))}:function(U){return Object.getOwnPropertyNames(U)};var l=Number.isNaN||function(U){return U!=U};function d(){d.init.call(this)}u.exports=d,u.exports.once=function(U,Y){return new Promise(function(se,te){function Re(j){U.removeListener(Y,Be),te(j)}function Be(){typeof U.removeListener=="function"&&U.removeListener("error",Re),se([].slice.call(arguments))}k(U,Y,Be,{once:!0}),Y!=="error"&&function(j,M){typeof j.on=="function"&&k(j,"error",M,{once:!0})}(U,Re)})},d.EventEmitter=d,d.prototype._events=void 0,d.prototype._eventsCount=0,d.prototype._maxListeners=void 0;var f=10;function p(U){if(typeof U!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof U)}function m(U){return U._maxListeners===void 0?d.defaultMaxListeners:U._maxListeners}function y(U,Y,se,te){var Re,Be,j,M;if(p(se),(Be=U._events)===void 0?(Be=U._events=Object.create(null),U._eventsCount=0):(Be.newListener!==void 0&&(U.emit("newListener",Y,se.listener?se.listener:se),Be=U._events),j=Be[Y]),j===void 0)j=Be[Y]=se,++U._eventsCount;else if(typeof j=="function"?j=Be[Y]=te?[se,j]:[j,se]:te?j.unshift(se):j.push(se),(Re=m(U))>0&&j.length>Re&&!j.warned){j.warned=!0;var Z=new Error("Possible EventEmitter memory leak detected. "+j.length+" "+String(Y)+" listeners added. Use emitter.setMaxListeners() to increase limit");Z.name="MaxListenersExceededWarning",Z.emitter=U,Z.type=Y,Z.count=j.length,M=Z,console&&console.warn&&console.warn(M)}return U}function b(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _(U,Y,se){var te={fired:!1,wrapFn:void 0,target:U,type:Y,listener:se},Re=b.bind(te);return Re.listener=se,te.wrapFn=Re,Re}function A(U,Y,se){var te=U._events;if(te===void 0)return[];var Re=te[Y];return Re===void 0?[]:typeof Re=="function"?se?[Re.listener||Re]:[Re]:se?function(Be){for(var j=new Array(Be.length),M=0;M<j.length;++M)j[M]=Be[M].listener||Be[M];return j}(Re):T(Re,Re.length)}function w(U){var Y=this._events;if(Y!==void 0){var se=Y[U];if(typeof se=="function")return 1;if(se!==void 0)return se.length}return 0}function T(U,Y){for(var se=new Array(Y),te=0;te<Y;++te)se[te]=U[te];return se}function k(U,Y,se,te){if(typeof U.on=="function")te.once?U.once(Y,se):U.on(Y,se);else{if(typeof U.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof U);U.addEventListener(Y,function Re(Be){te.once&&U.removeEventListener(Y,Re),se(Be)})}}Object.defineProperty(d,"defaultMaxListeners",{enumerable:!0,get:function(){return f},set:function(U){if(typeof U!="number"||U<0||l(U))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+U+".");f=U}}),d.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},d.prototype.setMaxListeners=function(U){if(typeof U!="number"||U<0||l(U))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+U+".");return this._maxListeners=U,this},d.prototype.getMaxListeners=function(){return m(this)},d.prototype.emit=function(U){for(var Y=[],se=1;se<arguments.length;se++)Y.push(arguments[se]);var te=U==="error",Re=this._events;if(Re!==void 0)te=te&&Re.error===void 0;else if(!te)return!1;if(te){var Be;if(Y.length>0&&(Be=Y[0]),Be instanceof Error)throw Be;var j=new Error("Unhandled error."+(Be?" ("+Be.message+")":""));throw j.context=Be,j}var M=Re[U];if(M===void 0)return!1;if(typeof M=="function")r(M,this,Y);else{var Z=M.length,K=T(M,Z);for(se=0;se<Z;++se)r(K[se],this,Y)}return!0},d.prototype.addListener=function(U,Y){return y(this,U,Y,!1)},d.prototype.on=d.prototype.addListener,d.prototype.prependListener=function(U,Y){return y(this,U,Y,!0)},d.prototype.once=function(U,Y){return p(Y),this.on(U,_(this,U,Y)),this},d.prototype.prependOnceListener=function(U,Y){return p(Y),this.prependListener(U,_(this,U,Y)),this},d.prototype.removeListener=function(U,Y){var se,te,Re,Be,j;if(p(Y),(te=this._events)===void 0)return this;if((se=te[U])===void 0)return this;if(se===Y||se.listener===Y)--this._eventsCount==0?this._events=Object.create(null):(delete te[U],te.removeListener&&this.emit("removeListener",U,se.listener||Y));else if(typeof se!="function"){for(Re=-1,Be=se.length-1;Be>=0;Be--)if(se[Be]===Y||se[Be].listener===Y){j=se[Be].listener,Re=Be;break}if(Re<0)return this;Re===0?se.shift():function(M,Z){for(;Z+1<M.length;Z++)M[Z]=M[Z+1];M.pop()}(se,Re),se.length===1&&(te[U]=se[0]),te.removeListener!==void 0&&this.emit("removeListener",U,j||Y)}return this},d.prototype.off=d.prototype.removeListener,d.prototype.removeAllListeners=function(U){var Y,se,te;if((se=this._events)===void 0)return this;if(se.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):se[U]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete se[U]),this;if(arguments.length===0){var Re,Be=Object.keys(se);for(te=0;te<Be.length;++te)(Re=Be[te])!=="removeListener"&&this.removeAllListeners(Re);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(Y=se[U])=="function")this.removeListener(U,Y);else if(Y!==void 0)for(te=Y.length-1;te>=0;te--)this.removeListener(U,Y[te]);return this},d.prototype.listeners=function(U){return A(this,U,!0)},d.prototype.rawListeners=function(U){return A(this,U,!1)},d.listenerCount=function(U,Y){return typeof U.listenerCount=="function"?U.listenerCount(Y):w.call(U,Y)},d.prototype.listenerCount=w,d.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},7316:function(u){u.exports=function t(n,r){if(n===r)return!0;if(n&&r&&typeof n=="object"&&typeof r=="object"){if(n.constructor!==r.constructor)return!1;var l,d,f;if(Array.isArray(n)){if((l=n.length)!=r.length)return!1;for(d=l;d--!=0;)if(!t(n[d],r[d]))return!1;return!0}if(n.constructor===RegExp)return n.source===r.source&&n.flags===r.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===r.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===r.toString();if((l=(f=Object.keys(n)).length)!==Object.keys(r).length)return!1;for(d=l;d--!=0;)if(!Object.prototype.hasOwnProperty.call(r,f[d]))return!1;for(d=l;d--!=0;){var p=f[d];if(!t(n[p],r[p]))return!1}return!0}return n!=n&&r!=r}},7986:function(u,t){t.read=function(n,r,l,d,f){var p,m,y=8*f-d-1,b=(1<<y)-1,_=b>>1,A=-7,w=l?f-1:0,T=l?-1:1,k=n[r+w];for(w+=T,p=k&(1<<-A)-1,k>>=-A,A+=y;A>0;p=256*p+n[r+w],w+=T,A-=8);for(m=p&(1<<-A)-1,p>>=-A,A+=d;A>0;m=256*m+n[r+w],w+=T,A-=8);if(p===0)p=1-_;else{if(p===b)return m?NaN:1/0*(k?-1:1);m+=Math.pow(2,d),p-=_}return(k?-1:1)*m*Math.pow(2,p-d)},t.write=function(n,r,l,d,f,p){var m,y,b,_=8*p-f-1,A=(1<<_)-1,w=A>>1,T=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,k=d?0:p-1,U=d?1:-1,Y=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(y=isNaN(r)?1:0,m=A):(m=Math.floor(Math.log(r)/Math.LN2),r*(b=Math.pow(2,-m))<1&&(m--,b*=2),(r+=m+w>=1?T/b:T*Math.pow(2,1-w))*b>=2&&(m++,b/=2),m+w>=A?(y=0,m=A):m+w>=1?(y=(r*b-1)*Math.pow(2,f),m+=w):(y=r*Math.pow(2,w-1)*Math.pow(2,f),m=0));f>=8;n[l+k]=255&y,k+=U,y/=256,f-=8);for(m=m<<f|y,_+=f;_>0;n[l+k]=255&m,k+=U,m/=256,_-=8);n[l+k-U]|=128*Y}},5474:function(u,t,n){(function(r){r.parser=function(G,ae){return new f(G,ae)},r.SAXParser=f,r.SAXStream=m,r.createStream=function(G,ae){return new m(G,ae)},r.MAX_BUFFER_LENGTH=65536;var l,d=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function f(G,ae){if(!(this instanceof f))return new f(G,ae);var _e=this;(function(Ae){for(var yt=0,zt=d.length;yt<zt;yt++)Ae[d[yt]]=""})(_e),_e.q=_e.c="",_e.bufferCheckPosition=r.MAX_BUFFER_LENGTH,_e.opt=ae||{},_e.opt.lowercase=_e.opt.lowercase||_e.opt.lowercasetags,_e.looseCase=_e.opt.lowercase?"toLowerCase":"toUpperCase",_e.tags=[],_e.closed=_e.closedRoot=_e.sawRoot=!1,_e.tag=_e.error=null,_e.strict=!!G,_e.noscript=!(!G&&!_e.opt.noscript),_e.state=xe.BEGIN,_e.strictEntities=_e.opt.strictEntities,_e.ENTITIES=_e.strictEntities?Object.create(r.XML_ENTITIES):Object.create(r.ENTITIES),_e.attribList=[],_e.opt.xmlns&&(_e.ns=Object.create(se)),_e.trackPosition=_e.opt.position!==!1,_e.trackPosition&&(_e.position=_e.line=_e.column=0),et(_e,"onready")}r.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(G){function ae(){}return ae.prototype=G,new ae}),Object.keys||(Object.keys=function(G){var ae=[];for(var _e in G)G.hasOwnProperty(_e)&&ae.push(_e);return ae}),f.prototype={end:function(){Et(this)},write:function(G){var ae=this;if(this.error)throw this.error;if(ae.closed)return dt(ae,"Cannot write after close. Assign an onready handler.");if(G===null)return Et(ae);typeof G=="object"&&(G=G.toString());for(var _e=0,Ae="";Ae=ge(G,_e++),ae.c=Ae,Ae;)switch(ae.trackPosition&&(ae.position++,Ae===`
`?(ae.line++,ae.column=0):ae.column++),ae.state){case xe.BEGIN:if(ae.state=xe.BEGIN_WHITESPACE,Ae==="\uFEFF")continue;ce(ae,Ae);continue;case xe.BEGIN_WHITESPACE:ce(ae,Ae);continue;case xe.TEXT:if(ae.sawRoot&&!ae.closedRoot){for(var yt=_e-1;Ae&&Ae!=="<"&&Ae!=="&";)(Ae=ge(G,_e++))&&ae.trackPosition&&(ae.position++,Ae===`
`?(ae.line++,ae.column=0):ae.column++);ae.textNode+=G.substring(yt,_e-1)}Ae!=="<"||ae.sawRoot&&ae.closedRoot&&!ae.strict?(!K(y,Ae)||ae.sawRoot&&!ae.closedRoot||Rt(ae,"Text data outside of root node."),Ae==="&"?ae.state=xe.TEXT_ENTITY:ae.textNode+=Ae):(ae.state=xe.OPEN_WAKA,ae.startTagPosition=ae.position);continue;case xe.SCRIPT:Ae==="<"?ae.state=xe.SCRIPT_ENDING:ae.script+=Ae;continue;case xe.SCRIPT_ENDING:Ae==="/"?ae.state=xe.CLOSE_TAG:(ae.script+="<"+Ae,ae.state=xe.SCRIPT);continue;case xe.OPEN_WAKA:if(Ae==="!")ae.state=xe.SGML_DECL,ae.sgmlDecl="";else if(!Z(y,Ae))if(Z(te,Ae))ae.state=xe.OPEN_TAG,ae.tagName=Ae;else if(Ae==="/")ae.state=xe.CLOSE_TAG,ae.tagName="";else if(Ae==="?")ae.state=xe.PROC_INST,ae.procInstName=ae.procInstBody="";else{if(Rt(ae,"Unencoded <"),ae.startTagPosition+1<ae.position){var zt=ae.position-ae.startTagPosition;Ae=new Array(zt).join(" ")+Ae}ae.textNode+="<"+Ae,ae.state=xe.TEXT}continue;case xe.SGML_DECL:(ae.sgmlDecl+Ae).toUpperCase()===T?(Xe(ae,"onopencdata"),ae.state=xe.CDATA,ae.sgmlDecl="",ae.cdata=""):ae.sgmlDecl+Ae==="--"?(ae.state=xe.COMMENT,ae.comment="",ae.sgmlDecl=""):(ae.sgmlDecl+Ae).toUpperCase()===k?(ae.state=xe.DOCTYPE,(ae.doctype||ae.sawRoot)&&Rt(ae,"Inappropriately located doctype declaration"),ae.doctype="",ae.sgmlDecl=""):Ae===">"?(Xe(ae,"onsgmldeclaration",ae.sgmlDecl),ae.sgmlDecl="",ae.state=xe.TEXT):(Z(A,Ae)&&(ae.state=xe.SGML_DECL_QUOTED),ae.sgmlDecl+=Ae);continue;case xe.SGML_DECL_QUOTED:Ae===ae.q&&(ae.state=xe.SGML_DECL,ae.q=""),ae.sgmlDecl+=Ae;continue;case xe.DOCTYPE:Ae===">"?(ae.state=xe.TEXT,Xe(ae,"ondoctype",ae.doctype),ae.doctype=!0):(ae.doctype+=Ae,Ae==="["?ae.state=xe.DOCTYPE_DTD:Z(A,Ae)&&(ae.state=xe.DOCTYPE_QUOTED,ae.q=Ae));continue;case xe.DOCTYPE_QUOTED:ae.doctype+=Ae,Ae===ae.q&&(ae.q="",ae.state=xe.DOCTYPE);continue;case xe.DOCTYPE_DTD:ae.doctype+=Ae,Ae==="]"?ae.state=xe.DOCTYPE:Z(A,Ae)&&(ae.state=xe.DOCTYPE_DTD_QUOTED,ae.q=Ae);continue;case xe.DOCTYPE_DTD_QUOTED:ae.doctype+=Ae,Ae===ae.q&&(ae.state=xe.DOCTYPE_DTD,ae.q="");continue;case xe.COMMENT:Ae==="-"?ae.state=xe.COMMENT_ENDING:ae.comment+=Ae;continue;case xe.COMMENT_ENDING:Ae==="-"?(ae.state=xe.COMMENT_ENDED,ae.comment=Dt(ae.opt,ae.comment),ae.comment&&Xe(ae,"oncomment",ae.comment),ae.comment=""):(ae.comment+="-"+Ae,ae.state=xe.COMMENT);continue;case xe.COMMENT_ENDED:Ae!==">"?(Rt(ae,"Malformed comment"),ae.comment+="--"+Ae,ae.state=xe.COMMENT):ae.state=xe.TEXT;continue;case xe.CDATA:Ae==="]"?ae.state=xe.CDATA_ENDING:ae.cdata+=Ae;continue;case xe.CDATA_ENDING:Ae==="]"?ae.state=xe.CDATA_ENDING_2:(ae.cdata+="]"+Ae,ae.state=xe.CDATA);continue;case xe.CDATA_ENDING_2:Ae===">"?(ae.cdata&&Xe(ae,"oncdata",ae.cdata),Xe(ae,"onclosecdata"),ae.cdata="",ae.state=xe.TEXT):Ae==="]"?ae.cdata+="]":(ae.cdata+="]]"+Ae,ae.state=xe.CDATA);continue;case xe.PROC_INST:Ae==="?"?ae.state=xe.PROC_INST_ENDING:Z(y,Ae)?ae.state=xe.PROC_INST_BODY:ae.procInstName+=Ae;continue;case xe.PROC_INST_BODY:if(!ae.procInstBody&&Z(y,Ae))continue;Ae==="?"?ae.state=xe.PROC_INST_ENDING:ae.procInstBody+=Ae;continue;case xe.PROC_INST_ENDING:Ae===">"?(Xe(ae,"onprocessinginstruction",{name:ae.procInstName,body:ae.procInstBody}),ae.procInstName=ae.procInstBody="",ae.state=xe.TEXT):(ae.procInstBody+="?"+Ae,ae.state=xe.PROC_INST_BODY);continue;case xe.OPEN_TAG:Z(Re,Ae)?ae.tagName+=Ae:(mn(ae),Ae===">"?Ze(ae):Ae==="/"?ae.state=xe.OPEN_TAG_SLASH:(K(y,Ae)&&Rt(ae,"Invalid character in tag name"),ae.state=xe.ATTRIB));continue;case xe.OPEN_TAG_SLASH:Ae===">"?(Ze(ae,!0),at(ae)):(Rt(ae,"Forward-slash in opening tag not followed by >"),ae.state=xe.ATTRIB);continue;case xe.ATTRIB:if(Z(y,Ae))continue;Ae===">"?Ze(ae):Ae==="/"?ae.state=xe.OPEN_TAG_SLASH:Z(te,Ae)?(ae.attribName=Ae,ae.attribValue="",ae.state=xe.ATTRIB_NAME):Rt(ae,"Invalid attribute name");continue;case xe.ATTRIB_NAME:Ae==="="?ae.state=xe.ATTRIB_VALUE:Ae===">"?(Rt(ae,"Attribute without value"),ae.attribValue=ae.attribName,Qe(ae),Ze(ae)):Z(y,Ae)?ae.state=xe.ATTRIB_NAME_SAW_WHITE:Z(Re,Ae)?ae.attribName+=Ae:Rt(ae,"Invalid attribute name");continue;case xe.ATTRIB_NAME_SAW_WHITE:if(Ae==="=")ae.state=xe.ATTRIB_VALUE;else{if(Z(y,Ae))continue;Rt(ae,"Attribute without value"),ae.tag.attributes[ae.attribName]="",ae.attribValue="",Xe(ae,"onattribute",{name:ae.attribName,value:""}),ae.attribName="",Ae===">"?Ze(ae):Z(te,Ae)?(ae.attribName=Ae,ae.state=xe.ATTRIB_NAME):(Rt(ae,"Invalid attribute name"),ae.state=xe.ATTRIB)}continue;case xe.ATTRIB_VALUE:if(Z(y,Ae))continue;Z(A,Ae)?(ae.q=Ae,ae.state=xe.ATTRIB_VALUE_QUOTED):(Rt(ae,"Unquoted attribute value"),ae.state=xe.ATTRIB_VALUE_UNQUOTED,ae.attribValue=Ae);continue;case xe.ATTRIB_VALUE_QUOTED:if(Ae!==ae.q){Ae==="&"?ae.state=xe.ATTRIB_VALUE_ENTITY_Q:ae.attribValue+=Ae;continue}Qe(ae),ae.q="",ae.state=xe.ATTRIB_VALUE_CLOSED;continue;case xe.ATTRIB_VALUE_CLOSED:Z(y,Ae)?ae.state=xe.ATTRIB:Ae===">"?Ze(ae):Ae==="/"?ae.state=xe.OPEN_TAG_SLASH:Z(te,Ae)?(Rt(ae,"No whitespace between attributes"),ae.attribName=Ae,ae.attribValue="",ae.state=xe.ATTRIB_NAME):Rt(ae,"Invalid attribute name");continue;case xe.ATTRIB_VALUE_UNQUOTED:if(K(w,Ae)){Ae==="&"?ae.state=xe.ATTRIB_VALUE_ENTITY_U:ae.attribValue+=Ae;continue}Qe(ae),Ae===">"?Ze(ae):ae.state=xe.ATTRIB;continue;case xe.CLOSE_TAG:if(ae.tagName)Ae===">"?at(ae):Z(Re,Ae)?ae.tagName+=Ae:ae.script?(ae.script+="</"+ae.tagName,ae.tagName="",ae.state=xe.SCRIPT):(K(y,Ae)&&Rt(ae,"Invalid tagname in closing tag"),ae.state=xe.CLOSE_TAG_SAW_WHITE);else{if(Z(y,Ae))continue;K(te,Ae)?ae.script?(ae.script+="</"+Ae,ae.state=xe.SCRIPT):Rt(ae,"Invalid tagname in closing tag."):ae.tagName=Ae}continue;case xe.CLOSE_TAG_SAW_WHITE:if(Z(y,Ae))continue;Ae===">"?at(ae):Rt(ae,"Invalid characters in closing tag");continue;case xe.TEXT_ENTITY:case xe.ATTRIB_VALUE_ENTITY_Q:case xe.ATTRIB_VALUE_ENTITY_U:var vt,Lt;switch(ae.state){case xe.TEXT_ENTITY:vt=xe.TEXT,Lt="textNode";break;case xe.ATTRIB_VALUE_ENTITY_Q:vt=xe.ATTRIB_VALUE_QUOTED,Lt="attribValue";break;case xe.ATTRIB_VALUE_ENTITY_U:vt=xe.ATTRIB_VALUE_UNQUOTED,Lt="attribValue"}Ae===";"?(ae[Lt]+=nn(ae),ae.entity="",ae.state=vt):Z(ae.entity.length?j:Be,Ae)?ae.entity+=Ae:(Rt(ae,"Invalid character in entity name"),ae[Lt]+="&"+ae.entity+Ae,ae.entity="",ae.state=vt);continue;default:throw new Error(ae,"Unknown state: "+ae.state)}return ae.position>=ae.bufferCheckPosition&&function(bt){for(var Mt=Math.max(r.MAX_BUFFER_LENGTH,10),kt=0,Bt=0,sn=d.length;Bt<sn;Bt++){var ti=bt[d[Bt]].length;if(ti>Mt)switch(d[Bt]){case"textNode":ut(bt);break;case"cdata":Xe(bt,"oncdata",bt.cdata),bt.cdata="";break;case"script":Xe(bt,"onscript",bt.script),bt.script="";break;default:dt(bt,"Max buffer length exceeded: "+d[Bt])}kt=Math.max(kt,ti)}var On=r.MAX_BUFFER_LENGTH-kt;bt.bufferCheckPosition=On+bt.position}(ae),ae},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var G;ut(G=this),G.cdata!==""&&(Xe(G,"oncdata",G.cdata),G.cdata=""),G.script!==""&&(Xe(G,"onscript",G.script),G.script="")}};try{l=n(3515).Stream}catch{l=function(){}}var p=r.EVENTS.filter(function(G){return G!=="error"&&G!=="end"});function m(G,ae){if(!(this instanceof m))return new m(G,ae);l.apply(this),this._parser=new f(G,ae),this.writable=!0,this.readable=!0;var _e=this;this._parser.onend=function(){_e.emit("end")},this._parser.onerror=function(Ae){_e.emit("error",Ae),_e._parser.error=null},this._decoder=null,p.forEach(function(Ae){Object.defineProperty(_e,"on"+Ae,{get:function(){return _e._parser["on"+Ae]},set:function(yt){if(!yt)return _e.removeAllListeners(Ae),_e._parser["on"+Ae]=yt,yt;_e.on(Ae,yt)},enumerable:!0,configurable:!1})})}m.prototype=Object.create(l.prototype,{constructor:{value:m}}),m.prototype.write=function(G){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(G)){if(!this._decoder){var ae=n(748).StringDecoder;this._decoder=new ae("utf8")}G=this._decoder.write(G)}return this._parser.write(G.toString()),this.emit("data",G),!0},m.prototype.end=function(G){return G&&G.length&&this.write(G),this._parser.end(),!0},m.prototype.on=function(G,ae){var _e=this;return _e._parser["on"+G]||p.indexOf(G)===-1||(_e._parser["on"+G]=function(){var Ae=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);Ae.splice(0,0,G),_e.emit.apply(_e,Ae)}),l.prototype.on.call(_e,G,ae)};var y=`\r
	 `,b="0124356789",_="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",A=`'"`,w=y+">",T="[CDATA[",k="DOCTYPE",U="http://www.w3.org/XML/1998/namespace",Y="http://www.w3.org/2000/xmlns/",se={xml:U,xmlns:Y};y=M(y),b=M(b),_=M(_);var te=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Re=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,Be=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,j=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;function M(G){return G.split("").reduce(function(ae,_e){return ae[_e]=!0,ae},{})}function Z(G,ae){return function(_e){return Object.prototype.toString.call(_e)==="[object RegExp]"}(G)?!!ae.match(G):G[ae]}function K(G,ae){return!Z(G,ae)}A=M(A),w=M(w);var x,ue,$e,xe=0;for(var lt in r.STATE={BEGIN:xe++,BEGIN_WHITESPACE:xe++,TEXT:xe++,TEXT_ENTITY:xe++,OPEN_WAKA:xe++,SGML_DECL:xe++,SGML_DECL_QUOTED:xe++,DOCTYPE:xe++,DOCTYPE_QUOTED:xe++,DOCTYPE_DTD:xe++,DOCTYPE_DTD_QUOTED:xe++,COMMENT_STARTING:xe++,COMMENT:xe++,COMMENT_ENDING:xe++,COMMENT_ENDED:xe++,CDATA:xe++,CDATA_ENDING:xe++,CDATA_ENDING_2:xe++,PROC_INST:xe++,PROC_INST_BODY:xe++,PROC_INST_ENDING:xe++,OPEN_TAG:xe++,OPEN_TAG_SLASH:xe++,ATTRIB:xe++,ATTRIB_NAME:xe++,ATTRIB_NAME_SAW_WHITE:xe++,ATTRIB_VALUE:xe++,ATTRIB_VALUE_QUOTED:xe++,ATTRIB_VALUE_CLOSED:xe++,ATTRIB_VALUE_UNQUOTED:xe++,ATTRIB_VALUE_ENTITY_Q:xe++,ATTRIB_VALUE_ENTITY_U:xe++,CLOSE_TAG:xe++,CLOSE_TAG_SAW_WHITE:xe++,SCRIPT:xe++,SCRIPT_ENDING:xe++},r.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},r.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(r.ENTITIES).forEach(function(G){var ae=r.ENTITIES[G],_e=typeof ae=="number"?String.fromCharCode(ae):ae;r.ENTITIES[G]=_e}),r.STATE)r.STATE[r.STATE[lt]]=lt;function et(G,ae,_e){G[ae]&&G[ae](_e)}function Xe(G,ae,_e){G.textNode&&ut(G),et(G,ae,_e)}function ut(G){G.textNode=Dt(G.opt,G.textNode),G.textNode&&et(G,"ontext",G.textNode),G.textNode=""}function Dt(G,ae){return G.trim&&(ae=ae.trim()),G.normalize&&(ae=ae.replace(/\s+/g," ")),ae}function dt(G,ae){return ut(G),G.trackPosition&&(ae+=`
Line: `+G.line+`
Column: `+G.column+`
Char: `+G.c),ae=new Error(ae),G.error=ae,et(G,"onerror",ae),G}function Et(G){return G.sawRoot&&!G.closedRoot&&Rt(G,"Unclosed root tag"),G.state!==xe.BEGIN&&G.state!==xe.BEGIN_WHITESPACE&&G.state!==xe.TEXT&&dt(G,"Unexpected end"),ut(G),G.c="",G.closed=!0,et(G,"onend"),f.call(G,G.strict,G.opt),G}function Rt(G,ae){if(typeof G!="object"||!(G instanceof f))throw new Error("bad call to strictFail");G.strict&&dt(G,ae)}function mn(G){G.strict||(G.tagName=G.tagName[G.looseCase]());var ae=G.tags[G.tags.length-1]||G,_e=G.tag={name:G.tagName,attributes:{}};G.opt.xmlns&&(_e.ns=ae.ns),G.attribList.length=0,Xe(G,"onopentagstart",_e)}function Tn(G,ae){var _e=G.indexOf(":")<0?["",G]:G.split(":"),Ae=_e[0],yt=_e[1];return ae&&G==="xmlns"&&(Ae="xmlns",yt=""),{prefix:Ae,local:yt}}function Qe(G){if(G.strict||(G.attribName=G.attribName[G.looseCase]()),G.attribList.indexOf(G.attribName)!==-1||G.tag.attributes.hasOwnProperty(G.attribName))G.attribName=G.attribValue="";else{if(G.opt.xmlns){var ae=Tn(G.attribName,!0),_e=ae.prefix,Ae=ae.local;if(_e==="xmlns")if(Ae==="xml"&&G.attribValue!==U)Rt(G,"xml: prefix must be bound to "+U+`
Actual: `+G.attribValue);else if(Ae==="xmlns"&&G.attribValue!==Y)Rt(G,"xmlns: prefix must be bound to "+Y+`
Actual: `+G.attribValue);else{var yt=G.tag,zt=G.tags[G.tags.length-1]||G;yt.ns===zt.ns&&(yt.ns=Object.create(zt.ns)),yt.ns[Ae]=G.attribValue}G.attribList.push([G.attribName,G.attribValue])}else G.tag.attributes[G.attribName]=G.attribValue,Xe(G,"onattribute",{name:G.attribName,value:G.attribValue});G.attribName=G.attribValue=""}}function Ze(G,ae){if(G.opt.xmlns){var _e=G.tag,Ae=Tn(G.tagName);_e.prefix=Ae.prefix,_e.local=Ae.local,_e.uri=_e.ns[Ae.prefix]||"",_e.prefix&&!_e.uri&&(Rt(G,"Unbound namespace prefix: "+JSON.stringify(G.tagName)),_e.uri=Ae.prefix);var yt=G.tags[G.tags.length-1]||G;_e.ns&&yt.ns!==_e.ns&&Object.keys(_e.ns).forEach(function(Vn){Xe(G,"onopennamespace",{prefix:Vn,uri:_e.ns[Vn]})});for(var zt=0,vt=G.attribList.length;zt<vt;zt++){var Lt=G.attribList[zt],bt=Lt[0],Mt=Lt[1],kt=Tn(bt,!0),Bt=kt.prefix,sn=kt.local,ti=Bt===""?"":_e.ns[Bt]||"",On={name:bt,value:Mt,prefix:Bt,local:sn,uri:ti};Bt&&Bt!=="xmlns"&&!ti&&(Rt(G,"Unbound namespace prefix: "+JSON.stringify(Bt)),On.uri=Bt),G.tag.attributes[bt]=On,Xe(G,"onattribute",On)}G.attribList.length=0}G.tag.isSelfClosing=!!ae,G.sawRoot=!0,G.tags.push(G.tag),Xe(G,"onopentag",G.tag),ae||(G.noscript||G.tagName.toLowerCase()!=="script"?G.state=xe.TEXT:G.state=xe.SCRIPT,G.tag=null,G.tagName=""),G.attribName=G.attribValue="",G.attribList.length=0}function at(G){if(!G.tagName)return Rt(G,"Weird empty close tag."),G.textNode+="</>",void(G.state=xe.TEXT);if(G.script){if(G.tagName!=="script")return G.script+="</"+G.tagName+">",G.tagName="",void(G.state=xe.SCRIPT);Xe(G,"onscript",G.script),G.script=""}var ae=G.tags.length,_e=G.tagName;G.strict||(_e=_e[G.looseCase]());for(var Ae=_e;ae--&&G.tags[ae].name!==Ae;)Rt(G,"Unexpected close tag");if(ae<0)return Rt(G,"Unmatched closing tag: "+G.tagName),G.textNode+="</"+G.tagName+">",void(G.state=xe.TEXT);G.tagName=_e;for(var yt=G.tags.length;yt-- >ae;){var zt=G.tag=G.tags.pop();G.tagName=G.tag.name,Xe(G,"onclosetag",G.tagName);var vt={};for(var Lt in zt.ns)vt[Lt]=zt.ns[Lt];var bt=G.tags[G.tags.length-1]||G;G.opt.xmlns&&zt.ns!==bt.ns&&Object.keys(zt.ns).forEach(function(Mt){var kt=zt.ns[Mt];Xe(G,"onclosenamespace",{prefix:Mt,uri:kt})})}ae===0&&(G.closedRoot=!0),G.tagName=G.attribValue=G.attribName="",G.attribList.length=0,G.state=xe.TEXT}function nn(G){var ae,_e=G.entity,Ae=_e.toLowerCase(),yt="";return G.ENTITIES[_e]?G.ENTITIES[_e]:G.ENTITIES[Ae]?G.ENTITIES[Ae]:((_e=Ae).charAt(0)==="#"&&(_e.charAt(1)==="x"?(_e=_e.slice(2),yt=(ae=parseInt(_e,16)).toString(16)):(_e=_e.slice(1),yt=(ae=parseInt(_e,10)).toString(10))),_e=_e.replace(/^0+/,""),yt.toLowerCase()!==_e?(Rt(G,"Invalid character entity"),"&"+G.entity+";"):String.fromCodePoint(ae))}function ce(G,ae){ae==="<"?(G.state=xe.OPEN_WAKA,G.startTagPosition=G.position):K(y,ae)&&(Rt(G,"Non-whitespace before first tag."),G.textNode=ae,G.state=xe.TEXT)}function ge(G,ae){var _e="";return ae<G.length&&(_e=G.charAt(ae)),_e}xe=r.STATE,String.fromCodePoint||(x=String.fromCharCode,ue=Math.floor,$e=function(){var G,ae,_e=[],Ae=-1,yt=arguments.length;if(!yt)return"";for(var zt="";++Ae<yt;){var vt=Number(arguments[Ae]);if(!isFinite(vt)||vt<0||vt>1114111||ue(vt)!==vt)throw RangeError("Invalid code point: "+vt);vt<=65535?_e.push(vt):(G=55296+((vt-=65536)>>10),ae=vt%1024+56320,_e.push(G,ae)),(Ae+1===yt||_e.length>16384)&&(zt+=x.apply(null,_e),_e.length=0)}return zt},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:$e,configurable:!0,writable:!0}):String.fromCodePoint=$e)})(t)},6739:function(u,t,n){(function(r,l,d,f,p){function m(ge){if("contents"in ge)for(var G=("styleAttrs"in ge)?ge.styleAttrs[f.byName.ruby.qname]:null,ae=ge.kind==="span"&&(G==="container"||G==="textContainer"||G==="baseContainer"),_e=ge.contents.length-1;_e>=0;_e--)!ae||"styleAttrs"in ge.contents[_e]&&f.byName.ruby.qname in ge.contents[_e].styleAttrs?m(ge.contents[_e]):delete ge.contents[_e]}function y(ge,G,ae,_e){var Ae=_e&&_e.timeContainer==="seq",yt=0;_e&&(yt=Ae&&ae?ae.end:_e.begin),G.begin=G.explicit_begin?G.explicit_begin+yt:yt;var zt=G.begin,vt=null;if("sets"in G)for(var Lt=0;Lt<G.sets.length;Lt++)y(ge,G.sets[Lt],vt,G),zt=G.timeContainer==="seq"?G.sets[Lt].end:Math.max(zt,G.sets[Lt].end),vt=G.sets[Lt];if("contents"in G){if("contents"in G)for(var bt=0;bt<G.contents.length;bt++)y(ge,G.contents[bt],vt,G),zt=G.timeContainer==="seq"?G.contents[bt].end:Math.max(zt,G.contents[bt].end),vt=G.contents[bt]}else zt=Ae?G.begin:Number.POSITIVE_INFINITY;G.explicit_end!==null&&G.explicit_dur!==null?G.end=Math.min(G.begin+G.explicit_dur,yt+G.explicit_end):G.explicit_end===null&&G.explicit_dur!==null?G.end=G.begin+G.explicit_dur:G.explicit_end!==null&&G.explicit_dur===null?G.end=yt+G.explicit_end:G.end=zt,delete G.explicit_begin,delete G.explicit_dur,delete G.explicit_end,ge._registerEvent(G)}function b(ge){this.node=ge}function _(){this.events=[],this.head=new A,this.body=null}function A(){this.styling=new w,this.layout=new U}function w(){this.styles={},this.initials={}}function T(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function k(){this.styleAttrs=null}function U(){this.regions={}}function Y(ge,G){se.call(this,"image"),this.src=ge,this.type=G}function se(ge){this.kind=ge}function te(ge){this.id=ge}function Re(ge){this.regionID=ge}function Be(ge){this.styleAttrs=ge}function j(ge){this.sets=ge}function M(ge){this.contents=ge}function Z(ge,G,ae){this.explicit_begin=ge,this.explicit_end=G,this.explicit_dur=ae}function K(){se.call(this,"body")}function x(){se.call(this,"div")}function ue(){se.call(this,"p")}function $e(){se.call(this,"span")}function xe(){se.call(this,"span")}function lt(){se.call(this,"br")}function et(){}function Xe(){}function ut(ge){return ge&&"xml:id"in ge.attributes&&ge.attributes["xml:id"].value||null}function Dt(ge){return ge&&"style"in ge.attributes?ge.attributes.style.value.split(" "):[]}function dt(ge,G){var ae={};if(ge!==null)for(var _e in ge.attributes){var Ae=ge.attributes[_e].uri+" "+ge.attributes[_e].local,yt=f.byQName[Ae];if(yt!==void 0){var zt=yt.parse(ge.attributes[_e].value);zt!==null?(ae[Ae]=zt,yt===f.byName.zIndex&&Ze(G,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):at(G,"Cannot parse styling attribute "+Ae+" --> "+ge.attributes[_e].value)}}return ae}function Et(ge,G,ae){for(var _e in ge.attributes)if(ge.attributes[_e].uri===G&&ge.attributes[_e].local===ae)return ge.attributes[_e].value;return null}function Rt(ge,G,ae){var _e,Ae=null;return(_e=/^(\d+(?:\.\d+)?)f$/.exec(ae))!==null?G!==null&&(Ae=parseFloat(_e[1])/G):(_e=/^(\d+(?:\.\d+)?)t$/.exec(ae))!==null?ge!==null&&(Ae=parseFloat(_e[1])/ge):(_e=/^(\d+(?:\.\d+)?)ms$/.exec(ae))!==null?Ae=parseFloat(_e[1])/1e3:(_e=/^(\d+(?:\.\d+)?)s$/.exec(ae))!==null?Ae=parseFloat(_e[1]):(_e=/^(\d+(?:\.\d+)?)h$/.exec(ae))!==null?Ae=3600*parseFloat(_e[1]):(_e=/^(\d+(?:\.\d+)?)m$/.exec(ae))!==null?Ae=60*parseFloat(_e[1]):(_e=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(ae))!==null?Ae=3600*parseInt(_e[1])+60*parseInt(_e[2])+parseFloat(_e[3]):(_e=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(ae))!==null&&G!==null&&(Ae=3600*parseInt(_e[1])+60*parseInt(_e[2])+parseInt(_e[3])+(_e[4]===null?0:parseInt(_e[4])/G)),Ae}function mn(ge,G,ae){for(;G.styleRefs.length>0;){var _e=G.styleRefs.pop();_e in ge.styles?(mn(ge,ge.styles[_e],ae),Qe(ge.styles[_e].styleAttrs,G.styleAttrs)):at(ae,"Non-existant style id referenced")}}function Tn(ge,G,ae,_e){for(var Ae=G.length-1;Ae>=0;Ae--){var yt=G[Ae];yt in ge.styles?Qe(ge.styles[yt].styleAttrs,ae):at(_e,"Non-existant style id referenced")}}function Qe(ge,G){for(var ae in ge)ge.hasOwnProperty(ae)&&(ae in G||(G[ae]=ge[ae]))}function Ze(ge,G){if(ge&&ge.warn&&ge.warn(G))throw G}function at(ge,G){if(ge&&ge.error&&ge.error(G))throw G}function nn(ge,G){throw ge&&ge.fatal&&ge.fatal(G),G}function ce(ge,G){for(var ae,_e=0,Ae=ge.length-1;_e<=Ae;){var yt=ge[ae=Math.floor((_e+Ae)/2)];if(yt<G)_e=ae+1;else{if(!(yt>G))return{found:!0,index:ae};Ae=ae-1}}return{found:!1,index:_e}}r.fromXML=function(ge,G,ae){var _e=l.parser(!0,{xmlns:!0}),Ae=[],yt=[],zt=[],vt=0,Lt=null;_e.onclosetag=function(sn){if(Ae[0]instanceof et)Lt.head!==null&&Lt.head.styling!==null&&Tn(Lt.head.styling,Ae[0].styleRefs,Ae[0].styleAttrs,G),delete Ae[0].styleRefs;else if(Ae[0]instanceof w)for(var ti in Ae[0].styles)Ae[0].styles.hasOwnProperty(ti)&&mn(Ae[0],Ae[0].styles[ti],G);else if(Ae[0]instanceof ue||Ae[0]instanceof $e){if(Ae[0].contents.length>1){var On,Vn=[Ae[0].contents[0]];for(On=1;On<Ae[0].contents.length;On++)Ae[0].contents[On]instanceof xe&&Vn[Vn.length-1]instanceof xe?Vn[Vn.length-1].text+=Ae[0].contents[On].text:Vn.push(Ae[0].contents[On]);Ae[0].contents=Vn}Ae[0]instanceof $e&&Ae[0].contents.length===1&&Ae[0].contents[0]instanceof xe&&(Ae[0].text=Ae[0].contents[0].text,delete Ae[0].contents)}else Ae[0]instanceof b&&(Ae[0].node.uri===d.ns_tt&&Ae[0].node.local==="metadata"?vt--:vt>0&&ae&&"onCloseTag"in ae&&ae.onCloseTag());zt.shift(),yt.shift(),Ae.shift()},_e.ontext=function(sn){if(Ae[0]!==void 0)if(Ae[0]instanceof $e||Ae[0]instanceof ue){if(Ae[0]instanceof $e){var ti=Ae[0].styleAttrs[f.byName.ruby.qname];if(ti==="container"||ti==="textContainer"||ti==="baseContainer")return}var On=new xe;On.initFromText(Lt,Ae[0],sn,yt[0],zt[0],G),Ae[0].contents.push(On)}else Ae[0]instanceof b&&vt>0&&ae&&"onText"in ae&&ae.onText(sn)},_e.onopentag=function(sn){var ti=sn.attributes["xml:space"];ti?zt.unshift(ti.value):zt.length===0?zt.unshift("default"):zt.unshift(zt[0]);var On=sn.attributes["xml:lang"];if(On?yt.unshift(On.value):yt.length===0?yt.unshift(""):yt.unshift(yt[0]),sn.uri===d.ns_tt)if(sn.local==="tt")Lt!==null&&nn(G,"Two <tt> elements at ("+this.line+","+this.column+")"),(Lt=new _).initFromNode(sn,yt[0],G),Ae.unshift(Lt);else if(sn.local==="head")Ae[0]instanceof _||nn(G,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),Ae.unshift(Lt.head);else if(sn.local==="styling")Ae[0]instanceof A||nn(G,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),Ae.unshift(Lt.head.styling);else if(sn.local==="style"){var Vn;Ae[0]instanceof w?((Vn=new T).initFromNode(sn,G),Vn.id?Lt.head.styling.styles[Vn.id]=Vn:at(G,"<style> element missing @id attribute"),Ae.unshift(Vn)):Ae[0]instanceof et?((Vn=new T).initFromNode(sn,G),Qe(Vn.styleAttrs,Ae[0].styleAttrs),Ae.unshift(Vn)):nn(G,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")")}else if(sn.local==="initial"){var Sn;if(Ae[0]instanceof w){for(var ni in(Sn=new k).initFromNode(sn,G),Sn.styleAttrs)Sn.styleAttrs.hasOwnProperty(ni)&&(Lt.head.styling.initials[ni]=Sn.styleAttrs[ni]);Ae.unshift(Sn)}else nn(G,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")")}else if(sn.local==="layout")Ae[0]instanceof A||nn(G,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),Ae.unshift(Lt.head.layout);else if(sn.local==="region"){Ae[0]instanceof U||nn(G,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")");var dr=new et;dr.initFromNode(Lt,sn,yt[0],G),!dr.id||dr.id in Lt.head.layout.regions?at(G,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):Lt.head.layout.regions[dr.id]=dr,Ae.unshift(dr)}else if(sn.local==="body"){Ae[0]instanceof _||nn(G,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),Lt.body!==null&&nn(G,"Second <body> element at "+this.line+","+this.column+")");var _r=new K;_r.initFromNode(Lt,sn,yt[0],G),Lt.body=_r,Ae.unshift(_r)}else if(sn.local==="div"){Ae[0]instanceof x||Ae[0]instanceof K||nn(G,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");var bs=new x;bs.initFromNode(Lt,Ae[0],sn,yt[0],G);var Zr=bs.styleAttrs[f.byName.backgroundImage.qname];Zr&&(bs.contents.push(new Y(Zr)),delete bs.styleAttrs[f.byName.backgroundImage.qname]),Ae[0].contents.push(bs),Ae.unshift(bs)}else if(sn.local==="image"){Ae[0]instanceof x||nn(G,"Parent of <image> element is not <div> at "+this.line+","+this.column+")");var Zi=new Y;Zi.initFromNode(Lt,Ae[0],sn,yt[0],G),Ae[0].contents.push(Zi),Ae.unshift(Zi)}else if(sn.local==="p"){Ae[0]instanceof x||nn(G,"Parent of <p> element is not <div> at "+this.line+","+this.column+")");var dn=new ue;dn.initFromNode(Lt,Ae[0],sn,yt[0],G),Ae[0].contents.push(dn),Ae.unshift(dn)}else if(sn.local==="span"){Ae[0]instanceof $e||Ae[0]instanceof ue||nn(G,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")");var Mn=new $e;Mn.initFromNode(Lt,Ae[0],sn,yt[0],zt[0],G),Ae[0].contents.push(Mn),Ae.unshift(Mn)}else if(sn.local==="br"){Ae[0]instanceof $e||Ae[0]instanceof ue||nn(G,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")");var An=new lt;An.initFromNode(Lt,Ae[0],sn,yt[0],G),Ae[0].contents.push(An),Ae.unshift(An)}else if(sn.local==="set"){Ae[0]instanceof $e||Ae[0]instanceof ue||Ae[0]instanceof x||Ae[0]instanceof K||Ae[0]instanceof et||Ae[0]instanceof lt||nn(G,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")");var on=new Xe;on.initFromNode(Lt,Ae[0],sn,G),Ae[0].sets.push(on),Ae.unshift(on)}else Ae.unshift(new b(sn));else Ae.unshift(new b(sn));if(Ae[0]instanceof b){if(sn.uri===d.ns_tt&&sn.local==="metadata")vt++;else if(vt>0&&ae&&"onOpenTag"in ae){var Un=[];for(var vn in sn.attributes)Un[sn.attributes[vn].uri+" "+sn.attributes[vn].local]={uri:sn.attributes[vn].uri,local:sn.attributes[vn].local,value:sn.attributes[vn].value};ae.onOpenTag(sn.uri,sn.local,Un)}}},_e.write(ge).close(),delete Lt.head.styling.styles;var bt=!1;for(var Mt in Lt.head.layout.regions)if(Lt.head.layout.regions.hasOwnProperty(Mt)){bt=!0;break}if(!bt){var kt=et.prototype.createDefaultRegion(Lt.lang);Lt.head.layout.regions[kt.id]=kt}for(var Bt in Lt.head.layout.regions)Lt.head.layout.regions.hasOwnProperty(Bt)&&y(Lt,Lt.head.layout.regions[Bt],null,null);return Lt.body&&y(Lt,Lt.body,null,null),Lt.body&&m(Lt.body),Lt},_.prototype.initFromNode=function(ge,G,ae){var _e=function(vt,Lt){var bt=Et(vt,d.ns_ttp,"cellResolution"),Mt=15,kt=32;if(bt!==null){var Bt=/(\d+) (\d+)/.exec(bt);Bt!==null?(kt=parseInt(Bt[1]),Mt=parseInt(Bt[2])):Ze(Lt,"Malformed cellResolution value (using initial value instead)")}return{w:kt,h:Mt}}(ge,ae);this.cellLength={h:new p.ComputedLength(0,1/_e.h),w:new p.ComputedLength(1/_e.w,0)};var Ae=function(vt,Lt){var bt,Mt=Et(vt,d.ns_ttp,"frameRate"),kt=30;Mt!==null&&((bt=/(\d+)/.exec(Mt))!==null?kt=parseInt(bt[1]):Ze(Lt,"Malformed frame rate attribute (using initial value instead)"));var Bt=Et(vt,d.ns_ttp,"frameRateMultiplier"),sn=1;Bt!==null&&((bt=/(\d+) (\d+)/.exec(Bt))!==null?sn=parseInt(bt[1])/parseInt(bt[2]):Ze(Lt,"Malformed frame rate multiplier attribute (using initial value instead)"));var ti=sn*kt,On=1,Vn=Et(vt,d.ns_ttp,"tickRate");return Vn===null?Mt!==null&&(On=ti):(bt=/(\d+)/.exec(Vn))!==null?On=parseInt(bt[1]):Ze(Lt,"Malformed tick rate attribute (using initial value instead)"),{effectiveFrameRate:ti,tickRate:On}}(ge,ae);this.effectiveFrameRate=Ae.effectiveFrameRate,this.tickRate=Ae.tickRate,this.aspectRatio=function(vt,Lt){var bt=Et(vt,d.ns_ittp,"aspectRatio");bt===null&&(bt=Et(vt,d.ns_ttp,"displayAspectRatio"));var Mt=null;if(bt!==null){var kt=/(\d+)\s+(\d+)/.exec(bt);if(kt!==null){var Bt=parseInt(kt[1]),sn=parseInt(kt[2]);Bt!==0&&sn!==0?Mt=Bt/sn:at(Lt,"Illegal aspectRatio values (ignoring)")}else at(Lt,"Malformed aspectRatio attribute (ignoring)")}return Mt}(ge,ae);var yt=Et(ge,d.ns_ttp,"timeBase");yt!==null&&yt!=="media"&&nn(ae,"Unsupported time base");var zt=function(vt,Lt){var bt=Et(vt,d.ns_tts,"extent");if(bt===null)return null;var Mt=bt.split(" ");if(Mt.length!==2)return Ze(Lt,"Malformed extent (ignoring)"),null;var kt=p.parseLength(Mt[0]),Bt=p.parseLength(Mt[1]);return Bt&&kt?{h:Bt,w:kt}:(Ze(Lt,"Malformed extent values (ignoring)"),null)}(ge,ae);zt===null?this.pxLength={h:null,w:null}:(zt.h.unit==="px"&&zt.w.unit==="px"||nn(ae,"Extent on TT must be in px or absent"),this.pxLength={h:new p.ComputedLength(0,1/zt.h.value),w:new p.ComputedLength(1/zt.w.value,0)}),this.dimensions={h:new p.ComputedLength(0,1),w:new p.ComputedLength(1,0)},this.lang=G},_.prototype._registerEvent=function(ge){if(!(ge.end<=ge.begin)){var G=ce(this.events,ge.begin);if(G.found||this.events.splice(G.index,0,ge.begin),ge.end!==Number.POSITIVE_INFINITY){var ae=ce(this.events,ge.end);ae.found||this.events.splice(ae.index,0,ge.end)}}},_.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},_.prototype.getMediaTimeEvents=function(){return this.events},T.prototype.initFromNode=function(ge,G){this.id=ut(ge),this.styleAttrs=dt(ge,G),this.styleRefs=Dt(ge)},k.prototype.initFromNode=function(ge,G){for(var ae in this.styleAttrs={},ge.attributes)if(ge.attributes[ae].uri===d.ns_itts||ge.attributes[ae].uri===d.ns_ebutts||ge.attributes[ae].uri===d.ns_tts){var _e=ge.attributes[ae].uri+" "+ge.attributes[ae].local;this.styleAttrs[_e]=ge.attributes[ae].value}},Y.prototype.initFromNode=function(ge,G,ae,_e,Ae){this.src="src"in ae.attributes?ae.attributes.src.value:null,this.src||at(Ae,"Invalid image@src attribute"),this.type="type"in ae.attributes?ae.attributes.type.value:null,this.type||at(Ae,"Invalid image@type attribute"),Be.prototype.initFromNode.call(this,ge,G,ae,Ae),Z.prototype.initFromNode.call(this,ge,G,ae,Ae),j.prototype.initFromNode.call(this,ge,G,ae,Ae),Re.prototype.initFromNode.call(this,ge,G,ae,Ae),this.lang=_e},te.prototype.initFromNode=function(ge,G,ae,_e){this.id=ut(ae)},Re.prototype.initFromNode=function(ge,G,ae,_e){this.regionID=function(Ae){return Ae&&"region"in Ae.attributes?Ae.attributes.region.value:""}(ae)},Be.prototype.initFromNode=function(ge,G,ae,_e){this.styleAttrs=dt(ae,_e),ge.head!==null&&ge.head.styling!==null&&Tn(ge.head.styling,Dt(ae),this.styleAttrs,_e)},j.prototype.initFromNode=function(ge,G,ae,_e){this.sets=[]},M.prototype.initFromNode=function(ge,G,ae,_e){this.contents=[]},Z.prototype.initFromNode=function(ge,G,ae,_e){var Ae=function(yt,zt,vt,Lt){var bt=null;vt&&"begin"in vt.attributes&&(bt=Rt(yt.tickRate,yt.effectiveFrameRate,vt.attributes.begin.value))===null&&Ze(Lt,"Malformed begin value "+vt.attributes.begin.value+" (using 0)");var Mt=null;vt&&"dur"in vt.attributes&&(Mt=Rt(yt.tickRate,yt.effectiveFrameRate,vt.attributes.dur.value))===null&&Ze(Lt,"Malformed dur value "+vt.attributes.dur.value+" (ignoring)");var kt=null;return vt&&"end"in vt.attributes&&(kt=Rt(yt.tickRate,yt.effectiveFrameRate,vt.attributes.end.value))===null&&Ze(Lt,"Malformed end value (ignoring)"),{explicit_begin:bt,explicit_end:kt,explicit_dur:Mt}}(ge,0,ae,_e);this.explicit_begin=Ae.explicit_begin,this.explicit_end=Ae.explicit_end,this.explicit_dur=Ae.explicit_dur,this.timeContainer=function(yt,zt){var vt=yt&&"timeContainer"in yt.attributes?yt.attributes.timeContainer.value:null;return vt&&vt!=="par"?vt==="seq"?"seq":(at(zt,"Illegal value of timeContainer (assuming 'par')"),"par"):"par"}(ae,_e)},K.prototype.initFromNode=function(ge,G,ae,_e){Be.prototype.initFromNode.call(this,ge,null,G,_e),Z.prototype.initFromNode.call(this,ge,null,G,_e),j.prototype.initFromNode.call(this,ge,null,G,_e),Re.prototype.initFromNode.call(this,ge,null,G,_e),M.prototype.initFromNode.call(this,ge,null,G,_e),this.lang=ae},x.prototype.initFromNode=function(ge,G,ae,_e,Ae){Be.prototype.initFromNode.call(this,ge,G,ae,Ae),Z.prototype.initFromNode.call(this,ge,G,ae,Ae),j.prototype.initFromNode.call(this,ge,G,ae,Ae),Re.prototype.initFromNode.call(this,ge,G,ae,Ae),M.prototype.initFromNode.call(this,ge,G,ae,Ae),this.lang=_e},ue.prototype.initFromNode=function(ge,G,ae,_e,Ae){Be.prototype.initFromNode.call(this,ge,G,ae,Ae),Z.prototype.initFromNode.call(this,ge,G,ae,Ae),j.prototype.initFromNode.call(this,ge,G,ae,Ae),Re.prototype.initFromNode.call(this,ge,G,ae,Ae),M.prototype.initFromNode.call(this,ge,G,ae,Ae),this.lang=_e},$e.prototype.initFromNode=function(ge,G,ae,_e,Ae,yt){Be.prototype.initFromNode.call(this,ge,G,ae,yt),Z.prototype.initFromNode.call(this,ge,G,ae,yt),j.prototype.initFromNode.call(this,ge,G,ae,yt),Re.prototype.initFromNode.call(this,ge,G,ae,yt),M.prototype.initFromNode.call(this,ge,G,ae,yt),this.space=Ae,this.lang=_e},xe.prototype.initFromText=function(ge,G,ae,_e,Ae,yt){Z.prototype.initFromNode.call(this,ge,G,null,yt),this.text=ae,this.space=Ae,this.lang=_e},lt.prototype.initFromNode=function(ge,G,ae,_e,Ae){Re.prototype.initFromNode.call(this,ge,G,ae,Ae),Z.prototype.initFromNode.call(this,ge,G,ae,Ae),this.lang=_e},et.prototype.createDefaultRegion=function(ge){var G=new et;return te.call(G,""),Be.call(G,{}),j.call(G,[]),Z.call(G,0,Number.POSITIVE_INFINITY,null),this.lang=ge,G},et.prototype.initFromNode=function(ge,G,ae,_e){te.prototype.initFromNode.call(this,ge,null,G,_e),Z.prototype.initFromNode.call(this,ge,null,G,_e),j.prototype.initFromNode.call(this,ge,null,G,_e),this.styleAttrs=dt(G,_e),this.styleRefs=Dt(G),this.lang=ae},Xe.prototype.initFromNode=function(ge,G,ae,_e){Z.prototype.initFromNode.call(this,ge,G,ae,_e);var Ae=dt(ae,_e);for(var yt in this.qname=null,this.value=null,Ae)if(Ae.hasOwnProperty(yt)){if(this.qname){at(_e,"More than one style specified on set");break}this.qname=yt,this.value=Ae[yt]}}})(t,typeof sax>"u"?n(5474):sax,typeof imscNames>"u"?n(977):imscNames,typeof imscStyles>"u"?n(1219):imscStyles,typeof imscUtils>"u"?n(6404):imscUtils)},1612:function(u,t,n){var r=/firefox/i.test(navigator.userAgent);(function(l,d,f){function p(M,Z,K,x){var ue;if(K.kind==="region")(ue=document.createElement("div")).style.position="absolute";else if(K.kind==="body")ue=document.createElement("div");else if(K.kind==="div")ue=document.createElement("div");else if(K.kind==="image"){if(ue=document.createElement("img"),M.imgResolver!==null&&K.src!==null){var $e=M.imgResolver(K.src,ue);$e&&(ue.src=$e),ue.height=M.regionH,ue.width=M.regionW}}else if(K.kind==="p")ue=document.createElement("p");else if(K.kind==="span")if(K.styleAttrs[f.byName.ruby.qname]==="container")ue=document.createElement("ruby"),M.ruby=!0;else if(K.styleAttrs[f.byName.ruby.qname]==="base")ue=document.createElement("span");else if(K.styleAttrs[f.byName.ruby.qname]==="text")ue=document.createElement("rt");else if(K.styleAttrs[f.byName.ruby.qname]==="baseContainer")ue=document.createElement("rbc");else if(K.styleAttrs[f.byName.ruby.qname]==="textContainer")ue=document.createElement("rtc");else{if(K.styleAttrs[f.byName.ruby.qname]==="delimiter")return;ue=document.createElement("span")}else K.kind==="br"&&(ue=document.createElement("br"));if(ue){if(K.lang&&(K.kind!=="region"&&K.lang===x.lang||(ue.lang=K.lang)),Z.appendChild(ue),ue.style.margin="0",K.kind==="region"){var xe=K.styleAttrs[f.byName.writingMode.qname];xe==="lrtb"||xe==="lr"?(M.ipd="lr",M.bpd="tb"):xe==="rltb"||xe==="rl"?(M.ipd="rl",M.bpd="tb"):xe==="tblr"?(M.ipd="tb",M.bpd="lr"):xe!=="tbrl"&&xe!=="tb"||(M.ipd="tb",M.bpd="rl")}else if(K.kind==="p"&&M.bpd==="tb"){var lt=K.styleAttrs[f.byName.direction.qname];M.ipd=lt==="ltr"?"lr":"rl"}for(var et=0;et<k.length;et++){var Xe=k[et],ut=K.styleAttrs[Xe.qname];ut!==void 0&&Xe.map!==null&&Xe.map(M,ue,K,ut)}var Dt=ue,dt=K.styleAttrs[f.byName.linePadding.qname];if(dt&&!dt.isZero()){var Et=dt.toUsedLength(M.w,M.h);if(Et>0){var Rt=Math.ceil(Et)+"px";M.bpd==="tb"?(Dt.style.paddingLeft=Rt,Dt.style.paddingRight=Rt):(Dt.style.paddingTop=Rt,Dt.style.paddingBottom=Rt),M.lp=dt}}var mn=K.styleAttrs[f.byName.multiRowAlign.qname];if(mn&&mn!=="auto"){var Tn=document.createElement("span");Tn.style.display="inline-block",Tn.style.textAlign=mn,ue.appendChild(Tn),Dt=Tn,M.mra=mn}var Qe=K.styleAttrs[f.byName.rubyReserve.qname];if(Qe&&Qe[0]!=="none"&&(M.rubyReserve=Qe),K.styleAttrs[f.byName.fillLineGap.qname]&&(M.flg=!0),K.kind==="span"&&K.text){var Ze=K.styleAttrs[f.byName.textEmphasis.qname];if(Ze&&Ze.style!=="none"&&(M.textEmphasis=!0),f.byName.textCombine.qname in K.styleAttrs&&K.styleAttrs[f.byName.textCombine.qname]==="all")ue.textContent=K.text,ue._isd_element=K,Ze&&w(M,ue,0,Ze);else for(var at="",nn=0;nn<K.text.length;nn++){at+=K.text.charAt(nn);var ce=K.text.charCodeAt(nn);if(ce<55296||ce>56319||nn===K.text.length-1){var ge=document.createElement("span");ge.textContent=at,Ze&&w(M,ge,0,Ze),ue.appendChild(ge),at="",ge._isd_element=K}}}if("contents"in K)for(var G=0;G<K.contents.length;G++)p(M,Dt,K.contents[G],K);var ae=[];if(K.kind==="p"&&(A(M,Dt,ae,null),M.rubyReserve&&(function(vt,Lt){for(var bt=0;bt<vt.length;bt++){var Mt,kt,Bt=document.createElement("ruby"),sn=document.createElement("span");sn.textContent="",Bt.appendChild(sn);var ti,On=Lt.rubyReserve[1].toUsedLength(Lt.w,Lt.h)+"px";Lt.rubyReserve[0]==="both"||Lt.rubyReserve[0]==="outside"&&vt.length==1?((Mt=document.createElement("rtc")).style[te]=se?"after":"under",Mt.textContent="",Mt.style.fontSize=On,(kt=document.createElement("rtc")).style[te]=se?"before":"over",kt.textContent="",kt.style.fontSize=On,Bt.appendChild(Mt),Bt.appendChild(kt)):((Mt=document.createElement("rtc")).textContent="",Mt.style.fontSize=On,ti=Lt.rubyReserve[0]==="after"||Lt.rubyReserve[0]==="outside"&&bt>0?se?"after":Lt.bpd==="tb"||Lt.bpd==="rl"?"under":"over":se?"before":Lt.bpd==="tb"||Lt.bpd==="rl"?"over":"under",Mt.style[te]=ti,Bt.appendChild(Mt));for(var Vn=null,Sn=0;Sn<vt[bt].rbc.length;Sn++)if(vt[bt].rbc[Sn].localName==="ruby"){Vn=vt[bt].rbc[Sn];for(var ni=0;ni<Vn.style.length;ni++)Bt.style.setProperty(Vn.style.item(ni),Vn.style.getPropertyValue(Vn.style.item(ni)));break}(Vn=Vn||vt[bt].elements[0].node).parentElement.insertBefore(Bt,Vn)}}(ae,M),M.rubyReserve=null),(M.ruby||M.rubyReserve)&&(function(vt,Lt){for(var bt=0;bt<vt.length;bt++)for(var Mt=0;Mt<vt[bt].rbc.length;Mt++){var kt;vt[bt].rbc[Mt].style[te]||(kt=se?bt===0?"before":"after":Lt.bpd==="tb"||Lt.bpd==="rl"?bt===0?"over":"under":bt===0?"under":"over",vt[bt].rbc[Mt].style[te]=kt)}}(ae,M),M.ruby=null),M.textEmphasis&&(function(vt,Lt){for(var bt=0;bt<vt.length;bt++)for(var Mt=0;Mt<vt[bt].te.length;Mt++){var kt;vt[bt].te[Mt].style[Be]&&vt[bt].te[Mt].style[Be]!=="none"||(kt=Lt.bpd==="tb"?bt===0?"left over":"left under":Lt.bpd==="rl"?bt===0?"right under":"left under":bt===0?"left under":"right under",vt[bt].te[Mt].style[Be]=kt)}}(ae,M),M.textEmphasis=null),M.mra&&(function(vt){for(var Lt=0;Lt<vt.length-1;Lt++){var bt=vt[Lt].elements.length;if(bt!==0&&vt[Lt].br===!1){var Mt=document.createElement("br"),kt=vt[Lt].elements[bt-1].node;kt.parentElement.insertBefore(Mt,kt.nextSibling)}}}(ae),M.mra=null),M.lp&&(function(vt,Lt,bt){if(vt!==null)for(var Mt=0;Mt<vt.length;Mt++){var kt=vt[Mt].elements.length,Bt=Math.ceil(Lt)+"px",sn="-"+Math.ceil(Lt)+"px";if(kt!==0){var ti=vt[Mt].elements[vt[Mt].start_elem],On=vt[Mt].elements[vt[Mt].end_elem];if(ti===On){var Vn=ti.node.getBoundingClientRect();if(Vn.width==0||Vn.height==0)continue}bt.ipd==="lr"?(ti.node.style.marginLeft=sn,ti.node.style.paddingLeft=Bt):bt.ipd==="rl"?(ti.node.style.paddingRight=Bt,ti.node.style.marginRight=sn):bt.ipd==="tb"&&(ti.node.style.paddingTop=Bt,ti.node.style.marginTop=sn),bt.ipd==="lr"?(r||(On.node.style.marginRight=sn),On.node.style.paddingRight=Bt):bt.ipd==="rl"?(On.node.style.paddingLeft=Bt,r||(On.node.style.marginLeft=sn)):bt.ipd==="tb"&&(On.node.style.paddingBottom=Bt,On.node.style.marginBottom=sn)}}}(ae,M.lp.toUsedLength(M.w,M.h),M),M.lp=null),function(vt,Lt){for(var bt=0;bt<vt.length;bt++)for(var Mt=vt[bt],kt=1;kt<Mt.elements.length;){var Bt=Mt.elements[kt-1],sn=Mt.elements[kt];y(Bt.node,sn.node,Lt)?Mt.elements.splice(kt,1):kt++}for(var ti,On,Vn=[],Sn=0;Sn<vt.length;Sn++)for(var ni=0;ni<vt[Sn].elements.length;ni++)(On=m(ti=vt[Sn].elements[ni].node,Vn,!1))&&(ti.style.backgroundColor=On);for(var dr=0;dr<Vn.length;dr++)Vn[dr].style.backgroundColor=""}(ae,M),M.flg)){var _e=_(Dt.getBoundingClientRect(),M);(function(vt,Lt,bt,Mt){for(var kt=Math.sign(bt-Lt),Bt=0;Bt<=vt.length;Bt++){var sn,ti,On,Vn;if(sn=Bt===0?Math.round(Lt):Bt===vt.length?Math.round(bt):Math.round((vt[Bt-1].after+vt[Bt].before)/2),Bt>0&&vt[Bt-1])for(On=0;On<vt[Bt-1].elements.length;On++)ti=kt*(sn-(Vn=vt[Bt-1].elements[On]).after)+"px",Mt.bpd==="lr"?Vn.node.style.paddingRight=ti:Mt.bpd==="rl"?Vn.node.style.paddingLeft=ti:Mt.bpd==="tb"&&(Vn.node.style.paddingBottom=ti);if(Bt<vt.length)for(On=0;On<vt[Bt].elements.length;On++)ti=kt*((Vn=vt[Bt].elements[On]).before-sn)+"px",Mt.bpd==="lr"?Vn.node.style.paddingLeft=ti:Mt.bpd==="rl"?Vn.node.style.paddingRight=ti:Mt.bpd==="tb"&&(Vn.node.style.paddingTop=ti)}})(ae,_e.before,_e.after,M),M.flg=null}if(K.kind==="region"&&M.bpd==="tb"&&M.enableRollUp&&K.contents.length>0&&K.styleAttrs[f.byName.displayAlign.qname]==="after"){A(M,Dt,ae,null);var Ae=new b(K.id===""?"_":K.id,ae);if(M.currentISDState[Ae.id]=Ae,M.previousISDState&&Ae.id in M.previousISDState&&M.previousISDState[Ae.id].plist.length>0&&Ae.plist.length>1&&Ae.plist[Ae.plist.length-2].text===M.previousISDState[Ae.id].plist[M.previousISDState[Ae.id].plist.length-1].text){var yt=ue.firstElementChild,zt=Ae.plist[Ae.plist.length-1].after-Ae.plist[Ae.plist.length-1].before;yt.style.bottom="-"+zt+"px",yt.style.transition="transform 0.4s",yt.style.position="relative",yt.style.transform="translateY(-"+zt+"px)"}}}else j(M.errorHandler,"Error processing ISD element kind: "+K.kind)}function m(M,Z,K){return M.style.backgroundColor?(K&&!Z.includes(M)&&Z.push(M),M.style.backgroundColor):M.parentElement.nodeName==="SPAN"||M.parentElement.nodeName==="RUBY"||M.parentElement.nodeName==="RBC"||M.parentElement.nodeName==="RTC"||M.parentElement.nodeName==="RT"?m(M.parentElement,Z,!0):void 0}function y(M,Z,K){if(M.tagName==="SPAN"&&Z.tagName==="SPAN"&&M._isd_element===Z._isd_element){if(!M._isd_element)return j(K.errorHandler,"Internal error: HTML span is not linked to a source element; cannot merge spans."),!1;M.textContent+=Z.textContent;for(var x=0;x<Z.style.length;x++){var ue=Z.style[x];(ue.indexOf("border")>=0||ue.indexOf("padding")>=0||ue.indexOf("margin")>=0)&&(M.style[ue]=Z.style[ue])}return Z.parentElement.removeChild(Z),!0}return!1}function b(M,Z){this.id=M,this.plist=Z}function _(M,Z){var K={before:null,after:null,start:null,end:null};return Z.bpd==="tb"?(K.before=M.top,K.after=M.bottom,Z.ipd==="lr"?(K.start=M.left,K.end=M.right):(K.start=M.right,K.end=M.left)):Z.bpd==="lr"?(K.before=M.left,K.after=M.right,K.start=M.top,K.end=M.bottom):Z.bpd==="rl"&&(K.before=M.right,K.after=M.left,K.start=M.top,K.end=M.bottom),K}function A(M,Z,K,x){if(Z.localName!=="rt"&&Z.localName!=="rtc"){var ue,$e,xe,lt,et=Z.style.backgroundColor||x;if(Z.childElementCount===0)if(Z.localName==="span"||Z.localName==="rb"){var Xe=_(Z.getBoundingClientRect(),M);if(K.length!==0&&(ue=Xe.before,$e=Xe.after,xe=K[K.length-1].before,$e<(lt=K[K.length-1].after)&&ue>xe||lt<=$e&&xe>=ue)){var ut=Math.sign(Xe.after-Xe.before),Dt=Math.sign(Xe.end-Xe.start);ut*(Xe.before-K[K.length-1].before)<0&&(K[K.length-1].before=Xe.before),ut*(Xe.after-K[K.length-1].after)>0&&(K[K.length-1].after=Xe.after),Dt*(Xe.start-K[K.length-1].start)<0&&(K[K.length-1].start=Xe.start,K[K.length-1].start_elem=K[K.length-1].elements.length),Dt*(Xe.end-K[K.length-1].end)>0&&(K[K.length-1].end=Xe.end,K[K.length-1].end_elem=K[K.length-1].elements.length)}else K.push({before:Xe.before,after:Xe.after,start:Xe.start,end:Xe.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1});K[K.length-1].text+=Z.textContent,K[K.length-1].elements.push({node:Z,bgcolor:et,before:Xe.before,after:Xe.after})}else Z.localName==="br"&&K.length!==0&&(K[K.length-1].br=!0);else for(var dt=Z.firstChild;dt;)dt.nodeType===Node.ELEMENT_NODE&&(A(M,dt,K,et),dt.localName==="ruby"||dt.localName==="rtc"?K.length>0&&K[K.length-1].rbc.push(dt):dt.localName==="span"&&dt.style[Re]&&dt.style[Re]!=="none"&&K.length>0&&K[K.length-1].te.push(dt)),dt=dt.nextSibling}}function w(M,Z,K,x){var ue;x.style!=="none"&&(x.style==="auto"?Z.style[Re]="filled":Z.style[Re]=x.style+" "+x.symbol,(x.position==="before"||x.position==="after")&&(ue=M.bpd==="tb"?x.position==="before"?"left over":"left under":M.bpd==="rl"?x.position==="before"?"right under":"left under":x.position==="before"?"left under":"right under",Z.style[Be]=ue))}function T(M,Z){this.qname=M,this.map=Z}l.render=function(M,Z,K,x,ue,$e,xe,lt,et){var Xe=x||Z.clientHeight,ut=ue||Z.clientWidth;if(M.aspectRatio!==null){var Dt=Xe*M.aspectRatio;Dt>ut?Xe=Math.round(ut/M.aspectRatio):ut=Dt}var dt=document.createElement("div");dt.style.position="relative",dt.style.width=ut+"px",dt.style.height=Xe+"px",dt.style.margin="auto",dt.style.top=0,dt.style.bottom=0,dt.style.left=0,dt.style.right=0,dt.style.zIndex=0;var Et={h:Xe,w:ut,regionH:null,regionW:null,imgResolver:K,displayForcedOnlyMode:$e||!1,isd:M,errorHandler:xe,previousISDState:lt,enableRollUp:et||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null};if(Z.appendChild(dt),"contents"in M)for(var Rt=0;Rt<M.contents.length;Rt++)p(Et,dt,M.contents[Rt],M);return Et.currentISDState};for(var k=[new T("http://www.w3.org/ns/ttml#styling backgroundColor",function(M,Z,K,x){x[3]!==0&&(Z.style.backgroundColor="rgba("+x[0].toString()+","+x[1].toString()+","+x[2].toString()+","+(x[3]/255).toString()+")")}),new T("http://www.w3.org/ns/ttml#styling color",function(M,Z,K,x){Z.style.color="rgba("+x[0].toString()+","+x[1].toString()+","+x[2].toString()+","+(x[3]/255).toString()+")"}),new T("http://www.w3.org/ns/ttml#styling direction",function(M,Z,K,x){Z.style.direction=x}),new T("http://www.w3.org/ns/ttml#styling display",function(M,Z,K,x){}),new T("http://www.w3.org/ns/ttml#styling displayAlign",function(M,Z,K,x){Z.style.display="flex",Z.style.flexDirection="column",x==="before"?Z.style.justifyContent="flex-start":x==="center"?Z.style.justifyContent="center":x==="after"&&(Z.style.justifyContent="flex-end")}),new T("http://www.w3.org/ns/ttml#styling extent",function(M,Z,K,x){M.regionH=x.h.toUsedLength(M.w,M.h),M.regionW=x.w.toUsedLength(M.w,M.h);var ue=0,$e=0,xe=K.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];xe&&(ue=xe[0].toUsedLength(M.w,M.h)+xe[2].toUsedLength(M.w,M.h),$e=xe[1].toUsedLength(M.w,M.h)+xe[3].toUsedLength(M.w,M.h)),Z.style.height=M.regionH-ue+"px",Z.style.width=M.regionW-$e+"px"}),new T("http://www.w3.org/ns/ttml#styling fontFamily",function(M,Z,K,x){for(var ue=[],$e=0;$e<x.length;$e++)x[$e]=x[$e].trim(),x[$e]==="monospaceSerif"?(ue.push("Courier New"),ue.push('"Liberation Mono"'),ue.push("Courier"),ue.push("monospace")):x[$e]==="proportionalSansSerif"?(ue.push("Arial"),ue.push("Helvetica"),ue.push('"Liberation Sans"'),ue.push("sans-serif")):x[$e]==="monospace"?ue.push("monospace"):x[$e]==="sansSerif"?ue.push("sans-serif"):x[$e]==="serif"?ue.push("serif"):x[$e]==="monospaceSansSerif"?(ue.push("Consolas"),ue.push("monospace")):x[$e]==="proportionalSerif"?ue.push("serif"):ue.push(x[$e]);if(ue.length>0){for(var xe=[ue[0]],lt=1;lt<ue.length;lt++)xe.indexOf(ue[lt])==-1&&xe.push(ue[lt]);ue=xe}Z.style.fontFamily=ue.join(",")}),new T("http://www.w3.org/ns/ttml#styling shear",function(M,Z,K,x){if(x!==0){var ue=-.9*x;M.bpd==="tb"?Z.style.transform="skewX("+ue+"deg)":Z.style.transform="skewY("+ue+"deg)"}}),new T("http://www.w3.org/ns/ttml#styling fontSize",function(M,Z,K,x){Z.style.fontSize=x.toUsedLength(M.w,M.h)+"px"}),new T("http://www.w3.org/ns/ttml#styling fontStyle",function(M,Z,K,x){Z.style.fontStyle=x}),new T("http://www.w3.org/ns/ttml#styling fontWeight",function(M,Z,K,x){Z.style.fontWeight=x}),new T("http://www.w3.org/ns/ttml#styling lineHeight",function(M,Z,K,x){Z.style.lineHeight=x==="normal"?"normal":x.toUsedLength(M.w,M.h)+"px"}),new T("http://www.w3.org/ns/ttml#styling opacity",function(M,Z,K,x){Z.style.opacity=x}),new T("http://www.w3.org/ns/ttml#styling origin",function(M,Z,K,x){Z.style.top=x.h.toUsedLength(M.w,M.h)+"px",Z.style.left=x.w.toUsedLength(M.w,M.h)+"px"}),new T("http://www.w3.org/ns/ttml#styling overflow",function(M,Z,K,x){Z.style.overflow=x}),new T("http://www.w3.org/ns/ttml#styling padding",function(M,Z,K,x){var ue=[];ue[0]=x[0].toUsedLength(M.w,M.h)+"px",ue[1]=x[3].toUsedLength(M.w,M.h)+"px",ue[2]=x[2].toUsedLength(M.w,M.h)+"px",ue[3]=x[1].toUsedLength(M.w,M.h)+"px",Z.style.padding=ue.join(" ")}),new T("http://www.w3.org/ns/ttml#styling position",function(M,Z,K,x){Z.style.top=x.h.toUsedLength(M.w,M.h)+"px",Z.style.left=x.w.toUsedLength(M.w,M.h)+"px"}),new T("http://www.w3.org/ns/ttml#styling rubyAlign",function(M,Z,K,x){Z.style.rubyAlign=x==="spaceAround"?"space-around":"center"}),new T("http://www.w3.org/ns/ttml#styling rubyPosition",function(M,Z,K,x){var ue;x!=="before"&&x!=="after"||(ue=se?x:M.bpd==="tb"||M.bpd==="rl"?x==="before"?"over":"under":x==="before"?"under":"over",Z.parentElement.style[te]=ue)}),new T("http://www.w3.org/ns/ttml#styling showBackground",null),new T("http://www.w3.org/ns/ttml#styling textAlign",function(M,Z,K,x){var ue;ue=x==="start"?M.ipd==="rl"?"right":"left":x==="end"?M.ipd==="rl"?"left":"right":x,Z.style.textAlign=ue}),new T("http://www.w3.org/ns/ttml#styling textDecoration",function(M,Z,K,x){Z.style.textDecoration=x.join(" ").replace("lineThrough","line-through")}),new T("http://www.w3.org/ns/ttml#styling textOutline",function(M,Z,K,x){}),new T("http://www.w3.org/ns/ttml#styling textShadow",function(M,Z,K,x){var ue=K.styleAttrs[f.byName.textOutline.qname];if(x==="none"&&ue==="none")Z.style.textShadow="";else{var $e=[];if(ue!=="none"){var xe="rgba("+ue.color[0].toString()+","+ue.color[1].toString()+","+ue.color[2].toString()+","+(ue.color[3]/255).toString()+")";$e.push("1px 1px 1px "+xe),$e.push("-1px 1px 1px "+xe),$e.push("1px -1px 1px "+xe),$e.push("-1px -1px 1px "+xe)}if(x!=="none")for(var lt=0;lt<x.length;lt++)$e.push(x[lt].x_off.toUsedLength(M.w,M.h)+"px "+x[lt].y_off.toUsedLength(M.w,M.h)+"px "+x[lt].b_radius.toUsedLength(M.w,M.h)+"px rgba("+x[lt].color[0].toString()+","+x[lt].color[1].toString()+","+x[lt].color[2].toString()+","+(x[lt].color[3]/255).toString()+")");Z.style.textShadow=$e.join(",")}}),new T("http://www.w3.org/ns/ttml#styling textCombine",function(M,Z,K,x){Z.style.textCombineUpright=x}),new T("http://www.w3.org/ns/ttml#styling textEmphasis",function(M,Z,K,x){}),new T("http://www.w3.org/ns/ttml#styling unicodeBidi",function(M,Z,K,x){var ue;ue=x==="bidiOverride"?"bidi-override":x,Z.style.unicodeBidi=ue}),new T("http://www.w3.org/ns/ttml#styling visibility",function(M,Z,K,x){Z.style.visibility=x}),new T("http://www.w3.org/ns/ttml#styling wrapOption",function(M,Z,K,x){x==="wrap"?K.space==="preserve"?Z.style.whiteSpace="pre-wrap":Z.style.whiteSpace="normal":K.space==="preserve"?Z.style.whiteSpace="pre":Z.style.whiteSpace="noWrap"}),new T("http://www.w3.org/ns/ttml#styling writingMode",function(M,Z,K,x){x==="lrtb"||x==="lr"||x==="rltb"||x==="rl"?Z.style.writingMode="horizontal-tb":x==="tblr"?Z.style.writingMode="vertical-lr":x!=="tbrl"&&x!=="tb"||(Z.style.writingMode="vertical-rl")}),new T("http://www.w3.org/ns/ttml#styling zIndex",function(M,Z,K,x){Z.style.zIndex=x}),new T("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",function(M,Z,K,x){M.displayForcedOnlyMode&&x===!1&&(Z.style.visibility="hidden")})],U={},Y=0;Y<k.length;Y++)U[k[Y].qname]=k[Y];var se="webkitRubyPosition"in window.getComputedStyle(document.documentElement),te=se?"webkitRubyPosition":"rubyPosition",Re="webkitTextEmphasisStyle"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisStyle":"textEmphasisStyle",Be="webkitTextEmphasisPosition"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisPosition":"textEmphasisPosition";function j(M,Z){if(M&&M.error&&M.error(Z))throw Z}})(t,typeof imscNames>"u"?n(977):imscNames,typeof imscStyles>"u"?n(1219):imscStyles,typeof imscUtils>"u"?n(6404):imscUtils)},8905:function(u,t,n){(function(r,l,d,f){r.generateISD=function(T,k,U){var Y,se=new _(T),te={},Re={},Be=T.head.styling.initials[d.byName.showBackground.qname],j=T.head.styling.initials[d.byName.backgroundColor.qname];for(var M in T.head.layout.regions)if(T.head.layout.regions.hasOwnProperty(M)){var Z=T.head.layout.regions[M],K=Z.styleAttrs[d.byName.showBackground.qname]||Be,x=Z.styleAttrs[d.byName.backgroundColor.qname]||j;Re[Z.id]=(K==="always"||K===void 0)&&x!==void 0&&!(k<Z.begin||k>=Z.end)}for(var ue in T.body&&T.body.regionID&&(Re[T.body.regionID]=!0),Y=T.body!==null?function xe(lt,et){if(et.contents){var Xe={};for(var ut in et)et.hasOwnProperty(ut)&&(Xe[ut]=et[ut]);return Xe.contents=[],et.contents.filter(function(Dt){return!(lt<Dt.begin||lt>=Dt.end)}).forEach(function(Dt){var dt=xe(lt,Dt);dt.regionID&&(Re[dt.regionID]=!0),dt!==null&&Xe.contents.push(dt)}),Xe}return et}(k,T.body):null,Re[""]!==void 0&&(Re[""]=!0),Re)if(Re[ue]){var $e=m(T,k,T.head.layout.regions[ue],Y,null,"",T.head.layout.regions[ue],U,te);$e!==null&&se.contents.push($e.element)}return se};var p=[d.byName.color.qname,d.byName.textCombine.qname,d.byName.textDecoration.qname,d.byName.textEmphasis.qname,d.byName.textOutline.qname,d.byName.textShadow.qname];function m(T,k,U,Y,se,te,Re,Be,j){if(k<Re.begin||k>=Re.end)return null;var M="regionID"in Re&&Re.regionID!==""?Re.regionID:te;if(se!==null&&M!==U.id&&(!("contents"in Re)||"contents"in Re&&Re.contents.length===0||M!==""))return null;var Z=new A(Re);if("sets"in Re)for(var K=0;K<Re.sets.length;K++)k<Re.sets[K].begin||k>=Re.sets[K].end||(Z.styleAttrs[Re.sets[K].qname]=Re.sets[K].value);var x={};for(var ue in Z.styleAttrs)if(Z.styleAttrs.hasOwnProperty(ue)&&(x[ue]=!0,Z.kind==="region"&&ue===d.byName.writingMode.qname&&!(d.byName.direction.qname in Z.styleAttrs))){var $e=Z.styleAttrs[ue];$e==="lrtb"||$e==="lr"?Z.styleAttrs[d.byName.direction.qname]="ltr":$e!=="rltb"&&$e!=="rl"||(Z.styleAttrs[d.byName.direction.qname]="rtl")}if(se!==null)for(var xe=0;xe<d.all.length;xe++){var lt=d.all[xe];if(lt.qname===d.byName.textDecoration.qname){var et=se.styleAttrs[lt.qname],Xe=Z.styleAttrs[lt.qname],ut=[];Xe===void 0?ut=et:Xe.indexOf("none")===-1?((Xe.indexOf("noUnderline")===-1&&et.indexOf("underline")!==-1||Xe.indexOf("underline")!==-1)&&ut.push("underline"),(Xe.indexOf("noLineThrough")===-1&&et.indexOf("lineThrough")!==-1||Xe.indexOf("lineThrough")!==-1)&&ut.push("lineThrough"),(Xe.indexOf("noOverline")===-1&&et.indexOf("overline")!==-1||Xe.indexOf("overline")!==-1)&&ut.push("overline")):ut.push("none"),Z.styleAttrs[lt.qname]=ut}else if(lt.qname!==d.byName.fontSize.qname||lt.qname in Z.styleAttrs||Z.kind!=="span"||Z.styleAttrs[d.byName.ruby.qname]!=="textContainer")if(lt.qname!==d.byName.fontSize.qname||lt.qname in Z.styleAttrs||Z.kind!=="span"||Z.styleAttrs[d.byName.ruby.qname]!=="text")lt.inherit&&lt.qname in se.styleAttrs&&!(lt.qname in Z.styleAttrs)&&(Z.styleAttrs[lt.qname]=se.styleAttrs[lt.qname]);else{var Dt=se.styleAttrs[d.byName.fontSize.qname];se.styleAttrs[d.byName.ruby.qname]==="textContainer"?Z.styleAttrs[lt.qname]=Dt:Z.styleAttrs[lt.qname]=new f.ComputedLength(.5*Dt.rw,.5*Dt.rh)}else{var dt=se.styleAttrs[d.byName.fontSize.qname];Z.styleAttrs[lt.qname]=new f.ComputedLength(.5*dt.rw,.5*dt.rh)}}for(var Et=0;Et<d.all.length;Et++){var Rt=d.all[Et];if(!(Rt.qname in Z.styleAttrs)&&!(Rt.qname===d.byName.position.qname&&d.byName.origin.qname in Z.styleAttrs||Rt.qname===d.byName.origin.qname&&d.byName.position.qname in Z.styleAttrs)){var mn=T.head.styling.initials[Rt.qname]||Rt.initial;if(mn!==null&&(Z.kind==="region"||Rt.inherit===!1&&mn!==null)){var Tn=Rt.parse(mn);Tn!==null?(Z.styleAttrs[Rt.qname]=Tn,x[Rt.qname]=!0):w(Be,"Invalid initial value for '"+Rt.qname+"' on element '"+Z.kind)}}}for(var Qe=0;Qe<d.all.length;Qe++){var Ze=d.all[Qe];if(Ze.qname in x&&Ze.compute!==null){var at=Ze.compute(T,se,Z,Z.styleAttrs[Ze.qname],j);at!==null?Z.styleAttrs[Ze.qname]=at:(Z.styleAttrs[Ze.qname]=Ze.compute(T,se,Z,Ze.parse(Ze.initial),j),w(Be,"Style '"+Ze.qname+"' on element '"+Z.kind+"' cannot be computed"))}}if(Z.styleAttrs[d.byName.display.qname]==="none")return null;var nn=null;se===null?nn=Y===null?[]:[Y]:"contents"in Re&&(nn=Re.contents);for(var ce=0;nn!==null&&ce<nn.length;ce++){var ge=m(T,k,U,Y,Z,M,nn[ce],Be,j);ge!==null&&Z.contents.push(ge.element)}for(var G in Z.styleAttrs)if(Z.styleAttrs.hasOwnProperty(G)){var ae=!1;if(Z.kind==="span"){var _e=Z.styleAttrs[d.byName.ruby.qname];(ae=(_e==="container"||_e==="textContainer"||_e==="baseContainer")&&p.indexOf(G)!==-1)||(ae=_e!=="container"&&G===d.byName.rubyAlign.qname),ae||(ae=!(_e==="textContainer"||_e==="text")&&G===d.byName.rubyPosition.qname)}if(!ae){var Ae=d.byQName[G];"applies"in Ae&&(ae=Ae.applies.indexOf(Z.kind)===-1)}ae&&delete Z.styleAttrs[G]}var yt=Z.styleAttrs[d.byName.ruby.qname];if(Z.kind==="p"||Z.kind==="span"&&(yt==="textContainer"||yt==="text")){var zt=[];y(Z,zt),function(vt){for(var Lt,bt=0;bt<vt.length;)if((Lt=vt[bt]).kind!=="br"&&Lt.space!=="preserve"){var Mt=Lt.text.replace(/[\t\r\n ]+/g," ");/^[ ]/.test(Mt)&&(bt===0||(kt=vt[bt-1]).kind==="br"||/[\r\n\t ]$/.test(kt.text))&&(Mt=Mt.substring(1)),Lt.text=Mt,Mt.length===0?vt.splice(bt,1):bt++}else bt++;var kt,Bt;for(bt=0;bt<vt.length;bt++)(Lt=vt[bt]).kind!=="br"&&Lt.space!=="preserve"?/[ ]$/.test(Lt.text)&&(bt===vt.length-1||(Bt=vt[bt+1]).kind==="br"||Bt.space==="preserve"&&/^[\r\n]/.test(Bt.text))&&(Lt.text=Lt.text.slice(0,-1)):bt++}(zt),b(Z)}return Z.kind==="div"&&d.byName.backgroundImage.qname in Z.styleAttrs||Z.kind==="br"||Z.kind==="image"||"contents"in Z&&Z.contents.length>0||Z.kind==="span"&&Z.text!==null||Z.kind==="region"&&Z.styleAttrs[d.byName.showBackground.qname]==="always"?{region_id:M,element:Z}:null}function y(T,k){if("contents"in T)for(var U=0;U<T.contents.length;U++){var Y=T.contents[U],se=Y.styleAttrs[d.byName.ruby.qname];(Y.kind!=="span"||se!=="textContainer"&&se!=="text")&&("contents"in Y?y(Y,k):(Y.kind==="span"&&Y.text.length!==0||Y.kind==="br")&&k.push(Y))}}function b(T){if(T.kind==="br")return!1;if("text"in T)return T.text.length===0;if("contents"in T){for(var k=T.contents.length;k--;)b(T.contents[k])&&T.contents.splice(k,1);return T.contents.length===0}}function _(T){this.contents=[],this.aspectRatio=T.aspectRatio,this.lang=T.lang}function A(T){for(var k in this.kind=T.kind||"region",this.lang=T.lang,T.id&&(this.id=T.id),this.styleAttrs={},T.styleAttrs)T.styleAttrs.hasOwnProperty(k)&&(this.styleAttrs[k]=T.styleAttrs[k]);"src"in T&&(this.src=T.src),"type"in T&&(this.type=T.type),"text"in T?this.text=T.text:(this.kind==="region"||"contents"in T)&&(this.contents=[]),"space"in T&&(this.space=T.space)}function w(T,k){if(T&&T.error&&T.error(k))throw k}})(t,typeof imscNames>"u"?n(977):imscNames,typeof imscStyles>"u"?n(1219):imscStyles,typeof imscUtils>"u"?n(6404):imscUtils)},7640:function(u,t,n){t.generateISD=n(8905).generateISD,t.fromXML=n(6739).fromXML,t.renderHTML=n(1612).render},977:function(u,t){(function(n){n.ns_tt="http://www.w3.org/ns/ttml",n.ns_tts="http://www.w3.org/ns/ttml#styling",n.ns_ttp="http://www.w3.org/ns/ttml#parameter",n.ns_xml="http://www.w3.org/XML/1998/namespace",n.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",n.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",n.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",n.ns_ebutts="urn:ebu:tt:style"})(t)},1219:function(u,t,n){(function(r,l,d){function f(y,b,_,A,w,T,k,U){this.name=b,this.ns=y,this.qname=y+" "+b,this.inherit=w,this.animatable=T,this.initial=_,this.applies=A,this.parse=k,this.compute=U}for(var p in r.all=[new f(l.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,d.parseColor,null),new f(l.ns_tts,"color","white",["span"],!0,!0,d.parseColor,null),new f(l.ns_tts,"direction","ltr",["p","span"],!0,!0,function(y){return y},null),new f(l.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,function(y){return y},null),new f(l.ns_tts,"displayAlign","before",["region"],!1,!0,function(y){return y},null),new f(l.ns_tts,"extent","auto",["tt","region"],!1,!0,function(y){if(y==="auto")return y;var b=y.split(" ");if(b.length!==2)return null;var _=d.parseLength(b[0]),A=d.parseLength(b[1]);return A&&_?{h:A,w:_}:null},function(y,b,_,A,w){var T,k;if(A==="auto")T=new d.ComputedLength(0,1);else if((T=d.toComputedLength(A.h.value,A.h.unit,null,y.dimensions.h,null,y.pxLength.h))===null)return null;if(A==="auto")k=new d.ComputedLength(1,0);else if((k=d.toComputedLength(A.w.value,A.w.unit,null,y.dimensions.w,null,y.pxLength.w))===null)return null;return{h:T,w:k}}),new f(l.ns_tts,"fontFamily","default",["span","p"],!0,!0,function(y){for(var b=y.split(","),_=[],A=0;A<b.length;A++)b[A]=b[A].trim(),b[A].charAt(0)!=="'"&&b[A].charAt(0)!=='"'&&b[A]==="default"?_.push("monospaceSerif"):_.push(b[A]);return _},null),new f(l.ns_tts,"shear","0%",["p"],!0,!0,d.parseLength,function(y,b,_,A){return A.unit!=="%"?null:Math.abs(A.value)>100?100*Math.sign(A.value):A.value}),new f(l.ns_tts,"fontSize","1c",["span","p"],!0,!0,d.parseLength,function(y,b,_,A,w){return d.toComputedLength(A.value,A.unit,b!==null?b.styleAttrs[r.byName.fontSize.qname]:y.cellLength.h,b!==null?b.styleAttrs[r.byName.fontSize.qname]:y.cellLength.h,y.cellLength.h,y.pxLength.h)}),new f(l.ns_tts,"fontStyle","normal",["span","p"],!0,!0,function(y){return y},null),new f(l.ns_tts,"fontWeight","normal",["span","p"],!0,!0,function(y){return y},null),new f(l.ns_tts,"lineHeight","normal",["p"],!0,!0,function(y){return y==="normal"?y:d.parseLength(y)},function(y,b,_,A,w){var T;if(A==="normal")T=A;else if((T=d.toComputedLength(A.value,A.unit,_.styleAttrs[r.byName.fontSize.qname],_.styleAttrs[r.byName.fontSize.qname],y.cellLength.h,y.pxLength.h))===null)return null;return T}),new f(l.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new f(l.ns_tts,"origin","auto",["region"],!1,!0,function(y){if(y==="auto")return y;var b=y.split(" ");if(b.length!==2)return null;var _=d.parseLength(b[0]),A=d.parseLength(b[1]);return A&&_?{h:A,w:_}:null},function(y,b,_,A,w){var T,k;if(A==="auto")T=new d.ComputedLength(0,0);else if((T=d.toComputedLength(A.h.value,A.h.unit,null,y.dimensions.h,null,y.pxLength.h))===null)return null;if(A==="auto")k=new d.ComputedLength(0,0);else if((k=d.toComputedLength(A.w.value,A.w.unit,null,y.dimensions.w,null,y.pxLength.w))===null)return null;return{h:T,w:k}}),new f(l.ns_tts,"overflow","hidden",["region"],!1,!0,function(y){return y},null),new f(l.ns_tts,"padding","0px",["region"],!1,!0,function(y){var b=y.split(" ");if(b.length>4)return null;for(var _=[],A=0;A<b.length;A++){var w=d.parseLength(b[A]);if(!w)return null;_.push(w)}return _},function(y,b,_,A,w){var T;if(A.length===1)T=[A[0],A[0],A[0],A[0]];else if(A.length===2)T=[A[0],A[1],A[0],A[1]];else if(A.length===3)T=[A[0],A[1],A[2],A[1]];else{if(A.length!==4)return null;T=[A[0],A[1],A[2],A[3]]}var k=_.styleAttrs[r.byName.writingMode.qname];if(k==="lrtb"||k==="lr")T=[T[0],T[3],T[2],T[1]];else if(k==="rltb"||k==="rl")T=[T[0],T[1],T[2],T[3]];else if(k==="tblr")T=[T[3],T[0],T[1],T[2]];else{if(k!=="tbrl"&&k!=="tb")return null;T=[T[3],T[2],T[1],T[0]]}for(var U=[],Y=0;Y<T.length;Y++)if(T[Y].value===0)U[Y]=new d.ComputedLength(0,0);else if(U[Y]=d.toComputedLength(T[Y].value,T[Y].unit,_.styleAttrs[r.byName.fontSize.qname],Y===0||Y===2?_.styleAttrs[r.byName.extent.qname].h:_.styleAttrs[r.byName.extent.qname].w,Y===0||Y===2?y.cellLength.h:y.cellLength.w,Y===0||Y===2?y.pxLength.h:y.pxLength.w),U[Y]===null)return null;return U}),new f(l.ns_tts,"position","top left",["region"],!1,!0,function(y){return d.parsePosition(y)},function(y,b,_,A){var w,T;return(w=d.toComputedLength(A.v.offset.value,A.v.offset.unit,null,new d.ComputedLength(-_.styleAttrs[r.byName.extent.qname].h.rw,y.dimensions.h.rh-_.styleAttrs[r.byName.extent.qname].h.rh),null,y.pxLength.h))===null?null:(A.v.edge==="bottom"&&(w=new d.ComputedLength(-w.rw-_.styleAttrs[r.byName.extent.qname].h.rw,y.dimensions.h.rh-w.rh-_.styleAttrs[r.byName.extent.qname].h.rh)),T=d.toComputedLength(A.h.offset.value,A.h.offset.unit,null,new d.ComputedLength(y.dimensions.w.rw-_.styleAttrs[r.byName.extent.qname].w.rw,-_.styleAttrs[r.byName.extent.qname].w.rh),null,y.pxLength.w),w===null?null:(A.h.edge==="right"&&(T=new d.ComputedLength(y.dimensions.w.rw-T.rw-_.styleAttrs[r.byName.extent.qname].w.rw,-T.rh-_.styleAttrs[r.byName.extent.qname].w.rh)),{h:w,w:T}))}),new f(l.ns_tts,"ruby","none",["span"],!1,!0,function(y){return y},null),new f(l.ns_tts,"rubyAlign","center",["span"],!0,!0,function(y){return y!=="center"&&y!=="spaceAround"?null:y},null),new f(l.ns_tts,"rubyPosition","outside",["span"],!0,!0,function(y){return y},null),new f(l.ns_tts,"rubyReserve","none",["p"],!0,!0,function(y){var b=y.split(" "),_=[null,null];if(b.length===0||b.length>2||b[0]!=="none"&&b[0]!=="both"&&b[0]!=="after"&&b[0]!=="before"&&b[0]!=="outside")return null;if(_[0]=b[0],b.length===2&&b[0]!=="none"){var A=d.parseLength(b[1]);if(!A)return null;_[1]=A}return _},function(y,b,_,A,w){if(A[0]==="none")return A;var T;return(T=A[1]===null?new d.ComputedLength(.5*_.styleAttrs[r.byName.fontSize.qname].rw,.5*_.styleAttrs[r.byName.fontSize.qname].rh):d.toComputedLength(A[1].value,A[1].unit,_.styleAttrs[r.byName.fontSize.qname],_.styleAttrs[r.byName.fontSize.qname],y.cellLength.h,y.pxLength.h))===null?null:[A[0],T]}),new f(l.ns_tts,"showBackground","always",["region"],!1,!0,function(y){return y},null),new f(l.ns_tts,"textAlign","start",["p"],!0,!0,function(y){return y},function(y,b,_,A,w){return A==="left"?"start":A==="right"?"end":A}),new f(l.ns_tts,"textCombine","none",["span"],!0,!0,function(y){return y==="none"||y==="all"?y:null},null),new f(l.ns_tts,"textDecoration","none",["span"],!0,!0,function(y){return y.split(" ")},null),new f(l.ns_tts,"textEmphasis","none",["span"],!0,!0,function(y){for(var b=y.split(" "),_={style:null,symbol:null,color:null,position:null},A=0;A<b.length;A++)if(b[A]==="none"||b[A]==="auto")_.style=b[A];else if(b[A]==="filled"||b[A]==="open")_.style=b[A];else if(b[A]==="circle"||b[A]==="dot"||b[A]==="sesame")_.symbol=b[A];else if(b[A]==="current")_.color=b[A];else if(b[A]==="outside"||b[A]==="before"||b[A]==="after")_.position=b[A];else if(_.color=d.parseColor(b[A]),_.color===null)return null;return _.style==null&&_.symbol==null?_.style="auto":(_.symbol=_.symbol||"circle",_.style=_.style||"filled"),_.position=_.position||"outside",_.color=_.color||"current",_},null),new f(l.ns_tts,"textOutline","none",["span"],!0,!0,function(y){if(y==="none")return y;var b={},_=y.split(" ");if(_.length===0||_.length>2)return null;var A=d.parseColor(_[0]);if(b.color=A,A!==null&&_.shift(),_.length!==1)return null;var w=d.parseLength(_[0]);return w?(b.thickness=w,b):null},function(y,b,_,A,w){if(A==="none")return A;var T={};return A.color===null?T.color=_.styleAttrs[r.byName.color.qname]:T.color=A.color,T.thickness=d.toComputedLength(A.thickness.value,A.thickness.unit,_.styleAttrs[r.byName.fontSize.qname],_.styleAttrs[r.byName.fontSize.qname],y.cellLength.h,y.pxLength.h),T.thickness===null?null:T}),new f(l.ns_tts,"textShadow","none",["span"],!0,!0,d.parseTextShadow,function(y,b,_,A){if(A==="none")return A;for(var w=[],T=0;T<A.length;T++){var k={};if(k.x_off=d.toComputedLength(A[T][0].value,A[T][0].unit,null,_.styleAttrs[r.byName.fontSize.qname],null,y.pxLength.w),k.x_off===null||(k.y_off=d.toComputedLength(A[T][1].value,A[T][1].unit,null,_.styleAttrs[r.byName.fontSize.qname],null,y.pxLength.h),k.y_off===null))return null;if(A[T][2]===null)k.b_radius=0;else if(k.b_radius=d.toComputedLength(A[T][2].value,A[T][2].unit,null,_.styleAttrs[r.byName.fontSize.qname],null,y.pxLength.h),k.b_radius===null)return null;A[T][3]===null?k.color=_.styleAttrs[r.byName.color.qname]:k.color=A[T][3],w.push(k)}return w}),new f(l.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,function(y){return y},null),new f(l.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,function(y){return y},null),new f(l.ns_tts,"wrapOption","wrap",["span"],!0,!0,function(y){return y},null),new f(l.ns_tts,"writingMode","lrtb",["region"],!1,!0,function(y){return y},null),new f(l.ns_tts,"zIndex","auto",["region"],!1,!0,function(y){var b;return y==="auto"?b=y:(b=parseInt(y),isNaN(b)&&(b=null)),b},null),new f(l.ns_ebutts,"linePadding","0c",["p"],!0,!1,d.parseLength,function(y,b,_,A,w){return d.toComputedLength(A.value,A.unit,null,null,y.cellLength.w,null)}),new f(l.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,function(y){return y},null),new f(l.ns_smpte,"backgroundImage",null,["div"],!1,!1,function(y){return y},null),new f(l.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,function(y){return y==="true"},null),new f(l.ns_itts,"fillLineGap","false",["p"],!0,!0,function(y){return y==="true"},null)],r.byQName={},r.all)r.byQName[r.all[p].qname]=r.all[p];for(var m in r.byName={},r.all)r.byName[r.all[m].name]=r.all[m]})(t,typeof imscNames>"u"?n(977):imscNames,typeof imscUtils>"u"?n(6404):imscUtils)},6404:function(u,t){(function(n){var r=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,l=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,d=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,f={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};n.parseColor=function(m){var y,b=null,_=f[m.toLowerCase()];return _!==void 0?b=_:(y=r.exec(m))!==null?b=[parseInt(y[1],16),parseInt(y[2],16),parseInt(y[3],16),y[4]!==void 0?parseInt(y[4],16):255]:(y=l.exec(m))!==null?b=[parseInt(y[1]),parseInt(y[2]),parseInt(y[3]),255]:(y=d.exec(m))!==null&&(b=[parseInt(y[1]),parseInt(y[2]),parseInt(y[3]),parseInt(y[4])]),b};var p=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;n.parseLength=function(m){var y,b=null;return(y=p.exec(m))!==null&&(b={value:parseFloat(y[1]),unit:y[2]}),b},n.parseTextShadow=function(m){for(var y=m.match(/([^\(,\)]|\([^\)]+\))+/g),b=[],_=0;_<y.length;_++){var A=y[_].split(" ");if(A.length===1&&A[0]==="none")return"none";if(A.length>1&&A.length<5){var w=[null,null,null,null],T=n.parseLength(A.shift());if(T===null||(w[0]=T,(T=n.parseLength(A.shift()))===null))return null;if(w[1]=T,A.length===0){b.push(w);continue}if((T=n.parseLength(A[0]))!==null&&(w[2]=T,A.shift()),A.length===0){b.push(w);continue}var k=n.parseColor(A[0]);if(k===null)return null;w[3]=k,b.push(w)}}return b},n.parsePosition=function(m){var y=m.split(" "),b=function(Y){return Y==="center"||Y==="left"||Y==="top"||Y==="bottom"||Y==="right"};if(y.length>4)return null;for(var _=0;_<y.length;_++)if(!b(y[_])){var A=n.parseLength(y[_]);if(A===null)return null;y[_]=A}for(var w={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}},T=0;T<y.length;){var k=y[T++];if(b(k)){var U={value:0,unit:"%"};y.length!==2&&T<y.length&&!b(y[T])&&(U=y[T++]),k==="right"?(w.h.edge=k,w.h.offset=U):k==="bottom"?(w.v.edge=k,w.v.offset=U):k==="left"?w.h.offset=U:k==="top"&&(w.v.offset=U)}else{if(y.length!==1&&y.length!==2)return null;T===1?w.h.offset=k:w.v.offset=k}}return w},n.ComputedLength=function(m,y){this.rw=m,this.rh=y},n.ComputedLength.prototype.toUsedLength=function(m,y){return m*this.rw+y*this.rh},n.ComputedLength.prototype.isZero=function(){return this.rw===0&&this.rh===0},n.toComputedLength=function(m,y,b,_,A,w){return y==="%"&&_?new n.ComputedLength(_.rw*m/100,_.rh*m/100):y==="em"&&b?new n.ComputedLength(b.rw*m,b.rh*m):y==="c"&&A?new n.ComputedLength(m*A.rw,m*A.rh):y==="px"&&w?new n.ComputedLength(m*w.rw,m*w.rh):y==="rh"?new n.ComputedLength(0,m/100):y==="rw"?new n.ComputedLength(m/100,0):null}})(t)},7523:function(u){typeof Object.create=="function"?u.exports=function(t,n){n&&(t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:u.exports=function(t,n){if(n){t.super_=n;var r=function(){};r.prototype=n.prototype,t.prototype=new r,t.prototype.constructor=t}}},3282:function(u){function t(l){if(typeof l!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(l))}function n(l,d){for(var f,p="",m=0,y=-1,b=0,_=0;_<=l.length;++_){if(_<l.length)f=l.charCodeAt(_);else{if(f===47)break;f=47}if(f===47){if(!(y===_-1||b===1))if(y!==_-1&&b===2){if(p.length<2||m!==2||p.charCodeAt(p.length-1)!==46||p.charCodeAt(p.length-2)!==46){if(p.length>2){var A=p.lastIndexOf("/");if(A!==p.length-1){A===-1?(p="",m=0):m=(p=p.slice(0,A)).length-1-p.lastIndexOf("/"),y=_,b=0;continue}}else if(p.length===2||p.length===1){p="",m=0,y=_,b=0;continue}}d&&(p.length>0?p+="/..":p="..",m=2)}else p.length>0?p+="/"+l.slice(y+1,_):p=l.slice(y+1,_),m=_-y-1;y=_,b=0}else f===46&&b!==-1?++b:b=-1}return p}var r={resolve:function(){for(var l,d="",f=!1,p=arguments.length-1;p>=-1&&!f;p--){var m;p>=0?m=arguments[p]:(l===void 0&&(l=process.cwd()),m=l),t(m),m.length!==0&&(d=m+"/"+d,f=m.charCodeAt(0)===47)}return d=n(d,!f),f?d.length>0?"/"+d:"/":d.length>0?d:"."},normalize:function(l){if(t(l),l.length===0)return".";var d=l.charCodeAt(0)===47,f=l.charCodeAt(l.length-1)===47;return(l=n(l,!d)).length!==0||d||(l="."),l.length>0&&f&&(l+="/"),d?"/"+l:l},isAbsolute:function(l){return t(l),l.length>0&&l.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var l,d=0;d<arguments.length;++d){var f=arguments[d];t(f),f.length>0&&(l===void 0?l=f:l+="/"+f)}return l===void 0?".":r.normalize(l)},relative:function(l,d){if(t(l),t(d),l===d||(l=r.resolve(l))===(d=r.resolve(d)))return"";for(var f=1;f<l.length&&l.charCodeAt(f)===47;++f);for(var p=l.length,m=p-f,y=1;y<d.length&&d.charCodeAt(y)===47;++y);for(var b=d.length-y,_=m<b?m:b,A=-1,w=0;w<=_;++w){if(w===_){if(b>_){if(d.charCodeAt(y+w)===47)return d.slice(y+w+1);if(w===0)return d.slice(y+w)}else m>_&&(l.charCodeAt(f+w)===47?A=w:w===0&&(A=0));break}var T=l.charCodeAt(f+w);if(T!==d.charCodeAt(y+w))break;T===47&&(A=w)}var k="";for(w=f+A+1;w<=p;++w)w!==p&&l.charCodeAt(w)!==47||(k.length===0?k+="..":k+="/..");return k.length>0?k+d.slice(y+A):(y+=A,d.charCodeAt(y)===47&&++y,d.slice(y))},_makeLong:function(l){return l},dirname:function(l){if(t(l),l.length===0)return".";for(var d=l.charCodeAt(0),f=d===47,p=-1,m=!0,y=l.length-1;y>=1;--y)if((d=l.charCodeAt(y))===47){if(!m){p=y;break}}else m=!1;return p===-1?f?"/":".":f&&p===1?"//":l.slice(0,p)},basename:function(l,d){if(d!==void 0&&typeof d!="string")throw new TypeError('"ext" argument must be a string');t(l);var f,p=0,m=-1,y=!0;if(d!==void 0&&d.length>0&&d.length<=l.length){if(d.length===l.length&&d===l)return"";var b=d.length-1,_=-1;for(f=l.length-1;f>=0;--f){var A=l.charCodeAt(f);if(A===47){if(!y){p=f+1;break}}else _===-1&&(y=!1,_=f+1),b>=0&&(A===d.charCodeAt(b)?--b==-1&&(m=f):(b=-1,m=_))}return p===m?m=_:m===-1&&(m=l.length),l.slice(p,m)}for(f=l.length-1;f>=0;--f)if(l.charCodeAt(f)===47){if(!y){p=f+1;break}}else m===-1&&(y=!1,m=f+1);return m===-1?"":l.slice(p,m)},extname:function(l){t(l);for(var d=-1,f=0,p=-1,m=!0,y=0,b=l.length-1;b>=0;--b){var _=l.charCodeAt(b);if(_!==47)p===-1&&(m=!1,p=b+1),_===46?d===-1?d=b:y!==1&&(y=1):d!==-1&&(y=-1);else if(!m){f=b+1;break}}return d===-1||p===-1||y===0||y===1&&d===p-1&&d===f+1?"":l.slice(d,p)},format:function(l){if(l===null||typeof l!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof l);return function(d,f){var p=f.dir||f.root,m=f.base||(f.name||"")+(f.ext||"");return p?p===f.root?p+m:p+"/"+m:m}(0,l)},parse:function(l){t(l);var d={root:"",dir:"",base:"",ext:"",name:""};if(l.length===0)return d;var f,p=l.charCodeAt(0),m=p===47;m?(d.root="/",f=1):f=0;for(var y=-1,b=0,_=-1,A=!0,w=l.length-1,T=0;w>=f;--w)if((p=l.charCodeAt(w))!==47)_===-1&&(A=!1,_=w+1),p===46?y===-1?y=w:T!==1&&(T=1):y!==-1&&(T=-1);else if(!A){b=w+1;break}return y===-1||_===-1||T===0||T===1&&y===_-1&&y===b+1?_!==-1&&(d.base=d.name=b===0&&m?l.slice(1,_):l.slice(b,_)):(b===0&&m?(d.name=l.slice(1,y),d.base=l.slice(1,_)):(d.name=l.slice(b,y),d.base=l.slice(b,_)),d.ext=l.slice(y,_)),b>0?d.dir=l.slice(0,b-1):m&&(d.dir="/"),d},sep:"/",delimiter:":",win32:null,posix:null};r.posix=r,u.exports=r},3515:function(u,t,n){u.exports=l;var r=n(9826).EventEmitter;function l(){r.call(this)}n(7523)(l,r),l.Readable=n(2762),l.Writable=n(3726),l.Duplex=n(884),l.Transform=n(6756),l.PassThrough=n(1390),l.finished=n(2896),l.pipeline=n(8460),l.Stream=l,l.prototype.pipe=function(d,f){var p=this;function m(k){d.writable&&d.write(k)===!1&&p.pause&&p.pause()}function y(){p.readable&&p.resume&&p.resume()}p.on("data",m),d.on("drain",y),d._isStdio||f&&f.end===!1||(p.on("end",_),p.on("close",A));var b=!1;function _(){b||(b=!0,d.end())}function A(){b||(b=!0,typeof d.destroy=="function"&&d.destroy())}function w(k){if(T(),r.listenerCount(this,"error")===0)throw k}function T(){p.removeListener("data",m),d.removeListener("drain",y),p.removeListener("end",_),p.removeListener("close",A),p.removeListener("error",w),d.removeListener("error",w),p.removeListener("end",T),p.removeListener("close",T),d.removeListener("close",T)}return p.on("error",w),d.on("error",w),p.on("end",T),p.on("close",T),d.on("close",T),d.emit("pipe",p),d}},1602:function(u){var t={};function n(l,d,f){f||(f=Error);var p=function(m){var y,b;function _(A,w,T){return m.call(this,function(k,U,Y){return typeof d=="string"?d:d(k,U,Y)}(A,w,T))||this}return b=m,(y=_).prototype=Object.create(b.prototype),y.prototype.constructor=y,y.__proto__=b,_}(f);p.prototype.name=f.name,p.prototype.code=l,t[l]=p}function r(l,d){if(Array.isArray(l)){var f=l.length;return l=l.map(function(p){return String(p)}),f>2?"one of ".concat(d," ").concat(l.slice(0,f-1).join(", "),", or ")+l[f-1]:f===2?"one of ".concat(d," ").concat(l[0]," or ").concat(l[1]):"of ".concat(d," ").concat(l[0])}return"of ".concat(d," ").concat(String(l))}n("ERR_INVALID_OPT_VALUE",function(l,d){return'The value "'+d+'" is invalid for option "'+l+'"'},TypeError),n("ERR_INVALID_ARG_TYPE",function(l,d,f){var p,m,y,b,_;if(typeof d=="string"&&(m="not ",d.substr(0,4)===m)?(p="must not be",d=d.replace(/^not /,"")):p="must be",function(w,T,k){return(k===void 0||k>w.length)&&(k=w.length),w.substring(k-9,k)===T}(l," argument"))y="The ".concat(l," ").concat(p," ").concat(r(d,"type"));else{var A=(typeof _!="number"&&(_=0),_+1>(b=l).length||b.indexOf(".",_)===-1?"argument":"property");y='The "'.concat(l,'" ').concat(A," ").concat(p," ").concat(r(d,"type"))}return y+". Received type ".concat(typeof f)},TypeError),n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),n("ERR_METHOD_NOT_IMPLEMENTED",function(l){return"The "+l+" method is not implemented"}),n("ERR_STREAM_PREMATURE_CLOSE","Premature close"),n("ERR_STREAM_DESTROYED",function(l){return"Cannot call "+l+" after a stream was destroyed"}),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),n("ERR_STREAM_WRITE_AFTER_END","write after end"),n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),n("ERR_UNKNOWN_ENCODING",function(l){return"Unknown encoding: "+l},TypeError),n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),u.exports.codes=t},884:function(u,t,n){var r=Object.keys||function(A){var w=[];for(var T in A)w.push(T);return w};u.exports=y;var l=n(2762),d=n(3726);n(7523)(y,l);for(var f=r(d.prototype),p=0;p<f.length;p++){var m=f[p];y.prototype[m]||(y.prototype[m]=d.prototype[m])}function y(A){if(!(this instanceof y))return new y(A);l.call(this,A),d.call(this,A),this.allowHalfOpen=!0,A&&(A.readable===!1&&(this.readable=!1),A.writable===!1&&(this.writable=!1),A.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",b)))}function b(){this._writableState.ended||process.nextTick(_,this)}function _(A){A.end()}Object.defineProperty(y.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(y.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(y.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(y.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(A){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=A,this._writableState.destroyed=A)}})},1390:function(u,t,n){u.exports=l;var r=n(6756);function l(d){if(!(this instanceof l))return new l(d);r.call(this,d)}n(7523)(l,r),l.prototype._transform=function(d,f,p){p(null,d)}},2762:function(u,t,n){var r;u.exports=Z,Z.ReadableState=M,n(9826).EventEmitter;var l,d=function(Ze,at){return Ze.listeners(at).length},f=n(2611),p=n(44).Buffer,m=(n.g!==void 0?n.g:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},y=n(7199);l=y&&y.debuglog?y.debuglog("stream"):function(){};var b,_,A,w=n(3791),T=n(2410),k=n(1749).getHighWaterMark,U=n(1602).codes,Y=U.ERR_INVALID_ARG_TYPE,se=U.ERR_STREAM_PUSH_AFTER_EOF,te=U.ERR_METHOD_NOT_IMPLEMENTED,Re=U.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;n(7523)(Z,f);var Be=T.errorOrDestroy,j=["error","close","destroy","pause","resume"];function M(Ze,at,nn){r=r||n(884),Ze=Ze||{},typeof nn!="boolean"&&(nn=at instanceof r),this.objectMode=!!Ze.objectMode,nn&&(this.objectMode=this.objectMode||!!Ze.readableObjectMode),this.highWaterMark=k(this,Ze,"readableHighWaterMark",nn),this.buffer=new w,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=Ze.emitClose!==!1,this.autoDestroy=!!Ze.autoDestroy,this.destroyed=!1,this.defaultEncoding=Ze.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Ze.encoding&&(b||(b=n(748).StringDecoder),this.decoder=new b(Ze.encoding),this.encoding=Ze.encoding)}function Z(Ze){if(r=r||n(884),!(this instanceof Z))return new Z(Ze);var at=this instanceof r;this._readableState=new M(Ze,this,at),this.readable=!0,Ze&&(typeof Ze.read=="function"&&(this._read=Ze.read),typeof Ze.destroy=="function"&&(this._destroy=Ze.destroy)),f.call(this)}function K(Ze,at,nn,ce,ge){l("readableAddChunk",at);var G,ae=Ze._readableState;if(at===null)ae.reading=!1,function(_e,Ae){if(l("onEofChunk"),!Ae.ended){if(Ae.decoder){var yt=Ae.decoder.end();yt&&yt.length&&(Ae.buffer.push(yt),Ae.length+=Ae.objectMode?1:yt.length)}Ae.ended=!0,Ae.sync?xe(_e):(Ae.needReadable=!1,Ae.emittedReadable||(Ae.emittedReadable=!0,lt(_e)))}}(Ze,ae);else if(ge||(G=function(_e,Ae){var yt,zt;return zt=Ae,p.isBuffer(zt)||zt instanceof m||typeof Ae=="string"||Ae===void 0||_e.objectMode||(yt=new Y("chunk",["string","Buffer","Uint8Array"],Ae)),yt}(ae,at)),G)Be(Ze,G);else if(ae.objectMode||at&&at.length>0)if(typeof at=="string"||ae.objectMode||Object.getPrototypeOf(at)===p.prototype||(at=function(_e){return p.from(_e)}(at)),ce)ae.endEmitted?Be(Ze,new Re):x(Ze,ae,at,!0);else if(ae.ended)Be(Ze,new se);else{if(ae.destroyed)return!1;ae.reading=!1,ae.decoder&&!nn?(at=ae.decoder.write(at),ae.objectMode||at.length!==0?x(Ze,ae,at,!1):et(Ze,ae)):x(Ze,ae,at,!1)}else ce||(ae.reading=!1,et(Ze,ae));return!ae.ended&&(ae.length<ae.highWaterMark||ae.length===0)}function x(Ze,at,nn,ce){at.flowing&&at.length===0&&!at.sync?(at.awaitDrain=0,Ze.emit("data",nn)):(at.length+=at.objectMode?1:nn.length,ce?at.buffer.unshift(nn):at.buffer.push(nn),at.needReadable&&xe(Ze)),et(Ze,at)}Object.defineProperty(Z.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(Ze){this._readableState&&(this._readableState.destroyed=Ze)}}),Z.prototype.destroy=T.destroy,Z.prototype._undestroy=T.undestroy,Z.prototype._destroy=function(Ze,at){at(Ze)},Z.prototype.push=function(Ze,at){var nn,ce=this._readableState;return ce.objectMode?nn=!0:typeof Ze=="string"&&((at=at||ce.defaultEncoding)!==ce.encoding&&(Ze=p.from(Ze,at),at=""),nn=!0),K(this,Ze,at,!1,nn)},Z.prototype.unshift=function(Ze){return K(this,Ze,null,!0,!1)},Z.prototype.isPaused=function(){return this._readableState.flowing===!1},Z.prototype.setEncoding=function(Ze){b||(b=n(748).StringDecoder);var at=new b(Ze);this._readableState.decoder=at,this._readableState.encoding=this._readableState.decoder.encoding;for(var nn=this._readableState.buffer.head,ce="";nn!==null;)ce+=at.write(nn.data),nn=nn.next;return this._readableState.buffer.clear(),ce!==""&&this._readableState.buffer.push(ce),this._readableState.length=ce.length,this};var ue=1073741824;function $e(Ze,at){return Ze<=0||at.length===0&&at.ended?0:at.objectMode?1:Ze!=Ze?at.flowing&&at.length?at.buffer.head.data.length:at.length:(Ze>at.highWaterMark&&(at.highWaterMark=function(nn){return nn>=ue?nn=ue:(nn--,nn|=nn>>>1,nn|=nn>>>2,nn|=nn>>>4,nn|=nn>>>8,nn|=nn>>>16,nn++),nn}(Ze)),Ze<=at.length?Ze:at.ended?at.length:(at.needReadable=!0,0))}function xe(Ze){var at=Ze._readableState;l("emitReadable",at.needReadable,at.emittedReadable),at.needReadable=!1,at.emittedReadable||(l("emitReadable",at.flowing),at.emittedReadable=!0,process.nextTick(lt,Ze))}function lt(Ze){var at=Ze._readableState;l("emitReadable_",at.destroyed,at.length,at.ended),at.destroyed||!at.length&&!at.ended||(Ze.emit("readable"),at.emittedReadable=!1),at.needReadable=!at.flowing&&!at.ended&&at.length<=at.highWaterMark,Et(Ze)}function et(Ze,at){at.readingMore||(at.readingMore=!0,process.nextTick(Xe,Ze,at))}function Xe(Ze,at){for(;!at.reading&&!at.ended&&(at.length<at.highWaterMark||at.flowing&&at.length===0);){var nn=at.length;if(l("maybeReadMore read 0"),Ze.read(0),nn===at.length)break}at.readingMore=!1}function ut(Ze){var at=Ze._readableState;at.readableListening=Ze.listenerCount("readable")>0,at.resumeScheduled&&!at.paused?at.flowing=!0:Ze.listenerCount("data")>0&&Ze.resume()}function Dt(Ze){l("readable nexttick read 0"),Ze.read(0)}function dt(Ze,at){l("resume",at.reading),at.reading||Ze.read(0),at.resumeScheduled=!1,Ze.emit("resume"),Et(Ze),at.flowing&&!at.reading&&Ze.read(0)}function Et(Ze){var at=Ze._readableState;for(l("flow",at.flowing);at.flowing&&Ze.read()!==null;);}function Rt(Ze,at){return at.length===0?null:(at.objectMode?nn=at.buffer.shift():!Ze||Ze>=at.length?(nn=at.decoder?at.buffer.join(""):at.buffer.length===1?at.buffer.first():at.buffer.concat(at.length),at.buffer.clear()):nn=at.buffer.consume(Ze,at.decoder),nn);var nn}function mn(Ze){var at=Ze._readableState;l("endReadable",at.endEmitted),at.endEmitted||(at.ended=!0,process.nextTick(Tn,at,Ze))}function Tn(Ze,at){if(l("endReadableNT",Ze.endEmitted,Ze.length),!Ze.endEmitted&&Ze.length===0&&(Ze.endEmitted=!0,at.readable=!1,at.emit("end"),Ze.autoDestroy)){var nn=at._writableState;(!nn||nn.autoDestroy&&nn.finished)&&at.destroy()}}function Qe(Ze,at){for(var nn=0,ce=Ze.length;nn<ce;nn++)if(Ze[nn]===at)return nn;return-1}Z.prototype.read=function(Ze){l("read",Ze),Ze=parseInt(Ze,10);var at=this._readableState,nn=Ze;if(Ze!==0&&(at.emittedReadable=!1),Ze===0&&at.needReadable&&((at.highWaterMark!==0?at.length>=at.highWaterMark:at.length>0)||at.ended))return l("read: emitReadable",at.length,at.ended),at.length===0&&at.ended?mn(this):xe(this),null;if((Ze=$e(Ze,at))===0&&at.ended)return at.length===0&&mn(this),null;var ce,ge=at.needReadable;return l("need readable",ge),(at.length===0||at.length-Ze<at.highWaterMark)&&l("length less than watermark",ge=!0),at.ended||at.reading?l("reading or ended",ge=!1):ge&&(l("do read"),at.reading=!0,at.sync=!0,at.length===0&&(at.needReadable=!0),this._read(at.highWaterMark),at.sync=!1,at.reading||(Ze=$e(nn,at))),(ce=Ze>0?Rt(Ze,at):null)===null?(at.needReadable=at.length<=at.highWaterMark,Ze=0):(at.length-=Ze,at.awaitDrain=0),at.length===0&&(at.ended||(at.needReadable=!0),nn!==Ze&&at.ended&&mn(this)),ce!==null&&this.emit("data",ce),ce},Z.prototype._read=function(Ze){Be(this,new te("_read()"))},Z.prototype.pipe=function(Ze,at){var nn=this,ce=this._readableState;switch(ce.pipesCount){case 0:ce.pipes=Ze;break;case 1:ce.pipes=[ce.pipes,Ze];break;default:ce.pipes.push(Ze)}ce.pipesCount+=1,l("pipe count=%d opts=%j",ce.pipesCount,at);var ge=at&&at.end===!1||Ze===process.stdout||Ze===process.stderr?Lt:G;function G(){l("onend"),Ze.end()}ce.endEmitted?process.nextTick(ge):nn.once("end",ge),Ze.on("unpipe",function bt(Mt,kt){l("onunpipe"),Mt===nn&&kt&&kt.hasUnpiped===!1&&(kt.hasUnpiped=!0,l("cleanup"),Ze.removeListener("close",zt),Ze.removeListener("finish",vt),Ze.removeListener("drain",ae),Ze.removeListener("error",yt),Ze.removeListener("unpipe",bt),nn.removeListener("end",G),nn.removeListener("end",Lt),nn.removeListener("data",Ae),_e=!0,!ce.awaitDrain||Ze._writableState&&!Ze._writableState.needDrain||ae())});var ae=function(bt){return function(){var Mt=bt._readableState;l("pipeOnDrain",Mt.awaitDrain),Mt.awaitDrain&&Mt.awaitDrain--,Mt.awaitDrain===0&&d(bt,"data")&&(Mt.flowing=!0,Et(bt))}}(nn);Ze.on("drain",ae);var _e=!1;function Ae(bt){l("ondata");var Mt=Ze.write(bt);l("dest.write",Mt),Mt===!1&&((ce.pipesCount===1&&ce.pipes===Ze||ce.pipesCount>1&&Qe(ce.pipes,Ze)!==-1)&&!_e&&(l("false write response, pause",ce.awaitDrain),ce.awaitDrain++),nn.pause())}function yt(bt){l("onerror",bt),Lt(),Ze.removeListener("error",yt),d(Ze,"error")===0&&Be(Ze,bt)}function zt(){Ze.removeListener("finish",vt),Lt()}function vt(){l("onfinish"),Ze.removeListener("close",zt),Lt()}function Lt(){l("unpipe"),nn.unpipe(Ze)}return nn.on("data",Ae),function(bt,Mt,kt){if(typeof bt.prependListener=="function")return bt.prependListener(Mt,kt);bt._events&&bt._events[Mt]?Array.isArray(bt._events[Mt])?bt._events[Mt].unshift(kt):bt._events[Mt]=[kt,bt._events[Mt]]:bt.on(Mt,kt)}(Ze,"error",yt),Ze.once("close",zt),Ze.once("finish",vt),Ze.emit("pipe",nn),ce.flowing||(l("pipe resume"),nn.resume()),Ze},Z.prototype.unpipe=function(Ze){var at=this._readableState,nn={hasUnpiped:!1};if(at.pipesCount===0)return this;if(at.pipesCount===1)return Ze&&Ze!==at.pipes||(Ze||(Ze=at.pipes),at.pipes=null,at.pipesCount=0,at.flowing=!1,Ze&&Ze.emit("unpipe",this,nn)),this;if(!Ze){var ce=at.pipes,ge=at.pipesCount;at.pipes=null,at.pipesCount=0,at.flowing=!1;for(var G=0;G<ge;G++)ce[G].emit("unpipe",this,{hasUnpiped:!1});return this}var ae=Qe(at.pipes,Ze);return ae===-1||(at.pipes.splice(ae,1),at.pipesCount-=1,at.pipesCount===1&&(at.pipes=at.pipes[0]),Ze.emit("unpipe",this,nn)),this},Z.prototype.on=function(Ze,at){var nn=f.prototype.on.call(this,Ze,at),ce=this._readableState;return Ze==="data"?(ce.readableListening=this.listenerCount("readable")>0,ce.flowing!==!1&&this.resume()):Ze==="readable"&&(ce.endEmitted||ce.readableListening||(ce.readableListening=ce.needReadable=!0,ce.flowing=!1,ce.emittedReadable=!1,l("on readable",ce.length,ce.reading),ce.length?xe(this):ce.reading||process.nextTick(Dt,this))),nn},Z.prototype.addListener=Z.prototype.on,Z.prototype.removeListener=function(Ze,at){var nn=f.prototype.removeListener.call(this,Ze,at);return Ze==="readable"&&process.nextTick(ut,this),nn},Z.prototype.removeAllListeners=function(Ze){var at=f.prototype.removeAllListeners.apply(this,arguments);return Ze!=="readable"&&Ze!==void 0||process.nextTick(ut,this),at},Z.prototype.resume=function(){var Ze=this._readableState;return Ze.flowing||(l("resume"),Ze.flowing=!Ze.readableListening,function(at,nn){nn.resumeScheduled||(nn.resumeScheduled=!0,process.nextTick(dt,at,nn))}(this,Ze)),Ze.paused=!1,this},Z.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},Z.prototype.wrap=function(Ze){var at=this,nn=this._readableState,ce=!1;for(var ge in Ze.on("end",function(){if(l("wrapped end"),nn.decoder&&!nn.ended){var ae=nn.decoder.end();ae&&ae.length&&at.push(ae)}at.push(null)}),Ze.on("data",function(ae){l("wrapped data"),nn.decoder&&(ae=nn.decoder.write(ae)),nn.objectMode&&ae==null||(nn.objectMode||ae&&ae.length)&&(at.push(ae)||(ce=!0,Ze.pause()))}),Ze)this[ge]===void 0&&typeof Ze[ge]=="function"&&(this[ge]=function(ae){return function(){return Ze[ae].apply(Ze,arguments)}}(ge));for(var G=0;G<j.length;G++)Ze.on(j[G],this.emit.bind(this,j[G]));return this._read=function(ae){l("wrapped _read",ae),ce&&(ce=!1,Ze.resume())},this},typeof Symbol=="function"&&(Z.prototype[Symbol.asyncIterator]=function(){return _===void 0&&(_=n(5857)),_(this)}),Object.defineProperty(Z.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(Z.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(Z.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(Ze){this._readableState&&(this._readableState.flowing=Ze)}}),Z._fromList=Rt,Object.defineProperty(Z.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(Z.from=function(Ze,at){return A===void 0&&(A=n(3411)),A(Z,Ze,at)})},6756:function(u,t,n){u.exports=b;var r=n(1602).codes,l=r.ERR_METHOD_NOT_IMPLEMENTED,d=r.ERR_MULTIPLE_CALLBACK,f=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,p=r.ERR_TRANSFORM_WITH_LENGTH_0,m=n(884);function y(w,T){var k=this._transformState;k.transforming=!1;var U=k.writecb;if(U===null)return this.emit("error",new d);k.writechunk=null,k.writecb=null,T!=null&&this.push(T),U(w);var Y=this._readableState;Y.reading=!1,(Y.needReadable||Y.length<Y.highWaterMark)&&this._read(Y.highWaterMark)}function b(w){if(!(this instanceof b))return new b(w);m.call(this,w),this._transformState={afterTransform:y.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,w&&(typeof w.transform=="function"&&(this._transform=w.transform),typeof w.flush=="function"&&(this._flush=w.flush)),this.on("prefinish",_)}function _(){var w=this;typeof this._flush!="function"||this._readableState.destroyed?A(this,null,null):this._flush(function(T,k){A(w,T,k)})}function A(w,T,k){if(T)return w.emit("error",T);if(k!=null&&w.push(k),w._writableState.length)throw new p;if(w._transformState.transforming)throw new f;return w.push(null)}n(7523)(b,m),b.prototype.push=function(w,T){return this._transformState.needTransform=!1,m.prototype.push.call(this,w,T)},b.prototype._transform=function(w,T,k){k(new l("_transform()"))},b.prototype._write=function(w,T,k){var U=this._transformState;if(U.writecb=k,U.writechunk=w,U.writeencoding=T,!U.transforming){var Y=this._readableState;(U.needTransform||Y.needReadable||Y.length<Y.highWaterMark)&&this._read(Y.highWaterMark)}},b.prototype._read=function(w){var T=this._transformState;T.writechunk===null||T.transforming?T.needTransform=!0:(T.transforming=!0,this._transform(T.writechunk,T.writeencoding,T.afterTransform))},b.prototype._destroy=function(w,T){m.prototype._destroy.call(this,w,function(k){T(k)})}},3726:function(u,t,n){function r(et){var Xe=this;this.next=null,this.entry=null,this.finish=function(){(function(ut,Dt){var dt=ut.entry;for(ut.entry=null;dt;){var Et=dt.callback;Dt.pendingcb--,Et(void 0),dt=dt.next}Dt.corkedRequestsFree.next=ut})(Xe,et)}}var l;u.exports=Z,Z.WritableState=M;var d,f={deprecate:n(9e3)},p=n(2611),m=n(44).Buffer,y=(n.g!==void 0?n.g:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},b=n(2410),_=n(1749).getHighWaterMark,A=n(1602).codes,w=A.ERR_INVALID_ARG_TYPE,T=A.ERR_METHOD_NOT_IMPLEMENTED,k=A.ERR_MULTIPLE_CALLBACK,U=A.ERR_STREAM_CANNOT_PIPE,Y=A.ERR_STREAM_DESTROYED,se=A.ERR_STREAM_NULL_VALUES,te=A.ERR_STREAM_WRITE_AFTER_END,Re=A.ERR_UNKNOWN_ENCODING,Be=b.errorOrDestroy;function j(){}function M(et,Xe,ut){l=l||n(884),et=et||{},typeof ut!="boolean"&&(ut=Xe instanceof l),this.objectMode=!!et.objectMode,ut&&(this.objectMode=this.objectMode||!!et.writableObjectMode),this.highWaterMark=_(this,et,"writableHighWaterMark",ut),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Dt=et.decodeStrings===!1;this.decodeStrings=!Dt,this.defaultEncoding=et.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(dt){(function(Et,Rt){var mn=Et._writableState,Tn=mn.sync,Qe=mn.writecb;if(typeof Qe!="function")throw new k;if(function(at){at.writing=!1,at.writecb=null,at.length-=at.writelen,at.writelen=0}(mn),Rt)(function(at,nn,ce,ge,G){--nn.pendingcb,ce?(process.nextTick(G,ge),process.nextTick(lt,at,nn),at._writableState.errorEmitted=!0,Be(at,ge)):(G(ge),at._writableState.errorEmitted=!0,Be(at,ge),lt(at,nn))})(Et,mn,Tn,Rt,Qe);else{var Ze=$e(mn)||Et.destroyed;Ze||mn.corked||mn.bufferProcessing||!mn.bufferedRequest||ue(Et,mn),Tn?process.nextTick(x,Et,mn,Ze,Qe):x(Et,mn,Ze,Qe)}})(Xe,dt)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=et.emitClose!==!1,this.autoDestroy=!!et.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}function Z(et){var Xe=this instanceof(l=l||n(884));if(!Xe&&!d.call(Z,this))return new Z(et);this._writableState=new M(et,this,Xe),this.writable=!0,et&&(typeof et.write=="function"&&(this._write=et.write),typeof et.writev=="function"&&(this._writev=et.writev),typeof et.destroy=="function"&&(this._destroy=et.destroy),typeof et.final=="function"&&(this._final=et.final)),p.call(this)}function K(et,Xe,ut,Dt,dt,Et,Rt){Xe.writelen=Dt,Xe.writecb=Rt,Xe.writing=!0,Xe.sync=!0,Xe.destroyed?Xe.onwrite(new Y("write")):ut?et._writev(dt,Xe.onwrite):et._write(dt,Et,Xe.onwrite),Xe.sync=!1}function x(et,Xe,ut,Dt){ut||function(dt,Et){Et.length===0&&Et.needDrain&&(Et.needDrain=!1,dt.emit("drain"))}(et,Xe),Xe.pendingcb--,Dt(),lt(et,Xe)}function ue(et,Xe){Xe.bufferProcessing=!0;var ut=Xe.bufferedRequest;if(et._writev&&ut&&ut.next){var Dt=Xe.bufferedRequestCount,dt=new Array(Dt),Et=Xe.corkedRequestsFree;Et.entry=ut;for(var Rt=0,mn=!0;ut;)dt[Rt]=ut,ut.isBuf||(mn=!1),ut=ut.next,Rt+=1;dt.allBuffers=mn,K(et,Xe,!0,Xe.length,dt,"",Et.finish),Xe.pendingcb++,Xe.lastBufferedRequest=null,Et.next?(Xe.corkedRequestsFree=Et.next,Et.next=null):Xe.corkedRequestsFree=new r(Xe),Xe.bufferedRequestCount=0}else{for(;ut;){var Tn=ut.chunk,Qe=ut.encoding,Ze=ut.callback;if(K(et,Xe,!1,Xe.objectMode?1:Tn.length,Tn,Qe,Ze),ut=ut.next,Xe.bufferedRequestCount--,Xe.writing)break}ut===null&&(Xe.lastBufferedRequest=null)}Xe.bufferedRequest=ut,Xe.bufferProcessing=!1}function $e(et){return et.ending&&et.length===0&&et.bufferedRequest===null&&!et.finished&&!et.writing}function xe(et,Xe){et._final(function(ut){Xe.pendingcb--,ut&&Be(et,ut),Xe.prefinished=!0,et.emit("prefinish"),lt(et,Xe)})}function lt(et,Xe){var ut=$e(Xe);if(ut&&(function(dt,Et){Et.prefinished||Et.finalCalled||(typeof dt._final!="function"||Et.destroyed?(Et.prefinished=!0,dt.emit("prefinish")):(Et.pendingcb++,Et.finalCalled=!0,process.nextTick(xe,dt,Et)))}(et,Xe),Xe.pendingcb===0&&(Xe.finished=!0,et.emit("finish"),Xe.autoDestroy))){var Dt=et._readableState;(!Dt||Dt.autoDestroy&&Dt.endEmitted)&&et.destroy()}return ut}n(7523)(Z,p),M.prototype.getBuffer=function(){for(var et=this.bufferedRequest,Xe=[];et;)Xe.push(et),et=et.next;return Xe},function(){try{Object.defineProperty(M.prototype,"buffer",{get:f.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(d=Function.prototype[Symbol.hasInstance],Object.defineProperty(Z,Symbol.hasInstance,{value:function(et){return!!d.call(this,et)||this===Z&&et&&et._writableState instanceof M}})):d=function(et){return et instanceof this},Z.prototype.pipe=function(){Be(this,new U)},Z.prototype.write=function(et,Xe,ut){var Dt,dt=this._writableState,Et=!1,Rt=!dt.objectMode&&(Dt=et,m.isBuffer(Dt)||Dt instanceof y);return Rt&&!m.isBuffer(et)&&(et=function(mn){return m.from(mn)}(et)),typeof Xe=="function"&&(ut=Xe,Xe=null),Rt?Xe="buffer":Xe||(Xe=dt.defaultEncoding),typeof ut!="function"&&(ut=j),dt.ending?function(mn,Tn){var Qe=new te;Be(mn,Qe),process.nextTick(Tn,Qe)}(this,ut):(Rt||function(mn,Tn,Qe,Ze){var at;return Qe===null?at=new se:typeof Qe=="string"||Tn.objectMode||(at=new w("chunk",["string","Buffer"],Qe)),!at||(Be(mn,at),process.nextTick(Ze,at),!1)}(this,dt,et,ut))&&(dt.pendingcb++,Et=function(mn,Tn,Qe,Ze,at,nn){if(!Qe){var ce=function(_e,Ae,yt){return _e.objectMode||_e.decodeStrings===!1||typeof Ae!="string"||(Ae=m.from(Ae,yt)),Ae}(Tn,Ze,at);Ze!==ce&&(Qe=!0,at="buffer",Ze=ce)}var ge=Tn.objectMode?1:Ze.length;Tn.length+=ge;var G=Tn.length<Tn.highWaterMark;if(G||(Tn.needDrain=!0),Tn.writing||Tn.corked){var ae=Tn.lastBufferedRequest;Tn.lastBufferedRequest={chunk:Ze,encoding:at,isBuf:Qe,callback:nn,next:null},ae?ae.next=Tn.lastBufferedRequest:Tn.bufferedRequest=Tn.lastBufferedRequest,Tn.bufferedRequestCount+=1}else K(mn,Tn,!1,ge,Ze,at,nn);return G}(this,dt,Rt,et,Xe,ut)),Et},Z.prototype.cork=function(){this._writableState.corked++},Z.prototype.uncork=function(){var et=this._writableState;et.corked&&(et.corked--,et.writing||et.corked||et.bufferProcessing||!et.bufferedRequest||ue(this,et))},Z.prototype.setDefaultEncoding=function(et){if(typeof et=="string"&&(et=et.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((et+"").toLowerCase())>-1))throw new Re(et);return this._writableState.defaultEncoding=et,this},Object.defineProperty(Z.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(Z.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Z.prototype._write=function(et,Xe,ut){ut(new T("_write()"))},Z.prototype._writev=null,Z.prototype.end=function(et,Xe,ut){var Dt=this._writableState;return typeof et=="function"?(ut=et,et=null,Xe=null):typeof Xe=="function"&&(ut=Xe,Xe=null),et!=null&&this.write(et,Xe),Dt.corked&&(Dt.corked=1,this.uncork()),Dt.ending||function(dt,Et,Rt){Et.ending=!0,lt(dt,Et),Rt&&(Et.finished?process.nextTick(Rt):dt.once("finish",Rt)),Et.ended=!0,dt.writable=!1}(this,Dt,ut),this},Object.defineProperty(Z.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(Z.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(et){this._writableState&&(this._writableState.destroyed=et)}}),Z.prototype.destroy=b.destroy,Z.prototype._undestroy=b.undestroy,Z.prototype._destroy=function(et,Xe){Xe(et)}},5857:function(u,t,n){var r;function l(se,te,Re){return(te=function(Be){var j=function(M){if(typeof M!="object"||M===null)return M;var Z=M[Symbol.toPrimitive];if(Z!==void 0){var K=Z.call(M,"string");if(typeof K!="object")return K;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(M)}(Be);return typeof j=="symbol"?j:String(j)}(te))in se?Object.defineProperty(se,te,{value:Re,enumerable:!0,configurable:!0,writable:!0}):se[te]=Re,se}var d=n(2896),f=Symbol("lastResolve"),p=Symbol("lastReject"),m=Symbol("error"),y=Symbol("ended"),b=Symbol("lastPromise"),_=Symbol("handlePromise"),A=Symbol("stream");function w(se,te){return{value:se,done:te}}function T(se){var te=se[f];if(te!==null){var Re=se[A].read();Re!==null&&(se[b]=null,se[f]=null,se[p]=null,te(w(Re,!1)))}}function k(se){process.nextTick(T,se)}var U=Object.getPrototypeOf(function(){}),Y=Object.setPrototypeOf((l(r={get stream(){return this[A]},next:function(){var se=this,te=this[m];if(te!==null)return Promise.reject(te);if(this[y])return Promise.resolve(w(void 0,!0));if(this[A].destroyed)return new Promise(function(M,Z){process.nextTick(function(){se[m]?Z(se[m]):M(w(void 0,!0))})});var Re,Be=this[b];if(Be)Re=new Promise(function(M,Z){return function(K,x){M.then(function(){Z[y]?K(w(void 0,!0)):Z[_](K,x)},x)}}(Be,this));else{var j=this[A].read();if(j!==null)return Promise.resolve(w(j,!1));Re=new Promise(this[_])}return this[b]=Re,Re}},Symbol.asyncIterator,function(){return this}),l(r,"return",function(){var se=this;return new Promise(function(te,Re){se[A].destroy(null,function(Be){Be?Re(Be):te(w(void 0,!0))})})}),r),U);u.exports=function(se){var te,Re=Object.create(Y,(l(te={},A,{value:se,writable:!0}),l(te,f,{value:null,writable:!0}),l(te,p,{value:null,writable:!0}),l(te,m,{value:null,writable:!0}),l(te,y,{value:se._readableState.endEmitted,writable:!0}),l(te,_,{value:function(Be,j){var M=Re[A].read();M?(Re[b]=null,Re[f]=null,Re[p]=null,Be(w(M,!1))):(Re[f]=Be,Re[p]=j)},writable:!0}),te));return Re[b]=null,d(se,function(Be){if(Be&&Be.code!=="ERR_STREAM_PREMATURE_CLOSE"){var j=Re[p];return j!==null&&(Re[b]=null,Re[f]=null,Re[p]=null,j(Be)),void(Re[m]=Be)}var M=Re[f];M!==null&&(Re[b]=null,Re[f]=null,Re[p]=null,M(w(void 0,!0))),Re[y]=!0}),se.on("readable",k.bind(null,Re)),Re}},3791:function(u,t,n){function r(_,A){var w=Object.keys(_);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(_);A&&(T=T.filter(function(k){return Object.getOwnPropertyDescriptor(_,k).enumerable})),w.push.apply(w,T)}return w}function l(_){for(var A=1;A<arguments.length;A++){var w=arguments[A]!=null?arguments[A]:{};A%2?r(Object(w),!0).forEach(function(T){d(_,T,w[T])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(w)):r(Object(w)).forEach(function(T){Object.defineProperty(_,T,Object.getOwnPropertyDescriptor(w,T))})}return _}function d(_,A,w){return(A=p(A))in _?Object.defineProperty(_,A,{value:w,enumerable:!0,configurable:!0,writable:!0}):_[A]=w,_}function f(_,A){for(var w=0;w<A.length;w++){var T=A[w];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(_,p(T.key),T)}}function p(_){var A=function(w){if(typeof w!="object"||w===null)return w;var T=w[Symbol.toPrimitive];if(T!==void 0){var k=T.call(w,"string");if(typeof k!="object")return k;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(w)}(_);return typeof A=="symbol"?A:String(A)}var m=n(44).Buffer,y=n(3779).inspect,b=y&&y.custom||"inspect";u.exports=function(){function _(){(function(T,k){if(!(T instanceof k))throw new TypeError("Cannot call a class as a function")})(this,_),this.head=null,this.tail=null,this.length=0}var A,w;return A=_,(w=[{key:"push",value:function(T){var k={data:T,next:null};this.length>0?this.tail.next=k:this.head=k,this.tail=k,++this.length}},{key:"unshift",value:function(T){var k={data:T,next:this.head};this.length===0&&(this.tail=k),this.head=k,++this.length}},{key:"shift",value:function(){if(this.length!==0){var T=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,T}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(T){if(this.length===0)return"";for(var k=this.head,U=""+k.data;k=k.next;)U+=T+k.data;return U}},{key:"concat",value:function(T){if(this.length===0)return m.alloc(0);for(var k,U,Y,se=m.allocUnsafe(T>>>0),te=this.head,Re=0;te;)k=te.data,U=se,Y=Re,m.prototype.copy.call(k,U,Y),Re+=te.data.length,te=te.next;return se}},{key:"consume",value:function(T,k){var U;return T<this.head.data.length?(U=this.head.data.slice(0,T),this.head.data=this.head.data.slice(T)):U=T===this.head.data.length?this.shift():k?this._getString(T):this._getBuffer(T),U}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(T){var k=this.head,U=1,Y=k.data;for(T-=Y.length;k=k.next;){var se=k.data,te=T>se.length?se.length:T;if(te===se.length?Y+=se:Y+=se.slice(0,T),(T-=te)==0){te===se.length?(++U,k.next?this.head=k.next:this.head=this.tail=null):(this.head=k,k.data=se.slice(te));break}++U}return this.length-=U,Y}},{key:"_getBuffer",value:function(T){var k=m.allocUnsafe(T),U=this.head,Y=1;for(U.data.copy(k),T-=U.data.length;U=U.next;){var se=U.data,te=T>se.length?se.length:T;if(se.copy(k,k.length-T,0,te),(T-=te)==0){te===se.length?(++Y,U.next?this.head=U.next:this.head=this.tail=null):(this.head=U,U.data=se.slice(te));break}++Y}return this.length-=Y,k}},{key:b,value:function(T,k){return y(this,l(l({},k),{},{depth:0,customInspect:!1}))}}])&&f(A.prototype,w),Object.defineProperty(A,"prototype",{writable:!1}),_}()},2410:function(u){function t(l,d){r(l,d),n(l)}function n(l){l._writableState&&!l._writableState.emitClose||l._readableState&&!l._readableState.emitClose||l.emit("close")}function r(l,d){l.emit("error",d)}u.exports={destroy:function(l,d){var f=this,p=this._readableState&&this._readableState.destroyed,m=this._writableState&&this._writableState.destroyed;return p||m?(d?d(l):l&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(r,this,l)):process.nextTick(r,this,l)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(l||null,function(y){!d&&y?f._writableState?f._writableState.errorEmitted?process.nextTick(n,f):(f._writableState.errorEmitted=!0,process.nextTick(t,f,y)):process.nextTick(t,f,y):d?(process.nextTick(n,f),d(y)):process.nextTick(n,f)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(l,d){var f=l._readableState,p=l._writableState;f&&f.autoDestroy||p&&p.autoDestroy?l.destroy(d):l.emit("error",d)}}},2896:function(u,t,n){var r=n(1602).codes.ERR_STREAM_PREMATURE_CLOSE;function l(){}u.exports=function d(f,p,m){if(typeof p=="function")return d(f,null,p);p||(p={}),m=function(te){var Re=!1;return function(){if(!Re){Re=!0;for(var Be=arguments.length,j=new Array(Be),M=0;M<Be;M++)j[M]=arguments[M];te.apply(this,j)}}}(m||l);var y=p.readable||p.readable!==!1&&f.readable,b=p.writable||p.writable!==!1&&f.writable,_=function(){f.writable||w()},A=f._writableState&&f._writableState.finished,w=function(){b=!1,A=!0,y||m.call(f)},T=f._readableState&&f._readableState.endEmitted,k=function(){y=!1,T=!0,b||m.call(f)},U=function(te){m.call(f,te)},Y=function(){var te;return y&&!T?(f._readableState&&f._readableState.ended||(te=new r),m.call(f,te)):b&&!A?(f._writableState&&f._writableState.ended||(te=new r),m.call(f,te)):void 0},se=function(){f.req.on("finish",w)};return function(te){return te.setHeader&&typeof te.abort=="function"}(f)?(f.on("complete",w),f.on("abort",Y),f.req?se():f.on("request",se)):b&&!f._writableState&&(f.on("end",_),f.on("close",_)),f.on("end",k),f.on("finish",w),p.error!==!1&&f.on("error",U),f.on("close",Y),function(){f.removeListener("complete",w),f.removeListener("abort",Y),f.removeListener("request",se),f.req&&f.req.removeListener("finish",w),f.removeListener("end",_),f.removeListener("close",_),f.removeListener("finish",w),f.removeListener("end",k),f.removeListener("error",U),f.removeListener("close",Y)}}},3411:function(u){u.exports=function(){throw new Error("Readable.from is not available in the browser")}},8460:function(u,t,n){var r,l=n(1602).codes,d=l.ERR_MISSING_ARGS,f=l.ERR_STREAM_DESTROYED;function p(b){if(b)throw b}function m(b){b()}function y(b,_){return b.pipe(_)}u.exports=function(){for(var b=arguments.length,_=new Array(b),A=0;A<b;A++)_[A]=arguments[A];var w,T=function(U){return U.length?typeof U[U.length-1]!="function"?p:U.pop():p}(_);if(Array.isArray(_[0])&&(_=_[0]),_.length<2)throw new d("streams");var k=_.map(function(U,Y){var se=Y<_.length-1;return function(te,Re,Be,j){j=function(K){var x=!1;return function(){x||(x=!0,K.apply(void 0,arguments))}}(j);var M=!1;te.on("close",function(){M=!0}),r===void 0&&(r=n(2896)),r(te,{readable:Re,writable:Be},function(K){if(K)return j(K);M=!0,j()});var Z=!1;return function(K){if(!M&&!Z)return Z=!0,function(x){return x.setHeader&&typeof x.abort=="function"}(te)?te.abort():typeof te.destroy=="function"?te.destroy():void j(K||new f("pipe"))}}(U,se,Y>0,function(te){w||(w=te),te&&k.forEach(m),se||(k.forEach(m),T(w))})});return _.reduce(y)}},1749:function(u,t,n){var r=n(1602).codes.ERR_INVALID_OPT_VALUE;u.exports={getHighWaterMark:function(l,d,f,p){var m=function(y,b,_){return y.highWaterMark!=null?y.highWaterMark:b?y[_]:null}(d,p,f);if(m!=null){if(!isFinite(m)||Math.floor(m)!==m||m<0)throw new r(p?f:"highWaterMark",m);return Math.floor(m)}return l.objectMode?16:16384}}},2611:function(u,t,n){u.exports=n(9826).EventEmitter},748:function(u,t,n){var r=n(4598).Buffer,l=r.isEncoding||function(T){switch((T=""+T)&&T.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function d(T){var k;switch(this.encoding=function(U){var Y=function(se){if(!se)return"utf8";for(var te;;)switch(se){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return se;default:if(te)return;se=(""+se).toLowerCase(),te=!0}}(U);if(typeof Y!="string"&&(r.isEncoding===l||!l(U)))throw new Error("Unknown encoding: "+U);return Y||U}(T),this.encoding){case"utf16le":this.text=m,this.end=y,k=4;break;case"utf8":this.fillLast=p,k=4;break;case"base64":this.text=b,this.end=_,k=3;break;default:return this.write=A,void(this.end=w)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(k)}function f(T){return T<=127?0:T>>5==6?2:T>>4==14?3:T>>3==30?4:T>>6==2?-1:-2}function p(T){var k=this.lastTotal-this.lastNeed,U=function(Y,se){if((192&se[0])!=128)return Y.lastNeed=0,"";if(Y.lastNeed>1&&se.length>1){if((192&se[1])!=128)return Y.lastNeed=1,"";if(Y.lastNeed>2&&se.length>2&&(192&se[2])!=128)return Y.lastNeed=2,""}}(this,T);return U!==void 0?U:this.lastNeed<=T.length?(T.copy(this.lastChar,k,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(T.copy(this.lastChar,k,0,T.length),void(this.lastNeed-=T.length))}function m(T,k){if((T.length-k)%2==0){var U=T.toString("utf16le",k);if(U){var Y=U.charCodeAt(U.length-1);if(Y>=55296&&Y<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=T[T.length-2],this.lastChar[1]=T[T.length-1],U.slice(0,-1)}return U}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=T[T.length-1],T.toString("utf16le",k,T.length-1)}function y(T){var k=T&&T.length?this.write(T):"";if(this.lastNeed){var U=this.lastTotal-this.lastNeed;return k+this.lastChar.toString("utf16le",0,U)}return k}function b(T,k){var U=(T.length-k)%3;return U===0?T.toString("base64",k):(this.lastNeed=3-U,this.lastTotal=3,U===1?this.lastChar[0]=T[T.length-1]:(this.lastChar[0]=T[T.length-2],this.lastChar[1]=T[T.length-1]),T.toString("base64",k,T.length-U))}function _(T){var k=T&&T.length?this.write(T):"";return this.lastNeed?k+this.lastChar.toString("base64",0,3-this.lastNeed):k}function A(T){return T.toString(this.encoding)}function w(T){return T&&T.length?this.write(T):""}t.StringDecoder=d,d.prototype.write=function(T){if(T.length===0)return"";var k,U;if(this.lastNeed){if((k=this.fillLast(T))===void 0)return"";U=this.lastNeed,this.lastNeed=0}else U=0;return U<T.length?k?k+this.text(T,U):this.text(T,U):k||""},d.prototype.end=function(T){var k=T&&T.length?this.write(T):"";return this.lastNeed?k+"":k},d.prototype.text=function(T,k){var U=function(se,te,Re){var Be=te.length-1;if(Be<Re)return 0;var j=f(te[Be]);return j>=0?(j>0&&(se.lastNeed=j-1),j):--Be<Re||j===-2?0:(j=f(te[Be]))>=0?(j>0&&(se.lastNeed=j-2),j):--Be<Re||j===-2?0:(j=f(te[Be]))>=0?(j>0&&(j===2?j=0:se.lastNeed=j-3),j):0}(this,T,k);if(!this.lastNeed)return T.toString("utf8",k);this.lastTotal=U;var Y=T.length-(U-this.lastNeed);return T.copy(this.lastChar,0,Y),T.toString("utf8",k,Y)},d.prototype.fillLast=function(T){if(this.lastNeed<=T.length)return T.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);T.copy(this.lastChar,this.lastTotal-this.lastNeed,0,T.length),this.lastNeed-=T.length}},4598:function(u,t,n){var r=n(44),l=r.Buffer;function d(p,m){for(var y in p)m[y]=p[y]}function f(p,m,y){return l(p,m,y)}l.from&&l.alloc&&l.allocUnsafe&&l.allocUnsafeSlow?u.exports=r:(d(r,t),t.Buffer=f),d(l,f),f.from=function(p,m,y){if(typeof p=="number")throw new TypeError("Argument must not be a number");return l(p,m,y)},f.alloc=function(p,m,y){if(typeof p!="number")throw new TypeError("Argument must be a number");var b=l(p);return m!==void 0?typeof y=="string"?b.fill(m,y):b.fill(m):b.fill(0),b},f.allocUnsafe=function(p){if(typeof p!="number")throw new TypeError("Argument must be a number");return l(p)},f.allocUnsafeSlow=function(p){if(typeof p!="number")throw new TypeError("Argument must be a number");return r.SlowBuffer(p)}},8571:function(u,t,n){var r;(function(l,d){var f="function",p="undefined",m="object",y="string",b="major",_="model",A="name",w="type",T="vendor",k="version",U="architecture",Y="console",se="mobile",te="tablet",Re="smarttv",Be="wearable",j="embedded",M="Amazon",Z="Apple",K="ASUS",x="BlackBerry",ue="Browser",$e="Chrome",xe="Firefox",lt="Google",et="Huawei",Xe="LG",ut="Microsoft",Dt="Motorola",dt="Opera",Et="Samsung",Rt="Sharp",mn="Sony",Tn="Xiaomi",Qe="Zebra",Ze="Facebook",at="Chromium OS",nn="Mac OS",ce=function(Mt){for(var kt={},Bt=0;Bt<Mt.length;Bt++)kt[Mt[Bt].toUpperCase()]=Mt[Bt];return kt},ge=function(Mt,kt){return typeof Mt===y&&G(kt).indexOf(G(Mt))!==-1},G=function(Mt){return Mt.toLowerCase()},ae=function(Mt,kt){if(typeof Mt===y)return Mt=Mt.replace(/^\s\s*/,""),typeof kt===p?Mt:Mt.substring(0,500)},_e=function(Mt,kt){for(var Bt,sn,ti,On,Vn,Sn,ni=0;ni<kt.length&&!Vn;){var dr=kt[ni],_r=kt[ni+1];for(Bt=sn=0;Bt<dr.length&&!Vn&&dr[Bt];)if(Vn=dr[Bt++].exec(Mt))for(ti=0;ti<_r.length;ti++)Sn=Vn[++sn],typeof(On=_r[ti])===m&&On.length>0?On.length===2?typeof On[1]==f?this[On[0]]=On[1].call(this,Sn):this[On[0]]=On[1]:On.length===3?typeof On[1]!==f||On[1].exec&&On[1].test?this[On[0]]=Sn?Sn.replace(On[1],On[2]):d:this[On[0]]=Sn?On[1].call(this,Sn,On[2]):d:On.length===4&&(this[On[0]]=Sn?On[3].call(this,Sn.replace(On[1],On[2])):d):this[On]=Sn||d;ni+=2}},Ae=function(Mt,kt){for(var Bt in kt)if(typeof kt[Bt]===m&&kt[Bt].length>0){for(var sn=0;sn<kt[Bt].length;sn++)if(ge(kt[Bt][sn],Mt))return Bt==="?"?d:Bt}else if(ge(kt[Bt],Mt))return Bt==="?"?d:Bt;return Mt},yt={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},zt={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[k,[A,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[k,[A,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[A,k],[/opios[\/ ]+([\w\.]+)/i],[k,[A,dt+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[k,[A,dt+" GX"]],[/\bopr\/([\w\.]+)/i],[k,[A,dt]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[k,[A,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[A,k],[/\bddg\/([\w\.]+)/i],[k,[A,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[k,[A,"UC"+ue]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[k,[A,"WeChat"]],[/konqueror\/([\w\.]+)/i],[k,[A,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[k,[A,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[k,[A,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[k,[A,"Smart Lenovo "+ue]],[/(avast|avg)\/([\w\.]+)/i],[[A,/(.+)/,"$1 Secure "+ue],k],[/\bfocus\/([\w\.]+)/i],[k,[A,xe+" Focus"]],[/\bopt\/([\w\.]+)/i],[k,[A,dt+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[k,[A,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[k,[A,"Dolphin"]],[/coast\/([\w\.]+)/i],[k,[A,dt+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[k,[A,"MIUI "+ue]],[/fxios\/([-\w\.]+)/i],[k,[A,xe]],[/\bqihu|(qi?ho?o?|360)browser/i],[[A,"360 "+ue]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[A,/(.+)/,"$1 "+ue],k],[/samsungbrowser\/([\w\.]+)/i],[k,[A,Et+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[A,/_/g," "],k],[/metasr[\/ ]?([\d\.]+)/i],[k,[A,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[A,"Sogou Mobile"],k],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[A,k],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[A],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[A,Ze],k],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[A,k],[/\bgsa\/([\w\.]+) .*safari\//i],[k,[A,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[k,[A,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[k,[A,$e+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[A,$e+" WebView"],k],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[k,[A,"Android "+ue]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[A,k],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[k,[A,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[k,A],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[A,[k,Ae,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[A,k],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[A,"Netscape"],k],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[k,[A,xe+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[A,k],[/(cobalt)\/([\w\.]+)/i],[A,[k,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[U,"amd64"]],[/(ia32(?=;))/i],[[U,G]],[/((?:i[346]|x)86)[;\)]/i],[[U,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[U,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[U,"armhf"]],[/windows (ce|mobile); ppc;/i],[[U,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[U,/ower/,"",G]],[/(sun4\w)[;\)]/i],[[U,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[U,G]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[_,[T,Et],[w,te]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[_,[T,Et],[w,se]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[_,[T,Z],[w,se]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[_,[T,Z],[w,te]],[/(macintosh);/i],[_,[T,Z]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[_,[T,Rt],[w,se]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[_,[T,et],[w,te]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[_,[T,et],[w,se]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[_,/_/g," "],[T,Tn],[w,se]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[_,/_/g," "],[T,Tn],[w,te]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[_,[T,"OPPO"],[w,se]],[/\b(opd2\d{3}a?) bui/i],[_,[T,"OPPO"],[w,te]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[_,[T,"Vivo"],[w,se]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[_,[T,"Realme"],[w,se]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[_,[T,Dt],[w,se]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[_,[T,Dt],[w,te]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[_,[T,Xe],[w,te]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[_,[T,Xe],[w,se]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[_,[T,"Lenovo"],[w,te]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[_,/_/g," "],[T,"Nokia"],[w,se]],[/(pixel c)\b/i],[_,[T,lt],[w,te]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[_,[T,lt],[w,se]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[_,[T,mn],[w,se]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[_,"Xperia Tablet"],[T,mn],[w,te]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[_,[T,"OnePlus"],[w,se]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[_,[T,M],[w,te]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[_,/(.+)/g,"Fire Phone $1"],[T,M],[w,se]],[/(playbook);[-\w\),; ]+(rim)/i],[_,T,[w,te]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[_,[T,x],[w,se]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[_,[T,K],[w,te]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[_,[T,K],[w,se]],[/(nexus 9)/i],[_,[T,"HTC"],[w,te]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[T,[_,/_/g," "],[w,se]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[_,[T,"Acer"],[w,te]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[_,[T,"Meizu"],[w,se]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[_,[T,"Ulefone"],[w,se]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[T,_,[w,se]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[T,_,[w,te]],[/(surface duo)/i],[_,[T,ut],[w,te]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[_,[T,"Fairphone"],[w,se]],[/(u304aa)/i],[_,[T,"AT&T"],[w,se]],[/\bsie-(\w*)/i],[_,[T,"Siemens"],[w,se]],[/\b(rct\w+) b/i],[_,[T,"RCA"],[w,te]],[/\b(venue[\d ]{2,7}) b/i],[_,[T,"Dell"],[w,te]],[/\b(q(?:mv|ta)\w+) b/i],[_,[T,"Verizon"],[w,te]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[_,[T,"Barnes & Noble"],[w,te]],[/\b(tm\d{3}\w+) b/i],[_,[T,"NuVision"],[w,te]],[/\b(k88) b/i],[_,[T,"ZTE"],[w,te]],[/\b(nx\d{3}j) b/i],[_,[T,"ZTE"],[w,se]],[/\b(gen\d{3}) b.+49h/i],[_,[T,"Swiss"],[w,se]],[/\b(zur\d{3}) b/i],[_,[T,"Swiss"],[w,te]],[/\b((zeki)?tb.*\b) b/i],[_,[T,"Zeki"],[w,te]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[T,"Dragon Touch"],_,[w,te]],[/\b(ns-?\w{0,9}) b/i],[_,[T,"Insignia"],[w,te]],[/\b((nxa|next)-?\w{0,9}) b/i],[_,[T,"NextBook"],[w,te]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[T,"Voice"],_,[w,se]],[/\b(lvtel\-)?(v1[12]) b/i],[[T,"LvTel"],_,[w,se]],[/\b(ph-1) /i],[_,[T,"Essential"],[w,se]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[_,[T,"Envizen"],[w,te]],[/\b(trio[-\w\. ]+) b/i],[_,[T,"MachSpeed"],[w,te]],[/\btu_(1491) b/i],[_,[T,"Rotor"],[w,te]],[/(shield[\w ]+) b/i],[_,[T,"Nvidia"],[w,te]],[/(sprint) (\w+)/i],[T,_,[w,se]],[/(kin\.[onetw]{3})/i],[[_,/\./g," "],[T,ut],[w,se]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[_,[T,Qe],[w,te]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[_,[T,Qe],[w,se]],[/smart-tv.+(samsung)/i],[T,[w,Re]],[/hbbtv.+maple;(\d+)/i],[[_,/^/,"SmartTV"],[T,Et],[w,Re]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[T,Xe],[w,Re]],[/(apple) ?tv/i],[T,[_,Z+" TV"],[w,Re]],[/crkey/i],[[_,$e+"cast"],[T,lt],[w,Re]],[/droid.+aft(\w+)( bui|\))/i],[_,[T,M],[w,Re]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[_,[T,Rt],[w,Re]],[/(bravia[\w ]+)( bui|\))/i],[_,[T,mn],[w,Re]],[/(mitv-\w{5}) bui/i],[_,[T,Tn],[w,Re]],[/Hbbtv.*(technisat) (.*);/i],[T,_,[w,Re]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[T,ae],[_,ae],[w,Re]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[w,Re]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[T,_,[w,Y]],[/droid.+; (shield) bui/i],[_,[T,"Nvidia"],[w,Y]],[/(playstation [345portablevi]+)/i],[_,[T,mn],[w,Y]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[_,[T,ut],[w,Y]],[/((pebble))app/i],[T,_,[w,Be]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[_,[T,Z],[w,Be]],[/droid.+; (glass) \d/i],[_,[T,lt],[w,Be]],[/droid.+; (wt63?0{2,3})\)/i],[_,[T,Qe],[w,Be]],[/(quest( \d| pro)?)/i],[_,[T,Ze],[w,Be]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[T,[w,j]],[/(aeobc)\b/i],[_,[T,M],[w,j]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[_,[w,se]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[_,[w,te]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[w,te]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[w,se]],[/(android[-\w\. ]{0,9});.+buil/i],[_,[T,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[k,[A,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[k,[A,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[A,k],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[k,A]],os:[[/microsoft (windows) (vista|xp)/i],[A,k],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[A,[k,Ae,yt]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[k,Ae,yt],[A,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[k,/_/g,"."],[A,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[A,nn],[k,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[k,A],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[A,k],[/\(bb(10);/i],[k,[A,x]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[k,[A,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[k,[A,xe+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[k,[A,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[k,[A,"watchOS"]],[/crkey\/([\d\.]+)/i],[k,[A,$e+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[A,at],k],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[A,k],[/(sunos) ?([\w\.\d]*)/i],[[A,"Solaris"],k],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[A,k]]},vt=function(Mt,kt){if(typeof Mt===m&&(kt=Mt,Mt=d),!(this instanceof vt))return new vt(Mt,kt).getResult();var Bt=typeof l!==p&&l.navigator?l.navigator:d,sn=Mt||(Bt&&Bt.userAgent?Bt.userAgent:""),ti=Bt&&Bt.userAgentData?Bt.userAgentData:d,On=kt?function(Sn,ni){var dr={};for(var _r in Sn)ni[_r]&&ni[_r].length%2==0?dr[_r]=ni[_r].concat(Sn[_r]):dr[_r]=Sn[_r];return dr}(zt,kt):zt,Vn=Bt&&Bt.userAgent==sn;return this.getBrowser=function(){var Sn,ni={};return ni[A]=d,ni[k]=d,_e.call(ni,sn,On.browser),ni[b]=typeof(Sn=ni[k])===y?Sn.replace(/[^\d\.]/g,"").split(".")[0]:d,Vn&&Bt&&Bt.brave&&typeof Bt.brave.isBrave==f&&(ni[A]="Brave"),ni},this.getCPU=function(){var Sn={};return Sn[U]=d,_e.call(Sn,sn,On.cpu),Sn},this.getDevice=function(){var Sn={};return Sn[T]=d,Sn[_]=d,Sn[w]=d,_e.call(Sn,sn,On.device),Vn&&!Sn[w]&&ti&&ti.mobile&&(Sn[w]=se),Vn&&Sn[_]=="Macintosh"&&Bt&&typeof Bt.standalone!==p&&Bt.maxTouchPoints&&Bt.maxTouchPoints>2&&(Sn[_]="iPad",Sn[w]=te),Sn},this.getEngine=function(){var Sn={};return Sn[A]=d,Sn[k]=d,_e.call(Sn,sn,On.engine),Sn},this.getOS=function(){var Sn={};return Sn[A]=d,Sn[k]=d,_e.call(Sn,sn,On.os),Vn&&!Sn[A]&&ti&&ti.platform&&ti.platform!="Unknown"&&(Sn[A]=ti.platform.replace(/chrome os/i,at).replace(/macos/i,nn)),Sn},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return sn},this.setUA=function(Sn){return sn=typeof Sn===y&&Sn.length>500?ae(Sn,500):Sn,this},this.setUA(sn),this};vt.VERSION="1.0.38",vt.BROWSER=ce([A,k,b]),vt.CPU=ce([U]),vt.DEVICE=ce([_,T,w,Y,se,Re,te,Be,j]),vt.ENGINE=vt.OS=ce([A,k]),typeof t!==p?(u.exports&&(t=u.exports=vt),t.UAParser=vt):n.amdO?(r=(function(){return vt}).call(t,n,t,u))===d||(u.exports=r):typeof l!==p&&(l.UAParser=vt);var Lt=typeof l!==p&&(l.jQuery||l.Zepto);if(Lt&&!Lt.ua){var bt=new vt;Lt.ua=bt.getResult(),Lt.ua.get=function(){return bt.getUA()},Lt.ua.set=function(Mt){bt.setUA(Mt);var kt=bt.getResult();for(var Bt in kt)Lt.ua[Bt]=kt[Bt]}}})(typeof window=="object"?window:this)},9e3:function(u,t,n){function r(l){try{if(!n.g.localStorage)return!1}catch{return!1}var d=n.g.localStorage[l];return d!=null&&String(d).toLowerCase()==="true"}u.exports=function(l,d){if(r("noDeprecation"))return l;var f=!1;return function(){if(!f){if(r("throwDeprecation"))throw new Error(d);r("traceDeprecation")?console.trace(d):console.warn(d),f=!0}return l.apply(this,arguments)}}},3779:function(){},7199:function(){},5393:function(u,t,n){n.r(t),n.d(t,{Debug:function(){return d.default},FactoryMaker:function(){return l.default},MediaPlayer:function(){return r.default}});var r=n(4461),l=n(138),d=n(649),f=n(8986),p=typeof window<"u"&&window||global,m=p.dashjs;m||(m=p.dashjs={}),m.MediaPlayer=r.default,m.FactoryMaker=l.default,m.Debug=d.default,m.Version=(0,f.getVersionString)(),t.default=m},649:function(u,t,n){n.r(t);var r=n(8850),l=n(3621),d=n(138);function f(m){m=m||{};const y=this.context,b=(0,r.default)(y).getInstance(),_=m.settings,A=[];let w,T,k,U;function Y(Z){return Z&&Z.bind?Z.bind(window.console):window.console.log.bind(window.console)}function se(){for(var Z=arguments.length,K=new Array(Z),x=0;x<Z;x++)K[x]=arguments[x];M(1,this,...K)}function te(){for(var Z=arguments.length,K=new Array(Z),x=0;x<Z;x++)K[x]=arguments[x];M(2,this,...K)}function Re(){for(var Z=arguments.length,K=new Array(Z),x=0;x<Z;x++)K[x]=arguments[x];M(3,this,...K)}function Be(){for(var Z=arguments.length,K=new Array(Z),x=0;x<Z;x++)K[x]=arguments[x];M(4,this,...K)}function j(){for(var Z=arguments.length,K=new Array(Z),x=0;x<Z;x++)K[x]=arguments[x];M(5,this,...K)}function M(Z,K){let x="",ue=null;T&&(ue=new Date().getTime(),x+="["+(ue-U)+"]"),k&&K&&K.getClassName&&(x+="["+K.getClassName()+"]",K.getType&&(x+="["+K.getType()+"]")),x.length>0&&(x+=" ");for(var $e=arguments.length,xe=new Array($e>2?$e-2:0),lt=2;lt<$e;lt++)xe[lt-2]=arguments[lt];Array.apply(null,xe).forEach(function(et){x+=et+" "}),A[Z]&&_&&_.get().debug.logLevel>=Z&&A[Z](x),_&&_.get().debug.dispatchEvent&&b.trigger(l.default.LOG,{message:x,level:Z})}return w={getLogger:function(Z){return{fatal:se.bind(Z),error:te.bind(Z),warn:Re.bind(Z),info:Be.bind(Z),debug:j.bind(Z)}},setLogTimestampVisible:function(Z){T=Z},setCalleeNameVisible:function(Z){k=Z}},T=!0,k=!0,U=new Date().getTime(),typeof window<"u"&&window.console&&(A[1]=Y(window.console.error),A[2]=Y(window.console.error),A[3]=Y(window.console.warn),A[4]=Y(window.console.info),A[5]=Y(window.console.debug)),w}f.__dashjs_factory_name="Debug";const p=d.default.getSingletonFactory(f);p.LOG_LEVEL_NONE=0,p.LOG_LEVEL_FATAL=1,p.LOG_LEVEL_ERROR=2,p.LOG_LEVEL_WARNING=3,p.LOG_LEVEL_INFO=4,p.LOG_LEVEL_DEBUG=5,d.default.updateSingletonFactory(f.__dashjs_factory_name,p),t.default=p},8850:function(u,t,n){n.r(t);var r=n(138),l=n(1191);function d(){let p={};function m(A,w,T){let k=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},U=arguments.length>4&&arguments[4]!==void 0&&arguments[4];if(!A)throw new Error("event type cannot be null or undefined");if(!w||typeof w!="function")throw new Error("listener must be a function: "+w);let Y=k.priority||0;if(b(A,w,T)>=0)return;p[A]=p[A]||[];const se={callback:w,scope:T,priority:Y,executeOnlyOnce:U};T&&T.getStreamId&&(se.streamId=T.getStreamId()),T&&T.getType&&(se.mediaType=T.getType()),k&&k.mode&&(se.mode=k.mode),p[A].some((te,Re)=>{if(te&&Y>te.priority)return p[A].splice(Re,0,se),!0})||p[A].push(se)}function y(A,w,T){if(!A||!w||!p[A])return;const k=b(A,w,T);k<0||(p[A][k]=null)}function b(A,w,T){let k=-1;return p[A]&&p[A].some((U,Y)=>{if(U&&U.callback===w&&(!T||T===U.scope))return k=Y,!0}),k}return{on:function(A,w,T){m(A,w,T,arguments.length>3&&arguments[3]!==void 0?arguments[3]:{})},once:function(A,w,T){m(A,w,T,arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},!0)},off:y,trigger:function(A){let w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!A||!p[A])return;if(w=w||{},w.hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");w.type=A,T.streamId&&(w.streamId=T.streamId),T.mediaType&&(w.mediaType=T.mediaType);const k=[];p[A].filter(U=>!(!U||T.streamId&&U.streamId&&U.streamId!==T.streamId||T.mediaType&&U.mediaType&&U.mediaType!==T.mediaType||T.mode&&U.mode&&U.mode!==T.mode||!U.mode&&T.mode&&T.mode===l.default.EVENT_MODE_ON_RECEIVE)).forEach(U=>{U&&U.callback.call(U.scope,w),U.executeOnlyOnce&&k.push(U)}),k.forEach(U=>{y(A,U.callback,U.scope)})},reset:function(){p={}}}}d.__dashjs_factory_name="EventBus";const f=r.default.getSingletonFactory(d);f.EVENT_PRIORITY_LOW=0,f.EVENT_PRIORITY_HIGH=5e3,r.default.updateSingletonFactory(d.__dashjs_factory_name,f),t.default=f},138:function(u,t,n){n.r(t);const r=function(){let l,d=[];const f={},p={};function m(A,w){for(const T in d){const k=d[T];if(k.context===A&&k.name===w)return k.instance}return null}function y(A,w){return w[A]}function b(A,w,T){A in T&&(T[A]=w)}function _(A,w,T){let k;const U=A.__dashjs_factory_name,Y=w[U];if(Y){let se=Y.instance;if(!Y.override)return se.apply({context:w,factory:l},T);k=A.apply({context:w},T),se=se.apply({context:w,factory:l,parent:k},T);for(const te in se)k.hasOwnProperty(te)&&(k[te]=se[te])}else k=A.apply({context:w},T);return k.getClassName=function(){return U},k}return l={extend:function(A,w,T,k){!k[A]&&w&&(k[A]={instance:w,override:T})},getSingletonInstance:m,setSingletonInstance:function(A,w,T){for(const k in d){const U=d[k];if(U.context===A&&U.name===w)return void(d[k].instance=T)}d.push({name:w,context:A,instance:T})},deleteSingletonInstances:function(A){d=d.filter(w=>w.context!==A)},getSingletonFactory:function(A){let w=y(A.__dashjs_factory_name,f);return w||(w=function(T){let k;return T===void 0&&(T={}),{getInstance:function(){return k||(k=m(T,A.__dashjs_factory_name)),k||(k=_(A,T,arguments),d.push({name:A.__dashjs_factory_name,context:T,instance:k})),k}}},f[A.__dashjs_factory_name]=w),w},getSingletonFactoryByName:function(A){return y(A,f)},updateSingletonFactory:function(A,w){b(A,w,f)},getClassFactory:function(A){let w=y(A.__dashjs_factory_name,p);return w||(w=function(T){return T===void 0&&(T={}),{create:function(){return _(A,T,arguments)}}},p[A.__dashjs_factory_name]=w),w},getClassFactoryByName:function(A){return y(A,p)},updateClassFactory:function(A,w){b(A,w,p)}},l}();t.default=r},8261:function(u,t,n){n.r(t);var r=n(138),l=n(7263),d=n(649),f=n(5212),p=n(7568),m=n(8850),y=n(3621);function b(){let A;const w=this.context,T=(0,m.default)(w).getInstance(),k={"streaming.delay.liveDelay":y.default.SETTING_UPDATED_LIVE_DELAY,"streaming.delay.liveDelayFragmentCount":y.default.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,"streaming.liveCatchup.enabled":y.default.SETTING_UPDATED_CATCHUP_ENABLED,"streaming.liveCatchup.playbackRate.min":y.default.SETTING_UPDATED_PLAYBACK_RATE_MIN,"streaming.liveCatchup.playbackRate.max":y.default.SETTING_UPDATED_PLAYBACK_RATE_MAX,"streaming.abr.rules.throughputRule.active":y.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.bolaRule.active":y.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.insufficientBufferRule.active":y.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.switchHistoryRule.active":y.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.droppedFramesRule.active":y.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.abandonRequestsRule.active":y.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.l2ARule.active":y.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.loLPRule.active":y.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.maxBitrate.video":y.default.SETTING_UPDATED_MAX_BITRATE,"streaming.abr.maxBitrate.audio":y.default.SETTING_UPDATED_MAX_BITRATE,"streaming.abr.minBitrate.video":y.default.SETTING_UPDATED_MIN_BITRATE,"streaming.abr.minBitrate.audio":y.default.SETTING_UPDATED_MIN_BITRATE},U={debug:{logLevel:d.default.LOG_LEVEL_WARNING,dispatchEvent:!1},streaming:{abandonLoadTimeout:1e4,wallclockTimeUpdateInterval:100,manifestUpdateRetryInterval:100,liveUpdateTimeThresholdInMilliseconds:0,cacheInitSegments:!1,applyServiceDescription:!0,applyProducerReferenceTime:!0,applyContentSteering:!0,enableManifestDurationMismatchFix:!0,parseInbandPrft:!1,enableManifestTimescaleMismatchFix:!1,capabilities:{filterUnsupportedEssentialProperties:!0,supportedEssentialProperties:[{schemeIdUri:f.default.FONT_DOWNLOAD_DVB_SCHEME},{schemeIdUri:f.default.COLOUR_PRIMARIES_SCHEME_ID_URI,value:/1|5|6|7/},{schemeIdUri:f.default.URL_QUERY_INFO_SCHEME},{schemeIdUri:f.default.EXT_URL_QUERY_INFO_SCHEME},{schemeIdUri:f.default.MATRIX_COEFFICIENTS_SCHEME_ID_URI,value:/0|1|5|6/},{schemeIdUri:f.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI,value:/1|6|13|14|15/},...f.default.THUMBNAILS_SCHEME_ID_URIS.map(te=>({schemeIdUri:te}))],useMediaCapabilitiesApi:!0,filterVideoColorimetryEssentialProperties:!1,filterHDRMetadataFormatEssentialProperties:!1},events:{eventControllerRefreshDelay:100,deleteEventMessageDataTimeout:1e4},timeShiftBuffer:{calcFromSegmentTimeline:!1,fallbackToSegmentTimeline:!0},metrics:{maxListDepth:100},delay:{liveDelayFragmentCount:NaN,liveDelay:NaN,useSuggestedPresentationDelay:!0},protection:{keepProtectionMediaKeys:!1,ignoreEmeEncryptedEvent:!1,detectPlayreadyMessageFormat:!0,ignoreKeyStatuses:!1},buffer:{enableSeekDecorrelationFix:!1,fastSwitchEnabled:null,flushBufferAtTrackSwitch:!1,reuseExistingSourceBuffers:!0,bufferPruningInterval:10,bufferToKeep:20,bufferTimeAtTopQuality:30,bufferTimeAtTopQualityLongForm:60,initialBufferLevel:NaN,bufferTimeDefault:18,longFormContentDurationThreshold:600,stallThreshold:.3,lowLatencyStallThreshold:.3,useAppendWindow:!0,setStallState:!0,avoidCurrentTimeRangePruning:!1,useChangeType:!0,mediaSourceDurationInfinity:!0,resetSourceBuffersForTrackSwitch:!1,syntheticStallEvents:{enabled:!1,ignoreReadyState:!1}},gaps:{jumpGaps:!0,jumpLargeGaps:!0,smallGapLimit:1.5,threshold:.3,enableSeekFix:!0,enableStallFix:!1,stallSeek:.1},utcSynchronization:{enabled:!0,useManifestDateHeaderTimeSource:!0,backgroundAttempts:2,timeBetweenSyncAttempts:30,maximumTimeBetweenSyncAttempts:600,minimumTimeBetweenSyncAttempts:2,timeBetweenSyncAttemptsAdjustmentFactor:2,maximumAllowedDrift:100,enableBackgroundSyncAfterSegmentDownloadError:!0,defaultTimingSource:{scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"https://time.akamai.com/?iso&ms"}},scheduling:{defaultTimeout:500,lowLatencyTimeout:0,scheduleWhilePaused:!0},text:{defaultEnabled:!0,dispatchForManualRendering:!1,extendSegmentedCues:!0,imsc:{displayForcedOnlyMode:!1,enableRollUp:!0},webvtt:{customRenderingEnabled:!1}},liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN},playbackBufferMin:.5,enabled:null,mode:f.default.LIVE_CATCHUP_MODE_DEFAULT},lastBitrateCachingInfo:{enabled:!0,ttl:36e4},lastMediaSettingsCachingInfo:{enabled:!0,ttl:36e4},saveLastMediaSettingsForCurrentStreamingSession:!0,cacheLoadThresholds:{video:10,audio:5},trackSwitchMode:{audio:f.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE,video:f.default.TRACK_SWITCH_MODE_NEVER_REPLACE},ignoreSelectionPriority:!1,selectionModeForInitialTrack:f.default.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY,fragmentRequestTimeout:2e4,fragmentRequestProgressTimeout:-1,manifestRequestTimeout:1e4,retryIntervals:{[p.HTTPRequest.MPD_TYPE]:500,[p.HTTPRequest.XLINK_EXPANSION_TYPE]:500,[p.HTTPRequest.MEDIA_SEGMENT_TYPE]:1e3,[p.HTTPRequest.INIT_SEGMENT_TYPE]:1e3,[p.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE]:1e3,[p.HTTPRequest.INDEX_SEGMENT_TYPE]:1e3,[p.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE]:1e3,[p.HTTPRequest.LICENSE]:1e3,[p.HTTPRequest.OTHER_TYPE]:1e3,lowLatencyReductionFactor:10},retryAttempts:{[p.HTTPRequest.MPD_TYPE]:3,[p.HTTPRequest.XLINK_EXPANSION_TYPE]:1,[p.HTTPRequest.MEDIA_SEGMENT_TYPE]:3,[p.HTTPRequest.INIT_SEGMENT_TYPE]:3,[p.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE]:3,[p.HTTPRequest.INDEX_SEGMENT_TYPE]:3,[p.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE]:3,[p.HTTPRequest.LICENSE]:3,[p.HTTPRequest.OTHER_TYPE]:3,lowLatencyMultiplyFactor:5},abr:{limitBitrateByPortal:!1,usePixelRatioInLimitBitrateByPortal:!1,enableSupplementalPropertyAdaptationSetSwitching:!0,rules:{throughputRule:{active:!0},bolaRule:{active:!0},insufficientBufferRule:{active:!0,parameters:{throughputSafetyFactor:.7,segmentIgnoreCount:2}},switchHistoryRule:{active:!0,parameters:{sampleSize:8,switchPercentageThreshold:.075}},droppedFramesRule:{active:!1,parameters:{minimumSampleSize:375,droppedFramesPercentageThreshold:.15}},abandonRequestsRule:{active:!0,parameters:{abandonDurationMultiplier:1.8,minSegmentDownloadTimeThresholdInMs:500,minThroughputSamplesThreshold:6}},l2ARule:{active:!1},loLPRule:{active:!1}},throughput:{averageCalculationMode:f.default.THROUGHPUT_CALCULATION_MODES.EWMA,lowLatencyDownloadTimeCalculationMode:f.default.LOW_LATENCY_DOWNLOAD_TIME_CALCULATION_MODE.MOOF_PARSING,useResourceTimingApi:!0,useNetworkInformationApi:{xhr:!1,fetch:!1},useDeadTimeLatency:!0,bandwidthSafetyFactor:.9,sampleSettings:{live:3,vod:4,enableSampleSizeAdjustment:!0,decreaseScale:.7,increaseScale:1.3,maxMeasurementsToKeep:20,averageLatencySampleAmount:4},ewma:{throughputSlowHalfLifeSeconds:8,throughputFastHalfLifeSeconds:3,latencySlowHalfLifeCount:2,latencyFastHalfLifeCount:1,weightDownloadTimeMultiplicationFactor:.0015}},maxBitrate:{audio:-1,video:-1},minBitrate:{audio:-1,video:-1},initialBitrate:{audio:-1,video:-1},autoSwitchBitrate:{audio:!0,video:!0}},cmcd:{applyParametersFromMpd:!0,enabled:!1,sid:null,cid:null,rtp:null,rtpSafetyFactor:5,mode:f.default.CMCD_MODE_QUERY,enabledKeys:f.default.CMCD_AVAILABLE_KEYS,includeInRequests:["segment","mpd"],version:1},cmsd:{enabled:!1,abr:{applyMb:!1,etpWeightRatio:0}},defaultSchemeIdUri:{viewpoint:"",audioChannelConfiguration:"urn:mpeg:mpegB:cicp:ChannelConfiguration",role:"urn:mpeg:dash:role:2011",accessibility:"urn:mpeg:dash:role:2011"}},errors:{recoverAttempts:{mediaErrorDecode:5}}};let Y=l.default.clone(U);function se(te,Re,Be){for(let j in te)te.hasOwnProperty(j)&&(Re.hasOwnProperty(j)?typeof te[j]!="object"||te[j]instanceof RegExp||te[j]instanceof Array||te[j]===null?(Re[j]=l.default.clone(te[j]),k[Be+j]&&T.trigger(k[Be+j])):se(te[j],Re[j],Be.slice()+j+"."):console.error("Settings parameter "+Be+j+" is not supported"))}return A={get:function(){return Y},update:function(te){typeof te=="object"&&se(te,Y,"")},reset:function(){Y=l.default.clone(U)}},A}b.__dashjs_factory_name="Settings";let _=r.default.getSingletonFactory(b);t.default=_},7263:function(u,t,n){n.r(t);var r=n(3282),l=n(8571),d=n(5212);class f{static mixin(m,y,b){let _,A={};if(m)for(let w in y)y.hasOwnProperty(w)&&(_=y[w],w in m&&(m[w]===_||w in A&&A[w]===_)||(typeof m[w]=="object"&&m[w]!==null?m[w]=f.mixin(m[w],_,b):m[w]=b(_)));return m}static clone(m){if(!m||typeof m!="object")return m;if(m instanceof RegExp)return new RegExp(m);let y;if(m instanceof Array){y=[];for(let b=0,_=m.length;b<_;++b)b in m&&y.push(f.clone(m[b]))}else y={};return f.mixin(y,m,f.clone)}static addAdditionalQueryParameterToUrl(m,y){try{if(!y||y.length===0)return m;let b=m;return y.forEach(_=>{let{key:A,value:w}=_;const T=b.includes("?")?"&":"?";b+=`${T}${encodeURIComponent(A)}=${encodeURIComponent(w)}`}),b}catch{return m}}static removeQueryParameterFromUrl(m,y){if(!m||!y)return m;const b=new URL(m),_=new URLSearchParams(b.search);if(!_||_.size===0||!_.has(y))return m;_.delete(y);const A=Array.from(_.entries()).map(T=>{let[k,U]=T;return`${k}=${U}`}).join("&"),w=`${b.origin}${b.pathname}`;return A?`${w}?${A}`:w}static parseHttpHeaders(m){let y={};if(!m)return y;let b=m.trim().split(`\r
`);for(let _=0,A=b.length;_<A;_++){let w=b[_],T=w.indexOf(": ");T>0&&(y[w.substring(0,T)]=w.substring(T+2))}return y}static parseQueryParams(m){const y=[],b=new URLSearchParams(m);for(const[_,A]of b.entries())y.push({key:decodeURIComponent(_),value:decodeURIComponent(A)});return y}static generateUuid(){let m=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(y){const b=(m+16*Math.random())%16|0;return m=Math.floor(m/16),(y=="x"?b:3&b|8).toString(16)})}static generateHashCode(m){let y=0;if(m.length===0)return y;for(let b=0;b<m.length;b++)y=(y<<5)-y+m.charCodeAt(b),y|=0;return y}static getRelativeUrl(m,y){try{const b=new URL(m),_=new URL(y);if(b.protocol=_.protocol,b.origin!==_.origin)return y;let A=r.relative(b.pathname.substr(0,b.pathname.lastIndexOf("/")),_.pathname.substr(0,_.pathname.lastIndexOf("/")));const w=A.length===0?1:0;return A+=_.pathname.substr(_.pathname.lastIndexOf("/")+w,_.pathname.length-1),_.pathname.length<A.length?_.pathname:A}catch{return y}}static getHostFromUrl(m){try{return new URL(m).host}catch{return null}}static parseUserAgent(){let m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;try{const y=m===null&&typeof navigator<"u"?navigator.userAgent.toLowerCase():"";return(0,l.UAParser)(y)}catch{return{}}}static stringHasProtocol(m){return/(http(s?)):\/\//i.test(m)}static bufferSourceToDataView(m){return f.toDataView(m,DataView)}static bufferSourceToInt8(m){return f.toDataView(m,Uint8Array)}static uint8ArrayToString(m){return new TextDecoder("utf-8").decode(m)}static bufferSourceToHex(m){const y=f.bufferSourceToInt8(m);let b="";for(let _ of y)_=_.toString(16),_.length===1&&(_="0"+_),b+=_;return b}static toDataView(m,y){const b=f.getArrayBuffer(m);let _=1;"BYTES_PER_ELEMENT"in DataView&&(_=DataView.BYTES_PER_ELEMENT);const A=((m.byteOffset||0)+m.byteLength)/_,w=(m.byteOffset||0)/_,T=Math.floor(Math.max(0,Math.min(w,A)));return new y(b,T,Math.floor(Math.min(T+Math.max(1/0,0),A))-T)}static getArrayBuffer(m){return m instanceof ArrayBuffer?m:m.buffer}static getCodecFamily(m){const{base:y,profile:b}=f._getCodecParts(m);switch(y){case"mp4a":switch(b){case"69":case"6b":case"40.34":return d.default.CODEC_FAMILIES.MP3;case"66":case"67":case"68":case"40.2":case"40.02":case"40.5":case"40.05":case"40.29":case"40.42":return d.default.CODEC_FAMILIES.AAC;case"a5":return d.default.CODEC_FAMILIES.AC3;case"e6":return d.default.CODEC_FAMILIES.EC3;case"b2":return d.default.CODEC_FAMILIES.DTSX;case"a9":return d.default.CODEC_FAMILIES.DTSC}break;case"avc1":case"avc3":return d.default.CODEC_FAMILIES.AVC;case"hvc1":case"hvc3":return d.default.CODEC_FAMILIES.HEVC;default:return y}return y}static _getCodecParts(m){const[y,...b]=m.split(".");return{base:y,profile:b.join(".")}}}t.default=f},8986:function(u,t,n){n.r(t),n.d(t,{getVersionString:function(){return l}});const r="5.0.1";function l(){return r}},8748:function(u,t,n){n.r(t),t.default=class{extend(r,l){if(!r)return;let d=!!l&&l.override,f=!!l&&l.publicOnly;for(const p in r)!r.hasOwnProperty(p)||this[p]&&!d||f&&r[p].indexOf("public_")===-1||(this[p]=r[p])}}},5734:function(u,t,n){n.r(t);var r=n(7252);class l extends r.default{constructor(){super(),this.ATTEMPT_BACKGROUND_SYNC="attemptBackgroundSync",this.BUFFERING_COMPLETED="bufferingCompleted",this.BUFFER_CLEARED="bufferCleared",this.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",this.BUFFER_REPLACEMENT_STARTED="bufferReplacementStarted",this.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",this.CMSD_STATIC_HEADER="cmsdStaticHeader",this.CURRENT_TRACK_CHANGED="currentTrackChanged",this.DATA_UPDATE_COMPLETED="dataUpdateCompleted",this.INBAND_EVENTS="inbandEvents",this.INITIAL_STREAM_SWITCH="initialStreamSwitch",this.INIT_FRAGMENT_LOADED="initFragmentLoaded",this.INIT_FRAGMENT_NEEDED="initFragmentNeeded",this.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",this.ORIGINAL_MANIFEST_LOADED="originalManifestLoaded",this.LOADING_COMPLETED="loadingCompleted",this.LOADING_PROGRESS="loadingProgress",this.LOADING_DATA_PROGRESS="loadingDataProgress",this.LOADING_ABANDONED="loadingAborted",this.MANIFEST_UPDATED="manifestUpdated",this.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",this.MEDIA_FRAGMENT_NEEDED="mediaFragmentNeeded",this.MEDIAINFO_UPDATED="mediaInfoUpdated",this.QUOTA_EXCEEDED="quotaExceeded",this.SEGMENT_LOCATION_BLACKLIST_ADD="segmentLocationBlacklistAdd",this.SEGMENT_LOCATION_BLACKLIST_CHANGED="segmentLocationBlacklistChanged",this.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD="serviceLocationBlacklistAdd",this.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",this.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD="serviceLocationLocationBlacklistAdd",this.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED="serviceLocationLocationBlacklistChanged",this.SET_FRAGMENTED_TEXT_AFTER_DISABLED="setFragmentedTextAfterDisabled",this.SET_NON_FRAGMENTED_TEXT="setNonFragmentedText",this.SOURCE_BUFFER_ERROR="sourceBufferError",this.STREAMS_COMPOSED="streamsComposed",this.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",this.STREAM_REQUESTING_COMPLETED="streamRequestingCompleted",this.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",this.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",this.UPDATE_TIME_SYNC_OFFSET="updateTimeSyncOffset",this.URL_RESOLUTION_FAILED="urlResolutionFailed",this.VIDEO_CHUNK_RECEIVED="videoChunkReceived",this.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",this.XLINK_ELEMENT_LOADED="xlinkElementLoaded",this.XLINK_READY="xlinkReady",this.SEEK_TARGET="seekTarget",this.SETTING_UPDATED_LIVE_DELAY="settingUpdatedLiveDelay",this.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT="settingUpdatedLiveDelayFragmentCount",this.SETTING_UPDATED_CATCHUP_ENABLED="settingUpdatedCatchupEnabled",this.SETTING_UPDATED_PLAYBACK_RATE_MIN="settingUpdatedPlaybackRateMin",this.SETTING_UPDATED_PLAYBACK_RATE_MAX="settingUpdatedPlaybackRateMax",this.SETTING_UPDATED_ABR_ACTIVE_RULES="settingUpdatedAbrActiveRules",this.SETTING_UPDATED_MAX_BITRATE="settingUpdatedMaxBitrate",this.SETTING_UPDATED_MIN_BITRATE="settingUpdatedMinBitrate"}}t.default=l},3621:function(u,t,n){n.r(t);var r=n(5734);class l extends r.default{}let d=new l;t.default=d},7252:function(u,t,n){n.r(t),t.default=class{extend(r,l){if(!r)return;let d=!!l&&l.override,f=!!l&&l.publicOnly;for(const p in r)!r.hasOwnProperty(p)||this[p]&&!d||f&&r[p].indexOf("public_")===-1||(this[p]=r[p])}}},8854:function(u,t,n){n.r(t),t.default={ACCESSIBILITY:"Accessibility",ADAPTATION_SET:"AdaptationSet",ADAPTATION_SETS:"adaptationSets",ADAPTATION_SET_SWITCHING_SCHEME_ID_URI:"urn:mpeg:dash:adaptation-set-switching:2016",ADD:"add",ASSET_IDENTIFIER:"AssetIdentifier",AUDIO_CHANNEL_CONFIGURATION:"AudioChannelConfiguration",AUDIO_SAMPLING_RATE:"audioSamplingRate",AVAILABILITY_END_TIME:"availabilityEndTime",AVAILABILITY_START_TIME:"availabilityStartTime",AVAILABILITY_TIME_COMPLETE:"availabilityTimeComplete",AVAILABILITY_TIME_OFFSET:"availabilityTimeOffset",BANDWITH:"bandwidth",BASE_URL:"BaseURL",BITSTREAM_SWITCHING:"BitstreamSwitching",BITSTREAM_SWITCHING_MINUS:"bitstreamSwitching",BYTE_RANGE:"byteRange",CAPTION:"caption",CENC_DEFAULT_KID:"cenc:default_KID",CLIENT_DATA_REPORTING:"ClientDataReporting",CLIENT_REQUIREMENT:"clientRequirement",CMCD_PARAMETERS:"CMCDParameters",CODECS:"codecs",CODEC_PRIVATE_DATA:"codecPrivateData",CODING_DEPENDENCY:"codingDependency",CONTENT_COMPONENT:"ContentComponent",CONTENT_PROTECTION:"ContentProtection",CONTENT_STEERING:"ContentSteering",CONTENT_STEERING_RESPONSE:{VERSION:"VERSION",TTL:"TTL",RELOAD_URI:"RELOAD-URI",PATHWAY_PRIORITY:"PATHWAY-PRIORITY",PATHWAY_CLONES:"PATHWAY-CLONES",BASE_ID:"BASE-ID",ID:"ID",URI_REPLACEMENT:"URI-REPLACEMENT",HOST:"HOST",PARAMS:"PARAMS"},CONTENT_TYPE:"contentType",DEFAULT_SERVICE_LOCATION:"defaultServiceLocation",DEPENDENCY_ID:"dependencyId",DURATION:"duration",DVB_PRIORITY:"dvb:priority",DVB_WEIGHT:"dvb:weight",DVB_URL:"dvb:url",DVB_MIMETYPE:"dvb:mimeType",DVB_FONTFAMILY:"dvb:fontFamily",DYNAMIC:"dynamic",END_NUMBER:"endNumber",ESSENTIAL_PROPERTY:"EssentialProperty",EVENT:"Event",EVENT_STREAM:"EventStream",FORCED_SUBTITLE:"forced-subtitle",FRAMERATE:"frameRate",FRAME_PACKING:"FramePacking",GROUP_LABEL:"GroupLabel",HEIGHT:"height",ID:"id",INBAND:"inband",INBAND_EVENT_STREAM:"InbandEventStream",INDEX:"index",INDEX_RANGE:"indexRange",INITIALIZATION:"Initialization",INITIALIZATION_MINUS:"initialization",LA_URL:"Laurl",LA_URL_LOWER_CASE:"laurl",LABEL:"Label",LANG:"lang",LOCATION:"Location",MAIN:"main",MAXIMUM_SAP_PERIOD:"maximumSAPPeriod",MAX_PLAYOUT_RATE:"maxPlayoutRate",MAX_SEGMENT_DURATION:"maxSegmentDuration",MAX_SUBSEGMENT_DURATION:"maxSubsegmentDuration",MEDIA:"media",MEDIA_PRESENTATION_DURATION:"mediaPresentationDuration",MEDIA_RANGE:"mediaRange",MEDIA_STREAM_STRUCTURE_ID:"mediaStreamStructureId",METRICS:"Metrics",METRICS_MINUS:"metrics",MIME_TYPE:"mimeType",MINIMUM_UPDATE_PERIOD:"minimumUpdatePeriod",MIN_BUFFER_TIME:"minBufferTime",MP4_PROTECTION_SCHEME:"urn:mpeg:dash:mp4protection:2011",MPD:"MPD",MPD_TYPE:"mpd",MPD_PATCH_TYPE:"mpdpatch",ORIGINAL_MPD_ID:"mpdId",ORIGINAL_PUBLISH_TIME:"originalPublishTime",PATCH_LOCATION:"PatchLocation",PERIOD:"Period",PRESENTATION_TIME:"presentationTime",PRESENTATION_TIME_OFFSET:"presentationTimeOffset",PRO:"pro",PRODUCER_REFERENCE_TIME:"ProducerReferenceTime",PRODUCER_REFERENCE_TIME_TYPE:{ENCODER:"encoder",CAPTURED:"captured",APPLICATION:"application"},PROFILES:"profiles",PSSH:"pssh",PUBLISH_TIME:"publishTime",QUALITY_RANKING:"qualityRanking",QUERY_BEFORE_START:"queryBeforeStart",QUERY_PART:"$querypart$",RANGE:"range",RATING:"Rating",REF:"ref",REF_ID:"refId",REMOVE:"remove",REPLACE:"replace",REPORTING:"Reporting",REPRESENTATION:"Representation",REPRESENTATION_INDEX:"RepresentationIndex",ROBUSTNESS:"robustness",ROLE:"Role",S:"S",SAR:"sar",SCAN_TYPE:"scanType",SEGMENT_ALIGNMENT:"segmentAlignment",SEGMENT_BASE:"SegmentBase",SEGMENT_LIST:"SegmentList",SEGMENT_PROFILES:"segmentProfiles",SEGMENT_TEMPLATE:"SegmentTemplate",SEGMENT_TIMELINE:"SegmentTimeline",SEGMENT_TYPE:"segment",SEGMENT_URL:"SegmentURL",SERVICE_DESCRIPTION:"ServiceDescription",SERVICE_DESCRIPTION_LATENCY:"Latency",SERVICE_DESCRIPTION_OPERATING_BANDWIDTH:"OperatingBandwidth",SERVICE_DESCRIPTION_OPERATING_QUALITY:"OperatingQuality",SERVICE_DESCRIPTION_PLAYBACK_RATE:"PlaybackRate",SERVICE_DESCRIPTION_SCOPE:"Scope",SERVICE_LOCATION:"serviceLocation",SERVICE_LOCATIONS:"serviceLocations",SOURCE_URL:"sourceURL",START:"start",START_NUMBER:"startNumber",START_WITH_SAP:"startWithSAP",STATIC:"static",STEERING_TYPE:"steering",SUBSET:"Subset",SUBTITLE:"subtitle",SUB_REPRESENTATION:"SubRepresentation",SUB_SEGMENT_ALIGNMENT:"subsegmentAlignment",SUGGESTED_PRESENTATION_DELAY:"suggestedPresentationDelay",SUPPLEMENTAL_PROPERTY:"SupplementalProperty",SUPPLEMENTAL_CODECS:"scte214:supplementalCodecs",TIMESCALE:"timescale",TIMESHIFT_BUFFER_DEPTH:"timeShiftBufferDepth",TTL:"ttl",TYPE:"type",UTC_TIMING:"UTCTiming",VALUE:"value",VIEWPOINT:"Viewpoint",WALL_CLOCK_TIME:"wallClockTime",WIDTH:"width"}},5717:function(u,t,n){n.r(t),t.default=class{constructor(){this.schemeIdUri="",this.value=""}}},4461:function(u,t,n){n.r(t),n.d(t,{default:function(){return mp}});class r{constructor(){this.time=null,this.verboseLevel=0}log(C,R){if(this.verboseLevel>=C){const P=typeof R=="function"?R():R;console.log(`${this.time} [${C}] ${P}`)}}}class l{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(C){const R=["foreground","underline","italics","background","flash"];for(let P=0;P<R.length;P++){const F=R[P];Object.prototype.hasOwnProperty.call(C,F)&&(this[F]=C[F])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(C){return this.foreground===C.foreground&&this.underline===C.underline&&this.italics===C.italics&&this.background===C.background&&this.flash===C.flash}copy(C){this.foreground=C.foreground,this.underline=C.underline,this.italics=C.italics,this.background=C.background,this.flash=C.flash}}class d{constructor(){this.uchar=" ",this.penState=new l}reset(){this.uchar=" ",this.penState.reset()}setChar(C,R){this.uchar=C,this.penState.copy(R)}setPenState(C){this.penState.copy(C)}equals(C){return this.uchar===C.uchar&&this.penState.equals(C.penState)}copy(C){this.uchar=C.uchar,this.penState.copy(C.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}const f=100,p={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},m=function(D){return String.fromCharCode(p[D]||D)};class y{constructor(){let C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new r;this.chars=[],this.cueStartTime=null,this.pos=0,this.currPenState=new l;for(let R=0;R<f;R++)this.chars.push(new d);this.logger=C}equals(C){for(let R=0;R<f;R++)if(!this.chars[R].equals(C.chars[R]))return!1;return!0}copy(C){for(let R=0;R<f;R++)this.chars[R].copy(C.chars[R])}isEmpty(){let C=!0;for(let R=0;R<f;R++)if(!this.chars[R].isEmpty()){C=!1;break}return C}setCursor(C){this.pos!==C&&(this.pos=C),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>f&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=f)}moveCursor(C){const R=this.pos+C;if(C>1)for(let P=this.pos+1;P<R+1;P++)this.chars[P].setPenState(this.currPenState);this.setCursor(R)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(C){C>=144&&this.backSpace();const R=m(C);this.pos>=f?this.logger.log(0,()=>"Cannot insert "+C.toString(16)+" ("+R+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(R,this.currPenState),this.moveCursor(1))}clearFromPos(C){let R;for(R=C;R<f;R++)this.chars[R].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const C=[];let R=!0;for(let P=0;P<f;P++){const F=this.chars[P].uchar;F!==" "&&(R=!1),C.push(F)}return R?"":C.join("")}setPenStyles(C){this.currPenState.setStyles(C),this.chars[this.pos].setPenState(this.currPenState)}}const b=15;class _{constructor(){let C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new r;this.rows=[],this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null;for(let R=0;R<b;R++)this.rows.push(new y(C));this.logger=C}reset(){for(let C=0;C<b;C++)this.rows[C].clear();this.currRow=14}equals(C){let R=!0;for(let P=0;P<b;P++)if(!this.rows[P].equals(C.rows[P])){R=!1;break}return R}copy(C){for(let R=0;R<b;R++)this.rows[R].copy(C.rows[R])}isEmpty(){let C=!0;for(let R=0;R<b;R++)if(!this.rows[R].isEmpty()){C=!1;break}return C}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(C){this.rows[this.currRow].insertChar(C)}setPen(C){this.rows[this.currRow].setPenStyles(C)}moveCursor(C){this.rows[this.currRow].moveCursor(C)}setCursor(C){this.logger.log(2,"setCursor: "+C),this.rows[this.currRow].setCursor(C)}setPAC(C){this.logger.log(2,()=>"pacData = "+JSON.stringify(C));let R=C.row-1;if(this.nrRollUpRows&&R<this.nrRollUpRows-1&&(R=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==R){for(let ne=0;ne<b;ne++)this.rows[ne].clear();const z=this.currRow+1-this.nrRollUpRows,Q=this.lastOutputScreen;if(Q){const ne=Q.rows[z].cueStartTime,B=this.logger.time;if(ne!==null&&B!==null&&ne<B)for(let oe=0;oe<this.nrRollUpRows;oe++)this.rows[R-this.nrRollUpRows+oe+1].copy(Q.rows[z+oe])}}this.currRow=R;const P=this.rows[this.currRow];if(C.indent!==null){const z=C.indent,Q=Math.max(z-1,0);P.setCursor(C.indent),C.color=P.chars[Q].penState.foreground}const F={foreground:C.color,underline:C.underline,italics:C.italics,background:"black",flash:!1};this.setPen(F)}setBkgData(C){this.logger.log(2,()=>"bkgData = "+JSON.stringify(C)),this.backSpace(),this.setPen(C),this.insertChar(32)}setRollUpRows(C){this.nrRollUpRows=C}rollUp(){if(this.nrRollUpRows===null)return void this.logger.log(3,"roll_up but nrRollUpRows not set yet");this.logger.log(1,()=>this.getDisplayText());const C=this.currRow+1-this.nrRollUpRows,R=this.rows.splice(C,1)[0];R.clear(),this.rows.splice(this.currRow,0,R),this.logger.log(2,"Rolling up")}getDisplayText(C){C=C||!1;const R=[];let P="",F=-1;for(let z=0;z<b;z++){const Q=this.rows[z].getTextString();Q&&(F=z+1,C?R.push("Row "+F+": '"+Q+"'"):R.push(Q.trim()))}return R.length>0&&(P=C?"["+R.join(" | ")+"]":R.join(`
`)),P}getTextAndFormat(){return this.rows}}class A{constructor(C,R){let P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:new r;this.chNr=C,this.outputFilter=R,this.mode=null,this.displayedMemory=new _(P),this.nonDisplayedMemory=new _(P),this.lastOutputScreen=new _(P),this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=P,this.logger.log(2,"new Cea608Channel("+this.chNr+")")}reset(){var C,R;this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),(R=(C=this.outputFilter)===null||C===void 0?void 0:C.reset)===null||R===void 0||R.call(C),this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}setPAC(C){this.writeScreen.setPAC(C)}setBkgData(C){this.writeScreen.setBkgData(C)}setMode(C){C!==this.mode&&(this.mode=C,this.logger.log(2,()=>"MODE="+C),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.setRollUpRows(null),this.nonDisplayedMemory.setRollUpRows(null)),this.mode=C)}insertChars(C){for(let P=0;P<C.length;P++)this.writeScreen.insertChar(C[P]);const R=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>R+": "+this.writeScreen.getDisplayText(!0)),this.mode!=="MODE_PAINT-ON"&&this.mode!=="MODE_ROLL-UP"||(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(C){this.logger.log(2,"RU("+C+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(C)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const C=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=C,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(C){this.logger.log(2,"TO("+C+") - Tab Offset"),this.writeScreen.moveCursor(C)}ccMIDROW(C){const R={flash:!1};if(R.underline=C%2==1,R.italics=C>=46,R.italics)R.foreground="white";else{const P=Math.floor(C/2)-16,F=["white","green","blue","cyan","red","yellow","magenta"];R.foreground=F[P]}this.logger.log(2,"MIDROW: "+JSON.stringify(R)),this.writeScreen.setPen(R)}outputDataUpdate(){let C=arguments.length>0&&arguments[0]!==void 0&&arguments[0];const R=this.logger.time;R!==null&&this.outputFilter&&(this.cueStartTime!==null||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,R,this.lastOutputScreen),C&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:R):this.cueStartTime=R,this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(C){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,C,this.displayedMemory),this.cueStartTime=C))}}const w=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];function T(D,C,R){return R.a===D&&R.b===C}const k=function(D){const C=[];for(let R=0;R<D.length;R++)C.push(D[R].toString(16));return C},U={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Y={25:2,26:4,29:6,30:8,31:10,27:13,28:15},se={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},te={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14};function Re(D,C,R){R.a=D,R.b=C}class Be{constructor(C,R,P){this.currentChannel=0,this.cmdHistory={a:null,b:null},this.lastTime=null;const F=this.logger=new r;this.channels=[null,new A(C,R,F),new A(C+1,P,F)]}addData(C,R){this.lastTime=C,this.logger.time=C;for(let P=0;P<R.length;P+=2){const F=127&R[P],z=127&R[P+1];let Q=!1,ne=null;if(this.lastTime!==null&&(C=this.lastTime+.5*P*1001/3e4,this.logger.time=C),F===0&&z===0)continue;this.logger.log(3,()=>"["+k([R[P],R[P+1]])+"] -> ("+k([F,z])+")");const B=this.cmdHistory;if(F>=16&&F<=31){if(T(F,z,B)){Re(null,null,B),this.logger.log(3,()=>"Repeated command ("+k([F,z])+") is dropped");continue}Re(F,z,this.cmdHistory),Q=this.parseCmd(F,z),Q||(Q=this.parseMidrow(F,z)),Q||(Q=this.parsePAC(F,z)),Q||(Q=this.parseBackgroundAttributes(F,z))}else Re(null,null,B);if(!Q&&(ne=this.parseChars(F,z),ne.length)){const oe=this.currentChannel;oe&&oe>0?this.channels[oe].insertChars(ne):this.logger.log(2,"No channel found yet. TEXT-MODE?")}Q||ne||this.logger.log(2,()=>"Couldn't parse cleaned data "+k([F,z])+" orig: "+k([R[P],R[P+1]]))}}parseCmd(C,R){if(!((C===20||C===28||C===21||C===29)&&R>=32&&R<=47||(C===23||C===31)&&R>=33&&R<=35))return!1;const P=C===20||C===21||C===23?1:2,F=this.channels[P];return C===20||C===21||C===28||C===29?R===32?F.ccRCL():R===33?F.ccBS():R===34?F.ccAOF():R===35?F.ccAON():R===36?F.ccDER():R===37?F.ccRU(2):R===38?F.ccRU(3):R===39?F.ccRU(4):R===40?F.ccFON():R===41?F.ccRDC():R===42?F.ccTR():R===43?F.ccRTD():R===44?F.ccEDM():R===45?F.ccCR():R===46?F.ccENM():R===47&&F.ccEOC():F.ccTO(R-32),this.currentChannel=P,!0}parseMidrow(C,R){let P=0;if((C===17||C===25)&&R>=32&&R<=47){if(P=C===17?1:2,P!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const F=this.channels[P];return!!F&&(F.ccMIDROW(R),this.logger.log(3,()=>"MIDROW ("+k([C,R])+")"),!0)}return!1}parsePAC(C,R){let P;if(!((C>=17&&C<=23||C>=25&&C<=31)&&R>=64&&R<=127||(C===16||C===24)&&R>=64&&R<=95))return!1;const F=C<=23?1:2;P=R>=64&&R<=95?F===1?se[C]:te[C]:F===1?U[C]:Y[C];const z=this.channels[F];return!!z&&(z.setPAC(this.interpretPAC(P,R)),this.currentChannel=F,!0)}interpretPAC(C,R){let P;const F={color:null,italics:!1,indent:null,underline:!1,row:C};return P=R>95?R-96:R-64,F.underline=!(1&~P),P<=13?F.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(P/2)]:P<=15?(F.italics=!0,F.color="white"):F.indent=4*Math.floor((P-16)/2),F}parseChars(C,R){let P,F=[],z=null;if(C>=25?(P=2,z=C-8):(P=1,z=C),z>=17&&z<=19){let Q;Q=z===17?R+80:z===18?R+112:R+144,this.logger.log(2,()=>"Special char '"+m(Q)+"' in channel "+P),F=[Q]}else C>=32&&C<=127&&(F=R===0?[C]:[C,R]);return F&&this.logger.log(3,()=>"Char codes =  "+k(F).join(",")),F}parseBackgroundAttributes(C,R){if(!((C===16||C===24)&&R>=32&&R<=47||(C===23||C===31)&&R>=45&&R<=47))return!1;let P;const F={};C===16||C===24?(P=Math.floor((R-32)/2),F.background=w[P],R%2==1&&(F.background=F.background+"_semi")):R===45?F.background="transparent":(F.foreground="black",R===47&&(F.underline=!0));const z=C<=23?1:2;return this.channels[z].setBkgData(F),!0}reset(){for(let C=0;C<Object.keys(this.channels).length;C++){const R=this.channels[C];R&&R.reset()}Re(null,null,this.cmdHistory)}cueSplitAtTime(C){for(let R=0;R<this.channels.length;R++){const P=this.channels[R];P&&P.cueSplitAtTime(C)}}}var j=n(5212),M=n(8854),Z={TCP_CONNECTION:"TcpList",HTTP_REQUEST:"HttpList",TRACK_SWITCH:"RepSwitchList",BUFFER_LEVEL:"BufferLevel",BUFFER_LOADED:"bufferLoaded",ABANDON_LOAD:"abandonload",ALLOW_LOAD:"allowload",BUFFER_EMPTY:"bufferStalled",BUFFER_STATE:"BufferState",DVR_INFO:"DVRInfo",DROPPED_FRAMES:"DroppedFrames",SCHEDULING_INFO:"SchedulingInfo",REQUESTS_QUEUE:"RequestsQueue",MANIFEST_UPDATE:"ManifestUpdate",MANIFEST_UPDATE_STREAM_INFO:"ManifestUpdatePeriodInfo",MANIFEST_UPDATE_TRACK_INFO:"ManifestUpdateRepresentationInfo",PLAY_LIST:"PlayList",DVB_ERRORS:"DVBErrors",HTTP_REQUEST_DVB_REPORTING_TYPE:"DVBReporting"},K=n(8850),x=n(3621),ue=n(138),$e=n(649),xe=n(1191);function lt(){const D=this.context,C=(0,K.default)(D).getInstance();let R,P,F,z,Q,ne,B,oe,X,q,$,re,ve,Se,ke,Ie,Ce,Le,Ye,Te,ie,le,he,Pe,Ge;function ze(){fe(),Se=!1,q=0,$=0,Ce=0,he=!1,Le=!0,Ye=!1,Pe=!1,Te=NaN,Ie=NaN,B&&(C.off(x.default.DATA_UPDATE_COMPLETED,yn,R),C.off(x.default.MANIFEST_UPDATED,$n,R),C.off(x.default.STREAMS_COMPOSED,Yn,R),C.off(xe.default.PLAYBACK_ENDED,kn,R),C.off(xe.default.STREAM_INITIALIZING,Ut,R),C.off(xe.default.REPRESENTATION_SWITCH,hn,R),C.off(xe.default.BUFFER_LEVEL_STATE_CHANGED,Zn,R),Jt(),B.removeEventListener("canplay",Cn),B.removeEventListener("canplaythrough",Kn),B.removeEventListener("play",gi),B.removeEventListener("waiting",_n),B.removeEventListener("playing",ri),B.removeEventListener("pause",pi),B.removeEventListener("error",Bn),B.removeEventListener("seeking",Gi),B.removeEventListener("seeked",Ki),B.removeEventListener("timeupdate",bi),B.removeEventListener("progress",Nt),B.removeEventListener("ratechange",rn),B.removeEventListener("loadedmetadata",en),B.removeEventListener("loadeddata",gn),B.removeEventListener("stalled",zn),B.removeEventListener("ended",qn),B.removeEventListener("volumechange",Kt)),X=null,B=null,re=null,ve=null}function Ve(){return parseFloat((nt(arguments.length>0&&arguments[0]!==void 0?arguments[0]:null)-Ee()).toFixed(5))}function nt(tn){const Je=tn||re;return Je.start+Je.duration}function rt(){let tn=arguments.length>0&&arguments[0]!==void 0&&arguments[0];re&&B&&B.getElement()?(tn&&ve&&je(Ee()),B.play()):Se=!0}function fe(){re&&B&&B.pause()}function me(tn){let Je=arguments.length>1&&arguments[1]!==void 0&&arguments[1],Ot=arguments.length>2&&arguments[2]!==void 0&&arguments[2],an=arguments.length>3&&arguments[3]!==void 0&&arguments[3];re&&B&&B.getElement()&&tn!==(isNaN(Te)?B.getTime():Te)&&(ie=Ot===!0,ie||(Te=tn),P.info("Requesting seek to time: "+tn+(ie?" (internal)":"")),ve&&an&&je(tn),B.setCurrentTime(tn,Je))}function Ue(){if(!re||!B||!ve)return;const tn=F&&F.hasVideoTrack()?j.default.VIDEO:j.default.AUDIO,Je=Q.getCurrentDVRInfo(tn);return Je&&Je.range?Je.range.end:0}function je(tn){const Je=new Date(oe.getClientReferenceTime()),Ot=ne.getRegularPeriods()[0];q=oe.calcPresentationTimeFromWallTime(Je,Ot)-tn}function Ee(){return re&&B?B.getTime():null}function ye(){return re&&B?B.isPaused():null}function de(){return re&&B?B.isSeeking():null}function we(){return re&&B?B.isStalled():null}function qe(){return re&&B?B.getPlaybackRate():null}function tt(){return re&&B?B.getEnded():null}function mt(){return ve}function Tt(){let tn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(ye()||!ve||B.getReadyState()===0||de()||he)return;tn||(tn=F.hasVideoTrack()?j.default.VIDEO:j.default.AUDIO);const Je=Ee(),Ot=function(an,Ft){const bn=Q.getCurrentDVRInfo(Ft),Fn=bn?bn.range:null;let ci;return Fn?(ci=an>Fn.end?Math.max(Fn.end-q,Fn.start):an>0&&an+.25<Fn.start&&Math.abs(an-Fn.start)<31536e4?Ye?Math.max(Fn.end-q,Fn.start):Fn.start:an,ci):NaN}(Je,tn);!isNaN(Ot)&&Ot!==Je&&!de()&&(we()||le||B.getReadyState()===1)&&(P.debug(`UpdateCurrentTime: Seek to actual time: ${Ot} from currentTime: ${Je}`),me(Ot,!1,!1))}function Vt(){X===null&&(X=setInterval(()=>{(function(){if(C.trigger(x.default.WALLCLOCK_TIME_UPDATED,{isDynamic:ve,time:new Date}),mt()){const tn=Date.now();(isNaN(Ie)||tn>Ie+Ge.get().streaming.liveUpdateTimeThresholdInMilliseconds)&&(F.addDVRMetric(),ye()?function(){const Je=Date.now();(!ke||Je>ke+500)&&(ke=Je,bi())}():Tt(),Ie=tn)}})()},Ge.get().streaming.wallclockTimeUpdateInterval))}function Jt(){clearInterval(X),X=null}function yn(tn){const Je=tn.currentRepresentation,Ot=Je?Je.mediaInfo.streamInfo:null;Ot!==null&&re.id===Ot.id&&(re=Ot)}function Cn(){C.trigger(x.default.CAN_PLAY)}function Kn(){C.trigger(x.default.CAN_PLAY_THROUGH)}function Zn(tn){tn.streamId===F.getActiveStreamInfo().id&&(le=tn.state===Z.BUFFER_EMPTY,Ge.get().streaming.buffer.setStallState&&B.setStallState(tn.mediaType,tn.state===Z.BUFFER_EMPTY))}function gi(){P.info("Native video element event: play"),Tt(),Vt(),C.trigger(x.default.PLAYBACK_STARTED,{startTime:Ee()})}function _n(){P.info("Native video element event: waiting"),C.trigger(x.default.PLAYBACK_WAITING,{playingTime:Ee()})}function ri(){P.info("Native video element event: playing"),ie=!1,C.trigger(x.default.PLAYBACK_PLAYING,{playingTime:Ee()})}function pi(){P.info("Native video element event: pause"),C.trigger(x.default.PLAYBACK_PAUSED,{ended:tt()})}function Gi(){if(ie)return;let tn=Ee();isNaN(Te)||Te===tn||(tn=Te),Te=NaN,P.info("Seeking to: "+tn),Vt(),C.trigger(x.default.PLAYBACK_SEEKING,{seekTime:tn,streamId:re.id})}function Ki(){P.info("Native video element event: seeked"),ie=!1,C.trigger(x.default.PLAYBACK_SEEKED)}function bi(){re&&C.trigger(x.default.PLAYBACK_TIME_UPDATED,{timeToEnd:Ve(),time:Ee(),streamId:re.id})}function Nt(){C.trigger(x.default.PLAYBACK_PROGRESS,{streamId:re.id})}function rn(){const tn=qe();P.info("Native video element event: ratechange: ",tn),C.trigger(x.default.PLAYBACK_RATE_CHANGED,{playbackRate:tn})}function en(){P.info("Native video element event: loadedmetadata"),C.trigger(x.default.PLAYBACK_METADATA_LOADED),Vt()}function gn(){P.info("Native video element event: loadeddata"),C.trigger(x.default.PLAYBACK_LOADED_DATA)}function qn(){P.info("Native video element event: ended"),fe(),Jt();const tn=F?F.getActiveStreamInfo():null;tn&&C.trigger(x.default.PLAYBACK_ENDED,{isLast:tn.isLast})}function Kt(){C.trigger(x.default.PLAYBACK_VOLUME_CHANGED)}function kn(tn){if(X&&tn.isLast){P.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended");const Je=tn.seekTime?tn.seekTime:nt();B.setCurrentTime(Je),fe(),Jt()}}function Bn(tn){const Je=tn.target||tn.srcElement;C.trigger(x.default.PLAYBACK_ERROR,{error:Je.error})}function Xn(){ve=!1}function zn(tn){C.trigger(x.default.PLAYBACK_STALLED,{e:tn})}function Ut(tn){var Je;(Je=tn.mediaInfo)&&Je.supplementalProperties&&Je.supplementalProperties.find(Ot=>Ot.schemeIdUri===j.default.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME)&&(P.debug("Low Latency critical SupplementalProperty set: Enabling low Latency"),Ye=!0)}function hn(tn){const Je=F.getActiveStreamInfo();tn&&Je&&tn.currentRepresentation&&tn.streamId&&tn.streamId===Je.id&&tn.mediaType&&(tn.mediaType===j.default.VIDEO||tn.mediaType===j.default.AUDIO)&&(Le=tn.currentRepresentation.availabilityTimeComplete,Ye=!Le,Ye&&!Pe&&(Pe=!0))}function $n(){he=!0}function Yn(){he=!1}return R={computeAndSetLiveDelay:function(tn,Je){let Ot,an,Ft;const bn=!isNaN(tn)&&isFinite(tn)?tn:NaN;let Fn=ne.getSuggestedPresentationDelay();const ci=z.getServiceDescriptionSettings();return Ot=isNaN(Ge.get().streaming.delay.liveDelay)?Ge.get().streaming.delay.liveDelayFragmentCount===null||isNaN(Ge.get().streaming.delay.liveDelayFragmentCount)||isNaN(bn)?ci&&!isNaN(ci.liveDelay)&&ci.liveDelay>0?ci.liveDelay:Ge.get().streaming.delay.useSuggestedPresentationDelay===!0&&Fn!==null&&!isNaN(Fn)&&Fn>0?Fn:isNaN(bn)?Je&&!isNaN(Je.minBufferTime)?4*Je.minBufferTime:4*re.manifestInfo.minBufferTime:4*bn:bn*Ge.get().streaming.delay.liveDelayFragmentCount:Ge.get().streaming.delay.liveDelay,Ft=ne.getAvailabilityStartTime(),Ft!==null&&(Ce=Ft),an=Je&&Je.dvrWindowSize>0?Math.min(Ot,Je.dvrWindowSize):Ot,q=an,$=an,an},getAvailabilityStartTime:function(){return Ce},getBufferLevel:function(){let tn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,Je=null;return F.getActiveStreamProcessors().forEach(Ot=>{if(!tn||tn.length===0||tn.indexOf(Ot.getType())===-1){const an=Ot.getBufferLevel();Je=Je===null?an:Math.min(Je,an)}}),Je},getCurrentLiveLatency:function(){if(!ve||isNaN(Ce))return NaN;let tn=Ee();if(isNaN(tn)||tn===0)return 0;const Je=new Date().getTime()+1e3*oe.getClientTimeOffset();return Math.max(((Je-Ce-1e3*tn)/1e3).toFixed(3),0)},getEnded:tt,getInitialCatchupModeActivated:function(){return Pe},getIsDynamic:mt,getIsManifestUpdateInProgress:function(){return he},getLiveDelay:function(){return q},getLowLatencyModeEnabled:function(){return Ye},getOriginalLiveDelay:function(){return $},getPlaybackRate:qe,getPlaybackStalled:function(){return le},getPlayedRanges:function(){return re&&B?B.getPlayedRanges():null},getStreamController:function(){return F},getStreamEndTime:nt,getTime:Ee,getTimeToStreamEnd:Ve,initialize:function(tn,Je){re=tn,Je!==!0&&(B.addEventListener("canplay",Cn),B.addEventListener("canplaythrough",Kn),B.addEventListener("play",gi),B.addEventListener("waiting",_n),B.addEventListener("playing",ri),B.addEventListener("pause",pi),B.addEventListener("error",Bn),B.addEventListener("seeking",Gi),B.addEventListener("seeked",Ki),B.addEventListener("timeupdate",bi),B.addEventListener("progress",Nt),B.addEventListener("ratechange",rn),B.addEventListener("loadedmetadata",en),B.addEventListener("loadeddata",gn),B.addEventListener("stalled",zn),B.addEventListener("ended",qn),B.addEventListener("volumechange",Kt),ve=re.manifestInfo.isDynamic,le=!1,ie=!1,C.on(x.default.DATA_UPDATE_COMPLETED,yn,R),C.on(x.default.MANIFEST_UPDATED,$n,R),C.on(x.default.STREAMS_COMPOSED,Yn,R),C.on(xe.default.PLAYBACK_ENDED,kn,R,{priority:K.default.EVENT_PRIORITY_HIGH}),C.on(xe.default.STREAM_INITIALIZING,Ut,R),C.on(xe.default.REPRESENTATION_SWITCH,hn,R),C.on(xe.default.BUFFER_LEVEL_STATE_CHANGED,Zn,R),C.on(xe.default.DYNAMIC_TO_STATIC,Xn,R),Se&&(Se=!1,rt()))},isPaused:ye,isProgressing:function(){let tn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:500;return new Promise(Je=>{let Ot=-1,an=null;const Ft=Fn=>{clearTimeout(an),an=null,C.off(xe.default.PLAYBACK_TIME_UPDATED,bn,R),Je(Fn)},bn=Fn=>{Ot<0?Ot=Fn.time:Fn.time>Ot+.1&&Ft(!0)};an=setTimeout(()=>{Ft(!1)},tn),C.on(xe.default.PLAYBACK_TIME_UPDATED,bn,R)})},isSeeking:de,isStalled:we,pause:fe,play:rt,reset:ze,seek:me,seekToCurrentLive:function(){let tn=arguments.length>0&&arguments[0]!==void 0&&arguments[0],Je=arguments.length>1&&arguments[1]!==void 0&&arguments[1],Ot=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const an=Ue();an!==0&&me(an-q,tn,Je,Ot)},seekToOriginalLive:function(){let tn=arguments.length>0&&arguments[0]!==void 0&&arguments[0],Je=arguments.length>1&&arguments[1]!==void 0&&arguments[1],Ot=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const an=Ue();an!==0&&(q=$,me(an-q,tn,Je,Ot))},setConfig:function(tn){tn&&(tn.streamController&&(F=tn.streamController),tn.serviceDescriptionController&&(z=tn.serviceDescriptionController),tn.dashMetrics&&(Q=tn.dashMetrics),tn.adapter&&(ne=tn.adapter),tn.videoModel&&(B=tn.videoModel),tn.timelineConverter&&(oe=tn.timelineConverter),tn.settings&&(Ge=tn.settings))},updateCurrentTime:Tt},P=(0,$e.default)(D).getInstance().getLogger(R),ze(),R}lt.__dashjs_factory_name="PlaybackController";var et=ue.default.getSingletonFactory(lt),Xe=n(7568);class ut{constructor(C){this.action=ut.ACTION_DOWNLOAD,this.availabilityEndTime=null,this.availabilityStartTime=null,this.bandwidth=NaN,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.duration=NaN,this.endDate=null,this.firstByteDate=null,this.index=NaN,this.mediaStartTime=NaN,this.mediaType=null,this.range=null,this.representation=null,this.responseType="arraybuffer",this.retryAttempts=0,this.serviceLocation=null,this.startDate=null,this.startTime=NaN,this.timescale=NaN,this.type=null,this.url=C||null,this.wallStartTime=null}isInitializationRequest(){return this.type&&this.type===Xe.HTTPRequest.INIT_SEGMENT_TYPE}setInfo(C){this.type=C&&C.init?Xe.HTTPRequest.INIT_SEGMENT_TYPE:Xe.HTTPRequest.MEDIA_SEGMENT_TYPE,this.url=C&&C.url?C.url:null,this.range=C&&C.range?C.range.start+"-"+C.range.end:null,this.mediaType=C&&C.mediaType?C.mediaType:null,this.representation=C&&C.representation?C.representation:null}}ut.ACTION_DOWNLOAD="download",ut.ACTION_COMPLETE="complete";var Dt=ut;const dt="loading",Et="executed",Rt="failed";function mn(D){const C=(D=D||{}).eventBus,R=D.events,P=D.dashMetrics,F=D.fragmentLoader,z=D.debug,Q=D.streamInfo,ne=D.type;let B,oe,X,q;function $(ie){return!!ie&&function(le){let he=!1;return le.some(Pe=>{if(Ge=ie,ze=Pe,!isNaN(Ge.index)&&Ge.startTime===ze.startTime&&Ge.adaptationIndex===ze.adaptationIndex&&Ge.type===ze.type||function(Ve,nt){return Ve.representation.id===nt.representation.id}(ie,Pe)||function(Ve,nt){return Ve.action===Dt.ACTION_COMPLETE&&Ve.action===nt.action}(ie,Pe))return he=!0,he;var Ge,ze}),he}(X)}function re(ie){return isNaN(ie.duration)?.25:Math.min(ie.duration/8,.5)}function ve(ie){X=X.filter(le=>{const he=re(le);return isNaN(le.startTime)||ie!==void 0&&le.startTime>=ie-he})}function Se(ie,le){le<=ie+.5||(X=X.filter(he=>{const Pe=re(he);return isNaN(he.startTime)||he.startTime>=le-Pe||isNaN(he.duration)||he.startTime+he.duration<=ie+Pe}))}function ke(ie,le,he){for(let Pe=ie.length-1;Pe>=0;Pe--){const Ge=ie[Pe],ze=Ge.startTime,Ve=ze+Ge.duration;if(he=isNaN(he)?re(Ge):he,!isNaN(ze)&&!isNaN(Ve)&&le+he>=ze&&le-he<Ve||isNaN(ze)&&isNaN(le))return Ge}return null}function Ie(ie,le){P.addSchedulingInfo(ie,le),P.addRequestsQueue(ie.mediaType,q,X)}function Ce(ie){ie.sender===F&&(q.splice(q.indexOf(ie.request),1),ie.response&&!ie.error&&X.push(ie.request),Ie(ie.request,ie.error?Rt:Et),C.trigger(R.FRAGMENT_LOADING_COMPLETED,{request:ie.request,response:ie.response,error:ie.error,sender:this},{streamId:Q.id,mediaType:ne}))}function Le(ie){ie.sender===F&&C.trigger(R.FRAGMENT_LOADING_PROGRESS,{request:ie.request,response:ie.response,error:ie.error,sender:this},{streamId:Q.id,mediaType:ne})}function Ye(ie){ie.sender===F&&C.trigger(R.FRAGMENT_LOADING_ABANDONED,{request:ie.request},{streamId:Q.id,mediaType:ne})}function Te(){X=[],q=[],F&&F.resetInitialSettings()}return B={abortRequests:function(){oe.debug("abort requests"),F.abort(),q=[]},executeRequest:function(ie){ie.action===Dt.ACTION_DOWNLOAD?(Ie(ie,dt),q.push(ie),function(le){C.trigger(R.FRAGMENT_LOADING_STARTED,{request:le},{streamId:Q.id,mediaType:ne}),F.load(le)}(ie)):oe.warn("Unknown request action.")},getRequests:function(ie){const le=ie?ie.state instanceof Array?ie.state:[ie.state]:[];let he=[];return le.forEach(Pe=>{const Ge=function(ze){let Ve;switch(ze){case dt:Ve=q;break;case Et:Ve=X;break;default:Ve=[]}return Ve}(Pe);he=he.concat(function(ze,Ve){return Ve.hasOwnProperty("time")?[ke(ze,Ve.time,Ve.threshold)]:ze.filter(nt=>{for(const rt in Ve)if(rt!=="state"&&Ve.hasOwnProperty(rt)&&nt[rt]!=Ve[rt])return!1;return!0})}(Ge,ie))}),he},getStreamId:function(){return Q.id},getType:function(){return ne},isFragmentLoaded:$,isFragmentLoadedOrPending:function(ie){let le,he=!1,Pe=0;if(he=$(ie),!he)for(Pe=0;Pe<q.length;Pe++)le=q[Pe],ie.url===le.url&&ie.startTime===le.startTime&&(he=!0);return he},removeExecutedRequestsAfterTime:function(ie){X=X.filter(le=>isNaN(le.startTime)||ie!==void 0&&le.startTime<ie)},removeExecutedRequestsBeforeTime:ve,reset:function(){C.off(R.LOADING_COMPLETED,Ce,this),C.off(R.LOADING_DATA_PROGRESS,Le,this),C.off(R.LOADING_ABANDONED,Ye,this),F&&F.reset(),Te()},resetInitialSettings:Te,syncExecutedRequestsWithBufferedRange:function(ie,le){if(!ie||ie.length===0)return void ve();let he=0;for(let Pe=0,Ge=ie.length;Pe<Ge;Pe++)Se(he,ie.start(Pe)),he=ie.end(Pe);le>0&&Se(he,le)}},oe=z.getLogger(B),Te(),C.on(R.LOADING_COMPLETED,Ce,B),C.on(R.LOADING_DATA_PROGRESS,Le,B),C.on(R.LOADING_ABANDONED,Ye,B),B}mn.__dashjs_factory_name="FragmentModel";const Tn=ue.default.getClassFactory(mn);Tn.FRAGMENT_MODEL_LOADING=dt,Tn.FRAGMENT_MODEL_EXECUTED=Et,Tn.FRAGMENT_MODEL_CANCELED="canceled",Tn.FRAGMENT_MODEL_FAILED=Rt,ue.default.updateClassFactory(mn.__dashjs_factory_name,Tn);var Qe=Tn,Ze=n(1944),at=n(8748);class nn extends at.default{constructor(){super(),this.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,this.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,this.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,this.SEGMENT_BASE_LOADER_ERROR_CODE=15,this.TIME_SYNC_FAILED_ERROR_CODE=16,this.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,this.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,this.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,this.APPEND_ERROR_CODE=20,this.REMOVE_ERROR_CODE=21,this.DATA_UPDATE_FAILED_ERROR_CODE=22,this.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,this.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,this.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,this.DOWNLOAD_ERROR_ID_SIDX_CODE=26,this.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,this.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,this.DOWNLOAD_ERROR_ID_XLINK_CODE=29,this.MANIFEST_ERROR_ID_PARSE_CODE=31,this.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,this.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,this.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,this.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,this.NO_SUPPORTED_KEY_IDS=36,this.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",this.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",this.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",this.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",this.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",this.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segment ranges from sidx",this.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize client and server time",this.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",this.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",this.APPEND_ERROR_MESSAGE="chunk is not defined",this.REMOVE_ERROR_MESSAGE="Removing data from the SourceBuffer",this.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",this.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",this.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",this.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",this.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : ",this.NO_SUPPORTED_KEY_IDS_MESSAGE="All possible Adaptation Sets have an invalid key status"}}var ce=new nn,ge=n(8261);function G(D){const C=this.context,R=(0,ge.default)(C).getInstance(),P=D.textController,F=D.eventBus;let z,Q,ne,B,oe,X,q=[],$=[],re=!1,ve=D.mediaSource,Se=null;function ke(ze){return ze.mimeType+';codecs="'+ze.codecs+'"'}function Ie(ze){return B=P.getTextSourceBuffer(ze),Promise.resolve()}function Ce(){if(typeof B.addEventListener=="function")try{B.addEventListener("updateend",he,!1),B.addEventListener("error",Pe,!1),B.addEventListener("abort",Pe,!1)}catch{X=setInterval(he,50)}else X=setInterval(he,50)}function Le(){try{typeof B.removeEventListener=="function"&&(B.removeEventListener("updateend",he,!1),B.removeEventListener("error",Pe,!1),B.removeEventListener("abort",Pe,!1)),clearInterval(X)}catch(ze){ne.error(ze)}}function Ye(ze){return new Promise(Ve=>{B&&R.get().streaming.buffer.useAppendWindow?Ge(()=>{try{if(!B)return void Ve();let nt=ve.duration,rt=0;ze&&!isNaN(ze.start)&&!isNaN(ze.duration)&&isFinite(ze.duration)&&(nt=ze.start+ze.duration),ze&&!isNaN(ze.start)&&(rt=ze.start),B.appendWindowEnd===nt&&B.appendWindowStart===rt||(B.appendWindowStart=0,B.appendWindowEnd=nt+.01,B.appendWindowStart=Math.max(rt-.1,0),ne.debug(`Updated append window for ${oe.type}. Set start to ${B.appendWindowStart} and end to ${B.appendWindowEnd}`)),Ve()}catch{ne.warn("Failed to set append window"),Ve()}}):Ve()})}function Te(ze){return new Promise(Ve=>{B?Ge(()=>{try{B.timestampOffset===ze||isNaN(ze)||(B.timestampOffset=ze,ne.debug(`Set MSE timestamp offset to ${ze}`)),Ve()}catch{Ve()}}):Ve()})}function ie(){if(!re&&$.length>0){re=!0;const ze=$[0];$.splice(0,1);const Ve=function(){re=!1,$.length>0&&ie.call(this),ze&&ze.data&&ze.data.segmentType&&ze.data.segmentType!==Xe.HTTPRequest.INIT_SEGMENT_TYPE&&delete ze.data.bytes,ze.promise.resolve({chunk:ze.data})};try{if(Se=ze.request,ze.data.bytes.byteLength===0)Ve.call(this);else{try{ne.debug(`Appending ${ze.data.segmentType} from period ${ze.data.streamId} to buffer. Request URL: ${ze.request.url}, Representation: ID: ${ze.data.representation.id}, bitrate: ${ze.data.representation.bitrateInKbit}`)}catch{}B.appendBuffer?B.appendBuffer(ze.data.bytes):B.append(ze.data.bytes,ze.data),Ge(Ve.bind(this))}}catch(nt){ne.fatal('SourceBuffer append failed "'+nt+'"'),$.length>0?ie():re=!1,delete ze.data.bytes,ze.promise.reject({chunk:ze.data,error:new Ze.default(nt.code,nt.message)})}}}function le(){q.length>0&&!B.updating&&(q.shift()(),le())}function he(){B.updating||le()}function Pe(ze){const Ve=ze.target||{};(function(nt,rt){let fe=rt||{};F.trigger(nt,fe,{streamId:oe.streamInfo.id,mediaType:Q})})(x.default.SOURCE_BUFFER_ERROR,{error:Ve,lastRequestAppended:Se})}function Ge(ze){try{q.push(ze),B.updating||le()}catch(Ve){ne.error(Ve)}}return z={abort:function(){return new Promise(ze=>{try{$=[],ve.readyState==="open"?Ge(()=>{try{B&&B.abort(),ze()}catch{ze()}}):(B&&B.setTextTrack&&ve.readyState==="ended"&&B.abort(),ze())}catch{ze()}})},abortBeforeAppend:function(){return new Promise(ze=>{Ge(()=>{const Ve=B.appendWindowStart,nt=B.appendWindowEnd;B&&(B.abort(),B.appendWindowStart=Ve,B.appendWindowEnd=nt),ze()})})},append:function(ze){let Ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return new Promise((nt,rt)=>{ze?($.push({data:ze,promise:{resolve:nt,reject:rt},request:Ve}),Ge(ie.bind(this))):rt({chunk:ze,error:new Ze.default(ce.APPEND_ERROR_CODE,ce.APPEND_ERROR_MESSAGE)})})},changeType:function(ze){const Ve=ke(ze);return new Promise(nt=>{Ge(()=>{B.changeType&&(ne.debug(`Changing SourceBuffer codec to ${Ve}`),B.changeType(Ve)),nt()})})},getAllBufferRanges:function(){try{return B.buffered}catch(ze){return ne.error("getAllBufferRanges exception: "+ze.message),null}},getBuffer:function(){return B},getType:function(){return Q},initializeForFirstUse:function(ze,Ve){oe=ze;const nt=ze.streamInfo;Q=oe.type;const rt=Ve?ke(Ve):ze.codec;try{if(rt.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))return Ie(nt);B=ve.addSourceBuffer(rt),Ce();const fe=[];return fe.push(Ye(oe.streamInfo)),Ve&&Ve.mseTimeOffset!==void 0&&fe.push(Te(Ve.mseTimeOffset)),Promise.all(fe)}catch(fe){return oe.type==j.default.TEXT&&!oe.isFragmented||rt.indexOf('codecs="stpp')!==-1||rt.indexOf('codecs="vtt')!==-1||rt.indexOf("text/vtt")!==-1?Ie(nt):Promise.reject(fe)}},initializeForStreamSwitch:function(ze,Ve,nt){oe=ze,Q=oe.type,function(rt){B=rt.getBuffer()}(nt),Ce()},remove:function(ze){return new Promise((Ve,nt)=>{const rt=ze.start,fe=ze.end;rt>=0&&fe>rt?Ge(function(){try{B.remove(rt,fe),Ge(function(){Ve({from:rt,to:fe,unintended:!1}),ze.resolve&&ze.resolve()})}catch(me){nt({from:rt,to:fe,unintended:!1,error:new Ze.default(ce.REMOVE_ERROR_CODE,ce.REMOVE_ERROR_MESSAGE)}),ze.reject&&ze.reject(me)}}):Ve()})},removeEventListeners:Le,reset:function(){if(B){try{q=[],Le(),re=!1,$=[],B.getClassName&&B.getClassName()==="TextSourceBuffer"||(ne.debug("Removing sourcebuffer from media source"),ve.removeSourceBuffer(B))}catch{}B=null}Se=null},updateAppendWindow:Ye,updateTimestampOffset:Te},ne=(0,$e.default)(C).getInstance().getLogger(z),z}G.__dashjs_factory_name="SourceBufferSink";var ae=ue.default.getClassFactory(G);function _e(D){const C=this.context;let R,P,F,z=[],Q=D;function ne(B,oe){return z=z.filter(X=>!((isNaN(oe)||X.start<oe)&&(isNaN(B)||X.end>B))),Promise.resolve()}return R={getAllBufferRanges:function(){let B=[];for(let X=0;X<z.length;X++){let q=z[X];B.length===0||q.start>B[B.length-1].end?B.push({start:q.start,end:q.end}):B[B.length-1].end=q.end}const oe={start:function(X){return B[X].start},end:function(X){return B[X].end}};return Object.defineProperty(oe,"length",{get:function(){return B.length}}),oe},append:function(B){return B.segmentType!=="InitializationSegment"?(z.push(B),z.sort(function(oe,X){return oe.start-X.start}),F=null):F=B,P.debug("PreBufferSink appended chunk s: "+B.start+"; e: "+B.end),Q&&Q({chunk:B}),Promise.resolve()},remove:ne,abort:function(){return Promise.resolve()},discharge:function(B,oe){const X=function(q,$){return z.filter(re=>(isNaN($)||re.start<$)&&(isNaN(q)||re.end>q))}(B,oe);return F&&(X.push(F),F=null),ne(B,oe),X},reset:function(){z=[],F=null,Q=null},updateTimestampOffset:function(){return Promise.resolve()},waitForUpdateEnd:function(B){B()},getBuffer:function(){return this}},P=(0,$e.default)(C).getInstance().getLogger(R),R}_e.__dashjs_factory_name="PreBufferSink";var Ae=ue.default.getClassFactory(_e);function yt(){let D={};return{save:function(C){const R=C.streamId,P=C.representation.id;D[R]=D[R]||{},D[R][P]=C},extract:function(C,R){return D&&D[C]&&D[C][R]?D[C][R]:null},reset:function(){D={}}}}yt.__dashjs_factory_name="InitCache";var zt=ue.default.getSingletonFactory(yt);const vt=.01,Lt="BufferController";function bt(D){const C=(D=D||{}).capabilities,R=this.context,P=(0,K.default)(R).getInstance(),F=D.fragmentModel,z=D.playbackController,Q=D.representationController,ne=D.settings,B=D.streamInfo,oe=D.textController,X=D.type;let q,$,re,ve,Se,ke,Ie,Ce,Le,Ye,Te,ie,le,he,Pe,Ge,ze,Ve,nt,rt,fe;function me(Ut){let hn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;return new Promise(($n,Yn)=>{ke=Ut,Le&&hn&&typeof Le.discharge=="function"?(Ye=Le,Ue(hn).then(()=>{$n()}).catch(tn=>{Yn(tn)})):$n()})}function Ue(Ut){let hn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],$n=arguments.length>2?arguments[2]:void 0;return new Promise((Yn,tn)=>{Ve&&Ut?ke?(Te=!1,function(Je,Ot,an){return new Promise(Ft=>{Le=ae(R).create({mediaSource:ke,textController:oe,eventBus:P}),function(bn,Fn,ci){const _i=Q.getCurrentRepresentation();return Fn&&Fn[X]&&(X===j.default.VIDEO||X===j.default.AUDIO)?function(ui,Nr,Is,Ko){Le.initializeForStreamSwitch(ui,Nr,Is[X]);const Ta=[];return Ta.push(Le.abortBeforeAppend()),Ta.push(rn()),Ta.push(tt(Nr,Ko)),Nr&&Nr.mseTimeOffset!==void 0&&Ta.push(Nt(Nr)),Promise.allSettled(Ta)}(bn,_i,Fn,ci):function(ui,Nr){return Le.initializeForFirstUse(ui,Nr)}(bn,_i)}(Je,Ot,an).then(()=>Nt(Q.getCurrentRepresentation())).then(()=>{Ft(Le)}).catch(bn=>{$.warn("Caught error on create SourceBuffer: "+bn),Ft(Le)})})}(Ut,hn,$n).then(Je=>{Yn(Je)}).catch(Je=>{tn(Je)})):(Te=!0,function(){return new Promise((Je,Ot)=>{Le=Ae(R).create(we.bind(this)),Nt(Q.getCurrentRepresentation()).then(()=>{Je(Le)}).catch(()=>{Ot()})})}().then(Je=>{Yn(Je)}).catch(Je=>{tn(Je)})):Yn(null)})}function je(Ut){ne.get().streaming.cacheInitSegments&&($.info("Init fragment finished loading saving to",X+"'s init cache"),Ve.save(Ut.chunk)),$.debug(`Appending init fragment for type ${X}, representationId ${Ut.chunk.representation.id} and bandwidth ${Ut.chunk.representation.bandwidth}`),ye(Ut.chunk)}function Ee(Ut){ye(Ut.chunk,Ut.request)}function ye(Ut){let hn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;Le&&(Le.append(Ut,hn).then($n=>{we($n)}).catch($n=>{we($n)}),Ut.representation.mediaInfo.type===j.default.VIDEO&&Xn(x.default.VIDEO_CHUNK_RECEIVED,{chunk:Ut}))}function de(Ut){if(Ut&&Ut.length>0)for(let hn=0,$n=Ut.length;hn<$n;hn++)$.debug("Buffered range: "+Ut.start(hn)+" - "+Ut.end(hn)+", currentTime = ",z.getTime())}function we(Ut){if(Ut.error)return Ut.error.code===22&&function(){if(ze=!0,Se=.8*Kt(),$.warn("Quota exceeded, Critical Buffer: "+Se),Se>0){const Yn=Math.max(.2*Se,1),tn=Se-Yn,Je=Math.min(ne.get().streaming.buffer.bufferTimeAtTopQuality,.9*tn),Ot=Math.min(ne.get().streaming.buffer.bufferTimeAtTopQualityLongForm,.9*tn),an={streaming:{buffer:{bufferToKeep:parseFloat(Yn.toFixed(5)),bufferTimeAtTopQuality:parseFloat(Je.toFixed(5)),bufferTimeAtTopQualityLongForm:parseFloat(Ot.toFixed(5))}}};ne.update(an)}}(),void(Ut.error.code!==22&&Bn()||($.warn("Clearing playback buffer to overcome quota exceed situation"),Xn(x.default.QUOTA_EXCEEDED,{criticalBufferLevel:Se,quotaExceededTime:Ut.chunk.start}),Gi(pi())));if(!Le||(Kn(),ze=!1,he=Ut.chunk,!he||!he.endFragment))return;he&&!isNaN(he.index)&&(Ie=Math.max(he.index,Ie),Zn());const hn=Le.getAllBufferRanges();he.segmentType===Xe.HTTPRequest.MEDIA_SEGMENT_TYPE&&(de(hn),Vt(),function(){if(isNaN(fe)||Te)return;if(X!==j.default.AUDIO&&X!==j.default.VIDEO)return void(fe=NaN);const Yn=z.getTime(),tn=Cn(Yn,0),Je=Cn(fe,0);if(tn&&Je&&tn.start===Je.start)return void(fe=NaN);const Ot=Q.getCurrentRepresentation().segmentDuration,an=Cn(fe,Ot);an&&(ne.get().streaming.buffer.enableSeekDecorrelationFix&&Math.abs(Yn-fe)>Ot?fe<=an.end&&z.seek(Math.max(fe,an.start),!1,!0):Yn<an.start&&z.seek(an.start,!1,!0))}());let $n=!1;ie&&(ie.indexOf(he)>0&&($n=!0),ie=null),he&&!$n&&Xn(x.default.BYTES_APPENDED_END_FRAGMENT,{startTime:he.start,index:he.index,bufferedRanges:hn,segmentType:he.segmentType,mediaType:X,representationId:he.representation.id})}function qe(Ut,hn){const $n=[];return $n.push(Nt(Ut)),$n.push(Le?Le.abort():Promise.resolve()),$n.push(tt(Ut,hn)),Promise.allSettled($n)}function tt(Ut,hn){return Ut&&hn?Ut&&hn&&Ut.mimeType===hn.mimeType&&Ut.codecFamily===hn.codecFamily?($.debug(`Switching to new codec ${Ut.codecs} without changeType as previous codec ${hn.codecs} is compatible.`),Promise.resolve()):ne.get().streaming.buffer.useChangeType&&C.supportsChangeType()?($.debug(`Using changeType() to switch from codec ${hn.codecs} to ${Ut.codecs}`),Le.changeType(Ut)):($.debug("changeType() not available"),Promise.resolve()):($.warn("BufferController._changeCodec() is missing the information about the Representations. Doing nothing"),Promise.resolve())}function mt(){return new Promise((Ut,hn)=>{let $n=Tt();if(!$n||$n.length===0)return Vt(),void Ut();Gi($n).then(()=>{Ut()}).catch(Yn=>{hn(Yn)})})}function Tt(Ut){const hn=[],$n=Le.getAllBufferRanges();if(!$n||$n.length===0)return hn;if(!Ut&&Ut!==0||isNaN(Ut))hn.push({start:$n.start(0),end:$n.end($n.length-1)+.5});else{const Yn=function(Je,Ot){const an=ne.get().streaming.buffer.bufferToKeep,Ft=Ot.start(0);if(Je-Ft>an){let bn=Math.max(0,Je-an);const Fn=F.getRequests({state:Qe.FRAGMENT_MODEL_EXECUTED,time:Je,threshold:vt})[0];if(Fn&&(bn=Math.min(Fn.startTime,bn)),bn>0)return{start:Ft,end:bn}}return null}(Ut,$n),tn=function(Je,Ot){const an=Ot.end(Ot.length-1)+.5,Ft=kn(Je),bn=B.manifestInfo.duration>=ne.get().streaming.buffer.longFormContentDurationThreshold?ne.get().streaming.buffer.bufferTimeAtTopQualityLongForm:ne.get().streaming.buffer.bufferTimeAtTopQuality;let Fn=isNaN(Ft)?Je:Math.min(Ft,Je+bn);if(Fn>=Ot.end(Ot.length-1))return null;const ci=F.getRequests({state:Qe.FRAGMENT_MODEL_EXECUTED,time:Je,threshold:vt})[0];if(ci&&(Fn=Math.max(ci.startTime+ci.duration,Fn)),ne.get().streaming.buffer.avoidCurrentTimeRangePruning){for(let _i=0;_i<Ot.length;_i++)if(Ot.start(_i)<=Je&&Je<=Ot.end(_i)&&Ot.start(_i)<=Fn&&Fn<=Ot.end(_i)){let ui=Fn;Fn=_i+1<Ot.length?Ot.start(_i+1):Ot.end(_i)+1,$.debug("Buffered range ["+Ot.start(_i)+", "+Ot.end(_i)+"] overlaps with targetTime "+Je+" and range to be pruned ["+ui+", "+an+"], using ["+Fn+", "+an+"] instead"+(Fn<an?"":" (no actual pruning)"));break}}return Fn<Ot.end(Ot.length-1)?{start:Fn,end:an}:null}(Ut,$n);Yn&&hn.push(Yn),tn&&hn.push(tn)}return hn}function Vt(){(!rt||X===j.default.TEXT&&oe.isTextEnabled())&&Kn()}function Jt(){gi()}function yn(){gi(),fe=NaN}function Cn(Ut,hn){if(!Le)return null;const $n=Le.getAllBufferRanges();let Yn,tn,Je=0,Ot=0,an=null,Ft=null,bn=0;const Fn=isNaN(hn)?.15:hn;if($n!=null){for(tn=0,Yn=$n.length;tn<Yn;tn++)if(Je=$n.start(tn),Ot=$n.end(tn),an===null)bn=Math.abs(Je-Ut),(Ut>=Je&&Ut<Ot||bn<=Fn)&&(an=Je,Ft=Ot);else{if(bn=Je-Ft,!(bn<=Fn))break;Ft=Ot}if(an!==null)return{start:an,end:Ft}}return null}function Kn(){if(z){let Ut=z.getTime()||0;Te&&(Ut=isNaN(fe)?0:fe);const hn=ne.get().streaming.gaps.jumpGaps&&!isNaN(ne.get().streaming.gaps.smallGapLimit)?ne.get().streaming.gaps.smallGapLimit:NaN;ve=Math.max(function($n,Yn){let tn,Je;return ne.get().streaming.gaps.jumpGaps&&(Yn=ne.get().streaming.gaps.smallGapLimit),tn=Cn($n,Yn),Je=tn===null?0:tn.end-$n,Je}(Ut,hn),0),Xn(x.default.BUFFER_LEVEL_UPDATED,{mediaType:X,bufferLevel:ve}),gi()}}function Zn(){const Ut=Ie>=Ce-1,hn=z.getTimeToStreamEnd(B)-ve<1e-5;!Ut&&!hn||re||(qn(!0),$.debug(`checkIfBufferingCompleted trigger BUFFERING_COMPLETED for stream id ${B.id} and type ${X}`))}function gi(){if(X!==j.default.AUDIO&&X!==j.default.VIDEO)return;const Ut=z.getLowLatencyModeEnabled()?ne.get().streaming.buffer.lowLatencyStallThreshold:ne.get().streaming.buffer.stallThreshold;ve<=Ut&&!re?_n(Z.BUFFER_EMPTY):(re||ve>Ut)&&_n(Z.BUFFER_LOADED)}function _n(Ut){le===Ut||Ut===Z.BUFFER_EMPTY&&z.getTime()===0||X===j.default.TEXT&&!oe.isTextEnabled()||(le=Ut,Xn(x.default.BUFFER_LEVEL_STATE_CHANGED,{state:Ut}),Xn(Ut===Z.BUFFER_LOADED?x.default.BUFFER_LOADED:x.default.BUFFER_EMPTY),$.debug(Ut===Z.BUFFER_LOADED?"Got enough buffer to start":"Waiting for more buffer before starting playback"))}function ri(){Le&&X!==j.default.TEXT&&(re||Gi(pi()))}function pi(){const Ut=[],hn=Le.getAllBufferRanges();if(!hn||hn.length===0)return Ut;const $n=z.getTime();let Yn=Math.max(0,$n-ne.get().streaming.buffer.bufferToKeep);const tn=F.getRequests({state:Qe.FRAGMENT_MODEL_EXECUTED,time:$n,threshold:vt})[0];if(tn)Yn=Math.min(tn.startTime,Yn);else if($n===0&&z.getIsDynamic())return[];if(hn.start(0)<=Yn){const Je={start:0,end:Yn};for(let Ot=0;Ot<hn.length&&hn.end(Ot)<=Yn;Ot++)Je.end=hn.end(Ot);Je.start<Je.end&&Ut.push(Je)}return Ut}function Gi(Ut){return new Promise((hn,$n)=>{if(!Ut||!Le||Ut.length===0)return Kn(),void hn();const Yn=[];Ut.forEach(tn=>{Yn.push(function(Je){return new Promise((Ot,an)=>{Je.resolve=Ot,Je.reject=an,nt.push(Je)})}(tn))}),Ge||Ki(),Promise.all(Yn).then(()=>{hn()}).catch(tn=>{$n(tn)})})}function Ki(){try{if(nt.length===0||!Le)return $.debug("Nothing to prune, halt pruning"),nt=[],void(Ge=!1);const Ut=Le.getBuffer();if(!Ut||!Ut.buffered||Ut.buffered.length===0)return $.debug("SourceBuffer is empty (or does not exist), halt pruning"),nt=[],void(Ge=!1);const hn=nt.shift();$.debug(`${X}: Removing buffer from: ${hn.start} to ${hn.end}`),Ge=!0,z.getTime()<hn.end&&qn(!1),Le.remove(hn).then($n=>{bi($n)}).catch($n=>{bi($n)})}catch{Ge=!1}}function bi(Ut){$.debug("onRemoved buffer from:",Ut.from,"to",Ut.to),Le&&(de(Le.getAllBufferRanges()),nt.length===0&&(Ge=!1,Kn()),Ut.unintended&&($.warn("Detected unintended removal from:",Ut.from,"to",Ut.to,"setting streamprocessor time to",Ut.from),Xn(x.default.SEEK_TARGET,{time:Ut.from})),Ge?Ki():(rt?rt=!1:Kn(),Xn(x.default.BUFFER_CLEARED,{from:Ut.from,to:Ut.to,unintended:Ut.unintended,hasEnoughSpaceToAppend:Bn(),quotaExceeded:ze})))}function Nt(Ut){return new Promise(hn=>{Ut&&Ut.mseTimeOffset!==void 0&&Le&&Le.updateTimestampOffset?Le.updateTimestampOffset(Ut.mseTimeOffset).then(()=>{hn()}).catch(()=>{hn()}):hn()})}function rn(){return Le&&!re?Le.updateAppendWindow(B):Promise.resolve()}function en(){Pe++,Pe*(ne.get().streaming.wallclockTimeUpdateInterval/1e3)>=ne.get().streaming.buffer.bufferPruningInterval&&(Pe=0,ri())}function gn(){gi()}function qn(Ut){re=Ut,re?Xn(x.default.BUFFERING_COMPLETED):Ce=Number.POSITIVE_INFINITY}function Kt(){try{const Ut=Le.getAllBufferRanges();let hn,$n,Yn=0;if(!Ut)return Yn;for($n=0,hn=Ut.length;$n<hn;$n++)Yn+=Ut.end($n)-Ut.start($n);return Yn}catch{return 0}}function kn(Ut){try{let hn=Ut;const $n=Le.getAllBufferRanges();if(!$n||$n.length===0)return NaN;let Yn=0;for(;hn===Ut&&Yn<$n.length;){const tn=$n.start(Yn),Je=$n.end(Yn);hn>=tn&&hn<=Je&&(hn=Je),Yn+=1}return hn===Ut?NaN:hn}catch{return NaN}}function Bn(){const Ut=Kt();return isNaN(Ut)||Ut<Se}function Xn(Ut,hn){let $n=hn||{};P.trigger(Ut,$n,{streamId:B.id,mediaType:X})}function zn(Ut,hn){if(Se=Number.POSITIVE_INFINITY,le=void 0,Ce=Number.POSITIVE_INFINITY,Ie=0,he=null,re=!1,Ge=!1,ze=!1,ve=0,Pe=0,nt=[],fe=NaN,Te=!1,Le){let $n=Le;Le=null,Ut||(hn?$n.removeEventListeners():$n.abort().then(()=>{$n.reset(hn),$n=null}))}rt=!1}return q={appendInitSegmentFromCache:function(Ut){const hn=Ve.extract(B.id,Ut);return!!hn&&($.debug(`Appending init fragment for type ${X}, representationId ${hn.representation.id} and bandwidth ${hn.representation.bandwidth}`),ye(hn),!0)},clearBuffers:Gi,createBufferSink:Ue,dischargePreBuffer:function(){if(Le&&Ye&&typeof Ye.discharge=="function"){const Ut=Ye.getAllBufferRanges();if(Ut.length>0){let Yn="Beginning "+X+"PreBuffer discharge, adding buffer for:";for(let tn=0;tn<Ut.length;tn++)Yn+=" start: "+Ut.start(tn)+", end: "+Ut.end(tn)+";";$.debug(Yn)}else $.debug("PreBuffer discharge requested, but there were no media segments in the PreBuffer.");ie=[];let hn=Ye.discharge(),$n=null;for(let Yn=0;Yn<hn.length;Yn++){const tn=hn[Yn];if(tn.segmentType!==Xe.HTTPRequest.INIT_SEGMENT_TYPE){const Je=Ve.extract(tn.streamId,tn.representation.id);Je&&$n!==Je&&(ie.push(Je),Le.append(Je),$n=Je)}ie.push(tn),Le.append(tn)}Ye.reset(),Ye=null}},getAllRangesWithSafetyFactor:Tt,getBuffer:function(){return Le},getBufferControllerType:function(){return Lt},getBufferLevel:function(){return ve},getContinuousBufferTimeForTargetTime:kn,getIsBufferingCompleted:function(){return re},getIsPruningInProgress:function(){return Ge},getMediaSource:function(){return ke},getRangeAt:Cn,getStreamId:function(){return B.id},getType:function(){return X},hasBufferAtTime:function(Ut){try{const hn=Le.getAllBufferRanges();if(!hn||hn.length===0)return!1;let $n=0;for(;$n<hn.length;){const Yn=hn.start($n),tn=hn.end($n);if(Ut>=Yn&&Ut<=tn)return!0;$n+=1}return!1}catch(hn){return $.error(hn),!1}},initialize:function(Ut){me(Ut),P.on(x.default.INIT_FRAGMENT_LOADED,je,q),P.on(x.default.MEDIA_FRAGMENT_LOADED,Ee,q),P.on(x.default.WALLCLOCK_TIME_UPDATED,en,q),P.on(xe.default.PLAYBACK_PLAYING,yn,q),P.on(xe.default.PLAYBACK_PROGRESS,Vt,q),P.on(xe.default.PLAYBACK_TIME_UPDATED,Vt,q),P.on(xe.default.PLAYBACK_RATE_CHANGED,gn,q),P.on(xe.default.PLAYBACK_STALLED,Jt,q)},prepareForAbandonQualitySwitch:function(Ut,hn){return qe(Ut,hn)},prepareForDefaultQualitySwitch:function(Ut,hn){return qe(Ut,hn)},prepareForFastQualitySwitch:function(Ut,hn){return qe(Ut,hn)},prepareForForceReplacementQualitySwitch:function(Ut,hn){return new Promise($n=>{const Yn=[];Yn.push(Le.abort()),Yn.push(rn()),Yn.push(mt()),Yn.push(Nt(Ut)),Yn.push(tt(Ut,hn)),Promise.allSettled(Yn).then(()=>{qn(!1),$n()})})},prepareForNonReplacementTrackSwitch:function(Ut,hn){return new Promise($n=>{const Yn=[];Yn.push(rn()),Yn.push(tt(Ut,hn)),Promise.allSettled(Yn).then(()=>{$n()})})},prepareForPlaybackSeek:function(){return re&&qn(!1),Le.abort()},prepareForReplacementTrackSwitch:function(Ut,hn){return new Promise($n=>{const Yn=[];Yn.push(Le.abort()),Yn.push(rn()),Yn.push(tt(Ut,hn)),Yn.push(mt()),Yn.push(Nt(Ut)),Promise.allSettled(Yn).then(()=>{qn(!1),$n()})})},pruneAllSafely:mt,pruneBuffer:ri,reset:function(Ut,hn){P.off(x.default.INIT_FRAGMENT_LOADED,je,this),P.off(x.default.MEDIA_FRAGMENT_LOADED,Ee,this),P.off(x.default.WALLCLOCK_TIME_UPDATED,en,this),P.off(xe.default.PLAYBACK_PLAYING,yn,this),P.off(xe.default.PLAYBACK_PROGRESS,Vt,this),P.off(xe.default.PLAYBACK_TIME_UPDATED,Vt,this),P.off(xe.default.PLAYBACK_RATE_CHANGED,gn,this),P.off(xe.default.PLAYBACK_STALLED,Jt,this),zn(Ut,hn)},segmentRequestingCompleted:function(Ut){isNaN(Ut)||(Ce=Ut,Zn())},setIsBufferingCompleted:qn,setMediaSource:me,setSeekTarget:function(Ut){fe=Ut},updateAppendWindow:rn,updateBufferTimestampOffset:Nt},$=(0,$e.default)(R).getInstance().getLogger(q),Ve=zt(R).getInstance(),zn(),q}bt.__dashjs_factory_name=Lt;var Mt=ue.default.getClassFactory(bt);const kt="NotFragmentedTextBufferController";function Bt(D){D=D||{};const C=this.context,R=(0,K.default)(C).getInstance(),P=D.textController,F=D.errHandler,z=D.streamInfo,Q=D.type;let ne,B,oe,X,q,$;function re(ke){X=ke}function ve(ke){B!==ke&&(B=ke,B&&function(Ie){let Ce={};R.trigger(Ie,Ce,{streamId:z.id,mediaType:Q})}(x.default.BUFFERING_COMPLETED))}function Se(ke){ke.chunk.bytes&&!B&&($.save(ke.chunk),q.append(ke.chunk),ve(!0))}return ne={initialize:function(ke){re(ke)},getStreamId:function(){return z.id},getType:function(){return Q},getBufferControllerType:function(){return kt},createBufferSink:function(ke){return new Promise((Ie,Ce)=>{try{q=ae(C).create({mediaSource:X,textController:P,eventBus:R}),q.initializeForFirstUse(ke),oe||(q.getBuffer()&&typeof q.getBuffer().initialize=="function"&&q.getBuffer().initialize(),oe=!0),Ie(q)}catch(Le){F.error(new Ze.default(ce.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,ce.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+Q)),Ce(Le)}})},dischargePreBuffer:function(){},getBuffer:function(){return q},getBufferLevel:function(){return 0},getRangeAt:function(){return null},pruneBuffer:function(){},hasBufferAtTime:function(){return!0},getAllRangesWithSafetyFactor:function(){return[]},getContinuousBufferTimeForTargetTime:function(){return Number.POSITIVE_INFINITY},setMediaSource:re,getMediaSource:function(){return X},appendInitSegmentFromCache:function(ke){return $.extract(z.id,ke)!==null},getIsBufferingCompleted:function(){return B},setIsBufferingCompleted:ve,getIsPruningInProgress:function(){return!1},reset:function(ke){R.off(x.default.INIT_FRAGMENT_LOADED,Se,ne),!ke&&q&&(q.abort(),q.reset(),q=null)},clearBuffers:function(){return Promise.resolve()},prepareForPlaybackSeek:function(){return Promise.resolve()},prepareForReplacementTrackSwitch:function(){return B=!1,Promise.resolve()},setSeekTarget:function(){},updateAppendWindow:function(){return Promise.resolve()},pruneAllSafely:function(){return Promise.resolve()},updateBufferTimestampOffset:function(){return Promise.resolve()},segmentRequestingCompleted:function(){}},oe=!1,X=null,B=!1,$=zt(C).getInstance(),R.on(x.default.INIT_FRAGMENT_LOADED,Se,ne),ne}Bt.__dashjs_factory_name=kt;var sn=ue.default.getClassFactory(Bt);function ti(D){D=D||{};const C=this.context,R=(0,K.default)(C).getInstance(),P=D.dashMetrics,F=D.mediaPlayerModel,z=D.fragmentModel,Q=D.abrController,ne=D.playbackController,B=D.textController,oe=D.type,X=D.bufferController,q=D.representationController,$=D.settings;let re,ve,Se,ke,Ie,Ce,Le,Ye,Te,ie,le,he;function Pe(){le=!0}function Ge(){le=!1}function ze(de){if(X.getIsBufferingCompleted())return;Ve();const we=isNaN(de)?0:de;Ie=setTimeout(nt,we)}function Ve(){Ie&&(clearTimeout(Ie),Ie=null)}function nt(){try{if(function(){try{return oe===j.default.TEXT&&!B.isTextEnabled()||ne.isPaused()&&(!ne.getStreamController().getInitialPlayback()||!ne.getStreamController().getAutoPlay())&&!$.get().streaming.scheduling.scheduleWhilePaused}catch{return!1}}())return void Ve();if(function(){try{return!!le&&q.getCurrentRepresentation()&&(Ye==null||Te||function(){const de=q.getCurrentRepresentation();if(!oe||!de)return!0;let we=de&&de.segmentDuration&&!isNaN(de.segmentDuration)?de.segmentDuration:0;const qe=P.getCurrentBufferLevel(oe),tt=rt();return(tt<=we||ne.getLowLatencyModeEnabled()||oe===j.default.AUDIO&&Ce)&&(we=0),qe+we<tt}())}catch{return!1}}()){let de=!1;he&&(de=Q.checkPlaybackQuality(oe,ve.id)),de||function(){const we=q.getCurrentRepresentation();ie||we.id!==Ye||Te?(Te?(Se.debug("Switch track for "+oe+", representation id = "+we.id),Te=!1):Se.debug("Quality has changed, get init request for representationid = "+we.id),R.trigger(x.default.INIT_FRAGMENT_NEEDED,{representationId:we.id,sender:re},{streamId:ve.id,mediaType:oe}),he=!1,ie=!1):(Se.debug(`Media segment needed for ${oe} and stream id ${ve.id}`),R.trigger(x.default.MEDIA_FRAGMENT_NEEDED,{},{streamId:ve.id,mediaType:oe}),he=!0)}()}else ze(ne.getLowLatencyModeEnabled()?$.get().streaming.scheduling.lowLatencyTimeout:$.get().streaming.scheduling.defaultTimeout)}catch{ze(ne.getLowLatencyModeEnabled()?$.get().streaming.scheduling.lowLatencyTimeout:$.get().streaming.scheduling.defaultTimeout)}}function rt(){let de=NaN;const we=q.getCurrentRepresentation();return oe&&we&&(de=oe===j.default.TEXT?function(){try{if(B.isTextEnabled()){const qe=q.getCurrentRepresentation();if(isNaN(qe.fragmentDuration)){const tt=P.getCurrentSchedulingInfo(Z.SCHEDULING_INFO);return tt?tt.duration:0}return qe.fragmentDuration}return 0}catch{return 0}}():oe===j.default.AUDIO&&Ce?function(){try{const qe=P.getCurrentBufferLevel(j.default.VIDEO),tt=q.getCurrentRepresentation();return isNaN(tt.fragmentDuration)?qe+1:Math.max(qe+1,tt.fragmentDuration)}catch{return 0}}():function(){try{const qe=q.getCurrentRepresentation(),tt=qe.mediaInfo.streamInfo;return Q.isPlayingAtTopQuality(qe)?tt.manifestInfo.duration>=$.get().streaming.buffer.longFormContentDurationThreshold?$.get().streaming.buffer.bufferTimeAtTopQualityLongForm:$.get().streaming.buffer.bufferTimeAtTopQuality:F.getBufferTimeDefaultUnadjusted()}catch{return F.getBufferTimeDefaultUnadjusted()}}()),de}function fe(){me(!0)}function me(de){if(ne&&z){const we=z.getRequests({state:Qe.FRAGMENT_MODEL_EXECUTED,time:ne.getTime(),threshold:0})[0];we&&ne.getTime()>=we.startTime&&((!Le.representation||we.representation.mediaInfo.type===Le.representation.mediaInfo.type&&we.representation.mediaInfo.index!==Le.representation.mediaInfo.index)&&de&&(Se.debug(`Track change rendered for streamId ${ve.id} and type ${oe}`),R.trigger(x.default.TRACK_CHANGE_RENDERED,{mediaType:oe,oldMediaInfo:Le&&Le.representation&&Le.representation.mediaInfo?Le.representation.mediaInfo:null,newMediaInfo:we.representation.mediaInfo,streamId:ve.id})),Le.representation&&we.representation.id===Le.representation.id||!de||(Se.debug(`Quality change rendered for streamId ${ve.id} and type ${oe}`),R.trigger(x.default.QUALITY_CHANGE_RENDERED,{mediaType:oe,oldRepresentation:Le.representation?Le.representation:null,newRepresentation:we.representation,streamId:ve.id})),Le.representation=we.representation)}}function Ue(){z.abortRequests(),Ve()}function je(){$.get().streaming.scheduling.scheduleWhilePaused||ze()}function Ee(de){P.updatePlayListTraceMetrics({playbackspeed:de.playbackRate.toString()})}function ye(){he=!0,ke=0,Ye=null,Le={representation:null},Te=!1,ie=!1,le=!0}return re={clearScheduleTimer:Ve,getBufferTarget:rt,getPlaybackController:function(){return ne},getStreamId:function(){return ve.id},getSwitchTrack:function(){return Te},getTimeToLoadDelay:function(){return ke},getType:function(){return oe},initialize:function(de){Ce=de,R.on(x.default.URL_RESOLUTION_FAILED,Ue,re),R.on(xe.default.PLAYBACK_STARTED,je,re),R.on(xe.default.PLAYBACK_RATE_CHANGED,Ee,re),R.on(xe.default.PLAYBACK_TIME_UPDATED,fe,re),R.on(xe.default.MANAGED_MEDIA_SOURCE_START_STREAMING,Pe,re),R.on(xe.default.MANAGED_MEDIA_SOURCE_END_STREAMING,Ge,re)},reset:function(){R.off(x.default.URL_RESOLUTION_FAILED,Ue,re),R.off(xe.default.PLAYBACK_STARTED,je,re),R.off(xe.default.PLAYBACK_RATE_CHANGED,Ee,re),R.off(xe.default.PLAYBACK_TIME_UPDATED,fe,re),R.off(xe.default.MANAGED_MEDIA_SOURCE_START_STREAMING,Pe,re),R.off(xe.default.MANAGED_MEDIA_SOURCE_END_STREAMING,Ge,re),Ve(),me(!1),ye(),ve=null},setCheckPlaybackQuality:function(de){he=de},setInitSegmentRequired:function(de){ie=de},setLastInitializedRepresentationId:function(de){Ye=de},setSwitchTrack:function(de){Te=de},setTimeToLoadDelay:function(de){ke=de},startScheduleTimer:ze},Se=(0,$e.default)(C).getInstance().getLogger(re),ye(),ve=D.streamInfo,re}ti.__dashjs_factory_name="ScheduleController";var On=ue.default.getClassFactory(ti),Vn=class{constructor(){this.availabilityEndTime=NaN,this.availabilityStartTime=NaN,this.duration=NaN,this.index=null,this.indexRange=null,this.media=null,this.mediaRange=null,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.replacementNumber=NaN,this.replacementTime=null,this.representation=null,this.wallStartTime=NaN}};function Sn(D,C){for(;D.length<C;)D="0"+D;return D}function ni(D){return D&&D.split("$$").join("$")}function dr(D,C){if(!C||!D||D.indexOf("$RepresentationID$")===-1)return D;let R=C.toString();return D.split("$RepresentationID$").join(R)}function _r(D,C,R){let P,F,z,Q,ne,B;const oe=C.length;if(!D)return D;for(;;){if(P=D.indexOf("$"+C),P<0||(F=D.indexOf("$",P+oe),F<0))return D;if(z=D.indexOf("%0",P+oe),z>P&&z<F)switch(Q=D.charAt(F-1),ne=parseInt(D.substring(z+2,F-1),10),Q){case"d":case"i":case"u":B=Sn(R.toString(),ne);break;case"x":B=Sn(R.toString(16),ne);break;case"X":B=Sn(R.toString(16),ne).toUpperCase();break;case"o":B=Sn(R.toString(8),ne);break;default:return D}else B=R;D=D.substring(0,P)+B+D.substring(F+1)}}function bs(D,C,R,P,F,z,Q,ne){let B=new Vn;var oe;return B.representation=D,B.duration=C,B.presentationStartTime=R,B.mediaStartTime=P,B.availabilityStartTime=F.calcAvailabilityStartTimeFromPresentationTime(z,D,Q),B.availabilityEndTime=F.calcAvailabilityEndTimeFromPresentationTime(z+C,D,Q),B.wallStartTime=F.calcWallTimeForSegment(B,Q),B.replacementNumber=(oe=ne,B.representation.startNumber+oe),B.index=ne,B}function Zr(D,C,R,P){const F=C.adaptation.period;if(isFinite(F.duration)&&F.start+F.duration<=R.presentationStartTime)return!1;if(P){if(C.availabilityTimeOffset==="INF")return!0;const z=D.getClientReferenceTime();return R.availabilityStartTime.getTime()<=z&&(!isFinite(R.availabilityEndTime)||R.availabilityEndTime.getTime()>=z)}return!0}function Zi(D,C,R,P){let F,z,Q;F=R.segmentDuration,isNaN(F)&&(F=R.adaptation.period.duration),z=parseFloat((R.adaptation.period.start+P*F).toFixed(5)),Q=parseFloat((z+F).toFixed(5));const ne=bs(R,F,z,D.calcMediaTimeFromPresentationTime(z,R),D,Q,C,P);return Zr(D,R,ne,C)?ne:null}function dn(D,C,R,P,F,z,Q,ne,B,oe){const X=P/z,q=F/z;let $,re,ve;return $=D.calcPresentationTimeFromMediaTime(X,R),re=$+q,ve=bs(R,q,$,X,D,re,C,B),Zr(D,R,ve,C)?(ve.replacementTime=oe||P,Q=_r(Q,"Number",ve.replacementNumber),Q=_r(Q,"Time",ve.replacementTime),ve.media=Q,ve.mediaRange=ne,ve):null}function Mn(D){const C=(D=D||{}).eventBus,R=D.events,P=D.abrController,F=D.dashMetrics,z=D.playbackController,Q=D.timelineConverter,ne=D.type,B=D.streamInfo,oe=D.segmentsController,X=D.isDynamic;let q,$,re;function ve(){return ne}function Se(){return re}function ke(){re=null,$=[]}function Ie(ie){return new Promise((le,he)=>{const Pe=ie.hasInitialization(),Ge=ie.hasSegments(),ze=[];ze.push(oe.updateInitData(ie,Pe)),ze.push(oe.updateSegmentData(ie,Ge)),Promise.all(ze).then(Ve=>{var nt;Ve[0]&&!Ve[0].error&&(ie=function(rt,fe){return fe&&!fe.error&&fe.representation?fe.representation:rt}(ie,Ve[0])),Ve[1]&&!Ve[1].error&&(ie=function(rt,fe){if(!fe||fe.error)return;const me=fe.segments,Ue=[];let je,Ee,ye,de,we=0;for(je=0,Ee=me?me.length:0;je<Ee;je++)ye=me[je],de=dn(Q,X,rt,ye.startTime,ye.duration,ye.timescale,ye.media,ye.mediaRange,we),de&&(Ue.push(de),de=null,we++);return Ue.length>0&&(rt.segments=Ue),rt}(ie,Ve[1])),ie.fragmentDuration=ie.segmentDuration?ie.segmentDuration:ie.segments&&ie.segments.length>0?ie.segments[0].duration:NaN,(nt=ie).mediaFinishedInformation=oe.getMediaFinishedInformation(nt),function(rt){let fe,me=F.getCurrentManifestUpdate(),Ue=!1;if(me){for(let je=0;je<me.representationInfo.length;je++)if(fe=me.representationInfo[je],fe.index===rt.index&&fe.mediaType===ve()){Ue=!0;break}Ue||F.addManifestUpdateRepresentationInfo(rt,ve())}}(ie),le()}).catch(Ve=>{he(Ve)})})}function Ce(ie){if(!$||$.length===0)return null;const le=$.filter(he=>he.id===ie);return le.length>0?le[0]:null}function Le(ie){C.trigger(R.DATA_UPDATE_COMPLETED,{currentRepresentation:re,error:ie},{streamId:B.id,mediaType:ne})}function Ye(ie){re&&re.id===ie.id||function(le){(function(){if(!(P&&F&&z&&Q))throw new Error(j.default.MISSING_CONFIG_ERROR)})();const he=new Date,Pe=1e3*z.getTime();le&&F.addRepresentationSwitch(le.adaptation.type,he,Pe,le.id),C.trigger(xe.default.REPRESENTATION_SWITCH,{mediaType:ne,streamId:B.id,currentRepresentation:le},{streamId:B.id,mediaType:ne})}(ie),re=ie}function Te(ie){if(ie.newDuration){const le=Se();le&&le.adaptation.period&&(le.adaptation.period.duration=ie.newDuration)}}return q={getCurrentRepresentation:Se,getRepresentationById:Ce,getStreamId:function(){return B.id},getType:ve,prepareQualityChange:function(ie){const le=$.filter(he=>he.id===ie.id);le.length>0&&Ye(le[0])},reset:function(){C.off(xe.default.MANIFEST_VALIDITY_CHANGED,Te,q),ke()},updateData:function(ie,le,he){return new Promise((Pe,Ge)=>{if($=ie,Ye(Ce(he)),ne!==j.default.VIDEO&&ne!==j.default.AUDIO&&(ne!==j.default.TEXT||!le))return Le(),void Pe();const ze=[];for(let Ve=0,nt=$.length;Ve<nt;Ve++){const rt=$[Ve];ze.push(Ie(rt))}Promise.all(ze).then(()=>{(function(){P.setPlaybackQuality(ne,B,re);const Ve=F.getCurrentDVRInfo(ne);Ve&&F.updateManifestUpdateInfo({latency:Ve.range.end-z.getTime()}),Le()})(),Pe()}).catch(Ve=>{Ge(Ve)})})}},ke(),C.on(xe.default.MANIFEST_VALIDITY_CHANGED,Te,q),q}Mn.__dashjs_factory_name="RepresentationController";var An=ue.default.getClassFactory(Mn),on=n(656);function Un(D){const C=(D=D||{}).eventBus,R=D.debug,P=D.urlUtils,F=D.type,z=D.streamInfo,Q=D.segmentsController,ne=D.timelineConverter,B=D.baseURLController;let oe,X,q,$,re;function ve(){return F}function Se(){q=null}function ke(Te,ie,le){const he=B.resolve(le.path);let Pe,Ge,ze={};return he&&ie!==he.url&&P.isRelative(ie)?(Pe=he.url,Ge=he.serviceLocation,ze=he.queryParams,ie&&(Pe=P.resolve(ie,Pe))):Pe=ie,!P.isRelative(Pe)&&(Te.url=Pe,Te.serviceLocation=Ge,Te.queryParams=ze,!0)}function Ie(Te,ie){if(ie==null)return null;const le=new Dt,he=ie.representation,Pe=he.bandwidth;let Ge=ie.media;return Ge=_r(Ge,"Number",ie.replacementNumber),Ge=_r(Ge,"Time",ie.replacementTime),Ge=_r(Ge,"Bandwidth",Pe),Ge=dr(Ge,he.id),Ge=ni(Ge),le.mediaType=ve(),le.bandwidth=he.bandwidth,le.type=Xe.HTTPRequest.MEDIA_SEGMENT_TYPE,le.range=ie.mediaRange,le.startTime=ie.presentationStartTime,le.mediaStartTime=ie.mediaStartTime,le.duration=ie.duration,le.timescale=he.timescale,le.availabilityStartTime=ie.availabilityStartTime,le.availabilityEndTime=ie.availabilityEndTime,le.availabilityTimeComplete=he.availabilityTimeComplete,le.wallStartTime=ie.wallStartTime,le.index=ie.index,le.adaptationIndex=he.adaptation.index,le.representation=he,ke(le,Ge,he)?le:void 0}function Ce(Te,ie,le){let he=null;if(!ie||!ie.segmentInfoType)return he;const Pe=Q.getSegmentByTime(ie,le);return Pe&&(q=Pe,X.debug("Index for time "+le+" is "+Pe.index),he=Ie(0,Pe)),he}function Le(Te,ie,le){let he=null;const Pe=Q.getSegmentByIndex(ie,le,q?q.mediaStartTime:-1);if(Pe)he=Ie(0,Pe),q=Pe;else{if($&&!re)return X.debug(ve()+" No segment found at index: "+le+". Wait for next loop"),null;re=!0}return he}function Ye(){X.debug("Dynamic stream complete"),re=!0}return oe={getCurrentIndex:function(){return q?q.index:-1},getInitRequest:function(Te,ie){return ie?function(le,he,Pe){const Ge=new Dt,ze=he.adaptation.period,Ve=ze.start;if(Ge.mediaType=Pe,Ge.type=Xe.HTTPRequest.INIT_SEGMENT_TYPE,Ge.range=he.range,Ge.availabilityStartTime=ne.calcAvailabilityStartTimeFromPresentationTime(Ve,he,$),Ge.availabilityEndTime=ne.calcAvailabilityEndTimeFromPresentationTime(Ve+ze.duration,he,$),Ge.representation=he,ke(Ge,he.initialization,he))return Ge.url=_r(Ge.url,"Bandwidth",he.bandwidth),Ge}(0,ie,ve()):null},getNextSegmentRequest:function(Te,ie){if(!ie||!ie.segmentInfoType)return null;let le=q?q.index+1:0;return ie&&q&&ie.endNumber&&q.replacementNumber&&q.replacementNumber>=ie.endNumber?(re=!0,null):Le(0,ie,le)},getNextSegmentRequestIdempotent:function(Te,ie){let le=null,he=q?q.index+1:0;const Pe=Q.getSegmentByIndex(ie,he,q?q.mediaStartTime:-1);return Pe?(le=Ie(0,Pe),le):null},getSegmentRequestForTime:Ce,getStreamId:function(){return z.id},getStreamInfo:function(){return z},getType:ve,getValidTimeAheadOfTargetTime:function(Te,ie,le,he){try{if(isNaN(Te)||!ie||!le)return NaN;if(Te<0&&(Te=0),isNaN(he)&&(he=.5),Ce(0,le,Te))return Te;if(le.adaptation.period.start+le.adaptation.period.duration<Te)return NaN;const Pe=isFinite(le.adaptation.period.duration)?le.adaptation.period.start+le.adaptation.period.duration:Te+30;let Ge=Math.min(Te+he,Pe),ze=NaN,Ve=null;for(;Ge<=Pe;){let nt=null;if(Ge<=Pe&&(nt=Ce(0,le,Ge)),nt){ze=Ge,Ve=nt;break}Ge+=he}if(Ve){const nt=Ve.startTime+Ve.duration;return Te>Ve.startTime&&nt-Te>he?Te:!isNaN(Ve.startTime)&&Te<Ve.startTime&&ze>Ve.startTime?Ve.startTime+.001:Math.min(nt-he,ze)}return ze}catch{return NaN}},initialize:function(Te){$=Te,re=!1,Q.initialize(Te)},isLastSegmentRequested:function(Te,ie){return!Te||!q?!1:re?!0:!isFinite(Te.adaptation.period.duration)||q.presentationStartTime+q.duration>ie?!1:Te.mediaFinishedInformation&&!isNaN(Te.mediaFinishedInformation.numberOfSegments)&&!isNaN(q.index)&&q.index>=Te.mediaFinishedInformation.numberOfSegments-1&&(!$||Te.segmentInfoType===M.default.SEGMENT_TEMPLATE||$&&Te.segmentInfoType===M.default.SEGMENT_LIST&&Te.adaptation.period.nextPeriodId)?!0:!!($&&Te.adaptation.period.nextPeriodId&&Te.segmentInfoType===M.default.SEGMENT_TIMELINE&&Te.mediaFinishedInformation&&!isNaN(Te.mediaFinishedInformation.mediaTimeOfLastSignaledSegment)&&q&&!isNaN(q.mediaStartTime)&&!isNaN(q.duration)&&q.mediaStartTime+q.duration>=Te.mediaFinishedInformation.mediaTimeOfLastSignaledSegment-.05)},repeatSegmentRequest:function(Te,ie){return ie&&ie.segmentInfoType?Le(0,ie,q?q.index:0):null},reset:function(){Se(),C.off(xe.default.DYNAMIC_TO_STATIC,Ye,oe)}},X=R.getLogger(oe),Se(),C.on(xe.default.DYNAMIC_TO_STATIC,Ye,oe),oe}Un.__dashjs_factory_name="DashHandler";var vn=ue.default.getClassFactory(Un);function Hn(){let D;const C=/^[a-z][a-z0-9+\-_.]*:/i,R=/^https?:\/\//i,P=/^https:\/\//i,F=/^([a-z][a-z0-9+\-_.]*:\/\/[^\/]+)\/?/i,z=(re,ve)=>{try{return new window.URL(re,ve).toString()}catch{return re}},Q=(re,ve)=>{let Se=ne;if(!ve||!X(re))return re;q(re)&&(Se=B),$(re)&&(Se=oe);const ke=Se(ve),Ie=ke.charAt(ke.length-1)!=="/"&&re.charAt(0)!=="/"?"/":"";return[ke,re].join(Ie)};function ne(re){const ve=re.indexOf("/"),Se=re.lastIndexOf("/");return ve!==-1?Se===ve+1?re:(re.indexOf("?")!==-1&&(re=re.substring(0,re.indexOf("?"))),re.substring(0,Se+1)):""}function B(re){const ve=re.match(F);return ve?ve[1]:""}function oe(re){const ve=re.match(C);return ve?ve[0]:""}function X(re){return!C.test(re)}function q(re){return X(re)&&re.charAt(0)==="/"}function $(re){return re.indexOf("//")===0}return function(){try{new window.URL("x","http://y"),D=z}catch{}finally{D=D||Q}}(),{parseBaseUrl:ne,parseOrigin:B,parseScheme:oe,isRelative:X,isPathAbsolute:q,isSchemeRelative:$,isHTTPURL:function(re){return R.test(re)},isHTTPS:function(re){return P.test(re)},removeHostname:function(re){return/^(?:\w+\:\/\/)?([^\/]+)(.*)$/.exec(re)[2].substring(1)},resolve:function(re,ve){return D(re,ve)}}}Hn.__dashjs_factory_name="DefaultURLUtils";var ei=ue.default.getSingletonFactory(Hn);function wn(){let D,C,R=[];const P=this.context;function F(z,Q,ne){let B=function(oe){let X;for(X=0;X<R.length;X++)if(R[X].regex.test(oe))return R[X].utils;return C}(ne||Q);return B&&typeof B[z]=="function"?B[z](Q,ne):C[z](Q,ne)}return C=ei(P).getInstance(),D={registerUrlRegex:function(z,Q){R.push({regex:z,utils:Q})},parseBaseUrl:function(z){return F("parseBaseUrl",z)},parseOrigin:function(z){return F("parseOrigin",z)},parseScheme:function(z){return F("parseScheme",z)},isRelative:function(z){return F("isRelative",z)},isPathAbsolute:function(z){return F("isPathAbsolute",z)},isSchemeRelative:function(z){return F("isSchemeRelative",z)},isHTTPURL:function(z){return F("isHTTPURL",z)},isHTTPS:function(z){return F("isHTTPS",z)},removeHostname:function(z){return F("removeHostname",z)},resolve:function(z,Q){return F("resolve",z,Q)}},D}wn.__dashjs_factory_name="URLUtils";var Ne=ue.default.getSingletonFactory(wn);class Ke{constructor(){this.start=null,this.mstart=null,this.starttype=null,this.trace=[]}}Ke.INITIAL_PLAYOUT_START_REASON="initial_playout",Ke.SEEK_START_REASON="seek",Ke.RESUME_FROM_PAUSE_START_REASON="resume",Ke.METRICS_COLLECTION_START_REASON="metrics_collection_start";class ft{constructor(){this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null}}function At(D,C){const R=(D=D||{}).timelineConverter,P=D.dashMetrics;let F;function z(){if(!R)throw new Error(j.default.MISSING_CONFIG_ERROR)}function Q(B,oe){const X=B.adaptation.period.mpd.manifest.Period[B.adaptation.period.index].AdaptationSet[B.adaptation.index].Representation[B.index].SegmentTemplate||B.adaptation.period.mpd.manifest.Period[B.adaptation.period.index].AdaptationSet[B.adaptation.index].Representation[B.index].SegmentList,q=X.SegmentTimeline,$=X.SegmentURL;let re,ve,Se,ke,Ie,Ce,Le,Ye=0,Te=-1;Le=B.timescale,re=q.S;let ie=!1;for(Se=0,ke=re.length;Se<ke&&!ie;Se++)for(ve=re[Se],Ce=0,ve.hasOwnProperty("r")&&(Ce=ve.r),ve.hasOwnProperty("t")&&(Ye=ve.t),Ce<0&&(Ce=ne(B,re[Se+1],ve,Le,Ye/Le)),Ie=0;Ie<=Ce&&!ie;Ie++)Te++,ie=oe(Ye,X,$,ve,Le,Te,Se),ie&&(B.segmentDuration=ve.d/Le),Ye+=ve.d}function ne(B,oe,X,q,$){let re;if(oe&&oe.hasOwnProperty("t"))re=oe.t/q;else try{let ve=0;if(isNaN(B.adaptation.period.start)||isNaN(B.adaptation.period.duration)||!isFinite(B.adaptation.period.duration)){const Se=P.getCurrentDVRInfo();ve=isNaN(Se.end)?0:Se.end}else ve=B.adaptation.period.start+B.adaptation.period.duration;re=R.calcMediaTimeFromPresentationTime(ve,B),B.segmentDuration=X.d/q}catch{re=0}return Math.max(Math.ceil((re-$)/(X.d/q))-1,0)}return F={getSegmentByIndex:function(B,oe,X){if(z(),!B)return null;let q=null,$=!1;return Q(B,function(re,ve,Se,ke,Ie,Ce,Le){if($||X<0){let Ye=ve.media,Te=ke.mediaRange;return Se&&(Ye=Se[Le].media||"",Te=Se[Le].mediaRange),q=dn(R,C,B,re,ke.d,Ie,Ye,Te,Ce,ke.tManifest),!0}return re>=X*Ie-.5*ke.d&&($=!0),!1}),q},getSegmentByTime:function(B,oe){if(z(),!B)return null;oe===void 0&&(oe=null);let X=null;const q=R.calcMediaTimeFromPresentationTime(oe,B);return Q(B,function($,re,ve,Se,ke,Ie,Ce){const Le=parseFloat((q*ke).toPrecision(15));if(Le<$+Se.d&&Le>=$){let Ye=re.media,Te=Se.mediaRange;return ve&&(Ye=ve[Ce].media||"",Te=ve[Ce].mediaRange),X=dn(R,C,B,$,Se.d,ke,Ye,Te,Ie,Se.tManifest),!0}return!1}),X},getMediaFinishedInformation:function(B){if(!B)return 0;const oe=(B.adaptation.period.mpd.manifest.Period[B.adaptation.period.index].AdaptationSet[B.adaptation.index].Representation[B.index].SegmentTemplate||B.adaptation.period.mpd.manifest.Period[B.adaptation.period.index].AdaptationSet[B.adaptation.index].Representation[B.index].SegmentList).SegmentTimeline;let X,q,$,re,ve,Se,ke,Ie=0,Ce=0,Le=0;for(ke=B.timescale,X=oe.S,re=X.length,$=0;$<re;$++)for(q=X[$],Se=0,q.hasOwnProperty("r")&&(Se=q.r),q.hasOwnProperty("t")&&(Ie=q.t,Ce=Ie/ke),Se<0&&(Se=ne(B,X[$+1],q,ke,Ce)),ve=0;ve<=Se;ve++)Le++,Ie+=q.d,Ce=Ie/ke;return{numberOfSegments:Le,mediaTimeOfLastSignaledSegment:Ce}}},F}ft.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",ft.REBUFFERING_REASON="rebuffering",ft.USER_REQUEST_STOP_REASON="user_request",ft.END_OF_PERIOD_STOP_REASON="end_of_period",ft.END_OF_CONTENT_STOP_REASON="end_of_content",ft.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",ft.FAILURE_STOP_REASON="failure",At.__dashjs_factory_name="TimelineSegmentsGetter";var un=ue.default.getClassFactory(At);function Qn(D,C){const R=(D=D||{}).timelineConverter;let P;function F(){if(!R||!R.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(j.default.MISSING_CONFIG_ERROR)}function z(Q,ne){if(F(),!Q)return null;const B=Q.adaptation.period.mpd.manifest.Period[Q.adaptation.period.index].AdaptationSet[Q.adaptation.index].Representation[Q.index].SegmentTemplate;ne=Math.max(ne,0);const oe=Zi(R,C,Q,ne);if(oe){if(Q.endNumber&&oe.replacementNumber>Q.endNumber)return null;oe.replacementTime=Math.round(ne*Q.segmentDuration*Q.timescale,10);let X=B.media;X=_r(X,"Number",oe.replacementNumber),X=_r(X,"Time",oe.replacementTime),oe.media=X}return oe}return P={getSegmentByIndex:z,getSegmentByTime:function(Q,ne){if(F(),!Q)return null;const B=Q.segmentDuration;if(isNaN(B))return null;let oe=R.calcPeriodRelativeTimeFromMpdRelativeTime(Q,ne);return z(Q,Math.floor(oe/B))},getMediaFinishedInformation:function(Q){const ne={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!Q)return ne;const B=Q.segmentDuration;return isNaN(B)?ne.numberOfSegments=1:ne.numberOfSegments=Math.ceil(Q.adaptation.period.duration/B),ne}},P}Qn.__dashjs_factory_name="TemplateSegmentsGetter";var ai=ue.default.getClassFactory(Qn);function vi(D,C){const R=(D=D||{}).timelineConverter;let P;function F(){if(!R||!R.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(j.default.MISSING_CONFIG_ERROR)}function z(Q,ne){if(F(),!Q)return null;const B=Q.adaptation.period.mpd.manifest.Period[Q.adaptation.period.index].AdaptationSet[Q.adaptation.index].Representation[Q.index].SegmentList,oe=B.SegmentURL.length,X=Q&&!isNaN(Q.startNumber)?Q.startNumber:1,q=Math.max(X-1,0),$=Math.max(ne-q,0);let re=null;if($<oe){const ve=B.SegmentURL[$];re=Zi(R,C,Q,ne),re&&(re.replacementTime=(X+ne-1)*Q.segmentDuration,re.media=ve.media?ve.media:"",re.mediaRange=ve.mediaRange,re.indexRange=ve.indexRange)}return re}return P={getSegmentByIndex:z,getSegmentByTime:function(Q,ne){if(F(),!Q)return null;const B=Q.segmentDuration;if(isNaN(B))return null;const oe=R.calcPeriodRelativeTimeFromMpdRelativeTime(Q,ne);return z(Q,Math.floor(oe/B))},getMediaFinishedInformation:function(Q){const ne={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!Q)return ne;const B=Q.adaptation.period.mpd.manifest.Period[Q.adaptation.period.index].AdaptationSet[Q.adaptation.index].Representation[Q.index].SegmentList,oe=Q&&!isNaN(Q.startNumber)?Q.startNumber:1,X=Math.max(oe-1,0);return ne.numberOfSegments=X+B.SegmentURL.length,ne}},P}vi.__dashjs_factory_name="ListSegmentsGetter";var Xi=ue.default.getClassFactory(vi);function si(D){const C=(D=D||{}).timelineConverter;let R;function P(){if(!C||!C.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(j.default.MISSING_CONFIG_ERROR)}function F(z,Q){if(P(),!z)return null;const ne=z.segments?z.segments.length:-1;let B;if(Q<ne&&(B=z.segments[Q],B&&B.index===Q))return B;for(let oe=0;oe<ne;oe++)if(B=z.segments[oe],B&&B.index===Q)return B;return null}return R={getSegmentByIndex:F,getSegmentByTime:function(z,Q){P();const ne=function(B,oe){if(!B)return-1;const X=B.segments,q=X?X.length:null;let $,re,ve,Se,ke,Ie=-1;if(X&&q>0){for(ke=0;ke<q;ke++)if(re=X[ke],ve=re.presentationStartTime,Se=re.duration,$=Se/2,oe+$>=ve&&oe-$<ve+Se){Ie=re.index;break}}return Ie}(z,Q);return F(z,ne)},getMediaFinishedInformation:function(z){const Q={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};return z&&z.segments&&(Q.numberOfSegments=z.segments.length),Q}},R}si.__dashjs_factory_name="SegmentBaseGetter";var cn=ue.default.getClassFactory(si);function Wt(D){D=D||{};const C=this.context,R=D.dashConstants,P=D.type,F=D.segmentBaseController;let z,Q;function ne(B){return B?B.segments?Q[R.SEGMENT_BASE]:Q[B.segmentInfoType]:null}return z={initialize:function(B){Q[R.SEGMENT_TIMELINE]=un(C).create(D,B),Q[R.SEGMENT_TEMPLATE]=ai(C).create(D,B),Q[R.SEGMENT_LIST]=Xi(C).create(D,B),Q[R.SEGMENT_BASE]=cn(C).create(D,B)},updateInitData:function(B,oe){return oe?Promise.resolve():F.getSegmentBaseInitSegment({representation:B,mediaType:P})},updateSegmentData:function(B,oe){return oe?Promise.resolve():F.getSegmentList({mimeType:B.mimeType,representation:B,mediaType:P})},getSegmentByIndex:function(B,oe,X){const q=ne(B);return q?q.getSegmentByIndex(B,oe,X):null},getSegmentByTime:function(B,oe){const X=ne(B);return X?X.getSegmentByTime(B,oe):null},getMediaFinishedInformation:function(B){const oe=ne(B);return oe?oe.getMediaFinishedInformation(B):{numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN}}},Q={},z}Wt.__dashjs_factory_name="SegmentsController";var Ln=ue.default.getClassFactory(Wt);function Nn(){let D;return D={ntpToUTC:function(C){const R=new Date(Date.UTC(1900,0,1,0,0,0));return new Date(R.getTime()+C).getTime()}},D}Nn.__dashjs_factory_name="TimeUtils";var fi=ue.default.getSingletonFactory(Nn),jn=class{constructor(D){this.newMediaInfo=D.newMediaInfo,this.previouslySelectedRepresentation=D.previouslySelectedRepresentation,this.newRepresentation=D.newRepresentation}};function cr(D){D=D||{};let C,R,P,F,z,Q,ne,B,oe,X,q,$,re,ve,Se,ke,Ie=this.context,Ce=(0,K.default)(Ie).getInstance(),Le=D.abrController,Ye=D.adapter,Te=D.boxParser,ie=D.capabilities,le=D.dashMetrics,he=D.errHandler,Pe=D.fragmentModel,Ge=D.manifestModel,ze=D.mediaController,Ve=D.mediaPlayerModel,nt=D.mimeType,rt=D.playbackController,fe=D.segmentBlacklistController,me=D.settings,Ue=D.streamInfo,je=D.textController,Ee=D.timelineConverter,ye=D.type;function de(){return Ue.id}function we(){return ye}function qe(){B=[],P=null,R=0,Se=!1,ve=!1,X=!1,ke=!1,gi()}function tt(Ft){return!isNaN(Ft)&&!isNaN(Ue.duration)&&isFinite(Ue.duration)&&Ft>=Ue.start+Ue.duration}function mt(Ft){let bn=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(Ft.sender){if(rt.getIsManifestUpdateInProgress())Jt();else if((!P.isText||je.isTextEnabled())&&C&&Ft.representationId&&!C.appendInitSegmentFromCache(Ft.representationId)){const Fn=q.getCurrentRepresentation();if(Fn.range===0)return void Tt();const ci=F?F.getInitRequest(P,Fn):null;ci?Pe.executeRequest(ci):bn&&($.setInitSegmentRequired(!0),Jt())}}}function Tt(Ft){let bn=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];if(rt.getIsManifestUpdateInProgress()||C.getIsPruningInProgress())return void Jt();let Fn=function(){let ci;if(isNaN(R)||we()===j.default.TEXT&&!je.isTextEnabled())return null;if(F){const _i=Ut();ci=Se?F.getSegmentRequestForTime(P,_i,R):ve?F.repeatSegmentRequest(P,_i):F.getNextSegmentRequest(P,_i)}return ci}();Fn?(Se=!1,ve=!1,function(ci){isNaN(ci.startTime+ci.duration)||(R=ci.startTime+ci.duration),ci.delayLoadingTime=new Date().getTime()+$.getTimeToLoadDelay(),$.setTimeToLoadDelay(0),function(_i){let ui=_i.url;return _i.range&&(ui=ui.concat("_",_i.range)),fe.contains(ui)}(ci)?(ne.warn(`Fragment request url ${ci.url} for stream id ${Ue.id} and media type ${ye} is on the ignore list and will be skipped`),Jt()):(ne.debug(`Next fragment request url for stream id ${Ue.id} and media type ${ye} is ${ci.url} with request range ${ci.range}`),Pe.executeRequest(ci))}(Fn)):function(ci){const _i=q.getCurrentRepresentation();try{if(me.get().streaming.gaps.enableSeekFix&&(Se||rt.getTime()===0)){let ui;if(Q?Q&&_i.segmentInfoType===M.default.SEGMENT_TIMELINE&&(ui=F.getValidTimeAheadOfTargetTime(R,P,_i,me.get().streaming.gaps.threshold)):(ui=F.getValidTimeAheadOfTargetTime(R,P,_i,me.get().streaming.gaps.threshold),isNaN(ui)&&R>=_i.adaptation.period.mpd.mediaPresentationDuration-_i.segmentDuration&&(ui=R-.1)),!isNaN(ui)&&ui!==R)return void(rt.isSeeking()||rt.getTime()===0?(ne.warn(`Adjusting playback time ${ui} because of gap in the manifest. Seeking by ${ui-R}`),rt.seek(ui,!1,!1)):(ne.warn(`Adjusting buffering time ${ui} because of gap in the manifest. Adjusting time by ${ui-R}`),an(ui),ci&&Jt()))}}catch(ui){ne.error(ui)}Vt()||ci&&Jt()}(bn)}function Vt(){const Ft=q.getCurrentRepresentation(),bn=F.isLastSegmentRequested(Ft,R);if(bn){const Fn=F.getCurrentIndex();ne.debug(`Segment requesting for stream ${Ue.id} has finished`),Ce.trigger(x.default.STREAM_REQUESTING_COMPLETED,{segmentIndex:Fn},{streamId:Ue.id,mediaType:ye}),C.segmentRequestingCompleted(Fn),zn()}return bn}function Jt(){$.startScheduleTimer(rt.getLowLatencyModeEnabled()?me.get().streaming.scheduling.lowLatencyTimeout:me.get().streaming.scheduling.defaultTimeout)}function yn(Ft){le.addBufferState(ye,Ft.state,$.getBufferTarget()),Ft.state!==Z.BUFFER_EMPTY||rt.isSeeking()||(ne.info("Buffer is empty! Stalling!"),le.pushPlayListTraceMetrics(new Date,ft.REBUFFERING_REASON))}function Cn(Ft){Pe.syncExecutedRequestsWithBufferedRange(C.getBuffer().getAllBufferRanges(),Ue.duration),Ft.quotaExceeded&&Ft.from>rt.getTime()&&an(Ft.from),Ft.hasEnoughSpaceToAppend&&Ft.quotaExceeded&&$.startScheduleTimer()}function Kn(Ft){if(!Ft||!Ft.lastRequestAppended||!Ft.lastRequestAppended.url)return;let bn=Ft.lastRequestAppended.url;Ft.lastRequestAppended.range&&(bn=bn.concat("_",Ft.lastRequestAppended.range)),ne.warn(`Blacklisting segment with url ${bn}`),fe.add(bn)}function Zn(Ft){if(ne.debug(`Appended bytes for ${Ft.mediaType} and stream id ${Ft.streamId}`),Ft.segmentType===Xe.HTTPRequest.INIT_SEGMENT_TYPE){const bn=Ft.representationId;$.setLastInitializedRepresentationId(bn),ne.info("["+ye+"] lastInitializedRepresentationId changed to "+bn)}oe&&oe.enabled?Nt(oe.newRepresentation,oe.oldRepresentation):ke||$.startScheduleTimer(0)}function gi(){oe={newRepresentation:null,oldRepresentation:null,enabled:!1}}function _n(Ft){return new Promise(bn=>{if(!q)return Promise.resolve();let Fn=null;var ci;Fn=Ft.newRepresentation?{selectedRepresentation:(ci=Ft).newRepresentation,currentMediaInfo:ci.newMediaInfo}:P!==null&&Ye.areMediaInfosEqual(P,Ft.newMediaInfo)?function(ui){return{currentMediaInfo:ui.newMediaInfo,selectedRepresentation:q.getCurrentRepresentation()}}(Ft):function(ui){let Nr=NaN;return Nr=!me.get().streaming.abr.autoSwitchBitrate[ui.newMediaInfo.type]&&ui.previouslySelectedRepresentation?ui.previouslySelectedRepresentation.bitrateInKbit:Le.getInitialBitrateFor(ye),{selectedRepresentation:Le.getOptimalRepresentationForBitrate(ui.newMediaInfo,Nr,!1),currentMediaInfo:ui.newMediaInfo}}(Ft),ri(Fn.currentMediaInfo),Ce.trigger();const _i=Le.getPossibleVoRepresentations(P,!1);return q.updateData(_i,P.isFragmented,Fn.selectedRepresentation.id).then(()=>{(function(){const ui=q.getCurrentRepresentation();C.getIsBufferingCompleted()||C.updateBufferTimestampOffset(ui)})(),bn()}).catch(ui=>{ne.error(ui),bn()})})}function ri(Ft){Ye.areMediaInfosEqual(P,Ft)||Ce.trigger(xe.default.NEW_TRACK_SELECTED,{value:Ft}),P=Ft,Le.handleNewMediaInfo(P),Ce.trigger(x.default.MEDIAINFO_UPDATED,{mediaType:ye,streamId:Ue.id,currentMediaInfo:P})}function pi(Ft){const bn=Ft.newRepresentation,Fn=Ft.oldRepresentation;bn&&Fn||ne.warn("_handleDifferentSwitchTypes() is missing the target representations"),Ft.reason&&Ft.reason.forceReplace?function(ci,_i){Pe.abortRequests(),Ce.trigger(x.default.BUFFER_REPLACEMENT_STARTED,{mediaType:ye,streamId:Ue.id},{mediaType:ye,streamId:Ue.id}),$.setCheckPlaybackQuality(!1),C.prepareForForceReplacementQualitySwitch(ci,_i).then(()=>{Gi()}).catch(()=>{Gi()})}(bn,Fn):Ft&&Ft.reason&&Ft.reason.forceAbandon?function(ci,_i){C.prepareForAbandonQualitySwitch(ci,_i).then(()=>{Ki()}).catch(()=>{Ki()})}(bn,Fn):Ve.getFastSwitchEnabled()?function(ci,_i){const ui=rt.getTime();let Nr=1.5*(isNaN(ci.fragmentDuration)?1:ci.fragmentDuration);const Is=Pe.getRequests({state:Qe.FRAGMENT_MODEL_EXECUTED,time:ui+Nr,threshold:0})[0];if(Is&&!P.isText){const Ko=C.getBufferLevel(),Ta=Le.getAbandonmentStateFor(Ue.id,ye);Is.bandwidth<ci.bandwidth&&Ko>=Nr&&Ta===Z.ALLOW_LOAD?C.prepareForFastQualitySwitch(ci,_i).then(()=>{bi(ui,Nr)}).catch(()=>{bi(ui,Nr)}):Nt(ci,_i)}else Nt(ci,_i)}(bn,Fn):Nt(bn,Fn),le.pushPlayListTraceMetrics(new Date,ft.REPRESENTATION_SWITCH_STOP_REASON),le.createPlaylistTraceMetrics(bn.id,1e3*rt.getTime(),rt.getPlaybackRate())}function Gi(){tn(),gi(),X=!1}function Ki(){Pe.abortRequests(),ve=!0,$.setCheckPlaybackQuality(!1),$.startScheduleTimer(),X=!1}function bi(Ft,bn){Pe.abortRequests(),an(Ft+bn),$.setCheckPlaybackQuality(!1),$.startScheduleTimer(),X=!1}function Nt(Ft,bn){const Fn=Pe.getRequests({state:Qe.FRAGMENT_MODEL_LOADING});if(Fn&&Fn.length>0)return ne.debug("Preparing for default quality switch: Waiting for ongoing segment request to be finished before applying switch."),oe.newRepresentation=Ft,oe.oldRepresentation=bn,void(oe.enabled=!0);C.prepareForDefaultQualitySwitch(Ft,bn).then(()=>{rn()}).catch(()=>{rn()})}function rn(){$.setCheckPlaybackQuality(!1),P.segmentAlignment||P.subSegmentAlignment?$.startScheduleTimer():Je(),gi(),X=!1}function en(Ft){ne.info("onFragmentLoadingAbandoned request: "+Ft.request.url+" has been aborted"),rt.isSeeking()||$.getSwitchTrack()||X||(ne.info("onFragmentLoadingAbandoned request: "+Ft.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),Ft.request&&Ft.request.isInitializationRequest()?$.setInitSegmentRequired(!0):an(Ft.request.startTime+Ft.request.duration/2),$.startScheduleTimer(0))}function gn(Ft){ne.info("OnFragmentLoadingCompleted for stream id "+Ue.id+" and media type "+ye+" - Url:",Ft.request?Ft.request.url:"undefined",Ft.request.range?", Range:"+Ft.request.range:""),P.isText&&$.startScheduleTimer(0),Ft.error&&Ft.request.serviceLocation&&function(bn){ne.info("Fragment loading completed with an error"),bn&&bn.request&&bn.request.type&&(bn.request.type===Xe.HTTPRequest.INIT_SEGMENT_TYPE?mt({representationId:bn.request.representation.id,sender:{}},!1):bn.request.type===Xe.HTTPRequest.MEDIA_SEGMENT_TYPE&&(an(bn.request.startTime+bn.request.duration/2),Tt({},!1)))}(Ft)}function qn(){an(rt.getTime()),Xn().startScheduleTimer()}function Kt(Ft){const bn=Ft.currentTrackInfo;if(!bn)return;const Fn=B.find(ci=>ci.index===bn.index&&ci.lang===bn.lang);Fn&&_n(new jn({newMediaInfo:Fn})).then(()=>{C.setIsBufferingCompleted(!1),an(rt.getTime()),$.setInitSegmentRequired(!0),$.startScheduleTimer()})}function kn(Ft){an(Ft.quotaExceededTime),zn()}function Bn(){return C?C.getBuffer():null}function Xn(){return $}function zn(){$&&$.clearScheduleTimer()}function Ut(){let Ft,bn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:NaN;return isNaN(bn)?Ft=q?q.getCurrentRepresentation():null:((0,on.checkInteger)(bn),Ft=q?q.getRepresentationById(bn):null),Ft}function hn(){return!!C&&C.getIsBufferingCompleted()}function $n(Ft){if(!me.get().streaming.enableManifestTimescaleMismatchFix)return;const bn=Ft.chunk,Fn=bn.bytes,ci=Ut(bn.representation.id);ci&&(ci.timescale=Te.getMediaTimescaleFromMoov(Fn))}function Yn(Ft){const bn=Ft.chunk,Fn=bn.bytes,ci=Ut(bn.representation.id);if(ci){let _i;if(me.get().streaming.parseInbandPrft&&Ft.request.type===Xe.HTTPRequest.MEDIA_SEGMENT_TYPE){_i=_i||Te.parse(Fn);const Is=function(Ko,Ta){const bc=Ko.getBoxes("prft"),hd=[];return bc.forEach(pd=>{hd.push(function(cl,_c){let Eo="unknown";switch(cl.flags){case 0:Eo=M.default.PRODUCER_REFERENCE_TIME_TYPE.ENCODER;break;case 16:Eo=M.default.PRODUCER_REFERENCE_TIME_TYPE.APPLICATION;break;case 24:Eo=M.default.PRODUCER_REFERENCE_TIME_TYPE.CAPTURED}let bo=1e3*cl.ntp_timestamp_sec+cl.ntp_timestamp_frac/2**32*1e3;return bo=fi(Ie).getInstance().ntpToUTC(bo),{type:Eo,ntpTimestamp:bo,mediaTime:cl.media_time/_c}}(pd,Ta))}),hd}(_i,ci.timescale);Is&&Is.length&&Ce.trigger(xe.default.INBAND_PRFT,{data:Is},{streamId:Ue.id,mediaType:ye})}const ui=Ye.getEventsFor(ci.mediaInfo,null,Ue),Nr=Ye.getEventsFor(ci,ci,Ue);if(ui&&ui.length>0||Nr&&Nr.length>0){const Is=Ft.request;_i=_i||Te.parse(Fn);const Ko=function(Ta,bc,hd,pd){try{const cl={},_c=[],Eo=hd.concat(pd);for(let _o=0,gd=Eo.length;_o<gd;_o++)cl[Eo[_o].schemeIdUri+"/"+Eo[_o].value]=Eo[_o];const bo=Ta.getBoxes("emsg");if(!bo||bo.length===0)return _c;const Sc=Ta.getBox("sidx"),Ei=!Sc||isNaN(Sc.earliest_presentation_time)||isNaN(Sc.timescale)?bc&&!isNaN(bc.mediaStartTime)?bc.mediaStartTime:0:Sc.earliest_presentation_time/Sc.timescale,of=Math.max(Ei,0),dl=q.getCurrentRepresentation();for(let _o=0,gd=bo.length;_o<gd;_o++){const uh=Ye.getEvent(bo[_o],cl,of,dl);uh&&_c.push(uh)}return _c}catch{return[]}}(_i,Is,ui,Nr);Ce.trigger(x.default.INBAND_EVENTS,{events:Ko},{streamId:Ue.id})}}}function tn(){const Ft=rt.getTime();me.get().streaming.buffer.flushBufferAtTrackSwitch&&rt.seek(Ft+.001,!1,!0),an(Ft),C.setSeekTarget(Ft),$.startScheduleTimer()}function Je(){const Ft=rt.getTime(),bn=C.getContinuousBufferTimeForTargetTime(Ft);an(isNaN(bn)?Ft:bn),$.startScheduleTimer()}function Ot(Ft){Ft&&!isNaN(Ft.time)&&(an(Ft.time),C.setSeekTarget(Ft.time))}function an(Ft){R=Ft,Se=!0}return z={checkAndHandleCompletedBuffering:Vt,clearScheduleTimer:zn,createBufferSinks:function(Ft,bn){const Fn=Bn();return Fn?Promise.resolve(Fn):C?C.createBufferSink(P,Ft,bn):Promise.resolve(null)},dischargePreBuffer:function(){C.dischargePreBuffer()},finalisePlayList:function(Ft,bn){le.pushPlayListTraceMetrics(Ft,bn)},getAllMediaInfos:function(){return B},getBuffer:Bn,getBufferController:function(){return C},getBufferLevel:function(){return C?C.getBufferLevel():0},getFragmentModel:function(){return Pe},getMediaInfo:function(){return P},getMediaSource:function(){return C.getMediaSource()},getRepresentation:Ut,getRepresentationController:function(){return q},getScheduleController:Xn,getStreamId:de,getStreamInfo:function(){return Ue},getType:we,initialize:function(Ft,bn,Fn){re=Ln(Ie).create({events:x.default,eventBus:Ce,streamInfo:Ue,timelineConverter:Ee,dashConstants:M.default,segmentBaseController:D.segmentBaseController,type:ye}),F=vn(Ie).create({streamInfo:Ue,type:ye,timelineConverter:Ee,dashMetrics:le,mediaPlayerModel:Ve,baseURLController:D.baseURLController,errHandler:he,segmentsController:re,settings:me,boxParser:Te,events:x.default,eventBus:Ce,errors:ce,debug:(0,$e.default)(Ie).getInstance(),dashConstants:M.default,constants:j.default,urlUtils:Ne(Ie).getInstance()}),Q=Ue.manifestInfo.isDynamic,F.initialize(Q),Le.registerStreamType(ye,z),q=An(Ie).create({streamInfo:Ue,type:ye,abrController:Le,dashMetrics:le,playbackController:rt,timelineConverter:Ee,dashConstants:M.default,events:x.default,eventBus:Ce,errors:ce,isDynamic:Q,adapter:Ye,segmentsController:re}),C=function(ci,_i){let ui=null;return ci?(ui=ci!==j.default.TEXT||_i?Mt(Ie).create({abrController:Le,capabilities:ie,errHandler:he,fragmentModel:Pe,manifestModel:Ge,mediaController:ze,mediaPlayerModel:Ve,playbackController:rt,representationController:q,settings:me,streamInfo:Ue,textController:je,type:ci}):sn(Ie).create({errHandler:he,fragmentModel:Pe,mimeType:nt,settings:me,streamInfo:Ue,textController:je,type:ci}),ui):(he.error(new Ze.default(ce.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,ce.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+"not properly defined")),null)}(ye,Fn),C&&C.initialize(Ft),$=On(Ie).create({streamInfo:Ue,type:ye,mimeType:nt,adapter:Ye,dashMetrics:le,mediaPlayerModel:Ve,fragmentModel:Pe,abrController:Le,playbackController:rt,textController:je,mediaController:ze,bufferController:C,representationController:q,settings:me}),$.initialize(bn),R=0,Se=!1,ve=!1},isBufferingCompleted:hn,prepareInnerPeriodPlaybackSeeking:function(Ft){return new Promise(bn=>{if(C.hasBufferAtTime(Ft.seekTime))return C.pruneBuffer(),tt(C.getContinuousBufferTimeForTargetTime(Ft.seekTime))&&C.setIsBufferingCompleted(!0),void bn();zn(),Pe.abortRequests(),C.prepareForPlaybackSeek().then(()=>{const Fn=C.getAllRangesWithSafetyFactor(Ft.seekTime);return C.clearBuffers(Fn)}).then(()=>{const Fn=C.getContinuousBufferTimeForTargetTime(Ft.seekTime);if(tt(Fn))C.setIsBufferingCompleted(!0),bn();else{const ci=isNaN(Fn)?Ft.seekTime:Fn;an(ci),C.setSeekTarget(ci);const _i=[];_i.push(C.updateAppendWindow());const ui=Ut();_i.push(C.updateBufferTimestampOffset(ui)),Promise.all(_i).then(()=>{$.setInitSegmentRequired(!0),$.setCheckPlaybackQuality(!1),$.startScheduleTimer(),bn()})}}).catch(Fn=>{ne.error(Fn)})})},prepareOuterPeriodPlaybackSeeking:function(){return new Promise((Ft,bn)=>{try{zn(),Pe.abortRequests(),C.prepareForPlaybackSeek().then(()=>C.pruneAllSafely()).then(()=>{Ft()})}catch(Fn){bn(Fn)}})},prepareQualityChange:function(Ft){Ft.newRepresentation&&(oe&&oe.enabled&&ne.warn(`Canceling queued representation switch to ${oe.newRepresentation.id} for ${ye}`),Ft.isAdaptationSetSwitch?(ne.debug(`Preparing quality switch to different AdaptationSet for type ${ye}`),function(bn){const Fn=bn.newRepresentation;X=!0,zn(),$.setSwitchTrack(!0);const ci=Fn.mediaInfo;ri(ci),_n(new jn({newMediaInfo:ci,newRepresentation:Fn})).then(()=>{pi(bn)})}(Ft)):(ne.debug(`Preparing quality within the same AdaptationSet for type ${ye}`),function(bn){const Fn=bn.newRepresentation;X=!0,zn(),q.prepareQualityChange(Fn),pi(bn)}(Ft)))},prepareTrackSwitch:function(Ft){let bn=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new Promise(Fn=>{ne.debug(`Preparing track switch for type ${ye}`);const ci=ye===j.default.TEXT||bn||me.get().streaming.trackSwitchMode[ye]===j.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&rt.getTimeToStreamEnd(Ue)>me.get().streaming.buffer.stallThreshold;C.getIsBufferingCompleted()&&!ci?function(_i){return new Promise(ui=>{const Nr=q.getCurrentRepresentation();C.prepareForNonReplacementTrackSwitch(Nr,_i).then(()=>{Ce.trigger(x.default.BUFFERING_COMPLETED,{},{streamId:Ue.id,mediaType:ye}),ui()}).catch(()=>{Ce.trigger(x.default.BUFFERING_COMPLETED,{},{streamId:Ue.id,mediaType:ye}),ui()})})}(Ft).then(()=>{Fn()}):($.setSwitchTrack(!0),ci?function(_i){return new Promise(ui=>{Ce.trigger(x.default.BUFFER_REPLACEMENT_STARTED,{mediaType:ye,streamId:Ue.id},{mediaType:ye,streamId:Ue.id}),Pe.abortRequests();const Nr=Ut();C.prepareForReplacementTrackSwitch(Nr,_i).then(()=>{tn(),ui()}).catch(()=>{tn(),ui()})})}(Ft).then(()=>{Fn()}):function(_i){return new Promise(ui=>{const Nr=()=>{const Is=Pe.getRequests({state:Qe.FRAGMENT_MODEL_LOADING});if(Is&&Is.length!==0)Ce.once(xe.default.FRAGMENT_LOADING_COMPLETED,Nr,z);else{const Ko=Ut();C.prepareForNonReplacementTrackSwitch(Ko,_i).then(()=>{Je(),ui()}).catch(Ta=>{ne.error(Ta),Je(),ui()})}};Nr()})}(Ft).then(()=>{Fn()}))})},probeNextRequest:function(){const Ft=Ut();return F.getNextSegmentRequestIdempotent(P,Ft)},reset:function(Ft,bn){F&&F.reset(),C&&(C.reset(Ft,bn),C=null),$&&($.reset(),$=null),q&&(q.reset(),q=null),re&&(re=null),Le&&Le.unRegisterStreamType(de(),ye),Ce.off(x.default.INIT_FRAGMENT_NEEDED,mt,z),Ce.off(x.default.MEDIA_FRAGMENT_NEEDED,Tt,z),Ce.off(x.default.INIT_FRAGMENT_LOADED,$n,z),Ce.off(x.default.MEDIA_FRAGMENT_LOADED,Yn,z),Ce.off(x.default.BUFFER_LEVEL_STATE_CHANGED,yn,z),Ce.off(x.default.BUFFER_CLEARED,Cn,z),Ce.off(x.default.SEEK_TARGET,Ot,z),Ce.off(x.default.FRAGMENT_LOADING_ABANDONED,en,z),Ce.off(x.default.FRAGMENT_LOADING_COMPLETED,gn,z),Ce.off(x.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,qn,z),Ce.off(x.default.SET_NON_FRAGMENTED_TEXT,Kt,z),Ce.off(x.default.QUOTA_EXCEEDED,kn,z),Ce.off(x.default.SOURCE_BUFFER_ERROR,Kn,z),Ce.off(x.default.BYTES_APPENDED_END_FRAGMENT,Zn,z),qe(),ye=null,Ue=null},selectMediaInfo:_n,setExplicitBufferingTime:an,setMediaInfoArray:function(Ft){B=Ft},setMediaSource:function(Ft){return C.setMediaSource(Ft,P)},setTrackSwitchInProgress:function(Ft){ke=Ft},updateStreamInfo:function(Ft){return Ue=Ft,hn()?Promise.resolve():C.updateAppendWindow()}},ne=(0,$e.default)(Ie).getInstance().getLogger(z),qe(),Ce.on(x.default.INIT_FRAGMENT_NEEDED,mt,z),Ce.on(x.default.MEDIA_FRAGMENT_NEEDED,Tt,z),Ce.on(x.default.INIT_FRAGMENT_LOADED,$n,z),Ce.on(x.default.MEDIA_FRAGMENT_LOADED,Yn,z),Ce.on(x.default.BUFFER_LEVEL_STATE_CHANGED,yn,z),Ce.on(x.default.BUFFER_CLEARED,Cn,z),Ce.on(x.default.SEEK_TARGET,Ot,z),Ce.on(x.default.FRAGMENT_LOADING_ABANDONED,en,z),Ce.on(x.default.FRAGMENT_LOADING_COMPLETED,gn,z),Ce.on(x.default.QUOTA_EXCEEDED,kn,z),Ce.on(x.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,qn,z),Ce.on(x.default.SET_NON_FRAGMENTED_TEXT,Kt,z),Ce.on(x.default.SOURCE_BUFFER_ERROR,Kn,z),Ce.on(x.default.BYTES_APPENDED_END_FRAGMENT,Zn,z),z}cr.__dashjs_factory_name="StreamProcessor";var Ni=ue.default.getClassFactory(cr),Ir=class{constructor(){this.streamId=null,this.segmentType=null,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representation=null,this.endFragment=null}},it=n(7263);function Br(){let D,C;function R(){C&&(C.onloadend=C.onerror=C.onprogress=C.onload=null,C.abort(),C=null)}return D={load:function(P,F){if(C=null,C=new XMLHttpRequest,C.open(P.method,P.url,!0),P.responseType&&(C.responseType=P.responseType),P.headers)for(let z in P.headers){let Q=P.headers[z];Q&&C.setRequestHeader(z,Q)}return C.withCredentials=P.credentials==="include",C.timeout=P.timeout,C.onload=function(){F.url=this.responseURL,F.status=this.status,F.statusText=this.statusText,F.headers=it.default.parseHttpHeaders(this.getAllResponseHeaders()),F.data=this.response},P.customData&&(C.onloadend=P.customData.onloadend,C.onprogress=P.customData.onprogress,C.onabort=P.customData.onabort,C.ontimeout=P.customData.ontimeout),C.send(),P.customData.abort=R.bind(this),!0},abort:R,getXhr:function(){return C},reset:function(){R(),D=null},resetInitialSettings:function(){R()}},D}Br.__dashjs_factory_name="XHRLoader";var Ws=ue.default.getClassFactory(Br);function Xs(){const D=this.context,C=(0,ge.default)(D).getInstance();let R,P,F;function z(q,$,re){q.customData.reader.read().then(re).catch(function(){Q(q)})}function Q(q){q.customData.onloadend&&q.customData.onloadend()}function ne(){return typeof performance<"u"&&typeof performance.now=="function"?performance.now():Date.now()}function B(){if(this.customData.abortController)this.customData.abortController.abort();else if(this.customData.reader)try{this.customData.reader.cancel(),this.onabort()}catch{}}function oe(q,$){try{if((q=q.filter(re=>re.bytes>$/4/q.length)).length>1){let re=0;const ve=(q[q.length-1].timestamp-q[0].timestamp)/q.length;return q.forEach((Se,ke)=>{const Ie=q[ke+1];if(Ie){const Ce=Ie.timestamp-Se.timestamp;re+=Ce<ve?Ce:0}}),re}return null}catch{return null}}function X(q,$){return 8*q/$}return F=(0,$e.default)(D).getInstance().getLogger(R),R={abort:B,calculateDownloadedTime:oe,load:function(q,$){const re=function(ke){const Ie=new Headers;if(ke.headers)for(let Ce in ke.headers){let Le=ke.headers[Ce];Le&&Ie.append(Ce,Le)}return Ie}(q),ve=function(ke){let Ie;return typeof window.AbortController=="function"&&(Ie=new AbortController,ke.customData.abortController=Ie,Ie.signal.onabort=ke.customData.onabort),ke.customData.abort=B.bind(ke),Ie}(q),Se=function(ke,Ie,Ce){return new Request(ke.url,{method:ke.method,headers:Ie,credentials:ke.credentials,signal:Ce?Ce.signal:void 0})}(q,re,ve);fetch(Se).then(ke=>{(function(Ie,Ce,Le){(function(rt,fe){rt.status=fe.status,rt.statusText=fe.statusText,rt.url=fe.url;const me={};for(const Ue of fe.headers.keys())me[Ue]=fe.headers.get(Ue);rt.headers=me})(Le,Ie),Ie.ok||Ce.customData.onloadend();let Ye=0,Te=!1,ie=new Uint8Array,le=0;Ce.customData.reader=Ie.body.getReader();let he=[],Pe=[],Ge=[],ze=!0;const Ve=C.get().streaming.abr.throughput.lowLatencyDownloadTimeCalculationMode,nt=rt=>{let{value:fe,done:me}=rt;me?function(){if(ie){const Ue=function(){let je=null;return Ve===j.default.LOW_LATENCY_DOWNLOAD_TIME_CALCULATION_MODE.MOOF_PARSING?je=function(){const Ee=function(ye,de){try{let we,qe;if(we=ye.slice(0,-1),qe=de.slice(0,-1),we.length!==qe.length&&F.warn(`[FetchLoader] Moof and Mdat data arrays have different lengths. Moof: ${we.length}, Mdat: ${qe.length}`),we.length<=1)return null;let tt=[],mt=0,Tt=0;for(let Vt=0;Vt<we.length;Vt++)if(we[Vt]&&qe[Vt]){let Jt=qe[Vt].timestamp-we[Vt].timestamp;if(Jt>1){const yn=X(qe[Vt].bytes,Jt);tt.push(yn),Tt=0}else{Tt===0&&(Tt=we[Vt].timestamp,mt=0);let yn=qe[Vt].timestamp-Tt;if(yn>1){mt+=qe[Vt].bytes;const Cn=X(mt,yn);tt.push(Cn),Tt=0}else mt+=qe[Vt].bytes}}return tt.length>0?tt.reduce((Vt,Jt)=>Vt+Jt,0)/tt.length:null}catch{return null}}(Pe,Ge);return Ee?8*Ye/Ee:null}():Ve===j.default.LOW_LATENCY_DOWNLOAD_TIME_CALCULATION_MODE.DOWNLOADED_DATA&&(je=oe(he,Ye)),je}();Ce.customData.onprogress({loaded:Ye,total:Ye,lengthComputable:!0,time:Ue}),Le.data=ie.buffer}Ce.customData.onloadend()}():(fe&&fe.length>0&&function(Ue){ie=function(Ee,ye){if(Ee.length===0)return ye;const de=new Uint8Array(Ee.length+ye.length);return de.set(Ee),de.set(ye,Ee.length),de}(ie,Ue),Ye+=Ue.length,he.push({timestamp:ne(),bytes:Ue.length}),Ve===j.default.LOW_LATENCY_DOWNLOAD_TIME_CALCULATION_MODE.MOOF_PARSING&&ze&&P.findLastTopIsoBoxCompleted(["moof"],ie,le).found&&(ze=!1,Pe.push({timestamp:ne()}));const je=P.findLastTopIsoBoxCompleted(["moov","mdat"],ie,le);je.found?function(Ee){const ye=function(de){let we;return de===ie.length?(we=ie,ie=new Uint8Array):(we=new Uint8Array(ie.subarray(0,de)),ie=ie.subarray(de)),we}(Ee.startOffsetOfLastFoundTargetBox+Ee.sizeOfLastFoundTargetBox);Ve!==j.default.LOW_LATENCY_DOWNLOAD_TIME_CALCULATION_MODE.MOOF_PARSING||ze||(ze=!0,Ge.push({timestamp:ne(),bytes:ye.length})),Ce.customData.onprogress({data:ye.buffer,lengthComputable:!1,noTrace:!0}),le=0}(je):function(Ee){le=Ee.startOffsetOfLastCompletedBox+Ee.sizeOfLastCompletedBox,Te||(Ce.customData.onprogress({lengthComputable:!1,noTrace:!0}),Te=!0)}(je)}(fe),z(Ce,0,nt))};z(Ce,0,nt)})(ke,q,$)}).catch(()=>{Q(q)})},reset:function(){},setConfig:function(q){P=q.boxParser}},R}Xs.__dashjs_factory_name="FetchLoader";var Po=ue.default.getClassFactory(Xs),es=n(913),Tr=class{constructor(){this.period=null,this.index=-1,this.type=null}};class ia{constructor(C,R,P,F){this.url=C||"",this.serviceLocation=R||C||"",this.dvbPriority=P||1,this.dvbWeight=F||1,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0,this.queryParams={}}}ia.DEFAULT_DVB_PRIORITY=1,ia.DEFAULT_DVB_WEIGHT=1;var Da=ia,Li=class{constructor(){this.schemeIdUri=null,this.value=null,this.id=null}init(D){D&&(this.schemeIdUri=D.schemeIdUri?D.schemeIdUri:null,this.value=D.value?D.value.toString():null,this.id=D.id?D.id:null,D[M.default.DVB_URL]&&(this.dvbUrl=D[M.default.DVB_URL]),D[M.default.DVB_MIMETYPE]&&(this.dvbMimeType=D[M.default.DVB_MIMETYPE]),D[M.default.DVB_FONTFAMILY]&&(this.dvbFontFamily=D[M.default.DVB_FONTFAMILY]))}inArray(D){return!!D&&D.some(C=>this.schemeIdUri===C.schemeIdUri&&(this.value?this.value.toString().match(C.value):"".match(C.value)))}},Ya=class extends Li{constructor(){super(),this.version=null,this.sessionID=null,this.contentID=null,this.mode=null,this.keys=null,this.includeInRequests=null}init(D){super.init(D),D&&(this.version=D.version,this.sessionID=D.sessionID,this.contentID=D.contentID,this.mode=D.mode??"query",this.keys=D.keys?D.keys.split(" "):null,this.includeInRequests=D.includeInRequests?D.includeInRequests.split(" "):["segment"],this.schemeIdUri=D.schemeIdUri)}},nu=class{constructor(){this.adaptationSets=null,this.adaptationSetsArray=[],this.cmcdParameters=null,this.serviceLocations=null,this.serviceLocationsArray=[]}},el=class extends Li{constructor(){super(),this.ref=null,this.refId=null,this.robustness=null,this.keyId=null,this.cencDefaultKid=null,this.pssh=null,this.pro=null,this.laUrl=null}init(D){super.init(D),D&&(this.ref=D.hasOwnProperty(M.default.REF)?D[M.default.REF]:null,this.refId=D.hasOwnProperty(M.default.REF_ID)?D[M.default.REF_ID]:null,this.robustness=D.hasOwnProperty(M.default.ROBUSTNESS)?D[M.default.ROBUSTNESS]:null,this.cencDefaultKid=D.hasOwnProperty(M.default.CENC_DEFAULT_KID)?D[M.default.CENC_DEFAULT_KID]:null,this.pssh=D.hasOwnProperty(M.default.PSSH)?D[M.default.PSSH]:null,this.pro=D.hasOwnProperty(M.default.PRO)?D[M.default.PRO]:null,this.laUrl=D.hasOwnProperty(M.default.LA_URL)?D[M.default.LA_URL]:D.hasOwnProperty(M.default.LA_URL_LOWER_CASE)?D[M.default.LA_URL_LOWER_CASE]:null)}mergeAttributesFromReference(D){["schemeIdUri","value","id","robustness","cencDefaultKid","pro","pssh","laUrl"].forEach(C=>{this[C]===null&&(this[C]=D[C])})}},ca=class{constructor(){this.defaultServiceLocation=null,this.defaultServiceLocationArray=[],this.queryBeforeStart=!1,this.serverUrl=null,this.clientRequirement=!0}},In=class{constructor(){this.type="",this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN,this.parsedMessageData=null}},ii=class{constructor(){this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri="",this.presentationTimeOffset=0}},Si=class{constructor(){this.availabilityEndTime=Number.POSITIVE_INFINITY,this.availabilityStartTime=null,this.manifest=null,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.mediaPresentationDuration=NaN,this.minimumUpdatePeriod=NaN,this.publishTime=null,this.suggestedPresentationDelay=0,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY}},hr=class{constructor(D,C){this.url=D||"",this.serviceLocation=C||null,this.queryParams={}}},Bi=n(7393),ms=class{constructor(D,C,R){this.url=D||"",this.serviceLocation=C||null,this.ttl=R||NaN,this.queryParams={}}};class er{constructor(){this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null,this.nextPeriodId=null,this.isEncrypted=!1}}er.DEFAULT_ID="defaultId";var sr=er,Qi=class{constructor(){this.id=null,this.inband=!1,this.type="encoder",this.applicationScheme=null,this.wallClockTime=null,this.presentationTime=NaN,this.UTCTiming=null}},ur=class{constructor(){this.absoluteIndex=NaN,this.adaptation=null,this.availabilityTimeComplete=!0,this.availabilityTimeOffset=0,this.bandwidth=NaN,this.bitrateInKbit=NaN,this.bitsPerPixel=NaN,this.codecFamily=null,this.codecPrivateData=null,this.codecs=null,this.essentialProperties=[],this.fragmentDuration=null,this.frameRate=null,this.height=NaN,this.id=null,this.indexRange=null,this.initialization=null,this.maxPlayoutRate=NaN,this.mediaFinishedInformation={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN},this.mediaInfo=null,this.mimeType=null,this.mseTimeOffset=NaN,this.pixelsPerSecond=NaN,this.presentationTimeOffset=0,this.qualityRanking=NaN,this.range=null,this.scanType=null,this.segments=null,this.segmentDuration=NaN,this.segmentInfoType=null,this.supplementalProperties=[],this.startNumber=1,this.timescale=1,this.width=NaN,this.endNumber=null}hasInitialization(){return this.initialization!==null||this.range!==null}hasSegments(){return this.segmentInfoType!==M.default.BASE_URL&&this.segmentInfoType!==M.default.SEGMENT_BASE&&!this.indexRange}},Ur=n(5717);function fo(){let D,C,R,P;const F=this.context,z=Ne(F).getInstance(),Q=Number.isInteger||function(fe){return typeof fe=="number"&&isFinite(fe)&&Math.floor(fe)===fe};function ne(fe,me){if(!fe)throw new Error("adaptation is not defined");if(!me)throw new Error("type is not defined");if(fe.Representation&&fe.Representation.length){const je=ie(fe.Representation[0]);if(je&&je.some(Ee=>j.default.THUMBNAILS_SCHEME_ID_URIS.indexOf(Ee.schemeIdUri)>=0))return me===j.default.IMAGE}if(fe.ContentComponent&&fe.ContentComponent.length>0){if(fe.ContentComponent.length>1)return me===j.default.MUXED;if(fe.ContentComponent[0].contentType===me)return!0}const Ue=me===j.default.TEXT?new RegExp("(ttml|vtt|wvtt|stpp)"):new RegExp(me);if(fe.Representation&&fe.Representation.length){const je=fe.Representation[0].codecs;if(Ue.test(je))return!0}if(fe.hasOwnProperty(M.default.MIME_TYPE))return Ue.test(fe.mimeType);if(fe.Representation){let je;for(let Ee=0;Ee<fe.Representation.length;Ee++)if(je=fe.Representation[Ee],je.hasOwnProperty(M.default.MIME_TYPE))return Ue.test(je.mimeType)}return!1}function B(fe){if(!fe)throw new Error("adaptation is not defined");if(fe.hasOwnProperty(M.default.SEGMENT_TEMPLATE)||fe.hasOwnProperty(M.default.SEGMENT_TIMELINE)||fe.hasOwnProperty(M.default.SEGMENT_LIST)||fe.hasOwnProperty(M.default.SEGMENT_BASE))return!0;if(fe.Representation&&fe.Representation.length>0){const me=fe.Representation[0];if(me.hasOwnProperty(M.default.SEGMENT_TEMPLATE)||me.hasOwnProperty(M.default.SEGMENT_TIMELINE)||me.hasOwnProperty(M.default.SEGMENT_LIST)||me.hasOwnProperty(M.default.SEGMENT_BASE))return!0}return!1}function oe(fe){return ne(fe,j.default.VIDEO)}function X(fe){return ne(fe,j.default.TEXT)}function q(fe){return ne(fe,j.default.IMAGE)}function $(fe){return fe&&fe.Representation&&fe.Representation.sort((me,Ue)=>me.bandwidth-Ue.bandwidth),fe}function re(fe,me){return fe&&fe.Period&&Q(me)&&fe.Period[me]?fe.Period[me].AdaptationSet:[]}function ve(fe){return fe&&fe.Period?fe.Period:[]}function Se(fe){const me=ke(fe);return me&&me.length>0}function ke(fe){let me=[];if(!fe)return me;const Ue=Ie(fe);return me=me.concat(Ue),fe.hasOwnProperty(M.default.ADAPTATION_SET)&&fe[M.default.ADAPTATION_SET].length>0&&fe[M.default.ADAPTATION_SET].forEach(je=>{const Ee=Ie(je);me=me.concat(Ee)}),me}function Ie(fe){return fe&&fe.hasOwnProperty(M.default.CONTENT_PROTECTION)&&fe.ContentProtection.length!==0?fe[M.default.CONTENT_PROTECTION].map(me=>{const Ue=new el;return Ue.init(me),Ue}):[]}function Ce(fe){let me=!1;return fe&&fe.hasOwnProperty("type")&&(me=fe.type===M.default.DYNAMIC),me}function Le(fe){if(!fe)return null;const me=fe[M.default.FRAMERATE];if(!me)return null;if(typeof me=="string"&&me.includes("/")){const[Ue,je]=me.split("/").map(Ee=>parseInt(Ee,10));if(!isNaN(Ue)&&!isNaN(je)&&je!==0)return Ue/je}return parseInt(me)}function Ye(fe,me){return me&&me.hasOwnProperty(fe)&&me[fe].length?me[fe].map(Ue=>{const je=new Li;return je.init(Ue),je}):[]}function Te(fe,me){if(!me)return[];let Ue=function(je,Ee){if(!Ee||!Ee.length)return[];let ye=Ee[0][je]||[];return ye.length===0?[]:Ee.length===1?ye:ye.filter(de=>Ee.slice(1).every(we=>we.hasOwnProperty(je)&&we[je].some(qe=>qe.schemeIdUri===de.schemeIdUri&&qe.value===de.value)))}(fe,me[M.default.REPRESENTATION]);return me.hasOwnProperty(fe)&&me[fe].length&&Ue.push(...me[fe]),Ue.map(je=>{const Ee=new Li;return Ee.init(je),Ee})}function ie(fe){return Ye(M.default.ESSENTIAL_PROPERTY,fe)}function le(fe){return Ye(M.default.SUPPLEMENTAL_PROPERTY,fe)}function he(fe){if(!fe||!fe.S)return NaN;let me=fe.S[0],Ue=fe.S[1];return me.hasOwnProperty("d")?me.d:Ue.t-me.t}function Pe(fe){const me=fe.presentationTimeOffset;return fe.adaptation.period.start-me}function Ge(fe,me){if(!fe)throw new Error("Period cannot be null or undefined");let Ue=sr.DEFAULT_ID+"_"+me;return fe.hasOwnProperty(M.default.ID)&&fe.id.toString().length>0&&fe.id!=="__proto__"&&(Ue=fe.id.toString()),Ue}function ze(fe,me,Ue){const je=[];let Ee;if(!fe)return je;for(Ee=0;Ee<fe.length;Ee++){const ye=new ii;if(ye.timescale=1,ye.representation=me,!fe[Ee].hasOwnProperty(j.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");ye.schemeIdUri=fe[Ee].schemeIdUri,fe[Ee].hasOwnProperty(M.default.TIMESCALE)&&(ye.timescale=fe[Ee].timescale),fe[Ee].hasOwnProperty(M.default.VALUE)&&(ye.value=fe[Ee].value),je.push(ye),ye.period=Ue}return je}function Ve(fe){const me=[],Ue=fe.BaseURL||[fe.baseUri];let je=!1;return Ue.some(Ee=>{if(Ee){const ye=new Da;let de=Ee.__text||Ee;return z.isRelative(de)&&(je=!0,fe.baseUri&&(de=z.resolve(de,fe.baseUri))),ye.url=de,Ee.hasOwnProperty(M.default.SERVICE_LOCATION)&&Ee.serviceLocation.length?ye.serviceLocation=Ee.serviceLocation:ye.serviceLocation=de,Ee.hasOwnProperty(M.default.DVB_PRIORITY)&&(ye.dvbPriority=Ee[M.default.DVB_PRIORITY]),Ee.hasOwnProperty(M.default.DVB_WEIGHT)&&(ye.dvbWeight=Ee[M.default.DVB_WEIGHT]),Ee.hasOwnProperty(M.default.AVAILABILITY_TIME_OFFSET)&&(ye.availabilityTimeOffset=Ee[M.default.AVAILABILITY_TIME_OFFSET]),Ee.hasOwnProperty(M.default.AVAILABILITY_TIME_COMPLETE)&&(ye.availabilityTimeComplete=Ee[M.default.AVAILABILITY_TIME_COMPLETE]!=="false"),me.push(ye),je}}),me}function nt(fe){const me=new ca;return me.serverUrl=fe.__text,fe.hasOwnProperty(M.default.DEFAULT_SERVICE_LOCATION)&&(me.defaultServiceLocation=fe[M.default.DEFAULT_SERVICE_LOCATION],me.defaultServiceLocationArray=me.defaultServiceLocation.split(" ")),fe.hasOwnProperty(M.default.QUERY_BEFORE_START)&&(me.queryBeforeStart=fe[M.default.QUERY_BEFORE_START].toLowerCase()==="true"),fe.hasOwnProperty(M.default.CLIENT_REQUIREMENT)&&(me.clientRequirement=fe[M.default.CLIENT_REQUIREMENT].toLowerCase()!=="false"),me}function rt(fe){const me=new nu;return fe.hasOwnProperty(M.default.CMCD_PARAMETERS)&&fe[M.default.CMCD_PARAMETERS].schemeIdUri===j.default.CTA_5004_2023_SCHEME&&(me.cmcdParameters=new Ya,me.cmcdParameters.init(fe[M.default.CMCD_PARAMETERS])),fe.hasOwnProperty(M.default.SERVICE_LOCATIONS)&&fe[M.default.SERVICE_LOCATIONS]!==""&&(me.serviceLocations=fe[M.default.SERVICE_LOCATIONS],me.serviceLocationsArray=me.serviceLocations.toString().split(" ")),fe.hasOwnProperty(M.default.ADAPTATION_SETS)&&fe[M.default.ADAPTATION_SETS]!==""&&(me.adaptationSets=fe[M.default.ADAPTATION_SETS],me.adaptationSetsArray=me.adaptationSets.toString().split(" ")),me}return D={getAccessibilityForAdaptation:function(fe){return fe&&fe.hasOwnProperty(M.default.ACCESSIBILITY)&&fe[M.default.ACCESSIBILITY].length?fe[M.default.ACCESSIBILITY].map(me=>{const Ue=new Li;return Ue.init(me),Ue}):[]},getAdaptationForId:function(fe,me,Ue){const je=re(me,Ue);let Ee,ye;for(Ee=0,ye=je.length;Ee<ye;Ee++)if(je[Ee].hasOwnProperty(M.default.ID)&&je[Ee].id===fe)return je[Ee];return null},getAdaptationForIndex:function(fe,me,Ue){const je=re(me,Ue);return je.length>0&&Q(fe)?je[fe]:null},getAdaptationsForPeriod:function(fe){const me=fe&&Q(fe.index)?fe.mpd.manifest.Period[fe.index]:null,Ue=[];let je,Ee,ye;if(me&&me.AdaptationSet)for(ye=0;ye<me.AdaptationSet.length;ye++)Ee=me.AdaptationSet[ye],je=new Tr,Ee.hasOwnProperty(M.default.ID)&&(je.id=Ee.id),je.index=ye,je.period=fe,ne(Ee,j.default.MUXED)?je.type=j.default.MUXED:ne(Ee,j.default.AUDIO)?je.type=j.default.AUDIO:oe(Ee)?je.type=j.default.VIDEO:X(Ee)?je.type=j.default.TEXT:q(Ee)?je.type=j.default.IMAGE:C.warn("Unknown Adaptation stream type"),Ue.push(je);return Ue},getAdaptationsForType:function(fe,me,Ue){const je=re(fe,me);let Ee,ye;const de=[];for(Ee=0,ye=je.length;Ee<ye;Ee++)ne(je[Ee],Ue)&&de.push($(je[Ee]));return de},getAudioChannelConfigurationForAdaptation:function(fe){return fe&&fe.hasOwnProperty(M.default.AUDIO_CHANNEL_CONFIGURATION)&&fe[M.default.AUDIO_CHANNEL_CONFIGURATION].length?fe[M.default.AUDIO_CHANNEL_CONFIGURATION].map(me=>{const Ue=new Li;return Ue.init(me),Ue}):[]},getAudioChannelConfigurationForRepresentation:function(fe){return fe&&fe.hasOwnProperty(M.default.AUDIO_CHANNEL_CONFIGURATION)&&fe[M.default.AUDIO_CHANNEL_CONFIGURATION].length?fe[M.default.AUDIO_CHANNEL_CONFIGURATION].map(me=>{const Ue=new Li;return Ue.init(me),Ue}):[]},getAvailabilityStartTime:function(fe){return fe&&fe.hasOwnProperty(M.default.AVAILABILITY_START_TIME)&&fe.availabilityStartTime!==null?fe.availabilityStartTime.getTime():null},getBandwidth:function(fe){return fe&&fe.bandwidth?fe.bandwidth:NaN},getBaseURLsFromElement:Ve,getBitrateListForAdaptation:function(fe){const me=$(fe);return(me&&me.Representation?me.Representation:[]).map(Ue=>({bandwidth:Ue.bandwidth,width:Ue.width||0,height:Ue.height||0,scanType:Ue.scanType||null,id:Ue.id||null}))},getCodec:function(fe,me,Ue){let je=null;if(fe&&fe.Representation&&fe.Representation.length>0){const Ee=Q(me)&&me>=0&&me<fe.Representation.length?fe.Representation[me]:fe.Representation[0];Ee&&(je=Ee.mimeType+';codecs="'+Ee.codecs+'"',Ue&&Ee.width!==void 0&&(je+=';width="'+Ee.width+'";height="'+Ee.height+'"'))}return je&&(je=je.replace(/\sprofiles=[^;]*/g,"")),je},getCombinedEssentialPropertiesForAdaptationSet:function(fe){return Te(M.default.ESSENTIAL_PROPERTY,fe)},getCombinedSupplementalPropertiesForAdaptationSet:function(fe){return Te(M.default.SUPPLEMENTAL_PROPERTY,fe)},getContentProtectionByAdaptation:function(fe){return Ie(fe)},getContentProtectionByManifest:function(fe){let me=[];if(!fe)return me;const Ue=Ie(fe);return me=me.concat(Ue),fe.hasOwnProperty(M.default.PERIOD)&&fe[M.default.PERIOD].length>0&&fe[M.default.PERIOD].forEach(je=>{const Ee=ke(je);me=me.concat(Ee)}),me},getContentProtectionByPeriod:ke,getContentSteering:function(fe){if(fe&&fe.hasOwnProperty(M.default.CONTENT_STEERING))return nt(fe[M.default.CONTENT_STEERING][0])},getDuration:function(fe){let me;return me=fe&&fe.hasOwnProperty(M.default.MEDIA_PRESENTATION_DURATION)?fe.mediaPresentationDuration:fe&&fe.type=="dynamic"?Number.POSITIVE_INFINITY:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE,me},getEssentialPropertiesForAdaptationSet:function(fe){return Ye(M.default.ESSENTIAL_PROPERTY,fe)},getEssentialPropertiesForRepresentation:ie,getEventStreamForAdaptationSet:function(fe,me,Ue){let je,Ee,ye;return fe&&fe.Period&&me&&me.period&&Q(me.period.index)&&(Ee=fe.Period[me.period.index],Ee&&Ee.AdaptationSet&&Q(me.index)&&(ye=Ee.AdaptationSet[me.index],ye&&(je=ye.InbandEventStream))),ze(je,null,Ue)},getEventStreamForRepresentation:function(fe,me,Ue){let je,Ee,ye,de;return fe&&fe.Period&&me&&me.adaptation&&me.adaptation.period&&Q(me.adaptation.period.index)&&(Ee=fe.Period[me.adaptation.period.index],Ee&&Ee.AdaptationSet&&Q(me.adaptation.index)&&(ye=Ee.AdaptationSet[me.adaptation.index],ye&&ye.Representation&&Q(me.index)&&(de=ye.Representation[me.index],de&&(je=de.InbandEventStream)))),ze(je,me,Ue)},getEventsForPeriod:function(fe){const me=fe&&fe.mpd&&fe.mpd.manifest?fe.mpd.manifest:null,Ue=me?me.Period:null,je=Ue&&fe&&Q(fe.index)?Ue[fe.index].EventStream:null,Ee=[];let ye,de;if(je)for(ye=0;ye<je.length;ye++){const we=new ii;if(we.period=fe,we.timescale=1,!je[ye].hasOwnProperty(j.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(we.schemeIdUri=je[ye][j.default.SCHEME_ID_URI],je[ye].hasOwnProperty(M.default.TIMESCALE)&&(we.timescale=je[ye][M.default.TIMESCALE]),je[ye].hasOwnProperty(M.default.VALUE)&&(we.value=je[ye][M.default.VALUE]),je[ye].hasOwnProperty(M.default.PRESENTATION_TIME_OFFSET)&&(we.presentationTimeOffset=je[ye][M.default.PRESENTATION_TIME_OFFSET]),de=0;je[ye].Event&&de<je[ye].Event.length;de++){const qe=je[ye].Event[de],tt=new In;tt.presentationTime=0,tt.eventStream=we,qe.hasOwnProperty(M.default.PRESENTATION_TIME)&&(tt.presentationTime=qe.presentationTime);const mt=we.presentationTimeOffset?we.presentationTimeOffset/we.timescale:0;tt.calculatedPresentationTime=tt.presentationTime/we.timescale+fe.start-mt,qe.hasOwnProperty(M.default.DURATION)&&(tt.duration=qe.duration/we.timescale),qe.hasOwnProperty(M.default.ID)?tt.id=parseInt(qe.id):tt.id=null,qe.Signal&&qe.Signal.Binary?tt.messageData=P.decodeArray(qe.Signal.Binary.toString()):tt.messageData=qe.messageData||qe.__cdata||qe.__text,Ee.push(tt)}}return Ee},getFramerate:Le,getId:function(fe){return fe&&fe[M.default.ID]||null},getIndexForAdaptation:function(fe,me,Ue){if(!fe)return-1;const je=re(me,Ue);for(let Ee=0;Ee<je.length;Ee++)if((0,Bi.default)(F).getInstance().areEqual(je[Ee],fe))return Ee;return-1},getIsDynamic:Ce,getIsFragmented:B,getIsText:X,getIsTypeOf:ne,getLabelsForAdaptation:function(fe){if(!fe||!fe.Label)return[];const me=[];for(let Ue=0;Ue<fe.Label.length;Ue++)me.push({lang:fe.Label[Ue].lang,text:fe.Label[Ue].__text||fe.Label[Ue]});return me},getLanguageForAdaptation:function(fe){let me="";return fe&&fe.hasOwnProperty(M.default.LANG)&&(me=fe.lang),me},getLocation:function(fe){return fe&&fe.hasOwnProperty(M.default.LOCATION)?fe[M.default.LOCATION].map(me=>{const Ue=me.__text||me,je=me.hasOwnProperty(M.default.SERVICE_LOCATION)?me[M.default.SERVICE_LOCATION]:null;return new hr(Ue,je)}):[]},getManifestUpdatePeriod:function(fe){let me=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,Ue=NaN;return fe&&fe.hasOwnProperty(M.default.MINIMUM_UPDATE_PERIOD)&&(Ue=fe.minimumUpdatePeriod),isNaN(Ue)?Ue:Math.max(Ue-me,1)},getMimeType:function(fe){return fe&&fe.Representation&&fe.Representation.length>0?fe.Representation[0].mimeType:null},getMpd:function(fe){const me=new Si;return fe&&(me.manifest=fe,fe.hasOwnProperty(M.default.AVAILABILITY_START_TIME)?me.availabilityStartTime=new Date(fe.availabilityStartTime.getTime()):fe.loadedTime&&(me.availabilityStartTime=new Date(fe.loadedTime.getTime())),fe.hasOwnProperty(M.default.AVAILABILITY_END_TIME)&&(me.availabilityEndTime=new Date(fe.availabilityEndTime.getTime())),fe.hasOwnProperty(M.default.MINIMUM_UPDATE_PERIOD)&&(me.minimumUpdatePeriod=fe.minimumUpdatePeriod),fe.hasOwnProperty(M.default.MEDIA_PRESENTATION_DURATION)&&(me.mediaPresentationDuration=fe.mediaPresentationDuration),fe.hasOwnProperty(M.default.SUGGESTED_PRESENTATION_DELAY)&&(me.suggestedPresentationDelay=fe.suggestedPresentationDelay),fe.hasOwnProperty(M.default.TIMESHIFT_BUFFER_DEPTH)&&(me.timeShiftBufferDepth=fe.timeShiftBufferDepth),fe.hasOwnProperty(M.default.MAX_SEGMENT_DURATION)&&(me.maxSegmentDuration=fe.maxSegmentDuration),fe.hasOwnProperty(M.default.PUBLISH_TIME)&&(me.publishTime=new Date(fe.publishTime))),me},getPatchLocation:function(fe){return fe&&fe.hasOwnProperty(M.default.PATCH_LOCATION)?fe[M.default.PATCH_LOCATION].map(me=>{const Ue=me.__text||me,je=me.hasOwnProperty(M.default.SERVICE_LOCATION)?me[M.default.SERVICE_LOCATION]:null;let Ee=me.hasOwnProperty(M.default.TTL)?1e3*parseFloat(me[M.default.TTL]):NaN;return new ms(Ue,je,Ee)}):[]},getProducerReferenceTimesForAdaptation:function(fe){const me=fe&&fe.hasOwnProperty(M.default.PRODUCER_REFERENCE_TIME)?fe[M.default.PRODUCER_REFERENCE_TIME]:[];(fe&&fe.hasOwnProperty(M.default.REPRESENTATION)?fe[M.default.REPRESENTATION]:[]).forEach(je=>{je.hasOwnProperty(M.default.PRODUCER_REFERENCE_TIME)&&me.push(...je[M.default.PRODUCER_REFERENCE_TIME])});const Ue=[];return me.forEach(je=>{const Ee=new Qi;je.hasOwnProperty(M.default.ID)&&(Ee[M.default.ID]=parseInt(je[M.default.ID]),je.hasOwnProperty(M.default.WALL_CLOCK_TIME)&&(Ee[M.default.WALL_CLOCK_TIME]=je[M.default.WALL_CLOCK_TIME],je.hasOwnProperty(M.default.PRESENTATION_TIME)&&(Ee[M.default.PRESENTATION_TIME]=je[M.default.PRESENTATION_TIME],je.hasOwnProperty(M.default.INBAND)&&(Ee[M.default.INBAND]=je[M.default.INBAND]!=="false"),je.hasOwnProperty(M.default.TYPE)&&(Ee[M.default.TYPE]=je[M.default.TYPE]),Ue.push(Ee))))}),Ue},getPublishTime:function(fe){return fe&&fe.hasOwnProperty(M.default.PUBLISH_TIME)?new Date(fe[M.default.PUBLISH_TIME]):null},getRealPeriodForIndex:function(fe,me){const Ue=ve(me);return Ue.length>0&&Q(fe)?Ue[fe]:null},getRealPeriods:ve,getRegularPeriods:function(fe){const me=!!fe&&Ce(fe.manifest),Ue=[];let je,Ee,ye=null,de=null,we=null,qe=null;for(Ee=0,je=fe&&fe.manifest&&fe.manifest.Period?fe.manifest.Period.length:0;Ee<je;Ee++)de=fe.manifest.Period[Ee],de.hasOwnProperty(M.default.START)?(qe=new sr,qe.start=de.start):ye!==null&&ye.hasOwnProperty(M.default.DURATION)&&we!==null?(qe=new sr,qe.start=parseFloat((we.start+we.duration).toFixed(5))):Ee!==0||me||(qe=new sr,qe.start=0),we!==null&&isNaN(we.duration)&&(qe!==null?we.duration=parseFloat((qe.start-we.start).toFixed(5)):C.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),qe!==null&&(qe.id=Ge(de,Ee),qe.index=Ee,qe.mpd=fe,qe.isEncrypted=Se(de),de.hasOwnProperty(M.default.DURATION)&&(qe.duration=de.duration),we&&(we.nextPeriodId=qe.id),Ue.push(qe),ye=de,we=qe),de=null,qe=null;return Ue.length===0||we!==null&&isNaN(we.duration)&&(we.duration=parseFloat((function(tt){(function(){if(!R||!R.hasOwnProperty("error"))throw new Error(j.default.MISSING_CONFIG_ERROR)})();const mt=Ce(tt.mpd.manifest);let Tt;return tt.mpd.manifest.mediaPresentationDuration?Tt=tt.mpd.manifest.mediaPresentationDuration:tt.duration?Tt=tt.duration:mt?Tt=Number.POSITIVE_INFINITY:R.error(new Ze.default(ce.MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",tt)),Tt}(we)-we.start).toFixed(5))),Ue},getRepresentationCount:function(fe){return fe&&fe.Representation?fe.Representation.length:0},getRepresentationFor:function(fe,me){return me&&me.Representation&&me.Representation.length>0&&Q(fe)?me.Representation[fe]:null},getRepresentationSortFunction:function(){return(fe,me)=>fe.bandwidth-me.bandwidth},getRepresentationsForAdaptation:function(fe,me){const Ue=[],je=function(de){if(de&&de.period&&Q(de.period.index)){const we=de.period.mpd.manifest.Period[de.period.index];if(we&&we.AdaptationSet&&Q(de.index))return $(we.AdaptationSet[de.index])}}(fe);let Ee,ye;if(je&&je.Representation){if(fe&&fe.period&&Q(fe.period.index)){const de=Ve(fe.period.mpd.manifest);de&&(ye=de[0])}for(let de=0,we=je.Representation.length;de<we;++de){const qe=je.Representation[de],tt=new ur;if(tt.index=de,tt.adaptation=fe,tt.mediaInfo=me,qe.hasOwnProperty(M.default.ID)&&(tt.id=qe.id),qe.hasOwnProperty(M.default.CODECS)&&(tt.codecs=qe.codecs,tt.codecFamily=it.default.getCodecFamily(tt.codecs)),qe.hasOwnProperty(M.default.MIME_TYPE)&&(tt.mimeType=qe[M.default.MIME_TYPE]),qe.hasOwnProperty(M.default.CODEC_PRIVATE_DATA)&&(tt.codecPrivateData=qe.codecPrivateData),qe.hasOwnProperty(M.default.BANDWITH)&&(tt.bandwidth=qe.bandwidth,tt.bitrateInKbit=qe.bandwidth/1e3),qe.hasOwnProperty(M.default.WIDTH)&&(tt.width=qe.width),qe.hasOwnProperty(M.default.HEIGHT)&&(tt.height=qe.height),qe.hasOwnProperty(M.default.SCAN_TYPE)&&(tt.scanType=qe.scanType),qe.hasOwnProperty(M.default.FRAMERATE)&&(tt.frameRate=Le(qe)),qe.hasOwnProperty(M.default.QUALITY_RANKING)&&(tt.qualityRanking=qe[M.default.QUALITY_RANKING]),qe.hasOwnProperty(M.default.MAX_PLAYOUT_RATE)&&(tt.maxPlayoutRate=qe.maxPlayoutRate),qe.hasOwnProperty(M.default.SEGMENT_BASE)?(Ee=qe.SegmentBase,tt.segmentInfoType=M.default.SEGMENT_BASE):qe.hasOwnProperty(M.default.SEGMENT_LIST)?(Ee=qe.SegmentList,Ee.hasOwnProperty(M.default.SEGMENT_TIMELINE)?tt.segmentInfoType=M.default.SEGMENT_TIMELINE:tt.segmentInfoType=M.default.SEGMENT_LIST):qe.hasOwnProperty(M.default.SEGMENT_TEMPLATE)?(Ee=qe.SegmentTemplate,Ee.hasOwnProperty(M.default.SEGMENT_TIMELINE)?tt.segmentInfoType=M.default.SEGMENT_TIMELINE:tt.segmentInfoType=M.default.SEGMENT_TEMPLATE,Ee.hasOwnProperty(M.default.INITIALIZATION_MINUS)&&(tt.initialization=Ee.initialization.split("$Bandwidth$").join(qe.bandwidth).split("$RepresentationID$").join(qe.id))):tt.segmentInfoType=M.default.BASE_URL,tt.essentialProperties=ie(qe),tt.supplementalProperties=le(qe),Ee){if(Ee.hasOwnProperty(M.default.INITIALIZATION)){const mt=Ee.Initialization;mt.hasOwnProperty(M.default.SOURCE_URL)&&(tt.initialization=mt.sourceURL),mt.hasOwnProperty(M.default.RANGE)&&(tt.range=mt.range)}else X(je)&&B(je)&&je.mimeType&&je.mimeType.indexOf("application/mp4")===-1&&(tt.range=0);Ee.hasOwnProperty(M.default.TIMESCALE)&&(tt.timescale=Ee.timescale),Ee.hasOwnProperty(M.default.DURATION)?tt.segmentDuration=Ee.duration/tt.timescale:qe.hasOwnProperty(M.default.SEGMENT_TEMPLATE)&&(Ee=qe.SegmentTemplate,Ee.hasOwnProperty(M.default.SEGMENT_TIMELINE)&&(tt.segmentDuration=he(Ee.SegmentTimeline)/tt.timescale)),Ee.hasOwnProperty(M.default.MEDIA)&&(tt.media=Ee.media),Ee.hasOwnProperty(M.default.START_NUMBER)&&(tt.startNumber=parseInt(Ee.startNumber)),Ee.hasOwnProperty(M.default.INDEX_RANGE)&&(tt.indexRange=Ee.indexRange),Ee.hasOwnProperty(M.default.PRESENTATION_TIME_OFFSET)&&(tt.presentationTimeOffset=Ee.presentationTimeOffset/tt.timescale),Ee.hasOwnProperty(M.default.AVAILABILITY_TIME_OFFSET)?tt.availabilityTimeOffset=Ee.availabilityTimeOffset:ye&&ye.availabilityTimeOffset!==void 0&&(tt.availabilityTimeOffset=ye.availabilityTimeOffset),Ee.hasOwnProperty(M.default.AVAILABILITY_TIME_COMPLETE)?tt.availabilityTimeComplete=Ee.availabilityTimeComplete!=="false":ye&&ye.availabilityTimeComplete!==void 0&&(tt.availabilityTimeComplete=ye.availabilityTimeComplete),Ee.hasOwnProperty(M.default.END_NUMBER)&&(tt.endNumber=Ee[M.default.END_NUMBER])}tt.mseTimeOffset=Pe(tt),tt.path=[fe.period.index,fe.index,de],isNaN(tt.width)||isNaN(tt.height)||isNaN(tt.frameRate)||(tt.pixelsPerSecond=Math.max(1,tt.width*tt.height*tt.frameRate),isNaN(tt.bandwidth)||(tt.bitsPerPixel=tt.bandwidth/tt.pixelsPerSecond)),Ue.push(tt)}}return Ue},getRolesForAdaptation:function(fe){return fe&&fe.hasOwnProperty(M.default.ROLE)&&fe[M.default.ROLE].length?fe[M.default.ROLE].map(me=>{const Ue=new Li;return Ue.init(me),Ue}):[]},getSegmentAlignment:function(fe){return!(!fe||!fe.hasOwnProperty(M.default.SEGMENT_ALIGNMENT))&&fe[M.default.SEGMENT_ALIGNMENT]==="true"},getSelectionPriority:function(fe){try{const me=fe&&fe.selectionPriority!==void 0?parseInt(fe.selectionPriority):1;return isNaN(me)?1:me}catch{return 1}},getServiceDescriptions:function(fe){const me=[];if(fe&&fe.hasOwnProperty(M.default.SERVICE_DESCRIPTION))for(const Ue of fe.ServiceDescription){let je=null,Ee=null,ye=null,de=null,we=null,qe=null,tt=null,mt=null;for(const Tt in Ue)if(Ue.hasOwnProperty(Tt))if(Tt===M.default.ID)je=Ue[Tt];else if(Tt===M.default.SERVICE_DESCRIPTION_SCOPE)Ee=Ue[Tt].schemeIdUri;else if(Tt===M.default.SERVICE_DESCRIPTION_LATENCY)ye={target:parseInt(Ue[Tt].target),max:parseInt(Ue[Tt].max),min:parseInt(Ue[Tt].min),referenceId:parseInt(Ue[Tt].referenceId)};else if(Tt===M.default.SERVICE_DESCRIPTION_PLAYBACK_RATE)de={max:parseFloat(Ue[Tt].max),min:parseFloat(Ue[Tt].min)};else if(Tt===M.default.SERVICE_DESCRIPTION_OPERATING_QUALITY)we={mediaType:Ue[Tt].mediaType,max:parseInt(Ue[Tt].max),min:parseInt(Ue[Tt].min),target:parseInt(Ue[Tt].target),type:Ue[Tt].type,maxQualityDifference:parseInt(Ue[Tt].maxQualityDifference)};else if(Tt===M.default.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH)qe={mediaType:Ue[Tt].mediaType,max:parseInt(Ue[Tt].max),min:parseInt(Ue[Tt].min),target:parseInt(Ue[Tt].target)};else if(Tt===M.default.CONTENT_STEERING){let Vt=Ue[Tt];Vt=Array.isArray(Vt)?Vt.at(Vt.length-1):Vt,tt=nt(Vt)}else Tt===M.default.CLIENT_DATA_REPORTING&&(mt=rt(Ue[Tt]));me.push({id:je,schemeIdUri:Ee,latency:ye,playbackRate:de,operatingQuality:we,operatingBandwidth:qe,contentSteering:tt,clientDataReporting:mt})}return me},getSubSegmentAlignment:function(fe){return!(!fe||!fe.hasOwnProperty(M.default.SUB_SEGMENT_ALIGNMENT))&&fe[M.default.SUB_SEGMENT_ALIGNMENT]==="true"},getSuggestedPresentationDelay:function(fe){return fe&&fe.hasOwnProperty(M.default.SUGGESTED_PRESENTATION_DELAY)?fe.suggestedPresentationDelay:null},getSupplementalPropertiesForAdaptationSet:function(fe){return Ye(M.default.SUPPLEMENTAL_PROPERTY,fe)},getSupplementalPropertiesForRepresentation:le,getUTCTimingSources:function(fe){const me=Ce(fe),Ue=!!fe&&fe.hasOwnProperty(M.default.AVAILABILITY_START_TIME),je=fe?fe.UTCTiming:null,Ee=[];return(me||Ue)&&je&&je.forEach(function(ye){const de=new Ur.default;ye.hasOwnProperty(j.default.SCHEME_ID_URI)&&(de.schemeIdUri=ye.schemeIdUri,ye.hasOwnProperty(M.default.VALUE)&&(de.value=ye.value.toString(),Ee.push(de)))}),Ee},getViewpointForAdaptation:function(fe){return fe&&fe.hasOwnProperty(M.default.VIEWPOINT)&&fe[M.default.VIEWPOINT].length?fe[M.default.VIEWPOINT].map(me=>{const Ue=new Li;return Ue.init(me),Ue}):[]},hasProfile:function(fe,me){let Ue=!1;return fe&&fe.profiles&&fe.profiles.length>0&&(Ue=fe.profiles.indexOf(me)!==-1),Ue},isPeriodEncrypted:Se,setConfig:function(fe){fe&&(fe.errHandler&&(R=fe.errHandler),fe.BASE64&&(P=fe.BASE64))}},C=(0,$e.default)(F).getInstance().getLogger(D),D}fo.__dashjs_factory_name="DashManifestModel";var Ms=ue.default.getSingletonFactory(fo);const Mo={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"},Qs=Mo,Cr="v",Ra="l",Zu="d",ec="s";class La{constructor(C,R){Array.isArray(C)&&(C=C.map(P=>P instanceof La?P:new La(P))),this.value=C,this.params=R}}const Js="Dict";function tc(D,C,R,P){return new Error(`failed to ${D} "${F=C,Array.isArray(F)?JSON.stringify(F):F instanceof Map?"Map{}":F instanceof Set?"Set{}":typeof F=="object"?JSON.stringify(F):String(F)}" as ${R}`,{cause:P});var F}function Ns(D,C,R){return tc("serialize",D,C,R)}class Pa{constructor(C){this.description=C}}const Er="Bare Item",ra="Boolean",da="Byte Sequence",sa="Integer";function iu(D){return D<-999999999999999||999999999999999<D}function jr(D){if(iu(D))throw Ns(D,sa);return D.toString()}function ys(D,C){if(D<0)return-ys(-D,C);const R=Math.pow(10,C);if(Math.abs(D*R%1-.5)<Number.EPSILON){const P=Math.floor(D*R);return(P%2==0?P:P+1)/R}return Math.round(D*R)/R}const ru="Decimal";function Wr(D){const C=ys(D,3);if(Math.floor(Math.abs(C)).toString().length>12)throw Ns(D,ru);const R=C.toString();return R.includes(".")?R:`${R}.0`}const ho="String",_s=/[\x00-\x1f\x7f]+/;function aa(D){return D.description||D.toString().slice(7,-1)}const oa="Token";function No(D){const C=aa(D);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(C)===!1)throw Ns(C,oa);return C}function qr(D){switch(typeof D){case"number":if(!Number.isFinite(D))throw Ns(D,Er);return Number.isInteger(D)?jr(D):Wr(D);case"string":return function(C){if(_s.test(C))throw Ns(C,ho);return`"${C.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}(D);case"symbol":return No(D);case"boolean":return function(C){if(typeof C!="boolean")throw Ns(C,ra);return C?"?1":"?0"}(D);case"object":if(D instanceof Date)return function(C){return`@${jr(C.getTime()/1e3)}`}(D);if(D instanceof Uint8Array)return function(C){if(ArrayBuffer.isView(C)===!1)throw Ns(C,da);return`:${R=C,btoa(String.fromCharCode(...R))}:`;var R}(D);if(D instanceof Pa)return No(D);default:throw Ns(D,Er)}}const ts="Key";function Wa(D){if(/^[a-z*][a-z0-9\-_.*]*$/.test(D)===!1)throw Ns(D,ts);return D}function $c(D){return D==null?"":Object.entries(D).map(C=>{let[R,P]=C;return P===!0?`;${Wa(R)}`:`;${Wa(R)}=${qr(P)}`}).join("")}function wu(D){return D instanceof La?`${qr(D.value)}${$c(D.params)}`:qr(D)}const zs=D=>Math.round(D),Iu=D=>100*zs(D/100),zi={br:zs,d:zs,bl:Iu,dl:Iu,mtp:Iu,nor:(D,C)=>(C!=null&&C.baseUrl&&(D=function(R,P){const F=new URL(R),z=new URL(P);if(F.origin!==z.origin)return R;const Q=F.pathname.split("/").slice(1),ne=z.pathname.split("/").slice(1,-1);for(;Q[0]===ne[0];)Q.shift(),ne.shift();for(;ne.length;)ne.shift(),Q.unshift("..");return Q.join("/")}(D,C.baseUrl)),encodeURIComponent(D)),rtp:Iu,tb:zs};function ds(D){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return D?function(R,P){return function(F){let z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{whitespace:!0};if(typeof F!="object")throw Ns(F,Js);const Q=F instanceof Map?F.entries():Object.entries(F),ne=z!=null&&z.whitespace?" ":"";return Array.from(Q).map(B=>{let[oe,X]=B;X instanceof La==0&&(X=new La(X));let q=Wa(oe);var $;return X.value===!0?q+=$c(X.params):(q+="=",Array.isArray(X.value)?q+=`(${($=X).value.map(wu).join(" ")})${$c($.params)}`:q+=wu(X)),q}).join(`,${ne}`)}(R,P)}(function(R,P){const F={};if(R==null||typeof R!="object")return F;const z=Object.keys(R).sort(),Q=Object.assign({},zi,P==null?void 0:P.formatters),ne=P==null?void 0:P.filter;return z.forEach(B=>{if(ne!=null&&ne(B))return;let oe=R[B];const X=Q[B];X&&(oe=X(oe,P)),B==="v"&&oe===1||B=="pr"&&oe===1||function(q){return typeof q=="number"?Number.isFinite(q):q!=null&&q!==""&&q!==!1}(oe)&&(function(q){return q==="ot"||q==="sf"||q==="st"}(B)&&typeof oe=="string"&&(oe=new Pa(oe)),F[B]=oe)}),F}(D,C),Object.assign({whitespace:!1},C)):""}const qh="CMCD-Object",zd="CMCD-Request",nc="CMCD-Session",Of="CMCD-Status",Hh={[qh]:["br","d","ot","tb"],[zd]:["bl","dl","mtp","nor","nrr","su"],[nc]:["cid","pr","sf","sid","st","v"],[Of]:["bs","rtp"]},Ff="segment";function Ss(){let D,C,R,P,F,z,Q,ne,B,oe,X,q,$,re,ve,Se,ke=this.context,Ie=(0,K.default)(ke).getInstance(),Ce=(0,ge.default)(ke).getInstance(),Le=(0,$e.default)(ke).getInstance();function Ye(){P={pr:1,nor:null,st:null,sf:null,sid:`${it.default.generateUuid()}`,cid:null},$={},q={},re={},X=void 0,ve=void 0,Se=!1,he()}function Te(){he()}function ie(){ve||(ve=Date.now())}function le(){ve&&!P.msd&&(P.msd=Date.now()-ve)}function he(){if(!Q)return;const de=Q.getStreamController();if(!de||typeof de.getActiveStream!="function")return;const we=de.getActiveStream();we&&(oe=we.getStreamProcessors())}function Pe(de){try{const we=ze(),qe=we.version?we.keys:Ce.get().streaming.cmcd.enabledKeys;return Object.keys(de).filter(tt=>qe.includes(tt)).reduce((tt,mt)=>(tt[mt]=de[mt],tt),{})}catch{return de}}function Ge(){const de=ze();return function(we){if(Object.keys(we).length){if(parseInt(we.version)!==1)return R.error("version parameter must be defined in 1."),!1;if(!we.keys)return R.error("keys parameter must be defined."),!1}const qe=we.version,tt=Ce.get().streaming.cmcd&&Ce.get().streaming.cmcd.enabled;return qe||tt}(de)&&function(we){let qe=Ce.get().streaming.cmcd.includeInRequests;we.version&&(qe=we.includeInRequests??[Ff]);const tt=j.default.CMCD_AVAILABLE_REQUESTS,mt=qe.filter(Tt=>!tt.includes(Tt));return mt.length===qe.length?(R.error("None of the request types are supported."),!1):(mt.map(Tt=>{R.warn(`request type ${Tt} is not supported.`)}),!0)}(de)&&function(we){const qe=j.default.CMCD_AVAILABLE_KEYS,tt=j.default.CMCD_V2_AVAILABLE_KEYS,mt=we.version?we.keys:Ce.get().streaming.cmcd.enabledKeys,Tt=Ce.get().streaming.cmcd.version,Vt=mt.filter(Jt=>!(qe.includes(Jt)||Tt===2&&tt.includes(Jt)));return Vt.length===mt.length&&mt.length>0?(R.error(`None of the keys are implemented for CMCD version ${Tt}.`),!1):(Vt.map(Jt=>{R.warn(`key parameter ${Jt} is not implemented for CMCD version ${Tt}.`)}),!0)}(de)}function ze(){let de={};if(ne){const we=ne.getServiceDescriptionSettings();Ce.get().streaming.cmcd.applyParametersFromMpd&&we.clientDataReporting&&we.clientDataReporting.cmcdParameters&&(de=we.clientDataReporting.cmcdParameters)}return de}function Ve(de){try{let qe=null;if(de.type,(we=de.mediaType)!==j.default.VIDEO&&we!==j.default.AUDIO||X&&X!=j.default.AUDIO||(X=we),function(tt){const mt=ze();let Tt=Ce.get().streaming.cmcd.includeInRequests;mt.version&&(Tt=mt.includeInRequests?mt.includeInRequests:[Ff]);const Vt={[Xe.HTTPRequest.INIT_SEGMENT_TYPE]:"segment",[Xe.HTTPRequest.MEDIA_SEGMENT_TYPE]:"segment",[Xe.HTTPRequest.XLINK_EXPANSION_TYPE]:"xlink",[Xe.HTTPRequest.MPD_TYPE]:"mpd",[Xe.HTTPRequest.CONTENT_STEERING_TYPE]:"steering",[Xe.HTTPRequest.OTHER_TYPE]:"other"};return Tt.some(Jt=>Vt[tt]===Jt)}(de.type)){if(de.type===Xe.HTTPRequest.MPD_TYPE)return function(){const tt=fe();return tt.ot=Qs.MANIFEST,tt}();if(de.type===Xe.HTTPRequest.MEDIA_SEGMENT_TYPE)return rt(de.mediaType),nt(de,de.mediaType);if(de.type===Xe.HTTPRequest.INIT_SEGMENT_TYPE)return function(){const tt=fe();return tt.ot=Qs.INIT,tt.su=!0,tt}();if(de.type===Xe.HTTPRequest.OTHER_TYPE||de.type===Xe.HTTPRequest.XLINK_EXPANSION_TYPE)return function(){const tt=fe();return tt.ot=Qs.OTHER,tt}();if(de.type===Xe.HTTPRequest.LICENSE)return function(){const tt=fe();return tt.ot=Qs.KEY,tt}();if(de.type===Xe.HTTPRequest.CONTENT_STEERING_TYPE)return function(tt){const mt=X?nt(tt,X):fe();return mt.ot=Qs.OTHER,mt}(de)}return qe}catch{return null}var we}function nt(de,we){var _n;rt(we);const qe=fe(),tt=function(ri){try{return parseInt(ri.bandwidth/1e3)}catch{return null}}(de),mt=function(ri){try{return isNaN(ri.duration)?NaN:Math.round(1e3*ri.duration)}catch{return null}}(de),Tt=function(ri){try{return 100*parseInt(B.getSafeAverageThroughput(ri)/100)}catch{return null}}(we),Vt=function(ri){try{const pi=P.pr,Gi=z.getCurrentBufferLevel(ri);return isNaN(pi)||isNaN(Gi)?null:100*parseInt(Gi/pi*10)}catch{return null}}(we),Jt=me(we),yn=function(ri){try{const pi=F.getPossibleVoRepresentationsFilteredBySettings(ri).map(Gi=>Gi.bitrateInKbit);return Math.max(...pi)}catch{return null}}((_n=de.representation)==null?void 0:_n.mediaInfo),Cn=P.pr,Kn=function(ri){if(oe&&oe.length!==0){for(let pi of oe)if(pi.getType()===ri)return pi.probeNextRequest()}}(we);let Zn;we===j.default.VIDEO&&(Zn=Qs.VIDEO),we===j.default.AUDIO&&(Zn=Qs.AUDIO),we===j.default.TEXT&&(Zn=de.representation.mediaInfo.mimeType==="application/mp4"?Qs.TIMED_TEXT:Qs.CAPTION);let gi=Ce.get().streaming.cmcd.rtp;return gi||(gi=function(ri){try{let pi=Q.getPlaybackRate();pi||(pi=1);let{bandwidth:Gi,mediaType:Ki,representation:bi,duration:Nt}=ri;if(!bi.mediaInfo)return NaN;let rn=me(Ki);rn===0&&(rn=500);let en=Gi*Nt/1e3/(rn/pi/1e3),gn=Ce.get().streaming.cmcd.rtpSafetyFactor&&!isNaN(Ce.get().streaming.cmcd.rtpSafetyFactor)?Ce.get().streaming.cmcd.rtpSafetyFactor:5;return 100*(parseInt(en*gn/100)+1)}catch{return NaN}}(de)),isNaN(gi)||(qe.rtp=gi),Kn&&(de.url!==Kn.url?qe.nor=encodeURIComponent(it.default.getRelativeUrl(de.url,Kn.url)):Kn.range&&(qe.nrr=Kn.range)),tt&&(qe.br=tt),Zn&&(qe.ot=Zn),isNaN(mt)||(qe.d=mt),isNaN(Tt)||(qe.mtp=Tt),isNaN(Vt)||(qe.dl=Vt),isNaN(Jt)||(qe.bl=Jt),isNaN(yn)||(qe.tb=yn),isNaN(Cn)||Cn===1||(qe.pr=Cn),$[we]&&(qe.bs=!0,$[we]=!1),!q[we]&&re[we]||(qe.su=!0,q[we]=!1,re[we]=!0),qe}function rt(de){re.hasOwnProperty(de)||(re[de]=!1),q.hasOwnProperty(de)||(q[de]=!1),$.hasOwnProperty(de)||($[de]=!1)}function fe(){const de=ze(),we={};let qe=Ce.get().streaming.cmcd.cid?Ce.get().streaming.cmcd.cid:P.cid;if(qe=de.contentID?de.contentID:qe,we.v=Ce.get().streaming.cmcd.version??1,we.sid=Ce.get().streaming.cmcd.sid?Ce.get().streaming.cmcd.sid:P.sid,we.sid=de.sessionID?de.sessionID:we.sid,we.sid=`${we.sid}`,qe&&(we.cid=`${qe}`),isNaN(P.pr)||P.pr===1||P.pr===null||(we.pr=P.pr),P.st&&(we.st=P.st),P.sf&&(we.sf=P.sf),we.v===2){let tt=1e3*Q.getCurrentLiveLatency();isNaN(tt)||(we.ltc=tt);const mt=P.msd;Se||isNaN(mt)||(we.msd=mt,Se=!0)}return we}function me(de){try{const we=z.getCurrentBufferLevel(de);return isNaN(we)?null:100*parseInt(10*we)}catch{return null}}function Ue(de){try{P.pr=de.playbackRate}catch{}}function je(de){try{const we=D.getIsDynamic(de.data)?Ra:Cr,qe=de.protocol&&de.protocol==="MSS"?ec:Zu;P.st=`${we}`,P.sf=`${qe}`}catch{}}function Ee(de){try{de.state&&de.mediaType&&de.state===xe.default.BUFFER_EMPTY&&($[de.mediaType]||($[de.mediaType]=!0),q[de.mediaType]||(q[de.mediaType]=!0))}catch{}}function ye(){for(let de in $)$.hasOwnProperty(de)&&($[de]=!0);for(let de in q)q.hasOwnProperty(de)&&(q[de]=!0)}return C={getCmcdData:Ve,getQueryParameter:function(de){try{if(Ge()){const we=Ve(de),qe=ds(Pe(we));return Ie.trigger(es.default.CMCD_DATA_GENERATED,{url:de.url,mediaType:de.mediaType,cmcdData:we,cmcdString:qe}),{key:"CMCD",value:qe}}return null}catch{return null}},getHeaderParameters:function(de){try{if(Ge()){const we=Ve(de),qe=function(tt){let mt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const Tt={};if(!tt)return Tt;const Vt=Object.entries(tt),Jt=Object.entries(Hh).concat(Object.entries((mt==null?void 0:mt.customHeaderMap)||{})),yn=Vt.reduce((Cn,Kn)=>{var Zn,gi;const[_n,ri]=Kn,pi=((Zn=Jt.find(Gi=>Gi[1].includes(_n)))===null||Zn===void 0?void 0:Zn[0])||zd;return(gi=Cn[pi])!==null&&gi!==void 0||(Cn[pi]={}),Cn[pi][_n]=ri,Cn},{});return Object.entries(yn).reduce((Cn,Kn)=>{let[Zn,gi]=Kn;return Cn[Zn]=ds(gi,mt),Cn},Tt)}(Pe(we),Ce.get().streaming.cmcd.version===1?{}:{customHeaderMap:{[zd]:["ltc"],[nc]:["msd"]}});return Ie.trigger(es.default.CMCD_DATA_GENERATED,{url:de.url,mediaType:de.mediaType,cmcdData:we,headers:qe}),qe}return null}catch{return null}},getCmcdParametersFromManifest:ze,setConfig:function(de){de&&(de.abrController&&(F=de.abrController),de.dashMetrics&&(z=de.dashMetrics),de.throughputController&&(B=de.throughputController),de.playbackController&&(Q=de.playbackController),de.serviceDescriptionController&&(ne=de.serviceDescriptionController))},reset:function(){Ie.off(xe.default.PLAYBACK_RATE_CHANGED,Ue,this),Ie.off(xe.default.MANIFEST_LOADED,je,this),Ie.off(xe.default.BUFFER_LEVEL_STATE_CHANGED,Ee,C),Ie.off(xe.default.PLAYBACK_SEEKED,ye,C),Ie.off(xe.default.PLAYBACK_STARTED,ie,C),Ie.off(xe.default.PLAYBACK_PLAYING,le,C),Ye()},initialize:function(de){Ie.on(xe.default.PLAYBACK_RATE_CHANGED,Ue,C),Ie.on(xe.default.MANIFEST_LOADED,je,C),Ie.on(xe.default.BUFFER_LEVEL_STATE_CHANGED,Ee,C),Ie.on(xe.default.PLAYBACK_SEEKED,ye,C),Ie.on(xe.default.PERIOD_SWITCH_COMPLETED,Te,C),de?Ie.on(xe.default.MANIFEST_LOADING_STARTED,ie,C):Ie.on(xe.default.PLAYBACK_STARTED,ie,C),Ie.on(xe.default.PLAYBACK_PLAYING,le,C)},isCmcdEnabled:Ge},D=Ms(ke).getInstance(),R=Le.getLogger(C),Ye(),C}Ss.__dashjs_factory_name="CmcdModel";var tl=ue.default.getSingletonFactory(Ss);const ic="CMSD-Dynamic",Kc="CMSD-Static",Oo=Mo;function Kr(D,C,R){return tc("parse",D,C,R)}const su="List";function Yr(D,C){return{value:D,src:C}}const Yc="Inner List",Uf="Date",Cu=`${sa} or ${ru}`;function Fo(D){let C,R=1,P="";const F=Kr(D,Cu);if(D[0]==="-"&&(R=-1,D=D.substring(1)),D.length<=0)throw F;const z=/^(\d+)?/g,Q=z.exec(D);if(Q[0].length===0)throw F;if(P+=Q[1],(D=D.substring(z.lastIndex))[0]==="."){if(P.length>12)throw F;const ne=/^(\.\d+)?/g,B=ne.exec(D);if(D=D.substring(ne.lastIndex),B[0].length===0||B[1].length>4||(P+=B[1],P.length>16))throw F;C=parseFloat(P)*R}else{if(P.length>15)throw F;if(C=parseInt(P)*R,iu(C))throw Kr(P,Cu)}return Yr(C,D)}function po(D,C){const R=D[0];if(R==='"')return function(P){let F="",z=0;if(P[z]!=='"')throw Kr(P,ho);for(z++;P.length>z;){if(P[z]==="\\"){if(P.length<=z+1||(z++,P[z]!=='"'&&P[z]!=="\\"))throw Kr(P,ho);F+=P[z]}else{if(P[z]==='"')return Yr(F,P.substring(++z));if(_s.test(P[z]))throw Kr(P,ho);F+=P[z]}z++}throw Kr(P,ho)}(D);if(/^[-0-9]/.test(R))return Fo(D);if(R==="?")return function(P){let F=0;if(P[F]!=="?")throw Kr(P,ra);if(F++,P[F]==="1")return Yr(!0,P.substring(++F));if(P[F]==="0")return Yr(!1,P.substring(++F));throw Kr(P,ra)}(D);if(R===":")return function(P){if(P[0]!==":"||(P=P.substring(1)).includes(":")===!1)throw Kr(P,da);const F=/(^.*?)(:)/g,z=F.exec(P)[1];return P=P.substring(F.lastIndex),Yr(new Uint8Array([...atob(z)].map(Q=>Q.charCodeAt(0))),P)}(D);if(/^[a-zA-Z*]/.test(R))return function(P,F){if(/^[a-zA-Z*]$/.test(P[0])===!1)throw Kr(P,oa);const z=/^([!#$%&'*+\-.^_`|~\w:/]+)/g,Q=z.exec(P)[1];return P=P.substring(z.lastIndex),Yr(Symbol.for(Q),P)}(D);if(R==="@")return function(P){let F=0;if(P[F]!=="@")throw Kr(P,Uf);F++;const z=Fo(P.substring(F));if(Number.isInteger(z.value)===!1)throw Kr(P,Uf);return Yr(new Date(1e3*z.value),z.src)}(D);throw Kr(D,Er)}function js(D){let C=0;if(/^[a-z*]$/.test(D[C])===!1)throw Kr(D,ts);let R="";for(;D.length>C;){if(/^[a-z0-9_\-.*]$/.test(D[C])===!1)return Yr(R,D.substring(C));R+=D[C],C++}return Yr(R,D.substring(C))}function Ma(D,C){let R;for(;D.length>0&&D[0]===";";){const P=js(D=D.substring(1).trim()),F=P.value;let z=!0;if((D=P.src)[0]==="="){const Q=po(D=D.substring(1));z=Q.value,D=Q.src}R==null&&(R={}),R[F]=z}return Yr(R,D)}function Uo(D,C){const R=po(D),P=Ma(D=R.src);return D=P.src,Yr(new La(R.value,P.value),D)}function fa(D,C){return D[0]==="("?function(R,P){if(R[0]!=="(")throw Kr(R,Yc);R=R.substring(1);const F=[];for(;R.length>0;){if((R=R.trim())[0]===")"){const Q=Ma(R=R.substring(1));return Yr(new La(F,Q.value),Q.src)}const z=Uo(R);if(F.push(z.value),(R=z.src)[0]!==" "&&R[0]!==")")throw Kr(R,Yc)}throw Kr(R,Yc)}(D):Uo(D)}const jd=Kc.toLowerCase(),rc=ic.toLowerCase(),sc=["mb","st","sf","v"],au="stream",ku={video:Oo.VIDEO,audio:Oo.AUDIO,text:Oo.TIMED_TEXT,stream:au};function Il(){const D=this.context,C=(0,K.default)(D).getInstance();let R,P,F,z;function Q(){F={},z={}}function ne($){$&&Object.keys($).forEach(re=>{sc.includes(re)||delete $[re]})}function B($){try{return(re=$)?Object.entries(function(ve,Se){try{const{src:ke,value:Ie}=function(Ce,Le){const Ye={};for(;Ce.length>0;){let Te;const ie=js(Ce),le=ie.value;if((Ce=ie.src)[0]==="="){const he=fa(Ce.substring(1),Le);Te=he.value,Ce=he.src}else{const he=Ma(Ce,Le);Te=new La(!0,he.value),Ce=he.src}if(Ye[le]=Te,(Ce=Ce.trim()).length===0)return Yr(Ye,Ce);if(Ce[0]!==","||(Ce=Ce.substring(1).trim()).length===0||Ce[0]===",")throw Kr(Ce,Js)}return Yr(Ye,Ce)}(ve.trim(),Se);if(ke!=="")throw Kr(ke,Js);return Ie}catch(ke){throw Kr(ve,Js,ke)}}(re)).reduce((ve,Se)=>{let[ke,Ie]=Se;const{value:Ce}=Ie;return ve[ke]=typeof Ce=="symbol"?aa(Ce):Ce,ve},{}):{}}catch(ve){P.error("Failed to parse CMSD-Static response header value:",ve)}var re}function oe($){try{const ve=(re=$)?function(ke,Ie){try{const{src:Ce,value:Le}=function(Ye,Te){const ie=[];for(;Ye.length>0;){const le=fa(Ye,Te);if(ie.push(le.value),(Ye=le.src.trim()).length===0)return Yr(ie,Ye);if(Ye[0]!==","||(Ye=Ye.substring(1).trim()).length===0||Ye[0]===",")throw Kr(Ye,su)}return Yr(ie,Ye)}(ke.trim(),Ie);if(Ce!=="")throw Kr(Ce,su);return Le}catch(Ce){throw Kr(ke,su,Ce)}}(re):[],Se=ve[ve.length-1];return(Se==null?void 0:Se.params)||{}}catch(ve){return P.error("Failed to parse CMSD-Dynamic response header value:",ve),{}}var re}function X($){return ku[$]||Oo.OTHER}function q($,re,ve){const Se=$===Kc?F:z,ke=Se[re]||{},Ie=Se[au]||{};return ke[ve]||Ie[ve]}return R={setConfig:function(){},initialize:function(){},reset:function(){Q()},parseResponseHeaders:function($,re){let ve=null,Se=null;for(const Ie in $){const Ce=$[Ie];switch(Ie){case jd:ve=B(Ce),C.trigger(x.default.CMSD_STATIC_HEADER,ve);break;case rc:Se||(Se=oe(Ce))}}let ke=au;return ve&&ve.ot?ke=ve.ot:re&&(ke=X(re)),ne(F[ke]),ne(z[ke]),ve&&(F[ke]=Object.assign(F[ke]||{},ve)),Se&&(z[ke]=Object.assign(z[ke]||{},Se)),{static:ve,dynamic:Se}},getMaxBitrate:function($){let re=X($);return q(ic,re,"mb")||-1},getEstimatedThroughput:function($){let re=X($);return q(ic,re,"etp")||null},getResponseDelay:function($){let re=X($);return q(ic,re,"rd")||null},getRoundTripTime:function($){let re=X($);return q(ic,re,"rtt")||null}},P=(0,$e.default)(D).getInstance().getLogger(R),Q(),R}Il.__dashjs_factory_name="CmsdModel";var Du=ue.default.getSingletonFactory(Il),nl=n(1926);function ac(){let D,C;function R(){C={}}return D={reset:function(){R()},processResponseHeaders:function(P){if(!(P&&P.headers&&P.request&&P.request.url))return;const F=P.headers[j.default.COMMON_ACCESS_TOKEN_HEADER];if(F){const z=it.default.getHostFromUrl(P.request.url);z&&(C[z]=F)}},getCommonAccessTokenForUrl:function(P){if(!P)return null;const F=it.default.getHostFromUrl(P);return F?C[F]?C[F]:null:void 0}},R(),D}ac.__dashjs_factory_name="CommonAccessTokenController";var Na=ue.default.getSingletonFactory(ac);function Oa(){let D,C;return D={setConfig:function(R){R&&R.serviceDescriptionController&&(C=R.serviceDescriptionController)},isAdaptationsIncluded:function(R){var F;const{adaptationSetsArray:P}=((F=C==null?void 0:C.getServiceDescriptionSettings())==null?void 0:F.clientDataReporting)??{};return!P||(P==null?void 0:P.length)===0||P.includes(R)},isServiceLocationIncluded:function(R,P){var z;if(R===Xe.HTTPRequest.CONTENT_STEERING_TYPE)return!0;const{serviceLocationsArray:F}=((z=C==null?void 0:C.getServiceDescriptionSettings())==null?void 0:z.clientDataReporting)??{};return!F||(F==null?void 0:F.length)===0||F.includes(P)}},D}Oa.__dashjs_factory_name="ClientDataReportingController";var qd=ue.default.getSingletonFactory(Oa);function Ru(){let D,C,R;const P=this.context;function F(z,Q,ne,B,oe){var q;const X=function($,re){let ve=[];return ve=re===M.default.PERIOD?$[M.default.SUPPLEMENTAL_PROPERTY]||[]:[...$[M.default.ESSENTIAL_PROPERTY]||[],...$[M.default.SUPPLEMENTAL_PROPERTY]||[]],ve.find(Se=>Se.schemeIdUri===j.default.URL_QUERY_INFO_SCHEME&&Se.UrlQueryInfo||Se.schemeIdUri===j.default.EXT_URL_QUERY_INFO_SCHEME&&Se.ExtUrlQueryInfo)}(Q,oe);(function($,re,ve,Se){ve.initialQueryString="";let ke="";const Ie=($==null?void 0:$.ExtUrlQueryInfo)||($==null?void 0:$.UrlQueryInfo);ke=Ie&&Ie.queryString?re&&re.length>0?re+"&"+Ie.queryString:Ie.queryString:re,(Ie==null?void 0:Ie.useMPDUrlQuery)==="true"&&Se&&(ke=ke?ke+"&"+Se:Se),ve.initialQueryString=ke})(X,B.initialQueryString,z,ne),function($,re,ve){var ke,Ie;if(!$)return void(re.finalQueryString=ve);const Se=((ke=$==null?void 0:$.ExtUrlQueryInfo)==null?void 0:ke.queryTemplate)||((Ie=$==null?void 0:$.UrlQueryInfo)==null?void 0:Ie.queryTemplate)||"";re.finalQueryString=Se===M.default.QUERY_PART?re==null?void 0:re.initialQueryString:""}(X,z,B.finalQueryString),z.sameOriginOnly=(q=X==null?void 0:X.ExtUrlQueryInfo)==null?void 0:q.sameOriginOnly,z.queryParams=it.default.parseQueryParams(z==null?void 0:z.finalQueryString),z.includeInRequests=function($,re){var ve;return $?(ve=$.ExtUrlQueryInfo)!=null&&ve.includeInRequests?$.ExtUrlQueryInfo.includeInRequests.split(" "):[M.default.SEGMENT_TYPE]:re}(X,B.includeInRequests)}return C=(0,$e.default)(P).getInstance().getLogger(D),D={getFinalQueryString:function(z){try{if(!R)return null;if(z.type===Xe.HTTPRequest.MEDIA_SEGMENT_TYPE||z.type===Xe.HTTPRequest.INIT_SEGMENT_TYPE){const Q=z.representation;if(!Q)return null;const ne=Q.adaptation,B=ne.period,oe=R.period[B.index].adaptation[ne.index].representation[Q.index],X=new URL(z.url),q=!oe.sameOriginOnly||R.origin===X.origin;if(oe.includeInRequests.includes(M.default.SEGMENT_TYPE)&&q)return oe.queryParams}else if(z.type===Xe.HTTPRequest.MPD_TYPE){if([M.default.MPD_TYPE,M.default.MPD_PATCH_TYPE].some(Q=>R.includeInRequests.includes(Q)))return R.queryParams}else if(z.type===Xe.HTTPRequest.CONTENT_STEERING_TYPE&&R.includeInRequests.includes(M.default.STEERING_TYPE))return R.queryParams}catch(Q){return C.error(Q),null}},createFinalQueryStrings:function(z){R={origin:new URL(z.url).origin,period:[]};const Q=z.url.split("?")[1];F(R,z,Q,{initialQueryString:"",includeInRequests:[]},M.default.MPD),z.Period.forEach(ne=>{const B={adaptation:[]};F(B,ne,Q,R,M.default.PERIOD),ne.AdaptationSet.forEach(oe=>{const X={representation:[]};F(X,oe,Q,B,M.default.ADAPTATION_SET),oe.Representation.forEach(q=>{const $={};F($,q,Q,X,M.default.REPRESENTATION),X.representation.push($)}),B.adaptation.push(X)}),R.period.push(B)})}},D}Ru.__dashjs_factory_name="ExtUrlQueryInfoController";var Cl=ue.default.getSingletonFactory(Ru),oc=class{constructor(D){this.url=D.url,this.method=D.method,this.responseType=D.responseType!==void 0?D.responseType:null,this.headers=D.headers!==void 0?D.headers:{},this.credentials=D.credentials!==void 0?D.credentials:null,this.mode=D.mode!==void 0?D.mode:null,this.timeout=D.timeout!==void 0?D.timeout:0,this.cmcd=D.cmcd!==void 0?D.cmcd:null,this.customData=D.customData!==void 0?D.customData:null}},Bf=class{constructor(D){this.request=D.request,this.url=D.url!==void 0?D.url:null,this.redirected=D.redirected!==void 0&&D.redirected,this.status=D.status!==void 0?D.status:null,this.statusText=D.statusText!==void 0?D.statusText:"",this.type=D.type!==void 0?D.type:"",this.headers=D.headers!==void 0?D.headers:{},this.data=D.data!==void 0?D.data:null,this.resourceTiming=D.resourceTiming!==void 0?D.resourceTiming:null}};function Wc(D){D=D||{};const C=this.context,R=D.errHandler,P=D.dashMetrics,F=D.mediaPlayerModel,z=D.boxParser,Q=D.errors,ne=D.requestTimeout||0,B=(0,K.default)(C).getInstance(),oe=(0,ge.default)(C).getInstance();let X,q,$,re,ve,Se,ke,Ie,Ce,Le,Ye,Te,ie,le;function he(Pe,Ge){const ze=function(){fe()},Ve=function(_n){const ri=new Date;we&&(we=!1,(!_n.lengthComputable||_n.lengthComputable&&_n.total!==_n.loaded)&&(ye.firstByteDate=ri,Jt.resourceTiming.responseStart=ri.getTime())),_n.lengthComputable&&(ye.bytesLoaded=Jt.length=_n.loaded,ye.bytesTotal=Jt.resourceTiming.encodedBodySize=_n.total,Jt.length=_n.total,Jt.resourceTiming.encodedBodySize=_n.loaded),_n.noTrace||(de.push({s:tt,d:_n.time?_n.time:ri.getTime()-tt.getTime(),b:[_n.loaded?_n.loaded-mt:0],t:_n.throughput}),ye.traces=de,tt=ri,mt=_n.loaded),Tt&&(clearTimeout(Tt),Tt=null),oe.get().streaming.fragmentRequestProgressTimeout>0&&(Tt=setTimeout(function(){le.warn("Abort request "+Vt.url+" due to progress timeout"),Cn.abort(Vt),ze()},oe.get().streaming.fragmentRequestProgressTimeout)),Pe.progress&&_n&&Pe.progress(_n)},nt=function(){fe(!0)},rt=function(_n){let ri;if(_n.lengthComputable){let pi=_n.loaded/_n.total*100;ri="Request timeout: loaded: "+_n.loaded+", out of: "+_n.total+" : "+pi.toFixed(3)+"% Completed"}else ri="Request timeout: non-computable download size";le.warn(ri)},fe=function(){let _n=arguments.length>0&&arguments[0]!==void 0&&arguments[0];q.indexOf(Vt)!==-1&&q.splice(q.indexOf(Vt),1),Tt&&(clearTimeout(Tt),Tt=null),Ye.processResponseHeaders(Jt),me(),Ue(),function(ri){const pi=Le.getResponseInterceptors();return pi?pi.reduce((Gi,Ki)=>Gi.then(bi=>Ki(bi)),Promise.resolve(ri)):Promise.resolve(ri)}(Jt).then(ri=>{if(Jt=ri,function(pi,Gi,Ki){const bi=pi.customData.request,Nt=oe.get().streaming.cmsd&&oe.get().streaming.cmsd.enabled?ke.parseResponseHeaders(Gi.headers,bi.mediaType):null;P.addHttpRequest(bi,Gi.url,Gi.status,Gi.headers,Ki,Nt)}(Vt,Jt,de),_n)Pe.abort&&Pe.abort(ye);else if(ye.type===Xe.HTTPRequest.MPD_TYPE&&(P.addManifestUpdate(ye),B.trigger(x.default.MANIFEST_LOADING_FINISHED,{requestObject:ye})),Jt.status>=200&&Jt.status<=299&&Jt.data)Pe.success&&Pe.success(Jt.data,Jt.statusText,Jt.url),Pe.complete&&Pe.complete(ye,Jt.statusText);else{try{Jt.status===404&&oe.get().streaming.utcSynchronization.enableBackgroundSyncAfterSegmentDownloadError&&ye.type===Xe.HTTPRequest.MEDIA_SEGMENT_TYPE&&F.getRetryAttemptsForType(Xe.HTTPRequest.MEDIA_SEGMENT_TYPE)===Ge&&B.trigger(x.default.ATTEMPT_BACKGROUND_SYNC)}catch{}Ee()}})},me=function(){ye.startDate=qe,ye.endDate=new Date,ye.firstByteDate=ye.firstByteDate||qe},Ue=function(){Jt.resourceTiming.responseEnd=Date.now(),function(_n,ri){if(!oe.get().streaming.abr.throughput.useResourceTimingApi||typeof performance>"u"||_n.range)return;const pi=performance.getEntriesByType("resource");if(pi===void 0||pi.length<=0)return;let Gi=0,Ki=null;for(;Gi<pi.length;){if(pi[Gi].name===_n.url){Ki=pi[Gi];break}Gi+=1}(function(bi){return bi&&!isNaN(bi.responseStart)&&bi.responseStart>0&&!isNaN(bi.responseEnd)&&bi.responseEnd>0&&!isNaN(bi.transferSize)&&bi.transferSize>0})(Ki)&&(_n.customData.request.resourceTimingValues=Ki,ri.resourceTiming.startTime=Ki.startTime,ri.resourceTiming.encodedBodySize=Ki.encodedBodySize,ri.resourceTiming.responseStart=Ki.startTime,ri.resourceTiming.responseEnd=Ki.responseEnd,ri.resourceTiming.duration=Ki.duration)}(Vt,Jt)},je=function(_n,ri,pi){return new Promise(Gi=>{(function(Ki){const bi=Le.getRequestInterceptors();return bi?bi.reduce((Nt,rn)=>Nt.then(en=>rn(en)),Promise.resolve(Ki)):Promise.resolve(Ki)})(ri).then(Ki=>{(ri=Ki).customData.onloadend=ze,ri.customData.onprogress=Ve,ri.customData.onabort=nt,ri.customData.ontimeout=rt,pi.resourceTiming.startTime=Date.now(),_n.load(ri,pi),Gi()})})},Ee=function(){if(Ge>0){Ge--,Pe&&Pe.request&&(Pe.request.retryAttempts+=1);let _n={config:Pe};re.push(_n),_n.timeout=setTimeout(function(){re.indexOf(_n)!==-1&&(re.splice(re.indexOf(_n),1),he(Pe,Ge))},F.getRetryIntervalsForType(ye.type))}else{if(ye.type===Xe.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE)return;R.error(new Ze.default(ve[ye.type],ye.url+" is not available",{request:ye,response:Jt})),Pe.error&&Pe.error(ye,"error",Jt.statusText,Jt),Pe.complete&&Pe.complete(ye,Jt.statusText)}},ye=Pe.request,de=[];let we,qe,tt,mt,Tt,Vt,Jt;if(ye.bytesLoaded=NaN,ye.bytesTotal=NaN,ye.firstByteDate=null,ye.traces=[],we=!0,qe=new Date,tt=qe,mt=0,Tt=null,!P||!R)throw new Error("config object is not correct or missing");const yn=function(_n){let ri,pi;return _n.hasOwnProperty("availabilityTimeComplete")&&_n.availabilityTimeComplete===!1&&window.fetch&&_n.responseType==="arraybuffer"&&_n.type===Xe.HTTPRequest.MEDIA_SEGMENT_TYPE?(Ce||(Ce=Po(C).create(),Ce.setConfig({dashMetrics:P,boxParser:z})),ri=Ce,pi=j.default.FILE_LOADER_TYPES.FETCH):(Ie||(Ie=Ws(C).create()),ri=Ie,pi=j.default.FILE_LOADER_TYPES.XHR),{loader:ri,fileLoaderType:pi}}(ye),Cn=yn.loader;var Kn;ye.fileLoaderType=yn.fileLoaderType,ye.headers={},function(_n){var Gi,Ki;const ri=_n==null?void 0:_n.serviceLocation,pi=(Ki=(Gi=_n==null?void 0:_n.mediaInfo)==null?void 0:Gi.id)==null?void 0:Ki.toString();if(Te.isServiceLocationIncluded(_n.type,ri)&&Te.isAdaptationsIncluded(pi)&&Se.isCmcdEnabled()){const bi=Se.getCmcdParametersFromManifest(),Nt=bi.mode?bi.mode:oe.get().streaming.cmcd.mode;if(Nt===j.default.CMCD_MODE_QUERY){_n.url=it.default.removeQueryParameterFromUrl(_n.url,j.default.CMCD_QUERY_KEY);const rn=function(en){try{const gn=[],qn=Se.getQueryParameter(en);return qn&&gn.push(qn),gn}catch{return[]}}(_n);_n.url=it.default.addAdditionalQueryParameterToUrl(_n.url,rn)}else Nt===j.default.CMCD_MODE_HEADER&&(_n.headers=Object.assign(_n.headers,Se.getHeaderParameters(_n)))}}(Kn=ye),Kn.retryAttempts===0&&function(_n){let ri=ie.getFinalQueryString(_n);ri&&(_n.url=it.default.addAdditionalQueryParameterToUrl(_n.url,ri))}(Kn),function(_n){if(_n.queryParams){const ri=Object.keys(_n.queryParams).map(pi=>({key:pi,value:_n.queryParams[pi]}));_n.url=it.default.addAdditionalQueryParameterToUrl(_n.url,ri)}}(Kn),function(_n){const ri=Ye.getCommonAccessTokenForUrl(_n.url);ri&&(_n.headers[j.default.COMMON_ACCESS_TOKEN_HEADER]=ri)}(Kn),ye.range&&(ye.headers.Range="bytes="+ye.range);const Zn=Le.getXHRWithCredentialsForType(ye.type);Vt=new oc({url:ye.url,method:Xe.HTTPRequest.GET,responseType:ye.responseType,headers:ye.headers,credentials:Zn?"include":"omit",timeout:ne,cmcd:Se.getCmcdData(ye),customData:{request:ye}}),Jt=new Bf({request:Vt,resourceTiming:{startTime:Date.now(),encodedBodySize:0},status:0});let gi=new Date().getTime();if(isNaN(ye.delayLoadingTime)||gi>=ye.delayLoadingTime)return q.push(Vt),je(Cn,Vt,Jt);{let _n={httpRequest:Vt,httpResponse:Jt};return $.push(_n),_n.delayTimeout=setTimeout(function(){if($.indexOf(_n)!==-1){$.splice($.indexOf(_n),1);try{qe=new Date,tt=qe,q.push(_n.httpRequest),je(Cn,_n.httpRequest,_n.httpResponse)}catch{_n.httpRequest.onloadend()}}},ye.delayLoadingTime-gi),Promise.resolve()}}return X={abort:function(){re.forEach(Pe=>{clearTimeout(Pe.timeout),Pe.config.request&&Pe.config.abort&&Pe.config.abort(Pe.config.request)}),re=[],$.forEach(Pe=>clearTimeout(Pe.delayTimeout)),$=[],q.forEach(Pe=>{const Ge=Pe.customData;Ge&&(Ge.request&&Ge.request.type===Xe.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE||(Ge.onloadend=Ge.onprogress=void 0,Ge.abort&&Ge.abort()))}),q=[]},load:function(Pe){return Pe.request?he(Pe,F.getRetryAttemptsForType(Pe.request.type)):(Pe.error&&Pe.error(Pe.request,"error"),Promise.resolve())},reset:function(){q=[],$=[],re=[],Ie&&Ie.reset(),Ce&&Ce.reset(),Ie=null,Ce=null},resetInitialSettings:function(){Ie&&Ie.resetInitialSettings()},setConfig:function(Pe){Pe&&(Pe.commonAccessTokenController&&(Ye=Pe.commonAccessTokenController),Pe.extUrlQueryInfoController&&(ie=Pe.extUrlQueryInfoController))}},le=(0,$e.default)(C).getInstance().getLogger(X),q=[],$=[],re=[],Se=tl(C).getInstance(),Te=qd(C).getInstance(),ke=Du(C).getInstance(),Le=(0,nl.default)(C).getInstance(),Ye=Na(C).getInstance(),ie=Cl(C).getInstance(),ve={[Xe.HTTPRequest.MPD_TYPE]:Q.DOWNLOAD_ERROR_ID_MANIFEST_CODE,[Xe.HTTPRequest.XLINK_EXPANSION_TYPE]:Q.DOWNLOAD_ERROR_ID_XLINK_CODE,[Xe.HTTPRequest.INIT_SEGMENT_TYPE]:Q.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE,[Xe.HTTPRequest.MEDIA_SEGMENT_TYPE]:Q.DOWNLOAD_ERROR_ID_CONTENT_CODE,[Xe.HTTPRequest.INDEX_SEGMENT_TYPE]:Q.DOWNLOAD_ERROR_ID_CONTENT_CODE,[Xe.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE]:Q.DOWNLOAD_ERROR_ID_CONTENT_CODE,[Xe.HTTPRequest.OTHER_TYPE]:Q.DOWNLOAD_ERROR_ID_CONTENT_CODE},X}Wc.__dashjs_factory_name="HTTPLoader";var Gh=ue.default.getClassFactory(Wc);function or(){let D,C;function R(){C={}}function P(){R()}return P(),D={getLoader:function(F){for(var z in C)if(C.hasOwnProperty(z)&&F.startsWith(z))return C[z];return Gh},registerLoader:function(F,z){C[F]=z},unregisterLoader:function(F){C[F]&&delete C[F]},unregisterAllLoader:R,reset:P},D}or.__dashjs_factory_name="SchemeLoaderFactory";var ns=ue.default.getSingletonFactory(or);function ha(D){D=D||{};const C=this.context;let R,P,F;return P=ns(C).getInstance(),R={abort:function(){F&&F.abort()},load:function(z){F||(F=P.getLoader(z&&z.request?z.request.url:null)(C).create({errHandler:D.errHandler,mediaPlayerModel:D.mediaPlayerModel,dashMetrics:D.dashMetrics,boxParser:D.boxParser?D.boxParser:null,constants:D.constants?D.constants:null,dashConstants:D.dashConstants?D.dashConstants:null,urlUtils:D.urlUtils?D.urlUtils:null,requestTimeout:isNaN(D.requestTimeout)?0:D.requestTimeout,errors:D.errors})),F.load(z)},reset:function(){P&&(P.reset(),P=null),F&&typeof F.reset=="function"&&F.reset(),F=null},resetInitialSettings:function(){F&&typeof F.resetInitialSettings=="function"&&F.resetInitialSettings()}},R}ha.__dashjs_factory_name="URLLoader";var pa=ue.default.getClassFactory(ha),is=class extends Dt{constructor(D){super(D),this.checkForExistenceOnly=!0}};function Fa(D){D=D||{};const C=this.context,R=D.eventBus,P=D.events,F=D.urlUtils,z=D.errors,Q=D.streamId;let ne,B;return ne={abort:function(){B&&B.abort()},checkForExistence:function(oe){const X=function(q){R.trigger(P.CHECK_FOR_EXISTENCE_COMPLETED,{request:oe,exists:q})};if(oe){let q=new is(oe.url);B.load({request:q,success:function(){X(!0)},error:function(){X(!1)}})}else X(!1)},load:function(oe){const X=function(q,$){R.trigger(P.LOADING_COMPLETED,{request:oe,response:q||null,error:$||null,sender:ne})};oe?B.load({request:oe,progress:function(q){R.trigger(P.LOADING_PROGRESS,{request:oe,stream:q.stream,streamId:Q}),q.data&&R.trigger(P.LOADING_DATA_PROGRESS,{request:oe,response:q.data||null,error:null,sender:ne})},success:function(q){X(q)},error:function(q,$,re){X(void 0,new Ze.default(z.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,re,$))},abort:function(q){q&&R.trigger(P.LOADING_ABANDONED,{mediaType:q.mediaType,request:q,sender:ne})}}):X(void 0,new Ze.default(z.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,z.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))},reset:function(){B&&(B.abort(),B.reset(),B=null)},resetInitialSettings:function(){B&&B.resetInitialSettings()}},B=pa(C).create({errHandler:D.errHandler,errors:z,dashMetrics:D.dashMetrics,mediaPlayerModel:D.mediaPlayerModel,urlUtils:F,constants:j.default,boxParser:D.boxParser,dashConstants:D.dashConstants,requestTimeout:D.settings.get().streaming.fragmentRequestTimeout}),ne}Fa.__dashjs_factory_name="FragmentLoader";var Ri=ue.default.getClassFactory(Fa);function il(D){D=D||{};const C=this.context,R=(0,K.default)(C).getInstance(),P=D.errHandler,F=D.mediaPlayerModel,z=D.dashMetrics,Q=(0,$e.default)(C).getInstance(),ne=D.streamInfo;let B,oe,X;function q(){return ne.id}function $(){for(let ve in X)X[ve].reset();X={}}function re(ve){if(!ve.sender)return;const Se=ve.request,ke=ve.response,Ie=Se.isInitializationRequest(),Ce=Se.representation.mediaInfo.streamInfo;if(ve.error&&(Se.mediaType===j.default.AUDIO||Se.mediaType===j.default.VIDEO||Se.mediaType===j.default.TEXT&&Se.representation.mediaInfo.isFragmented)&&R.trigger(x.default.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD,{entry:ve.request.serviceLocation}),!ke||!Ce)return void oe.warn("No "+Se.mediaType+" bytes to push or stream is inactive.");const Le=function(Ye,Te,ie,le){const he=new Ir;return he.streamId=ie,he.segmentType=Te.type,he.start=Te.startTime,he.duration=Te.duration,he.end=he.start+he.duration,he.bytes=Ye,he.index=Te.index,he.representation=Te.representation,he.endFragment=le,he}(ke,Se,ne.id,ve.type!==x.default.FRAGMENT_LOADING_PROGRESS);R.trigger(Ie?x.default.INIT_FRAGMENT_LOADED:x.default.MEDIA_FRAGMENT_LOADED,{chunk:Le,request:Se},{streamId:Ce.id,mediaType:Se.mediaType})}return B={getStreamId:q,getModel:function(ve){let Se=X[ve];return Se||(Se=Qe(C).create({streamInfo:ne,type:ve,dashMetrics:z,fragmentLoader:Ri(C).create({dashMetrics:z,mediaPlayerModel:F,errHandler:P,settings:D.settings,boxParser:D.boxParser,eventBus:R,events:x.default,errors:ce,dashConstants:D.dashConstants,urlUtils:D.urlUtils,streamId:q()}),debug:Q,eventBus:R,events:x.default}),X[ve]=Se),Se},reset:function(){R.off(xe.default.FRAGMENT_LOADING_COMPLETED,re,this),R.off(xe.default.FRAGMENT_LOADING_PROGRESS,re,this),$()}},oe=Q.getLogger(B),$(),R.on(xe.default.FRAGMENT_LOADING_COMPLETED,re,B),R.on(xe.default.FRAGMENT_LOADING_PROGRESS,re,B),B}il.__dashjs_factory_name="FragmentController";var Vh=ue.default.getClassFactory(il),rl=class{constructor(){this.url=null,this.width=null,this.height=null,this.x=null,this.y=null}},sl=class{constructor(){this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""}};class go{constructor(C){if(this.offset=C._offset,this.type=C.type,this.size=C.size,this.boxes=[],C.boxes)for(let R=0;R<C.boxes.length;R++)this.boxes.push(new go(C.boxes[R]));switch(this.isComplete=!0,C.type){case"sidx":if(this.timescale=C.timescale,this.earliest_presentation_time=C.earliest_presentation_time,this.first_offset=C.first_offset,this.references=C.references,C.references){this.references=[];for(let R=0;R<C.references.length;R++){let P={reference_type:C.references[R].reference_type,referenced_size:C.references[R].referenced_size,subsegment_duration:C.references[R].subsegment_duration};this.references.push(P)}}break;case"emsg":this.id=C.id,this.version=C.version===1?1:0,this.value=C.value,this.timescale=C.timescale,this.scheme_id_uri=C.scheme_id_uri,this.presentation_time_delta=C.version===1?C.presentation_time:C.presentation_time_delta,this.event_duration=C.event_duration,this.message_data=C.message_data;break;case"mdhd":this.timescale=C.timescale;break;case"mfhd":this.sequence_number=C.sequence_number;break;case"subs":this.entry_count=C.entry_count,this.entries=C.entries;break;case"tfhd":this.base_data_offset=C.base_data_offset,this.sample_description_index=C.sample_description_index,this.default_sample_duration=C.default_sample_duration,this.default_sample_size=C.default_sample_size,this.default_sample_flags=C.default_sample_flags,this.flags=C.flags;break;case"tfdt":this.version=C.version,this.baseMediaDecodeTime=C.baseMediaDecodeTime,this.flags=C.flags;break;case"trun":if(this.sample_count=C.sample_count,this.first_sample_flags=C.first_sample_flags,this.data_offset=C.data_offset,this.flags=C.flags,this.samples=C.samples,C.samples){this.samples=[];for(let R=0,P=C.samples.length;R<P;R++){let F={sample_size:C.samples[R].sample_size,sample_duration:C.samples[R].sample_duration,sample_composition_time_offset:C.samples[R].sample_composition_time_offset};this.samples.push(F)}}break;case"prft":this.version=C.version,this.reference_track_ID=C.reference_track_ID,this.ntp_timestamp_sec=C.ntp_timestamp_sec,this.ntp_timestamp_frac=C.ntp_timestamp_frac,this.media_time=C.media_time,this.flags=C.flags}}getChildBox(C){for(let R=0;R<this.boxes.length;R++)if(this.boxes[R].type===C)return this.boxes[R]}getChildBoxes(C){let R=[];for(let P=0;P<this.boxes.length;P++)this.boxes[P].type===C&&R.push(this.boxes[P]);return R}}var Xc=go;function Zs(){let D,C;function R(F){let z=[];if(!F||!C||typeof C.fetchAll!="function")return z;let Q,ne=C.fetchAll(F);for(let B=0,oe=ne.length;B<oe;B++)Q=P(ne[B]),Q&&z.push(Q);return z}function P(F){if(!F)return null;let z=new Xc(F);return F.hasOwnProperty("_incomplete")&&(z.isComplete=!F._incomplete),z}return D={getBox:function(F){return F&&C&&C.boxes&&C.boxes.length!==0&&typeof C.fetch=="function"?P(C.fetch(F)):null},getBoxes:R,setData:function(F){C=F},getLastBox:function(){if(!C||!C.boxes||!C.boxes.length)return null;let F=R(C.boxes[C.boxes.length-1].type);return F.length>0?F[F.length-1]:null}},D}Zs.__dashjs_factory_name="IsoFile";var kl=ue.default.getClassFactory(Zs),vs=n(6877),Lu=class{constructor(D){let{found:C,sizeOfLastCompletedBox:R,sizeOfLastFoundTargetBox:P,startOffsetOfLastCompletedBox:F,startOffsetOfLastFoundTargetBox:z,typeOfLastCompletedBox:Q,typeOfLastTargetBox:ne}=D;this.found=C!==void 0&&C,this.sizeOfLastCompletedBox=R!==void 0?R:0,this.sizeOfLastFoundTargetBox=P!==void 0?P:0,this.startOffsetOfLastCompletedBox=F!==void 0?F:0,this.startOffsetOfLastFoundTargetBox=z!==void 0?z:0,this.typeOfLastCompletedBox=Q!==void 0?Q:null,this.typeOfLastTargetBox=ne!==void 0?ne:null}};function lc(){let D,C,R=this.context;function P(Q){if(!Q)return null;Q.fileStart===void 0&&(Q.fileStart=0);let ne=vs.parseBuffer(Q),B=kl(R).create();return B.setData(ne),B}function F(Q,ne){return Q[ne+3]>>>0|Q[ne+2]<<8>>>0|Q[ne+1]<<16>>>0|Q[ne]<<24>>>0}function z(Q,ne){return String.fromCharCode(Q[ne++])+String.fromCharCode(Q[ne++])+String.fromCharCode(Q[ne++])+String.fromCharCode(Q[ne])}return C={findInitRange:function(Q){let ne,B,oe=null;const X=P(Q);if(!X)return oe;const q=X.getBox("ftyp"),$=X.getBox("moov");return D.debug("Searching for initialization."),$&&$.isComplete&&(ne=q?q.offset:$.offset,B=$.offset+$.size-1,oe=ne+"-"+B,D.debug("Found the initialization.  Range: "+oe)),oe},findLastTopIsoBoxCompleted:function(Q,ne,B){if(B===void 0&&(B=0),!ne||B+8>=ne.byteLength)return new Lu({found:!1});const oe=ne instanceof ArrayBuffer?new Uint8Array(ne):ne;let X,q=0,$=0,re=null;for(;B<oe.byteLength;){const ve=F(oe,B),Se=z(oe,B+4);if(ve===0)break;B+ve<=oe.byteLength&&(Q.indexOf(Se)>=0?X=new Lu({found:!0,startOffsetOfLastFoundTargetBox:B,sizeOfLastFoundTargetBox:ve,typeOfLastTargetBox:Se}):(q=B,$=ve,re=Se)),B+=ve}return X||new Lu({found:!1,startOffsetOfLastCompletedBox:q,sizeOfLastCompletedBox:$,typeOfLastCompletedBox:re})},getMediaTimescaleFromMoov:function(Q){let ne=P(Q),B=ne?ne.getBox("mdhd"):void 0;return B?B.timescale:NaN},getSamplesInfo:function(Q){if(!Q||Q.byteLength===0)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};let ne,B,oe,X,q,$,re,ve,Se,ke,Ie,Ce,Le,Ye,Te,ie,le,he=P(Q),Pe=he.getBoxes("moof"),Ge=he.getBoxes("mfhd");ie=he.getBoxes("moof").length,Te=Ge[Ge.length-1].sequence_number,oe=0,$=[];let ze=-1,Ve=-1;for(Ie=0;Ie<Pe.length;Ie++){let nt=Pe[Ie],rt=nt.getChildBoxes("traf");for(Se=0;Se<rt.length;Se++){let fe=rt[Se],me=fe.getChildBox("tfhd"),Ue=fe.getChildBox("tfdt");q=Ue.baseMediaDecodeTime;let je=fe.getChildBoxes("trun"),Ee=fe.getChildBoxes("subs");for(ke=0;ke<je.length;ke++){let ye=je[ke];for(oe=ye.sample_count,Ye=(me.base_data_offset||0)+(ye.data_offset||0),ve=0;ve<oe;ve++){re=ye.samples[ve],ne=re.sample_duration!==void 0?re.sample_duration:me.default_sample_duration,X=re.sample_size!==void 0?re.sample_size:me.default_sample_size,B=re.sample_composition_time_offset!==void 0?re.sample_composition_time_offset:0;let de={dts:q,cts:q+B,duration:ne,offset:nt.offset+Ye,size:X,subSizes:[X]};if(Ee)for(Ce=0;Ce<Ee.length;Ce++){let we=Ee[Ce];if(ze<we.entry_count-1&&ve>Ve&&(ze++,Ve+=we.entries[ze].sample_delta),ve==Ve){de.subSizes=[];let qe=we.entries[ze];for(Le=0;Le<qe.subsample_count;Le++)de.subSizes.push(qe.subsamples[Le].subsample_size)}}$.push(de),Ye+=X,q+=ne}}le=q-Ue.baseMediaDecodeTime}}return{sampleList:$,lastSequenceNumber:Te,totalDuration:le,numSequences:ie}},parse:P},D=(0,$e.default)(R).getInstance().getLogger(C),C}lc.__dashjs_factory_name="BoxParser";var Qc=ue.default.getSingletonFactory(lc);function uc(D){const C=this.context,R=D.adapter,P=D.baseURLController,F=D.streamInfo,z=D.timelineConverter,Q=D.debug,ne=D.eventBus,B=D.events,oe=D.dashConstants,X=Ne(C).getInstance();let q,$,re,ve,Se,ke,Ie,Ce,Le;function Ye(ie,le){const he=new sl;he.id=ie.id,he.bitrate=ie.bandwidth,he.width=ie.width,he.height=ie.height,he.tilesHor=1,he.tilesVert=1,ie.essentialProperties&&ie.essentialProperties.forEach(Pe=>{if(j.default.THUMBNAILS_SCHEME_ID_URIS.indexOf(Pe.schemeIdUri)>=0&&Pe.value){const Ge=Pe.value.split("x");Ge.length!==2||isNaN(Ge[0])||isNaN(Ge[1])||(he.tilesHor=parseInt(Ge[0],10),he.tilesVert=parseInt(Ge[1],10))}}),le?Ie.updateSegmentData(ie).then(Pe=>{(function(Ge,ze,Ve){let nt=[];const rt=function(fe,me){const Ue=[];let je,Ee,ye,de,we=0;for(je=0,Ee=fe.segments.length;je<Ee;je++)ye=fe.segments[je],de=dn(z,R.getIsDynamic(),me,ye.startTime,ye.duration,ye.timescale,ye.media,ye.mediaRange,we),de&&(Ue.push(de),de=null,we++);return Ue}(Ve,ze);ze.segments=rt,ze.fragmentDuration=ze.segmentDuration||(ze.segments&&ze.segments.length>0?ze.segments[0].duration:NaN),Ge.segmentDuration=ze.segments[0].duration,Ge.readThumbnail=function(fe,me){let Ue=null;nt.some(je=>{if(je.start<=fe&&je.end>fe)return Ue=je.url,!0}),Ue?me(Ue):ze.segments.some(je=>{if(je.mediaStartTime<=fe&&je.mediaStartTime+je.duration>fe){const Ee=P.resolve(ze.path),ye=new oc({method:"get",url:Ee.url,responseType:"arraybuffer",customData:{request:{range:je.mediaRange},onloadend:function(we){let qe=Le.getSamplesInfo(we.target.response),tt=new Blob([we.target.response.slice(qe.sampleList[0].offset,qe.sampleList[0].offset+qe.sampleList[0].size)],{type:"image/jpeg"}),mt=window.URL.createObjectURL(tt);nt.push({start:je.mediaStartTime,end:je.mediaStartTime+je.duration,url:mt}),me&&me(mt)}}}),de=new Bf({request:ye});return Ce.load(ye,de),!0}})}})(he,ie,Pe)}):(he.startNumber=ie.startNumber,he.segmentDuration=ie.segmentDuration,he.timescale=ie.timescale,he.templateUrl=function(Pe){const Ge=X.isRelative(Pe.media)?X.resolve(Pe.media,P.resolve(Pe.path).url):Pe.media;return Ge?dr(Ge,Pe.id):""}(ie)),he.tilesHor>0&&he.tilesVert>0&&(he.widthPerTile=he.width/he.tilesHor,he.heightPerTile=he.height/he.tilesVert,$.push(he))}function Te(){$=[],re=[],Se=-1,ke=null,ve&&(ve.reset(),ve=null)}return q={addTracks:function(){if(!F||!R||(ke=R.getMediaInfoForType(F,j.default.IMAGE),!ke))return;const ie=R.getVoRepresentations(ke);ie&&ie.length>0&&ie.forEach(le=>{(le.segmentInfoType===M.default.SEGMENT_TEMPLATE&&le.segmentDuration>0&&le.media||le.segmentInfoType===M.default.SEGMENT_TIMELINE)&&Ye(le),le.segmentInfoType===M.default.SEGMENT_BASE&&Ye(le,!0),re.push(le)}),$.length>0&&$.sort((le,he)=>le.bitrate-he.bitrate)},getCurrentTrack:function(){return Se<0?null:$[Se]},getCurrentTrackIndex:function(){return Se},getRepresentations:function(){return re},getThumbnailRequestForTime:function(ie){let le;const he=R.getVoRepresentations(ke);for(let Pe=0;Pe<he.length;Pe++)if($[Se].id===he[Pe].id){le=he[Pe];break}return ve.getSegmentRequestForTime(ke,le,ie)},getTracks:function(){return $},reset:Te,setTrackById:function(ie){if(!$||$.length===0)return;const le=$.findIndex(he=>he.id===ie);le!==-1&&(Se=le)},setTrackByIndex:function(ie){$&&$.length!==0&&(ie>=$.length&&(ie=$.length-1),Se=ie)}},Te(),Ce=Ws(C).create({}),Le=Qc(C).getInstance(),Ie=Ln(C).create({events:B,eventBus:ne,streamInfo:F,timelineConverter:z,dashConstants:oe,dashMetrics:D.dashMetrics,segmentBaseController:D.segmentBaseController,type:j.default.IMAGE}),ve=vn(C).create({streamInfo:F,type:j.default.IMAGE,timelineConverter:z,segmentsController:Ie,baseURLController:P,debug:Q,eventBus:ne,events:B,dashConstants:oe,urlUtils:X}),ve.initialize(!!R&&R.getIsDynamic()),q}uc.__dashjs_factory_name="ThumbnailTracks";var $h=ue.default.getClassFactory(uc);function zf(D){const C=this.context,R=D.streamInfo;let P,F;function z(ne){F.setTrackByIndex(ne)}function Q(){F&&F.reset()}return P={getCurrentTrack:function(){return F.getCurrentTrack()},getCurrentTrackIndex:function(){return F.getCurrentTrackIndex()},getPossibleVoRepresentations:function(){return F.getRepresentations()},getStreamId:function(){return R.id},initialize:function(){F.addTracks();const ne=F.getTracks();ne&&ne.length>0&&z(0)},provide:function(ne,B){if(typeof B!="function")return;const oe=F.getCurrentTrack();let X,q;if(!oe||oe.segmentDuration<=0||ne==null)return void B(null);q=F.getThumbnailRequestForTime(ne),q&&(oe.segmentDuration=q.duration),X=ne%oe.segmentDuration;const $=Math.floor(X*oe.tilesHor*oe.tilesVert/oe.segmentDuration),re=new rl;if(re.width=Math.floor(oe.widthPerTile),re.height=Math.floor(oe.heightPerTile),re.x=Math.floor($%oe.tilesHor)*oe.widthPerTile,re.y=Math.floor($/oe.tilesHor)*oe.heightPerTile,"readThumbnail"in oe)return oe.readThumbnail(ne,ve=>{re.url=ve,B(re)});if(q)re.url=q.url,oe.segmentDuration=NaN;else{const ve=Math.floor(ne/oe.segmentDuration);re.url=function(Se,ke){const Ie=ke+Se.startNumber;let Ce=_r(Se.templateUrl,"Number",Ie);return Ce=_r(Ce,"Time",(Ie-1)*Se.segmentDuration*Se.timescale),Ce=_r(Ce,"Bandwidth",Se.bandwidth),ni(Ce)}(oe,ve)}B(re)},reset:Q,setTrackByIndex:z,setTrackById:function(ne){F.setTrackById(ne)}},Q(),F=$h(C).create({streamInfo:R,adapter:D.adapter,baseURLController:D.baseURLController,timelineConverter:D.timelineConverter,debug:D.debug,eventBus:D.eventBus,events:D.events,dashConstants:D.dashConstants,dashMetrics:D.dashMetrics,segmentBaseController:D.segmentBaseController}),P}zf.__dashjs_factory_name="ThumbnailController";var Jc=ue.default.getClassFactory(zf);function jf(D){let C;D=D||{};let R=[];const P=(0,K.default)(this.context).getInstance(),F=D.updateEventName,z=D.addBlacklistEventName;function Q(B){R.indexOf(B)===-1&&(R.push(B),P.trigger(F,{entry:B}))}function ne(B){Q(B.entry)}return C={add:Q,remove:function(B){const oe=R.indexOf(B);oe!==-1&&R.splice(oe,1)},contains:function(B){return!!(R.length&&B&&B.length)&&R.indexOf(B)!==-1},reset:function(){z&&P.off(z,ne,C),R=[]}},z&&P.on(z,ne,C),C}jf.__dashjs_factory_name="BlackListController";var Zc=ue.default.getClassFactory(jf);const qf=[j.default.VIDEO,j.default.AUDIO,j.default.TEXT,j.default.MUXED,j.default.IMAGE];function Hd(D){D=D||{};const C=this.context,R=(0,K.default)(C).getInstance(),P=Ne(C).getInstance(),F=D.manifestModel,z=D.mediaPlayerModel,Q=D.dashMetrics,ne=D.manifestUpdater,B=D.adapter,oe=D.timelineConverter,X=D.capabilities,q=D.errHandler,$=D.abrController,re=D.playbackController,ve=D.throughputController,Se=D.eventController,ke=D.mediaController,Ie=D.protectionController,Ce=D.textController,Le=D.videoModel;let Ye=D.streamInfo;const Te=D.settings;let ie,le,he,Pe,Ge,ze,Ve,nt,rt,fe,me,Ue,je,Ee,ye,de;function we(Kt,kn,Bn){return new Promise((Xn,zn)=>{Cn(),Zn();let Ut=Le.getElement();const hn=[];qf.forEach($n=>{if(($n!==j.default.TEXT||Kt)&&($n!==j.default.VIDEO||!Ut||Ut&&/^VIDEO$/i.test(Ut.nodeName))){const Yn=Bn.find(tn=>tn.mediaInfo.type===$n);hn.push(qe($n,Kt,Yn))}}),Promise.all(hn).then(()=>{return $n=kn,new Promise(Yn=>{const tn={},Je=he.map(Ot=>{const an=Ot.getRepresentation();return Ot.createBufferSinks($n,an)});Promise.all(Je).then(Ot=>{Ot.forEach(an=>{an&&(tn[an.getType()]=an)}),Yn(tn)}).catch(()=>{Yn(tn)})});var $n}).then($n=>{if(he.length===0){const Yn="No streams to play.";q.error(new Ze.default(ce.MANIFEST_ERROR_ID_NOSTREAMS_CODE,Yn,F.getValue())),le.fatal(Yn)}else en();Kt&&Ce.createTracks(Ye),Xn($n)}).catch($n=>{zn($n)})})}function qe(Kt,kn,Bn){let Xn,zn=B.getAllMediaInfoForType(Ye,Kt),Ut=[],hn=null;if(!zn||zn.length===0)return le.info("No "+Kt+" data."),Promise.resolve();Kt===j.default.VIDEO&&(Ve=!0),Kt===j.default.AUDIO&&(nt=!0);for(let Yn=0,tn=zn.length;Yn<tn;Yn++)hn=zn[Yn],Kt===j.default.TEXT&&hn.isEmbedded&&(Ce.addEmbeddedTrack(Ye,hn),Ut.push(hn)),tt(hn)&&ke.addTrack(hn);if(Ut.length>0&&(ke.setInitialMediaSettingsForType(Kt,Ye),Ce.addMediaInfosToBuffer(Ye,Kt,Ut)),zn=zn.filter(Yn=>!Yn.isEmbedded),zn.length===0)return Promise.resolve();if(Kt===j.default.IMAGE)return fe=Jc(C).create({streamInfo:Ye,adapter:B,baseURLController:D.baseURLController,timelineConverter:D.timelineConverter,debug:Ee,eventBus:R,events:x.default,dashConstants:M.default,dashMetrics:D.dashMetrics,segmentBaseController:D.segmentBaseController}),fe.initialize(),Promise.resolve();R.trigger(x.default.STREAM_INITIALIZING,{streamInfo:Ye,mediaInfo:hn}),ke.setInitialMediaSettingsForType(Kt,Ye);let $n=function(Yn,tn){const Je=Yn&&Yn.length>0?Yn[0]:null;let Ot=rt.getModel(Je?Je.type:null);const an=Je?Je.type:null,Ft=Je?Je.mimeType:null,bn=Je?Je.isFragmented:null;let Fn=Ni(C).create({abrController:$,adapter:B,baseURLController:D.baseURLController,boxParser:je,capabilities:X,dashMetrics:D.dashMetrics,errHandler:q,fragmentModel:Ot,manifestModel:F,mediaController:ke,mediaPlayerModel:z,mimeType:Ft,playbackController:re,segmentBaseController:D.segmentBaseController,segmentBlacklistController:me,settings:Te,streamInfo:Ye,textController:Ce,throughputController:ve,timelineConverter:oe,type:an});return Fn.initialize(tn,Ve,bn),he.push(Fn),Fn.setMediaInfoArray(Yn),an===j.default.TEXT&&Ce.addMediaInfosToBuffer(Ye,an,Yn,Ot),Fn}(zn,kn);if(Xn=ke.getCurrentTrackFor(Kt,Ye.id),Xn){const Yn=Kt===j.default.TEXT&&Xn.isEmbedded?zn[0]:Xn,tn=new jn({newMediaInfo:Yn,previouslySelectedRepresentation:Bn});return $n.selectMediaInfo(tn)}return Promise.resolve()}function tt(Kt){const kn=Kt?Kt.type:null;let Bn;return kn===j.default.MUXED?(Bn="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",le.fatal(Bn),q.error(new Ze.default(ce.MANIFEST_ERROR_ID_MULTIPLEXED_CODE,Bn,F.getValue())),!1):!(kn!==j.default.TEXT&&kn!==j.default.IMAGE&&Kt.contentProtection&&Kt.contentProtection.length>0&&!X.supportsEncryptedMedia()&&(q.error(new Ze.default(ce.CAPABILITY_MEDIAKEYS_ERROR_CODE,ce.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE)),1))}function mt(Kt){let kn=he?he.length:0;for(let Bn=0;Bn<kn;Bn++){let Xn=he[Bn].getFragmentModel();Xn.abortRequests(),Xn.resetInitialSettings(),he[Bn].reset(!1,Kt)}Ce&&Ce.deactivateStream(Ye),fe&&(fe.reset(),fe=null),he=[],Ge=!1,ze=!1,gn(!1),Vt(!1),R.trigger(x.default.STREAM_DEACTIVATED,{streamInfo:Ye})}function Tt(Kt){mt(Kt),Pe=!1,Ve=!1,nt=!1,ye=!1,de=[]}function Vt(Kt){ye=Kt}function Jt(){return Ye?Ye.start:NaN}function yn(){return Ye?Ye.id:null}function Cn(){if(!Le||!$)throw new Error(j.default.MISSING_CONFIG_ERROR)}function Kn(Kt){Kt.error&&(q.error(Kt.error),le.fatal(Kt.error.message))}function Zn(){if(Se){const Kt=B.getEventsFor(Ye);Kt&&Kt.length>0&&Se.addInlineEvents(Kt,Ye.id)}}function gi(Kt){let kn=_n(Kt);return kn?kn.getMediaInfo():null}function _n(Kt){return Kt?he.find(kn=>kn.getType()===Kt):null}function ri(){let Kt=Nt();const kn=Kt.length;if(kn!==0){for(let Bn=0;Bn<kn;Bn++)if(!Kt[Bn].isBufferingCompleted()&&(Kt[Bn].getType()===j.default.AUDIO||Kt[Bn].getType()===j.default.VIDEO))return void le.debug("onBufferingCompleted - One streamProcessor has finished but",Kt[Bn].getType(),"one is not buffering completed");le.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),ze=!0,R.trigger(x.default.STREAM_BUFFERING_COMPLETED,{streamInfo:Ye},{streamInfo:Ye})}else le.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined")}function pi(Kt){Se&&Se.addInbandEvents(Kt.events,Ye.id)}function Gi(){en()}function Ki(Kt){return Kt&&Kt.type?bi(Kt.type):null}function bi(Kt){return Kt?Nt().filter(function(kn){return kn.getType()===Kt})[0]:null}function Nt(){let Kt,kn,Bn=[];for(let Xn=0;Xn<he.length;Xn++)kn=he[Xn],Kt=kn.getType(),Kt!==j.default.AUDIO&&Kt!==j.default.VIDEO&&Kt!==j.default.TEXT||Bn.push(kn);return Bn}function rn(){const Kt=he.length;for(let kn=0;kn<Kt&&he[kn];kn++)he[kn].getScheduleController().startScheduleTimer()}function en(){const Kt=he.length;if(Ie){Ie.clearMediaInfoArray();for(let kn=0;kn<Kt&&he[kn];kn++){const Bn=he[kn].getType(),Xn=he[kn].getMediaInfo();if(Bn===j.default.AUDIO||Bn===j.default.VIDEO||Bn===j.default.TEXT&&Xn&&Xn.isFragmented){let zn=he[kn].getMediaInfo();zn&&Ie.initializeForMedia(zn)}}Ie.handleKeySystemFromManifest()}Pe||(Pe=!0,Le.waitForReadyState(j.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,()=>{R.trigger(x.default.STREAM_INITIALIZED,{streamInfo:Ye})}))}function gn(Kt){Ue=Kt}function qn(){return Ue}return ie={activate:function(Kt,kn){let Bn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return new Promise((Xn,zn)=>{if(!Ge)return qn()?(Ge=!0,R.trigger(x.default.STREAM_ACTIVATED,{streamInfo:Ye}),void Xn(kn)):void function(Ut,hn){return we(Ut,hn,arguments.length>2&&arguments[2]!==void 0?arguments[2]:[])}(Kt,kn,Bn).then(Ut=>{Ge=!0,Bn&&Bn.length>0&&rn(),R.trigger(x.default.STREAM_ACTIVATED,{streamInfo:Ye}),Xn(Ut)}).catch(Ut=>{zn(Ut)});Xn(kn)})},checkAndHandleCompletedBuffering:function(){ze||he.forEach(Kt=>{Kt.checkAndHandleCompletedBuffering()})},deactivate:mt,getAdapter:function(){return B},getCurrentMediaInfoForType:function(Kt){const kn=bi(Kt);return kn?kn.getMediaInfo():null},getCurrentRepresentationForType:function(Kt){const kn=bi(Kt);return kn?kn.getRepresentation():null},getDuration:function(){return Ye?Ye.duration:NaN},getHasAudioTrack:function(){return nt},getHasFinishedBuffering:function(){return ze},getHasVideoTrack:function(){return Ve},getId:yn,getIsActive:function(){return Ge},getIsEndedEventSignaled:function(){return ye},getPreloaded:qn,getRepresentationForTypeById:function(Kt,kn){let Bn;if(Kt===j.default.IMAGE){if(!fe)return null;Bn=fe.getPossibleVoRepresentations()}else Bn=function(Ut){let hn=_n(Ut);return hn?hn.getAllMediaInfos():[]}(Kt).flatMap(Ut=>$.getPossibleVoRepresentationsFilteredBySettings(Ut,!0));if(!Bn||Bn.length===0)return null;const Xn=Bn.filter(zn=>zn.id===kn);return Xn&&Xn.length>0?Xn[0]:null},getRepresentationForTypeByIndex:function(Kt,kn){let Bn;if(Kt===j.default.IMAGE){if(!fe)return null;Bn=fe.getPossibleVoRepresentations()}else{const Xn=gi(Kt);Bn=$.getPossibleVoRepresentationsFilteredBySettings(Xn,!0)}return Bn[kn=Math.max(Math.min(kn,Bn.length-1),0)]},getRepresentationsByType:function(Kt){if(Cn(),Kt===j.default.IMAGE)return fe?fe.getPossibleVoRepresentations():[];const kn=gi(Kt);return $.getPossibleVoRepresentationsFilteredBySettings(kn,!0)},getStartTime:Jt,getStreamId:function(){return Ye?Ye.id:null},getStreamInfo:function(){return Ye},getStreamProcessors:Nt,getThumbnailController:function(){return fe},initialize:function(){R.on(x.default.BUFFERING_COMPLETED,ri,ie),R.on(x.default.INBAND_EVENTS,pi,ie),R.on(x.default.DATA_UPDATE_COMPLETED,Gi,ie),Ie&&(R.on(x.default.KEY_ERROR,Kn,ie),R.on(x.default.SERVER_CERTIFICATE_UPDATED,Kn,ie),R.on(x.default.LICENSE_REQUEST_COMPLETE,Kn,ie),R.on(x.default.KEY_SYSTEM_SELECTED,Kn,ie),R.on(x.default.KEY_SESSION_CREATED,Kn,ie)),Ce.initializeForStream(Ye),R.trigger(x.default.STREAM_UPDATED,{streamInfo:Ye})},initializeForTextWithMediaSource:function(Kt){return new Promise((kn,Bn)=>{qe(j.default.TEXT,Kt,null).then(()=>function(){const Xn=bi(j.default.TEXT);return Xn?Xn.createBufferSinks():Promise.resolve()}()).then(()=>{Ce.createTracks(Ye),kn()}).catch(Xn=>{Bn(Xn)})})},prepareQualityChange:function(Kt){const kn=bi(Kt.mediaType);kn&&kn.prepareQualityChange(Kt)},prepareTrackChange:function(Kt){if(!Ge||!Ye)return;ze=!1;let kn=Kt.newMediaInfo,Bn=F.getValue(),Xn=Ki(kn);if(!Xn)return;let zn=re.getTime();if(le.info("Stream -  Process track changed at current time "+zn),Bn.refreshManifestOnSwitchTrack)de.push(Kt),ne.getIsUpdating()||(le.debug("Stream -  Refreshing manifest for switch track"),ne.refreshManifest());else{Xn.clearScheduleTimer(),Xn.setTrackSwitchInProgress(!0);const Ut=Xn.getRepresentation();Xn.selectMediaInfo(new jn({newMediaInfo:kn})).then(()=>{const hn=!!(Kt&&Kt.options&&Kt.options.hasOwnProperty("replaceBuffer"))&&Kt.options.replaceBuffer;return Xn.prepareTrackSwitch(Ut,hn)}).then(()=>{Xn.setTrackSwitchInProgress(!1)})}},reset:function(Kt){rt&&(rt.reset(),rt=null),$&&Ye&&$.clearDataForStream(Ye.id),me&&(me.reset(),me=null),Ce&&Ye&&Ce.clearDataForStream(Ye.id),ke&&Ye&&ke.clearDataForStream(Ye.id),Tt(Kt),Ye=null,R.off(x.default.BUFFERING_COMPLETED,ri,ie),R.off(x.default.INBAND_EVENTS,pi,ie),R.off(x.default.DATA_UPDATE_COMPLETED,Gi,ie),Ie&&(R.off(x.default.KEY_ERROR,Kn,ie),R.off(x.default.SERVER_CERTIFICATE_UPDATED,Kn,ie),R.off(x.default.LICENSE_REQUEST_COMPLETE,Kn,ie),R.off(x.default.KEY_SYSTEM_SELECTED,Kn,ie),R.off(x.default.KEY_SESSION_CREATED,Kn,ie))},setIsEndedEventSignaled:Vt,setMediaSource:function(Kt){return new Promise((kn,Bn)=>{const Xn=[];for(let zn=0;zn<he.length;)tt(he[zn].getMediaInfo())?(Xn.push(he[zn].setMediaSource(Kt)),zn++):(he[zn].reset(),he.splice(zn,1));Promise.all(Xn).then(()=>{for(let zn=0;zn<he.length;zn++)he[zn].dischargePreBuffer();if(he.length===0){const zn="No streams to play.";q.error(new Ze.default(ce.MANIFEST_ERROR_ID_NOSTREAMS_CODE,zn+"nostreams",F.getValue())),le.fatal(zn)}kn()}).catch(zn=>{le.error(zn),Bn(zn)})})},startPreloading:function(Kt,kn){let Bn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return new Promise((Xn,zn)=>{qn()?zn():(le.info(`[startPreloading] Preloading next stream with id ${yn()}`),gn(!0),we(Kt,kn,Bn).then(()=>{for(let Ut=0;Ut<he.length&&he[Ut];Ut++)he[Ut].setExplicitBufferingTime(Jt()),he[Ut].getScheduleController().startScheduleTimer();Xn()}).catch(()=>{gn(!1),zn()}))})},startScheduleControllers:rn,triggerProtectionError:function(Kt){Kn(Kt)},updateData:function(Kt){return new Promise(kn=>{Ye=Kt,Se&&Zn();let Bn,Xn=[];for(let zn=0,Ut=he.length;zn<Ut;zn++){let hn=he[zn];const $n=hn.getMediaInfo();Xn.push(hn.updateStreamInfo(Ye));let Yn=B.getAllMediaInfoForType(Ye,hn.getType());if(Yn=Yn.filter(tn=>!tn.isEmbedded),hn.setMediaInfoArray(Yn),Yn)for(let tn=0;tn<Yn.length;tn++)B.areMediaInfosEqual($n,Yn[tn])&&Xn.push(hn.selectMediaInfo(new jn({newMediaInfo:Yn[tn]})))}Promise.all(Xn).then(()=>{let zn=[];for(;de.length>0;){let Ut=de.pop(),hn=Ut.newMediaInfo;if(Bn=Ki(Ut.oldMediaInfo),!Bn)return;const $n=Bn.getRepresentation();Bn.setTrackSwitchInProgress(!0),zn.push(Bn.prepareTrackSwitch($n)),zn.push(Bn.selectMediaInfo(new jn({newMediaInfo:hn})))}return Promise.all(zn)}).then(()=>{en(),Bn&&Bn.setTrackSwitchInProgress(!1),R.trigger(x.default.STREAM_UPDATED,{streamInfo:Ye}),kn()}).catch(zn=>{q.error(zn)})})}},function(){try{Ee=(0,$e.default)(C).getInstance(),le=Ee.getLogger(ie),Tt(),je=Qc(C).getInstance(),me=Zc(C).create({updateEventName:x.default.SEGMENT_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:x.default.SEGMENT_LOCATION_BLACKLIST_ADD}),rt=Vh(C).create({streamInfo:Ye,mediaPlayerModel:z,dashMetrics:Q,errHandler:q,settings:Te,boxParser:je,dashConstants:M.default,urlUtils:P})}catch(Kt){throw Kt}}(),ie}Hd.__dashjs_factory_name="Stream";var kr=ue.default.getClassFactory(Hd),Kh=class{constructor(D){this.url=D||null,this.type=Xe.HTTPRequest.CONTENT_STEERING_TYPE,this.responseType="json"}},ou=class{constructor(){this.version=null,this.ttl=300,this.reloadUri=null,this.pathwayPriority=[],this.pathwayClones=[]}};function cc(){const D=this.context,C=Ne(D).getInstance();let R,P,F,z,Q,ne,B,oe,X,q,$,re,ve,Se,ke;function Ie(Ve){Ye(Ve,"baseUrl")}function Ce(Ve){Ye(Ve,"location")}function Le(Ve){var nt,rt;Ve&&Ve.throughputValues&&Ve.throughputValues.serviceLocation&&(nt=Ve.throughputValues.serviceLocation,rt=Ve.throughputValues,Q[nt]||(Q[nt]=[]),Q[nt].push(rt),Q[nt].length>4&&Q[nt].shift())}function Ye(Ve,nt){if(Ve&&Ve.request&&Ve.request.serviceLocation){const rt=Ve.request.serviceLocation;z[nt].all.indexOf(rt)===-1&&z[nt].all.push(rt),z[nt].current=rt}}function Te(){const Ve=$.getValue();let nt=ke.getContentSteering(Ve);return nt||(nt=re.getServiceDescriptionSettings().contentSteering),nt}function ie(){return new Promise(Ve=>{try{const nt=Te();if(!nt||!nt.serverUrl)return void Ve();const rt=function(me){let Ue=me.serverUrl;F&&F.reloadUri&&(Ue=C.isRelative(F.reloadUri)?C.resolve(F.reloadUri,me.serverUrl):F.reloadUri);const je=[],Ee=z.baseUrl.all.concat(z.location.all);if(Ee.length>0){const ye=Ee.map(qe=>{const tt=function(mt){if(!mt||!Q[mt]||Q[mt].length===0)return-1;const Tt=ve.getArithmeticMean(Q[mt],Q[mt].length,!0);return parseInt(1e3*Tt)}(qe);return{serviceLocation:qe,throughput:tt}});let de="",we="";ye.forEach((qe,tt)=>{tt!==0&&(de+=",",we+=","),de+=qe.serviceLocation,we+=qe.throughput>-1?qe.throughput:""}),je.push({key:"_DASH_pathway",value:`"${de}"`}),je.push({key:"_DASH_throughput",value:we})}return Ue=it.default.addAdditionalQueryParameterToUrl(Ue,je),Ue}(nt),fe=new Kh(rt);B.load({request:fe,success:me=>{(function(Ue){Ue&&Ue[M.default.CONTENT_STEERING_RESPONSE.VERSION]&&parseInt(Ue[M.default.CONTENT_STEERING_RESPONSE.VERSION])===1&&(F=new ou,F.version=Ue[M.default.CONTENT_STEERING_RESPONSE.VERSION],Ue[M.default.CONTENT_STEERING_RESPONSE.TTL]&&!isNaN(Ue[M.default.CONTENT_STEERING_RESPONSE.TTL])&&(F.ttl=Ue[M.default.CONTENT_STEERING_RESPONSE.TTL]),Ue[M.default.CONTENT_STEERING_RESPONSE.RELOAD_URI]&&(F.reloadUri=Ue[M.default.CONTENT_STEERING_RESPONSE.RELOAD_URI]),Ue[M.default.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]&&(F.pathwayPriority=Ue[M.default.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]),Ue[M.default.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES]&&(F.pathwayClones=Ue[M.default.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES],F.pathwayClones=F.pathwayClones.filter(je=>function(Ee){return Ee[M.default.CONTENT_STEERING_RESPONSE.BASE_ID]&&Ee[M.default.CONTENT_STEERING_RESPONSE.ID]&&Ee[M.default.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT]&&Ee[M.default.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][M.default.CONTENT_STEERING_RESPONSE.HOST]}(je))),Pe())})(me),Se.trigger(xe.default.CONTENT_STEERING_REQUEST_COMPLETED,{currentSteeringResponseData:F,url:rt}),Ve()},error:(me,Ue,je,Ee)=>{(function(ye,de){try{switch(P.warn("Error fetching data from content steering server",ye),de.status){case 410:break;case 429:const we=de&&de.getResponseHeader?de.getResponseHeader("retry-after"):null;we!==null&&(F||(F={}),F.ttl=parseInt(we)),Pe();break;default:Pe()}}catch(we){P.error(we)}})(me,Ee),Ve(me)},complete:()=>{z.baseUrl.all=le(z.baseUrl),z.location.all=le(z.location)}})}catch(nt){Ve(nt)}})}function le(Ve){return Ve.all&&Ve.all.length!==0&&Ve.current?Ve.all.filter(nt=>nt===Ve.current):[]}function he(Ve){try{const nt=[];return Ve&&Ve.length!==0&&F&&F.pathwayClones&&F.pathwayClones.length!==0&&F.pathwayClones.forEach(rt=>{let fe=Ve.filter(Ue=>rt[M.default.CONTENT_STEERING_RESPONSE.BASE_ID]===Ue.serviceLocation),me=null;if(fe&&fe.length>0&&(me=fe[0]),me){const Ue=new URL(me.url);let je=rt[M.default.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][M.default.CONTENT_STEERING_RESPONSE.HOST];je=it.default.stringHasProtocol(je)?je:`${Ue.protocol}//${je}`;const Ee={synthesizedUrl:`${je}${Ue.pathname}`,serviceLocation:rt[M.default.CONTENT_STEERING_RESPONSE.ID],queryParams:rt[M.default.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][M.default.CONTENT_STEERING_RESPONSE.PARAMS],reference:me};nt.push(Ee)}}),nt}catch(nt){return P.error(nt),[]}}function Pe(){F&&F.ttl&&!isNaN(F.ttl)&&(ne&&clearTimeout(ne),ne=setTimeout(()=>{ie()},1e3*F.ttl))}function Ge(){ne&&clearTimeout(ne),ne=null}function ze(){F=null,Q={},z={baseUrl:{current:null,all:[]},location:{current:null,all:[]}},Ge()}return R={reset:function(){ze(),Se.off(xe.default.FRAGMENT_LOADING_STARTED,Ie,R),Se.off(xe.default.MANIFEST_LOADING_STARTED,Ce,R),Se.off(xe.default.THROUGHPUT_MEASUREMENT_STORED,Le,R)},setConfig:function(Ve){Ve&&(Ve.adapter&&(ke=Ve.adapter),Ve.errHandler&&(oe=Ve.errHandler),Ve.dashMetrics&&(X=Ve.dashMetrics),Ve.mediaPlayerModel&&(q=Ve.mediaPlayerModel),Ve.manifestModel&&($=Ve.manifestModel),Ve.serviceDescriptionController&&(re=Ve.serviceDescriptionController),Ve.throughputController&&(ve=Ve.throughputController),Ve.eventBus&&(Se=Ve.eventBus))},loadSteeringData:ie,getCurrentSteeringResponseData:function(){return F},shouldQueryBeforeStart:function(){const Ve=Te();return!!Ve&&Ve.queryBeforeStart},getSteeringDataFromManifest:Te,stopSteeringRequestTimer:Ge,getSynthesizedBaseUrlElements:function(Ve){try{return he(Ve).map(nt=>{const rt=new Da(nt.synthesizedUrl,nt.serviceLocation);return rt.queryParams=nt.queryParams,rt.dvbPriority=nt.reference.dvbPriority,rt.dvbWeight=nt.reference.dvbWeight,rt.availabilityTimeOffset=nt.reference.availabilityTimeOffset,rt.availabilityTimeComplete=nt.reference.availabilityTimeComplete,rt})}catch(nt){return P.error(nt),[]}},getSynthesizedLocationElements:function(Ve){try{return he(Ve).map(nt=>{const rt=new hr(nt.synthesizedUrl,nt.serviceLocation);return rt.queryParams=nt.queryParams,rt})}catch(nt){return P.error(nt),[]}},initialize:function(){B=pa(D).create({errHandler:oe,dashMetrics:X,mediaPlayerModel:q,errors:ce}),Se.on(xe.default.FRAGMENT_LOADING_STARTED,Ie,R),Se.on(xe.default.MANIFEST_LOADING_STARTED,Ce,R),Se.on(xe.default.THROUGHPUT_MEASUREMENT_STORED,Le,R)}},P=(0,$e.default)(D).getInstance().getLogger(R),ze(),R}cc.__dashjs_factory_name="ContentSteeringController";var Pu=ue.default.getSingletonFactory(cc);function dc(){const D=this.context,C=(0,ge.default)(D).getInstance();let R,P,F;return R={select:function(z){if(!z||z.length===0)return null;let Q=null;return C.get().streaming.applyContentSteering&&(Q=function(ne){const B=F.getCurrentSteeringResponseData();return B&&B.pathwayPriority&&B.pathwayPriority.length>0?function(){let oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],q=0,$=null;for(;q<oe.length;){const re=oe[q],ve=X.findIndex(Se=>Se.serviceLocation&&Se.serviceLocation===re);if(ve!==-1&&!P.contains(X[ve].serviceLocation)){$=X[ve];break}q+=1}return $}(B.pathwayPriority,ne):null}(z)),Q||(Q=function(ne){return ne[0]}(z)),Q},setConfig:function(z){z.blacklistController&&(P=z.blacklistController),z.contentSteeringController&&(F=z.contentSteeringController)},reset:function(){P.reset()}},P=Zc(D).create({updateEventName:x.default.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:x.default.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD}),F=Pu(D).getInstance(),R}dc.__dashjs_factory_name="LocationSelector";var xs=ue.default.getClassFactory(dc);function Bo(){const D=this.context,C=(0,K.default)(D).getInstance(),R=Ne(D).getInstance();let P,F,z,Q,ne,B,oe,X,q,$,re,ve,Se,ke;function Ie(){z=NaN,oe=!1,ne=!0,B=!1,Ce()}function Ce(){Q!==null&&(clearTimeout(Q),Q=null)}function Le(ze){Ce(),B||(isNaN(ze)&&!isNaN(z)&&(ze=1e3*z),isNaN(ze)||(F.debug("Refresh manifest in "+ze+" milliseconds."),Q=setTimeout(ie,ze)))}function Ye(){let ze=arguments.length>0&&arguments[0]!==void 0&&arguments[0];oe=!0;const Ve=q.getValue();let nt=Ve.url;nt&&(nt=it.default.removeQueryParameterFromUrl(nt,j.default.CMCD_QUERY_KEY));let rt=null;const fe=re.getPatchLocation(Ve),me=$.select(fe);let Ue=null;if(me&&!ze)nt=me.url,rt=me.serviceLocation,Ue=me.queryParams;else{const je=function(ye){const de=re.getLocation(ye),we=Se.getSynthesizedLocationElements(de);return de.concat(we)}(Ve),Ee=$.select(je);Ee&&(nt=Ee.url,rt=Ee.serviceLocation,Ue=Ee.queryParams)}R.isRelative(nt)&&(nt=R.resolve(nt,Ve.url)),X.load(nt,rt,Ue)}function Te(ze){if(ze){if(re.getIsPatch(ze)){let rt=ze;ze=q.getValue();let fe=re.isPatchValid(ze,rt),me=fe;if(fe){let Ue=re.getPublishTime(ze);re.applyPatchToManifest(ze,rt);let je=re.getPublishTime(ze);me=Ue.getTime()!==je.getTime()}if(!me)return F.debug("Patch provided is invalid, performing full manifest refresh"),void Ye(!0);ze.loadedTime=new Date}}else(ze=q.getValue()).loadedTime=new Date;if(q.getValue()&&q.getValue().type===M.default.DYNAMIC&&ze.type===M.default.STATIC)return C.trigger(x.default.DYNAMIC_TO_STATIC),oe=!1,void(B=!0);q.setValue(ze);const Ve=new Date,nt=(Ve.getTime()-ze.loadedTime.getTime())/1e3;z=re.getManifestUpdatePeriod(ze,nt),1e3*z>2147483647&&(z=2147483647e-3),C.trigger(x.default.MANIFEST_UPDATED,{manifest:ze}),F.info("Manifest has been refreshed at "+Ve+"["+Ve.getTime()/1e3+"] "),ne||Le()}function ie(){ne||(oe?Le(ke.get().streaming.manifestUpdateRetryInterval):Ye())}function le(ze){ze.error?ze.error.code===ce.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&ve.error(ze.error):Te(ze.manifest)}function he(){ne=!1,Le()}function Pe(){ne=!ke.get().streaming.scheduling.scheduleWhilePaused,ne&&Ce()}function Ge(){oe=!1}return P={initialize:function(){Ie(),C.on(x.default.STREAMS_COMPOSED,Ge,this),C.on(xe.default.PLAYBACK_STARTED,he,this),C.on(xe.default.PLAYBACK_PAUSED,Pe,this),C.on(x.default.INTERNAL_MANIFEST_LOADED,le,this)},setManifest:function(ze){Te(ze)},refreshManifest:Ye,getIsUpdating:function(){return oe},setConfig:function(ze){ze&&(ze.manifestModel&&(q=ze.manifestModel),ze.adapter&&(re=ze.adapter),ze.manifestLoader&&(X=ze.manifestLoader),ze.errHandler&&(ve=ze.errHandler),ze.locationSelector&&($=ze.locationSelector),ze.settings&&(ke=ze.settings),ze.contentSteeringController&&(Se=ze.contentSteeringController))},reset:function(){C.off(xe.default.PLAYBACK_STARTED,he,this),C.off(xe.default.PLAYBACK_PAUSED,Pe,this),C.off(x.default.STREAMS_COMPOSED,Ge,this),C.off(x.default.INTERNAL_MANIFEST_LOADED,le,this),Ie()}},F=(0,$e.default)(D).getInstance().getLogger(P),$=xs(D).create(),P}Bo.__dashjs_factory_name="ManifestUpdater";var Mu=ue.default.getClassFactory(Bo);function mo(){const D=this.context,C=(0,K.default)(D).getInstance(),R=Ne(D).getInstance();let P,F,z,Q,ne,B,oe,X,q,$,re,ve,Se,ke,Ie,Ce;function Le(){X=[],q=[],$=null,re=null,Se=null,ve=NaN,z=!1,Q=!1,ke=ne.get().streaming.utcSynchronization.timeBetweenSyncAttempts}function Ye(){ne.get().streaming.utcSynchronization.enabled&&!z&&!Q&&Se&&Se.value&&Se.schemeIdUri&&!isNaN(ve)&&!isNaN(ne.get().streaming.utcSynchronization.backgroundAttempts)&&(re&&(Date.now()-re)/1e3<30||(X=[],Q=!0,Te(isNaN(ne.get().streaming.utcSynchronization.backgroundAttempts)?2:ne.get().streaming.utcSynchronization.backgroundAttempts)))}function Te(Ee){try{if(Ee<=0)return void Ue();const ye=Date.now();B[Se.schemeIdUri](Se.value,function(de){const we=Date.now(),qe=le(ye,we,de);X.push(qe),Te(Ee-1)},function(){Ue()})}catch{Ue()}}function ie(){let Ee=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:null)||0;if(!q||q.length===0||Ee>=q.length)return void he();let ye=q[Ee];if(ye)if(B.hasOwnProperty(ye.schemeIdUri)){const de=new Date().getTime();B[ye.schemeIdUri](ye.value,function(we){const qe=new Date().getTime(),tt=le(de,qe,we);Se=ye,he(tt)},function(){ie(Ee+1)})}else ie(Ee+1);else he()}function le(Ee,ye,de){return de-(ye-(ye-Ee)/2)}function he(){let Ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:NaN,ye=isNaN(Ee);ye&&ne.get().streaming.utcSynchronization.useManifestDateHeaderTimeSource?function(){let de=oe.getLatestMPDRequestHeaderValueByID("Date"),we=de!==null?new Date(de).getTime():Number.NaN;isNaN(we)?me(!0):me(!1,we-Date.now())}():me(ye,Ee)}function Pe(Ee){let ye=Date.parse(Ee);return isNaN(ye)&&(ye=function(de){let we,qe,tt=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(de);return we=Date.UTC(parseInt(tt[1],10),parseInt(tt[2],10)-1,parseInt(tt[3],10),parseInt(tt[4],10),parseInt(tt[5],10),tt[6]&&(parseInt(tt[6],10)||0),tt[7]&&1e3*parseFloat(tt[7])||0),tt[9]&&tt[10]&&(qe=60*parseInt(tt[9],10)+parseInt(tt[10],10),we+=(tt[8]==="+"?-1:1)*qe*60*1e3),new Date(we).getTime()}(Ee)),ye}function Ge(Ee){return Date.parse(Ee)}function ze(Ee){return Date.parse(Ee)}function Ve(Ee,ye,de){de()}function nt(Ee,ye,de){let we=Pe(Ee);isNaN(we)?de():ye(we)}function rt(Ee,ye,de,we,qe){let tt,mt,Tt=!1,Vt=new XMLHttpRequest,Jt=qe?Xe.HTTPRequest.HEAD:Xe.HTTPRequest.GET,yn=ye.match(/\S+/g);if(ye=yn.shift(),tt=function(){Tt||(Tt=!0,yn.length?rt(Ee,yn.join(" "),de,we,qe):we())},mt=function(){let Cn,Kn;Vt.status===200&&(Cn=qe?Vt.getResponseHeader("Date"):Vt.response,Kn=Ee(Cn),isNaN(Kn)||(de(Kn),Tt=!0))},R.isRelative(ye)){const Cn=Ce.resolve();Cn&&(ye=R.resolve(ye,Cn.url))}Vt.open(Jt,ye),Vt.timeout=5e3,Vt.onload=mt,Vt.onloadend=tt,Vt.send()}function fe(Ee,ye,de){rt(ze,Ee,ye,de,!0)}function me(Ee,ye){if(isNaN(ve)||isNaN(ye)||Ee||function(de){try{const we=je(de),qe=isNaN(ke)?30:ke,tt=isNaN(ne.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor)?2:ne.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor,mt=isNaN(ne.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts)?600:ne.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts,Tt=isNaN(ne.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts)?2:ne.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts;let Vt;we?(Vt=Math.min(qe*tt,mt),F.debug(`Increasing timeBetweenSyncAttempts to ${Vt}`)):(Vt=Math.max(qe/tt,Tt),F.debug(`Decreasing timeBetweenSyncAttempts to ${Vt}`)),ke=Vt}catch{}}(ye),!Ee&&!isNaN(ye)){$=Date.now(),z=!1;const de=isNaN(ve);ve=ye,de&&Ye(),F.debug(`Completed UTC sync. Setting client - server offset to ${ye}`)}Ee&&(Se=null,z=!1,Ie.error(new Ze.default(ce.TIME_SYNC_FAILED_ERROR_CODE,ce.TIME_SYNC_FAILED_ERROR_MESSAGE))),C.trigger(x.default.UPDATE_TIME_SYNC_OFFSET,{offset:ye}),C.trigger(x.default.TIME_SYNCHRONIZATION_COMPLETED)}function Ue(){if(!X||X.length===0)return;const Ee=X.reduce((ye,de)=>ye+de,0)/X.length;je(Ee)?F.debug("Completed background UTC sync. Offset is within allowed threshold and is not adjusted."):(F.debug(`Completed background UTC sync. Setting client - server offset to ${Ee}`),ve=Ee,C.trigger(x.default.UPDATE_TIME_SYNC_OFFSET,{offset:ve})),Q=!1,re=Date.now()}function je(Ee){try{if(isNaN(ve))return!0;const ye=ne.get().streaming.utcSynchronization.maximumAllowedDrift&&!isNaN(ne.get().streaming.utcSynchronization.maximumAllowedDrift)?ne.get().streaming.utcSynchronization.maximumAllowedDrift:100;return Ee>=ve-ye&&Ee<=ve+ye}catch{return!0}}return P={initialize:function(){Le(),B={"urn:mpeg:dash:utc:http-head:2014":fe,"urn:mpeg:dash:utc:http-xsdate:2014":rt.bind(null,Pe),"urn:mpeg:dash:utc:http-iso:2014":rt.bind(null,Ge),"urn:mpeg:dash:utc:direct:2014":nt,"urn:mpeg:dash:utc:http-head:2012":fe,"urn:mpeg:dash:utc:http-xsdate:2012":rt.bind(null,Pe),"urn:mpeg:dash:utc:http-iso:2012":rt.bind(null,Ge),"urn:mpeg:dash:utc:direct:2012":nt,"urn:mpeg:dash:utc:http-ntp:2014":Ve,"urn:mpeg:dash:utc:ntp:2014":Ve,"urn:mpeg:dash:utc:sntp:2014":Ve}},attemptSync:function(Ee,ye){q=Ee,z||(function(de){try{if(!de||!ne.get().streaming.utcSynchronization.enabled)return!1;const we=isNaN(ke)?30:ke;return!($&&we&&!isNaN(we))||(Date.now()-$)/1e3>=we}catch{return!0}}(ye)?(z=!0,ie()):C.trigger(x.default.TIME_SYNCHRONIZATION_COMPLETED))},setConfig:function(Ee){Ee&&(Ee.dashMetrics&&(oe=Ee.dashMetrics),Ee.baseURLController&&(Ce=Ee.baseURLController),Ee.errHandler&&(Ie=Ee.errHandler),Ee.settings&&(ne=Ee.settings))},reset:function(){Le(),C.off(x.default.ATTEMPT_BACKGROUND_SYNC,Ye,P)}},F=(0,$e.default)(D).getInstance().getLogger(P),C.on(x.default.ATTEMPT_BACKGROUND_SYNC,Ye,P),P}mo.__dashjs_factory_name="TimeSyncController";const ed=ue.default.getSingletonFactory(mo);ed.HTTP_TIMEOUT_MS=5e3,ue.default.updateSingletonFactory(mo.__dashjs_factory_name,ed);var td=ed;function Hf(){let D,C,R,P,F;const z=this.context,Q=(0,K.default)(z).getInstance();return D={attachMediaSource:function(ne){let B=window.URL.createObjectURL(C);return ne.setSource(B),P==="managedMediaSource"&&(ne.setDisableRemotePlayback(!0),C.addEventListener("startstreaming",()=>{Q.trigger(xe.default.MANAGED_MEDIA_SOURCE_START_STREAMING)}),C.addEventListener("endstreaming",()=>{Q.trigger(xe.default.MANAGED_MEDIA_SOURCE_END_STREAMING)})),B},createMediaSource:function(){let ne="WebKitMediaSource"in window,B="MediaSource"in window;return"ManagedMediaSource"in window?(C=new ManagedMediaSource,P="managedMediaSource",F.info("Created ManagedMediaSource")):B?(C=new MediaSource,P="mediaSource",F.info("Created MediaSource")):ne&&(C=new WebKitMediaSource,F.info("Created WebkitMediaSource")),C},detachMediaSource:function(ne){ne.setSource(null)},setConfig:function(ne){ne&&ne.settings&&(R=ne.settings)},setDuration:function ne(B){C&&C.readyState==="open"&&(B===null&&isNaN(B)||C.duration!==B&&(B!==1/0||R.get().streaming.buffer.mediaSourceDurationInfinity||(B=Math.pow(2,32)),function(oe){let X=oe.sourceBuffers;for(let q=0;q<X.length;q++)if(X[q].updating)return!0;return!1}(C)?setTimeout(ne.bind(null,B),50):(F.info("Set MediaSource duration:"+B),C.duration=B)))},setSeekable:function(ne,B){C&&typeof C.setLiveSeekableRange=="function"&&typeof C.clearLiveSeekableRange=="function"&&C.readyState==="open"&&ne>=0&&ne<B&&(C.clearLiveSeekableRange(),C.setLiveSeekableRange(ne,B))},signalEndOfStream:function(ne){if(!ne||ne.readyState!=="open")return;let B=ne.sourceBuffers;for(let oe=0;oe<B.length;oe++)if(B[oe].updating||B[oe].buffered.length===0)return;F.info("call to mediaSource endOfStream"),ne.endOfStream()}},F=(0,$e.default)(z).getInstance().getLogger(D),D}Hf.__dashjs_factory_name="MediaSourceController";var fc=ue.default.getSingletonFactory(Hf);function Dl(){const D="urn:mpeg:dash:event:2012",R="urn:mpeg:dash:event:callback:2015",z="discarded",Q="updated",ne="added",B=this.context,oe=(0,K.default)(B).getInstance();let X,q,$,re,ve,Se,ke,Ie,Ce,Le,Ye;function Te(){if(!ke||!Ie)throw new Error("setConfig function has to be called previously")}function ie(){Ye=!1,$={},re={},ve=null,Le=!1,Se=Date.now()/1e3}function le(){try{if(!Le){Le=!0;const me=Ie.getTime();let Ue=me-Se;Ue=Se>0?Math.max(0,Ue):0,he(re,Ue,me),he($,Ue,me),Pe(re),Pe($),Se=me,Le=!1}}catch(me){Le=!1,q.error(me)}}function he(me,Ue,je){try{nt(me,function(ye){if(ye!==void 0){const de=isNaN(ye.duration)?0:ye.duration;ye.calculatedPresentationTime<=je&&ye.calculatedPresentationTime+Ue+de>=je?fe(ye,xe.default.EVENT_MODE_ON_START):(rt(je,de+Ue,ye.calculatedPresentationTime)||function(we){try{const qe=we.eventStream.period.start+we.eventStream.period.duration;return we.calculatedPresentationTime>qe}catch(qe){return q.error(qe),!1}}(ye))&&(q.debug(`Removing event ${ye.id} from period ${ye.eventStream.period.id} as it is expired or invalid`),function(we,qe){try{const tt=qe.eventStream.schemeIdUri,mt=qe.eventStream.period.id,Tt=qe.eventStream.value,Vt=qe.id;we[mt][tt]=we[mt][tt].filter(Jt=>Tt&&Jt.eventStream.value&&Jt.eventStream.value!==Tt||Jt.id!==Vt),we[mt][tt].length===0&&delete we[mt][tt]}catch(tt){q.error(tt)}}(me,ye))}})}catch(Ee){q.error(Ee)}}function Pe(me){try{for(const Ue in me)me.hasOwnProperty(Ue)&&Object.keys(me[Ue]).length===0&&delete me[Ue]}catch(Ue){q.error(Ue)}}function Ge(me,Ue){let je=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const Ee=me.eventStream.schemeIdUri,ye=me.eventStream.value,de=me.id;let we=z;Ue[Ee]||(Ue[Ee]=[]);const qe=Ue[Ee].findIndex(tt=>(!ye||tt.eventStream.value&&tt.eventStream.value===ye)&&tt.id===de);if(qe===-1)Ue[Ee].push(me),me.triggeredReceivedEvent=!1,me.triggeredStartEvent=!1,we=ne;else if(je){const tt=Ue[Ee][qe];me.triggeredReceivedEvent=tt.triggeredReceivedEvent,me.triggeredStartEvent=tt.triggeredStartEvent,Ue[Ee][qe]=me,we=Q}return we}function ze(me){try{if(me.eventStream.value==1){const Ue=me.calculatedPresentationTime;let je;je=me.calculatedPresentationTime==4294967295?NaN:me.calculatedPresentationTime+me.duration,oe.trigger(xe.default.MANIFEST_VALIDITY_CHANGED,{id:me.id,validUntil:Ue,newDuration:je,newManifestValidAfter:NaN},{mode:xe.default.EVENT_MODE_ON_START})}}catch(Ue){q.error(Ue)}}function Ve(me){try{const Ue=Ie.getTime();nt(me,function(je){const Ee=je.eventStream&&je.eventStream.period&&!isNaN(je.eventStream.period.duration)?je.eventStream.period.duration:NaN,ye=je.eventStream&&je.eventStream.period&&!isNaN(je.eventStream.period.start)?je.eventStream.period.start:NaN;if(isNaN(Ee)||isNaN(ye))return;const de=je.calculatedPresentationTime;Math.abs(de-Ue)<300&&fe(je,xe.default.EVENT_MODE_ON_START)})}catch(Ue){q.error(Ue)}}function nt(me,Ue){try{if(me){const je=Object.keys(me);for(let Ee=0;Ee<je.length;Ee++){const ye=me[je[Ee]],de=Object.keys(ye);for(let we=0;we<de.length;we++)ye[de[we]].forEach(qe=>{qe!==void 0&&Ue(qe)})}}}catch(je){q.error(je)}}function rt(me,Ue,je){try{return me-Ue>je}catch(Ee){return q.error(Ee),!1}}function fe(me,Ue){try{const je=Ie.getTime(),Ee=me.id;if(Ue===xe.default.EVENT_MODE_ON_RECEIVE&&!me.triggeredReceivedEvent)return q.debug(`Received event ${Ee}`),me.triggeredReceivedEvent=!0,void oe.trigger(me.eventStream.schemeIdUri,{event:me},{mode:Ue});me.triggeredStartEvent||(me.eventStream.schemeIdUri===D&&me.eventStream.value==1?me.duration===0&&me.presentationTimeDelta===0||(q.debug(`Starting manifest refresh event ${Ee} at ${je}`),function(){try{Te(),ke.refreshManifest()}catch(ye){q.error(ye)}}()):me.eventStream.schemeIdUri===R&&me.eventStream.value==1?(q.debug(`Starting callback event ${Ee} at ${je}`),function(ye){try{let de=Ws(B).create({});const we=new oc({method:"get",url:ye,responseType:"arraybuffer",customData:{}}),qe=new Bf({request:we});de.load(we,qe)}catch(de){q.error(de)}}(me.messageData instanceof Uint8Array?it.default.uint8ArrayToString(me.messageData):me.messageData)):(q.debug(`Starting event ${Ee} from period ${me.eventStream.period.id} at ${je}`),oe.trigger(me.eventStream.schemeIdUri,{event:me},{mode:Ue}),Ce.get().streaming.events.deleteEventMessageDataTimeout>-1&&setTimeout(()=>{delete me.messageData,delete me.parsedMessageData},Ce.get().streaming.events.deleteEventMessageDataTimeout)),me.triggeredStartEvent=!0)}catch(je){q.error(je)}}return X={addInlineEvents:function(me,Ue){try{if(Te(),$[Ue]||($[Ue]={}),me)for(let je=0;je<me.length;je++){let Ee=me[je];if(!rt(Ie.getTime(),isNaN(Ee.duration)?0:Ee.duration,Ee.calculatedPresentationTime)){let ye=Ge(Ee,$[Ue],!0);ye===ne?(q.debug(`Added inline event with id ${Ee.id} from period ${Ue}`),fe(Ee,xe.default.EVENT_MODE_ON_RECEIVE)):ye===Q&&q.debug(`Updated inline event with id ${Ee.id} from period ${Ue}`)}}}catch(je){throw je}},addInbandEvents:function(me,Ue){try{Te(),re[Ue]||(re[Ue]={});for(let je=0;je<me.length;je++){let Ee=me[je];rt(Ie.getTime(),isNaN(Ee.duration)?0:Ee.duration,Ee.calculatedPresentationTime)||(Ge(Ee,re[Ue],!1)===ne?(Ee.eventStream.schemeIdUri===D&&ze(Ee),q.debug(`Added inband event with id ${Ee.id} from period ${Ue}`),fe(Ee,xe.default.EVENT_MODE_ON_RECEIVE)):q.debug(`Inband event with scheme_id_uri ${Ee.eventStream.schemeIdUri}, value ${Ee.eventStream.value}, period id ${Ue} and event id ${Ee.id} was ignored because it has been added before.`))}le()}catch(je){throw je}},getInbandEvents:function(){return re},getInlineEvents:function(){return $},start:function(){try{Te(),q.debug("Start Event Controller");const me=Ce.get().streaming.events.eventControllerRefreshDelay;Ye||isNaN(me)||(Ye=!0,ve=setInterval(le,me))}catch(me){throw me}},setConfig:function(me){try{if(!me)return;me.manifestUpdater&&(ke=me.manifestUpdater),me.playbackController&&(Ie=me.playbackController),me.settings&&(Ce=me.settings)}catch(Ue){throw Ue}},reset:function(){(function(){try{ve!==null&&Ye&&(clearInterval(ve),ve=null,Ye=!1,function(){try{Ve(re),Ve($)}catch(me){q.error(me)}}())}catch(me){throw me}})(),ie()}},q=(0,$e.default)(B).getInstance().getLogger(X),ie(),X}Dl.__dashjs_factory_name="EventController";var hc=ue.default.getSingletonFactory(Dl),Xa={LEVELS:{WARNING:"Warning",ERROR:"Error"},EVENTS:{NO_UTC_TIMING_ELEMENT:{key:"NO_UTC_TIMING_ELEMENT",message:"No UTCTiming element is present in the manifest. You may experience playback failures. For a detailed validation use https://conformance.dashif.org/"},NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE:{key:"NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE",message:'SMPTE 2052-1:2013 defines the attribute name as "imageType" and does not define "imagetype"'},INVALID_DVR_WINDOW:{key:"INVALID_DVR_WINDOW",message:"No valid segment found when applying a specification compliant DVR window calculation. Using SegmentTimeline entries as a fallback."}}},nd=n(445),id=n(1923);function Gd(){const D=this.context,C=(0,K.default)(D).getInstance();let R,P,F,z,Q,ne,B,oe,X,q,$,re,ve,Se,ke,Ie,Ce,Le,Ye,Te,ie,le,he,Pe,Ge,ze,Ve,nt,rt,fe,me,Ue,je,Ee,ye,de,we,qe,tt,mt,Tt,Vt,Jt,yn,Cn,Kn,Zn,gi,_n;function ri(){if(!(ne&&ne.hasOwnProperty("load")&&le&&le.hasOwnProperty("initialize")&&le.hasOwnProperty("reset")&&le.hasOwnProperty("getClientTimeOffset")&&B&&ie&&X&&ye))throw new Error(j.default.MISSING_CONFIG_ERROR)}function pi(){(function(){try{const qt=oe.getStreamsInfo();if(!Pe&&qt.length===0)throw new Error("There are no periods in the MPD");Pe&&qt.length>0&&X.updateManifestUpdateInfo({currentTime:ye.getTime(),buffered:Ee.getBufferRange(),presentationStartTime:qt[0].start,clientTimeOffset:le.getClientTimeOffset()}),he.length>0&&function(oi){oi.length!==0?he=he.filter(mi=>{const Yi=oi.filter(br=>br.id===mi.getId()).length>0||mi.getId()===Pe.getId();return Yi||(P.debug(`Removing stream ${mi.getId()}`),mi.reset(!0),mi=null),Yi}):P.warn("No periods included in the current manifest. Skipping the filtering of outdated stream objects.")}(qt);const Dn=[];for(let oi=0,mi=qt.length;oi<mi;oi++){const Yi=qt[oi];Dn.push(Ki(Yi)),X.addManifestUpdateStreamInfo(Yi)}Promise.all(Dn).then(()=>new Promise((oi,mi)=>{Pe?oi():bi(qt,oi,mi)})).then(()=>{C.trigger(x.default.STREAMS_COMPOSED),Fn()}).catch(oi=>{throw oi})}catch(qt){ie.error(new Ze.default(ce.MANIFEST_ERROR_ID_NOSTREAMS_CODE,qt.message+" nostreamscomposed",B.getValue())),Ue=!0,ch()}})()}function Gi(){Kn=!0}function Ki(qt){let Dn=_o(qt.id);return Dn?Dn.updateData(qt):(Dn=kr(D).create({manifestModel:B,mediaPlayerModel:we,dashMetrics:X,manifestUpdater:Q,adapter:oe,timelineConverter:le,capabilities:F,capabilitiesFilter:z,errHandler:ie,baseURLController:ve,segmentBaseController:Se,textController:ze,abrController:Ie,playbackController:ye,throughputController:Ce,eventController:Ye,mediaController:Le,protectionController:Ge,videoModel:Ee,streamInfo:qt,settings:Cn}),he.push(Dn),Dn.initialize(),Promise.resolve())}function bi(qt,Dn,oi){try{$n();const mi=X.getCurrentDVRInfo().range;if(mi.end<mi.start){Zn&&clearTimeout(Zn);const br=Math.min(1e3*(-1*(mi.end-mi.start)+2),2147483647);return P.debug(`Waiting for ${br} ms before playback can start`),C.trigger(x.default.AST_IN_FUTURE,{delay:br}),void(Zn=setTimeout(()=>{bi(qt,Dn,oi)},br))}Cn.get().streaming.applyProducerReferenceTime&&de.calculateProducerReferenceTimeOffsets(qt);const Yi=qt[0].manifestInfo;if(Cn.get().streaming.applyServiceDescription&&de.applyServiceDescription(Yi),oe.getIsDynamic()){const br=bc(0,Yi);ye.computeAndSetLiveDelay(br,Yi)}(Cn.get().streaming.applyContentSteering&&re.shouldQueryBeforeStart()?re.loadSteeringData():Promise.resolve()).then(()=>{const br=B.getValue();br&&ve.update(br),Nt(),Dn()}).catch(br=>{P.error(br),Nt(),Dn()})}catch(mi){oi(mi)}}function Nt(){const qt=function(){let mi;if(oe.getIsDynamic()){const Yi=X.getCurrentDVRInfo();mi=(Yi&&Yi.range?Yi.range.end:0)-ye.getOriginalLiveDelay();const br=Yi?Yi.range:null;if(br){if(isNaN(gi)&&gi.toString().indexOf("posix:")===-1){const io=Is(!0);isNaN(io)||(P.info(`Start time from URI parameters: ${io}`),mi=Math.min(mi,io))}else{P.info(`Start time provided by the app: ${gi}`);const io=Ko(!0,gi);isNaN(io)||(mi=Math.min(mi,io))}const Cs=Cn.get().streaming.timeShiftBuffer.calcFromSegmentTimeline?.1:0;mi=Math.max(mi,br.start+Cs)}}else if(mi=yp()[0].getStreamInfo().start,isNaN(gi)){const Yi=Is(!1);isNaN(Yi)||(P.info(`Start time from URI parameters: ${Yi}`),mi=Math.max(mi,Yi))}else{P.info(`Start time provided by the app: ${gi}`);const Yi=Ko(!1,gi);isNaN(Yi)||(mi=Math.max(mi,Yi))}return mi}();let Dn=hn(qt);const oi=Dn!==null?Dn:he[0];C.trigger(x.default.INITIAL_STREAM_SWITCH,{startTime:qt}),rn(oi,null,qt),Vt||(Vt=setInterval(function(){!fe&&ye.getTimeToStreamEnd()<=0&&!ye.isSeeking()&&C.trigger(x.default.PLAYBACK_ENDED,{isLast:dl().isLast})},200))}function rn(qt,Dn,oi){try{if(fe||!qt||Dn===qt&&qt.getIsActive())return;fe=!0,C.trigger(x.default.PERIOD_SWITCH_STARTED,{fromStreamInfo:Dn?Dn.getStreamInfo():null,toStreamInfo:qt.getStreamInfo()});let mi=!1,Yi=[];Pe=qt,Dn&&(mi=zn(qt,Dn),Yi=qn(Dn),Dn.deactivate(mi)),oi=isNaN(oi)?!mi&&Dn?qt.getStreamInfo().start:NaN:oi,P.info(`Switch to stream ${qt.getId()}. Seektime is ${oi}, current playback time is ${ye.getTime()}. Seamless period switch is set to ${mi}`),yn=yn.filter(br=>br.getId()!==Pe.getId()),ye.initialize(dl(),!!Dn),Ee.getElement()?en({seekTime:oi,keepBuffers:mi,streamActivated:!1,representationsFromPreviousPeriod:Yi}):gn({seekTime:oi,keepBuffers:mi})}catch{fe=!1}}function en(qt){let Dn;function oi(){if(!je||je.readyState!=="open")return;P.debug("MediaSource is open!"),window.URL.revokeObjectURL(Dn),je.removeEventListener("sourceopen",oi),je.removeEventListener("webkitsourceopen",oi),Nr();const Yi=X.getCurrentDVRInfo();q.setSeekable(Yi.range.start,Yi.range.end),qt.streamActivated?(isNaN(qt.seekTime)||ye.seek(qt.seekTime,!0,!0),Pe.setMediaSource(je).then(()=>{Pe.initializeForTextWithMediaSource(je)})):gn(qt)}function mi(){je.addEventListener("sourceopen",oi,!1),je.addEventListener("webkitsourceopen",oi,!1),Dn=q.attachMediaSource(Ee),P.debug("MediaSource attached to element.  Waiting on open...")}je?qt.keepBuffers?gn(qt):(q.detachMediaSource(Ee),mi()):(je=q.createMediaSource(),mi())}function gn(qt){const Dn=qt.representationsFromPreviousPeriod||[];Pe.activate(je,qt.keepBuffers?Jt:void 0,Dn).then(oi=>{oi&&(Jt=oi),isNaN(qt.seekTime)||(C.trigger(x.default.SEEK_TARGET,{time:qt.seekTime},{streamId:Pe.getId()}),ye.seek(qt.seekTime,!1,!0),Pe.startScheduleControllers()),fe=!1,C.trigger(x.default.PERIOD_SWITCH_COMPLETED,{toStreamInfo:dl()})})}function qn(qt){return(qt?qt.getStreamProcessors():[]).map(Dn=>Dn.getRepresentation())}function Kt(qt){const Dn=hn(qt.seekTime);Dn&&Dn!==Pe?Dn&&Dn!==Pe&&(kn(),function(oi,mi){const Yi=oi&&!isNaN(oi.seekTime)?oi.seekTime:NaN,br=Pe.getStreamProcessors().map(Cs=>Cs.prepareOuterPeriodPlaybackSeeking(oi));Promise.all(br).then(()=>{rn(mi,Pe,Yi)}).catch(Cs=>{ie.error(Cs)})}(qt,Dn)):(kn(),function(oi){Pe.getStreamProcessors().forEach(mi=>mi.prepareInnerPeriodPlaybackSeeking(oi)),Eo(ft.USER_REQUEST_STOP_REASON)}(qt)),bo(Ke.SEEK_START_REASON)}function kn(){Bn()}function Bn(){yn&&yn.length>0&&(yn.forEach(qt=>{qt.deactivate(!0)}),yn=[])}function Xn(qt){if(qt.newMediaInfo.streamInfo.id===Pe.getId()){if(Bn(),Cn.get().streaming.buffer.resetSourceBuffersForTrackSwitch&&qt.oldMediaInfo&&qt.oldMediaInfo.codec!==qt.newMediaInfo.codec){const Dn=ye.getTime();return Pe.deactivate(!1),void en({seekTime:Dn,keepBuffers:!1,streamActivated:!1})}Pe.prepareTrackChange(qt)}}function zn(qt,Dn){try{return Cn.get().streaming.buffer.reuseExistingSourceBuffers&&(F.isProtectionCompatible(Dn.getStreamInfo(),qt.getStreamInfo())||Kn)&&F.supportsChangeType()&&Cn.get().streaming.buffer.useChangeType}catch{return!1}}function Ut(qt){let Dn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(je&&!qt.getPreloaded()&&zn(qt,Dn)){const oi=qn(Dn);qt.startPreloading(je,Jt,oi).then(()=>{yn.push(qt)})}}function hn(qt){if(isNaN(qt))return null;const Dn=he.length;for(let oi=0;oi<Dn;oi++){const mi=he[oi];if(qt<parseFloat((mi.getStartTime()+mi.getDuration()).toFixed(5)))return mi}return null}function $n(){try{const qt=oe.getIsDynamic(),Dn=oe.getStreamsInfo()[0].manifestInfo,oi=ye.getTime(),mi=le.calcTimeShiftBufferWindow(he,qt),Yi=_i();if(mi.start===void 0||mi.end===void 0)return;Yi&&Yi.length!==0?Yi.forEach(br=>{X.addDVRInfo(br.getType(),oi,Dn,mi)}):X.addDVRInfo(j.default.VIDEO,oi,Dn,mi)}catch{}}function Yn(qt){if(mt&&rt){const Dn=we.getInitialBufferLevel(),oi=[j.default.TEXT];(isNaN(Dn)||Dn<=ye.getBufferLevel(oi)||oe.getIsDynamic()&&Dn>ye.getLiveDelay())&&(mt=!1,bo(Ke.INITIAL_PLAYOUT_START_REASON),ye.play())}qt&&qt.mediaType&&X.addBufferLevel(qt.mediaType,new Date,1e3*qt.bufferLevel)}function tn(qt){qt.streamInfo.id===Pe.getId()&&Bn(),_o(qt.streamInfo.id).prepareQualityChange(qt)}function Je(){if(oe.getIsDynamic()&&ye.getOriginalLiveDelay()!==0&&Pe){const qt=oe.getStreamsInfo();if(qt.length>0){const Dn=qt[0].manifestInfo,oi=bc(0,Dn);ye.computeAndSetLiveDelay(oi,Dn)}}}function Ot(){if(cl()){const qt=Ee.getPlaybackQuality();qt&&X.addDroppedFrames(qt)}}function an(){P.debug("[onPlaybackStarted]"),!mt&&tt&&bo(Ke.RESUME_FROM_PAUSE_START_REASON),mt&&(mt=!1),Tt&&(Tt=!1,Cn.get().streaming.applyContentSteering&&!re.shouldQueryBeforeStart()&&re.loadSteeringData()),tt=!1}function Ft(qt){P.debug("[onPlaybackPaused]"),qt.ended||(tt=!0,Eo(ft.USER_REQUEST_STOP_REASON))}function bn(qt){P.debug(`Stream with id ${qt.streamInfo.id} finished buffering`);const Dn=qt.streamInfo.isLast;je&&Dn?(P.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),q.signalEndOfStream(je)):Fn()}function Fn(){if(!Pe)return;if(!Pe.getHasFinishedBuffering())return void Pe.checkAndHandleCompletedBuffering();const qt=function(){let oi=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;try{const mi=oi||Pe||null;if(mi){const Yi=mi.getStreamInfo();return he.filter(function(br){const Cs=br.getStreamInfo();return Cs.start>Yi.start&&Yi.id!==Cs.id})}}catch{return[]}}(Pe);let Dn=0;for(;Dn<qt.length;){const oi=qt[Dn],mi=Dn===0?Pe:qt[Dn-1];!oi.getPreloaded()&&mi.getHasFinishedBuffering()&&je&&Ut(oi,mi),Dn+=1}}function ci(){Vt&&(clearInterval(Vt),Vt=null)}function _i(){return Pe?Pe.getStreamProcessors():[]}function ui(qt){if(Pe&&!Pe.getIsEndedEventSignaled()){Pe.setIsEndedEventSignaled(!0);const Dn=function(){const oi=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:null)||Pe||null;if(!oi)return null;const mi=oi.getStreamInfo(),Yi=mi.start;let br=0,Cs=-1,io=NaN;for(;br<he.length;){const um=he[br].getStreamInfo(),vp=um.start-Yi;vp>0&&(isNaN(io)||vp<io)&&mi.id!==um.id&&(io=vp,Cs=br),br+=1}return Cs>=0?he[Cs]:null}();Dn?(P.debug(`StreamController onEnded, found next stream with id ${Dn.getStreamInfo().id}. Switching from ${Pe.getStreamInfo().id} to ${Dn.getStreamInfo().id}`),rn(Dn,Pe,NaN)):(P.debug("StreamController no next stream found"),Pe.setIsEndedEventSignaled(!1)),Eo(Dn?ft.END_OF_PERIOD_STOP_REASON:ft.END_OF_CONTENT_STOP_REASON)}qt&&qt.isLast&&(ci(),re.stopSteeringRequestTimer())}function Nr(qt){const Dn=qt||dl().manifestInfo.duration;q.setDuration(Dn)}function Is(qt){const Dn=ke.getURIFragmentData();if(!Dn||!Dn.t)return NaN;const oi=yp()[0].getStreamInfo().start;return Dn.t=Dn.t.split(",")[0],Ta(qt,Dn.t,oi)}function Ko(qt,Dn){let oi=0;return qt||(oi=yp()[0].getStreamInfo().start),Ta(qt,Dn,oi)}function Ta(qt,Dn,oi){const mi=oe.getRegularPeriods()[0],Yi=Dn.toString(),br=Yi.indexOf("posix:")!==-1?Yi.substring(6)==="now"?Date.now()/1e3:parseFloat(Yi.substring(6)):NaN;return qt&&!isNaN(br)?le.calcPresentationTimeFromWallTime(new Date(1e3*br),mi):parseFloat(Yi)+oi}function bc(qt,Dn){try{let oi=NaN;return Dn&&!isNaN(Dn.maxFragmentDuration)&&isFinite(Dn.maxFragmentDuration)?Dn.maxFragmentDuration:isFinite(oi)?oi:NaN}catch{return NaN}}function hd(){const qt=B.getValue();ve.initialize(qt)}function pd(qt){if(qt.error)Ue=!0,ch();else{P.info("Manifest updated... updating data system wide.");const Dn=qt.manifest;oe.updatePeriods(Dn),z.filterUnsupportedFeatures(Dn).then(()=>{ve.initialize(Dn);let oi=oe.getUTCTimingSources();!oe.getIsDynamic()||oi&&oi.length!==0||C.trigger(xe.default.CONFORMANCE_VIOLATION,{level:Xa.LEVELS.WARNING,event:Xa.EVENTS.NO_UTC_TIMING_ELEMENT});let mi=oe.getIsDynamic()?oi.concat(qe.getUTCTimingSources()):oi;$.attemptSync(mi,oe.getIsDynamic()),nt.createFinalQueryStrings(Dn)})}}function cl(){return!!Pe&&Pe.getHasVideoTrack()}function _c(){return!!Pe&&Pe.getHasAudioTrack()}function Eo(qt,Dn){Dn=Dn||new Date,_i().forEach(oi=>{oi.finalisePlayList(Dn,qt)}),X.addPlayList()}function bo(qt){X.createPlaylistMetrics(1e3*ye.getTime(),qt)}function Sc(qt){Ge.updateKeyStatusesMap(qt),function(){const Dn=_i();let oi=!1;Dn.forEach(mi=>{const Yi=mi.getMediaInfo();!Yi||F.areKeyIdsUsable(Yi)?Yi&&F.areKeyIdsExpired(Yi)&&function(br){const Cs=_o(br.getStreamId());Cs&&Cs.triggerProtectionError({error:new Ze.default(id.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,id.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)})}(mi):(oi=!0,function(br){const Cs=br.getAllMediaInfos().filter(io=>F.areKeyIdsUsable(io));if(Cs&&Cs.length!==0)Le.setTrack(Cs[0],{replaceBuffer:!0});else{const io=br.getType();ie.error(new Ze.default(ce.NO_SUPPORTED_KEY_IDS,`Type: ${io}: ${ce.NO_SUPPORTED_KEY_IDS_MESSAGE}`))}}(mi))}),oi&&(ye.getTime()===0?C.once(xe.default.FRAGMENT_LOADING_COMPLETED,()=>{Ei()},R):ye.isProgressing(500).then(mi=>{mi||Ei()}))}()}function Ei(){const qt=ye.getTime();ye.seek(qt+.01,!1,!1)}function of(qt){if(!qt.error)return;let Dn;switch(qt.error.code){case 1:Dn="MEDIA_ERR_ABORTED";break;case 2:Dn="MEDIA_ERR_NETWORK";break;case 3:Dn="MEDIA_ERR_DECODE",_n.counts.mediaErrorDecode+=1;break;case 4:Dn="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:Dn="MEDIA_ERR_ENCRYPTED";break;default:Dn="UNKNOWN"}Dn==="MEDIA_ERR_DECODE"&&Cn.get().errors.recoverAttempts.mediaErrorDecode>=_n.counts.mediaErrorDecode?function(){P.error("A MEDIA_ERR_DECODE occured: Resetting the MediaSource");const oi=ye.getTime();Pe.deactivate(!1),P.info(`MediaSource has been resetted. Resuming playback from time ${oi}`),en({seekTime:oi,keepBuffers:!1,streamActivated:!1})}():(me=!0,qt.error.message&&(Dn+=" ("+qt.error.message+")"),qt.error.msExtendedCode&&(Dn+=" (0x"+(qt.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),P.fatal("Video Element Error: "+Dn),qt.error&&P.fatal(qt.error),ie.error(new Ze.default(qt.error.code,Dn)),ch())}function dl(){return Pe?Pe.getStreamInfo():null}function _o(qt){for(let Dn=0,oi=he.length;Dn<oi;Dn++)if(he[Dn].getId()===qt)return he[Dn];return null}function gd(qt){isNaN(qt.newDuration)||Nr(qt.newDuration)}function uh(){he=[],gi=NaN,Ge=null,fe=!1,Pe=null,me=!1,Ue=!1,mt=!0,Tt=!0,tt=!1,rt=!0,Vt=null,Kn=!1,yn=[],Zn=null,_n={counts:{mediaErrorDecode:0}}}function ch(){ri(),$.reset(),Eo(me||Ue?ft.FAILURE_STOP_REASON:ft.USER_REQUEST_STOP_REASON);for(let qt=0,Dn=he?he.length:0;qt<Dn;qt++)he[qt].reset(me);C.off(xe.default.PLAYBACK_TIME_UPDATED,Ot,R),C.off(xe.default.PLAYBACK_SEEKING,Kt,R),C.off(xe.default.PLAYBACK_ERROR,of,R),C.off(xe.default.PLAYBACK_STARTED,an,R),C.off(xe.default.PLAYBACK_PAUSED,Ft,R),C.off(xe.default.PLAYBACK_ENDED,ui,R),C.off(xe.default.METRIC_ADDED,md,R),C.off(xe.default.MANIFEST_VALIDITY_CHANGED,gd,R),C.off(xe.default.BUFFER_LEVEL_UPDATED,Yn,R),C.off(xe.default.QUALITY_CHANGE_REQUESTED,tn,R),C.off(xe.default.CONTENT_STEERING_REQUEST_COMPLETED,hd,R),x.default.KEY_SESSION_UPDATED&&C.off(x.default.KEY_SESSION_UPDATED,Gi,R),C.off(x.default.MANIFEST_UPDATED,pd,R),C.off(x.default.STREAM_BUFFERING_COMPLETED,bn,R),C.off(x.default.TIME_SYNCHRONIZATION_COMPLETED,pi,R),C.off(x.default.CURRENT_TRACK_CHANGED,Xn,R),C.off(x.default.SETTING_UPDATED_LIVE_DELAY,Je,R),C.off(x.default.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,Je,R),C.off(nd.default.INTERNAL_KEY_STATUSES_CHANGED,Sc,R),ve.reset(),Q.reset(),Ye.reset(),X.clearAllCurrentMetrics(),B.setValue(null),ne.reset(),le.reset(),Te.reset(),je&&(q.detachMediaSource(Ee),je=null),Ee=null,Ge&&(Ge=null,Ve=null,B.getValue()&&C.trigger(x.default.PROTECTION_DESTROYED,{data:B.getValue().url})),ci(),C.trigger(x.default.STREAM_TEARDOWN_COMPLETE),uh()}function md(qt){if(qt.metric===Z.DVR_INFO){const Dn=_c()?j.default.AUDIO:j.default.VIDEO;qt.mediaType===Dn&&q.setSeekable(qt.value.range.start,qt.value.range.end)}}function yp(){return he}return R={addDVRMetric:$n,getActiveStream:function(){return Pe},getActiveStreamInfo:dl,getActiveStreamProcessors:_i,getAutoPlay:function(){return rt},getHasMediaOrInitialisationError:function(){return me||Ue},getInitialPlayback:function(){return mt},getIsStreamSwitchInProgress:function(){return fe},getStreamById:_o,getStreamForTime:hn,getStreams:yp,getTimeRelativeToStreamId:function(qt,Dn){let oi=null,mi=0,Yi=0,br=null;for(let Cs=0;Cs<he.length;Cs++){if(oi=he[Cs],Yi=oi.getStartTime(),br=oi.getDuration(),Number.isFinite(Yi)&&(mi=Yi),oi.getId()===Dn)return qt-mi;Number.isFinite(br)&&(mi+=br)}return null},hasAudioTrack:_c,hasVideoTrack:cl,initialize:function(qt,Dn){ri(),rt=qt,Ve=Dn,le.initialize(),Q=Mu(D).create(),Q.setConfig({manifestModel:B,adapter:oe,manifestLoader:ne,errHandler:ie,settings:Cn,contentSteeringController:re}),Q.initialize(),Ye=hc(D).getInstance(),Ye.setConfig({manifestUpdater:Q,playbackController:ye,settings:Cn}),Ye.start(),nt=Cl(D).getInstance(),$.setConfig({dashMetrics:X,baseURLController:ve,errHandler:ie,settings:Cn}),$.initialize(),q.setConfig({settings:Cn}),Ge&&(C.trigger(x.default.PROTECTION_CREATED,{controller:Ge}),Ge.setMediaElement(Ee.getElement()),Ve&&Ge.setProtectionData(Ve)),C.on(xe.default.PLAYBACK_TIME_UPDATED,Ot,R),C.on(xe.default.PLAYBACK_SEEKING,Kt,R),C.on(xe.default.PLAYBACK_ERROR,of,R),C.on(xe.default.PLAYBACK_STARTED,an,R),C.on(xe.default.PLAYBACK_PAUSED,Ft,R),C.on(xe.default.PLAYBACK_ENDED,ui,R),C.on(xe.default.METRIC_ADDED,md,R),C.on(xe.default.MANIFEST_VALIDITY_CHANGED,gd,R),C.on(xe.default.BUFFER_LEVEL_UPDATED,Yn,R),C.on(xe.default.QUALITY_CHANGE_REQUESTED,tn,R),C.on(xe.default.CONTENT_STEERING_REQUEST_COMPLETED,hd,R),x.default.KEY_SESSION_UPDATED&&C.on(x.default.KEY_SESSION_UPDATED,Gi,R),C.on(x.default.MANIFEST_UPDATED,pd,R),C.on(x.default.STREAM_BUFFERING_COMPLETED,bn,R),C.on(x.default.TIME_SYNCHRONIZATION_COMPLETED,pi,R),C.on(x.default.CURRENT_TRACK_CHANGED,Xn,R),C.on(x.default.SETTING_UPDATED_LIVE_DELAY,Je,R),C.on(x.default.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,Je,R),C.on(nd.default.INTERNAL_KEY_STATUSES_CHANGED,Sc,R)},load:function(qt){let Dn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;ri(),gi=Dn,ne.load(qt)},loadWithManifest:function(qt){let Dn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;(function(){if(!Q||!Q.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously")})(),gi=Dn,Q.setManifest(qt)},refreshManifest:function(){Q.getIsUpdating()||Q.refreshManifest()},reset:ch,setConfig:function(qt){qt&&(qt.capabilities&&(F=qt.capabilities),qt.capabilitiesFilter&&(z=qt.capabilitiesFilter),qt.manifestLoader&&(ne=qt.manifestLoader),qt.manifestModel&&(B=qt.manifestModel),qt.mediaPlayerModel&&(we=qt.mediaPlayerModel),qt.customParametersModel&&(qe=qt.customParametersModel),qt.protectionController&&(Ge=qt.protectionController),qt.adapter&&(oe=qt.adapter),qt.dashMetrics&&(X=qt.dashMetrics),qt.errHandler&&(ie=qt.errHandler),qt.timelineConverter&&(le=qt.timelineConverter),qt.videoModel&&(Ee=qt.videoModel),qt.playbackController&&(ye=qt.playbackController),qt.throughputController&&(Ce=qt.throughputController),qt.serviceDescriptionController&&(de=qt.serviceDescriptionController),qt.contentSteeringController&&(re=qt.contentSteeringController),qt.textController&&(ze=qt.textController),qt.abrController&&(Ie=qt.abrController),qt.mediaController&&(Le=qt.mediaController),qt.settings&&(Cn=qt.settings),qt.baseURLController&&(ve=qt.baseURLController),qt.uriFragmentModel&&(ke=qt.uriFragmentModel),qt.segmentBaseController&&(Se=qt.segmentBaseController),qt.manifestUpdater&&(Q=qt.manifestUpdater))},setProtectionData:function(qt){Ve=qt,Ge&&Ge.setProtectionData(Ve)},switchToVideoElement:function(qt){Pe&&(ye.initialize(dl()),en({seekTime:qt,keepBuffers:!1,streamActivated:!0}))}},P=(0,$e.default)(D).getInstance().getLogger(R),$=td(D).getInstance(),q=fc(D).getInstance(),Te=zt(D).getInstance(),uh(),R}Gd.__dashjs_factory_name="StreamController";var rd=ue.default.getSingletonFactory(Gd);function Nu(){const D=this.context,C=(0,K.default)(D).getInstance();let R,P,F,z,Q,ne,B,oe,X,q,$,re;function ve(){re.debug("Stopping the gap controller"),Q&&(clearInterval(Q),Q=null),function(){C.off(x.default.WALLCLOCK_TIME_UPDATED,Le,this),C.off(x.default.INITIAL_STREAM_SWITCH,Ce,this),C.off(x.default.PLAYBACK_SEEKING,Se,this),C.off(x.default.BUFFER_REPLACEMENT_STARTED,ke,R),C.off(x.default.TRACK_CHANGE_RENDERED,Ie,R)}(),Q=null,ne=NaN,z=0,q=null,$={}}function Se(){q&&(clearTimeout(q),q=null)}function ke(ie){try{if(ie.streamId!==oe.getActiveStreamInfo().id||ie.mediaType!==j.default.VIDEO&&ie.mediaType!==j.default.AUDIO)return;ie.streamId===oe.getActiveStreamInfo().id&&($[ie.mediaType]=!0)}catch(le){re.error(le)}}function Ie(ie){ie&&ie.mediaType&&($[ie.mediaType]=!1)}function Ce(){Q||function(){try{Q||(re.debug("Starting the gap controller"),Q=setInterval(()=>{Ye()&&Te(B.getTime())},100))}catch{}}()}function Le(){if(Ye(F.get().streaming.gaps.enableSeekFix)&&(z++,z>=10)){const ie=B.getTime();P===ie?Te(ie,!0):(P=ie,ne=NaN),z=0}}function Ye(){let ie=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(!oe.getActiveStream())return!1;const le=Object.keys($).some(Pe=>$[Pe]),he=!!ie&&function(){const Pe=oe.getActiveStream(),Ge=parseFloat((Pe.getStartTime()+Pe.getDuration()).toFixed(5));return B.getTime()+F.get().streaming.gaps.threshold>=Ge}();return!le&&F.get().streaming.gaps.jumpGaps&&oe.getActiveStreamProcessors().length>0&&(!B.isSeeking()||he)&&!B.isPaused()&&!oe.getIsStreamSwitchInProgress()&&!oe.getHasMediaOrInitialisationError()}function Te(ie){let le=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const he=F.get().streaming.gaps.enableStallFix,Pe=F.get().streaming.gaps.stallSeek,Ge=F.get().streaming.gaps.smallGapLimit,ze=F.get().streaming.gaps.jumpLargeGaps,Ve=X.getBufferRange();let nt,rt=NaN,fe=!1;if(nt=function(Ue,je){try{if(!Ue||Ue.length<=1&&je>0)return NaN;let Ee=NaN,ye=0;for(;isNaN(Ee)&&ye<Ue.length;){const de=ye>0?Ue.end(ye-1):0;je<Ue.start(ye)&&de-je<F.get().streaming.gaps.threshold&&(Ee=ye),ye+=1}return Ee}catch{return null}}(Ve,ie),!isNaN(nt)){const Ue=Ve.start(nt),je=Ue-ie;je>0&&(je<=Ge||ze)&&(rt=Ue)}const me=B.getTimeToStreamEnd();if(isNaN(rt)&&le&&isFinite(me)&&!isNaN(me)&&me<Ge&&(rt=parseFloat(B.getStreamEndTime().toFixed(5)),fe=!0),he&&isNaN(rt)&&le&&isNaN(nt)&&function(Ue,je){for(let Ee=0,ye=Ue.length;Ee<ye;Ee++)if(je>=Ue.start(Ee)&&je<=Ue.end(Ee))return!0;return!1}(Ve,ie)&&(Pe===0?(re.warn("Toggle play pause to break stall"),X.pause(),X.play()):(re.warn(`Jumping ${Pe}s to break stall`),rt=ie+Pe)),rt>0&&ne!==rt&&rt>ie&&!q){const Ue=rt-ie;if(fe){const je=oe.getStreamForTime(rt),Ee=je&&!!je.getPreloaded();re.warn(`Jumping to end of stream because of gap from ${ie} to ${rt}. Gap duration: ${Ue}`),B.seek(rt,!0,Ee)}else{const je=B.getIsDynamic(),Ee=nt>0?Ve.end(nt-1):ie,ye=je?1e3*Math.max(0,Ue-.1):0;q=window.setTimeout(()=>{B.seek(rt,!0,!0),re.warn(`Jumping gap occuring in period ${oe.getActiveStream().getStreamId()} starting at ${Ee} and ending at ${rt}. Jumping by: ${rt-Ee}`),q=null},ye)}ne=rt}}return R={reset:ve,setConfig:function(ie){ie&&(ie.settings&&(F=ie.settings),ie.playbackController&&(B=ie.playbackController),ie.streamController&&(oe=ie.streamController),ie.videoModel&&(X=ie.videoModel))},initialize:function(){(function(){C.on(x.default.WALLCLOCK_TIME_UPDATED,Le,this),C.on(x.default.INITIAL_STREAM_SWITCH,Ce,this),C.on(x.default.PLAYBACK_SEEKING,Se,this),C.on(x.default.BUFFER_REPLACEMENT_STARTED,ke,R),C.on(x.default.TRACK_CHANGE_RENDERED,Ie,R)})()}},re=(0,$e.default)(D).getInstance().getLogger(R),ve(),R}Nu.__dashjs_factory_name="GapController";var Ou=ue.default.getSingletonFactory(Nu);function Fu(){const D=this.context,C=(0,K.default)(D).getInstance();let R,P,F,z,Q,ne,B,oe,X,q;function $(){P=!1;const Te=it.default.parseUserAgent();F=Te&&Te.browser&&Te.browser.name&&Te.browser.name.toLowerCase()==="safari"}function re(){P=!1}function ve(Te){if(Te.streamId!==ne.getActiveStreamInfo().id||!X)return;const ie=B.getLiveDelay();B.getBufferLevel()>ie/2&&(X=!1)}function Se(Te){Te.streamId===ne.getActiveStreamInfo().id&&(X=Te.state===Z.BUFFER_EMPTY)}function ke(){oe.getCatchupModeEnabled()||z.setPlaybackRate(1)}function Ie(){B.getIsDynamic()&&oe.getCatchupModeEnabled()&&(oe.getCatchupPlaybackRates().max>0||oe.getCatchupPlaybackRates().min<0)&&!B.isPaused()&&!B.isSeeking()&&function(){try{return!B.getTime()>0||P?!1:Le()===j.default.LIVE_CATCHUP_MODE_LOLP?function(Te,ie){try{return Math.abs(Ce())>0||Te<ie}catch{return!1}}(B.getBufferLevel(),Q.get().streaming.liveCatchup.playbackBufferMin):function(){try{return Math.abs(Ce())>0}catch{return!1}}()}catch{return!1}}()&&function(){if(!P&&z){let Te;const ie=z.getPlaybackRate(),le=oe.getCatchupPlaybackRates(),he=B.getBufferLevel(),Pe=Ce(),Ge=oe.getCatchupMaxDrift();if(!isNaN(Ge)&&Ge>0&&Pe>Ge)q.info("[CatchupController]: Low Latency catchup mechanism. Latency too high, doing a seek to live point"),P=!0,B.seekToCurrentLive(!0,!1);else{const ze=B.getCurrentLiveLatency(),Ve=B.getLiveDelay();Te=Le()===j.default.LIVE_CATCHUP_MODE_LOLP?function(rt,fe,me,Ue,je){let Ee;if(je<Ue){const ye=Math.abs(rt.min),de=5*(je-Ue);Ee=1-ye+2*ye/(1+Math.pow(Math.E,-de)),q.debug("[LoL+ playback control_buffer-based] bufferLevel: "+je+", newRate: "+Ee)}else{if(Math.abs(fe-me)<=.02*me)Ee=1;else{const de=fe-me,we=de<0?Math.abs(rt.min):rt.max,qe=5*de;Ee=1-we+2*we/(1+Math.pow(Math.E,-qe))}q.debug("[LoL+ playback control_latency-based] latency: "+fe+", newRate: "+Ee)}return Ee}(le,ze,Ve,Q.get().streaming.liveCatchup.playbackBufferMin,he):function(rt,fe,me,Ue){if(X)return 1;const je=fe-me,Ee=je<0?Math.abs(rt.min):rt.max,ye=5*je;let de=1-Ee+2*Ee/(1+Math.pow(Math.E,-ye));return B.getPlaybackStalled()&&Ue<=me/2&&je>0&&(de=1),de}(le,ze,Ve,he);const nt=F?.25:.02/(.5/le.max);(Te&&Math.abs(ie-Te)>=nt||Te==1)&&(q.debug(`[CatchupController]: Setting playback rate to ${Te}`),z.setPlaybackRate(Te))}}}()}function Ce(){return B.getCurrentLiveLatency()-B.getLiveDelay()}function Le(){const Te=Q.get().streaming.liveCatchup.playbackBufferMin;return Q.get().streaming.liveCatchup.mode!==j.default.LIVE_CATCHUP_MODE_LOLP||Te===null||isNaN(Te)?j.default.LIVE_CATCHUP_MODE_DEFAULT:j.default.LIVE_CATCHUP_MODE_LOLP}function Ye(){oe.getCatchupPlaybackRates(!0)}return R={reset:function(){C.off(xe.default.BUFFER_LEVEL_UPDATED,ve,R),C.off(xe.default.BUFFER_LEVEL_STATE_CHANGED,Se,R),C.off(xe.default.PLAYBACK_PROGRESS,Ie,R),C.off(xe.default.PLAYBACK_TIME_UPDATED,Ie,R),C.off(xe.default.PLAYBACK_SEEKED,re,R),C.off(x.default.SETTING_UPDATED_CATCHUP_ENABLED,ke,R),C.off(x.default.SETTING_UPDATED_PLAYBACK_RATE_MIN,Ye,R),C.off(x.default.SETTING_UPDATED_PLAYBACK_RATE_MAX,Ye,R),C.off(xe.default.STREAM_INITIALIZED,Ye,R),$(),z.setPlaybackRate(1,!0)},setConfig:function(Te){Te&&(Te.settings&&(Q=Te.settings),Te.videoModel&&(z=Te.videoModel),Te.streamController&&(ne=Te.streamController),Te.playbackController&&(B=Te.playbackController),Te.mediaPlayerModel&&(oe=Te.mediaPlayerModel))},initialize:function(){C.on(xe.default.BUFFER_LEVEL_UPDATED,ve,R),C.on(xe.default.BUFFER_LEVEL_STATE_CHANGED,Se,R),C.on(xe.default.PLAYBACK_PROGRESS,Ie,R),C.on(xe.default.PLAYBACK_TIME_UPDATED,Ie,R),C.on(xe.default.PLAYBACK_SEEKED,re,R),C.on(x.default.SETTING_UPDATED_CATCHUP_ENABLED,ke,R),C.on(x.default.SETTING_UPDATED_PLAYBACK_RATE_MIN,Ye,R),C.on(x.default.SETTING_UPDATED_PLAYBACK_RATE_MAX,Ye,R),C.on(xe.default.STREAM_INITIALIZED,Ye,R),Ye()}},q=(0,$e.default)(D).getInstance().getLogger(R),$(),R}Fu.__dashjs_factory_name="CatchupController";var Gf=ue.default.getSingletonFactory(Fu);const al=[j.default.SERVICE_DESCRIPTION_DVB_LL_SCHEME],Yh="video",Rl="audio";function zo(){const D=this.context;let C,R,P,F,z;function Q(){R={liveDelay:NaN,liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN}},minBitrate:{},maxBitrate:{},initialBitrate:{},contentSteering:null,clientDataReporting:null},P=[]}function ne(B,oe,X){try{R[B][oe]=X/1e3}catch(q){F.error(q)}}return C={getServiceDescriptionSettings:function(){return R},getProducerReferenceTimeOffsets:function(){return P},calculateProducerReferenceTimeOffsets:function(B){try{let oe=[];if(B&&B.length>0){const X=[j.default.VIDEO,j.default.AUDIO,j.default.TEXT],q=z.getAvailabilityStartTime()/1e3;B.forEach($=>{const re=X.reduce((ve,Se)=>ve.concat(z.getAllMediaInfoForType($,Se)),[]).reduce((ve,Se)=>(z.getProducerReferenceTimes($,Se).forEach(ke=>{const Ie=z.getVoRepresentations(Se);if(Ie&&Ie.length>0&&Ie[0].adaptation&&Ie[0].segmentInfoType===M.default.SEGMENT_TEMPLATE){const Ce=Ie[0],Le=new Date(ke[M.default.WALL_CLOCK_TIME]).getTime()/1e3-(ke[M.default.PRESENTATION_TIME]/Ce[M.default.TIMESCALE]-Ce[M.default.PRESENTATION_TIME_OFFSET]+$.start),Ye=q-Le;ve.push({id:ke[M.default.ID],to:Ye})}}),ve),[]);oe=oe.concat(re)})}P=oe}catch(oe){F.error(oe),P=[]}},applyServiceDescription:function(B){if(!B||!B.serviceDescriptions)return;const oe=B.serviceDescriptions.filter($=>al.includes($.schemeIdUri)),X=B.serviceDescriptions.filter($=>$.schemeIdUri==null);let q=oe.length>0?oe[oe.length-1]:X[X.length-1];q&&(q.latency&&q.latency.target>0&&function($){let re;if($.schemeIdUri,j.default.SERVICE_DESCRIPTION_DVB_LL_SCHEME,re=function(ve){return{liveDelay:ve.latency.target/1e3,maxDrift:!isNaN(ve.latency.max)&&ve.latency.max>ve.latency.target?(ve.latency.max-ve.latency.target+500)/1e3:NaN,referenceId:ve.latency.referenceId||NaN}}($),P.length>0){let{to:ve,id:Se}=function(ke){let Ie,Ce=0,Le=P.filter(Ye=>Ye.id===ke.referenceId);return Le.length===0?(Ce=P.length>0?P[0].to:0,Ie=P[0].id||NaN):(Ce=Le[0].to||0,Ie=Le[0].id||NaN),{to:Ce,id:Ie}}(re);R.liveDelay=re.liveDelay-ve,R.liveCatchup.maxDrift=re.maxDrift,F.debug(`
                Found latency properties coming from service description. Applied time offset of ${ve} from ProducerReferenceTime element with id ${Se}.
                Live Delay: ${re.liveDelay-ve}, Live catchup max drift: ${re.maxDrift}
            `)}else R.liveDelay=re.liveDelay,R.liveCatchup.maxDrift=re.maxDrift,F.debug(`Found latency properties coming from service description: Live Delay: ${re.liveDelay}, Live catchup max drift: ${re.maxDrift}`)}(q),q.playbackRate&&function($){const re=$.playbackRate.min?Math.round(1e3*($.playbackRate.min-1))/1e3:NaN,ve=$.playbackRate.max?Math.round(1e3*($.playbackRate.max-1))/1e3:NaN;R.liveCatchup.playbackRate.min=re,R.liveCatchup.playbackRate.max=ve,F.debug(`Found latency properties coming from service description: Live catchup min playback rate: ${re}`),F.debug(`Found latency properties coming from service description: Live catchup max playback rate: ${ve}`)}(q),q.operatingQuality,q.operatingBandwidth&&function($){if(!$||!$.operatingBandwidth||!$.operatingBandwidth.mediaType||$.operatingBandwidth.mediaType==="all")return;const re={};re.minBandwidth=$.operatingBandwidth.min,re.maxBandwidth=$.operatingBandwidth.max,re.targetBandwidth=$.operatingBandwidth.target;const ve=[];$.operatingBandwidth.mediaType===Yh||$.operatingBandwidth.mediaType===Rl?ve.push($.operatingBandwidth.mediaType):$.operatingBandwidth.mediaType==="any"&&(ve.push(Rl),ve.push(Yh)),ve.forEach(Se=>{isNaN(re.minBandwidth)||ne("minBitrate",Se,re.minBandwidth),isNaN(re.maxBandwidth)||ne("maxBitrate",Se,re.maxBandwidth),isNaN(re.targetBandwidth)||ne("initialBitrate",Se,re.targetBandwidth)})}(q),q.contentSteering&&function($){R.contentSteering=$.contentSteering}(q),q.clientDataReporting&&function($){R.clientDataReporting=$.clientDataReporting}(q))},reset:function(){Q()},setConfig:function(B){B&&B.adapter&&(z=B.adapter)}},F=(0,$e.default)(D).getInstance().getLogger(C),Q(),C}zo.__dashjs_factory_name="ServiceDescriptionController";var lu=ue.default.getSingletonFactory(zo);function Ll(){let D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},C=[];if(D.irregular)return D.irregular;if(D.regular)return D.regular;if(D.language){C=C.concat(D.language,D.extendedLanguageSubtags||[],D.script||[],D.region||[],D.variants||[]);const R=D.extensions||[];let P=-1;for(;++P<R.length;){const F=R[P];F.singleton&&F.extensions&&F.extensions.length>0&&C.push(F.singleton,...F.extensions)}}return D.privateuse&&D.privateuse.length>0&&C.push("x",...D.privateuse),C.join("-")}function Ts(D){const C=typeof D=="string"?D.charCodeAt(0):D;return C>=97&&C<=122||C>=65&&C<=90}function uu(D){const C=typeof D=="string"?D.charCodeAt(0):D;return C>=48&&C<=57}function ol(D){return Ts(D)||uu(D)}const Wh=["art-lojban","cel-gaulish","no-bok","no-nyn","zh-guoyu","zh-hakka","zh-min","zh-min-nan","zh-xiang"],Vd={"en-gb-oed":"en-GB-oxendict","i-ami":"ami","i-bnn":"bnn","i-default":null,"i-enochian":null,"i-hak":"hak","i-klingon":"tlh","i-lux":"lb","i-mingo":null,"i-navajo":"nv","i-pwn":"pwn","i-tao":"tao","i-tay":"tay","i-tsu":"tsu","sgn-be-fr":"sfb","sgn-be-nl":"vgt","sgn-ch-de":"sgg","art-lojban":"jbo","cel-gaulish":null,"no-bok":"nb","no-nyn":"nn","zh-guoyu":"cmn","zh-hakka":"hak","zh-min":null,"zh-min-nan":"nan","zh-xiang":"hsn"},Xr={}.hasOwnProperty;function Qa(D){let C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const R={language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null},P=String(D),F=P.toLowerCase();let z=0;if(D==null)throw new Error("Expected string, got `"+D+"`");if(Xr.call(Vd,F)){const ne=Vd[F];return C.normalize!==void 0&&C.normalize!==null&&!C.normalize||typeof ne!="string"?(R[Wh.includes(F)?"regular":"irregular"]=P,R):Qa(ne)}for(;Ts(F.charCodeAt(z))&&z<9;)z++;if(z>1&&z<9){if(R.language=P.slice(0,z),z<4){let ne=0;for(;F.charCodeAt(z)===45&&Ts(F.charCodeAt(z+1))&&Ts(F.charCodeAt(z+2))&&Ts(F.charCodeAt(z+3))&&!Ts(F.charCodeAt(z+4));){if(ne>2)return Q(z,3,"Too many extended language subtags, expected at most 3 subtags");R.extendedLanguageSubtags.push(P.slice(z+1,z+4)),z+=4,ne++}}for(F.charCodeAt(z)===45&&Ts(F.charCodeAt(z+1))&&Ts(F.charCodeAt(z+2))&&Ts(F.charCodeAt(z+3))&&Ts(F.charCodeAt(z+4))&&!Ts(F.charCodeAt(z+5))&&(R.script=P.slice(z+1,z+5),z+=5),F.charCodeAt(z)===45&&(Ts(F.charCodeAt(z+1))&&Ts(F.charCodeAt(z+2))&&!Ts(F.charCodeAt(z+3))?(R.region=P.slice(z+1,z+3),z+=3):uu(F.charCodeAt(z+1))&&uu(F.charCodeAt(z+2))&&uu(F.charCodeAt(z+3))&&!uu(F.charCodeAt(z+4))&&(R.region=P.slice(z+1,z+4),z+=4));F.charCodeAt(z)===45;){const ne=z+1;let B=ne;for(;ol(F.charCodeAt(B));){if(B-ne>7)return Q(B,1,"Too long variant, expected at most 8 characters");B++}if(!(B-ne>4||B-ne>3&&uu(F.charCodeAt(ne))))break;R.variants.push(P.slice(ne,B)),z=B}for(;F.charCodeAt(z)===45&&F.charCodeAt(z+1)!==120&&ol(F.charCodeAt(z+1))&&F.charCodeAt(z+2)===45&&ol(F.charCodeAt(z+3));){let ne=z+2,B=0;for(;F.charCodeAt(ne)===45&&ol(F.charCodeAt(ne+1))&&ol(F.charCodeAt(ne+2));){const oe=ne+1;for(ne=oe+2,B++;ol(F.charCodeAt(ne));){if(ne-oe>7)return Q(ne,2,"Too long extension, expected at most 8 characters");ne++}}if(!B)return Q(ne,4,"Empty extension, extensions must have at least 2 characters of content");R.extensions.push({singleton:P.charAt(z+1),extensions:P.slice(z+3,ne).split("-")}),z=ne}}else z=0;if(z===0&&F.charCodeAt(z)===120||F.charCodeAt(z)===45&&F.charCodeAt(z+1)===120){z=z?z+2:1;let ne=z;for(;F.charCodeAt(ne)===45&&ol(F.charCodeAt(ne+1));){const B=z+1;for(ne=B;ol(F.charCodeAt(ne));){if(ne-B>7)return Q(ne,5,"Too long private-use area, expected at most 8 characters");ne++}R.privateuse.push(P.slice(z+1,ne)),z=ne}}return z!==P.length?Q(z,6,"Found superfluous content after tag"):R;function Q(ne,B,oe){return C.warning&&C.warning(oe,B,ne),C.forgiving?R:{language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null}}}function Vf(D,C){return function(R,P){let F=sd(R,"tag");const z=sd(P??"*","range"),Q=[];let ne=-1;for(;++ne<z.length;){const B=z[ne].toLowerCase();if(!C&&B==="*")continue;let oe=-1;const X=[];for(;++oe<F.length;)if(D(F[oe].toLowerCase(),B)){if(!C)return F[oe];Q.push(F[oe])}else X.push(F[oe]);F=X}return C?Q:void 0}}const $f=Vf(function(D,C){const R=D.split("-"),P=C.split("-");let F=0,z=0;if(P[z]!=="*"&&R[F]!==P[z])return!1;for(F++,z++;z<P.length;)if(P[z]!=="*"){if(!R[F])return!1;if(R[F]!==P[z]){if(R[F].length===1)return!1;F++}else F++,z++}else z++;return!0},!0);function sd(D,C){const R=D&&typeof D=="string"?[D]:D;if(!R||typeof R!="object"||!("length"in R))throw new Error("Invalid "+C+" `"+R+"`, expected non-empty string");return R}const Ds=[{from:"in",to:"id"},{from:"iw",to:"he"},{from:"ji",to:"yi"},{from:"jw",to:"jv"},{from:"mo",to:"ro"},{from:"scc",to:"sr"},{from:"scr",to:"hr"},{from:"aam",to:"aas"},{from:"adp",to:"dz"},{from:"aue",to:"ktz"},{from:"ayx",to:"nun"},{from:"bgm",to:"bcg"},{from:"bjd",to:"drl"},{from:"ccq",to:"rki"},{from:"cjr",to:"mom"},{from:"cka",to:"cmr"},{from:"cmk",to:"xch"},{from:"coy",to:"pij"},{from:"cqu",to:"quh"},{from:"drh",to:"mn"},{from:"drw",to:"fa-af"},{from:"gav",to:"dev"},{from:"gfx",to:"vaj"},{from:"ggn",to:"gvr"},{from:"gti",to:"nyc"},{from:"guv",to:"duz"},{from:"hrr",to:"jal"},{from:"ibi",to:"opa"},{from:"ilw",to:"gal"},{from:"jeg",to:"oyb"},{from:"kgc",to:"tdf"},{from:"kgh",to:"kml"},{from:"koj",to:"kwv"},{from:"krm",to:"bmf"},{from:"ktr",to:"dtp"},{from:"kvs",to:"gdj"},{from:"kwq",to:"yam"},{from:"kxe",to:"tvd"},{from:"kzj",to:"dtp"},{from:"kzt",to:"dtp"},{from:"lii",to:"raq"},{from:"lmm",to:"rmx"},{from:"meg",to:"cir"},{from:"mst",to:"mry"},{from:"mwj",to:"vaj"},{from:"myt",to:"mry"},{from:"nad",to:"xny"},{from:"ncp",to:"kdz"},{from:"nnx",to:"ngv"},{from:"nts",to:"pij"},{from:"oun",to:"vaj"},{from:"pcr",to:"adx"},{from:"pmc",to:"huw"},{from:"pmu",to:"phr"},{from:"ppa",to:"bfy"},{from:"ppr",to:"lcq"},{from:"pry",to:"prt"},{from:"puz",to:"pub"},{from:"sca",to:"hle"},{from:"skk",to:"oyb"},{from:"tdu",to:"dtp"},{from:"thc",to:"tpo"},{from:"thx",to:"oyb"},{from:"tie",to:"ras"},{from:"tkk",to:"twm"},{from:"tlw",to:"weo"},{from:"tmp",to:"tyj"},{from:"tne",to:"kak"},{from:"tnf",to:"fa-af"},{from:"tsf",to:"taj"},{from:"uok",to:"ema"},{from:"xba",to:"cax"},{from:"xia",to:"acn"},{from:"xkh",to:"waw"},{from:"xsj",to:"suj"},{from:"ybd",to:"rki"},{from:"yma",to:"lrr"},{from:"ymt",to:"mtm"},{from:"yos",to:"zom"},{from:"yuu",to:"yug"},{from:"asd",to:"snz"},{from:"dit",to:"dif"},{from:"llo",to:"ngt"},{from:"myd",to:"aog"},{from:"nns",to:"nbr"},{from:"agp",to:"apf"},{from:"ais",to:"ami"},{from:"ajt",to:"aeb"},{from:"baz",to:"nvo"},{from:"bhk",to:"fbl"},{from:"bic",to:"bir"},{from:"bjq",to:"bzc"},{from:"bkb",to:"ebk"},{from:"blg",to:"iba"},{from:"btb",to:"beb"},{from:"daf",to:"dnj"},{from:"dap",to:"njz"},{from:"djl",to:"dze"},{from:"dkl",to:"aqd"},{from:"drr",to:"kzk"},{from:"dud",to:"uth"},{from:"duj",to:"dwu"},{from:"dwl",to:"dbt"},{from:"elp",to:"amq"},{from:"gbc",to:"wny"},{from:"ggo",to:"esg"},{from:"ggr",to:"gtu"},{from:"gio",to:"aou"},{from:"gli",to:"kzk"},{from:"ill",to:"ilm"},{from:"izi",to:"eza"},{from:"jar",to:"jgk"},{from:"kdv",to:"zkd"},{from:"kgd",to:"ncq"},{from:"kpp",to:"jkm"},{from:"kxl",to:"kru"},{from:"kzh",to:"dgl"},{from:"lak",to:"ksp"},{from:"leg",to:"enl"},{from:"mgx",to:"jbk"},{from:"mnt",to:"wnn"},{from:"mof",to:"xnt"},{from:"mwd",to:"dmw"},{from:"nbf",to:"nru"},{from:"nbx",to:"ekc"},{from:"nln",to:"azd"},{from:"nlr",to:"nrk"},{from:"noo",to:"dtd"},{from:"nxu",to:"bpp"},{from:"pat",to:"kxr"},{from:"rmr",to:"emx"},{from:"sap",to:"aqt"},{from:"sgl",to:"isk"},{from:"smd",to:"kmb"},{from:"snb",to:"iba"},{from:"sul",to:"sgd"},{from:"sum",to:"ulw"},{from:"tgg",to:"bjp"},{from:"thw",to:"ola"},{from:"tid",to:"itd"},{from:"unp",to:"wro"},{from:"wgw",to:"wgb"},{from:"wit",to:"nol"},{from:"wiw",to:"nwo"},{from:"xrq",to:"dmw"},{from:"yen",to:"ynq"},{from:"yiy",to:"yrm"},{from:"zir",to:"scv"},{from:"sgn-br",to:"bzs"},{from:"sgn-co",to:"csn"},{from:"sgn-de",to:"gsg"},{from:"sgn-dk",to:"dsl"},{from:"sgn-fr",to:"fsl"},{from:"sgn-gb",to:"bfi"},{from:"sgn-gr",to:"gss"},{from:"sgn-ie",to:"isg"},{from:"sgn-it",to:"ise"},{from:"sgn-jp",to:"jsl"},{from:"sgn-mx",to:"mfs"},{from:"sgn-ni",to:"ncs"},{from:"sgn-nl",to:"dse"},{from:"sgn-no",to:"nsi"},{from:"sgn-pt",to:"psr"},{from:"sgn-se",to:"swl"},{from:"sgn-us",to:"ase"},{from:"sgn-za",to:"sfs"},{from:"sgn-es",to:"ssp"},{from:"zh-cmn",to:"zh"},{from:"zh-cmn-hans",to:"zh-hans"},{from:"zh-cmn-hant",to:"zh-hant"},{from:"zh-gan",to:"gan"},{from:"zh-wuu",to:"wuu"},{from:"zh-yue",to:"yue"},{from:"no-bokmal",to:"nb"},{from:"no-nynorsk",to:"nn"},{from:"aa-saaho",to:"ssy"},{from:"sh",to:"sr-latn"},{from:"cnr",to:"sr-me"},{from:"tl",to:"fil"},{from:"aju",to:"jrb"},{from:"als",to:"sq"},{from:"arb",to:"ar"},{from:"ayr",to:"ay"},{from:"azj",to:"az"},{from:"bcc",to:"bal"},{from:"bcl",to:"bik"},{from:"bxk",to:"luy"},{from:"bxr",to:"bua"},{from:"cld",to:"syr"},{from:"cmn",to:"zh"},{from:"cwd",to:"cr"},{from:"dgo",to:"doi"},{from:"dhd",to:"mwr"},{from:"dik",to:"din"},{from:"diq",to:"zza"},{from:"lbk",to:"bnc"},{from:"ekk",to:"et"},{from:"emk",to:"man"},{from:"esk",to:"ik"},{from:"fat",to:"ak"},{from:"fuc",to:"ff"},{from:"gaz",to:"om"},{from:"gbo",to:"grb"},{from:"gno",to:"gon"},{from:"gug",to:"gn"},{from:"gya",to:"gba"},{from:"hdn",to:"hai"},{from:"hea",to:"hmn"},{from:"ike",to:"iu"},{from:"kmr",to:"ku"},{from:"knc",to:"kr"},{from:"kng",to:"kg"},{from:"knn",to:"kok"},{from:"kpv",to:"kv"},{from:"lvs",to:"lv"},{from:"mhr",to:"chm"},{from:"mup",to:"raj"},{from:"khk",to:"mn"},{from:"npi",to:"ne"},{from:"ojg",to:"oj"},{from:"ory",to:"or"},{from:"pbu",to:"ps"},{from:"pes",to:"fa"},{from:"plt",to:"mg"},{from:"pnb",to:"lah"},{from:"quz",to:"qu"},{from:"rmy",to:"rom"},{from:"spy",to:"kln"},{from:"src",to:"sc"},{from:"swh",to:"sw"},{from:"ttq",to:"tmh"},{from:"tw",to:"ak"},{from:"umu",to:"del"},{from:"uzn",to:"uz"},{from:"xpe",to:"kpe"},{from:"xsl",to:"den"},{from:"ydd",to:"yi"},{from:"zai",to:"zap"},{from:"zsm",to:"ms"},{from:"zyb",to:"za"},{from:"him",to:"srx"},{from:"mnk",to:"man"},{from:"bh",to:"bho"},{from:"prs",to:"fa-af"},{from:"swc",to:"sw-cd"},{from:"aar",to:"aa"},{from:"abk",to:"ab"},{from:"ave",to:"ae"},{from:"afr",to:"af"},{from:"aka",to:"ak"},{from:"amh",to:"am"},{from:"arg",to:"an"},{from:"ara",to:"ar"},{from:"asm",to:"as"},{from:"ava",to:"av"},{from:"aym",to:"ay"},{from:"aze",to:"az"},{from:"bak",to:"ba"},{from:"bel",to:"be"},{from:"bul",to:"bg"},{from:"bih",to:"bho"},{from:"bis",to:"bi"},{from:"bam",to:"bm"},{from:"ben",to:"bn"},{from:"bod",to:"bo"},{from:"bre",to:"br"},{from:"bos",to:"bs"},{from:"cat",to:"ca"},{from:"che",to:"ce"},{from:"cha",to:"ch"},{from:"cos",to:"co"},{from:"cre",to:"cr"},{from:"ces",to:"cs"},{from:"chu",to:"cu"},{from:"chv",to:"cv"},{from:"cym",to:"cy"},{from:"dan",to:"da"},{from:"deu",to:"de"},{from:"div",to:"dv"},{from:"dzo",to:"dz"},{from:"ewe",to:"ee"},{from:"ell",to:"el"},{from:"eng",to:"en"},{from:"epo",to:"eo"},{from:"spa",to:"es"},{from:"est",to:"et"},{from:"eus",to:"eu"},{from:"fas",to:"fa"},{from:"ful",to:"ff"},{from:"fin",to:"fi"},{from:"fij",to:"fj"},{from:"fao",to:"fo"},{from:"fra",to:"fr"},{from:"fry",to:"fy"},{from:"gle",to:"ga"},{from:"gla",to:"gd"},{from:"glg",to:"gl"},{from:"grn",to:"gn"},{from:"guj",to:"gu"},{from:"glv",to:"gv"},{from:"hau",to:"ha"},{from:"heb",to:"he"},{from:"hin",to:"hi"},{from:"hmo",to:"ho"},{from:"hrv",to:"hr"},{from:"hat",to:"ht"},{from:"hun",to:"hu"},{from:"hye",to:"hy"},{from:"her",to:"hz"},{from:"ina",to:"ia"},{from:"ind",to:"id"},{from:"ile",to:"ie"},{from:"ibo",to:"ig"},{from:"iii",to:"ii"},{from:"ipk",to:"ik"},{from:"ido",to:"io"},{from:"isl",to:"is"},{from:"ita",to:"it"},{from:"iku",to:"iu"},{from:"jpn",to:"ja"},{from:"jav",to:"jv"},{from:"kat",to:"ka"},{from:"kon",to:"kg"},{from:"kik",to:"ki"},{from:"kua",to:"kj"},{from:"kaz",to:"kk"},{from:"kal",to:"kl"},{from:"khm",to:"km"},{from:"kan",to:"kn"},{from:"kor",to:"ko"},{from:"kau",to:"kr"},{from:"kas",to:"ks"},{from:"kur",to:"ku"},{from:"kom",to:"kv"},{from:"cor",to:"kw"},{from:"kir",to:"ky"},{from:"lat",to:"la"},{from:"ltz",to:"lb"},{from:"lug",to:"lg"},{from:"lim",to:"li"},{from:"lin",to:"ln"},{from:"lao",to:"lo"},{from:"lit",to:"lt"},{from:"lub",to:"lu"},{from:"lav",to:"lv"},{from:"mlg",to:"mg"},{from:"mah",to:"mh"},{from:"mri",to:"mi"},{from:"mkd",to:"mk"},{from:"mal",to:"ml"},{from:"mon",to:"mn"},{from:"mol",to:"ro"},{from:"mar",to:"mr"},{from:"msa",to:"ms"},{from:"mlt",to:"mt"},{from:"mya",to:"my"},{from:"nau",to:"na"},{from:"nob",to:"nb"},{from:"nde",to:"nd"},{from:"nep",to:"ne"},{from:"ndo",to:"ng"},{from:"nld",to:"nl"},{from:"nno",to:"nn"},{from:"nor",to:"no"},{from:"nbl",to:"nr"},{from:"nav",to:"nv"},{from:"nya",to:"ny"},{from:"oci",to:"oc"},{from:"oji",to:"oj"},{from:"orm",to:"om"},{from:"ori",to:"or"},{from:"oss",to:"os"},{from:"pan",to:"pa"},{from:"pli",to:"pi"},{from:"pol",to:"pl"},{from:"pus",to:"ps"},{from:"por",to:"pt"},{from:"que",to:"qu"},{from:"roh",to:"rm"},{from:"run",to:"rn"},{from:"ron",to:"ro"},{from:"rus",to:"ru"},{from:"kin",to:"rw"},{from:"san",to:"sa"},{from:"srd",to:"sc"},{from:"snd",to:"sd"},{from:"sme",to:"se"},{from:"sag",to:"sg"},{from:"hbs",to:"sr-latn"},{from:"sin",to:"si"},{from:"slk",to:"sk"},{from:"slv",to:"sl"},{from:"smo",to:"sm"},{from:"sna",to:"sn"},{from:"som",to:"so"},{from:"sqi",to:"sq"},{from:"srp",to:"sr"},{from:"ssw",to:"ss"},{from:"sot",to:"st"},{from:"sun",to:"su"},{from:"swe",to:"sv"},{from:"swa",to:"sw"},{from:"tam",to:"ta"},{from:"tel",to:"te"},{from:"tgk",to:"tg"},{from:"tha",to:"th"},{from:"tir",to:"ti"},{from:"tuk",to:"tk"},{from:"tgl",to:"fil"},{from:"tsn",to:"tn"},{from:"ton",to:"to"},{from:"tur",to:"tr"},{from:"tso",to:"ts"},{from:"tat",to:"tt"},{from:"twi",to:"ak"},{from:"tah",to:"ty"},{from:"uig",to:"ug"},{from:"ukr",to:"uk"},{from:"urd",to:"ur"},{from:"uzb",to:"uz"},{from:"ven",to:"ve"},{from:"vie",to:"vi"},{from:"vol",to:"vo"},{from:"wln",to:"wa"},{from:"wol",to:"wo"},{from:"xho",to:"xh"},{from:"yid",to:"yi"},{from:"yor",to:"yo"},{from:"zha",to:"za"},{from:"zho",to:"zh"},{from:"zul",to:"zu"},{from:"alb",to:"sq"},{from:"arm",to:"hy"},{from:"baq",to:"eu"},{from:"bur",to:"my"},{from:"chi",to:"zh"},{from:"cze",to:"cs"},{from:"dut",to:"nl"},{from:"fre",to:"fr"},{from:"geo",to:"ka"},{from:"ger",to:"de"},{from:"gre",to:"el"},{from:"ice",to:"is"},{from:"mac",to:"mk"},{from:"mao",to:"mi"},{from:"may",to:"ms"},{from:"per",to:"fa"},{from:"rum",to:"ro"},{from:"slo",to:"sk"},{from:"tib",to:"bo"},{from:"wel",to:"cy"},{from:"und-aaland",to:"und-ax"},{from:"hy-arevmda",to:"hyw"},{from:"und-arevmda",to:"und"},{from:"und-arevela",to:"und"},{from:"und-lojban",to:"und"},{from:"und-saaho",to:"und"},{from:"und-bokmal",to:"und"},{from:"und-nynorsk",to:"und"},{from:"und-hakka",to:"und"},{from:"und-xiang",to:"und"},{from:"und-hepburn-heploc",to:"und-alalc97"}],yo=[{from:{field:"script",value:"qaai"},to:{field:"script",value:"zinh"}},{from:{field:"region",value:"bu"},to:{field:"region",value:"mm"}},{from:{field:"region",value:"ct"},to:{field:"region",value:"ki"}},{from:{field:"region",value:"dd"},to:{field:"region",value:"de"}},{from:{field:"region",value:"dy"},to:{field:"region",value:"bj"}},{from:{field:"region",value:"fx"},to:{field:"region",value:"fr"}},{from:{field:"region",value:"hv"},to:{field:"region",value:"bf"}},{from:{field:"region",value:"jt"},to:{field:"region",value:"um"}},{from:{field:"region",value:"mi"},to:{field:"region",value:"um"}},{from:{field:"region",value:"nh"},to:{field:"region",value:"vu"}},{from:{field:"region",value:"nq"},to:{field:"region",value:"aq"}},{from:{field:"region",value:"pu"},to:{field:"region",value:"um"}},{from:{field:"region",value:"pz"},to:{field:"region",value:"pa"}},{from:{field:"region",value:"qu"},to:{field:"region",value:"eu"}},{from:{field:"region",value:"rh"},to:{field:"region",value:"zw"}},{from:{field:"region",value:"tp"},to:{field:"region",value:"tl"}},{from:{field:"region",value:"uk"},to:{field:"region",value:"gb"}},{from:{field:"region",value:"vd"},to:{field:"region",value:"vn"}},{from:{field:"region",value:"wk"},to:{field:"region",value:"um"}},{from:{field:"region",value:"yd"},to:{field:"region",value:"ye"}},{from:{field:"region",value:"zr"},to:{field:"region",value:"cd"}},{from:{field:"region",value:"230"},to:{field:"region",value:"et"}},{from:{field:"region",value:"280"},to:{field:"region",value:"de"}},{from:{field:"region",value:"736"},to:{field:"region",value:"sd"}},{from:{field:"region",value:"886"},to:{field:"region",value:"ye"}},{from:{field:"region",value:"958"},to:{field:"region",value:"aa"}},{from:{field:"region",value:"020"},to:{field:"region",value:"ad"}},{from:{field:"region",value:"784"},to:{field:"region",value:"ae"}},{from:{field:"region",value:"004"},to:{field:"region",value:"af"}},{from:{field:"region",value:"028"},to:{field:"region",value:"ag"}},{from:{field:"region",value:"660"},to:{field:"region",value:"ai"}},{from:{field:"region",value:"008"},to:{field:"region",value:"al"}},{from:{field:"region",value:"051"},to:{field:"region",value:"am"}},{from:{field:"region",value:"024"},to:{field:"region",value:"ao"}},{from:{field:"region",value:"010"},to:{field:"region",value:"aq"}},{from:{field:"region",value:"032"},to:{field:"region",value:"ar"}},{from:{field:"region",value:"016"},to:{field:"region",value:"as"}},{from:{field:"region",value:"040"},to:{field:"region",value:"at"}},{from:{field:"region",value:"036"},to:{field:"region",value:"au"}},{from:{field:"region",value:"533"},to:{field:"region",value:"aw"}},{from:{field:"region",value:"248"},to:{field:"region",value:"ax"}},{from:{field:"region",value:"031"},to:{field:"region",value:"az"}},{from:{field:"region",value:"070"},to:{field:"region",value:"ba"}},{from:{field:"region",value:"052"},to:{field:"region",value:"bb"}},{from:{field:"region",value:"050"},to:{field:"region",value:"bd"}},{from:{field:"region",value:"056"},to:{field:"region",value:"be"}},{from:{field:"region",value:"854"},to:{field:"region",value:"bf"}},{from:{field:"region",value:"100"},to:{field:"region",value:"bg"}},{from:{field:"region",value:"048"},to:{field:"region",value:"bh"}},{from:{field:"region",value:"108"},to:{field:"region",value:"bi"}},{from:{field:"region",value:"204"},to:{field:"region",value:"bj"}},{from:{field:"region",value:"652"},to:{field:"region",value:"bl"}},{from:{field:"region",value:"060"},to:{field:"region",value:"bm"}},{from:{field:"region",value:"096"},to:{field:"region",value:"bn"}},{from:{field:"region",value:"068"},to:{field:"region",value:"bo"}},{from:{field:"region",value:"535"},to:{field:"region",value:"bq"}},{from:{field:"region",value:"076"},to:{field:"region",value:"br"}},{from:{field:"region",value:"044"},to:{field:"region",value:"bs"}},{from:{field:"region",value:"064"},to:{field:"region",value:"bt"}},{from:{field:"region",value:"104"},to:{field:"region",value:"mm"}},{from:{field:"region",value:"074"},to:{field:"region",value:"bv"}},{from:{field:"region",value:"072"},to:{field:"region",value:"bw"}},{from:{field:"region",value:"112"},to:{field:"region",value:"by"}},{from:{field:"region",value:"084"},to:{field:"region",value:"bz"}},{from:{field:"region",value:"124"},to:{field:"region",value:"ca"}},{from:{field:"region",value:"166"},to:{field:"region",value:"cc"}},{from:{field:"region",value:"180"},to:{field:"region",value:"cd"}},{from:{field:"region",value:"140"},to:{field:"region",value:"cf"}},{from:{field:"region",value:"178"},to:{field:"region",value:"cg"}},{from:{field:"region",value:"756"},to:{field:"region",value:"ch"}},{from:{field:"region",value:"384"},to:{field:"region",value:"ci"}},{from:{field:"region",value:"184"},to:{field:"region",value:"ck"}},{from:{field:"region",value:"152"},to:{field:"region",value:"cl"}},{from:{field:"region",value:"120"},to:{field:"region",value:"cm"}},{from:{field:"region",value:"156"},to:{field:"region",value:"cn"}},{from:{field:"region",value:"170"},to:{field:"region",value:"co"}},{from:{field:"region",value:"188"},to:{field:"region",value:"cr"}},{from:{field:"region",value:"192"},to:{field:"region",value:"cu"}},{from:{field:"region",value:"132"},to:{field:"region",value:"cv"}},{from:{field:"region",value:"531"},to:{field:"region",value:"cw"}},{from:{field:"region",value:"162"},to:{field:"region",value:"cx"}},{from:{field:"region",value:"196"},to:{field:"region",value:"cy"}},{from:{field:"region",value:"203"},to:{field:"region",value:"cz"}},{from:{field:"region",value:"278"},to:{field:"region",value:"de"}},{from:{field:"region",value:"276"},to:{field:"region",value:"de"}},{from:{field:"region",value:"262"},to:{field:"region",value:"dj"}},{from:{field:"region",value:"208"},to:{field:"region",value:"dk"}},{from:{field:"region",value:"212"},to:{field:"region",value:"dm"}},{from:{field:"region",value:"214"},to:{field:"region",value:"do"}},{from:{field:"region",value:"012"},to:{field:"region",value:"dz"}},{from:{field:"region",value:"218"},to:{field:"region",value:"ec"}},{from:{field:"region",value:"233"},to:{field:"region",value:"ee"}},{from:{field:"region",value:"818"},to:{field:"region",value:"eg"}},{from:{field:"region",value:"732"},to:{field:"region",value:"eh"}},{from:{field:"region",value:"232"},to:{field:"region",value:"er"}},{from:{field:"region",value:"724"},to:{field:"region",value:"es"}},{from:{field:"region",value:"231"},to:{field:"region",value:"et"}},{from:{field:"region",value:"246"},to:{field:"region",value:"fi"}},{from:{field:"region",value:"242"},to:{field:"region",value:"fj"}},{from:{field:"region",value:"238"},to:{field:"region",value:"fk"}},{from:{field:"region",value:"583"},to:{field:"region",value:"fm"}},{from:{field:"region",value:"234"},to:{field:"region",value:"fo"}},{from:{field:"region",value:"250"},to:{field:"region",value:"fr"}},{from:{field:"region",value:"249"},to:{field:"region",value:"fr"}},{from:{field:"region",value:"266"},to:{field:"region",value:"ga"}},{from:{field:"region",value:"826"},to:{field:"region",value:"gb"}},{from:{field:"region",value:"308"},to:{field:"region",value:"gd"}},{from:{field:"region",value:"268"},to:{field:"region",value:"ge"}},{from:{field:"region",value:"254"},to:{field:"region",value:"gf"}},{from:{field:"region",value:"831"},to:{field:"region",value:"gg"}},{from:{field:"region",value:"288"},to:{field:"region",value:"gh"}},{from:{field:"region",value:"292"},to:{field:"region",value:"gi"}},{from:{field:"region",value:"304"},to:{field:"region",value:"gl"}},{from:{field:"region",value:"270"},to:{field:"region",value:"gm"}},{from:{field:"region",value:"324"},to:{field:"region",value:"gn"}},{from:{field:"region",value:"312"},to:{field:"region",value:"gp"}},{from:{field:"region",value:"226"},to:{field:"region",value:"gq"}},{from:{field:"region",value:"300"},to:{field:"region",value:"gr"}},{from:{field:"region",value:"239"},to:{field:"region",value:"gs"}},{from:{field:"region",value:"320"},to:{field:"region",value:"gt"}},{from:{field:"region",value:"316"},to:{field:"region",value:"gu"}},{from:{field:"region",value:"624"},to:{field:"region",value:"gw"}},{from:{field:"region",value:"328"},to:{field:"region",value:"gy"}},{from:{field:"region",value:"344"},to:{field:"region",value:"hk"}},{from:{field:"region",value:"334"},to:{field:"region",value:"hm"}},{from:{field:"region",value:"340"},to:{field:"region",value:"hn"}},{from:{field:"region",value:"191"},to:{field:"region",value:"hr"}},{from:{field:"region",value:"332"},to:{field:"region",value:"ht"}},{from:{field:"region",value:"348"},to:{field:"region",value:"hu"}},{from:{field:"region",value:"360"},to:{field:"region",value:"id"}},{from:{field:"region",value:"372"},to:{field:"region",value:"ie"}},{from:{field:"region",value:"376"},to:{field:"region",value:"il"}},{from:{field:"region",value:"833"},to:{field:"region",value:"im"}},{from:{field:"region",value:"356"},to:{field:"region",value:"in"}},{from:{field:"region",value:"086"},to:{field:"region",value:"io"}},{from:{field:"region",value:"368"},to:{field:"region",value:"iq"}},{from:{field:"region",value:"364"},to:{field:"region",value:"ir"}},{from:{field:"region",value:"352"},to:{field:"region",value:"is"}},{from:{field:"region",value:"380"},to:{field:"region",value:"it"}},{from:{field:"region",value:"832"},to:{field:"region",value:"je"}},{from:{field:"region",value:"388"},to:{field:"region",value:"jm"}},{from:{field:"region",value:"400"},to:{field:"region",value:"jo"}},{from:{field:"region",value:"392"},to:{field:"region",value:"jp"}},{from:{field:"region",value:"404"},to:{field:"region",value:"ke"}},{from:{field:"region",value:"417"},to:{field:"region",value:"kg"}},{from:{field:"region",value:"116"},to:{field:"region",value:"kh"}},{from:{field:"region",value:"296"},to:{field:"region",value:"ki"}},{from:{field:"region",value:"174"},to:{field:"region",value:"km"}},{from:{field:"region",value:"659"},to:{field:"region",value:"kn"}},{from:{field:"region",value:"408"},to:{field:"region",value:"kp"}},{from:{field:"region",value:"410"},to:{field:"region",value:"kr"}},{from:{field:"region",value:"414"},to:{field:"region",value:"kw"}},{from:{field:"region",value:"136"},to:{field:"region",value:"ky"}},{from:{field:"region",value:"398"},to:{field:"region",value:"kz"}},{from:{field:"region",value:"418"},to:{field:"region",value:"la"}},{from:{field:"region",value:"422"},to:{field:"region",value:"lb"}},{from:{field:"region",value:"662"},to:{field:"region",value:"lc"}},{from:{field:"region",value:"438"},to:{field:"region",value:"li"}},{from:{field:"region",value:"144"},to:{field:"region",value:"lk"}},{from:{field:"region",value:"430"},to:{field:"region",value:"lr"}},{from:{field:"region",value:"426"},to:{field:"region",value:"ls"}},{from:{field:"region",value:"440"},to:{field:"region",value:"lt"}},{from:{field:"region",value:"442"},to:{field:"region",value:"lu"}},{from:{field:"region",value:"428"},to:{field:"region",value:"lv"}},{from:{field:"region",value:"434"},to:{field:"region",value:"ly"}},{from:{field:"region",value:"504"},to:{field:"region",value:"ma"}},{from:{field:"region",value:"492"},to:{field:"region",value:"mc"}},{from:{field:"region",value:"498"},to:{field:"region",value:"md"}},{from:{field:"region",value:"499"},to:{field:"region",value:"me"}},{from:{field:"region",value:"663"},to:{field:"region",value:"mf"}},{from:{field:"region",value:"450"},to:{field:"region",value:"mg"}},{from:{field:"region",value:"584"},to:{field:"region",value:"mh"}},{from:{field:"region",value:"807"},to:{field:"region",value:"mk"}},{from:{field:"region",value:"466"},to:{field:"region",value:"ml"}},{from:{field:"region",value:"496"},to:{field:"region",value:"mn"}},{from:{field:"region",value:"446"},to:{field:"region",value:"mo"}},{from:{field:"region",value:"580"},to:{field:"region",value:"mp"}},{from:{field:"region",value:"474"},to:{field:"region",value:"mq"}},{from:{field:"region",value:"478"},to:{field:"region",value:"mr"}},{from:{field:"region",value:"500"},to:{field:"region",value:"ms"}},{from:{field:"region",value:"470"},to:{field:"region",value:"mt"}},{from:{field:"region",value:"480"},to:{field:"region",value:"mu"}},{from:{field:"region",value:"462"},to:{field:"region",value:"mv"}},{from:{field:"region",value:"454"},to:{field:"region",value:"mw"}},{from:{field:"region",value:"484"},to:{field:"region",value:"mx"}},{from:{field:"region",value:"458"},to:{field:"region",value:"my"}},{from:{field:"region",value:"508"},to:{field:"region",value:"mz"}},{from:{field:"region",value:"516"},to:{field:"region",value:"na"}},{from:{field:"region",value:"540"},to:{field:"region",value:"nc"}},{from:{field:"region",value:"562"},to:{field:"region",value:"ne"}},{from:{field:"region",value:"574"},to:{field:"region",value:"nf"}},{from:{field:"region",value:"566"},to:{field:"region",value:"ng"}},{from:{field:"region",value:"558"},to:{field:"region",value:"ni"}},{from:{field:"region",value:"528"},to:{field:"region",value:"nl"}},{from:{field:"region",value:"578"},to:{field:"region",value:"no"}},{from:{field:"region",value:"524"},to:{field:"region",value:"np"}},{from:{field:"region",value:"520"},to:{field:"region",value:"nr"}},{from:{field:"region",value:"570"},to:{field:"region",value:"nu"}},{from:{field:"region",value:"554"},to:{field:"region",value:"nz"}},{from:{field:"region",value:"512"},to:{field:"region",value:"om"}},{from:{field:"region",value:"591"},to:{field:"region",value:"pa"}},{from:{field:"region",value:"604"},to:{field:"region",value:"pe"}},{from:{field:"region",value:"258"},to:{field:"region",value:"pf"}},{from:{field:"region",value:"598"},to:{field:"region",value:"pg"}},{from:{field:"region",value:"608"},to:{field:"region",value:"ph"}},{from:{field:"region",value:"586"},to:{field:"region",value:"pk"}},{from:{field:"region",value:"616"},to:{field:"region",value:"pl"}},{from:{field:"region",value:"666"},to:{field:"region",value:"pm"}},{from:{field:"region",value:"612"},to:{field:"region",value:"pn"}},{from:{field:"region",value:"630"},to:{field:"region",value:"pr"}},{from:{field:"region",value:"275"},to:{field:"region",value:"ps"}},{from:{field:"region",value:"620"},to:{field:"region",value:"pt"}},{from:{field:"region",value:"585"},to:{field:"region",value:"pw"}},{from:{field:"region",value:"600"},to:{field:"region",value:"py"}},{from:{field:"region",value:"634"},to:{field:"region",value:"qa"}},{from:{field:"region",value:"959"},to:{field:"region",value:"qm"}},{from:{field:"region",value:"960"},to:{field:"region",value:"qn"}},{from:{field:"region",value:"962"},to:{field:"region",value:"qp"}},{from:{field:"region",value:"963"},to:{field:"region",value:"qq"}},{from:{field:"region",value:"964"},to:{field:"region",value:"qr"}},{from:{field:"region",value:"965"},to:{field:"region",value:"qs"}},{from:{field:"region",value:"966"},to:{field:"region",value:"qt"}},{from:{field:"region",value:"967"},to:{field:"region",value:"eu"}},{from:{field:"region",value:"968"},to:{field:"region",value:"qv"}},{from:{field:"region",value:"969"},to:{field:"region",value:"qw"}},{from:{field:"region",value:"970"},to:{field:"region",value:"qx"}},{from:{field:"region",value:"971"},to:{field:"region",value:"qy"}},{from:{field:"region",value:"972"},to:{field:"region",value:"qz"}},{from:{field:"region",value:"638"},to:{field:"region",value:"re"}},{from:{field:"region",value:"642"},to:{field:"region",value:"ro"}},{from:{field:"region",value:"688"},to:{field:"region",value:"rs"}},{from:{field:"region",value:"643"},to:{field:"region",value:"ru"}},{from:{field:"region",value:"646"},to:{field:"region",value:"rw"}},{from:{field:"region",value:"682"},to:{field:"region",value:"sa"}},{from:{field:"region",value:"090"},to:{field:"region",value:"sb"}},{from:{field:"region",value:"690"},to:{field:"region",value:"sc"}},{from:{field:"region",value:"729"},to:{field:"region",value:"sd"}},{from:{field:"region",value:"752"},to:{field:"region",value:"se"}},{from:{field:"region",value:"702"},to:{field:"region",value:"sg"}},{from:{field:"region",value:"654"},to:{field:"region",value:"sh"}},{from:{field:"region",value:"705"},to:{field:"region",value:"si"}},{from:{field:"region",value:"744"},to:{field:"region",value:"sj"}},{from:{field:"region",value:"703"},to:{field:"region",value:"sk"}},{from:{field:"region",value:"694"},to:{field:"region",value:"sl"}},{from:{field:"region",value:"674"},to:{field:"region",value:"sm"}},{from:{field:"region",value:"686"},to:{field:"region",value:"sn"}},{from:{field:"region",value:"706"},to:{field:"region",value:"so"}},{from:{field:"region",value:"740"},to:{field:"region",value:"sr"}},{from:{field:"region",value:"728"},to:{field:"region",value:"ss"}},{from:{field:"region",value:"678"},to:{field:"region",value:"st"}},{from:{field:"region",value:"222"},to:{field:"region",value:"sv"}},{from:{field:"region",value:"534"},to:{field:"region",value:"sx"}},{from:{field:"region",value:"760"},to:{field:"region",value:"sy"}},{from:{field:"region",value:"748"},to:{field:"region",value:"sz"}},{from:{field:"region",value:"796"},to:{field:"region",value:"tc"}},{from:{field:"region",value:"148"},to:{field:"region",value:"td"}},{from:{field:"region",value:"260"},to:{field:"region",value:"tf"}},{from:{field:"region",value:"768"},to:{field:"region",value:"tg"}},{from:{field:"region",value:"764"},to:{field:"region",value:"th"}},{from:{field:"region",value:"762"},to:{field:"region",value:"tj"}},{from:{field:"region",value:"772"},to:{field:"region",value:"tk"}},{from:{field:"region",value:"626"},to:{field:"region",value:"tl"}},{from:{field:"region",value:"795"},to:{field:"region",value:"tm"}},{from:{field:"region",value:"788"},to:{field:"region",value:"tn"}},{from:{field:"region",value:"776"},to:{field:"region",value:"to"}},{from:{field:"region",value:"792"},to:{field:"region",value:"tr"}},{from:{field:"region",value:"780"},to:{field:"region",value:"tt"}},{from:{field:"region",value:"798"},to:{field:"region",value:"tv"}},{from:{field:"region",value:"158"},to:{field:"region",value:"tw"}},{from:{field:"region",value:"834"},to:{field:"region",value:"tz"}},{from:{field:"region",value:"804"},to:{field:"region",value:"ua"}},{from:{field:"region",value:"800"},to:{field:"region",value:"ug"}},{from:{field:"region",value:"581"},to:{field:"region",value:"um"}},{from:{field:"region",value:"840"},to:{field:"region",value:"us"}},{from:{field:"region",value:"858"},to:{field:"region",value:"uy"}},{from:{field:"region",value:"860"},to:{field:"region",value:"uz"}},{from:{field:"region",value:"336"},to:{field:"region",value:"va"}},{from:{field:"region",value:"670"},to:{field:"region",value:"vc"}},{from:{field:"region",value:"862"},to:{field:"region",value:"ve"}},{from:{field:"region",value:"092"},to:{field:"region",value:"vg"}},{from:{field:"region",value:"850"},to:{field:"region",value:"vi"}},{from:{field:"region",value:"704"},to:{field:"region",value:"vn"}},{from:{field:"region",value:"548"},to:{field:"region",value:"vu"}},{from:{field:"region",value:"876"},to:{field:"region",value:"wf"}},{from:{field:"region",value:"882"},to:{field:"region",value:"ws"}},{from:{field:"region",value:"973"},to:{field:"region",value:"xa"}},{from:{field:"region",value:"974"},to:{field:"region",value:"xb"}},{from:{field:"region",value:"975"},to:{field:"region",value:"xc"}},{from:{field:"region",value:"976"},to:{field:"region",value:"xd"}},{from:{field:"region",value:"977"},to:{field:"region",value:"xe"}},{from:{field:"region",value:"978"},to:{field:"region",value:"xf"}},{from:{field:"region",value:"979"},to:{field:"region",value:"xg"}},{from:{field:"region",value:"980"},to:{field:"region",value:"xh"}},{from:{field:"region",value:"981"},to:{field:"region",value:"xi"}},{from:{field:"region",value:"982"},to:{field:"region",value:"xj"}},{from:{field:"region",value:"983"},to:{field:"region",value:"xk"}},{from:{field:"region",value:"984"},to:{field:"region",value:"xl"}},{from:{field:"region",value:"985"},to:{field:"region",value:"xm"}},{from:{field:"region",value:"986"},to:{field:"region",value:"xn"}},{from:{field:"region",value:"987"},to:{field:"region",value:"xo"}},{from:{field:"region",value:"988"},to:{field:"region",value:"xp"}},{from:{field:"region",value:"989"},to:{field:"region",value:"xq"}},{from:{field:"region",value:"990"},to:{field:"region",value:"xr"}},{from:{field:"region",value:"991"},to:{field:"region",value:"xs"}},{from:{field:"region",value:"992"},to:{field:"region",value:"xt"}},{from:{field:"region",value:"993"},to:{field:"region",value:"xu"}},{from:{field:"region",value:"994"},to:{field:"region",value:"xv"}},{from:{field:"region",value:"995"},to:{field:"region",value:"xw"}},{from:{field:"region",value:"996"},to:{field:"region",value:"xx"}},{from:{field:"region",value:"997"},to:{field:"region",value:"xy"}},{from:{field:"region",value:"998"},to:{field:"region",value:"xz"}},{from:{field:"region",value:"720"},to:{field:"region",value:"ye"}},{from:{field:"region",value:"887"},to:{field:"region",value:"ye"}},{from:{field:"region",value:"175"},to:{field:"region",value:"yt"}},{from:{field:"region",value:"710"},to:{field:"region",value:"za"}},{from:{field:"region",value:"894"},to:{field:"region",value:"zm"}},{from:{field:"region",value:"716"},to:{field:"region",value:"zw"}},{from:{field:"region",value:"999"},to:{field:"region",value:"zz"}},{from:{field:"variants",value:"polytoni"},to:{field:"variants",value:"polyton"}},{from:{field:"variants",value:"heploc"},to:{field:"variants",value:"alalc97"}}],ps={region:{172:["ru","am","az","by","ge","kg","kz","md","tj","tm","ua","uz"],200:["cz","sk"],530:["cw","sx","bq"],532:["cw","sx","bq"],536:["sa","iq"],582:["fm","mh","mp","pw"],810:["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],830:["je","gg"],890:["rs","me","si","hr","mk","ba"],891:["rs","me"],an:["cw","sx","bq"],cs:["rs","me"],fq:["aq","tf"],nt:["sa","iq"],pc:["fm","mh","mp","pw"],su:["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],yu:["rs","me"],"062":["034","143"],ant:["cw","sx","bq"],scg:["rs","me"],ntz:["sa","iq"],sun:["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],yug:["rs","me"]}},ea={aa:"aa-latn-et",aaa:"aaa-latn-ng",aab:"aab-latn-ng",aac:"aac-latn-pg",aad:"aad-latn-pg",aae:"aae-latn-it","aae-grek":"aae-grek-it",aaf:"aaf-mlym-in","aaf-arab":"aaf-arab-in",aag:"aag-latn-pg",aah:"aah-latn-pg",aai:"aai-latn-zz",aak:"aak-latn-zz",aal:"aal-latn-cm",aan:"aan-latn-br",aao:"aao-arab-dz",aap:"aap-latn-br",aaq:"aaq-latn-us",aas:"aas-latn-tz",aat:"aat-grek-gr",aau:"aau-latn-zz",aaw:"aaw-latn-pg",aax:"aax-latn-id",aaz:"aaz-latn-id",ab:"ab-cyrl-ge",aba:"aba-latn-ci",abb:"abb-latn-cm",abc:"abc-latn-ph",abd:"abd-latn-ph",abe:"abe-latn-ca",abf:"abf-latn-my",abg:"abg-latn-pg",abh:"abh-arab-tj",abi:"abi-latn-zz",abl:"abl-rjng-id","abl-latn":"abl-latn-id",abm:"abm-latn-ng",abn:"abn-latn-ng",abo:"abo-latn-ng",abp:"abp-latn-ph",abq:"abq-cyrl-zz",abr:"abr-latn-gh",abs:"abs-latn-id",abt:"abt-latn-zz",abu:"abu-latn-ci",abv:"abv-arab-bh",abw:"abw-latn-pg",abx:"abx-latn-ph",aby:"aby-latn-zz",abz:"abz-latn-id",aca:"aca-latn-co",acb:"acb-latn-ng",acd:"acd-latn-zz",ace:"ace-latn-id",acf:"acf-latn-lc",ach:"ach-latn-ug",acm:"acm-arab-iq",acn:"acn-latn-cn",acp:"acp-latn-ng",acq:"acq-arab-ye",acr:"acr-latn-gt",acs:"acs-latn-br",act:"act-latn-nl",acu:"acu-latn-ec",acv:"acv-latn-us",acw:"acw-arab-sa",acx:"acx-arab-om",acy:"acy-latn-cy","acy-arab":"acy-arab-cy","acy-grek":"acy-grek-cy",acz:"acz-latn-sd",ada:"ada-latn-gh",adb:"adb-latn-tl",add:"add-latn-cm",ade:"ade-latn-zz",adf:"adf-arab-om",adg:"adg-latn-au",adh:"adh-latn-ug",adi:"adi-latn-in","adi-tibt":"adi-tibt-cn",adj:"adj-latn-zz",adl:"adl-latn-in",adn:"adn-latn-id",ado:"ado-latn-pg",adp:"adp-tibt-bt",adq:"adq-latn-gh",adr:"adr-latn-id",adt:"adt-latn-au",adu:"adu-latn-ng",adw:"adw-latn-br",adx:"adx-tibt-cn",ady:"ady-cyrl-ru",adz:"adz-latn-zz",ae:"ae-avst-ir",aea:"aea-latn-au",aeb:"aeb-arab-tn",aec:"aec-arab-eg",aee:"aee-arab-af",aek:"aek-latn-nc",ael:"ael-latn-cm",aem:"aem-latn-vn",aeq:"aeq-arab-pk",aer:"aer-latn-au",aeu:"aeu-latn-cn",aew:"aew-latn-pg",aey:"aey-latn-zz",aez:"aez-latn-pg",af:"af-latn-za",afb:"afb-arab-kw",afd:"afd-latn-pg",afe:"afe-latn-ng",afh:"afh-latn-gh",afi:"afi-latn-pg",afk:"afk-latn-pg",afn:"afn-latn-ng",afo:"afo-latn-ng",afp:"afp-latn-pg",afs:"afs-latn-mx",afu:"afu-latn-gh",afz:"afz-latn-id",aga:"aga-latn-pe",agb:"agb-latn-ng",agc:"agc-latn-zz",agd:"agd-latn-zz",age:"age-latn-pg",agf:"agf-latn-id",agg:"agg-latn-zz",agh:"agh-latn-cd",agi:"agi-deva-in",agj:"agj-ethi-et","agj-arab":"agj-arab-et",agk:"agk-latn-ph",agl:"agl-latn-pg",agm:"agm-latn-zz",agn:"agn-latn-ph",ago:"ago-latn-zz",agq:"agq-latn-cm",agr:"agr-latn-pe",ags:"ags-latn-cm",agt:"agt-latn-ph",agu:"agu-latn-gt",agv:"agv-latn-ph",agw:"agw-latn-sb",agx:"agx-cyrl-ru",agy:"agy-latn-ph",agz:"agz-latn-ph",aha:"aha-latn-zz",ahb:"ahb-latn-vu",ahg:"ahg-ethi-et",ahh:"ahh-latn-id",ahi:"ahi-latn-ci",ahk:"ahk-latn-mm","ahk-mymr":"ahk-mymr-mm","ahk-th":"ahk-latn-th","ahk-thai":"ahk-thai-th",ahl:"ahl-latn-zz",ahm:"ahm-latn-ci",ahn:"ahn-latn-ng",aho:"aho-ahom-in",ahp:"ahp-latn-ci",ahr:"ahr-deva-in",ahs:"ahs-latn-ng",aht:"aht-latn-us",aia:"aia-latn-sb",aib:"aib-arab-cn",aic:"aic-latn-pg",aid:"aid-latn-au",aie:"aie-latn-pg",aif:"aif-latn-pg",aig:"aig-latn-ag",aij:"aij-hebr-il",aik:"aik-latn-ng",ail:"ail-latn-pg",aim:"aim-latn-in",ain:"ain-kana-jp","ain-latn":"ain-latn-jp",aio:"aio-mymr-in",aip:"aip-latn-id",aiq:"aiq-arab-af",air:"air-latn-id",ait:"ait-latn-br",aiw:"aiw-latn-et","aiw-arab":"aiw-arab-et","aiw-ethi":"aiw-ethi-et",aix:"aix-latn-pg",aiy:"aiy-latn-cf",aja:"aja-latn-ss",ajg:"ajg-latn-zz",aji:"aji-latn-nc",ajn:"ajn-latn-au",ajp:"ajp-arab-jo",ajt:"ajt-arab-tn",ajw:"ajw-latn-ng",ajz:"ajz-latn-in",ak:"ak-latn-gh",akb:"akb-latn-id","akb-batk":"akb-batk-id",akc:"akc-latn-id",akd:"akd-latn-ng",ake:"ake-latn-gy",akf:"akf-latn-ng",akg:"akg-latn-id",akh:"akh-latn-pg",aki:"aki-latn-pg",akk:"akk-xsux-iq",akl:"akl-latn-ph",ako:"ako-latn-sr",akp:"akp-latn-gh",akq:"akq-latn-pg",akr:"akr-latn-vu",aks:"aks-latn-tg",akt:"akt-latn-pg",aku:"aku-latn-cm",akv:"akv-cyrl-ru",akw:"akw-latn-cg",akz:"akz-latn-us",ala:"ala-latn-zz",alc:"alc-latn-cl",ald:"ald-latn-ci",ale:"ale-latn-us",alf:"alf-latn-ng",alh:"alh-latn-au",ali:"ali-latn-zz",alj:"alj-latn-ph",alk:"alk-laoo-la",all:"all-mlym-in",alm:"alm-latn-vu",aln:"aln-latn-xk",alo:"alo-latn-id",alp:"alp-latn-id",alq:"alq-latn-ca",alr:"alr-cyrl-ru",alt:"alt-cyrl-ru",alu:"alu-latn-sb",alw:"alw-ethi-et",alx:"alx-latn-pg",aly:"aly-latn-au",alz:"alz-latn-cd",am:"am-ethi-et",ama:"ama-latn-br",amb:"amb-latn-ng",amc:"amc-latn-pe",ame:"ame-latn-pe",amf:"amf-latn-et","amf-ethi":"amf-ethi-et",amg:"amg-latn-au",ami:"ami-latn-tw",amj:"amj-latn-td",amk:"amk-latn-id",amm:"amm-latn-zz",amn:"amn-latn-zz",amo:"amo-latn-ng",amp:"amp-latn-zz",amq:"amq-latn-id",amr:"amr-latn-pe",ams:"ams-jpan-jp",amt:"amt-latn-pg",amu:"amu-latn-mx",amv:"amv-latn-id",amw:"amw-syrc-sy","amw-arab":"amw-arab-sy","amw-armi":"amw-armi-sy","amw-latn":"amw-latn-sy",amx:"amx-latn-au",amy:"amy-latn-au",amz:"amz-latn-au",an:"an-latn-es",ana:"ana-latn-co",anb:"anb-latn-pe",anc:"anc-latn-zz",and:"and-latn-id",ane:"ane-latn-nc",anf:"anf-latn-gh",ang:"ang-latn-gb",anh:"anh-latn-pg",ani:"ani-cyrl-ru",anj:"anj-latn-pg",ank:"ank-latn-zz",anl:"anl-latn-mm",anm:"anm-latn-in",ann:"ann-latn-ng",ano:"ano-latn-co",anp:"anp-deva-in",anr:"anr-deva-in",ans:"ans-latn-co",ant:"ant-latn-au",anu:"anu-ethi-et","anu-arab":"anu-arab-ss","anu-latn":"anu-latn-ss",anv:"anv-latn-cm",anw:"anw-latn-ng",anx:"anx-latn-pg",any:"any-latn-zz",anz:"anz-latn-pg",aoa:"aoa-latn-st",aob:"aob-latn-pg",aoc:"aoc-latn-ve",aod:"aod-latn-pg",aoe:"aoe-latn-pg",aof:"aof-latn-pg",aog:"aog-latn-pg",aoi:"aoi-latn-au",aoj:"aoj-latn-zz",aok:"aok-latn-nc",aol:"aol-latn-id",aom:"aom-latn-zz",aon:"aon-latn-pg",aor:"aor-latn-vu",aos:"aos-latn-id",aot:"aot-beng-bd","aot-latn":"aot-latn-in",aox:"aox-latn-gy",aoz:"aoz-latn-id",apb:"apb-latn-sb",apc:"apc-arab-sy",apd:"apd-arab-tg",ape:"ape-latn-zz",apf:"apf-latn-ph",apg:"apg-latn-id",aph:"aph-deva-np",api:"api-latn-br",apj:"apj-latn-us",apk:"apk-latn-us",apl:"apl-latn-us",apm:"apm-latn-us",apn:"apn-latn-br",apo:"apo-latn-pg",app:"app-latn-vu",apr:"apr-latn-zz",aps:"aps-latn-zz",apt:"apt-latn-in",apu:"apu-latn-br",apv:"apv-latn-br",apw:"apw-latn-us",apx:"apx-latn-id",apy:"apy-latn-br",apz:"apz-latn-zz",aqc:"aqc-cyrl-ru",aqd:"aqd-latn-ml",aqg:"aqg-latn-ng",aqk:"aqk-latn-ng",aqm:"aqm-latn-id",aqn:"aqn-latn-ph",aqr:"aqr-latn-nc",aqt:"aqt-latn-py",aqz:"aqz-latn-br",ar:"ar-arab-eg",arc:"arc-armi-ir","arc-nbat":"arc-nbat-jo","arc-palm":"arc-palm-sy",ard:"ard-latn-au",are:"are-latn-au",arh:"arh-latn-zz",ari:"ari-latn-us",arj:"arj-latn-br",ark:"ark-latn-br",arl:"arl-latn-pe",arn:"arn-latn-cl",aro:"aro-latn-bo",arp:"arp-latn-us",arq:"arq-arab-dz",arr:"arr-latn-br",ars:"ars-arab-sa",aru:"aru-latn-br",arw:"arw-latn-sr",arx:"arx-latn-br",ary:"ary-arab-ma",arz:"arz-arab-eg",as:"as-beng-in",asa:"asa-latn-tz",asb:"asb-latn-ca",asc:"asc-latn-id",ase:"ase-sgnw-us",asg:"asg-latn-zz",ash:"ash-latn-pe",asi:"asi-latn-id",asj:"asj-latn-cm",ask:"ask-arab-af",asl:"asl-latn-id",asn:"asn-latn-br",aso:"aso-latn-zz",ass:"ass-latn-cm",ast:"ast-latn-es",asu:"asu-latn-br",asv:"asv-latn-cd",asx:"asx-latn-pg",asy:"asy-latn-id",asz:"asz-latn-id",ata:"ata-latn-zz",atb:"atb-latn-cn","atb-lisu":"atb-lisu-cn",atc:"atc-latn-pe",atd:"atd-latn-ph",ate:"ate-latn-pg",atg:"atg-latn-zz",ati:"ati-latn-ci",atj:"atj-latn-ca",atk:"atk-latn-ph",atl:"atl-latn-ph",atm:"atm-latn-ph",atn:"atn-arab-ir",ato:"ato-latn-cm",atp:"atp-latn-ph",atq:"atq-latn-id",atr:"atr-latn-br",ats:"ats-latn-us",att:"att-latn-ph",atu:"atu-latn-ss",atv:"atv-cyrl-ru",atw:"atw-latn-us",atx:"atx-latn-br",aty:"aty-latn-vu",atz:"atz-latn-ph",aua:"aua-latn-sb",auc:"auc-latn-ec",aud:"aud-latn-sb",aug:"aug-latn-bj",auh:"auh-latn-zm",aui:"aui-latn-pg",auj:"auj-arab-ly","auj-latn":"auj-latn-ly","auj-tfng":"auj-tfng-ly",auk:"auk-latn-pg",aul:"aul-latn-vu",aum:"aum-latn-ng",aun:"aun-latn-pg",auo:"auo-latn-ng",aup:"aup-latn-pg",auq:"auq-latn-id",aur:"aur-latn-pg",aut:"aut-latn-pf",auu:"auu-latn-id",auw:"auw-latn-id",auy:"auy-latn-zz",auz:"auz-arab-uz",av:"av-cyrl-ru",avb:"avb-latn-pg",avd:"avd-arab-ir",avi:"avi-latn-ci",avk:"avk-latn-001",avl:"avl-arab-zz",avm:"avm-latn-au",avn:"avn-latn-zz",avo:"avo-latn-br",avs:"avs-latn-pe",avt:"avt-latn-zz",avu:"avu-latn-zz",avv:"avv-latn-br",awa:"awa-deva-in",awb:"awb-latn-zz",awc:"awc-latn-ng",awe:"awe-latn-br",awg:"awg-latn-au",awh:"awh-latn-id",awi:"awi-latn-pg",awk:"awk-latn-au",awm:"awm-latn-pg",awn:"awn-ethi-et",awo:"awo-latn-zz",awr:"awr-latn-id",aws:"aws-latn-id",awt:"awt-latn-br",awu:"awu-latn-id",awv:"awv-latn-id",aww:"aww-latn-pg",awx:"awx-latn-zz",awy:"awy-latn-id",axb:"axb-latn-ar",axe:"axe-latn-au",axg:"axg-latn-br",axk:"axk-latn-cf",axl:"axl-latn-au",axm:"axm-armn-am",axx:"axx-latn-nc",ay:"ay-latn-bo",aya:"aya-latn-pg",ayb:"ayb-latn-zz",ayc:"ayc-latn-pe",ayd:"ayd-latn-au",aye:"aye-latn-ng",ayg:"ayg-latn-tg",ayh:"ayh-arab-ye",ayi:"ayi-latn-ng",ayk:"ayk-latn-ng",ayl:"ayl-arab-ly",ayn:"ayn-arab-ye",ayo:"ayo-latn-py",ayp:"ayp-arab-iq",ayq:"ayq-latn-pg",ays:"ays-latn-ph",ayt:"ayt-latn-ph",ayu:"ayu-latn-ng",ayz:"ayz-latn-id",az:"az-latn-az","az-arab":"az-arab-ir","az-iq":"az-arab-iq","az-ir":"az-arab-ir","az-ru":"az-cyrl-ru",azb:"azb-arab-ir","azb-cyrl":"azb-cyrl-az","azb-latn":"azb-latn-az",azd:"azd-latn-mx",azg:"azg-latn-mx",azm:"azm-latn-mx",azn:"azn-latn-mx",azo:"azo-latn-cm",azt:"azt-latn-ph",azz:"azz-latn-mx",ba:"ba-cyrl-ru",baa:"baa-latn-sb",bab:"bab-latn-gw",bac:"bac-latn-id",bae:"bae-latn-ve",baf:"baf-latn-cm",bag:"bag-latn-cm",bah:"bah-latn-bs",baj:"baj-latn-id",bal:"bal-arab-pk",ban:"ban-latn-id",bao:"bao-latn-co",bap:"bap-deva-np",bar:"bar-latn-at",bas:"bas-latn-cm",bau:"bau-latn-ng",bav:"bav-latn-zz",baw:"baw-latn-cm",bax:"bax-bamu-cm",bay:"bay-latn-id",bba:"bba-latn-zz",bbb:"bbb-latn-zz",bbc:"bbc-latn-id",bbd:"bbd-latn-zz",bbe:"bbe-latn-cd",bbf:"bbf-latn-pg",bbg:"bbg-latn-ga",bbi:"bbi-latn-cm",bbj:"bbj-latn-cm",bbk:"bbk-latn-cm",bbl:"bbl-geor-ge",bbm:"bbm-latn-cd",bbn:"bbn-latn-pg",bbo:"bbo-latn-bf",bbp:"bbp-latn-zz",bbq:"bbq-latn-cm",bbr:"bbr-latn-zz",bbs:"bbs-latn-ng",bbt:"bbt-latn-ng",bbu:"bbu-latn-ng",bbv:"bbv-latn-pg",bbw:"bbw-latn-cm",bbx:"bbx-latn-cm",bby:"bby-latn-cm",bca:"bca-latn-cn","bca-hani":"bca-hani-cn",bcb:"bcb-latn-sn",bcd:"bcd-latn-id",bce:"bce-latn-cm",bcf:"bcf-latn-zz",bcg:"bcg-latn-gn",bch:"bch-latn-zz",bci:"bci-latn-ci",bcj:"bcj-latn-au",bck:"bck-latn-au",bcm:"bcm-latn-zz",bcn:"bcn-latn-zz",bco:"bco-latn-zz",bcp:"bcp-latn-cd",bcq:"bcq-ethi-zz",bcr:"bcr-latn-ca",bcs:"bcs-latn-ng",bct:"bct-latn-cd",bcu:"bcu-latn-zz",bcv:"bcv-latn-ng",bcw:"bcw-latn-cm",bcy:"bcy-latn-ng",bcz:"bcz-latn-sn",bda:"bda-latn-sn",bdb:"bdb-latn-id",bdc:"bdc-latn-co",bdd:"bdd-latn-zz",bde:"bde-latn-ng",bdf:"bdf-latn-pg",bdg:"bdg-latn-my",bdh:"bdh-latn-ss",bdi:"bdi-latn-sd",bdj:"bdj-latn-ss",bdk:"bdk-latn-az",bdl:"bdl-latn-id",bdm:"bdm-latn-td",bdn:"bdn-latn-cm",bdo:"bdo-latn-td",bdp:"bdp-latn-tz",bdq:"bdq-latn-vn",bdr:"bdr-latn-my",bds:"bds-latn-tz",bdt:"bdt-latn-cf",bdu:"bdu-latn-cm",bdv:"bdv-orya-in",bdw:"bdw-latn-id",bdx:"bdx-latn-id",bdy:"bdy-latn-au",bdz:"bdz-arab-pk",be:"be-cyrl-by",bea:"bea-latn-ca","bea-cans":"bea-cans-ca",beb:"beb-latn-cm",bec:"bec-latn-cm",bed:"bed-latn-id",bee:"bee-deva-in",bef:"bef-latn-zz",beh:"beh-latn-zz",bei:"bei-latn-id",bej:"bej-arab-sd",bek:"bek-latn-pg",bem:"bem-latn-zm",beo:"beo-latn-pg",bep:"bep-latn-id",beq:"beq-latn-cg",bes:"bes-latn-td",bet:"bet-latn-zz",beu:"beu-latn-id",bev:"bev-latn-ci",bew:"bew-latn-id",bex:"bex-latn-zz",bey:"bey-latn-pg",bez:"bez-latn-tz",bfa:"bfa-latn-ss","bfa-arab":"bfa-arab-ss",bfb:"bfb-deva-in",bfc:"bfc-latn-cn",bfd:"bfd-latn-cm",bfe:"bfe-latn-id",bff:"bff-latn-cf",bfg:"bfg-latn-id",bfh:"bfh-latn-pg",bfj:"bfj-latn-cm",bfl:"bfl-latn-cf",bfm:"bfm-latn-cm",bfn:"bfn-latn-tl",bfo:"bfo-latn-bf",bfp:"bfp-latn-cm",bfq:"bfq-taml-in",bfs:"bfs-latn-cn","bfs-hani":"bfs-hani-cn",bft:"bft-arab-pk",bfu:"bfu-tibt-in","bfu-takr":"bfu-takr-in",bfw:"bfw-orya-in",bfx:"bfx-latn-ph",bfy:"bfy-deva-in",bfz:"bfz-deva-in",bg:"bg-cyrl-bg",bga:"bga-latn-ng",bgb:"bgb-latn-id",bgc:"bgc-deva-in",bgd:"bgd-deva-in",bgf:"bgf-latn-cm",bgg:"bgg-latn-in",bgi:"bgi-latn-ph",bgj:"bgj-latn-cm",bgn:"bgn-arab-pk",bgo:"bgo-latn-gn",bgp:"bgp-arab-pk",bgq:"bgq-deva-in",bgr:"bgr-latn-in",bgs:"bgs-latn-ph",bgt:"bgt-latn-sb",bgu:"bgu-latn-ng",bgv:"bgv-latn-id",bgw:"bgw-deva-in",bgx:"bgx-grek-tr",bgy:"bgy-latn-id",bgz:"bgz-latn-id",bha:"bha-deva-in",bhb:"bhb-deva-in",bhc:"bhc-latn-id",bhd:"bhd-deva-in","bhd-arab":"bhd-arab-in","bhd-takr":"bhd-takr-in",bhe:"bhe-arab-pk",bhf:"bhf-latn-pg",bhg:"bhg-latn-zz",bhh:"bhh-cyrl-il","bhh-hebr":"bhh-hebr-il","bhh-latn":"bhh-latn-il",bhi:"bhi-deva-in",bhj:"bhj-deva-np",bhl:"bhl-latn-zz",bhm:"bhm-arab-om",bhn:"bhn-syrc-ge",bho:"bho-deva-in",bhp:"bhp-latn-id",bhq:"bhq-latn-id",bhr:"bhr-latn-mg",bhs:"bhs-latn-cm",bht:"bht-takr-in","bht-deva":"bht-deva-in","bht-latn":"bht-latn-in",bhu:"bhu-deva-in",bhv:"bhv-latn-id",bhw:"bhw-latn-id",bhy:"bhy-latn-zz",bhz:"bhz-latn-id",bi:"bi-latn-vu",bia:"bia-latn-au",bib:"bib-latn-zz",bid:"bid-latn-td",bie:"bie-latn-pg",bif:"bif-latn-gw",big:"big-latn-zz",bik:"bik-latn-ph",bil:"bil-latn-ng",bim:"bim-latn-zz",bin:"bin-latn-ng",bio:"bio-latn-zz",bip:"bip-latn-cd",biq:"biq-latn-zz",bir:"bir-latn-pg",bit:"bit-latn-pg",biu:"biu-latn-in",biv:"biv-latn-gh",biw:"biw-latn-cm",biy:"biy-deva-in",biz:"biz-latn-cd",bja:"bja-latn-cd",bjb:"bjb-latn-au",bjc:"bjc-latn-pg",bjf:"bjf-syrc-il",bjg:"bjg-latn-gw",bjh:"bjh-latn-zz",bji:"bji-ethi-zz",bjj:"bjj-deva-in",bjk:"bjk-latn-pg",bjl:"bjl-latn-pg",bjm:"bjm-arab-iq",bjn:"bjn-latn-id",bjo:"bjo-latn-zz",bjp:"bjp-latn-pg",bjr:"bjr-latn-zz",bjs:"bjs-latn-bb",bjt:"bjt-latn-sn",bju:"bju-latn-cm",bjv:"bjv-latn-td",bjw:"bjw-latn-ci",bjx:"bjx-latn-ph",bjy:"bjy-latn-au",bjz:"bjz-latn-zz",bka:"bka-latn-ng",bkc:"bkc-latn-zz",bkd:"bkd-latn-ph",bkf:"bkf-latn-cd",bkg:"bkg-latn-cf",bkh:"bkh-latn-cm",bki:"bki-latn-vu",bkj:"bkj-latn-cf",bkl:"bkl-latn-id",bkm:"bkm-latn-cm",bkn:"bkn-latn-id",bko:"bko-latn-cm",bkp:"bkp-latn-cd",bkq:"bkq-latn-zz",bkr:"bkr-latn-id",bks:"bks-latn-ph",bkt:"bkt-latn-cd",bku:"bku-latn-ph",bkv:"bkv-latn-zz",bkw:"bkw-latn-cg",bkx:"bkx-latn-tl",bky:"bky-latn-ng",bkz:"bkz-latn-id",bla:"bla-latn-ca",blb:"blb-latn-sb",blc:"blc-latn-ca",bld:"bld-latn-id",ble:"ble-latn-gw",blf:"blf-latn-id",blg:"blg-latn-my",blh:"blh-latn-lr",bli:"bli-latn-cd",blj:"blj-latn-id",blk:"blk-mymr-mm",blm:"blm-latn-ss",bln:"bln-latn-ph",blo:"blo-latn-bj",blp:"blp-latn-sb",blq:"blq-latn-pg",blr:"blr-latn-cn","blr-tale":"blr-tale-cn","blr-thai":"blr-thai-th",bls:"bls-latn-id",blt:"blt-tavt-vn",blv:"blv-latn-ao",blw:"blw-latn-ph",blx:"blx-latn-ph",bly:"bly-latn-bj",blz:"blz-latn-id",bm:"bm-latn-ml",bma:"bma-latn-ng",bmb:"bmb-latn-cd",bmc:"bmc-latn-pg",bmd:"bmd-latn-gn",bme:"bme-latn-cf",bmf:"bmf-latn-sl",bmg:"bmg-latn-cd",bmh:"bmh-latn-zz",bmi:"bmi-latn-td",bmj:"bmj-deva-np",bmk:"bmk-latn-zz",bml:"bml-latn-cd",bmm:"bmm-latn-mg",bmn:"bmn-latn-pg",bmo:"bmo-latn-cm",bmp:"bmp-latn-pg",bmq:"bmq-latn-ml",bmr:"bmr-latn-co",bms:"bms-latn-ne",bmu:"bmu-latn-zz",bmv:"bmv-latn-cm",bmw:"bmw-latn-cg",bmx:"bmx-latn-pg",bmz:"bmz-latn-pg",bn:"bn-beng-bd",bna:"bna-latn-id",bnb:"bnb-latn-my",bnc:"bnc-latn-ph",bnd:"bnd-latn-id",bne:"bne-latn-id",bnf:"bnf-latn-id",bng:"bng-latn-zz",bni:"bni-latn-cd",bnj:"bnj-latn-ph",bnk:"bnk-latn-vu",bnm:"bnm-latn-zz",bnn:"bnn-latn-tw",bno:"bno-latn-ph",bnp:"bnp-latn-zz",bnq:"bnq-latn-id",bnr:"bnr-latn-vu",bns:"bns-deva-in",bnu:"bnu-latn-id",bnv:"bnv-latn-id",bnw:"bnw-latn-pg",bnx:"bnx-latn-cd",bny:"bny-latn-my",bnz:"bnz-latn-cm",bo:"bo-tibt-cn",boa:"boa-latn-pe",bob:"bob-latn-ke",boe:"boe-latn-cm",bof:"bof-latn-bf",boh:"boh-latn-cd",boj:"boj-latn-zz",bok:"bok-latn-cg",bol:"bol-latn-ng",bom:"bom-latn-zz",bon:"bon-latn-zz",boo:"boo-latn-ml",bop:"bop-latn-pg",boq:"boq-latn-pg",bor:"bor-latn-br",bot:"bot-latn-ss",bou:"bou-latn-tz",bov:"bov-latn-gh",bow:"bow-latn-pg",box:"box-latn-bf",boy:"boy-latn-cf",boz:"boz-latn-ml","boz-arab":"boz-arab-ml",bpa:"bpa-latn-vu",bpc:"bpc-latn-cm",bpd:"bpd-latn-cf",bpe:"bpe-latn-pg",bpg:"bpg-latn-id",bph:"bph-cyrl-ru",bpi:"bpi-latn-pg",bpj:"bpj-latn-cd",bpk:"bpk-latn-nc",bpl:"bpl-latn-au",bpm:"bpm-latn-pg",bpo:"bpo-latn-id",bpp:"bpp-latn-id",bpq:"bpq-latn-id",bpr:"bpr-latn-ph",bps:"bps-latn-ph",bpt:"bpt-latn-au",bpu:"bpu-latn-pg",bpv:"bpv-latn-id",bpw:"bpw-latn-pg",bpx:"bpx-deva-in",bpy:"bpy-beng-in",bpz:"bpz-latn-id",bqa:"bqa-latn-bj",bqb:"bqb-latn-id",bqc:"bqc-latn-zz",bqd:"bqd-latn-cm",bqf:"bqf-latn-gn","bqf-arab":"bqf-arab-gn",bqg:"bqg-latn-tg",bqi:"bqi-arab-ir",bqj:"bqj-latn-sn",bqk:"bqk-latn-cf",bql:"bql-latn-pg",bqm:"bqm-latn-cm",bqo:"bqo-latn-cm",bqp:"bqp-latn-zz",bqq:"bqq-latn-id",bqr:"bqr-latn-id",bqs:"bqs-latn-pg",bqt:"bqt-latn-cm",bqu:"bqu-latn-cd",bqv:"bqv-latn-ci",bqw:"bqw-latn-ng",bqx:"bqx-latn-ng",bqz:"bqz-latn-cm",br:"br-latn-fr",bra:"bra-deva-in",brb:"brb-khmr-kh","brb-laoo":"brb-laoo-la","brb-latn":"brb-latn-vn",brc:"brc-latn-gy",brd:"brd-deva-np",brf:"brf-latn-cd",brg:"brg-latn-bo",brh:"brh-arab-pk",bri:"bri-latn-cm",brj:"brj-latn-vu",brk:"brk-arab-sd",brl:"brl-latn-bw",brm:"brm-latn-cd",brn:"brn-latn-cr",brp:"brp-latn-id",brq:"brq-latn-pg",brr:"brr-latn-sb",brs:"brs-latn-id",brt:"brt-latn-ng",bru:"bru-latn-vn","bru-laoo":"bru-laoo-la","bru-thai":"bru-thai-la",brv:"brv-laoo-la",brx:"brx-deva-in",bry:"bry-latn-pg",brz:"brz-latn-zz",bs:"bs-latn-ba",bsa:"bsa-latn-id",bsb:"bsb-latn-bn",bsc:"bsc-latn-sn",bse:"bse-latn-cm",bsf:"bsf-latn-ng",bsh:"bsh-arab-af",bsi:"bsi-latn-cm",bsj:"bsj-latn-zz",bsk:"bsk-arab-pk","bsk-latn":"bsk-latn-pk",bsl:"bsl-latn-ng",bsm:"bsm-latn-id",bsn:"bsn-latn-co",bso:"bso-latn-td",bsp:"bsp-latn-gn",bsq:"bsq-bass-lr",bsr:"bsr-latn-ng",bss:"bss-latn-cm",bst:"bst-ethi-zz",bsu:"bsu-latn-id",bsv:"bsv-latn-gn","bsv-arab":"bsv-arab-gn",bsw:"bsw-latn-et","bsw-ethi":"bsw-ethi-et",bsx:"bsx-latn-ng",bsy:"bsy-latn-my",bta:"bta-latn-ng",btc:"btc-latn-cm",btd:"btd-batk-id",bte:"bte-latn-ng",btf:"btf-latn-td",btg:"btg-latn-ci",bth:"bth-latn-my",bti:"bti-latn-id",btj:"btj-latn-id",btm:"btm-batk-id",btn:"btn-latn-ph",bto:"bto-latn-ph",btp:"btp-latn-pg",btq:"btq-latn-my",btr:"btr-latn-vu",bts:"bts-latn-id","bts-batk":"bts-batk-id",btt:"btt-latn-zz",btu:"btu-latn-ng",btv:"btv-deva-pk",btw:"btw-latn-ph",btx:"btx-latn-id","btx-batk":"btx-batk-id",bty:"bty-latn-id",btz:"btz-latn-id",bua:"bua-cyrl-ru",bub:"bub-latn-td",buc:"buc-latn-yt",bud:"bud-latn-zz",bue:"bue-latn-ca",buf:"buf-latn-cd",bug:"bug-latn-id",buh:"buh-latn-cn",bui:"bui-latn-cg",buj:"buj-latn-ng",buk:"buk-latn-zz",bum:"bum-latn-cm",bun:"bun-latn-sl",buo:"buo-latn-zz",bup:"bup-latn-id",buq:"buq-latn-pg",bus:"bus-latn-zz",but:"but-latn-pg",buu:"buu-latn-zz",buv:"buv-latn-pg",buw:"buw-latn-ga",bux:"bux-latn-ng",buy:"buy-latn-sl",buz:"buz-latn-ng",bva:"bva-latn-td",bvb:"bvb-latn-gq",bvc:"bvc-latn-sb",bvd:"bvd-latn-sb",bve:"bve-latn-id",bvf:"bvf-latn-td",bvg:"bvg-latn-cm",bvh:"bvh-latn-ng",bvi:"bvi-latn-ss",bvj:"bvj-latn-ng",bvk:"bvk-latn-id",bvm:"bvm-latn-cm",bvn:"bvn-latn-pg",bvo:"bvo-latn-td",bvq:"bvq-latn-cf",bvr:"bvr-latn-au",bvt:"bvt-latn-id",bvu:"bvu-latn-id",bvv:"bvv-latn-ve",bvw:"bvw-latn-ng",bvx:"bvx-latn-cg",bvy:"bvy-latn-ph",bvz:"bvz-latn-id",bwa:"bwa-latn-nc",bwb:"bwb-latn-fj",bwc:"bwc-latn-zm",bwd:"bwd-latn-zz",bwe:"bwe-mymr-mm","bwe-latn":"bwe-latn-mm",bwf:"bwf-latn-pg",bwg:"bwg-latn-mz",bwh:"bwh-latn-cm",bwi:"bwi-latn-ve",bwj:"bwj-latn-bf",bwk:"bwk-latn-pg",bwl:"bwl-latn-cd",bwm:"bwm-latn-pg",bwo:"bwo-latn-et","bwo-ethi":"bwo-ethi-et",bwp:"bwp-latn-id",bwq:"bwq-latn-bf",bwr:"bwr-latn-zz",bws:"bws-latn-cd",bwt:"bwt-latn-cm",bwu:"bwu-latn-gh",bww:"bww-latn-cd",bwx:"bwx-latn-cn",bwy:"bwy-latn-bf",bwz:"bwz-latn-cg",bxa:"bxa-latn-sb",bxb:"bxb-latn-ss",bxc:"bxc-latn-gq",bxf:"bxf-latn-pg",bxg:"bxg-latn-cd",bxh:"bxh-latn-zz",bxi:"bxi-latn-au",bxj:"bxj-latn-au",bxl:"bxl-latn-bf",bxm:"bxm-cyrl-mn","bxm-latn":"bxm-latn-mn","bxm-mong":"bxm-mong-mn",bxn:"bxn-latn-au",bxo:"bxo-latn-ng",bxp:"bxp-latn-cm",bxq:"bxq-latn-ng",bxs:"bxs-latn-cm",bxu:"bxu-mong-cn","bxu-cyrl":"bxu-cyrl-cn","bxu-latn":"bxu-latn-cn",bxv:"bxv-latn-td",bxw:"bxw-latn-ml",bxz:"bxz-latn-pg",bya:"bya-latn-ph",byb:"byb-latn-cm",byc:"byc-latn-ng",byd:"byd-latn-id",bye:"bye-latn-zz",byf:"byf-latn-ng",byh:"byh-deva-np",byi:"byi-latn-cd",byj:"byj-latn-ng",byk:"byk-latn-cn",byl:"byl-latn-id",bym:"bym-latn-au",byn:"byn-ethi-er",byp:"byp-latn-ng",byr:"byr-latn-zz",bys:"bys-latn-zz",byv:"byv-latn-cm",byw:"byw-deva-np",byx:"byx-latn-zz",byz:"byz-latn-pg",bza:"bza-latn-zz",bzb:"bzb-latn-id",bzc:"bzc-latn-mg",bzd:"bzd-latn-cr",bze:"bze-latn-ml",bzf:"bzf-latn-zz",bzh:"bzh-latn-zz",bzi:"bzi-thai-th",bzj:"bzj-latn-bz",bzk:"bzk-latn-ni",bzl:"bzl-latn-id",bzm:"bzm-latn-cd",bzn:"bzn-latn-id",bzo:"bzo-latn-cd",bzp:"bzp-latn-id",bzq:"bzq-latn-id",bzr:"bzr-latn-au",bzt:"bzt-latn-001",bzu:"bzu-latn-id",bzv:"bzv-latn-cm",bzw:"bzw-latn-zz",bzx:"bzx-latn-ml",bzy:"bzy-latn-ng",bzz:"bzz-latn-ng",ca:"ca-latn-es",caa:"caa-latn-gt",cab:"cab-latn-hn",cac:"cac-latn-gt",cad:"cad-latn-us",cae:"cae-latn-sn",caf:"caf-latn-ca","caf-cans":"caf-cans-ca",cag:"cag-latn-py",cah:"cah-latn-pe",caj:"caj-latn-ar",cak:"cak-latn-gt",cal:"cal-latn-mp",cam:"cam-latn-nc",can:"can-latn-zz",cao:"cao-latn-bo",cap:"cap-latn-bo",caq:"caq-latn-in",car:"car-latn-ve",cas:"cas-latn-bo",cav:"cav-latn-bo",caw:"caw-latn-bo",cax:"cax-latn-bo",cay:"cay-latn-ca",caz:"caz-latn-bo",cbb:"cbb-latn-co",cbc:"cbc-latn-co",cbd:"cbd-latn-co",cbg:"cbg-latn-co",cbi:"cbi-latn-ec",cbj:"cbj-latn-zz",cbk:"cbk-latn-ph","cbk-brai":"cbk-brai-ph",cbl:"cbl-latn-mm",cbn:"cbn-thai-th",cbo:"cbo-latn-ng",cbq:"cbq-latn-ng",cbr:"cbr-latn-pe",cbs:"cbs-latn-pe",cbt:"cbt-latn-pe",cbu:"cbu-latn-pe",cbv:"cbv-latn-co",cbw:"cbw-latn-ph",cby:"cby-latn-co",ccc:"ccc-latn-pe",ccd:"ccd-latn-br",cce:"cce-latn-mz",ccg:"ccg-latn-ng",cch:"cch-latn-ng",ccj:"ccj-latn-gw",ccl:"ccl-latn-tz",ccm:"ccm-latn-my",cco:"cco-latn-mx",ccp:"ccp-cakm-bd",ccr:"ccr-latn-sv",cde:"cde-telu-in",cdf:"cdf-latn-in","cdf-beng":"cdf-beng-in",cdh:"cdh-deva-in","cdh-takr":"cdh-takr-in",cdi:"cdi-gujr-in",cdj:"cdj-deva-in",cdm:"cdm-deva-np","cdm-latn":"cdm-latn-np",cdo:"cdo-hans-cn","cdo-hant":"cdo-hant-cn","cdo-latn":"cdo-latn-cn",cdr:"cdr-latn-ng",cdz:"cdz-beng-in",ce:"ce-cyrl-ru",cea:"cea-latn-us",ceb:"ceb-latn-ph",ceg:"ceg-latn-py",cek:"cek-latn-mm",cen:"cen-latn-ng",cet:"cet-latn-ng",cey:"cey-latn-mm",cfa:"cfa-latn-zz",cfd:"cfd-latn-ng",cfg:"cfg-latn-ng",cfm:"cfm-latn-mm","cfm-beng":"cfm-beng-in",cga:"cga-latn-pg",cgc:"cgc-latn-ph",cgg:"cgg-latn-ug",cgk:"cgk-tibt-bt",ch:"ch-latn-gu",chb:"chb-latn-co",chd:"chd-latn-mx",chf:"chf-latn-mx",chg:"chg-arab-tm",chh:"chh-latn-us",chj:"chj-latn-mx",chk:"chk-latn-fm",chl:"chl-latn-us",chm:"chm-cyrl-ru",chn:"chn-latn-us","chn-dupl":"chn-dupl-us",cho:"cho-latn-us",chp:"chp-latn-ca",chq:"chq-latn-mx",chr:"chr-cher-us",cht:"cht-latn-pe",chw:"chw-latn-mz",chx:"chx-deva-np",chy:"chy-latn-us",chz:"chz-latn-mx",cia:"cia-latn-id","cia-arab":"cia-arab-id","cia-hang":"cia-hang-id",cib:"cib-latn-bj",cic:"cic-latn-us",cie:"cie-latn-ng",cih:"cih-deva-in",cim:"cim-latn-it",cin:"cin-latn-br",cip:"cip-latn-mx",cir:"cir-latn-nc",ciw:"ciw-latn-us","ciw-cans":"ciw-cans-us",ciy:"ciy-latn-ve",cja:"cja-arab-kh",cje:"cje-latn-vn",cjh:"cjh-latn-us",cji:"cji-cyrl-ru",cjk:"cjk-latn-ao",cjm:"cjm-cham-vn",cjn:"cjn-latn-pg",cjo:"cjo-latn-pe",cjp:"cjp-latn-cr",cjs:"cjs-latn-ru","cjs-cyrl":"cjs-cyrl-ru",cjv:"cjv-latn-zz",cjy:"cjy-hans-cn","cjy-hant":"cjy-hant-cn",ckb:"ckb-arab-iq",ckl:"ckl-latn-zz",ckm:"ckm-latn-hr","ckm-glag":"ckm-glag-hr",ckn:"ckn-latn-mm",cko:"cko-latn-zz",ckq:"ckq-latn-td",ckr:"ckr-latn-pg",cks:"cks-latn-nc",ckt:"ckt-cyrl-ru",cku:"cku-latn-us",ckv:"ckv-latn-tw",ckx:"ckx-latn-cm",cky:"cky-latn-zz",ckz:"ckz-latn-gt",cla:"cla-latn-zz",clc:"clc-latn-ca",cle:"cle-latn-mx",clh:"clh-arab-pk",cli:"cli-latn-gh",clj:"clj-latn-mm",clk:"clk-latn-in","clk-tibt":"clk-tibt-cn",cll:"cll-latn-gh",clm:"clm-latn-us",clo:"clo-latn-mx",clt:"clt-latn-mm",clu:"clu-latn-ph",clw:"clw-cyrl-ru",cly:"cly-latn-mx",cma:"cma-latn-vn",cme:"cme-latn-zz",cmg:"cmg-soyo-mn",cmi:"cmi-latn-co",cml:"cml-latn-id",cmo:"cmo-latn-vn","cmo-kh":"cmo-latn-kh","cmo-khmr":"cmo-khmr-kh",cmr:"cmr-latn-mm",cms:"cms-latn-it",cmt:"cmt-latn-za",cna:"cna-tibt-in",cnb:"cnb-latn-mm",cnc:"cnc-latn-vn",cng:"cng-latn-cn",cnh:"cnh-latn-mm",cni:"cni-latn-pe",cnk:"cnk-latn-mm",cnl:"cnl-latn-mx",cnp:"cnp-hans-cn","cnp-hant":"cnp-hant-cn",cnq:"cnq-latn-cm",cns:"cns-latn-id",cnt:"cnt-latn-mx",cnw:"cnw-latn-mm",cnx:"cnx-latn-gb",co:"co-latn-fr",coa:"coa-latn-au",cob:"cob-latn-mx",coc:"coc-latn-mx",cod:"cod-latn-pe",coe:"coe-latn-co",cof:"cof-latn-ec",cog:"cog-thai-th",coh:"coh-latn-ke",coj:"coj-latn-mx",cok:"cok-latn-mx",col:"col-latn-us",com:"com-latn-us",coo:"coo-latn-ca",cop:"cop-copt-eg",coq:"coq-latn-us",cot:"cot-latn-pe",cou:"cou-latn-sn",cox:"cox-latn-pe",coz:"coz-latn-mx",cpa:"cpa-latn-mx",cpb:"cpb-latn-pe",cpc:"cpc-latn-pe",cpg:"cpg-grek-gr",cpi:"cpi-latn-nr",cpn:"cpn-latn-gh",cpo:"cpo-latn-bf",cps:"cps-latn-ph",cpu:"cpu-latn-pe",cpx:"cpx-latn-cn",cpy:"cpy-latn-pe",cqd:"cqd-latn-cn",cr:"cr-cans-ca",crb:"crb-latn-vc",crc:"crc-latn-vu",crd:"crd-latn-us",crf:"crf-latn-co",crg:"crg-latn-ca",crh:"crh-cyrl-ua",cri:"cri-latn-st",crj:"crj-cans-ca","crj-latn":"crj-latn-ca",crk:"crk-cans-ca",crl:"crl-cans-ca",crm:"crm-cans-ca",crn:"crn-latn-mx",cro:"cro-latn-us",crq:"crq-latn-ar",crs:"crs-latn-sc",crt:"crt-latn-ar",crv:"crv-latn-in",crw:"crw-latn-vn",crx:"crx-latn-ca","crx-cans":"crx-cans-ca",cry:"cry-latn-ng",crz:"crz-latn-us",cs:"cs-latn-cz",csa:"csa-latn-mx",csb:"csb-latn-pl",csh:"csh-mymr-mm","csh-latn":"csh-latn-mm",csj:"csj-latn-mm",csk:"csk-latn-sn",csm:"csm-latn-us",cso:"cso-latn-mx",csp:"csp-hans-cn","csp-hant":"csp-hant-cn",css:"css-latn-us",cst:"cst-latn-us",csv:"csv-latn-mm",csw:"csw-cans-ca",csy:"csy-latn-mm",csz:"csz-latn-us",cta:"cta-latn-mx",ctc:"ctc-latn-us",ctd:"ctd-pauc-mm",cte:"cte-latn-mx",ctg:"ctg-beng-bd","ctg-arab":"ctg-arab-bd","ctg-latn":"ctg-latn-bd",cth:"cth-latn-mm",ctl:"ctl-latn-mx",ctm:"ctm-latn-us",ctn:"ctn-deva-np",cto:"cto-latn-co",ctp:"ctp-latn-mx",cts:"cts-latn-ph",ctt:"ctt-taml-in",ctu:"ctu-latn-mx",ctz:"ctz-latn-mx",cu:"cu-cyrl-ru","cu-glag":"cu-glag-bg",cua:"cua-latn-vn",cub:"cub-latn-co",cuc:"cuc-latn-mx",cuh:"cuh-latn-ke",cui:"cui-latn-co",cuj:"cuj-latn-pe",cuk:"cuk-latn-pa",cul:"cul-latn-br",cuo:"cuo-latn-ve",cup:"cup-latn-us",cut:"cut-latn-mx",cuu:"cuu-lana-cn",cuv:"cuv-latn-cm",cux:"cux-latn-mx",cv:"cv-cyrl-ru",cvg:"cvg-latn-in","cvg-tibt":"cvg-tibt-in",cvn:"cvn-latn-mx",cwa:"cwa-latn-tz",cwb:"cwb-latn-mz",cwe:"cwe-latn-tz",cwg:"cwg-latn-my",cwt:"cwt-latn-sn",cy:"cy-latn-gb",cya:"cya-latn-mx",cyb:"cyb-latn-bo",cyo:"cyo-latn-ph",czh:"czh-hans-cn","czh-hant":"czh-hant-cn",czk:"czk-hebr-cz",czn:"czn-latn-mx",czt:"czt-latn-mm",da:"da-latn-dk",daa:"daa-latn-td",dac:"dac-latn-pg",dad:"dad-latn-zz",dae:"dae-latn-cm",daf:"daf-latn-ci",dag:"dag-latn-zz",dah:"dah-latn-zz",dai:"dai-latn-td",daj:"daj-latn-sd",dak:"dak-latn-us",dal:"dal-latn-ke",dam:"dam-latn-ng",dao:"dao-latn-mm",daq:"daq-deva-in",dar:"dar-cyrl-ru",das:"das-latn-ci",dau:"dau-latn-td",dav:"dav-latn-ke",daw:"daw-latn-ph",dax:"dax-latn-au",daz:"daz-latn-id",dba:"dba-latn-ml",dbb:"dbb-latn-ng",dbd:"dbd-latn-zz",dbe:"dbe-latn-id",dbf:"dbf-latn-id",dbg:"dbg-latn-ml",dbi:"dbi-latn-ng",dbj:"dbj-latn-my","dbj-arab":"dbj-arab-my",dbl:"dbl-latn-au",dbm:"dbm-latn-ng",dbn:"dbn-latn-id",dbo:"dbo-latn-ng",dbp:"dbp-latn-ng",dbq:"dbq-latn-zz",dbt:"dbt-latn-ml",dbu:"dbu-latn-ml",dbv:"dbv-latn-ng",dbw:"dbw-latn-ml",dby:"dby-latn-pg",dcc:"dcc-arab-in",dcr:"dcr-latn-vi",dda:"dda-latn-au",ddd:"ddd-latn-ss",dde:"dde-latn-cg",ddg:"ddg-latn-tl",ddi:"ddi-latn-pg",ddj:"ddj-latn-au",ddn:"ddn-latn-zz",ddo:"ddo-cyrl-ru",ddr:"ddr-latn-au",dds:"dds-latn-ml",ddw:"ddw-latn-id",de:"de-latn-de",dec:"dec-latn-sd",ded:"ded-latn-zz",dee:"dee-latn-lr",def:"def-arab-ir",deg:"deg-latn-ng",deh:"deh-arab-pk",dei:"dei-latn-id",dek:"dek-latn-cm",del:"del-latn-us",dem:"dem-latn-id",den:"den-latn-ca",deq:"deq-latn-cf",der:"der-beng-in","der-latn":"der-latn-in",des:"des-latn-br",dev:"dev-latn-pg",dez:"dez-latn-cd",dga:"dga-latn-zz",dgb:"dgb-latn-ml",dgc:"dgc-latn-ph",dgd:"dgd-latn-bf",dge:"dge-latn-pg",dgg:"dgg-latn-pg",dgh:"dgh-latn-zz",dgi:"dgi-latn-zz",dgk:"dgk-latn-cf",dgl:"dgl-arab-zz",dgn:"dgn-latn-au",dgr:"dgr-latn-ca",dgs:"dgs-latn-bf",dgt:"dgt-latn-au",dgw:"dgw-latn-au",dgx:"dgx-latn-pg",dgz:"dgz-latn-zz",dhg:"dhg-latn-au",dhi:"dhi-deva-np",dhl:"dhl-latn-au",dhm:"dhm-latn-ao",dhn:"dhn-gujr-in",dho:"dho-deva-in",dhr:"dhr-latn-au",dhs:"dhs-latn-tz",dhu:"dhu-latn-au",dhv:"dhv-latn-nc",dhw:"dhw-deva-np",dhx:"dhx-latn-au",dia:"dia-latn-zz",dib:"dib-latn-ss",dic:"dic-latn-ci",did:"did-latn-ss",dif:"dif-latn-au",dig:"dig-latn-ke",dih:"dih-latn-mx",dii:"dii-latn-cm",dij:"dij-latn-id",dil:"dil-latn-sd",din:"din-latn-ss","din-arab":"din-arab-ss",dio:"dio-latn-ng",dip:"dip-latn-ss",dir:"dir-latn-ng",dis:"dis-latn-in","dis-beng":"dis-beng-in",diu:"diu-latn-na",diw:"diw-latn-ss",dix:"dix-latn-vu",diy:"diy-latn-id",diz:"diz-latn-cd",dja:"dja-latn-au",djb:"djb-latn-au",djc:"djc-latn-td",djd:"djd-latn-au",dje:"dje-latn-ne",djf:"djf-latn-au",dji:"dji-latn-au",djj:"djj-latn-au",djk:"djk-latn-sr",djm:"djm-latn-ml",djn:"djn-latn-au",djo:"djo-latn-id",djr:"djr-latn-au",dju:"dju-latn-pg",djw:"djw-latn-au",dka:"dka-tibt-bt",dkg:"dkg-latn-ng",dkk:"dkk-latn-id",dkr:"dkr-latn-my",dks:"dks-latn-ss",dkx:"dkx-latn-cm",dlg:"dlg-cyrl-ru",dlm:"dlm-latn-hr",dln:"dln-latn-in",dma:"dma-latn-ga",dmb:"dmb-latn-ml",dmc:"dmc-latn-pg",dmd:"dmd-latn-au",dme:"dme-latn-cm",dmf:"dmf-medf-ng",dmg:"dmg-latn-my",dmk:"dmk-arab-pk",dml:"dml-arab-pk",dmm:"dmm-latn-cm",dmo:"dmo-latn-cm",dmr:"dmr-latn-id",dms:"dms-latn-id",dmu:"dmu-latn-id",dmv:"dmv-latn-my",dmw:"dmw-latn-au",dmx:"dmx-latn-mz",dmy:"dmy-latn-id",dna:"dna-latn-id",dnd:"dnd-latn-pg",dne:"dne-latn-tz",dng:"dng-cyrl-kg","dng-arab":"dng-arab-kg",dni:"dni-latn-id",dnj:"dnj-latn-ci",dnk:"dnk-latn-id",dnn:"dnn-latn-bf",dno:"dno-latn-cd",dnr:"dnr-latn-pg",dnt:"dnt-latn-id",dnu:"dnu-mymr-mm",dnv:"dnv-mymr-mm",dnw:"dnw-latn-id",dny:"dny-latn-br",doa:"doa-latn-pg",dob:"dob-latn-zz",doc:"doc-latn-cn",doe:"doe-latn-tz",dof:"dof-latn-pg",doh:"doh-latn-ng",doi:"doi-deva-in",dok:"dok-latn-id",dol:"dol-latn-pg",don:"don-latn-pg",doo:"doo-latn-cd",dop:"dop-latn-zz",dor:"dor-latn-sb",dos:"dos-latn-bf",dot:"dot-latn-ng",dov:"dov-latn-zw",dow:"dow-latn-zz",dox:"dox-ethi-et",doy:"doy-latn-gh",dpp:"dpp-latn-my",drc:"drc-latn-pt",dre:"dre-tibt-np",drg:"drg-latn-my",drh:"drh-mong-cn",dri:"dri-latn-zz",drl:"drl-latn-au",drn:"drn-latn-id",dro:"dro-latn-my",drq:"drq-deva-np",drs:"drs-ethi-zz",drt:"drt-latn-nl",dru:"dru-latn-tw",dry:"dry-deva-np",dsb:"dsb-latn-de",dsh:"dsh-latn-ke",dsi:"dsi-latn-td",dsn:"dsn-latn-id",dso:"dso-orya-in",dsq:"dsq-latn-ml","dsq-arab":"dsq-arab-ml",dta:"dta-latn-cn","dta-cyrl":"dta-cyrl-cn","dta-hans":"dta-hans-cn",dtb:"dtb-latn-my",dtd:"dtd-latn-ca",dth:"dth-latn-au",dti:"dti-latn-ml",dtk:"dtk-latn-ml",dtm:"dtm-latn-ml",dto:"dto-latn-ml",dtp:"dtp-latn-my",dtr:"dtr-latn-my",dts:"dts-latn-zz",dtt:"dtt-latn-ml",dtu:"dtu-latn-ml",dty:"dty-deva-np",dua:"dua-latn-cm",dub:"dub-gujr-in",duc:"duc-latn-zz",dud:"dud-latn-zz",due:"due-latn-ph",duf:"duf-latn-nc",dug:"dug-latn-zz",duh:"duh-deva-in","duh-gujr":"duh-gujr-in",dui:"dui-latn-pg",duk:"duk-latn-pg",dul:"dul-latn-ph",dum:"dum-latn-nl",dun:"dun-latn-id",duo:"duo-latn-ph",dup:"dup-latn-id",duq:"duq-latn-id",dur:"dur-latn-cm",dus:"dus-deva-np",duu:"duu-latn-cn",duv:"duv-latn-id",duw:"duw-latn-id",dux:"dux-latn-ml",duy:"duy-latn-ph",duz:"duz-latn-cm",dv:"dv-thaa-mv",dva:"dva-latn-zz",dwa:"dwa-latn-ng",dwk:"dwk-orya-in",dwr:"dwr-latn-et","dwr-ethi":"dwr-ethi-et",dws:"dws-latn-001",dwu:"dwu-latn-au",dww:"dww-latn-zz",dwy:"dwy-latn-au",dwz:"dwz-deva-np",dya:"dya-latn-bf",dyb:"dyb-latn-au",dyd:"dyd-latn-au",dyg:"dyg-latn-ph",dyi:"dyi-latn-ci",dym:"dym-latn-ml",dyn:"dyn-latn-au",dyo:"dyo-latn-sn",dyu:"dyu-latn-bf",dyy:"dyy-latn-au",dz:"dz-tibt-bt",dza:"dza-latn-ng",dze:"dze-latn-au",dzg:"dzg-latn-zz",dzl:"dzl-tibt-bt",dzn:"dzn-latn-cd",eaa:"eaa-latn-au",ebc:"ebc-latn-id",ebg:"ebg-latn-ng",ebk:"ebk-latn-ph",ebo:"ebo-latn-cg",ebr:"ebr-latn-ci",ebu:"ebu-latn-ke",ecr:"ecr-grek-gr",ecy:"ecy-cprt-cy",ee:"ee-latn-gh",efa:"efa-latn-ng",efe:"efe-latn-cd",efi:"efi-latn-ng",ega:"ega-latn-ci",egl:"egl-latn-it",egm:"egm-latn-tz",ego:"ego-latn-ng",egy:"egy-egyp-eg",ehu:"ehu-latn-ng",eip:"eip-latn-id",eit:"eit-latn-pg",eiv:"eiv-latn-pg",eja:"eja-latn-gw",eka:"eka-latn-zz",eke:"eke-latn-ng",ekg:"ekg-latn-id",eki:"eki-latn-ng",ekl:"ekl-latn-bd",ekm:"ekm-latn-cm",eko:"eko-latn-mz","eko-arab":"eko-arab-mz",ekp:"ekp-latn-ng",ekr:"ekr-latn-ng",eky:"eky-kali-mm",el:"el-grek-gr",ele:"ele-latn-pg",elk:"elk-latn-pg",elm:"elm-latn-ng",elo:"elo-latn-ke",elu:"elu-latn-pg",ema:"ema-latn-zz",emb:"emb-latn-id",eme:"eme-latn-gf",emg:"emg-deva-np",emi:"emi-latn-zz",emm:"emm-latn-mx",emn:"emn-latn-cm",emp:"emp-latn-pa",ems:"ems-latn-us","ems-cyrl":"ems-cyrl-us",emu:"emu-deva-in",emw:"emw-latn-id",emx:"emx-latn-fr",emz:"emz-latn-cm",en:"en-latn-us","en-shaw":"en-shaw-gb",ena:"ena-latn-pg",enb:"enb-latn-ke",enc:"enc-latn-vn",end:"end-latn-id",enf:"enf-cyrl-ru",enh:"enh-cyrl-ru",enl:"enl-latn-py",enm:"enm-latn-gb",enn:"enn-latn-zz",eno:"eno-latn-id",enq:"enq-latn-zz",enr:"enr-latn-id",env:"env-latn-ng",enw:"enw-latn-ng",enx:"enx-latn-py",eo:"eo-latn-001",eot:"eot-latn-ci",epi:"epi-latn-ng",era:"era-taml-in",erg:"erg-latn-vu",erh:"erh-latn-ng",eri:"eri-latn-zz",erk:"erk-latn-vu",err:"err-latn-au",ert:"ert-latn-id",erw:"erw-latn-id",es:"es-latn-es",ese:"ese-latn-bo",esg:"esg-gonm-in",esh:"esh-arab-ir",esi:"esi-latn-us",esm:"esm-latn-ci",ess:"ess-latn-us","ess-cyrl":"ess-cyrl-us",esu:"esu-latn-us",esy:"esy-latn-ph",et:"et-latn-ee",etb:"etb-latn-ng",etn:"etn-latn-vu",eto:"eto-latn-cm",etr:"etr-latn-zz",ets:"ets-latn-ng",ett:"ett-ital-it",etu:"etu-latn-zz",etx:"etx-latn-zz",etz:"etz-latn-id",eu:"eu-latn-es",eve:"eve-cyrl-ru",evh:"evh-latn-ng",evn:"evn-cyrl-ru","evn-latn":"evn-latn-cn","evn-mong":"evn-mong-cn",ewo:"ewo-latn-cm",ext:"ext-latn-es",eya:"eya-latn-us",eyo:"eyo-latn-ke",eza:"eza-latn-zz",eze:"eze-latn-ng",fa:"fa-arab-ir",faa:"faa-latn-zz",fab:"fab-latn-zz",fad:"fad-latn-pg",faf:"faf-latn-sb",fag:"fag-latn-zz",fah:"fah-latn-ng",fai:"fai-latn-zz",faj:"faj-latn-pg",fak:"fak-latn-cm",fal:"fal-latn-cm",fam:"fam-latn-ng",fan:"fan-latn-gq",fap:"fap-latn-sn",far:"far-latn-sb",fau:"fau-latn-id",fax:"fax-latn-es",fay:"fay-arab-ir",faz:"faz-arab-ir",fbl:"fbl-latn-ph",fer:"fer-latn-ss",ff:"ff-latn-sn","ff-adlm":"ff-adlm-gn",ffi:"ffi-latn-zz",ffm:"ffm-latn-ml",fgr:"fgr-latn-td",fi:"fi-latn-fi",fia:"fia-arab-sd",fie:"fie-latn-ng",fif:"fif-latn-sa",fil:"fil-latn-ph",fip:"fip-latn-tz",fir:"fir-latn-ng",fit:"fit-latn-se",fiw:"fiw-latn-pg",fj:"fj-latn-fj",fkk:"fkk-latn-ng",fkv:"fkv-latn-no",fla:"fla-latn-us",flh:"flh-latn-id",fli:"fli-latn-ng",fll:"fll-latn-cm",fln:"fln-latn-au",flr:"flr-latn-zz",fly:"fly-latn-za",fmp:"fmp-latn-zz",fmu:"fmu-deva-in",fnb:"fnb-latn-vu",fng:"fng-latn-za",fni:"fni-latn-td",fo:"fo-latn-fo",fod:"fod-latn-zz",foi:"foi-latn-pg",fom:"fom-latn-cd",fon:"fon-latn-bj",for:"for-latn-zz",fos:"fos-latn-tw",fpe:"fpe-latn-zz",fqs:"fqs-latn-zz",fr:"fr-latn-fr",frc:"frc-latn-us",frd:"frd-latn-id",frk:"frk-latn-de",frm:"frm-latn-fr",fro:"fro-latn-fr",frp:"frp-latn-fr",frq:"frq-latn-pg",frr:"frr-latn-de",frs:"frs-latn-de",frt:"frt-latn-vu",fub:"fub-arab-cm",fud:"fud-latn-wf",fue:"fue-latn-zz",fuf:"fuf-latn-gn",fuh:"fuh-latn-zz",fui:"fui-latn-td",fum:"fum-latn-ng",fun:"fun-latn-br",fuq:"fuq-latn-ne",fur:"fur-latn-it",fut:"fut-latn-vu",fuu:"fuu-latn-cd",fuv:"fuv-latn-ng",fuy:"fuy-latn-zz",fvr:"fvr-latn-sd",fwa:"fwa-latn-nc",fwe:"fwe-latn-na",fy:"fy-latn-nl",ga:"ga-latn-ie",gaa:"gaa-latn-gh",gab:"gab-latn-td",gac:"gac-latn-in","gac-deva":"gac-deva-in",gad:"gad-latn-ph",gae:"gae-latn-ve",gaf:"gaf-latn-zz",gag:"gag-latn-md",gah:"gah-latn-zz",gai:"gai-latn-pg",gaj:"gaj-latn-zz",gak:"gak-latn-id",gal:"gal-latn-tl",gam:"gam-latn-zz",gan:"gan-hans-cn",gao:"gao-latn-pg",gap:"gap-latn-pg",gaq:"gaq-orya-in",gar:"gar-latn-pg",gas:"gas-gujr-in",gat:"gat-latn-pg",gau:"gau-telu-in",gaw:"gaw-latn-zz",gax:"gax-latn-et","gax-ethi":"gax-ethi-et",gay:"gay-latn-id",gba:"gba-latn-zz",gbb:"gbb-latn-au",gbd:"gbd-latn-au",gbe:"gbe-latn-pg",gbf:"gbf-latn-zz",gbg:"gbg-latn-cf",gbh:"gbh-latn-bj",gbi:"gbi-latn-id",gbj:"gbj-orya-in",gbk:"gbk-deva-in","gbk-takr":"gbk-takr-in",gbl:"gbl-gujr-in","gbl-deva":"gbl-deva-in",gbm:"gbm-deva-in",gbn:"gbn-latn-ss",gbp:"gbp-latn-cf",gbq:"gbq-latn-cf",gbr:"gbr-latn-ng",gbs:"gbs-latn-bj",gbu:"gbu-latn-au",gbv:"gbv-latn-cf",gbw:"gbw-latn-au",gbx:"gbx-latn-bj",gby:"gby-latn-zz",gbz:"gbz-arab-ir",gcc:"gcc-latn-pg",gcd:"gcd-latn-au",gcf:"gcf-latn-gp",gcl:"gcl-latn-gd",gcn:"gcn-latn-pg",gcr:"gcr-latn-gf",gct:"gct-latn-ve",gd:"gd-latn-gb",gdb:"gdb-orya-in","gdb-telu":"gdb-telu-in",gdc:"gdc-latn-au",gdd:"gdd-latn-pg",gde:"gde-latn-zz",gdf:"gdf-latn-ng",gdg:"gdg-latn-ph",gdh:"gdh-latn-au",gdi:"gdi-latn-cf",gdj:"gdj-latn-au",gdk:"gdk-latn-td",gdl:"gdl-latn-et","gdl-ethi":"gdl-ethi-et",gdm:"gdm-latn-td",gdn:"gdn-latn-zz",gdo:"gdo-cyrl-ru",gdq:"gdq-latn-ye",gdr:"gdr-latn-zz",gdt:"gdt-latn-au",gdu:"gdu-latn-ng",gdx:"gdx-deva-in",gea:"gea-latn-ng",geb:"geb-latn-zz",gec:"gec-latn-lr",ged:"ged-latn-ng",gef:"gef-latn-id",geg:"geg-latn-ng",geh:"geh-latn-ca",gei:"gei-latn-id",gej:"gej-latn-zz",gek:"gek-latn-ng",gel:"gel-latn-zz",geq:"geq-latn-cf",ges:"ges-latn-id",gev:"gev-latn-ga",gew:"gew-latn-ng",gex:"gex-latn-so",gey:"gey-latn-cd",gez:"gez-ethi-et",gfk:"gfk-latn-zz",gga:"gga-latn-sb",ggb:"ggb-latn-lr",ggd:"ggd-latn-au",gge:"gge-latn-au",ggg:"ggg-arab-pk",ggk:"ggk-latn-au",ggl:"ggl-latn-pg",ggn:"ggn-deva-np",ggt:"ggt-latn-pg",ggu:"ggu-latn-ci",ggw:"ggw-latn-pg",gha:"gha-arab-ly","gha-latn":"gha-latn-ly","gha-tfng":"gha-tfng-ly",ghc:"ghc-latn-gb",ghe:"ghe-deva-np",ghk:"ghk-latn-mm",ghn:"ghn-latn-sb",ghr:"ghr-arab-pk",ghs:"ghs-latn-zz",ght:"ght-tibt-np",gia:"gia-latn-au",gib:"gib-latn-ng",gic:"gic-latn-za",gid:"gid-latn-cm",gie:"gie-latn-ci",gig:"gig-arab-pk",gih:"gih-latn-au",gil:"gil-latn-ki",gim:"gim-latn-zz",gin:"gin-cyrl-ru",gip:"gip-latn-pg",giq:"giq-latn-vn",gir:"gir-latn-vn",gis:"gis-latn-cm",git:"git-latn-ca",gix:"gix-latn-cd",giy:"giy-latn-au",giz:"giz-latn-cm",gjk:"gjk-arab-pk",gjm:"gjm-latn-au",gjn:"gjn-latn-zz",gjr:"gjr-latn-au",gju:"gju-arab-pk",gka:"gka-latn-pg",gkd:"gkd-latn-pg",gke:"gke-latn-cm",gkn:"gkn-latn-zz",gko:"gko-latn-au",gkp:"gkp-latn-zz",gku:"gku-latn-za",gl:"gl-latn-es",glb:"glb-latn-ng",glc:"glc-latn-td",gld:"gld-cyrl-ru",glh:"glh-arab-af",glj:"glj-latn-td",glk:"glk-arab-ir",gll:"gll-latn-au",glo:"glo-latn-ng",glr:"glr-latn-lr",glu:"glu-latn-td",glw:"glw-latn-ng",gma:"gma-latn-au",gmb:"gmb-latn-sb",gmd:"gmd-latn-ng",gmg:"gmg-latn-pg",gmh:"gmh-latn-de",gmm:"gmm-latn-zz",gmn:"gmn-latn-cm",gmr:"gmr-latn-au",gmu:"gmu-latn-pg",gmv:"gmv-ethi-zz",gmx:"gmx-latn-tz",gmy:"gmy-linb-gr",gmz:"gmz-latn-ng",gn:"gn-latn-py",gna:"gna-latn-bf",gnb:"gnb-latn-in",gnc:"gnc-latn-es",gnd:"gnd-latn-zz",gne:"gne-latn-ng",gng:"gng-latn-zz",gnh:"gnh-latn-ng",gni:"gni-latn-au",gnj:"gnj-latn-ci",gnk:"gnk-latn-bw",gnl:"gnl-latn-au",gnm:"gnm-latn-pg",gnn:"gnn-latn-au",gnq:"gnq-latn-my",gnr:"gnr-latn-au",gnt:"gnt-latn-pg",gnu:"gnu-latn-pg",gnw:"gnw-latn-bo",gnz:"gnz-latn-cf",goa:"goa-latn-ci",gob:"gob-latn-co",goc:"goc-latn-pg",god:"god-latn-zz",goe:"goe-tibt-bt",gof:"gof-ethi-zz",gog:"gog-latn-tz",goh:"goh-latn-de",goi:"goi-latn-zz",gok:"gok-deva-in",gol:"gol-latn-lr",gom:"gom-deva-in",gon:"gon-telu-in",goo:"goo-latn-fj",gop:"gop-latn-id",goq:"goq-latn-id",gor:"gor-latn-id",gos:"gos-latn-nl",got:"got-goth-ua",gou:"gou-latn-cm",gov:"gov-latn-ci",gow:"gow-latn-tz",gox:"gox-latn-cd",goy:"goy-latn-td",gpa:"gpa-latn-ng",gpe:"gpe-latn-gh",gpn:"gpn-latn-pg",gqa:"gqa-latn-ng",gqn:"gqn-latn-br",gqr:"gqr-latn-td",gra:"gra-deva-in","gra-gujr":"gra-gujr-in",grb:"grb-latn-zz",grc:"grc-cprt-cy","grc-linb":"grc-linb-gr",grd:"grd-latn-ng",grg:"grg-latn-pg",grh:"grh-latn-ng",gri:"gri-latn-sb",grj:"grj-latn-lr",grm:"grm-latn-my",grq:"grq-latn-pg",grs:"grs-latn-id",grt:"grt-beng-in",gru:"gru-ethi-et","gru-latn":"gru-latn-et",grv:"grv-latn-lr",grw:"grw-latn-zz",grx:"grx-latn-pg",gry:"gry-latn-lr",grz:"grz-latn-pg",gsl:"gsl-latn-sn",gsn:"gsn-latn-pg",gso:"gso-latn-cf",gsp:"gsp-latn-pg",gsw:"gsw-latn-ch",gta:"gta-latn-br",gtu:"gtu-latn-au",gu:"gu-gujr-in",gua:"gua-latn-ng",gub:"gub-latn-br",guc:"guc-latn-co",gud:"gud-latn-zz",gue:"gue-latn-au",guf:"guf-latn-au",guh:"guh-latn-co",gui:"gui-latn-bo",guk:"guk-latn-et","guk-ethi":"guk-ethi-et",gul:"gul-latn-us",gum:"gum-latn-co",gun:"gun-latn-br",guo:"guo-latn-co",gup:"gup-latn-au",guq:"guq-latn-py",gur:"gur-latn-gh",gut:"gut-latn-cr",guu:"guu-latn-ve",guw:"guw-latn-zz",gux:"gux-latn-zz",guz:"guz-latn-ke",gv:"gv-latn-im",gva:"gva-latn-py",gvc:"gvc-latn-br",gve:"gve-latn-pg",gvf:"gvf-latn-zz",gvj:"gvj-latn-br",gvl:"gvl-latn-td",gvm:"gvm-latn-ng",gvn:"gvn-latn-au",gvo:"gvo-latn-br",gvp:"gvp-latn-br",gvr:"gvr-deva-np",gvs:"gvs-latn-zz",gvy:"gvy-latn-au",gwa:"gwa-latn-ci",gwb:"gwb-latn-ng",gwc:"gwc-arab-zz",gwd:"gwd-latn-et",gwe:"gwe-latn-tz",gwf:"gwf-arab-pk",gwg:"gwg-latn-ng",gwi:"gwi-latn-ca",gwj:"gwj-latn-bw",gwm:"gwm-latn-au",gwn:"gwn-latn-ng",gwr:"gwr-latn-ug",gwt:"gwt-arab-zz",gwu:"gwu-latn-au",gww:"gww-latn-au",gwx:"gwx-latn-gh",gxx:"gxx-latn-ci",gyb:"gyb-latn-pg",gyd:"gyd-latn-au",gye:"gye-latn-ng",gyf:"gyf-latn-au",gyg:"gyg-latn-cf",gyi:"gyi-latn-zz",gyl:"gyl-latn-et","gyl-ethi":"gyl-ethi-et",gym:"gym-latn-pa",gyn:"gyn-latn-gy",gyo:"gyo-deva-np",gyr:"gyr-latn-bo",gyy:"gyy-latn-au",gyz:"gyz-latn-ng",gza:"gza-latn-sd",gzi:"gzi-arab-ir",gzn:"gzn-latn-id",ha:"ha-latn-ng","ha-cm":"ha-arab-cm","ha-sd":"ha-arab-sd",haa:"haa-latn-us",hac:"hac-arab-ir",had:"had-latn-id",hae:"hae-latn-et",hag:"hag-latn-zz",hah:"hah-latn-pg",hai:"hai-latn-ca",haj:"haj-latn-in","haj-beng":"haj-beng-in",hak:"hak-hans-cn",hal:"hal-latn-vn",ham:"ham-latn-zz",han:"han-latn-tz",hao:"hao-latn-pg",hap:"hap-latn-id",haq:"haq-latn-tz",har:"har-ethi-et","har-arab":"har-arab-et","har-latn":"har-latn-et",has:"has-latn-ca",hav:"hav-latn-cd",haw:"haw-latn-us",hax:"hax-latn-ca",hay:"hay-latn-tz",haz:"haz-arab-af",hba:"hba-latn-cd",hbb:"hbb-latn-zz",hbn:"hbn-latn-sd",hbo:"hbo-hebr-il",hbu:"hbu-latn-tl",hch:"hch-latn-mx",hdy:"hdy-ethi-zz",he:"he-hebr-il",hed:"hed-latn-td",heg:"heg-latn-id",heh:"heh-latn-tz",hei:"hei-latn-ca",hem:"hem-latn-cd",hgm:"hgm-latn-na",hgw:"hgw-latn-pg",hhi:"hhi-latn-pg",hhr:"hhr-latn-sn",hhy:"hhy-latn-zz",hi:"hi-deva-in","hi-latn":"hi-latn-in",hia:"hia-latn-zz",hib:"hib-latn-pe",hid:"hid-latn-us",hif:"hif-latn-fj",hig:"hig-latn-zz",hih:"hih-latn-zz",hii:"hii-takr-in","hii-deva":"hii-deva-in",hij:"hij-latn-cm",hik:"hik-latn-id",hil:"hil-latn-ph",hio:"hio-latn-bw",hir:"hir-latn-br",hit:"hit-xsux-tr",hiw:"hiw-latn-vu",hix:"hix-latn-br",hji:"hji-latn-id",hka:"hka-latn-tz",hke:"hke-latn-cd",hkh:"hkh-arab-in","hkh-deva":"hkh-deva-in","hkh-latn":"hkh-latn-in",hkk:"hkk-latn-pg",hla:"hla-latn-zz",hlb:"hlb-deva-in",hld:"hld-latn-vn",hlt:"hlt-latn-mm",hlu:"hlu-hluw-tr",hma:"hma-latn-cn",hmb:"hmb-latn-ml",hmd:"hmd-plrd-cn",hmf:"hmf-latn-vn",hmj:"hmj-bopo-cn",hmm:"hmm-latn-cn",hmn:"hmn-latn-cn","hmn-bopo":"hmn-bopo-cn","hmn-hmng":"hmn-hmng-cn",hmp:"hmp-latn-cn",hmq:"hmq-bopo-cn",hmr:"hmr-latn-in",hms:"hms-latn-cn",hmt:"hmt-latn-zz",hmu:"hmu-latn-id",hmv:"hmv-latn-vn",hmw:"hmw-latn-cn",hmy:"hmy-latn-cn",hmz:"hmz-latn-cn","hmz-plrd":"hmz-plrd-cn",hna:"hna-latn-cm",hnd:"hnd-arab-pk",hne:"hne-deva-in",hng:"hng-latn-ao",hnh:"hnh-latn-bw",hni:"hni-latn-cn",hnj:"hnj-hmnp-us","hnj-au":"hnj-laoo-au","hnj-cn":"hnj-laoo-cn","hnj-fr":"hnj-laoo-fr","hnj-gf":"hnj-laoo-gf","hnj-la":"hnj-laoo-la","hnj-laoo":"hnj-laoo-la","hnj-mm":"hnj-laoo-mm","hnj-sr":"hnj-laoo-sr","hnj-th":"hnj-laoo-th","hnj-us":"hnj-hmnp-us","hnj-vn":"hnj-laoo-vn",hnn:"hnn-latn-ph",hno:"hno-arab-pk",hns:"hns-latn-sr",ho:"ho-latn-pg",hoa:"hoa-latn-sb",hob:"hob-latn-pg",hoc:"hoc-deva-in",hod:"hod-latn-ng",hoe:"hoe-latn-ng",hoh:"hoh-arab-om",hoi:"hoi-latn-us",hoj:"hoj-deva-in",hol:"hol-latn-ao",hom:"hom-latn-ss",hoo:"hoo-latn-cd",hop:"hop-latn-us",hor:"hor-latn-td",hot:"hot-latn-zz",hov:"hov-latn-id",how:"how-hani-cn",hoy:"hoy-deva-in",hpo:"hpo-mymr-mm",hr:"hr-latn-hr",hra:"hra-latn-in",hrc:"hrc-latn-pg",hre:"hre-latn-vn",hrk:"hrk-latn-id",hrm:"hrm-latn-cn","hrm-hmng":"hrm-hmng-cn",hro:"hro-latn-vn",hrp:"hrp-latn-au",hrt:"hrt-syrc-tr",hru:"hru-latn-in",hrw:"hrw-latn-pg",hrx:"hrx-latn-br",hrz:"hrz-arab-ir",hsb:"hsb-latn-de",hsn:"hsn-hans-cn",hss:"hss-arab-om",ht:"ht-latn-ht",hti:"hti-latn-id",hto:"hto-latn-co",hts:"hts-latn-tz",htu:"htu-latn-id",htx:"htx-xsux-tr",hu:"hu-latn-hu",hub:"hub-latn-pe",huc:"huc-latn-bw",hud:"hud-latn-id",hue:"hue-latn-mx",huf:"huf-latn-pg",hug:"hug-latn-pe",huh:"huh-latn-cl",hui:"hui-latn-zz",huk:"huk-latn-id",hul:"hul-latn-pg",hum:"hum-latn-cd",hup:"hup-latn-us",hur:"hur-latn-ca",hus:"hus-latn-mx",hut:"hut-deva-np","hut-tibt":"hut-tibt-np",huu:"huu-latn-pe",huv:"huv-latn-mx",huw:"huw-latn-id",hux:"hux-latn-pe",huy:"huy-hebr-il",huz:"huz-cyrl-ru",hvc:"hvc-latn-ht",hve:"hve-latn-mx",hvk:"hvk-latn-nc",hvn:"hvn-latn-id",hvv:"hvv-latn-mx",hwa:"hwa-latn-ci",hwc:"hwc-latn-us",hwo:"hwo-latn-ng",hy:"hy-armn-am",hya:"hya-latn-cm",hyw:"hyw-armn-am",hz:"hz-latn-na",ia:"ia-latn-001",iai:"iai-latn-nc",ian:"ian-latn-zz",iar:"iar-latn-zz",iba:"iba-latn-my",ibb:"ibb-latn-ng",ibd:"ibd-latn-au",ibe:"ibe-latn-ng",ibg:"ibg-latn-ph",ibh:"ibh-latn-vn",ibl:"ibl-latn-ph",ibm:"ibm-latn-ng",ibn:"ibn-latn-ng",ibr:"ibr-latn-ng",ibu:"ibu-latn-id",iby:"iby-latn-zz",ica:"ica-latn-zz",ich:"ich-latn-zz",icr:"icr-latn-co",id:"id-latn-id",ida:"ida-latn-ke",idb:"idb-latn-in",idc:"idc-latn-ng",idd:"idd-latn-zz",ide:"ide-latn-ng",idi:"idi-latn-zz",idr:"idr-latn-ss",ids:"ids-latn-ng",idt:"idt-latn-tl",idu:"idu-latn-zz",ie:"ie-latn-001",ifa:"ifa-latn-ph",ifb:"ifb-latn-ph",ife:"ife-latn-tg",iff:"iff-latn-vu",ifk:"ifk-latn-ph",ifm:"ifm-latn-cg",ifu:"ifu-latn-ph",ify:"ify-latn-ph",ig:"ig-latn-ng",igb:"igb-latn-zz",ige:"ige-latn-zz",igg:"igg-latn-pg",igl:"igl-latn-ng",igm:"igm-latn-pg",ign:"ign-latn-bo",igo:"igo-latn-pg",igs:"igs-latn-001","igs-grek":"igs-grek-001",igw:"igw-latn-ng",ihb:"ihb-latn-id",ihi:"ihi-latn-ng",ihp:"ihp-latn-id",ihw:"ihw-latn-au",ii:"ii-yiii-cn",iin:"iin-latn-au",ijc:"ijc-latn-ng",ije:"ije-latn-ng",ijj:"ijj-latn-zz",ijn:"ijn-latn-ng",ijs:"ijs-latn-ng",ik:"ik-latn-us",iki:"iki-latn-ng",ikk:"ikk-latn-zz",ikl:"ikl-latn-ng",iko:"iko-latn-ng",ikp:"ikp-latn-ng",ikr:"ikr-latn-au",ikt:"ikt-latn-ca","ikt-cans":"ikt-cans-ca",ikv:"ikv-latn-ng",ikw:"ikw-latn-zz",ikx:"ikx-latn-zz",ikz:"ikz-latn-tz",ila:"ila-latn-id",ilb:"ilb-latn-zm",ilg:"ilg-latn-au",ili:"ili-latn-cn","ili-arab":"ili-arab-cn","ili-cyrl":"ili-cyrl-kz",ilk:"ilk-latn-ph",ilm:"ilm-latn-my",ilo:"ilo-latn-ph",ilp:"ilp-latn-ph",ilu:"ilu-latn-id",ilv:"ilv-latn-ng",imi:"imi-latn-pg",iml:"iml-latn-us",imn:"imn-latn-pg",imo:"imo-latn-zz",imr:"imr-latn-id",ims:"ims-latn-it",imt:"imt-latn-ss",imy:"imy-lyci-tr",in:"in-latn-id",inb:"inb-latn-co",ing:"ing-latn-us",inh:"inh-cyrl-ru",inj:"inj-latn-co",inn:"inn-latn-ph",ino:"ino-latn-pg",inp:"inp-latn-pe",int:"int-mymr-mm",io:"io-latn-001",ior:"ior-ethi-et",iou:"iou-latn-zz",iow:"iow-latn-us",ipi:"ipi-latn-pg",ipo:"ipo-latn-pg",iqu:"iqu-latn-pe",iqw:"iqw-latn-ng",ire:"ire-latn-id",irh:"irh-latn-id",iri:"iri-latn-zz",irk:"irk-latn-tz",irn:"irn-latn-br",iru:"iru-taml-in","iru-mlym":"iru-mlym-in",irx:"irx-latn-id",iry:"iry-latn-ph",is:"is-latn-is",isa:"isa-latn-pg",isc:"isc-latn-pe",isd:"isd-latn-ph",ish:"ish-latn-ng",isi:"isi-latn-ng",isk:"isk-arab-af","isk-cyrl":"isk-cyrl-tj",ism:"ism-latn-id",isn:"isn-latn-tz",iso:"iso-latn-ng",ist:"ist-latn-hr",isu:"isu-latn-cm",it:"it-latn-it",itb:"itb-latn-ph",itd:"itd-latn-id",ite:"ite-latn-bo",iti:"iti-latn-ph",itk:"itk-hebr-it",itl:"itl-cyrl-ru",itm:"itm-latn-ng",ito:"ito-latn-bo",itr:"itr-latn-pg",its:"its-latn-ng",itt:"itt-latn-ph",itv:"itv-latn-ph",itw:"itw-latn-ng",itx:"itx-latn-id",ity:"ity-latn-ph",itz:"itz-latn-gt",iu:"iu-cans-ca",ium:"ium-latn-cn","ium-hani":"ium-hani-cn","ium-laoo":"ium-laoo-la","ium-thai":"ium-thai-th",ivb:"ivb-latn-ph",ivv:"ivv-latn-ph",iw:"iw-hebr-il",iwk:"iwk-latn-ph",iwm:"iwm-latn-zz",iwo:"iwo-latn-id",iws:"iws-latn-zz",ixc:"ixc-latn-mx",ixl:"ixl-latn-gt",iya:"iya-latn-ng",iyo:"iyo-latn-cm",iyx:"iyx-latn-cg",izh:"izh-latn-ru",izi:"izi-latn-zz",izr:"izr-latn-ng",izz:"izz-latn-ng",ja:"ja-jpan-jp",jaa:"jaa-latn-br",jab:"jab-latn-zz",jac:"jac-latn-gt",jad:"jad-arab-gn",jae:"jae-latn-pg",jaf:"jaf-latn-ng",jah:"jah-latn-my",jaj:"jaj-latn-sb",jak:"jak-latn-my",jal:"jal-latn-id",jam:"jam-latn-jm",jan:"jan-latn-au",jao:"jao-latn-au",jaq:"jaq-latn-id",jar:"jar-latn-zz",jas:"jas-latn-nc",jat:"jat-arab-af",jau:"jau-latn-id",jax:"jax-latn-id",jay:"jay-latn-au",jaz:"jaz-latn-nc",jbe:"jbe-hebr-il",jbi:"jbi-latn-au",jbj:"jbj-latn-id",jbk:"jbk-latn-pg",jbm:"jbm-latn-ng",jbn:"jbn-arab-ly",jbo:"jbo-latn-001",jbr:"jbr-latn-id",jbt:"jbt-latn-br",jbu:"jbu-latn-zz",jbw:"jbw-latn-au",jct:"jct-cyrl-ua","jct-latn":"jct-latn-ua",jda:"jda-tibt-in",jdg:"jdg-arab-pk",jdt:"jdt-cyrl-ru","jdt-hebr":"jdt-hebr-ru","jdt-latn":"jdt-latn-az",jeb:"jeb-latn-pe",jee:"jee-deva-np",jeh:"jeh-latn-vn","jeh-laoo":"jeh-laoo-la",jei:"jei-latn-id",jek:"jek-latn-ci",jel:"jel-latn-id",jen:"jen-latn-zz",jer:"jer-latn-ng",jet:"jet-latn-pg",jeu:"jeu-latn-td",jgb:"jgb-latn-cd",jge:"jge-geor-ge","jge-hebr":"jge-hebr-il",jgk:"jgk-latn-zz",jgo:"jgo-latn-cm",jhi:"jhi-latn-my",ji:"ji-hebr-ua",jia:"jia-latn-cm",jib:"jib-latn-zz",jic:"jic-latn-hn",jid:"jid-latn-ng",jie:"jie-latn-ng",jig:"jig-latn-au",jil:"jil-latn-pg",jim:"jim-latn-cm",jit:"jit-latn-tz",jiu:"jiu-latn-cn",jiv:"jiv-latn-ec",jiy:"jiy-latn-cn",jje:"jje-hang-kr",jjr:"jjr-latn-ng",jka:"jka-latn-id",jkm:"jkm-mymr-mm","jkm-brai":"jkm-brai-mm","jkm-latn":"jkm-latn-mm",jko:"jko-latn-pg",jku:"jku-latn-ng",jle:"jle-latn-sd",jma:"jma-latn-pg",jmb:"jmb-latn-ng",jmc:"jmc-latn-tz",jmd:"jmd-latn-id",jmi:"jmi-latn-ng",jml:"jml-deva-np",jmn:"jmn-latn-mm",jmr:"jmr-latn-gh",jms:"jms-latn-ng",jmw:"jmw-latn-pg",jmx:"jmx-latn-mx",jna:"jna-takr-in",jnd:"jnd-arab-pk",jng:"jng-latn-au",jni:"jni-latn-ng",jnj:"jnj-latn-et","jnj-ethi":"jnj-ethi-et",jnl:"jnl-deva-in",jns:"jns-deva-in","jns-latn":"jns-latn-in","jns-takr":"jns-takr-in",job:"job-latn-cd",jod:"jod-latn-ci",jog:"jog-arab-pk",jor:"jor-latn-bo",jow:"jow-latn-ml",jpa:"jpa-hebr-ps",jpr:"jpr-hebr-il",jqr:"jqr-latn-pe",jra:"jra-latn-zz",jrr:"jrr-latn-ng",jrt:"jrt-latn-ng",jru:"jru-latn-ve",jua:"jua-latn-br",jub:"jub-latn-ng",jud:"jud-latn-ci",juh:"juh-latn-ng",jui:"jui-latn-au",juk:"juk-latn-ng",jul:"jul-deva-np",jum:"jum-latn-sd",jun:"jun-orya-in",juo:"juo-latn-ng",jup:"jup-latn-br",jur:"jur-latn-br",jut:"jut-latn-dk",juu:"juu-latn-ng",juw:"juw-latn-ng",juy:"juy-orya-in",jv:"jv-latn-id",jvd:"jvd-latn-id",jvn:"jvn-latn-sr",jw:"jw-latn-id",jwi:"jwi-latn-gh",jya:"jya-tibt-cn",jye:"jye-hebr-il",jyy:"jyy-latn-td",ka:"ka-geor-ge",kaa:"kaa-cyrl-uz",kab:"kab-latn-dz",kac:"kac-latn-mm",kad:"kad-latn-zz",kag:"kag-latn-my",kah:"kah-latn-cf",kai:"kai-latn-zz",kaj:"kaj-latn-ng",kak:"kak-latn-ph",kam:"kam-latn-ke",kao:"kao-latn-ml",kap:"kap-cyrl-ru",kaq:"kaq-latn-pe",kav:"kav-latn-br",kaw:"kaw-kawi-id",kax:"kax-latn-id",kay:"kay-latn-br",kba:"kba-latn-au",kbb:"kbb-latn-br",kbc:"kbc-latn-br",kbd:"kbd-cyrl-ru",kbe:"kbe-latn-au",kbh:"kbh-latn-co",kbi:"kbi-latn-id",kbj:"kbj-latn-cd",kbk:"kbk-latn-pg",kbl:"kbl-latn-td",kbm:"kbm-latn-zz",kbn:"kbn-latn-cf",kbo:"kbo-latn-ss",kbp:"kbp-latn-zz",kbq:"kbq-latn-zz",kbr:"kbr-latn-et","kbr-ethi":"kbr-ethi-et",kbs:"kbs-latn-ga",kbt:"kbt-latn-pg",kbu:"kbu-arab-pk",kbv:"kbv-latn-id",kbw:"kbw-latn-pg",kbx:"kbx-latn-zz",kby:"kby-arab-ne",kbz:"kbz-latn-ng",kca:"kca-cyrl-ru",kcb:"kcb-latn-pg",kcc:"kcc-latn-ng",kcd:"kcd-latn-id",kce:"kce-latn-ng",kcf:"kcf-latn-ng",kcg:"kcg-latn-ng",kch:"kch-latn-ng",kci:"kci-latn-ng",kcj:"kcj-latn-gw",kck:"kck-latn-zw",kcl:"kcl-latn-zz",kcm:"kcm-latn-cf",kcn:"kcn-latn-ug",kco:"kco-latn-pg",kcp:"kcp-latn-sd",kcq:"kcq-latn-ng",kcs:"kcs-latn-ng",kct:"kct-latn-zz",kcu:"kcu-latn-tz",kcv:"kcv-latn-cd",kcw:"kcw-latn-cd",kcz:"kcz-latn-tz",kda:"kda-latn-au",kdc:"kdc-latn-tz",kdd:"kdd-latn-au",kde:"kde-latn-tz",kdf:"kdf-latn-pg",kdg:"kdg-latn-cd",kdh:"kdh-latn-tg",kdi:"kdi-latn-ug",kdj:"kdj-latn-ug",kdk:"kdk-latn-nc",kdl:"kdl-latn-zz",kdm:"kdm-latn-ng",kdn:"kdn-latn-zw",kdp:"kdp-latn-ng",kdq:"kdq-beng-in",kdr:"kdr-latn-lt","kdr-cyrl":"kdr-cyrl-ua",kdt:"kdt-thai-th",kdw:"kdw-latn-id",kdx:"kdx-latn-ng",kdy:"kdy-latn-id",kdz:"kdz-latn-cm",kea:"kea-latn-cv",keb:"keb-latn-ga",kec:"kec-latn-sd",ked:"ked-latn-tz",kee:"kee-latn-us",kef:"kef-latn-tg",keg:"keg-latn-sd",keh:"keh-latn-pg",kei:"kei-latn-id",kek:"kek-latn-gt",kel:"kel-latn-cd",kem:"kem-latn-tl",ken:"ken-latn-cm",keo:"keo-latn-ug",ker:"ker-latn-td",kes:"kes-latn-ng",ket:"ket-cyrl-ru",keu:"keu-latn-tg",kew:"kew-latn-pg",kex:"kex-deva-in","kex-gujr":"kex-gujr-in",key:"key-telu-in",kez:"kez-latn-zz",kfa:"kfa-knda-in",kfb:"kfb-deva-in",kfc:"kfc-telu-in",kfd:"kfd-knda-in",kfe:"kfe-taml-in",kff:"kff-latn-in","kff-deva":"kff-deva-in","kff-orya":"kff-orya-in","kff-telu":"kff-telu-in",kfh:"kfh-mlym-in",kfi:"kfi-taml-in","kfi-knda":"kfi-knda-in",kfk:"kfk-deva-in","kfk-takr":"kfk-takr-in",kfl:"kfl-latn-cm",kfm:"kfm-arab-ir",kfn:"kfn-latn-cm",kfo:"kfo-latn-ci",kfp:"kfp-deva-in",kfq:"kfq-deva-in",kfr:"kfr-deva-in",kfs:"kfs-deva-in",kfv:"kfv-latn-in",kfw:"kfw-latn-in",kfx:"kfx-deva-in","kfx-takr":"kfx-takr-in",kfy:"kfy-deva-in",kfz:"kfz-latn-bf",kg:"kg-latn-cd",kga:"kga-latn-ci",kgb:"kgb-latn-id",kge:"kge-latn-id",kgf:"kgf-latn-zz",kgj:"kgj-deva-np",kgk:"kgk-latn-br",kgl:"kgl-latn-au",kgm:"kgm-latn-br",kgo:"kgo-latn-sd",kgp:"kgp-latn-br",kgq:"kgq-latn-id",kgr:"kgr-latn-id",kgs:"kgs-latn-au",kgt:"kgt-latn-ng",kgu:"kgu-latn-pg",kgv:"kgv-latn-id",kgw:"kgw-latn-id",kgx:"kgx-latn-id",kgy:"kgy-deva-np",kha:"kha-latn-in",khb:"khb-talu-cn",khc:"khc-latn-id",khd:"khd-latn-id",khe:"khe-latn-id",khf:"khf-thai-la",khg:"khg-tibt-cn",khh:"khh-latn-id",khj:"khj-latn-ng",khl:"khl-latn-pg",khn:"khn-deva-in",khp:"khp-latn-id",khq:"khq-latn-ml",khr:"khr-latn-in","khr-deva":"khr-deva-in",khs:"khs-latn-zz",kht:"kht-mymr-in",khu:"khu-latn-ao",khv:"khv-cyrl-ru",khw:"khw-arab-pk",khx:"khx-latn-cd",khy:"khy-latn-cd",khz:"khz-latn-zz",ki:"ki-latn-ke",kia:"kia-latn-td",kib:"kib-latn-sd",kic:"kic-latn-us",kid:"kid-latn-cm",kie:"kie-latn-td",kif:"kif-deva-np",kig:"kig-latn-id",kih:"kih-latn-pg",kij:"kij-latn-zz",kil:"kil-latn-ng",kim:"kim-cyrl-ru",kio:"kio-latn-us",kip:"kip-deva-np",kiq:"kiq-latn-id",kis:"kis-latn-pg",kit:"kit-latn-pg",kiu:"kiu-latn-tr",kiv:"kiv-latn-tz",kiw:"kiw-latn-zz",kix:"kix-latn-in",kiy:"kiy-latn-id",kiz:"kiz-latn-tz",kj:"kj-latn-na",kja:"kja-latn-id",kjb:"kjb-latn-gt",kjc:"kjc-latn-id",kjd:"kjd-latn-zz",kje:"kje-latn-id",kjg:"kjg-laoo-la",kjh:"kjh-cyrl-ru",kji:"kji-latn-sb",kjj:"kjj-latn-az",kjk:"kjk-latn-id",kjl:"kjl-deva-np",kjm:"kjm-latn-vn",kjn:"kjn-latn-au",kjo:"kjo-deva-in",kjp:"kjp-mymr-mm","kjp-thai":"kjp-thai-th",kjq:"kjq-latn-us",kjr:"kjr-latn-id",kjs:"kjs-latn-zz",kjt:"kjt-thai-th",kju:"kju-latn-us",kjx:"kjx-latn-pg",kjy:"kjy-latn-zz",kk:"kk-cyrl-kz","kk-af":"kk-arab-af","kk-arab":"kk-arab-cn","kk-cn":"kk-arab-cn","kk-ir":"kk-arab-ir","kk-mn":"kk-arab-mn",kka:"kka-latn-ng",kkb:"kkb-latn-id",kkc:"kkc-latn-zz",kkd:"kkd-latn-ng",kke:"kke-latn-gn","kke-arab":"kke-arab-gn",kkf:"kkf-tibt-in",kkg:"kkg-latn-ph",kkh:"kkh-lana-mm",kki:"kki-latn-tz",kkj:"kkj-latn-cm",kkk:"kkk-latn-sb",kkl:"kkl-latn-id",kkm:"kkm-latn-ng",kko:"kko-latn-sd",kkp:"kkp-latn-au",kkq:"kkq-latn-cd",kkr:"kkr-latn-ng",kks:"kks-latn-ng",kkt:"kkt-deva-np",kku:"kku-latn-ng",kkv:"kkv-latn-id",kkw:"kkw-latn-cg",kkx:"kkx-latn-id",kky:"kky-latn-au",kkz:"kkz-latn-ca",kl:"kl-latn-gl",kla:"kla-latn-us",klb:"klb-latn-mx",klc:"klc-latn-cm",kld:"kld-latn-au",kle:"kle-deva-np",klf:"klf-latn-td",klg:"klg-latn-ph",klh:"klh-latn-pg",kli:"kli-latn-id",klj:"klj-arab-ir",klk:"klk-latn-ng",kll:"kll-latn-ph",klm:"klm-latn-pg",kln:"kln-latn-ke",klo:"klo-latn-ng",klp:"klp-latn-pg",klq:"klq-latn-zz",klr:"klr-deva-np",kls:"kls-latn-pk","kls-arab":"kls-arab-pk",klt:"klt-latn-zz",klu:"klu-latn-lr",klv:"klv-latn-vu",klw:"klw-latn-id",klx:"klx-latn-zz",kly:"kly-latn-id",klz:"klz-latn-id",km:"km-khmr-kh",kma:"kma-latn-gh",kmb:"kmb-latn-ao",kmc:"kmc-latn-cn","kmc-hani":"kmc-hani-cn",kmd:"kmd-latn-ph",kme:"kme-latn-cm",kmf:"kmf-latn-pg",kmg:"kmg-latn-pg",kmh:"kmh-latn-zz",kmi:"kmi-latn-ng",kmj:"kmj-deva-in",kmk:"kmk-latn-ph",kml:"kml-latn-ph",kmm:"kmm-latn-in",kmn:"kmn-latn-pg",kmo:"kmo-latn-zz",kmp:"kmp-latn-cm",kmq:"kmq-latn-et",kms:"kms-latn-zz",kmt:"kmt-latn-id",kmu:"kmu-latn-zz",kmv:"kmv-latn-br",kmw:"kmw-latn-zz",kmx:"kmx-latn-pg",kmy:"kmy-latn-ng",kmz:"kmz-arab-ir",kn:"kn-knda-in",kna:"kna-latn-ng",knb:"knb-latn-ph",knd:"knd-latn-id",kne:"kne-latn-ph",knf:"knf-latn-gw",kni:"kni-latn-ng",knj:"knj-latn-gt",knk:"knk-latn-sl","knk-arab":"knk-arab-sl",knl:"knl-latn-id",knm:"knm-latn-br",kno:"kno-latn-sl",knp:"knp-latn-zz",knq:"knq-latn-my",knr:"knr-latn-pg",kns:"kns-latn-my","kns-thai":"kns-thai-th",knt:"knt-latn-br",knu:"knu-latn-gn",knv:"knv-latn-pg",knw:"knw-latn-na",knx:"knx-latn-id",kny:"kny-latn-cd",knz:"knz-latn-bf",ko:"ko-kore-kr",koa:"koa-latn-pg",koc:"koc-latn-ng",kod:"kod-latn-id",koe:"koe-latn-ss",kof:"kof-latn-ng",kog:"kog-latn-co",koh:"koh-latn-cg",koi:"koi-cyrl-ru",kok:"kok-deva-in",kol:"kol-latn-zz",koo:"koo-latn-ug",kop:"kop-latn-pg",koq:"koq-latn-ga",kos:"kos-latn-fm",kot:"kot-latn-cm",kou:"kou-latn-td",kov:"kov-latn-ng",kow:"kow-latn-ng",koy:"koy-latn-us",koz:"koz-latn-zz",kpa:"kpa-latn-ng",kpc:"kpc-latn-co",kpd:"kpd-latn-id",kpe:"kpe-latn-lr",kpf:"kpf-latn-zz",kpg:"kpg-latn-fm",kph:"kph-latn-gh",kpi:"kpi-latn-id",kpj:"kpj-latn-br",kpk:"kpk-latn-ng",kpl:"kpl-latn-cd",kpm:"kpm-latn-vn",kpn:"kpn-latn-br",kpo:"kpo-latn-zz",kpq:"kpq-latn-id",kpr:"kpr-latn-zz",kps:"kps-latn-id",kpt:"kpt-cyrl-ru",kpu:"kpu-latn-id",kpw:"kpw-latn-pg",kpx:"kpx-latn-zz",kpy:"kpy-cyrl-ru",kpz:"kpz-latn-ug",kqa:"kqa-latn-pg",kqb:"kqb-latn-zz",kqc:"kqc-latn-pg",kqd:"kqd-syrc-iq",kqe:"kqe-latn-ph",kqf:"kqf-latn-zz",kqg:"kqg-latn-bf",kqh:"kqh-latn-tz",kqi:"kqi-latn-pg",kqj:"kqj-latn-pg",kqk:"kqk-latn-bj",kql:"kql-latn-pg",kqm:"kqm-latn-ci",kqn:"kqn-latn-zm",kqo:"kqo-latn-lr",kqp:"kqp-latn-td",kqq:"kqq-latn-br",kqr:"kqr-latn-my",kqs:"kqs-latn-zz",kqt:"kqt-latn-my",kqu:"kqu-latn-za",kqv:"kqv-latn-id",kqw:"kqw-latn-pg",kqx:"kqx-latn-cm",kqy:"kqy-ethi-zz",kqz:"kqz-latn-za",kr:"kr-latn-zz",kra:"kra-deva-np",krb:"krb-latn-us",krc:"krc-cyrl-ru",krd:"krd-latn-tl",kre:"kre-latn-br",krf:"krf-latn-vu",krh:"krh-latn-ng",kri:"kri-latn-sl",krj:"krj-latn-ph",krk:"krk-cyrl-ru",krl:"krl-latn-ru",krn:"krn-latn-lr",krp:"krp-latn-ng",krr:"krr-khmr-kh",krs:"krs-latn-zz",krt:"krt-latn-ne",kru:"kru-deva-in",krv:"krv-khmr-kh",krw:"krw-latn-lr",krx:"krx-latn-sn",kry:"kry-latn-az",krz:"krz-latn-id",ks:"ks-arab-in",ksa:"ksa-latn-ng",ksb:"ksb-latn-tz",ksc:"ksc-latn-ph",ksd:"ksd-latn-zz",kse:"kse-latn-pg",ksf:"ksf-latn-cm",ksg:"ksg-latn-sb",ksh:"ksh-latn-de",ksi:"ksi-latn-pg",ksj:"ksj-latn-zz",ksk:"ksk-latn-us",ksl:"ksl-latn-pg",ksm:"ksm-latn-ng",ksn:"ksn-latn-ph",kso:"kso-latn-ng",ksp:"ksp-latn-cf",ksq:"ksq-latn-ng",ksr:"ksr-latn-zz",kss:"kss-latn-lr",kst:"kst-latn-bf",ksu:"ksu-mymr-in",ksv:"ksv-latn-cd",ksw:"ksw-mymr-mm","ksw-latn":"ksw-latn-mm",ksx:"ksx-latn-id",ksz:"ksz-deva-in",kta:"kta-latn-vn",ktb:"ktb-ethi-zz",ktc:"ktc-latn-ng",ktd:"ktd-latn-au",ktf:"ktf-latn-cd",ktg:"ktg-latn-au",kth:"kth-latn-td",kti:"kti-latn-id",ktj:"ktj-latn-ci",ktk:"ktk-latn-pg",ktl:"ktl-arab-ir",ktm:"ktm-latn-zz",ktn:"ktn-latn-br",kto:"kto-latn-zz",ktp:"ktp-plrd-cn",ktq:"ktq-latn-ph",ktr:"ktr-latn-my",kts:"kts-latn-id",ktt:"ktt-latn-id",ktu:"ktu-latn-cd",ktv:"ktv-latn-vn",ktw:"ktw-latn-us",ktx:"ktx-latn-br",kty:"kty-latn-cd",ktz:"ktz-latn-na",ku:"ku-latn-tr","ku-arab":"ku-arab-iq","ku-lb":"ku-arab-lb","ku-yezi":"ku-yezi-ge",kub:"kub-latn-zz",kuc:"kuc-latn-id",kud:"kud-latn-zz",kue:"kue-latn-zz",kuf:"kuf-laoo-la",kug:"kug-latn-ng",kuh:"kuh-latn-ng",kui:"kui-latn-br",kuj:"kuj-latn-zz",kuk:"kuk-latn-id",kul:"kul-latn-ng",kum:"kum-cyrl-ru",kun:"kun-latn-zz",kuo:"kuo-latn-pg",kup:"kup-latn-zz",kuq:"kuq-latn-br",kus:"kus-latn-zz",kut:"kut-latn-ca",kuu:"kuu-latn-us",kuv:"kuv-latn-id",kuw:"kuw-latn-cf",kux:"kux-latn-au",kuy:"kuy-latn-au",kuz:"kuz-latn-cl",kv:"kv-cyrl-ru",kva:"kva-cyrl-ru",kvb:"kvb-latn-id",kvc:"kvc-latn-pg",kvd:"kvd-latn-id",kve:"kve-latn-my",kvf:"kvf-latn-td",kvg:"kvg-latn-zz",kvh:"kvh-latn-id",kvi:"kvi-latn-td",kvj:"kvj-latn-cm",kvl:"kvl-latn-mm",kvm:"kvm-latn-cm",kvn:"kvn-latn-co",kvo:"kvo-latn-id",kvp:"kvp-latn-id",kvq:"kvq-mymr-mm","kvq-latn":"kvq-latn-mm",kvr:"kvr-latn-id",kvt:"kvt-mymr-mm",kvv:"kvv-latn-id",kvw:"kvw-latn-id",kvx:"kvx-arab-pk",kvy:"kvy-kali-mm",kvz:"kvz-latn-id",kw:"kw-latn-gb",kwa:"kwa-latn-br",kwb:"kwb-latn-ng",kwc:"kwc-latn-cg",kwd:"kwd-latn-sb",kwe:"kwe-latn-id",kwf:"kwf-latn-sb",kwg:"kwg-latn-td",kwh:"kwh-latn-id",kwi:"kwi-latn-co",kwj:"kwj-latn-zz",kwk:"kwk-latn-ca",kwl:"kwl-latn-ng",kwm:"kwm-latn-na",kwn:"kwn-latn-na",kwo:"kwo-latn-zz",kwp:"kwp-latn-ci",kwq:"kwq-latn-zz",kwr:"kwr-latn-id",kws:"kws-latn-cd",kwt:"kwt-latn-id",kwu:"kwu-latn-cm",kwv:"kwv-latn-td",kww:"kww-latn-sr",kwy:"kwy-latn-cd",kwz:"kwz-latn-ao",kxa:"kxa-latn-zz",kxb:"kxb-latn-ci",kxc:"kxc-ethi-zz",kxd:"kxd-latn-bn","kxd-arab":"kxd-arab-bn",kxe:"kxe-latn-zz",kxf:"kxf-mymr-mm","kxf-latn":"kxf-latn-mm",kxi:"kxi-latn-my",kxj:"kxj-latn-td",kxk:"kxk-mymr-mm",kxl:"kxl-deva-in",kxm:"kxm-thai-th",kxn:"kxn-latn-my",kxo:"kxo-latn-br",kxp:"kxp-arab-pk",kxq:"kxq-latn-id",kxr:"kxr-latn-pg",kxt:"kxt-latn-pg",kxv:"kxv-orya-in","kxv-latn":"kxv-latn-in","kxv-telu":"kxv-telu-in",kxw:"kxw-latn-zz",kxx:"kxx-latn-cg",kxy:"kxy-latn-vn",kxz:"kxz-latn-zz",ky:"ky-cyrl-kg","ky-arab":"ky-arab-cn","ky-cn":"ky-arab-cn","ky-latn":"ky-latn-tr","ky-tr":"ky-latn-tr",kya:"kya-latn-tz",kyb:"kyb-latn-ph",kyc:"kyc-latn-pg",kyd:"kyd-latn-id",kye:"kye-latn-zz",kyf:"kyf-latn-ci",kyg:"kyg-latn-pg",kyh:"kyh-latn-us",kyi:"kyi-latn-my",kyj:"kyj-latn-ph",kyk:"kyk-latn-ph",kyl:"kyl-latn-us",kym:"kym-latn-cf",kyn:"kyn-latn-ph",kyo:"kyo-latn-id",kyq:"kyq-latn-td",kyr:"kyr-latn-br",kys:"kys-latn-my",kyt:"kyt-latn-id",kyu:"kyu-kali-mm","kyu-latn":"kyu-latn-mm","kyu-mymr":"kyu-mymr-mm",kyv:"kyv-deva-np",kyw:"kyw-deva-in","kyw-beng":"kyw-beng-in","kyw-orya":"kyw-orya-in",kyx:"kyx-latn-zz",kyy:"kyy-latn-pg",kyz:"kyz-latn-br",kza:"kza-latn-bf",kzb:"kzb-latn-id",kzc:"kzc-latn-ci",kzd:"kzd-latn-id",kze:"kze-latn-pg",kzf:"kzf-latn-id",kzh:"kzh-arab-zz",kzi:"kzi-latn-my",kzj:"kzj-latn-my",kzk:"kzk-latn-sb",kzl:"kzl-latn-id",kzm:"kzm-latn-id",kzn:"kzn-latn-mw",kzo:"kzo-latn-ga",kzp:"kzp-latn-id",kzr:"kzr-latn-zz",kzs:"kzs-latn-my",kzt:"kzt-latn-my",kzu:"kzu-latn-id",kzv:"kzv-latn-id",kzw:"kzw-latn-br",kzx:"kzx-latn-id",kzy:"kzy-latn-cd",kzz:"kzz-latn-id",la:"la-latn-va",laa:"laa-latn-ph",lab:"lab-lina-gr",lac:"lac-latn-mx",lad:"lad-hebr-il",lae:"lae-deva-in","lae-tibt":"lae-tibt-in",lag:"lag-latn-tz",lah:"lah-arab-pk",lai:"lai-latn-mw",laj:"laj-latn-ug",lal:"lal-latn-cd",lam:"lam-latn-zm",lan:"lan-latn-ng",lap:"lap-latn-td",laq:"laq-latn-vn",lar:"lar-latn-gh",las:"las-latn-zz",lau:"lau-latn-id",law:"law-latn-id",lax:"lax-latn-in","lax-beng":"lax-beng-in",laz:"laz-latn-pg",lb:"lb-latn-lu",lbb:"lbb-latn-pg",lbc:"lbc-lisu-cn",lbe:"lbe-cyrl-ru",lbf:"lbf-deva-in","lbf-tibt":"lbf-tibt-cn",lbi:"lbi-latn-cm",lbj:"lbj-tibt-in","lbj-arab":"lbj-arab-in",lbl:"lbl-latn-ph",lbm:"lbm-deva-in",lbn:"lbn-latn-la","lbn-laoo":"lbn-laoo-la",lbo:"lbo-laoo-la","lbo-latn":"lbo-latn-us",lbq:"lbq-latn-pg",lbr:"lbr-deva-np",lbt:"lbt-latn-vn",lbu:"lbu-latn-zz",lbv:"lbv-latn-pg",lbw:"lbw-latn-id",lbx:"lbx-latn-id",lby:"lby-latn-au",lbz:"lbz-latn-au",lcc:"lcc-latn-id",lcd:"lcd-latn-id",lce:"lce-latn-id",lcf:"lcf-latn-id",lch:"lch-latn-ao",lcl:"lcl-latn-id",lcm:"lcm-latn-zz",lcp:"lcp-thai-cn",lcq:"lcq-latn-id",lcs:"lcs-latn-id",lda:"lda-latn-ci",ldb:"ldb-latn-zz",ldd:"ldd-latn-ng",ldg:"ldg-latn-ng",ldh:"ldh-latn-ng",ldi:"ldi-latn-cg",ldj:"ldj-latn-ng",ldk:"ldk-latn-ng",ldl:"ldl-latn-ng",ldm:"ldm-latn-gn",ldn:"ldn-latn-001",ldo:"ldo-latn-ng",ldp:"ldp-latn-ng",ldq:"ldq-latn-ng",lea:"lea-latn-cd",leb:"leb-latn-zm",lec:"lec-latn-bo",led:"led-latn-zz",lee:"lee-latn-zz",lef:"lef-latn-gh",leh:"leh-latn-zm",lei:"lei-latn-pg",lej:"lej-latn-cd",lek:"lek-latn-pg",lel:"lel-latn-cd",lem:"lem-latn-zz",len:"len-latn-hn",leo:"leo-latn-cm",lep:"lep-lepc-in",leq:"leq-latn-zz",ler:"ler-latn-pg",les:"les-latn-cd",let:"let-latn-pg",leu:"leu-latn-zz",lev:"lev-latn-id",lew:"lew-latn-id",lex:"lex-latn-id",ley:"ley-latn-id",lez:"lez-cyrl-ru",lfa:"lfa-latn-cm",lfn:"lfn-latn-001","lfn-cyrl":"lfn-cyrl-001",lg:"lg-latn-ug",lga:"lga-latn-sb",lgb:"lgb-latn-sb",lgg:"lgg-latn-zz",lgh:"lgh-latn-vn",lgi:"lgi-latn-id",lgk:"lgk-latn-vu",lgl:"lgl-latn-sb",lgm:"lgm-latn-cd",lgn:"lgn-latn-et",lgo:"lgo-latn-ss",lgq:"lgq-latn-gh",lgr:"lgr-latn-sb",lgt:"lgt-latn-pg",lgu:"lgu-latn-sb",lgz:"lgz-latn-cd",lha:"lha-latn-vn",lhh:"lhh-latn-id",lhi:"lhi-latn-cn",lhm:"lhm-deva-np",lhn:"lhn-latn-my",lhs:"lhs-syrc-sy",lht:"lht-latn-vu",lhu:"lhu-latn-cn",li:"li-latn-nl",lia:"lia-latn-zz",lib:"lib-latn-pg",lic:"lic-latn-cn",lid:"lid-latn-zz",lie:"lie-latn-cd",lif:"lif-deva-np","lif-limb":"lif-limb-in",lig:"lig-latn-zz",lih:"lih-latn-zz",lij:"lij-latn-it",lik:"lik-latn-cd",lil:"lil-latn-ca",lio:"lio-latn-id",lip:"lip-latn-gh",liq:"liq-latn-et",lir:"lir-latn-lr",lis:"lis-lisu-cn",liu:"liu-latn-sd",liv:"liv-latn-lv",liw:"liw-latn-id",lix:"lix-latn-id",liy:"liy-latn-cf",liz:"liz-latn-cd",lja:"lja-latn-au",lje:"lje-latn-id",lji:"lji-latn-id",ljl:"ljl-latn-id",ljp:"ljp-latn-id",ljw:"ljw-latn-au",ljx:"ljx-latn-au",lka:"lka-latn-tl",lkb:"lkb-latn-ke",lkc:"lkc-latn-vn",lkd:"lkd-latn-br",lke:"lke-latn-ug",lkh:"lkh-tibt-bt",lki:"lki-arab-ir",lkj:"lkj-latn-my",lkl:"lkl-latn-pg",lkm:"lkm-latn-au",lkn:"lkn-latn-vu",lko:"lko-latn-ke",lkr:"lkr-latn-ss",lks:"lks-latn-ke",lkt:"lkt-latn-us",lku:"lku-latn-au",lky:"lky-latn-ss",lla:"lla-latn-ng",llb:"llb-latn-mz",llc:"llc-latn-gn",lld:"lld-latn-it",lle:"lle-latn-zz",llf:"llf-latn-pg",llg:"llg-latn-id",lli:"lli-latn-cg",llj:"llj-latn-au",llk:"llk-latn-my",lll:"lll-latn-pg",llm:"llm-latn-id",lln:"lln-latn-zz",llp:"llp-latn-vu",llq:"llq-latn-id",llu:"llu-latn-sb",llx:"llx-latn-fj",lma:"lma-latn-gn",lmb:"lmb-latn-vu",lmc:"lmc-latn-au",lmd:"lmd-latn-sd",lme:"lme-latn-td",lmf:"lmf-latn-id",lmg:"lmg-latn-pg",lmh:"lmh-deva-np",lmi:"lmi-latn-cd",lmj:"lmj-latn-id",lmk:"lmk-latn-in","lmk-mymr":"lmk-mymr-in",lml:"lml-latn-vu",lmn:"lmn-telu-in",lmo:"lmo-latn-it",lmp:"lmp-latn-zz",lmq:"lmq-latn-id",lmr:"lmr-latn-id",lmu:"lmu-latn-vu",lmv:"lmv-latn-fj",lmw:"lmw-latn-us",lmx:"lmx-latn-cm",lmy:"lmy-latn-id",ln:"ln-latn-cd",lna:"lna-latn-cf",lnb:"lnb-latn-na",lnd:"lnd-latn-id",lnh:"lnh-latn-my",lni:"lni-latn-pg",lnj:"lnj-latn-au",lnl:"lnl-latn-cf",lnm:"lnm-latn-pg",lnn:"lnn-latn-vu",lns:"lns-latn-zz",lnu:"lnu-latn-zz",lnw:"lnw-latn-au",lnz:"lnz-latn-cd",lo:"lo-laoo-la",loa:"loa-latn-id",lob:"lob-latn-bf",loc:"loc-latn-ph",loe:"loe-latn-id",log:"log-latn-cd",loh:"loh-latn-ss",loi:"loi-latn-ci",loj:"loj-latn-zz",lok:"lok-latn-zz",lol:"lol-latn-cd",lom:"lom-latn-lr",lon:"lon-latn-mw",loo:"loo-latn-cd",lop:"lop-latn-ng",loq:"loq-latn-cd",lor:"lor-latn-zz",los:"los-latn-zz",lot:"lot-latn-ss","lot-arab":"lot-arab-ss",lou:"lou-latn-us",low:"low-latn-my",lox:"lox-latn-id",loy:"loy-deva-np","loy-tibt":"loy-tibt-np",loz:"loz-latn-zm",lpa:"lpa-latn-vu",lpe:"lpe-latn-id",lpn:"lpn-latn-mm",lpo:"lpo-plrd-cn","lpo-lisu":"lpo-lisu-cn",lpx:"lpx-latn-ss",lqr:"lqr-latn-ss",lra:"lra-latn-my",lrc:"lrc-arab-ir",lrg:"lrg-latn-au",lri:"lri-latn-ke",lrk:"lrk-arab-pk",lrl:"lrl-arab-ir",lrm:"lrm-latn-ke",lrn:"lrn-latn-id",lro:"lro-latn-sd",lrt:"lrt-latn-id",lrv:"lrv-latn-vu",lrz:"lrz-latn-vu",lsa:"lsa-arab-ir",lsd:"lsd-hebr-il",lse:"lse-latn-cd",lsi:"lsi-latn-mm",lsm:"lsm-latn-ug",lsr:"lsr-latn-pg",lss:"lss-arab-pk",lt:"lt-latn-lt",ltg:"ltg-latn-lv",lth:"lth-latn-ug",lti:"lti-latn-id",ltn:"ltn-latn-br",lto:"lto-latn-ke",lts:"lts-latn-ke",ltu:"ltu-latn-id",lu:"lu-latn-cd",lua:"lua-latn-cd",luc:"luc-latn-ug",lud:"lud-latn-ru",lue:"lue-latn-zm",luf:"luf-latn-pg",lui:"lui-latn-us",luj:"luj-latn-cd",luk:"luk-tibt-bt",lul:"lul-latn-ss",lum:"lum-latn-ao",lun:"lun-latn-zm",luo:"luo-latn-ke",lup:"lup-latn-ga",luq:"luq-latn-cu",lur:"lur-latn-id",lus:"lus-latn-in","lus-beng":"lus-beng-bd","lus-brai":"lus-brai-in",lut:"lut-latn-us",luu:"luu-deva-np",luv:"luv-arab-om",luw:"luw-latn-cm",luy:"luy-latn-ke",luz:"luz-arab-ir",lv:"lv-latn-lv",lva:"lva-latn-tl",lvi:"lvi-latn-la",lvk:"lvk-latn-sb",lvu:"lvu-latn-id",lwa:"lwa-latn-cd",lwe:"lwe-latn-id",lwg:"lwg-latn-ke",lwh:"lwh-latn-vn",lwl:"lwl-thai-th",lwm:"lwm-thai-cn",lwo:"lwo-latn-ss","lwo-za":"lwo-latn-za",lwt:"lwt-latn-id",lww:"lww-latn-vu",lxm:"lxm-latn-pg",lya:"lya-tibt-bt",lyn:"lyn-latn-zm",lzh:"lzh-hans-cn",lzl:"lzl-latn-vu",lzn:"lzn-latn-mm",lzz:"lzz-latn-tr",maa:"maa-latn-mx",mab:"mab-latn-mx",mad:"mad-latn-id",mae:"mae-latn-ng",maf:"maf-latn-cm",mag:"mag-deva-in",mai:"mai-deva-in",maj:"maj-latn-mx",mak:"mak-latn-id",mam:"mam-latn-gt",man:"man-latn-gm","man-gn":"man-nkoo-gn","man-nkoo":"man-nkoo-gn",maq:"maq-latn-mx",mas:"mas-latn-ke",mat:"mat-latn-mx",mau:"mau-latn-mx",mav:"mav-latn-br",maw:"maw-latn-zz",max:"max-latn-id",maz:"maz-latn-mx",mba:"mba-latn-ph",mbb:"mbb-latn-ph",mbc:"mbc-latn-br",mbd:"mbd-latn-ph",mbf:"mbf-latn-sg",mbh:"mbh-latn-zz",mbi:"mbi-latn-ph",mbj:"mbj-latn-br",mbk:"mbk-latn-pg",mbl:"mbl-latn-br",mbm:"mbm-latn-cg",mbn:"mbn-latn-co",mbo:"mbo-latn-zz",mbp:"mbp-latn-co",mbq:"mbq-latn-zz",mbr:"mbr-latn-co",mbs:"mbs-latn-ph",mbt:"mbt-latn-ph",mbu:"mbu-latn-zz",mbv:"mbv-latn-gn",mbw:"mbw-latn-zz",mbx:"mbx-latn-pg",mby:"mby-arab-pk",mbz:"mbz-latn-mx",mca:"mca-latn-py",mcb:"mcb-latn-pe",mcc:"mcc-latn-pg",mcd:"mcd-latn-pe",mce:"mce-latn-mx",mcf:"mcf-latn-pe",mcg:"mcg-latn-ve",mch:"mch-latn-ve",mci:"mci-latn-zz",mcj:"mcj-latn-ng",mck:"mck-latn-ao",mcl:"mcl-latn-co",mcm:"mcm-latn-my",mcn:"mcn-latn-td",mco:"mco-latn-mx",mcp:"mcp-latn-zz",mcq:"mcq-latn-zz",mcr:"mcr-latn-zz",mcs:"mcs-latn-cm",mct:"mct-latn-cm",mcu:"mcu-latn-zz",mcv:"mcv-latn-pg",mcw:"mcw-latn-td",mcx:"mcx-latn-cf",mcy:"mcy-latn-pg",mcz:"mcz-latn-pg",mda:"mda-latn-zz",mdb:"mdb-latn-pg",mdc:"mdc-latn-pg",mdd:"mdd-latn-cm",mde:"mde-arab-zz",mdf:"mdf-cyrl-ru",mdg:"mdg-latn-td",mdh:"mdh-latn-ph",mdi:"mdi-latn-cd",mdj:"mdj-latn-zz",mdk:"mdk-latn-cd",mdm:"mdm-latn-cd",mdn:"mdn-latn-cf",mdp:"mdp-latn-cd",mdq:"mdq-latn-cd",mdr:"mdr-latn-id",mds:"mds-latn-pg",mdt:"mdt-latn-cg",mdu:"mdu-latn-cg",mdv:"mdv-latn-mx",mdw:"mdw-latn-cg",mdx:"mdx-ethi-zz",mdy:"mdy-ethi-et","mdy-latn":"mdy-latn-et",mdz:"mdz-latn-br",mea:"mea-latn-cm",meb:"meb-latn-pg",mec:"mec-latn-au",med:"med-latn-zz",mee:"mee-latn-zz",meh:"meh-latn-mx",mej:"mej-latn-id",mek:"mek-latn-zz",mel:"mel-latn-my",mem:"mem-latn-au",men:"men-latn-sl",meo:"meo-latn-my","meo-arab":"meo-arab-my",mep:"mep-latn-au",meq:"meq-latn-cm",mer:"mer-latn-ke",mes:"mes-latn-td",met:"met-latn-zz",meu:"meu-latn-zz",mev:"mev-latn-lr",mew:"mew-latn-ng",mey:"mey-latn-mr","mey-arab":"mey-arab-mr",mez:"mez-latn-us",mfa:"mfa-arab-th",mfb:"mfb-latn-id",mfc:"mfc-latn-cd",mfd:"mfd-latn-cm",mfe:"mfe-latn-mu",mff:"mff-latn-cm",mfg:"mfg-latn-gn","mfg-arab":"mfg-arab-gn",mfh:"mfh-latn-cm",mfi:"mfi-arab-cm","mfi-latn":"mfi-latn-cm",mfj:"mfj-latn-cm",mfk:"mfk-latn-cm",mfl:"mfl-latn-ng",mfm:"mfm-latn-ng",mfn:"mfn-latn-zz",mfo:"mfo-latn-zz",mfp:"mfp-latn-id",mfq:"mfq-latn-zz",mfr:"mfr-latn-au",mft:"mft-latn-pg",mfu:"mfu-latn-ao",mfv:"mfv-latn-gw",mfw:"mfw-latn-pg",mfx:"mfx-latn-et","mfx-ethi":"mfx-ethi-et",mfy:"mfy-latn-mx",mfz:"mfz-latn-ss",mg:"mg-latn-mg",mgb:"mgb-latn-td",mgc:"mgc-latn-ss",mgd:"mgd-latn-ss","mgd-arab":"mgd-arab-ss",mge:"mge-latn-td",mgf:"mgf-latn-id",mgg:"mgg-latn-cm",mgh:"mgh-latn-mz",mgi:"mgi-latn-ng",mgj:"mgj-latn-ng",mgk:"mgk-latn-id",mgl:"mgl-latn-zz",mgm:"mgm-latn-tl",mgn:"mgn-latn-cf",mgo:"mgo-latn-cm",mgp:"mgp-deva-np",mgq:"mgq-latn-tz",mgr:"mgr-latn-zm",mgs:"mgs-latn-tz",mgt:"mgt-latn-pg",mgu:"mgu-latn-pg",mgv:"mgv-latn-tz",mgw:"mgw-latn-tz",mgy:"mgy-latn-tz",mgz:"mgz-latn-tz",mh:"mh-latn-mh",mhb:"mhb-latn-ga",mhc:"mhc-latn-mx",mhd:"mhd-latn-tz",mhe:"mhe-latn-my",mhf:"mhf-latn-pg",mhg:"mhg-latn-au",mhi:"mhi-latn-zz",mhj:"mhj-arab-af",mhk:"mhk-latn-cm",mhl:"mhl-latn-zz",mhm:"mhm-latn-mz",mhn:"mhn-latn-it",mho:"mho-latn-zm",mhp:"mhp-latn-id",mhq:"mhq-latn-us",mhs:"mhs-latn-id",mht:"mht-latn-ve",mhu:"mhu-latn-in",mhw:"mhw-latn-bw",mhx:"mhx-latn-mm",mhy:"mhy-latn-id",mhz:"mhz-latn-id",mi:"mi-latn-nz",mia:"mia-latn-us",mib:"mib-latn-mx",mic:"mic-latn-ca",mid:"mid-mand-iq",mie:"mie-latn-mx",mif:"mif-latn-zz",mig:"mig-latn-mx",mih:"mih-latn-mx",mii:"mii-latn-mx",mij:"mij-latn-cm",mik:"mik-latn-us",mil:"mil-latn-mx",mim:"mim-latn-mx",min:"min-latn-id",mio:"mio-latn-mx",mip:"mip-latn-mx",miq:"miq-latn-ni",mir:"mir-latn-mx",mit:"mit-latn-mx",miu:"miu-latn-mx",miw:"miw-latn-zz",mix:"mix-latn-mx",miy:"miy-latn-mx",miz:"miz-latn-mx",mjb:"mjb-latn-tl",mjc:"mjc-latn-mx",mjd:"mjd-latn-us",mje:"mje-latn-td",mjg:"mjg-latn-cn",mjh:"mjh-latn-tz",mji:"mji-latn-cn",mjj:"mjj-latn-pg",mjk:"mjk-latn-pg",mjl:"mjl-deva-in","mjl-takr":"mjl-takr-in",mjm:"mjm-latn-pg",mjn:"mjn-latn-pg",mjq:"mjq-mlym-in",mjr:"mjr-mlym-in",mjs:"mjs-latn-ng",mjt:"mjt-deva-in","mjt-beng":"mjt-beng-bd",mju:"mju-telu-in",mjv:"mjv-mlym-in",mjw:"mjw-latn-in",mjx:"mjx-latn-bd","mjx-beng":"mjx-beng-bd",mjy:"mjy-latn-us",mjz:"mjz-deva-np",mk:"mk-cyrl-mk",mka:"mka-latn-ci",mkb:"mkb-deva-in",mkc:"mkc-latn-pg",mke:"mke-deva-in",mkf:"mkf-latn-ng",mki:"mki-arab-zz",mkj:"mkj-latn-fm",mkk:"mkk-latn-cm",mkl:"mkl-latn-zz",mkm:"mkm-thai-th",mkn:"mkn-latn-id",mko:"mko-latn-ng",mkp:"mkp-latn-zz",mkr:"mkr-latn-pg",mks:"mks-latn-mx",mkt:"mkt-latn-nc",mku:"mku-latn-gn",mkv:"mkv-latn-vu",mkw:"mkw-latn-zz",mkx:"mkx-latn-ph",mky:"mky-latn-id",mkz:"mkz-latn-tl",ml:"ml-mlym-in",mla:"mla-latn-vu",mlb:"mlb-latn-cm",mlc:"mlc-latn-vn",mle:"mle-latn-zz",mlf:"mlf-thai-la","mlf-latn":"mlf-latn-la",mlh:"mlh-latn-pg",mli:"mli-latn-id",mlj:"mlj-latn-td",mlk:"mlk-latn-ke",mll:"mll-latn-vu",mln:"mln-latn-sb",mlo:"mlo-latn-sn",mlp:"mlp-latn-zz",mlq:"mlq-latn-sn","mlq-arab":"mlq-arab-sn",mlr:"mlr-latn-cm",mls:"mls-latn-sd",mlu:"mlu-latn-sb",mlv:"mlv-latn-vu",mlw:"mlw-latn-cm",mlx:"mlx-latn-vu",mlz:"mlz-latn-ph",mma:"mma-latn-ng",mmb:"mmb-latn-id",mmc:"mmc-latn-mx",mmd:"mmd-latn-cn","mmd-hans":"mmd-hans-cn","mmd-hant":"mmd-hant-cn",mme:"mme-latn-vu",mmf:"mmf-latn-ng",mmg:"mmg-latn-vu",mmh:"mmh-latn-br",mmi:"mmi-latn-pg",mmm:"mmm-latn-vu",mmn:"mmn-latn-ph",mmo:"mmo-latn-zz",mmp:"mmp-latn-pg",mmq:"mmq-latn-pg",mmr:"mmr-latn-cn",mmt:"mmt-latn-pg",mmu:"mmu-latn-zz",mmv:"mmv-latn-br",mmw:"mmw-latn-vu",mmx:"mmx-latn-zz",mmy:"mmy-latn-td",mmz:"mmz-latn-cd",mn:"mn-cyrl-mn","mn-cn":"mn-mong-cn","mn-mong":"mn-mong-cn",mna:"mna-latn-zz",mnb:"mnb-latn-id",mnd:"mnd-latn-br",mne:"mne-latn-td",mnf:"mnf-latn-zz",mng:"mng-latn-vn",mnh:"mnh-latn-cd",mni:"mni-beng-in",mnj:"mnj-arab-af",mnl:"mnl-latn-vu",mnm:"mnm-latn-pg",mnn:"mnn-latn-vn",mnp:"mnp-latn-cn",mnq:"mnq-latn-my",mnr:"mnr-latn-us",mns:"mns-cyrl-ru",mnu:"mnu-latn-id",mnv:"mnv-latn-sb",mnw:"mnw-mymr-mm",mnx:"mnx-latn-id",mny:"mny-latn-mz",mnz:"mnz-latn-id",mo:"mo-latn-ro",moa:"moa-latn-zz",moc:"moc-latn-ar",mod:"mod-latn-us",moe:"moe-latn-ca",mog:"mog-latn-id",moh:"moh-latn-ca",moi:"moi-latn-ng",moj:"moj-latn-cg",mok:"mok-latn-id",mom:"mom-latn-ni",moo:"moo-latn-vn",mop:"mop-latn-bz",moq:"moq-latn-id",mor:"mor-latn-sd",mos:"mos-latn-bf",mot:"mot-latn-co",mou:"mou-latn-td",mov:"mov-latn-us",mow:"mow-latn-cg",mox:"mox-latn-zz",moy:"moy-latn-et","moy-ethi":"moy-ethi-et",moz:"moz-latn-td",mpa:"mpa-latn-tz",mpb:"mpb-latn-au",mpc:"mpc-latn-au",mpd:"mpd-latn-br",mpe:"mpe-latn-et","mpe-ethi":"mpe-ethi-et",mpg:"mpg-latn-td",mph:"mph-latn-au",mpi:"mpi-latn-cm",mpj:"mpj-latn-au",mpk:"mpk-latn-td",mpl:"mpl-latn-pg",mpm:"mpm-latn-mx",mpn:"mpn-latn-pg",mpo:"mpo-latn-pg",mpp:"mpp-latn-zz",mpq:"mpq-latn-br",mpr:"mpr-latn-sb",mps:"mps-latn-zz",mpt:"mpt-latn-zz",mpu:"mpu-latn-br",mpv:"mpv-latn-pg",mpw:"mpw-latn-br",mpx:"mpx-latn-zz",mpy:"mpy-latn-id",mpz:"mpz-thai-th",mqa:"mqa-latn-id",mqb:"mqb-latn-cm",mqc:"mqc-latn-id",mqe:"mqe-latn-pg",mqf:"mqf-latn-id",mqg:"mqg-latn-id",mqh:"mqh-latn-mx",mqi:"mqi-latn-id",mqj:"mqj-latn-id",mqk:"mqk-latn-ph",mql:"mql-latn-zz",mqm:"mqm-latn-pf",mqn:"mqn-latn-id",mqo:"mqo-latn-id",mqp:"mqp-latn-id",mqq:"mqq-latn-my",mqr:"mqr-latn-id",mqs:"mqs-latn-id",mqu:"mqu-latn-ss",mqv:"mqv-latn-pg",mqw:"mqw-latn-pg",mqx:"mqx-latn-id","mqx-bugi":"mqx-bugi-id",mqy:"mqy-latn-id",mqz:"mqz-latn-pg",mr:"mr-deva-in",mra:"mra-thai-th",mrb:"mrb-latn-vu",mrc:"mrc-latn-us",mrd:"mrd-deva-np",mrf:"mrf-latn-id",mrg:"mrg-latn-in","mrg-beng":"mrg-beng-in","mrg-deva":"mrg-deva-in",mrh:"mrh-latn-in",mrj:"mrj-cyrl-ru",mrk:"mrk-latn-nc",mrl:"mrl-latn-fm",mrm:"mrm-latn-vu",mrn:"mrn-latn-sb",mro:"mro-mroo-bd",mrp:"mrp-latn-vu",mrq:"mrq-latn-pf",mrr:"mrr-deva-in",mrs:"mrs-latn-vu",mrt:"mrt-latn-ng",mru:"mru-latn-cm",mrv:"mrv-latn-pf",mrw:"mrw-latn-ph","mrw-arab":"mrw-arab-ph",mrx:"mrx-latn-id",mry:"mry-latn-ph",mrz:"mrz-latn-id",ms:"ms-latn-my","ms-cc":"ms-arab-cc",msb:"msb-latn-ph",msc:"msc-latn-gn",mse:"mse-latn-td",msf:"msf-latn-id",msg:"msg-latn-id",msh:"msh-latn-mg",msi:"msi-latn-my",msj:"msj-latn-cd",msk:"msk-latn-ph",msl:"msl-latn-id",msm:"msm-latn-ph",msn:"msn-latn-vu",mso:"mso-latn-id",msp:"msp-latn-br",msq:"msq-latn-nc",mss:"mss-latn-id",msu:"msu-latn-pg",msv:"msv-latn-cm",msw:"msw-latn-gw",msx:"msx-latn-pg",msy:"msy-latn-pg",msz:"msz-latn-pg",mt:"mt-latn-mt",mta:"mta-latn-ph",mtb:"mtb-latn-ci",mtc:"mtc-latn-zz",mtd:"mtd-latn-id",mte:"mte-latn-sb",mtf:"mtf-latn-zz",mtg:"mtg-latn-id",mth:"mth-latn-id",mti:"mti-latn-zz",mtj:"mtj-latn-id",mtk:"mtk-latn-cm",mtl:"mtl-latn-ng",mtm:"mtm-cyrl-ru",mtn:"mtn-latn-ni",mto:"mto-latn-mx",mtp:"mtp-latn-bo",mtq:"mtq-latn-vn",mtr:"mtr-deva-in",mts:"mts-latn-pe",mtt:"mtt-latn-vu",mtu:"mtu-latn-mx",mtv:"mtv-latn-pg",mtw:"mtw-latn-ph",mtx:"mtx-latn-mx",mty:"mty-latn-pg",mua:"mua-latn-cm",mub:"mub-latn-td",muc:"muc-latn-cm",mud:"mud-cyrl-ru",mue:"mue-latn-ec",mug:"mug-latn-cm",muh:"muh-latn-ss",mui:"mui-latn-id",muj:"muj-latn-td",muk:"muk-tibt-np",mum:"mum-latn-pg",muo:"muo-latn-cm",muq:"muq-latn-cn",mur:"mur-latn-zz",mus:"mus-latn-us",mut:"mut-deva-in",muu:"muu-latn-ke",muv:"muv-taml-in",mux:"mux-latn-pg",muy:"muy-latn-cm",muz:"muz-ethi-et","muz-latn":"muz-latn-et",mva:"mva-latn-zz",mvd:"mvd-latn-id",mvf:"mvf-mong-cn","mvf-phag":"mvf-phag-cn",mvg:"mvg-latn-mx",mvh:"mvh-latn-td",mvk:"mvk-latn-pg",mvl:"mvl-latn-au",mvn:"mvn-latn-zz",mvo:"mvo-latn-sb",mvp:"mvp-latn-id",mvq:"mvq-latn-pg",mvr:"mvr-latn-id",mvs:"mvs-latn-id",mvt:"mvt-latn-vu",mvu:"mvu-latn-td",mvv:"mvv-latn-my",mvw:"mvw-latn-tz",mvx:"mvx-latn-id",mvy:"mvy-arab-pk",mvz:"mvz-ethi-et","mvz-arab":"mvz-arab-et",mwa:"mwa-latn-pg",mwb:"mwb-latn-pg",mwc:"mwc-latn-pg",mwe:"mwe-latn-tz",mwf:"mwf-latn-au",mwg:"mwg-latn-pg",mwh:"mwh-latn-pg",mwi:"mwi-latn-vu",mwk:"mwk-latn-ml",mwl:"mwl-latn-pt",mwm:"mwm-latn-td",mwn:"mwn-latn-zm",mwo:"mwo-latn-vu",mwp:"mwp-latn-au",mwq:"mwq-latn-mm",mwr:"mwr-deva-in",mws:"mws-latn-ke",mwt:"mwt-mymr-mm","mwt-thai":"mwt-thai-th",mwu:"mwu-latn-ss",mwv:"mwv-latn-id",mww:"mww-hmnp-us",mwz:"mwz-latn-cd",mxa:"mxa-latn-mx",mxb:"mxb-latn-mx",mxc:"mxc-latn-zw",mxd:"mxd-latn-id",mxe:"mxe-latn-vu",mxf:"mxf-latn-cm",mxg:"mxg-latn-ao",mxh:"mxh-latn-cd",mxi:"mxi-latn-es",mxj:"mxj-latn-in",mxk:"mxk-latn-pg",mxl:"mxl-latn-bj",mxm:"mxm-latn-zz",mxn:"mxn-latn-id",mxo:"mxo-latn-zm",mxp:"mxp-latn-mx",mxq:"mxq-latn-mx",mxr:"mxr-latn-my",mxs:"mxs-latn-mx",mxt:"mxt-latn-mx",mxu:"mxu-latn-cm",mxv:"mxv-latn-mx",mxw:"mxw-latn-pg",mxx:"mxx-latn-ci",mxy:"mxy-latn-mx",mxz:"mxz-latn-id",my:"my-mymr-mm",myb:"myb-latn-td",myc:"myc-latn-cd",mye:"mye-latn-ga",myf:"myf-latn-et",myg:"myg-latn-cm",myh:"myh-latn-us",myj:"myj-latn-ss",myk:"myk-latn-zz",myl:"myl-latn-id",mym:"mym-ethi-zz",myp:"myp-latn-br",myr:"myr-latn-pe",myu:"myu-latn-br",myv:"myv-cyrl-ru",myw:"myw-latn-zz",myx:"myx-latn-ug",myy:"myy-latn-co",myz:"myz-mand-ir",mza:"mza-latn-mx",mzd:"mzd-latn-cm",mze:"mze-latn-pg",mzh:"mzh-latn-ar",mzi:"mzi-latn-mx",mzj:"mzj-latn-lr",mzk:"mzk-latn-zz",mzl:"mzl-latn-mx",mzm:"mzm-latn-zz",mzn:"mzn-arab-ir",mzo:"mzo-latn-br",mzp:"mzp-latn-zz",mzq:"mzq-latn-id",mzr:"mzr-latn-br",mzt:"mzt-latn-my",mzu:"mzu-latn-pg",mzv:"mzv-latn-cf",mzw:"mzw-latn-zz",mzx:"mzx-latn-gy",mzz:"mzz-latn-zz",na:"na-latn-nr",naa:"naa-latn-id",nab:"nab-latn-br",nac:"nac-latn-zz",nae:"nae-latn-id",naf:"naf-latn-zz",nag:"nag-latn-in",naj:"naj-latn-gn",nak:"nak-latn-zz",nal:"nal-latn-pg",nam:"nam-latn-au",nan:"nan-hans-cn",nao:"nao-deva-np",nap:"nap-latn-it",naq:"naq-latn-na",nar:"nar-latn-ng",nas:"nas-latn-zz",nat:"nat-latn-ng",naw:"naw-latn-gh",nax:"nax-latn-pg",nay:"nay-latn-au",naz:"naz-latn-mx",nb:"nb-latn-no",nba:"nba-latn-ao",nbb:"nbb-latn-ng",nbc:"nbc-latn-in",nbd:"nbd-latn-cd",nbe:"nbe-latn-in",nbh:"nbh-latn-ng",nbi:"nbi-latn-in",nbj:"nbj-latn-au",nbk:"nbk-latn-pg",nbm:"nbm-latn-cf",nbn:"nbn-latn-id",nbo:"nbo-latn-ng",nbp:"nbp-latn-ng",nbq:"nbq-latn-id",nbr:"nbr-latn-ng",nbt:"nbt-latn-in","nbt-deva":"nbt-deva-in",nbu:"nbu-latn-in",nbv:"nbv-latn-cm",nbw:"nbw-latn-cd",nby:"nby-latn-pg",nca:"nca-latn-zz",ncb:"ncb-latn-in","ncb-deva":"ncb-deva-in",ncc:"ncc-latn-pg",ncd:"ncd-deva-np",nce:"nce-latn-zz",ncf:"ncf-latn-zz",ncg:"ncg-latn-ca",nch:"nch-latn-mx",nci:"nci-latn-mx",ncj:"ncj-latn-mx",nck:"nck-latn-au",ncl:"ncl-latn-mx",ncm:"ncm-latn-pg",ncn:"ncn-latn-pg",nco:"nco-latn-zz",ncq:"ncq-laoo-la","ncq-thai":"ncq-thai-la",ncr:"ncr-latn-cm",nct:"nct-latn-in","nct-beng":"nct-beng-in",ncu:"ncu-latn-zz",ncx:"ncx-latn-mx",ncz:"ncz-latn-us",nd:"nd-latn-zw",nda:"nda-latn-cg",ndb:"ndb-latn-cm",ndc:"ndc-latn-mz",ndd:"ndd-latn-ng",ndf:"ndf-cyrl-ru",ndg:"ndg-latn-tz",ndh:"ndh-latn-tz",ndi:"ndi-latn-ng",ndj:"ndj-latn-tz",ndk:"ndk-latn-cd",ndl:"ndl-latn-cd",ndm:"ndm-latn-td",ndn:"ndn-latn-cg",ndp:"ndp-latn-ug",ndq:"ndq-latn-ao",ndr:"ndr-latn-ng",nds:"nds-latn-de",ndt:"ndt-latn-cd",ndu:"ndu-latn-cm",ndv:"ndv-latn-sn",ndw:"ndw-latn-cd",ndx:"ndx-latn-id",ndy:"ndy-latn-cf","ndy-td":"ndy-latn-td",ndz:"ndz-latn-ss",ne:"ne-deva-np",nea:"nea-latn-id",neb:"neb-latn-zz",nec:"nec-latn-id",ned:"ned-latn-ng",nee:"nee-latn-nc",neg:"neg-cyrl-ru",neh:"neh-tibt-bt",nei:"nei-xsux-tr",nej:"nej-latn-pg",nek:"nek-latn-nc",nem:"nem-latn-nc",nen:"nen-latn-nc",neo:"neo-latn-vn",neq:"neq-latn-mx",ner:"ner-latn-id",net:"net-latn-pg",neu:"neu-latn-001",new:"new-deva-np",nex:"nex-latn-zz",ney:"ney-latn-ci",nez:"nez-latn-us",nfa:"nfa-latn-id",nfd:"nfd-latn-ng",nfl:"nfl-latn-sb",nfr:"nfr-latn-zz",nfu:"nfu-latn-cm",ng:"ng-latn-na",nga:"nga-latn-zz",ngb:"ngb-latn-zz",ngc:"ngc-latn-cd",ngd:"ngd-latn-cf",nge:"nge-latn-cm",ngg:"ngg-latn-cf",ngh:"ngh-latn-za",ngi:"ngi-latn-ng",ngj:"ngj-latn-cm",ngk:"ngk-latn-au",ngl:"ngl-latn-mz",ngm:"ngm-latn-fm",ngn:"ngn-latn-cm",ngp:"ngp-latn-tz",ngq:"ngq-latn-tz",ngr:"ngr-latn-sb",ngs:"ngs-latn-ng",ngt:"ngt-laoo-la",ngu:"ngu-latn-mx",ngv:"ngv-latn-cm",ngw:"ngw-latn-ng",ngx:"ngx-latn-ng",ngy:"ngy-latn-cm",ngz:"ngz-latn-cg",nha:"nha-latn-au",nhb:"nhb-latn-zz",nhc:"nhc-latn-mx",nhd:"nhd-latn-py",nhe:"nhe-latn-mx",nhf:"nhf-latn-au",nhg:"nhg-latn-mx",nhi:"nhi-latn-mx",nhk:"nhk-latn-mx",nhm:"nhm-latn-mx",nhn:"nhn-latn-mx",nho:"nho-latn-pg",nhp:"nhp-latn-mx",nhq:"nhq-latn-mx",nhr:"nhr-latn-bw",nht:"nht-latn-mx",nhu:"nhu-latn-cm",nhv:"nhv-latn-mx",nhw:"nhw-latn-mx",nhx:"nhx-latn-mx",nhy:"nhy-latn-mx",nhz:"nhz-latn-mx",nia:"nia-latn-id",nib:"nib-latn-pg",nid:"nid-latn-au",nie:"nie-latn-td",nif:"nif-latn-zz",nig:"nig-latn-au",nih:"nih-latn-tz",nii:"nii-latn-zz",nij:"nij-latn-id",nil:"nil-latn-id",nim:"nim-latn-tz",nin:"nin-latn-zz",nio:"nio-cyrl-ru",niq:"niq-latn-ke",nir:"nir-latn-id",nis:"nis-latn-pg",nit:"nit-telu-in",niu:"niu-latn-nu",niv:"niv-cyrl-ru","niv-latn":"niv-latn-ru",niw:"niw-latn-pg",nix:"nix-latn-cd",niy:"niy-latn-zz",niz:"niz-latn-zz",nja:"nja-latn-ng",njb:"njb-latn-in",njd:"njd-latn-tz",njh:"njh-latn-in",nji:"nji-latn-au",njj:"njj-latn-cm",njl:"njl-latn-ss",njm:"njm-latn-in",njn:"njn-latn-in",njo:"njo-latn-in",njr:"njr-latn-ng",njs:"njs-latn-id",njt:"njt-latn-sr",nju:"nju-latn-au",njx:"njx-latn-cg",njy:"njy-latn-cm",njz:"njz-latn-in","njz-beng":"njz-beng-in",nka:"nka-latn-zm",nkb:"nkb-latn-in",nkc:"nkc-latn-cm",nkd:"nkd-latn-in",nke:"nke-latn-sb",nkf:"nkf-latn-in",nkg:"nkg-latn-zz",nkh:"nkh-latn-in",nki:"nki-latn-in","nki-beng":"nki-beng-in",nkj:"nkj-latn-id",nkk:"nkk-latn-vu",nkm:"nkm-latn-pg",nkn:"nkn-latn-ao",nko:"nko-latn-zz",nkq:"nkq-latn-gh",nkr:"nkr-latn-fm",nks:"nks-latn-id",nkt:"nkt-latn-tz",nku:"nku-latn-ci",nkv:"nkv-latn-mw",nkw:"nkw-latn-cd",nkx:"nkx-latn-ng",nkz:"nkz-latn-ng",nl:"nl-latn-nl",nla:"nla-latn-cm",nlc:"nlc-latn-id",nle:"nle-latn-ke",nlg:"nlg-latn-sb",nli:"nli-arab-af",nlj:"nlj-latn-cd",nlk:"nlk-latn-id",nlm:"nlm-arab-pk",nlo:"nlo-latn-cd",nlq:"nlq-latn-mm",nlu:"nlu-latn-gh",nlv:"nlv-latn-mx",nlw:"nlw-latn-au",nlx:"nlx-deva-in",nly:"nly-latn-au",nlz:"nlz-latn-sb",nma:"nma-latn-in",nmb:"nmb-latn-vu",nmc:"nmc-latn-td",nmd:"nmd-latn-ga",nme:"nme-latn-in",nmf:"nmf-latn-in",nmg:"nmg-latn-cm",nmh:"nmh-latn-in",nmi:"nmi-latn-ng",nmj:"nmj-latn-cf",nmk:"nmk-latn-vu",nml:"nml-latn-cm",nmm:"nmm-deva-np","nmm-tibt":"nmm-tibt-np",nmn:"nmn-latn-bw",nmo:"nmo-latn-in","nmo-beng":"nmo-beng-in",nmp:"nmp-latn-au",nmq:"nmq-latn-zw",nmr:"nmr-latn-cm",nms:"nms-latn-vu",nmt:"nmt-latn-fm",nmu:"nmu-latn-us",nmv:"nmv-latn-au",nmw:"nmw-latn-pg",nmx:"nmx-latn-pg",nmz:"nmz-latn-zz",nn:"nn-latn-no",nna:"nna-latn-au",nnb:"nnb-latn-cd",nnc:"nnc-latn-td",nnd:"nnd-latn-vu",nne:"nne-latn-ao",nnf:"nnf-latn-zz",nng:"nng-latn-in","nng-beng":"nng-beng-in",nnh:"nnh-latn-cm",nni:"nni-latn-id",nnj:"nnj-latn-et",nnk:"nnk-latn-zz",nnl:"nnl-latn-in",nnm:"nnm-latn-zz",nnn:"nnn-latn-td",nnp:"nnp-wcho-in",nnq:"nnq-latn-tz",nnr:"nnr-latn-au",nnt:"nnt-latn-us",nnu:"nnu-latn-gh",nnv:"nnv-latn-au",nnw:"nnw-latn-bf",nny:"nny-latn-au",nnz:"nnz-latn-cm",no:"no-latn-no",noa:"noa-latn-co",noc:"noc-latn-pg",nod:"nod-lana-th",noe:"noe-deva-in",nof:"nof-latn-pg",nog:"nog-cyrl-ru",noh:"noh-latn-pg",noi:"noi-deva-in",noj:"noj-latn-co",nok:"nok-latn-us",nom:"nom-latn-pe",non:"non-runr-se",nop:"nop-latn-zz",noq:"noq-latn-cd",nos:"nos-yiii-cn",not:"not-latn-pe",nou:"nou-latn-zz",nov:"nov-latn-001",now:"now-latn-tz",noy:"noy-latn-td",npb:"npb-tibt-bt",npg:"npg-latn-mm",nph:"nph-latn-in",npl:"npl-latn-mx",npn:"npn-latn-pg",npo:"npo-latn-in",nps:"nps-latn-id",npu:"npu-latn-in",npx:"npx-latn-sb",npy:"npy-latn-id",nqg:"nqg-latn-bj",nqk:"nqk-latn-bj",nql:"nql-latn-ao",nqm:"nqm-latn-id",nqn:"nqn-latn-pg",nqo:"nqo-nkoo-gn",nqq:"nqq-latn-mm",nqt:"nqt-latn-ng",nqy:"nqy-latn-mm",nr:"nr-latn-za",nra:"nra-latn-ga",nrb:"nrb-latn-zz",nre:"nre-latn-in",nrf:"nrf-latn-je",nrg:"nrg-latn-vu",nri:"nri-latn-in",nrk:"nrk-latn-au",nrl:"nrl-latn-au",nrm:"nrm-latn-my",nrp:"nrp-latn-it",nru:"nru-latn-cn","nru-hans":"nru-hans-cn","nru-hant":"nru-hant-cn",nrx:"nrx-latn-au",nrz:"nrz-latn-pg",nsa:"nsa-latn-in",nsb:"nsb-latn-za",nsc:"nsc-latn-ng",nsd:"nsd-yiii-cn",nse:"nse-latn-zm",nsf:"nsf-yiii-cn",nsg:"nsg-latn-tz",nsh:"nsh-latn-cm",nsk:"nsk-cans-ca",nsm:"nsm-latn-in",nsn:"nsn-latn-zz",nso:"nso-latn-za",nsq:"nsq-latn-us",nss:"nss-latn-zz",nst:"nst-tnsa-in",nsu:"nsu-latn-mx",nsv:"nsv-yiii-cn",nsw:"nsw-latn-vu",nsx:"nsx-latn-ao",nsy:"nsy-latn-id",nsz:"nsz-latn-us",ntd:"ntd-latn-my",nte:"nte-latn-mz",ntg:"ntg-latn-au",nti:"nti-latn-bf",ntj:"ntj-latn-au",ntk:"ntk-latn-tz",ntm:"ntm-latn-zz",nto:"nto-latn-cd",ntp:"ntp-latn-mx",ntr:"ntr-latn-zz",ntu:"ntu-latn-sb",ntx:"ntx-latn-mm",nty:"nty-yiii-vn",ntz:"ntz-arab-ir",nua:"nua-latn-nc",nuc:"nuc-latn-br",nud:"nud-latn-pg",nue:"nue-latn-cd",nuf:"nuf-latn-cn",nug:"nug-latn-au",nuh:"nuh-latn-ng",nui:"nui-latn-zz",nuj:"nuj-latn-ug",nuk:"nuk-latn-ca",num:"num-latn-to",nun:"nun-latn-mm",nuo:"nuo-latn-vn",nup:"nup-latn-zz",nuq:"nuq-latn-pg",nur:"nur-latn-pg",nus:"nus-latn-ss",nut:"nut-latn-vn",nuu:"nuu-latn-cd",nuv:"nuv-latn-zz",nuw:"nuw-latn-fm",nux:"nux-latn-zz",nuy:"nuy-latn-au",nuz:"nuz-latn-mx",nv:"nv-latn-us",nvh:"nvh-latn-vu",nvm:"nvm-latn-pg",nvo:"nvo-latn-cm",nwb:"nwb-latn-zz",nwc:"nwc-newa-np","nwc-brah":"nwc-brah-np","nwc-deva":"nwc-deva-np","nwc-sidd":"nwc-sidd-np",nwe:"nwe-latn-cm",nwg:"nwg-latn-au",nwi:"nwi-latn-vu",nwm:"nwm-latn-ss",nwo:"nwo-latn-au",nwr:"nwr-latn-pg",nww:"nww-latn-tz",nwx:"nwx-deva-np",nxa:"nxa-latn-tl",nxd:"nxd-latn-cd",nxe:"nxe-latn-id",nxg:"nxg-latn-id",nxi:"nxi-latn-tz",nxl:"nxl-latn-id",nxn:"nxn-latn-au",nxo:"nxo-latn-ga",nxq:"nxq-latn-cn",nxr:"nxr-latn-zz",nxx:"nxx-latn-id",ny:"ny-latn-mw",nyb:"nyb-latn-gh",nyc:"nyc-latn-cd",nyd:"nyd-latn-ke",nye:"nye-latn-ao",nyf:"nyf-latn-ke",nyg:"nyg-latn-cd",nyh:"nyh-latn-au",nyi:"nyi-latn-sd",nyj:"nyj-latn-cd",nyk:"nyk-latn-ao",nyl:"nyl-thai-th",nym:"nym-latn-tz",nyn:"nyn-latn-ug",nyo:"nyo-latn-ug",nyp:"nyp-latn-ug",nyq:"nyq-arab-ir",nyr:"nyr-latn-mw",nys:"nys-latn-au",nyt:"nyt-latn-au",nyu:"nyu-latn-mz",nyv:"nyv-latn-au",nyx:"nyx-latn-au",nyy:"nyy-latn-tz",nza:"nza-latn-cm",nzb:"nzb-latn-ga",nzd:"nzd-latn-cd",nzi:"nzi-latn-gh",nzk:"nzk-latn-cf",nzm:"nzm-latn-in",nzu:"nzu-latn-cg",nzy:"nzy-latn-td",nzz:"nzz-latn-ml",oaa:"oaa-cyrl-ru",oac:"oac-cyrl-ru",oar:"oar-syrc-sy",oav:"oav-geor-ge",obi:"obi-latn-us",obk:"obk-latn-ph",obl:"obl-latn-cm",obm:"obm-phnx-jo",obo:"obo-latn-ph",obr:"obr-mymr-mm",obt:"obt-latn-fr",obu:"obu-latn-ng",oc:"oc-latn-fr",oca:"oca-latn-pe",oco:"oco-latn-gb",ocu:"ocu-latn-mx",oda:"oda-latn-ng",odk:"odk-arab-pk",odt:"odt-latn-nl",odu:"odu-latn-ng",ofu:"ofu-latn-ng",ogb:"ogb-latn-ng",ogc:"ogc-latn-zz",ogg:"ogg-latn-ng",ogo:"ogo-latn-ng",ogu:"ogu-latn-ng",oht:"oht-xsux-tr",oia:"oia-latn-id",oie:"oie-latn-ss",oin:"oin-latn-pg",oj:"oj-cans-ca",ojb:"ojb-latn-ca","ojb-cans":"ojb-cans-ca",ojc:"ojc-latn-ca",ojs:"ojs-cans-ca",ojv:"ojv-latn-sb",ojw:"ojw-latn-ca","ojw-cans":"ojw-cans-ca",oka:"oka-latn-ca",okb:"okb-latn-ng",okc:"okc-latn-cd",okd:"okd-latn-ng",oke:"oke-latn-ng",okg:"okg-latn-au",oki:"oki-latn-ke",okk:"okk-latn-pg",okm:"okm-hang-kr",oko:"oko-hani-kr",okr:"okr-latn-zz",oks:"oks-latn-ng",oku:"oku-latn-cm",okv:"okv-latn-zz",okx:"okx-latn-ng",okz:"okz-khmr-kh",ola:"ola-deva-np","ola-tibt":"ola-tibt-cn",old:"old-latn-tz",ole:"ole-tibt-bt",olk:"olk-latn-au",olm:"olm-latn-ng",olo:"olo-latn-ru",olr:"olr-latn-vu",olt:"olt-latn-lt",olu:"olu-latn-ao",om:"om-latn-et",oma:"oma-latn-us",omb:"omb-latn-vu",omc:"omc-latn-pe",omg:"omg-latn-pe",omi:"omi-latn-cd",omk:"omk-cyrl-ru",oml:"oml-latn-cd",omo:"omo-latn-pg",omp:"omp-mtei-in",omr:"omr-modi-in",omt:"omt-latn-ke",omu:"omu-latn-pe",omw:"omw-latn-pg",ona:"ona-latn-ar",one:"one-latn-ca",ong:"ong-latn-zz",oni:"oni-latn-id",onj:"onj-latn-pg",onk:"onk-latn-pg",onn:"onn-latn-zz",ono:"ono-latn-ca",onp:"onp-latn-in","onp-deva":"onp-deva-in",onr:"onr-latn-pg",ons:"ons-latn-zz",ont:"ont-latn-pg",onu:"onu-latn-vu",onx:"onx-latn-id",ood:"ood-latn-us",oon:"oon-deva-in",oor:"oor-latn-za",opa:"opa-latn-ng",opk:"opk-latn-id",opm:"opm-latn-zz",opo:"opo-latn-pg",opt:"opt-latn-mx",opy:"opy-latn-br",or:"or-orya-in",ora:"ora-latn-sb",orc:"orc-latn-ke",ore:"ore-latn-pe",org:"org-latn-ng",orn:"orn-latn-my",oro:"oro-latn-zz",orr:"orr-latn-ng",ors:"ors-latn-my",ort:"ort-telu-in",oru:"oru-arab-zz",orv:"orv-cyrl-ru",orw:"orw-latn-br",orx:"orx-latn-ng",orz:"orz-latn-id",os:"os-cyrl-ge",osa:"osa-osge-us",osc:"osc-ital-it","osc-latn":"osc-latn-it",osi:"osi-java-id",oso:"oso-latn-ng",osp:"osp-latn-es",ost:"ost-latn-cm",osu:"osu-latn-pg",osx:"osx-latn-de",ota:"ota-arab-zz",otb:"otb-tibt-cn",otd:"otd-latn-id",ote:"ote-latn-mx",oti:"oti-latn-br",otk:"otk-orkh-mn",otl:"otl-latn-mx",otm:"otm-latn-mx",otn:"otn-latn-mx",otq:"otq-latn-mx",otr:"otr-latn-sd",ots:"ots-latn-mx",ott:"ott-latn-mx",otu:"otu-latn-br",otw:"otw-latn-ca",otx:"otx-latn-mx",oty:"oty-gran-in",otz:"otz-latn-mx",oub:"oub-latn-lr",oue:"oue-latn-pg",oui:"oui-ougr-143",oum:"oum-latn-pg",ovd:"ovd-latn-se",owi:"owi-latn-pg",owl:"owl-latn-gb",oyd:"oyd-latn-et",oym:"oym-latn-br",oyy:"oyy-latn-pg",ozm:"ozm-latn-zz",pa:"pa-guru-in","pa-arab":"pa-arab-pk","pa-pk":"pa-arab-pk",pab:"pab-latn-br",pac:"pac-latn-vn",pad:"pad-latn-br",pae:"pae-latn-cd",paf:"paf-latn-br",pag:"pag-latn-ph",pah:"pah-latn-br",pai:"pai-latn-ng",pak:"pak-latn-br",pal:"pal-phli-ir","pal-phlp":"pal-phlp-cn",pam:"pam-latn-ph",pao:"pao-latn-us",pap:"pap-latn-cw",paq:"paq-cyrl-tj",par:"par-latn-us",pas:"pas-latn-id",pau:"pau-latn-pw",pav:"pav-latn-br",paw:"paw-latn-us",pax:"pax-latn-br",pay:"pay-latn-hn",paz:"paz-latn-br",pbb:"pbb-latn-co",pbc:"pbc-latn-gy",pbe:"pbe-latn-mx",pbf:"pbf-latn-mx",pbg:"pbg-latn-ve",pbh:"pbh-latn-ve",pbi:"pbi-latn-zz",pbl:"pbl-latn-ng",pbm:"pbm-latn-mx",pbn:"pbn-latn-ng",pbo:"pbo-latn-gw",pbp:"pbp-latn-gn",pbr:"pbr-latn-tz",pbs:"pbs-latn-mx",pbt:"pbt-arab-af",pbv:"pbv-latn-in",pby:"pby-latn-pg",pca:"pca-latn-mx",pcb:"pcb-khmr-kh",pcc:"pcc-latn-cn","pcc-hani":"pcc-hani-cn",pcd:"pcd-latn-fr",pce:"pce-mymr-mm","pce-thai":"pce-thai-th",pcf:"pcf-mlym-in",pcg:"pcg-mlym-in","pcg-knda":"pcg-knda-in","pcg-taml":"pcg-taml-in",pch:"pch-deva-in",pci:"pci-deva-in","pci-orya":"pci-orya-in",pcj:"pcj-telu-in",pck:"pck-latn-in",pcm:"pcm-latn-ng",pcn:"pcn-latn-ng",pcp:"pcp-latn-bo",pcw:"pcw-latn-ng",pda:"pda-latn-pg",pdc:"pdc-latn-us",pdn:"pdn-latn-id",pdo:"pdo-latn-id",pdt:"pdt-latn-ca",pdu:"pdu-latn-mm","pdu-mymr":"pdu-mymr-mm",pea:"pea-latn-id",peb:"peb-latn-us",ped:"ped-latn-zz",pee:"pee-latn-id",peg:"peg-orya-in",pei:"pei-latn-mx",pek:"pek-latn-pg",pel:"pel-latn-id",pem:"pem-latn-cd",peo:"peo-xpeo-ir",pep:"pep-latn-pg",peq:"peq-latn-us",pev:"pev-latn-ve",pex:"pex-latn-zz",pey:"pey-latn-id",pez:"pez-latn-my",pfa:"pfa-latn-fm",pfe:"pfe-latn-cm",pfl:"pfl-latn-de",pga:"pga-latn-ss",pgd:"pgd-khar-pk",pgg:"pgg-deva-in",pgi:"pgi-latn-pg",pgk:"pgk-latn-vu",pgl:"pgl-ogam-ie",pgn:"pgn-ital-it",pgs:"pgs-latn-ng",pgu:"pgu-latn-id",phd:"phd-deva-in",phg:"phg-latn-vn",phh:"phh-latn-vn",phk:"phk-mymr-in",phl:"phl-arab-zz",phm:"phm-latn-mz",phn:"phn-phnx-lb",pho:"pho-laoo-la",phr:"phr-arab-pk",pht:"pht-thai-th",phv:"phv-arab-af",phw:"phw-deva-np",pi:"pi-sinh-in","pi-brah":"pi-brah-in","pi-deva":"pi-deva-in","pi-khar":"pi-khar-in","pi-khmr":"pi-khmr-in","pi-mymr":"pi-mymr-in","pi-thai":"pi-thai-in",pia:"pia-latn-mx",pib:"pib-latn-pe",pic:"pic-latn-ga",pid:"pid-latn-ve",pif:"pif-latn-fm",pig:"pig-latn-pe",pih:"pih-latn-nf",pij:"pij-latn-co",pil:"pil-latn-zz",pim:"pim-latn-us",pin:"pin-latn-pg",pio:"pio-latn-co",pip:"pip-latn-zz",pir:"pir-latn-br",pis:"pis-latn-sb",pit:"pit-latn-au",piu:"piu-latn-au",piv:"piv-latn-sb",piw:"piw-latn-tz",pix:"pix-latn-pg",piy:"piy-latn-ng",piz:"piz-latn-nc",pjt:"pjt-latn-au",pka:"pka-brah-in",pkb:"pkb-latn-ke",pkg:"pkg-latn-pg",pkh:"pkh-latn-bd","pkh-deva":"pkh-deva-bd",pkn:"pkn-latn-au",pko:"pko-latn-ke",pkp:"pkp-latn-ck",pkr:"pkr-mlym-in",pku:"pku-latn-id",pl:"pl-latn-pl",pla:"pla-latn-zz",plb:"plb-latn-vu",plc:"plc-latn-ph",pld:"pld-latn-gb",ple:"ple-latn-id",plg:"plg-latn-ar",plh:"plh-latn-id",plj:"plj-latn-ng",plk:"plk-arab-pk",pll:"pll-mymr-mm",pln:"pln-latn-co",plo:"plo-latn-mx",plr:"plr-latn-ci",pls:"pls-latn-mx",plu:"plu-latn-br",plv:"plv-latn-ph",plw:"plw-latn-ph",plz:"plz-latn-my",pma:"pma-latn-vu",pmb:"pmb-latn-cd",pmd:"pmd-latn-au",pme:"pme-latn-nc",pmf:"pmf-latn-id",pmh:"pmh-brah-in",pmi:"pmi-latn-cn",pmj:"pmj-latn-cn",pml:"pml-latn-tn",pmm:"pmm-latn-cm",pmn:"pmn-latn-cm",pmo:"pmo-latn-id",pmq:"pmq-latn-mx",pmr:"pmr-latn-pg",pms:"pms-latn-it",pmt:"pmt-latn-pf",pmw:"pmw-latn-us",pmx:"pmx-latn-in",pmy:"pmy-latn-id",pmz:"pmz-latn-mx",pna:"pna-latn-my",pnc:"pnc-latn-id",pnd:"pnd-latn-ao",pne:"pne-latn-my",png:"png-latn-zz",pnh:"pnh-latn-ck",pni:"pni-latn-id",pnj:"pnj-latn-au",pnk:"pnk-latn-bo",pnl:"pnl-latn-bf",pnm:"pnm-latn-my",pnn:"pnn-latn-zz",pno:"pno-latn-pe",pnp:"pnp-latn-id",pnq:"pnq-latn-bf",pnr:"pnr-latn-pg",pns:"pns-latn-id",pnt:"pnt-grek-gr",pnv:"pnv-latn-au",pnw:"pnw-latn-au",pny:"pny-latn-cm",pnz:"pnz-latn-cf",poc:"poc-latn-gt",poe:"poe-latn-mx",pof:"pof-latn-cd",pog:"pog-latn-br",poh:"poh-latn-gt",poi:"poi-latn-mx",pok:"pok-latn-br",pom:"pom-latn-us",pon:"pon-latn-fm",poo:"poo-latn-us",pop:"pop-latn-nc",poq:"poq-latn-mx",pos:"pos-latn-mx",pot:"pot-latn-us",pov:"pov-latn-gw",pow:"pow-latn-mx",poy:"poy-latn-tz",ppa:"ppa-deva-in",ppe:"ppe-latn-pg",ppi:"ppi-latn-mx",ppk:"ppk-latn-id",ppl:"ppl-latn-sv",ppm:"ppm-latn-id",ppn:"ppn-latn-pg",ppo:"ppo-latn-zz",ppp:"ppp-latn-cd",ppq:"ppq-latn-pg",pps:"pps-latn-mx",ppt:"ppt-latn-pg",pqa:"pqa-latn-ng",pqm:"pqm-latn-ca",pra:"pra-khar-pk",prc:"prc-arab-af",prd:"prd-arab-ir",pre:"pre-latn-st",prf:"prf-latn-ph",prg:"prg-latn-001",prh:"prh-latn-ph",pri:"pri-latn-nc",prk:"prk-latn-mm",prm:"prm-latn-pg",pro:"pro-latn-fr",prp:"prp-gujr-in",prq:"prq-latn-pe",prr:"prr-latn-br",prt:"prt-thai-th",pru:"pru-latn-id",prw:"prw-latn-pg",prx:"prx-arab-in","prx-tibt":"prx-tibt-in",ps:"ps-arab-af",psa:"psa-latn-id",pse:"pse-latn-id",psh:"psh-arab-af",psi:"psi-arab-af",psm:"psm-latn-bo",psn:"psn-latn-id",psq:"psq-latn-pg",pss:"pss-latn-zz",pst:"pst-arab-pk",psw:"psw-latn-vu",pt:"pt-latn-br",pta:"pta-latn-py",pth:"pth-latn-br",pti:"pti-latn-au",ptn:"ptn-latn-id",pto:"pto-latn-br",ptp:"ptp-latn-zz",ptr:"ptr-latn-vu",ptt:"ptt-latn-id",ptu:"ptu-latn-id",ptv:"ptv-latn-vu",pua:"pua-latn-mx",pub:"pub-latn-in",puc:"puc-latn-id",pud:"pud-latn-id",pue:"pue-latn-ar",puf:"puf-latn-id",pug:"pug-latn-bf",pui:"pui-latn-co",puj:"puj-latn-id",pum:"pum-deva-np",puo:"puo-latn-vn",pup:"pup-latn-pg",puq:"puq-latn-pe",pur:"pur-latn-br",put:"put-latn-id",puu:"puu-latn-ga",puw:"puw-latn-fm",pux:"pux-latn-pg",puy:"puy-latn-us",pwa:"pwa-latn-zz",pwb:"pwb-latn-ng",pwg:"pwg-latn-pg",pwm:"pwm-latn-ph",pwn:"pwn-latn-tw",pwo:"pwo-mymr-mm",pwr:"pwr-deva-in",pww:"pww-thai-th",pxm:"pxm-latn-mx",pye:"pye-latn-ci",pym:"pym-latn-ng",pyn:"pyn-latn-br",pyu:"pyu-latn-tw","pyu-hani":"pyu-hani-tw",pyx:"pyx-mymr-mm",pyy:"pyy-latn-mm",pzh:"pzh-latn-tw",pzn:"pzn-latn-mm",qu:"qu-latn-pe",qua:"qua-latn-us",qub:"qub-latn-pe",quc:"quc-latn-gt",qud:"qud-latn-ec",quf:"quf-latn-pe",qug:"qug-latn-ec",qui:"qui-latn-us",quk:"quk-latn-pe",qul:"qul-latn-bo",qum:"qum-latn-gt",qun:"qun-latn-us",qup:"qup-latn-pe",quq:"quq-latn-es",qur:"qur-latn-pe",qus:"qus-latn-ar",quv:"quv-latn-gt",quw:"quw-latn-ec",qux:"qux-latn-pe",quy:"quy-latn-pe",qva:"qva-latn-pe",qvc:"qvc-latn-pe",qve:"qve-latn-pe",qvh:"qvh-latn-pe",qvi:"qvi-latn-ec",qvj:"qvj-latn-ec",qvl:"qvl-latn-pe",qvm:"qvm-latn-pe",qvn:"qvn-latn-pe",qvo:"qvo-latn-pe",qvp:"qvp-latn-pe",qvs:"qvs-latn-pe",qvw:"qvw-latn-pe",qvz:"qvz-latn-ec",qwa:"qwa-latn-pe",qwc:"qwc-latn-pe",qwh:"qwh-latn-pe",qwm:"qwm-latn-ru","qwm-cyrl":"qwm-cyrl-ru","qwm-runr":"qwm-runr-ru",qws:"qws-latn-pe",qwt:"qwt-latn-us",qxa:"qxa-latn-pe",qxc:"qxc-latn-pe",qxh:"qxh-latn-pe",qxl:"qxl-latn-ec",qxn:"qxn-latn-pe",qxo:"qxo-latn-pe",qxp:"qxp-latn-pe",qxq:"qxq-arab-ir",qxr:"qxr-latn-ec",qxt:"qxt-latn-pe",qxu:"qxu-latn-pe",qxw:"qxw-latn-pe",qya:"qya-latn-001",qyp:"qyp-latn-us",raa:"raa-deva-np",rab:"rab-deva-np",rac:"rac-latn-id",rad:"rad-latn-vn",raf:"raf-deva-np",rag:"rag-latn-ke",rah:"rah-beng-in","rah-latn":"rah-latn-in",rai:"rai-latn-zz",raj:"raj-deva-in",rak:"rak-latn-pg",ram:"ram-latn-br",ran:"ran-latn-id",rao:"rao-latn-zz",rap:"rap-latn-cl",rar:"rar-latn-ck",rav:"rav-deva-np",raw:"raw-latn-mm",rax:"rax-latn-ng",ray:"ray-latn-pf",raz:"raz-latn-id",rbb:"rbb-mymr-mm",rbk:"rbk-latn-ph",rbl:"rbl-latn-ph",rbp:"rbp-latn-au",rcf:"rcf-latn-re",rdb:"rdb-arab-ir",rea:"rea-latn-pg",reb:"reb-latn-id",ree:"ree-latn-my",reg:"reg-latn-tz",rei:"rei-orya-in","rei-telu":"rei-telu-in",rej:"rej-latn-id",rel:"rel-latn-zz",rem:"rem-latn-pe",ren:"ren-latn-vn",res:"res-latn-zz",ret:"ret-latn-id",rey:"rey-latn-bo",rga:"rga-latn-vu",rgn:"rgn-latn-it",rgr:"rgr-latn-pe",rgs:"rgs-latn-vn",rgu:"rgu-latn-id",rhg:"rhg-rohg-mm",rhp:"rhp-latn-pg",ria:"ria-latn-in",rif:"rif-latn-ma",ril:"ril-latn-mm",rim:"rim-latn-tz",rin:"rin-latn-ng",rir:"rir-latn-id",rit:"rit-latn-au",riu:"riu-latn-id",rjg:"rjg-latn-id",rji:"rji-deva-np",rjs:"rjs-deva-np",rka:"rka-khmr-kh",rkb:"rkb-latn-br",rkh:"rkh-latn-ck",rki:"rki-mymr-mm",rkm:"rkm-latn-bf",rkt:"rkt-beng-bd",rkw:"rkw-latn-au",rm:"rm-latn-ch",rma:"rma-latn-ni",rmb:"rmb-latn-au",rmc:"rmc-latn-sk",rmd:"rmd-latn-dk",rme:"rme-latn-gb",rmf:"rmf-latn-fi",rmg:"rmg-latn-no",rmh:"rmh-latn-id",rmi:"rmi-armn-am",rmk:"rmk-latn-pg",rml:"rml-latn-pl","rml-cyrl":"rml-cyrl-by",rmm:"rmm-latn-id",rmn:"rmn-latn-rs","rmn-cyrl":"rmn-cyrl-bg","rmn-grek":"rmn-grek-gr",rmo:"rmo-latn-ch",rmp:"rmp-latn-pg",rmq:"rmq-latn-es",rmt:"rmt-arab-ir",rmu:"rmu-latn-se",rmw:"rmw-latn-gb",rmx:"rmx-latn-vn",rmz:"rmz-mymr-in",rn:"rn-latn-bi",rna:"rna-latn-zz",rnd:"rnd-latn-cd",rng:"rng-latn-mz",rnl:"rnl-latn-in",rnn:"rnn-latn-id",rnr:"rnr-latn-au",rnw:"rnw-latn-tz",ro:"ro-latn-ro",rob:"rob-latn-id",roc:"roc-latn-vn",rod:"rod-latn-ng",roe:"roe-latn-pg",rof:"rof-latn-tz",rog:"rog-latn-vn",rol:"rol-latn-ph",rom:"rom-latn-ro","rom-cyrl":"rom-cyrl-ro",roo:"roo-latn-zz",rop:"rop-latn-au",ror:"ror-latn-id",rou:"rou-latn-td",row:"row-latn-id",rpn:"rpn-latn-vu",rpt:"rpt-latn-pg",rri:"rri-latn-sb",rro:"rro-latn-zz",rrt:"rrt-latn-au",rsk:"rsk-cyrl-rs",rtc:"rtc-latn-mm",rth:"rth-latn-id",rtm:"rtm-latn-fj",rtw:"rtw-deva-in",ru:"ru-cyrl-ru",rub:"rub-latn-ug",ruc:"ruc-latn-ug",rue:"rue-cyrl-ua",ruf:"ruf-latn-tz",rug:"rug-latn-sb",rui:"rui-latn-tz",ruk:"ruk-latn-ng",ruo:"ruo-latn-hr",rup:"rup-latn-ro","rup-grek":"rup-grek-gr",ruq:"ruq-latn-gr",rut:"rut-cyrl-ru","rut-latn":"rut-latn-az",ruu:"ruu-latn-my",ruy:"ruy-latn-ng",ruz:"ruz-latn-ng",rw:"rw-latn-rw",rwa:"rwa-latn-pg",rwk:"rwk-latn-tz",rwl:"rwl-latn-tz",rwm:"rwm-latn-ug",rwo:"rwo-latn-zz",rwr:"rwr-deva-in",rxd:"rxd-latn-au",rxw:"rxw-latn-au",ryu:"ryu-kana-jp",sa:"sa-deva-in",saa:"saa-latn-td",sab:"sab-latn-pa",sac:"sac-latn-us",sad:"sad-latn-tz",sae:"sae-latn-br",saf:"saf-latn-gh",sah:"sah-cyrl-ru",saj:"saj-latn-id",sak:"sak-latn-ga",sam:"sam-samr-ps","sam-hebr":"sam-hebr-ps","sam-syrc":"sam-syrc-ps",sao:"sao-latn-id",saq:"saq-latn-ke",sar:"sar-latn-bo",sas:"sas-latn-id",sat:"sat-olck-in",sau:"sau-latn-id",sav:"sav-latn-sn",saw:"saw-latn-id",sax:"sax-latn-vu",say:"say-latn-ng",saz:"saz-saur-in",sba:"sba-latn-zz",sbb:"sbb-latn-sb",sbc:"sbc-latn-pg",sbd:"sbd-latn-bf",sbe:"sbe-latn-zz",sbg:"sbg-latn-id",sbh:"sbh-latn-pg",sbi:"sbi-latn-pg",sbj:"sbj-latn-td",sbk:"sbk-latn-tz",sbl:"sbl-latn-ph",sbm:"sbm-latn-tz",sbn:"sbn-arab-pk",sbo:"sbo-latn-my",sbp:"sbp-latn-tz",sbq:"sbq-latn-pg",sbr:"sbr-latn-id",sbs:"sbs-latn-na",sbt:"sbt-latn-id",sbu:"sbu-tibt-in","sbu-deva":"sbu-deva-in",sbv:"sbv-latn-it",sbw:"sbw-latn-ga",sbx:"sbx-latn-id",sby:"sby-latn-zm",sbz:"sbz-latn-cf",sc:"sc-latn-it",scb:"scb-latn-vn",sce:"sce-latn-cn","sce-arab":"sce-arab-cn",scf:"scf-latn-pa",scg:"scg-latn-id",sch:"sch-latn-in",sci:"sci-latn-lk",sck:"sck-deva-in",scl:"scl-arab-zz",scn:"scn-latn-it",sco:"sco-latn-gb",scp:"scp-deva-np",scs:"scs-latn-ca","scs-cans":"scs-cans-ca",sct:"sct-laoo-la",scu:"scu-takr-in",scv:"scv-latn-ng",scw:"scw-latn-ng",scx:"scx-grek-it",sd:"sd-arab-pk","sd-deva":"sd-deva-in","sd-in":"sd-deva-in","sd-khoj":"sd-khoj-in","sd-sind":"sd-sind-in",sda:"sda-latn-id",sdb:"sdb-arab-iq",sdc:"sdc-latn-it",sde:"sde-latn-ng",sdf:"sdf-arab-iq",sdg:"sdg-arab-af",sdh:"sdh-arab-ir",sdj:"sdj-latn-cg",sdk:"sdk-latn-pg",sdn:"sdn-latn-it",sdo:"sdo-latn-my",sdq:"sdq-latn-id",sds:"sds-arab-tn",sdu:"sdu-latn-id",sdx:"sdx-latn-my",se:"se-latn-no",sea:"sea-latn-my",seb:"seb-latn-ci",sec:"sec-latn-ca",sed:"sed-latn-vn",see:"see-latn-us",sef:"sef-latn-ci",seg:"seg-latn-tz",seh:"seh-latn-mz",sei:"sei-latn-mx",sej:"sej-latn-pg",sek:"sek-latn-ca","sek-cans":"sek-cans-ca",sel:"sel-cyrl-ru",sen:"sen-latn-bf",seo:"seo-latn-pg",sep:"sep-latn-bf",seq:"seq-latn-bf",ser:"ser-latn-us",ses:"ses-latn-ml",set:"set-latn-id",seu:"seu-latn-id",sev:"sev-latn-ci",sew:"sew-latn-pg",sey:"sey-latn-ec",sez:"sez-latn-mm",sfe:"sfe-latn-ph",sfm:"sfm-plrd-cn",sfw:"sfw-latn-gh",sg:"sg-latn-cf",sga:"sga-ogam-ie",sgb:"sgb-latn-ph",sgc:"sgc-latn-ke",sgd:"sgd-latn-ph",sge:"sge-latn-id",sgh:"sgh-cyrl-tj","sgh-arab":"sgh-arab-af","sgh-latn":"sgh-latn-tj",sgi:"sgi-latn-cm",sgj:"sgj-deva-in",sgm:"sgm-latn-ke",sgp:"sgp-latn-in",sgr:"sgr-arab-ir",sgs:"sgs-latn-lt",sgt:"sgt-tibt-bt",sgu:"sgu-latn-id",sgw:"sgw-ethi-zz",sgy:"sgy-arab-af",sgz:"sgz-latn-zz",sha:"sha-latn-ng",shb:"shb-latn-br",shc:"shc-latn-cd",shd:"shd-arab-pk",she:"she-latn-et",shg:"shg-latn-bw",shh:"shh-latn-us",shi:"shi-tfng-ma",shj:"shj-latn-sd",shk:"shk-latn-zz",shm:"shm-arab-ir",shn:"shn-mymr-mm",sho:"sho-latn-ng",shp:"shp-latn-pe",shq:"shq-latn-zm",shr:"shr-latn-cd",shs:"shs-latn-ca",sht:"sht-latn-us",shu:"shu-arab-zz",shv:"shv-arab-om",shw:"shw-latn-sd",shy:"shy-latn-dz","shy-arab":"shy-arab-dz","shy-tfng":"shy-tfng-dz",shz:"shz-latn-ml",si:"si-sinh-lk",sia:"sia-cyrl-ru",sib:"sib-latn-my",sid:"sid-latn-et",sie:"sie-latn-zm",sif:"sif-latn-bf",sig:"sig-latn-zz",sih:"sih-latn-nc",sii:"sii-latn-in",sij:"sij-latn-pg",sik:"sik-latn-br",sil:"sil-latn-zz",sim:"sim-latn-zz",sip:"sip-tibt-in",siq:"siq-latn-pg",sir:"sir-latn-ng",sis:"sis-latn-us",siu:"siu-latn-pg",siv:"siv-latn-pg",siw:"siw-latn-pg",six:"six-latn-pg",siy:"siy-arab-ir",siz:"siz-arab-eg",sja:"sja-latn-co",sjb:"sjb-latn-id",sjd:"sjd-cyrl-ru",sje:"sje-latn-se",sjg:"sjg-latn-td",sjl:"sjl-latn-in",sjm:"sjm-latn-ph",sjp:"sjp-deva-in","sjp-beng":"sjp-beng-in",sjr:"sjr-latn-zz",sjt:"sjt-cyrl-ru",sju:"sju-latn-se",sjw:"sjw-latn-us",sk:"sk-latn-sk",ska:"ska-latn-us",skb:"skb-thai-th",skc:"skc-latn-zz",skd:"skd-latn-us",ske:"ske-latn-vu",skf:"skf-latn-br",skg:"skg-latn-mg",skh:"skh-latn-id",ski:"ski-latn-id",skj:"skj-deva-np",skm:"skm-latn-pg",skn:"skn-latn-ph",sko:"sko-latn-id",skp:"skp-latn-my",skq:"skq-latn-bf",skr:"skr-arab-pk",sks:"sks-latn-zz",skt:"skt-latn-cd",sku:"sku-latn-vu",skv:"skv-latn-id",skw:"skw-latn-gy",skx:"skx-latn-id",sky:"sky-latn-sb",skz:"skz-latn-id",sl:"sl-latn-si",slc:"slc-latn-co",sld:"sld-latn-zz",slg:"slg-latn-id",slh:"slh-latn-us",sli:"sli-latn-pl",slj:"slj-latn-br",sll:"sll-latn-zz",slm:"slm-latn-ph",sln:"sln-latn-us",slp:"slp-latn-id",slq:"slq-arab-ir",slr:"slr-latn-cn",slu:"slu-latn-id",slw:"slw-latn-pg",slx:"slx-latn-cd",sly:"sly-latn-id",slz:"slz-latn-id",sm:"sm-latn-ws",sma:"sma-latn-se",smb:"smb-latn-pg",smc:"smc-latn-pg",smd:"smd-latn-ao",smf:"smf-latn-pg",smg:"smg-latn-pg",smh:"smh-yiii-cn",smj:"smj-latn-se",smk:"smk-latn-ph",sml:"sml-latn-ph",smn:"smn-latn-fi",smp:"smp-samr-il",smq:"smq-latn-zz",smr:"smr-latn-id",sms:"sms-latn-fi",smt:"smt-latn-in",smu:"smu-khmr-kh",smw:"smw-latn-id",smx:"smx-latn-cd",smy:"smy-arab-ir",smz:"smz-latn-pg",sn:"sn-latn-zw",snb:"snb-latn-my",snc:"snc-latn-zz",sne:"sne-latn-my",snf:"snf-latn-sn",sng:"sng-latn-cd","sng-brai":"sng-brai-cd",sni:"sni-latn-pe",snj:"snj-latn-cf",snk:"snk-latn-ml",snl:"snl-latn-ph",snm:"snm-latn-ug",snn:"snn-latn-co",sno:"sno-latn-us",snp:"snp-latn-zz",snq:"snq-latn-ga",snr:"snr-latn-pg",sns:"sns-latn-vu",snu:"snu-latn-id",snv:"snv-latn-my",snw:"snw-latn-gh",snx:"snx-latn-zz",sny:"sny-latn-zz",snz:"snz-latn-pg",so:"so-latn-so",soa:"soa-tavt-th","soa-thai":"soa-thai-th",sob:"sob-latn-id",soc:"soc-latn-cd",sod:"sod-latn-cd",soe:"soe-latn-cd",sog:"sog-sogd-uz",soi:"soi-deva-np",sok:"sok-latn-zz",sol:"sol-latn-pg",soo:"soo-latn-cd",sop:"sop-latn-cd",soq:"soq-latn-zz",sor:"sor-latn-td",sos:"sos-latn-bf",sou:"sou-thai-th",sov:"sov-latn-pw",sow:"sow-latn-pg",sox:"sox-latn-cm",soy:"soy-latn-zz",soz:"soz-latn-tz",spb:"spb-latn-id",spc:"spc-latn-ve",spd:"spd-latn-zz",spe:"spe-latn-pg",spg:"spg-latn-my",spi:"spi-latn-id",spk:"spk-latn-pg",spl:"spl-latn-zz",spm:"spm-latn-pg",spn:"spn-latn-py",spo:"spo-latn-us",spp:"spp-latn-ml",spq:"spq-latn-pe",spr:"spr-latn-id",sps:"sps-latn-zz",spt:"spt-tibt-in",spv:"spv-orya-in",sq:"sq-latn-al",sqa:"sqa-latn-ng",sqh:"sqh-latn-ng",sqm:"sqm-latn-cf",sqo:"sqo-arab-ir",sqq:"sqq-laoo-la",sqt:"sqt-arab-ye","sqt-latn":"sqt-latn-ye",squ:"squ-latn-ca",sr:"sr-cyrl-rs","sr-me":"sr-latn-me","sr-ro":"sr-latn-ro","sr-ru":"sr-latn-ru","sr-tr":"sr-latn-tr",sra:"sra-latn-pg",srb:"srb-sora-in",sre:"sre-latn-id",srf:"srf-latn-pg",srg:"srg-latn-ph",srh:"srh-arab-cn",sri:"sri-latn-co",srk:"srk-latn-my",srl:"srl-latn-id",srm:"srm-latn-sr",srn:"srn-latn-sr",sro:"sro-latn-it",srq:"srq-latn-bo",srr:"srr-latn-sn",srs:"srs-latn-ca",srt:"srt-latn-id",sru:"sru-latn-br",srv:"srv-latn-ph",srw:"srw-latn-id",srx:"srx-deva-in",sry:"sry-latn-pg",srz:"srz-arab-ir",ss:"ss-latn-za",ssb:"ssb-latn-ph",ssc:"ssc-latn-tz",ssd:"ssd-latn-zz",sse:"sse-latn-ph","sse-arab":"sse-arab-ph",ssf:"ssf-latn-tw",ssg:"ssg-latn-zz",ssh:"ssh-arab-ae",ssj:"ssj-latn-pg",ssl:"ssl-latn-gh",ssm:"ssm-latn-my",ssn:"ssn-latn-ke",sso:"sso-latn-pg",ssq:"ssq-latn-id",sss:"sss-laoo-la","sss-thai":"sss-thai-th",sst:"sst-latn-pg",ssu:"ssu-latn-pg",ssv:"ssv-latn-vu",ssx:"ssx-latn-pg",ssy:"ssy-latn-er",ssz:"ssz-latn-pg",st:"st-latn-za",sta:"sta-latn-zm",stb:"stb-latn-ph",ste:"ste-latn-id",stf:"stf-latn-pg",stg:"stg-latn-vn",sth:"sth-latn-ie",sti:"sti-latn-vn","sti-kh":"sti-latn-kh",stj:"stj-latn-bf",stk:"stk-latn-zz",stl:"stl-latn-nl",stm:"stm-latn-pg",stn:"stn-latn-sb",sto:"sto-latn-ca",stp:"stp-latn-mx",stq:"stq-latn-de",str:"str-latn-ca",sts:"sts-arab-af",stt:"stt-latn-vn",stv:"stv-ethi-et","stv-arab":"stv-arab-et",stw:"stw-latn-fm",sty:"sty-cyrl-ru",su:"su-latn-id",sua:"sua-latn-zz",sub:"sub-latn-cd",suc:"suc-latn-ph",sue:"sue-latn-zz",sug:"sug-latn-pg",sui:"sui-latn-pg",suj:"suj-latn-tz",suk:"suk-latn-tz",suo:"suo-latn-pg",suq:"suq-latn-et","suq-ethi":"suq-ethi-et",sur:"sur-latn-zz",sus:"sus-latn-gn",sut:"sut-latn-ni",suv:"suv-latn-in","suv-beng":"suv-beng-in","suv-deva":"suv-deva-in",suw:"suw-latn-tz",suy:"suy-latn-br",suz:"suz-deva-np",sv:"sv-latn-se",sva:"sva-geor-ge","sva-cyrl":"sva-cyrl-ge","sva-latn":"sva-latn-ge",svb:"svb-latn-pg",svc:"svc-latn-vc",sve:"sve-latn-id",svm:"svm-latn-it",svs:"svs-latn-sb",sw:"sw-latn-tz",swb:"swb-arab-yt",swc:"swc-latn-cd",swf:"swf-latn-cd",swg:"swg-latn-de",swi:"swi-hani-cn",swj:"swj-latn-ga",swk:"swk-latn-mw",swm:"swm-latn-pg",swo:"swo-latn-br",swp:"swp-latn-zz",swq:"swq-latn-cm",swr:"swr-latn-id",sws:"sws-latn-id",swt:"swt-latn-id",swu:"swu-latn-id",swv:"swv-deva-in",sww:"sww-latn-vu",swx:"swx-latn-br",swy:"swy-latn-td",sxb:"sxb-latn-ke",sxe:"sxe-latn-ga",sxn:"sxn-latn-id",sxr:"sxr-latn-tw",sxs:"sxs-latn-ng",sxu:"sxu-latn-de","sxu-runr":"sxu-runr-de",sxw:"sxw-latn-zz",sya:"sya-latn-id",syb:"syb-latn-ph",syc:"syc-syrc-tr",syi:"syi-latn-ga",syk:"syk-latn-ng",syl:"syl-beng-bd",sym:"sym-latn-bf",syn:"syn-syrc-ir",syo:"syo-latn-kh",syr:"syr-syrc-iq",sys:"sys-latn-td",syw:"syw-deva-np",syx:"syx-latn-ga",sza:"sza-latn-my",szb:"szb-latn-id",szc:"szc-latn-my",szd:"szd-latn-my",szg:"szg-latn-cd",szl:"szl-latn-pl",szn:"szn-latn-id",szp:"szp-latn-id",szv:"szv-latn-cm",szw:"szw-latn-id",szy:"szy-latn-tw",ta:"ta-taml-in",taa:"taa-latn-us",tab:"tab-cyrl-ru",tac:"tac-latn-mx",tad:"tad-latn-id",tae:"tae-latn-br",taf:"taf-latn-br",tag:"tag-latn-sd",taj:"taj-deva-np",tak:"tak-latn-ng",tal:"tal-latn-zz",tan:"tan-latn-zz",tao:"tao-latn-tw",tap:"tap-latn-cd",taq:"taq-latn-zz",tar:"tar-latn-mx",tas:"tas-latn-vn",tau:"tau-latn-us",tav:"tav-latn-co",taw:"taw-latn-pg",tax:"tax-latn-td",tay:"tay-latn-tw","tay-hans":"tay-hans-tw","tay-hant":"tay-hant-tw",taz:"taz-latn-sd",tba:"tba-latn-br",tbc:"tbc-latn-zz",tbd:"tbd-latn-zz",tbe:"tbe-latn-sb",tbf:"tbf-latn-zz",tbg:"tbg-latn-zz",tbh:"tbh-latn-au",tbi:"tbi-latn-sd",tbj:"tbj-latn-pg",tbk:"tbk-tagb-ph","tbk-hano":"tbk-hano-ph","tbk-latn":"tbk-latn-ph",tbl:"tbl-latn-ph",tbm:"tbm-latn-cd",tbn:"tbn-latn-co",tbo:"tbo-latn-zz",tbp:"tbp-latn-id",tbs:"tbs-latn-pg",tbt:"tbt-latn-cd",tbu:"tbu-latn-mx",tbv:"tbv-latn-pg",tbw:"tbw-latn-ph",tbx:"tbx-latn-pg",tby:"tby-latn-id",tbz:"tbz-latn-zz",tca:"tca-latn-br",tcb:"tcb-latn-us",tcc:"tcc-latn-tz",tcd:"tcd-latn-gh",tce:"tce-latn-ca",tcf:"tcf-latn-mx",tcg:"tcg-latn-id",tch:"tch-latn-tc",tci:"tci-latn-zz",tck:"tck-latn-ga",tcm:"tcm-latn-id",tcn:"tcn-tibt-np",tco:"tco-mymr-mm",tcp:"tcp-latn-mm",tcq:"tcq-latn-id",tcs:"tcs-latn-au",tcu:"tcu-latn-mx",tcw:"tcw-latn-mx",tcx:"tcx-taml-in",tcy:"tcy-knda-in",tcz:"tcz-latn-in",tda:"tda-tfng-ne","tda-arab":"tda-arab-ne","tda-latn":"tda-latn-ne",tdb:"tdb-deva-in","tdb-beng":"tdb-beng-in","tdb-kthi":"tdb-kthi-in",tdc:"tdc-latn-co",tdd:"tdd-tale-cn",tde:"tde-latn-ml",tdg:"tdg-deva-np",tdh:"tdh-deva-np",tdi:"tdi-latn-id",tdj:"tdj-latn-id",tdk:"tdk-latn-ng",tdl:"tdl-latn-ng",tdm:"tdm-latn-gy",tdn:"tdn-latn-id",tdo:"tdo-latn-ng",tdq:"tdq-latn-ng",tdr:"tdr-latn-vn",tds:"tds-latn-id",tdt:"tdt-latn-tl",tdu:"tdu-latn-my",tdv:"tdv-latn-ng",tdx:"tdx-latn-mg",tdy:"tdy-latn-ph",te:"te-telu-in",tea:"tea-latn-my",teb:"teb-latn-ec",tec:"tec-latn-ke",ted:"ted-latn-zz",tee:"tee-latn-mx",teg:"teg-latn-ga",teh:"teh-latn-ar",tei:"tei-latn-pg",tek:"tek-latn-cd",tem:"tem-latn-sl",ten:"ten-latn-co",teo:"teo-latn-ug",tep:"tep-latn-mx",teq:"teq-latn-sd",ter:"ter-latn-br",tes:"tes-java-id",tet:"tet-latn-tl",teu:"teu-latn-ug",tev:"tev-latn-id",tew:"tew-latn-us",tex:"tex-latn-ss",tey:"tey-latn-sd",tfi:"tfi-latn-zz",tfn:"tfn-latn-us",tfo:"tfo-latn-id",tfr:"tfr-latn-pa",tft:"tft-latn-id",tg:"tg-cyrl-tj","tg-arab":"tg-arab-pk","tg-pk":"tg-arab-pk",tga:"tga-latn-ke",tgb:"tgb-latn-my",tgc:"tgc-latn-zz",tgd:"tgd-latn-ng",tge:"tge-deva-np",tgf:"tgf-tibt-bt",tgh:"tgh-latn-tt",tgi:"tgi-latn-pg",tgj:"tgj-latn-in",tgn:"tgn-latn-ph",tgo:"tgo-latn-zz",tgp:"tgp-latn-vu",tgq:"tgq-latn-my",tgs:"tgs-latn-vu",tgt:"tgt-latn-ph","tgt-hano":"tgt-hano-ph","tgt-tagb":"tgt-tagb-ph",tgu:"tgu-latn-zz",tgv:"tgv-latn-br",tgw:"tgw-latn-ci",tgx:"tgx-latn-ca",tgy:"tgy-latn-ss",tgz:"tgz-latn-au",th:"th-thai-th",thd:"thd-latn-au",the:"the-deva-np",thf:"thf-deva-np",thh:"thh-latn-mx",thi:"thi-tale-la",thk:"thk-latn-ke",thl:"thl-deva-np",thm:"thm-thai-th",thp:"thp-latn-ca","thp-dupl":"thp-dupl-ca",thq:"thq-deva-np",thr:"thr-deva-np",ths:"ths-deva-np",tht:"tht-latn-ca",thu:"thu-latn-ss",thv:"thv-latn-dz","thv-arab":"thv-arab-dz","thv-tfng":"thv-tfng-dz",thy:"thy-latn-ng",thz:"thz-latn-ne","thz-tfng":"thz-tfng-ne",ti:"ti-ethi-et",tic:"tic-latn-sd",tif:"tif-latn-zz",tig:"tig-ethi-er",tih:"tih-latn-my",tii:"tii-latn-cd",tij:"tij-deva-np",tik:"tik-latn-zz",til:"til-latn-us",tim:"tim-latn-zz",tin:"tin-cyrl-ru",tio:"tio-latn-zz",tip:"tip-latn-id",tiq:"tiq-latn-bf",tis:"tis-latn-ph",tit:"tit-latn-co",tiu:"tiu-latn-ph",tiv:"tiv-latn-ng",tiw:"tiw-latn-au",tix:"tix-latn-us",tiy:"tiy-latn-ph",tja:"tja-latn-lr",tjg:"tjg-latn-id",tji:"tji-latn-cn",tjj:"tjj-latn-au",tjl:"tjl-mymr-mm",tjn:"tjn-latn-ci",tjo:"tjo-arab-dz",tjp:"tjp-latn-au",tjs:"tjs-latn-cn",tju:"tju-latn-au",tjw:"tjw-latn-au",tk:"tk-latn-tm",tka:"tka-latn-br",tkb:"tkb-deva-in",tkd:"tkd-latn-tl",tke:"tke-latn-mz",tkf:"tkf-latn-br",tkg:"tkg-latn-mg",tkl:"tkl-latn-tk",tkp:"tkp-latn-sb",tkq:"tkq-latn-ng",tkr:"tkr-latn-az",tks:"tks-arab-ir",tkt:"tkt-deva-np",tku:"tku-latn-mx",tkv:"tkv-latn-pg",tkw:"tkw-latn-sb",tkx:"tkx-latn-id",tkz:"tkz-latn-vn",tl:"tl-latn-ph",tla:"tla-latn-mx",tlb:"tlb-latn-id",tlc:"tlc-latn-mx",tld:"tld-latn-id",tlf:"tlf-latn-zz",tlg:"tlg-latn-id",tli:"tli-latn-us","tli-cyrl":"tli-cyrl-us",tlj:"tlj-latn-ug",tlk:"tlk-latn-id",tll:"tll-latn-cd",tlm:"tlm-latn-vu",tln:"tln-latn-id",tlp:"tlp-latn-mx",tlq:"tlq-latn-mm",tlr:"tlr-latn-sb",tls:"tls-latn-vu",tlt:"tlt-latn-id",tlu:"tlu-latn-id",tlv:"tlv-latn-id",tlx:"tlx-latn-zz",tly:"tly-latn-az",tma:"tma-latn-td",tmb:"tmb-latn-vu",tmc:"tmc-latn-td",tmd:"tmd-latn-pg",tme:"tme-latn-br",tmf:"tmf-latn-py",tmg:"tmg-latn-id",tmh:"tmh-latn-ne",tmi:"tmi-latn-vu",tmj:"tmj-latn-id",tmk:"tmk-deva-np",tml:"tml-latn-id",tmm:"tmm-latn-vn",tmn:"tmn-latn-id",tmo:"tmo-latn-my",tmq:"tmq-latn-pg",tmr:"tmr-syrc-il",tmt:"tmt-latn-vu",tmu:"tmu-latn-id",tmv:"tmv-latn-cd",tmw:"tmw-latn-my",tmy:"tmy-latn-zz",tmz:"tmz-latn-ve",tn:"tn-latn-za",tna:"tna-latn-bo",tnb:"tnb-latn-co",tnc:"tnc-latn-co",tnd:"tnd-latn-co",tng:"tng-latn-td",tnh:"tnh-latn-zz",tni:"tni-latn-id",tnk:"tnk-latn-vu",tnl:"tnl-latn-vu",tnm:"tnm-latn-id",tnn:"tnn-latn-vu",tno:"tno-latn-bo",tnp:"tnp-latn-vu",tnq:"tnq-latn-pr",tnr:"tnr-latn-sn",tns:"tns-latn-pg",tnt:"tnt-latn-id",tnv:"tnv-cakm-bd",tnw:"tnw-latn-id",tnx:"tnx-latn-sb",tny:"tny-latn-tz",to:"to-latn-to",tob:"tob-latn-ar",toc:"toc-latn-mx",tod:"tod-latn-gn",tof:"tof-latn-zz",tog:"tog-latn-mw",toh:"toh-latn-mz",toi:"toi-latn-zm",toj:"toj-latn-mx",tok:"tok-latn-001",tol:"tol-latn-us",tom:"tom-latn-id",too:"too-latn-mx",top:"top-latn-mx",toq:"toq-latn-zz",tor:"tor-latn-cd",tos:"tos-latn-mx",tou:"tou-latn-vn",tov:"tov-arab-ir",tow:"tow-latn-us",tox:"tox-latn-pw",toy:"toy-latn-id",toz:"toz-latn-cm",tpa:"tpa-latn-pg",tpc:"tpc-latn-mx",tpe:"tpe-latn-bd","tpe-beng":"tpe-beng-bd",tpf:"tpf-latn-id",tpg:"tpg-latn-id",tpi:"tpi-latn-pg",tpj:"tpj-latn-py",tpk:"tpk-latn-br",tpl:"tpl-latn-mx",tpm:"tpm-latn-zz",tpn:"tpn-latn-br",tpp:"tpp-latn-mx",tpr:"tpr-latn-br",tpt:"tpt-latn-mx",tpu:"tpu-khmr-kh",tpv:"tpv-latn-mp",tpx:"tpx-latn-mx",tpy:"tpy-latn-br",tpz:"tpz-latn-zz",tqb:"tqb-latn-br",tql:"tql-latn-vu",tqm:"tqm-latn-pg",tqn:"tqn-latn-us",tqo:"tqo-latn-zz",tqp:"tqp-latn-pg",tqt:"tqt-latn-mx",tqu:"tqu-latn-sb",tqw:"tqw-latn-us",tr:"tr-latn-tr",tra:"tra-arab-af",trb:"trb-latn-pg",trc:"trc-latn-mx",tre:"tre-latn-id",trf:"trf-latn-tt",trg:"trg-hebr-il",trh:"trh-latn-pg",tri:"tri-latn-sr",trj:"trj-latn-td",trl:"trl-latn-gb",trm:"trm-arab-af",trn:"trn-latn-bo",tro:"tro-latn-in",trp:"trp-latn-in","trp-beng":"trp-beng-in",trq:"trq-latn-mx",trr:"trr-latn-pe",trs:"trs-latn-mx",trt:"trt-latn-id",tru:"tru-latn-tr",trv:"trv-latn-tw",trw:"trw-arab-pk",trx:"trx-latn-my",try:"try-latn-in",trz:"trz-latn-br",ts:"ts-latn-za",tsa:"tsa-latn-cg",tsb:"tsb-latn-et",tsc:"tsc-latn-mz",tsd:"tsd-grek-gr",tsf:"tsf-deva-np",tsg:"tsg-latn-ph",tsh:"tsh-latn-cm",tsi:"tsi-latn-ca",tsj:"tsj-tibt-bt",tsl:"tsl-latn-vn",tsp:"tsp-latn-bf",tsr:"tsr-latn-vu",tst:"tst-latn-ml",tsu:"tsu-latn-tw",tsv:"tsv-latn-ga",tsw:"tsw-latn-zz",tsx:"tsx-latn-pg",tsz:"tsz-latn-mx",tt:"tt-cyrl-ru",ttb:"ttb-latn-ng",ttc:"ttc-latn-gt",ttd:"ttd-latn-zz",tte:"tte-latn-zz",ttf:"ttf-latn-cm",tth:"tth-laoo-la",tti:"tti-latn-id",ttj:"ttj-latn-ug",ttk:"ttk-latn-co",ttl:"ttl-latn-zm",ttm:"ttm-latn-ca",ttn:"ttn-latn-id",tto:"tto-laoo-la",ttp:"ttp-latn-id",ttr:"ttr-latn-zz",tts:"tts-thai-th",ttt:"ttt-latn-az",ttu:"ttu-latn-pg",ttv:"ttv-latn-pg",ttw:"ttw-latn-my",tty:"tty-latn-id",tua:"tua-latn-pg",tub:"tub-latn-us",tuc:"tuc-latn-pg",tud:"tud-latn-br",tue:"tue-latn-co",tuf:"tuf-latn-co",tug:"tug-latn-td",tuh:"tuh-latn-zz",tui:"tui-latn-cm",tuj:"tuj-latn-id",tul:"tul-latn-zz",tum:"tum-latn-mw",tun:"tun-latn-us",tuo:"tuo-latn-br",tuq:"tuq-latn-zz",tus:"tus-latn-ca",tuu:"tuu-latn-us",tuv:"tuv-latn-ke",tux:"tux-latn-br",tuy:"tuy-latn-ke",tuz:"tuz-latn-bf",tva:"tva-latn-sb",tvd:"tvd-latn-zz",tve:"tve-latn-id",tvk:"tvk-latn-vu",tvl:"tvl-latn-tv",tvm:"tvm-latn-id",tvn:"tvn-mymr-mm",tvo:"tvo-latn-id",tvs:"tvs-latn-ke",tvt:"tvt-latn-in",tvu:"tvu-latn-zz",tvw:"tvw-latn-id",tvx:"tvx-latn-tw",twa:"twa-latn-us",twb:"twb-latn-ph",twd:"twd-latn-nl",twe:"twe-latn-id",twf:"twf-latn-us",twg:"twg-latn-id",twh:"twh-latn-zz",twl:"twl-latn-mz",twm:"twm-deva-in",twn:"twn-latn-cm",two:"two-latn-bw",twp:"twp-latn-pg",twq:"twq-latn-ne",twr:"twr-latn-mx",twt:"twt-latn-br",twu:"twu-latn-id",tww:"tww-latn-pg",twx:"twx-latn-mz",twy:"twy-latn-id",txa:"txa-latn-my",txe:"txe-latn-id",txg:"txg-tang-cn",txi:"txi-latn-br",txj:"txj-latn-ng",txm:"txm-latn-id",txn:"txn-latn-id",txo:"txo-toto-in",txq:"txq-latn-id",txs:"txs-latn-id",txt:"txt-latn-id",txu:"txu-latn-br",txx:"txx-latn-my",txy:"txy-latn-mg",ty:"ty-latn-pf",tya:"tya-latn-zz",tye:"tye-latn-ng",tyh:"tyh-latn-vn",tyi:"tyi-latn-cg",tyj:"tyj-latn-vn",tyl:"tyl-latn-vn",tyn:"tyn-latn-id",typ:"typ-latn-au",tyr:"tyr-tavt-vn",tys:"tys-latn-vn",tyt:"tyt-latn-vn","tyt-tavt":"tyt-tavt-vn",tyu:"tyu-latn-bw",tyv:"tyv-cyrl-ru",tyx:"tyx-latn-cg",tyy:"tyy-latn-ng",tyz:"tyz-latn-vn",tzh:"tzh-latn-mx",tzj:"tzj-latn-gt",tzl:"tzl-latn-001",tzm:"tzm-latn-ma",tzn:"tzn-latn-id",tzo:"tzo-latn-mx",tzx:"tzx-latn-pg",uam:"uam-latn-br",uar:"uar-latn-pg",uba:"uba-latn-ng",ubi:"ubi-latn-td",ubl:"ubl-latn-ph",ubr:"ubr-latn-pg",ubu:"ubu-latn-zz",uda:"uda-latn-ng",ude:"ude-cyrl-ru",udg:"udg-mlym-in",udi:"udi-aghb-ru",udj:"udj-latn-id",udl:"udl-latn-cm",udm:"udm-cyrl-ru",udu:"udu-latn-sd",ues:"ues-latn-id",ufi:"ufi-latn-pg",ug:"ug-arab-cn","ug-cyrl":"ug-cyrl-kz","ug-kz":"ug-cyrl-kz","ug-mn":"ug-cyrl-mn",uga:"uga-ugar-sy",ugb:"ugb-latn-au",uge:"uge-latn-sb",ugh:"ugh-cyrl-ru",ugo:"ugo-thai-th",uha:"uha-latn-ng",uhn:"uhn-latn-id",uis:"uis-latn-pg",uiv:"uiv-latn-cm",uji:"uji-latn-ng",uk:"uk-cyrl-ua",uka:"uka-latn-id",ukg:"ukg-latn-pg",ukh:"ukh-latn-cf",uki:"uki-orya-in",ukk:"ukk-latn-mm",ukp:"ukp-latn-ng",ukq:"ukq-latn-ng",uku:"uku-latn-ng",ukv:"ukv-latn-ss",ukw:"ukw-latn-ng",uky:"uky-latn-au",ula:"ula-latn-ng",ulb:"ulb-latn-ng",ulc:"ulc-cyrl-ru",ule:"ule-latn-ar",ulf:"ulf-latn-id",uli:"uli-latn-fm",ulk:"ulk-latn-au",ulm:"ulm-latn-id",uln:"uln-latn-pg",ulu:"ulu-latn-id",ulw:"ulw-latn-ni",uma:"uma-latn-us",umb:"umb-latn-ao",umd:"umd-latn-au",umg:"umg-latn-au",umi:"umi-latn-my",umm:"umm-latn-ng",umn:"umn-latn-mm",umo:"umo-latn-br",ump:"ump-latn-au",umr:"umr-latn-au",ums:"ums-latn-id",una:"una-latn-pg",und:"en-latn-us","und-002":"en-latn-ng","und-003":"en-latn-us","und-005":"pt-latn-br","und-009":"en-latn-au","und-011":"en-latn-ng","und-013":"es-latn-mx","und-014":"sw-latn-tz","und-015":"ar-arab-eg","und-017":"sw-latn-cd","und-018":"en-latn-za","und-019":"en-latn-us","und-021":"en-latn-us","und-029":"es-latn-cu","und-030":"zh-hans-cn","und-034":"hi-deva-in","und-035":"id-latn-id","und-039":"it-latn-it","und-053":"en-latn-au","und-054":"en-latn-pg","und-057":"en-latn-gu","und-061":"sm-latn-ws","und-142":"zh-hans-cn","und-143":"uz-latn-uz","und-145":"ar-arab-sa","und-150":"ru-cyrl-ru","und-151":"ru-cyrl-ru","und-154":"en-latn-gb","und-155":"de-latn-de","und-202":"en-latn-ng","und-419":"es-latn-419","und-ad":"ca-latn-ad","und-adlm":"ff-adlm-gn","und-ae":"ar-arab-ae","und-af":"fa-arab-af","und-aghb":"udi-aghb-ru","und-ahom":"aho-ahom-in","und-al":"sq-latn-al","und-am":"hy-armn-am","und-ao":"pt-latn-ao","und-aq":"und-latn-aq","und-ar":"es-latn-ar","und-arab":"ar-arab-eg","und-arab-cc":"ms-arab-cc","und-arab-cn":"ug-arab-cn","und-arab-gb":"ur-arab-gb","und-arab-id":"ms-arab-id","und-arab-in":"ur-arab-in","und-arab-kh":"cja-arab-kh","und-arab-mm":"rhg-arab-mm","und-arab-mn":"kk-arab-mn","und-arab-mu":"ur-arab-mu","und-arab-ng":"ha-arab-ng","und-arab-pk":"ur-arab-pk","und-arab-tg":"apd-arab-tg","und-arab-th":"mfa-arab-th","und-arab-tj":"fa-arab-tj","und-arab-tr":"apc-arab-tr","und-arab-yt":"swb-arab-yt","und-armi":"arc-armi-ir","und-armn":"hy-armn-am","und-as":"sm-latn-as","und-at":"de-latn-at","und-avst":"ae-avst-ir","und-aw":"nl-latn-aw","und-ax":"sv-latn-ax","und-az":"az-latn-az","und-ba":"bs-latn-ba","und-bali":"ban-bali-id","und-bamu":"bax-bamu-cm","und-bass":"bsq-bass-lr","und-batk":"bbc-batk-id","und-bd":"bn-beng-bd","und-be":"nl-latn-be","und-beng":"bn-beng-bd","und-bf":"fr-latn-bf","und-bg":"bg-cyrl-bg","und-bh":"ar-arab-bh","und-bhks":"sa-bhks-in","und-bi":"rn-latn-bi","und-bj":"fr-latn-bj","und-bl":"fr-latn-bl","und-bn":"ms-latn-bn","und-bo":"es-latn-bo","und-bopo":"zh-bopo-tw","und-bq":"pap-latn-bq","und-br":"pt-latn-br","und-brah":"pka-brah-in","und-brai":"fr-brai-fr","und-bt":"dz-tibt-bt","und-bugi":"bug-bugi-id","und-buhd":"bku-buhd-ph","und-bv":"und-latn-bv","und-by":"be-cyrl-by","und-cakm":"ccp-cakm-bd","und-cans":"iu-cans-ca","und-cari":"xcr-cari-tr","und-cd":"sw-latn-cd","und-cf":"fr-latn-cf","und-cg":"fr-latn-cg","und-ch":"de-latn-ch","und-cham":"cjm-cham-vn","und-cher":"chr-cher-us","und-chrs":"xco-chrs-uz","und-ci":"fr-latn-ci","und-cl":"es-latn-cl","und-cm":"fr-latn-cm","und-cn":"zh-hans-cn","und-co":"es-latn-co","und-copt":"cop-copt-eg","und-cp":"und-latn-cp","und-cpmn":"und-cpmn-cy","und-cpmn-cy":"und-cpmn-cy","und-cprt":"grc-cprt-cy","und-cr":"es-latn-cr","und-cu":"es-latn-cu","und-cv":"pt-latn-cv","und-cw":"pap-latn-cw","und-cy":"el-grek-cy","und-cyrl":"ru-cyrl-ru","und-cyrl-al":"mk-cyrl-al","und-cyrl-ba":"sr-cyrl-ba","und-cyrl-ge":"ab-cyrl-ge","und-cyrl-gr":"mk-cyrl-gr","und-cyrl-md":"uk-cyrl-md","und-cyrl-ro":"bg-cyrl-ro","und-cyrl-sk":"uk-cyrl-sk","und-cyrl-tr":"kbd-cyrl-tr","und-cyrl-xk":"sr-cyrl-xk","und-cz":"cs-latn-cz","und-de":"de-latn-de","und-deva":"hi-deva-in","und-deva-bt":"ne-deva-bt","und-deva-fj":"hif-deva-fj","und-deva-mu":"bho-deva-mu","und-deva-pk":"btv-deva-pk","und-diak":"dv-diak-mv","und-dj":"aa-latn-dj","und-dk":"da-latn-dk","und-do":"es-latn-do","und-dogr":"doi-dogr-in","und-dupl":"fr-dupl-fr","und-dz":"ar-arab-dz","und-ea":"es-latn-ea","und-ec":"es-latn-ec","und-ee":"et-latn-ee","und-eg":"ar-arab-eg","und-egyp":"egy-egyp-eg","und-eh":"ar-arab-eh","und-elba":"sq-elba-al","und-elym":"arc-elym-ir","und-er":"ti-ethi-er","und-es":"es-latn-es","und-et":"am-ethi-et","und-ethi":"am-ethi-et","und-eu":"en-latn-ie","und-ez":"de-latn-ez","und-fi":"fi-latn-fi","und-fo":"fo-latn-fo","und-fr":"fr-latn-fr","und-ga":"fr-latn-ga","und-ge":"ka-geor-ge","und-geor":"ka-geor-ge","und-gf":"fr-latn-gf","und-gh":"ak-latn-gh","und-gl":"kl-latn-gl","und-glag":"cu-glag-bg","und-gn":"fr-latn-gn","und-gong":"wsg-gong-in","und-gonm":"esg-gonm-in","und-goth":"got-goth-ua","und-gp":"fr-latn-gp","und-gq":"es-latn-gq","und-gr":"el-grek-gr","und-gran":"sa-gran-in","und-grek":"el-grek-gr","und-grek-tr":"bgx-grek-tr","und-gs":"und-latn-gs","und-gt":"es-latn-gt","und-gujr":"gu-gujr-in","und-guru":"pa-guru-in","und-gw":"pt-latn-gw","und-hanb":"zh-hanb-tw","und-hang":"ko-hang-kr","und-hani":"zh-hani-cn","und-hano":"hnn-hano-ph","und-hans":"zh-hans-cn","und-hant":"zh-hant-tw","und-hant-ca":"yue-hant-ca","und-hebr":"he-hebr-il","und-hebr-se":"yi-hebr-se","und-hebr-ua":"yi-hebr-ua","und-hebr-us":"yi-hebr-us","und-hira":"ja-hira-jp","und-hk":"zh-hant-hk","und-hluw":"hlu-hluw-tr","und-hm":"und-latn-hm","und-hmng":"hnj-hmng-la","und-hmnp":"hnj-hmnp-us","und-hn":"es-latn-hn","und-hr":"hr-latn-hr","und-ht":"ht-latn-ht","und-hu":"hu-latn-hu","und-hung":"hu-hung-hu","und-ic":"es-latn-ic","und-id":"id-latn-id","und-il":"he-hebr-il","und-in":"hi-deva-in","und-iq":"ar-arab-iq","und-ir":"fa-arab-ir","und-is":"is-latn-is","und-it":"it-latn-it","und-ital":"ett-ital-it","und-jamo":"ko-jamo-kr","und-java":"jv-java-id","und-jo":"ar-arab-jo","und-jp":"ja-jpan-jp","und-jpan":"ja-jpan-jp","und-kali":"eky-kali-mm","und-kana":"ja-kana-jp","und-kawi":"kaw-kawi-id","und-ke":"sw-latn-ke","und-kg":"ky-cyrl-kg","und-kh":"km-khmr-kh","und-khar":"pra-khar-pk","und-khmr":"km-khmr-kh","und-khoj":"sd-khoj-in","und-kits":"zkt-kits-cn","und-km":"ar-arab-km","und-knda":"kn-knda-in","und-kore":"ko-kore-kr","und-kp":"ko-kore-kp","und-kr":"ko-kore-kr","und-kthi":"bho-kthi-in","und-kw":"ar-arab-kw","und-kz":"ru-cyrl-kz","und-la":"lo-laoo-la","und-lana":"nod-lana-th","und-laoo":"lo-laoo-la","und-laoo-au":"hnj-laoo-au","und-laoo-cn":"hnj-laoo-cn","und-laoo-fr":"hnj-laoo-fr","und-laoo-gf":"hnj-laoo-gf","und-laoo-mm":"hnj-laoo-mm","und-laoo-sr":"hnj-laoo-sr","und-laoo-th":"hnj-laoo-th","und-laoo-us":"hnj-laoo-us","und-laoo-vn":"hnj-laoo-vn","und-latn-af":"tk-latn-af","und-latn-am":"ku-latn-am","und-latn-cn":"za-latn-cn","und-latn-cy":"tr-latn-cy","und-latn-dz":"fr-latn-dz","und-latn-et":"en-latn-et","und-latn-ge":"ku-latn-ge","und-latn-ir":"tk-latn-ir","und-latn-km":"fr-latn-km","und-latn-ma":"fr-latn-ma","und-latn-mk":"sq-latn-mk","und-latn-mm":"kac-latn-mm","und-latn-mo":"pt-latn-mo","und-latn-mr":"fr-latn-mr","und-latn-ru":"krl-latn-ru","und-latn-sy":"fr-latn-sy","und-latn-tn":"fr-latn-tn","und-latn-tw":"trv-latn-tw","und-latn-ua":"pl-latn-ua","und-lb":"ar-arab-lb","und-lepc":"lep-lepc-in","und-li":"de-latn-li","und-limb":"lif-limb-in","und-lina":"lab-lina-gr","und-linb":"grc-linb-gr","und-lisu":"lis-lisu-cn","und-lk":"si-sinh-lk","und-ls":"st-latn-ls","und-lt":"lt-latn-lt","und-lu":"fr-latn-lu","und-lv":"lv-latn-lv","und-ly":"ar-arab-ly","und-lyci":"xlc-lyci-tr","und-lydi":"xld-lydi-tr","und-ma":"ar-arab-ma","und-mahj":"hi-mahj-in","und-maka":"mak-maka-id","und-mand":"myz-mand-ir","und-mani":"xmn-mani-cn","und-marc":"bo-marc-cn","und-mc":"fr-latn-mc","und-md":"ro-latn-md","und-me":"sr-latn-me","und-medf":"dmf-medf-ng","und-mend":"men-mend-sl","und-merc":"xmr-merc-sd","und-mero":"xmr-mero-sd","und-mf":"fr-latn-mf","und-mg":"mg-latn-mg","und-mk":"mk-cyrl-mk","und-ml":"bm-latn-ml","und-mlym":"ml-mlym-in","und-mm":"my-mymr-mm","und-mn":"mn-cyrl-mn","und-mo":"zh-hant-mo","und-modi":"mr-modi-in","und-mong":"mn-mong-cn","und-mq":"fr-latn-mq","und-mr":"ar-arab-mr","und-mroo":"mro-mroo-bd","und-mt":"mt-latn-mt","und-mtei":"mni-mtei-in","und-mu":"mfe-latn-mu","und-mult":"skr-mult-pk","und-mv":"dv-thaa-mv","und-mx":"es-latn-mx","und-my":"ms-latn-my","und-mymr":"my-mymr-mm","und-mymr-in":"kht-mymr-in","und-mymr-th":"mnw-mymr-th","und-mz":"pt-latn-mz","und-na":"af-latn-na","und-nagm":"unr-nagm-in","und-nand":"sa-nand-in","und-narb":"xna-narb-sa","und-nbat":"arc-nbat-jo","und-nc":"fr-latn-nc","und-ne":"ha-latn-ne","und-newa":"new-newa-np","und-ni":"es-latn-ni","und-nkoo":"man-nkoo-gn","und-nl":"nl-latn-nl","und-no":"nb-latn-no","und-np":"ne-deva-np","und-nshu":"zhx-nshu-cn","und-ogam":"sga-ogam-ie","und-olck":"sat-olck-in","und-om":"ar-arab-om","und-orkh":"otk-orkh-mn","und-orya":"or-orya-in","und-osge":"osa-osge-us","und-osma":"so-osma-so","und-ougr":"oui-ougr-143","und-pa":"es-latn-pa","und-palm":"arc-palm-sy","und-pauc":"ctd-pauc-mm","und-pe":"es-latn-pe","und-perm":"kv-perm-ru","und-pf":"fr-latn-pf","und-pg":"tpi-latn-pg","und-ph":"fil-latn-ph","und-phag":"lzh-phag-cn","und-phli":"pal-phli-ir","und-phlp":"pal-phlp-cn","und-phnx":"phn-phnx-lb","und-pk":"ur-arab-pk","und-pl":"pl-latn-pl","und-plrd":"hmd-plrd-cn","und-pm":"fr-latn-pm","und-pr":"es-latn-pr","und-prti":"xpr-prti-ir","und-ps":"ar-arab-ps","und-pt":"pt-latn-pt","und-pw":"pau-latn-pw","und-py":"gn-latn-py","und-qa":"ar-arab-qa","und-qo":"en-latn-dg","und-re":"fr-latn-re","und-rjng":"rej-rjng-id","und-ro":"ro-latn-ro","und-rohg":"rhg-rohg-mm","und-rs":"sr-cyrl-rs","und-ru":"ru-cyrl-ru","und-runr":"non-runr-se","und-rw":"rw-latn-rw","und-sa":"ar-arab-sa","und-samr":"smp-samr-il","und-sarb":"xsa-sarb-ye","und-saur":"saz-saur-in","und-sc":"fr-latn-sc","und-sd":"ar-arab-sd","und-se":"sv-latn-se","und-sgnw":"ase-sgnw-us","und-shaw":"en-shaw-gb","und-shrd":"sa-shrd-in","und-si":"sl-latn-si","und-sidd":"sa-sidd-in","und-sind":"sd-sind-in","und-sinh":"si-sinh-lk","und-sj":"nb-latn-sj","und-sk":"sk-latn-sk","und-sm":"it-latn-sm","und-sn":"fr-latn-sn","und-so":"so-latn-so","und-sogd":"sog-sogd-uz","und-sogo":"sog-sogo-uz","und-sora":"srb-sora-in","und-soyo":"cmg-soyo-mn","und-sr":"nl-latn-sr","und-st":"pt-latn-st","und-sund":"su-sund-id","und-sv":"es-latn-sv","und-sy":"ar-arab-sy","und-sylo":"syl-sylo-bd","und-syrc":"syr-syrc-iq","und-tagb":"tbw-tagb-ph","und-takr":"doi-takr-in","und-tale":"tdd-tale-cn","und-talu":"khb-talu-cn","und-taml":"ta-taml-in","und-tang":"txg-tang-cn","und-tavt":"blt-tavt-vn","und-td":"fr-latn-td","und-telu":"te-telu-in","und-tf":"fr-latn-tf","und-tfng":"zgh-tfng-ma","und-tg":"fr-latn-tg","und-tglg":"fil-tglg-ph","und-th":"th-thai-th","und-thaa":"dv-thaa-mv","und-thai":"th-thai-th","und-thai-cn":"lcp-thai-cn","und-thai-kh":"kdt-thai-kh","und-thai-la":"kdt-thai-la","und-tibt":"bo-tibt-cn","und-tirh":"mai-tirh-in","und-tj":"tg-cyrl-tj","und-tk":"tkl-latn-tk","und-tl":"pt-latn-tl","und-tm":"tk-latn-tm","und-tn":"ar-arab-tn","und-tnsa":"nst-tnsa-in","und-to":"to-latn-to","und-toto":"txo-toto-in","und-tr":"tr-latn-tr","und-tv":"tvl-latn-tv","und-tw":"zh-hant-tw","und-tz":"sw-latn-tz","und-ua":"uk-cyrl-ua","und-ug":"sw-latn-ug","und-ugar":"uga-ugar-sy","und-uy":"es-latn-uy","und-uz":"uz-latn-uz","und-va":"it-latn-va","und-vaii":"vai-vaii-lr","und-ve":"es-latn-ve","und-vith":"sq-vith-al","und-vn":"vi-latn-vn","und-vu":"bi-latn-vu","und-wara":"hoc-wara-in","und-wcho":"nnp-wcho-in","und-wf":"fr-latn-wf","und-ws":"sm-latn-ws","und-xk":"sq-latn-xk","und-xpeo":"peo-xpeo-ir","und-xsux":"akk-xsux-iq","und-ye":"ar-arab-ye","und-yezi":"ku-yezi-ge","und-yiii":"ii-yiii-cn","und-yt":"fr-latn-yt","und-zanb":"cmg-zanb-mn","und-zw":"sn-latn-zw",une:"une-latn-ng",ung:"ung-latn-au",uni:"uni-latn-pg",unk:"unk-latn-br",unm:"unm-latn-us",unn:"unn-latn-au",unr:"unr-beng-in","unr-deva":"unr-deva-np","unr-np":"unr-deva-np",unu:"unu-latn-pg",unx:"unx-beng-in",unz:"unz-latn-id",uok:"uok-latn-zz",uon:"uon-latn-tw",upi:"upi-latn-pg",upv:"upv-latn-vu",ur:"ur-arab-pk",ura:"ura-latn-pe",urb:"urb-latn-br",urc:"urc-latn-au",ure:"ure-latn-bo",urf:"urf-latn-au",urg:"urg-latn-pg",urh:"urh-latn-ng",uri:"uri-latn-zz",urk:"urk-thai-th",urm:"urm-latn-pg",urn:"urn-latn-id",uro:"uro-latn-pg",urp:"urp-latn-br",urr:"urr-latn-vu",urt:"urt-latn-zz",uru:"uru-latn-br",urv:"urv-latn-pg",urw:"urw-latn-zz",urx:"urx-latn-pg",ury:"ury-latn-id",urz:"urz-latn-br",usa:"usa-latn-zz",ush:"ush-arab-pk",usi:"usi-latn-bd","usi-beng":"usi-beng-bd",usk:"usk-latn-cm",usp:"usp-latn-gt",uss:"uss-latn-ng",usu:"usu-latn-pg",uta:"uta-latn-ng",ute:"ute-latn-us",uth:"uth-latn-zz",utp:"utp-latn-sb",utr:"utr-latn-zz",utu:"utu-latn-pg",uum:"uum-grek-ge","uum-cyrl":"uum-cyrl-ge",uur:"uur-latn-vu",uve:"uve-latn-nc",uvh:"uvh-latn-zz",uvl:"uvl-latn-zz",uwa:"uwa-latn-au",uya:"uya-latn-ng",uz:"uz-latn-uz","uz-af":"uz-arab-af","uz-arab":"uz-arab-af","uz-cn":"uz-cyrl-cn",uzs:"uzs-arab-af",vaa:"vaa-taml-in",vae:"vae-latn-cf",vaf:"vaf-arab-ir",vag:"vag-latn-zz",vah:"vah-deva-in",vai:"vai-vaii-lr",vaj:"vaj-latn-na",val:"val-latn-pg",vam:"vam-latn-pg",van:"van-latn-zz",vao:"vao-latn-vu",vap:"vap-latn-in",var:"var-latn-mx",vas:"vas-deva-in","vas-gujr":"vas-gujr-in",vau:"vau-latn-cd",vav:"vav-deva-in","vav-gujr":"vav-gujr-in",vay:"vay-deva-np",vbb:"vbb-latn-id",vbk:"vbk-latn-ph",ve:"ve-latn-za",vec:"vec-latn-it",vem:"vem-latn-ng",veo:"veo-latn-us",vep:"vep-latn-ru",ver:"ver-latn-ng",vgr:"vgr-arab-pk",vi:"vi-latn-vn",vic:"vic-latn-sx",vid:"vid-latn-tz",vif:"vif-latn-cg",vig:"vig-latn-bf",vil:"vil-latn-ar",vin:"vin-latn-tz",vit:"vit-latn-ng",viv:"viv-latn-zz",vka:"vka-latn-au",vkj:"vkj-latn-td",vkk:"vkk-latn-id",vkl:"vkl-latn-id",vkm:"vkm-latn-br",vkn:"vkn-latn-ng",vko:"vko-latn-id",vkp:"vkp-latn-in","vkp-deva":"vkp-deva-in",vkt:"vkt-latn-id",vku:"vku-latn-au",vkz:"vkz-latn-ng",vlp:"vlp-latn-vu",vls:"vls-latn-be",vma:"vma-latn-au",vmb:"vmb-latn-au",vmc:"vmc-latn-mx",vmd:"vmd-knda-in",vme:"vme-latn-id",vmf:"vmf-latn-de",vmg:"vmg-latn-pg",vmh:"vmh-arab-ir",vmi:"vmi-latn-au",vmj:"vmj-latn-mx",vmk:"vmk-latn-mz",vml:"vml-latn-au",vmm:"vmm-latn-mx",vmp:"vmp-latn-mx",vmq:"vmq-latn-mx",vmr:"vmr-latn-mz",vms:"vms-latn-id",vmu:"vmu-latn-au",vmw:"vmw-latn-mz",vmx:"vmx-latn-mx",vmy:"vmy-latn-mx",vmz:"vmz-latn-mx",vnk:"vnk-latn-sb",vnm:"vnm-latn-vu",vnp:"vnp-latn-vu",vo:"vo-latn-001",vor:"vor-latn-ng",vot:"vot-latn-ru",vra:"vra-latn-vu",vro:"vro-latn-ee",vrs:"vrs-latn-sb",vrt:"vrt-latn-vu",vto:"vto-latn-id",vum:"vum-latn-ga",vun:"vun-latn-tz",vut:"vut-latn-zz",vwa:"vwa-latn-cn","vwa-mymr":"vwa-mymr-cn",wa:"wa-latn-be",waa:"waa-latn-us",wab:"wab-latn-pg",wac:"wac-latn-us",wad:"wad-latn-id",wae:"wae-latn-ch",waf:"waf-latn-br",wag:"wag-latn-pg",wah:"wah-latn-id",wai:"wai-latn-id",waj:"waj-latn-zz",wal:"wal-ethi-et",wam:"wam-latn-us",wan:"wan-latn-zz",wap:"wap-latn-gy",waq:"waq-latn-au",war:"war-latn-ph",was:"was-latn-us",wat:"wat-latn-pg",wau:"wau-latn-br",wav:"wav-latn-ng",waw:"waw-latn-br",wax:"wax-latn-pg",way:"way-latn-sr",waz:"waz-latn-pg",wba:"wba-latn-ve",wbb:"wbb-latn-id",wbe:"wbe-latn-id",wbf:"wbf-latn-bf",wbh:"wbh-latn-tz",wbi:"wbi-latn-tz",wbj:"wbj-latn-tz",wbk:"wbk-arab-af",wbl:"wbl-latn-pk","wbl-arab":"wbl-arab-af","wbl-cyrl":"wbl-cyrl-tj",wbm:"wbm-latn-cn",wbp:"wbp-latn-au",wbq:"wbq-telu-in",wbr:"wbr-deva-in",wbt:"wbt-latn-au",wbv:"wbv-latn-au",wbw:"wbw-latn-id",wca:"wca-latn-br",wci:"wci-latn-zz",wdd:"wdd-latn-ga",wdg:"wdg-latn-pg",wdj:"wdj-latn-au",wdk:"wdk-latn-au",wdt:"wdt-latn-ca",wdu:"wdu-latn-au",wdy:"wdy-latn-au",wec:"wec-latn-ci",wed:"wed-latn-pg",weg:"weg-latn-au",weh:"weh-latn-cm",wei:"wei-latn-pg",wem:"wem-latn-bj",weo:"weo-latn-id",wep:"wep-latn-de",wer:"wer-latn-zz",wes:"wes-latn-cm",wet:"wet-latn-id",weu:"weu-latn-mm",wew:"wew-latn-id",wfg:"wfg-latn-id",wga:"wga-latn-au",wgb:"wgb-latn-pg",wgg:"wgg-latn-au",wgi:"wgi-latn-zz",wgo:"wgo-latn-id",wgu:"wgu-latn-au",wgy:"wgy-latn-au",wha:"wha-latn-id",whg:"whg-latn-zz",whk:"whk-latn-id",whu:"whu-latn-id",wib:"wib-latn-zz",wic:"wic-latn-us",wie:"wie-latn-au",wif:"wif-latn-au",wig:"wig-latn-au",wih:"wih-latn-au",wii:"wii-latn-pg",wij:"wij-latn-au",wik:"wik-latn-au",wil:"wil-latn-au",wim:"wim-latn-au",win:"win-latn-us",wir:"wir-latn-br",wiu:"wiu-latn-zz",wiv:"wiv-latn-zz",wiy:"wiy-latn-us",wja:"wja-latn-zz",wji:"wji-latn-zz",wka:"wka-latn-tz",wkd:"wkd-latn-id",wkr:"wkr-latn-au",wkw:"wkw-latn-au",wky:"wky-latn-au",wla:"wla-latn-pg",wlg:"wlg-latn-au",wlh:"wlh-latn-tl",wli:"wli-latn-id",wlm:"wlm-latn-gb",wlo:"wlo-arab-id",wlr:"wlr-latn-vu",wls:"wls-latn-wf",wlu:"wlu-latn-au",wlv:"wlv-latn-ar",wlw:"wlw-latn-id",wlx:"wlx-latn-gh",wma:"wma-latn-ng",wmb:"wmb-latn-au",wmc:"wmc-latn-pg",wmd:"wmd-latn-br",wme:"wme-deva-np",wmh:"wmh-latn-tl",wmi:"wmi-latn-au",wmm:"wmm-latn-id",wmn:"wmn-latn-nc",wmo:"wmo-latn-zz",wms:"wms-latn-id",wmt:"wmt-latn-au",wmw:"wmw-latn-mz","wmw-arab":"wmw-arab-mz",wmx:"wmx-latn-pg",wnb:"wnb-latn-pg",wnc:"wnc-latn-zz",wnd:"wnd-latn-au",wne:"wne-arab-pk",wng:"wng-latn-id",wni:"wni-arab-km",wnk:"wnk-latn-id",wnm:"wnm-latn-au",wnn:"wnn-latn-au",wno:"wno-latn-id",wnp:"wnp-latn-pg",wnu:"wnu-latn-zz",wnw:"wnw-latn-us",wny:"wny-latn-au",wo:"wo-latn-sn",woa:"woa-latn-au",wob:"wob-latn-zz",woc:"woc-latn-pg",wod:"wod-latn-id",woe:"woe-latn-fm",wof:"wof-latn-gm","wof-arab":"wof-arab-gm",wog:"wog-latn-pg",woi:"woi-latn-id",wok:"wok-latn-cm",wom:"wom-latn-ng",won:"won-latn-cd",woo:"woo-latn-id",wor:"wor-latn-id",wos:"wos-latn-zz",wow:"wow-latn-id",wpc:"wpc-latn-ve",wrb:"wrb-latn-au",wrg:"wrg-latn-au",wrh:"wrh-latn-au",wri:"wri-latn-au",wrk:"wrk-latn-au",wrl:"wrl-latn-au",wrm:"wrm-latn-au",wro:"wro-latn-au",wrp:"wrp-latn-id",wrr:"wrr-latn-au",wrs:"wrs-latn-zz",wru:"wru-latn-id",wrv:"wrv-latn-pg",wrw:"wrw-latn-au",wrx:"wrx-latn-id",wrz:"wrz-latn-au",wsa:"wsa-latn-id",wsg:"wsg-gong-in",wsi:"wsi-latn-vu",wsk:"wsk-latn-zz",wsr:"wsr-latn-pg",wss:"wss-latn-gh",wsu:"wsu-latn-br",wsv:"wsv-arab-af",wtf:"wtf-latn-pg",wth:"wth-latn-au",wti:"wti-latn-et",wtk:"wtk-latn-pg",wtm:"wtm-deva-in",wtw:"wtw-latn-id","wtw-bugi":"wtw-bugi-id",wua:"wua-latn-au",wub:"wub-latn-au",wud:"wud-latn-tg",wul:"wul-latn-id",wum:"wum-latn-ga",wun:"wun-latn-tz",wur:"wur-latn-au",wut:"wut-latn-pg",wuu:"wuu-hans-cn",wuv:"wuv-latn-zz",wux:"wux-latn-au",wuy:"wuy-latn-id",wwa:"wwa-latn-zz",wwb:"wwb-latn-au",wwo:"wwo-latn-vu",wwr:"wwr-latn-au",www:"www-latn-cm",wxw:"wxw-latn-au",wyb:"wyb-latn-au",wyi:"wyi-latn-au",wym:"wym-latn-pl",wyn:"wyn-latn-us",wyr:"wyr-latn-br",wyy:"wyy-latn-fj",xaa:"xaa-latn-es",xab:"xab-latn-ng",xai:"xai-latn-br",xaj:"xaj-latn-br",xak:"xak-latn-ve",xal:"xal-cyrl-ru",xam:"xam-latn-za",xan:"xan-ethi-et",xao:"xao-latn-vn",xar:"xar-latn-pg",xas:"xas-cyrl-ru",xat:"xat-latn-br",xau:"xau-latn-id",xav:"xav-latn-br",xaw:"xaw-latn-us",xay:"xay-latn-id",xbb:"xbb-latn-au",xbd:"xbd-latn-au",xbe:"xbe-latn-au",xbg:"xbg-latn-au",xbi:"xbi-latn-zz",xbj:"xbj-latn-au",xbm:"xbm-latn-fr",xbn:"xbn-latn-my",xbp:"xbp-latn-au",xbr:"xbr-latn-id",xbw:"xbw-latn-br",xby:"xby-latn-au",xch:"xch-latn-us",xco:"xco-chrs-uz",xcr:"xcr-cari-tr",xda:"xda-latn-au",xdk:"xdk-latn-au",xdo:"xdo-latn-ao",xdq:"xdq-cyrl-ru",xdy:"xdy-latn-id",xed:"xed-latn-cm",xeg:"xeg-latn-za",xem:"xem-latn-id",xer:"xer-latn-br",xes:"xes-latn-zz",xet:"xet-latn-br",xeu:"xeu-latn-pg",xgb:"xgb-latn-ci",xgd:"xgd-latn-au",xgg:"xgg-latn-au",xgi:"xgi-latn-au",xgm:"xgm-latn-au",xgu:"xgu-latn-au",xgw:"xgw-latn-au",xh:"xh-latn-za",xhe:"xhe-arab-pk",xhm:"xhm-khmr-kh",xhv:"xhv-latn-vn",xii:"xii-latn-za",xin:"xin-latn-gt",xir:"xir-latn-br",xis:"xis-orya-in",xiy:"xiy-latn-br",xjb:"xjb-latn-au",xjt:"xjt-latn-au",xka:"xka-arab-pk",xkb:"xkb-latn-bj",xkc:"xkc-arab-ir",xkd:"xkd-latn-id",xke:"xke-latn-id",xkg:"xkg-latn-ml",xkj:"xkj-arab-ir",xkl:"xkl-latn-id",xkn:"xkn-latn-id",xkp:"xkp-arab-ir",xkq:"xkq-latn-id",xkr:"xkr-latn-br",xks:"xks-latn-id",xkt:"xkt-latn-gh",xku:"xku-latn-cg",xkv:"xkv-latn-bw",xkw:"xkw-latn-id",xkx:"xkx-latn-pg",xky:"xky-latn-my",xkz:"xkz-latn-bt",xla:"xla-latn-zz",xlc:"xlc-lyci-tr",xld:"xld-lydi-tr",xly:"xly-elym-ir",xma:"xma-latn-so",xmb:"xmb-latn-cm",xmc:"xmc-latn-mz",xmd:"xmd-latn-cm",xmf:"xmf-geor-ge",xmg:"xmg-latn-cm",xmh:"xmh-latn-au",xmj:"xmj-latn-cm",xmm:"xmm-latn-id",xmn:"xmn-mani-cn",xmo:"xmo-latn-br",xmp:"xmp-latn-au",xmq:"xmq-latn-au",xmr:"xmr-merc-sd",xmt:"xmt-latn-id",xmu:"xmu-latn-au",xmv:"xmv-latn-mg",xmw:"xmw-latn-mg",xmx:"xmx-latn-id",xmy:"xmy-latn-au",xmz:"xmz-latn-id",xna:"xna-narb-sa",xnb:"xnb-latn-tw",xni:"xni-latn-au",xnj:"xnj-latn-tz",xnk:"xnk-latn-au",xnm:"xnm-latn-au",xnn:"xnn-latn-ph",xnq:"xnq-latn-mz",xnr:"xnr-deva-in",xnt:"xnt-latn-us",xnu:"xnu-latn-au",xny:"xny-latn-au",xnz:"xnz-latn-eg","xnz-arab":"xnz-arab-eg",xoc:"xoc-latn-ng",xod:"xod-latn-id",xog:"xog-latn-ug",xoi:"xoi-latn-pg",xok:"xok-latn-br",xom:"xom-latn-sd","xom-ethi":"xom-ethi-et",xon:"xon-latn-zz",xoo:"xoo-latn-br",xop:"xop-latn-pg",xor:"xor-latn-br",xow:"xow-latn-pg",xpa:"xpa-latn-au",xpb:"xpb-latn-au",xpd:"xpd-latn-au",xpf:"xpf-latn-au",xpg:"xpg-grek-tr",xph:"xph-latn-au",xpi:"xpi-ogam-gb",xpj:"xpj-latn-au",xpk:"xpk-latn-br",xpl:"xpl-latn-au",xpm:"xpm-cyrl-ru",xpn:"xpn-latn-br",xpo:"xpo-latn-mx",xpq:"xpq-latn-us",xpr:"xpr-prti-ir",xpt:"xpt-latn-au",xpv:"xpv-latn-au",xpw:"xpw-latn-au",xpx:"xpx-latn-au",xpz:"xpz-latn-au",xra:"xra-latn-br",xrb:"xrb-latn-zz",xrd:"xrd-latn-au",xre:"xre-latn-br",xrg:"xrg-latn-au",xri:"xri-latn-br",xrm:"xrm-cyrl-ru",xrn:"xrn-cyrl-ru",xrr:"xrr-latn-it",xru:"xru-latn-au",xrw:"xrw-latn-pg",xsa:"xsa-sarb-ye",xsb:"xsb-latn-ph",xse:"xse-latn-id",xsh:"xsh-latn-ng",xsi:"xsi-latn-zz",xsm:"xsm-latn-zz",xsn:"xsn-latn-ng",xsp:"xsp-latn-pg",xsq:"xsq-latn-mz",xsr:"xsr-deva-np",xss:"xss-cyrl-ru",xsu:"xsu-latn-ve",xsy:"xsy-latn-tw",xta:"xta-latn-mx",xtb:"xtb-latn-mx",xtc:"xtc-latn-sd",xtd:"xtd-latn-mx",xte:"xte-latn-id",xth:"xth-latn-au",xti:"xti-latn-mx",xtj:"xtj-latn-mx",xtl:"xtl-latn-mx",xtm:"xtm-latn-mx",xtn:"xtn-latn-mx",xtp:"xtp-latn-mx",xts:"xts-latn-mx",xtt:"xtt-latn-mx",xtu:"xtu-latn-mx",xtv:"xtv-latn-au",xtw:"xtw-latn-br",xty:"xty-latn-mx",xub:"xub-taml-in","xub-knda":"xub-knda-in","xub-mlym":"xub-mlym-in",xud:"xud-latn-au",xuj:"xuj-taml-in",xul:"xul-latn-au",xum:"xum-latn-it","xum-ital":"xum-ital-it",xun:"xun-latn-au",xuo:"xuo-latn-td",xut:"xut-latn-au",xuu:"xuu-latn-na",xve:"xve-ital-it",xvi:"xvi-arab-af",xvn:"xvn-latn-es",xvo:"xvo-latn-it",xvs:"xvs-latn-it",xwa:"xwa-latn-br",xwd:"xwd-latn-au",xwe:"xwe-latn-zz",xwj:"xwj-latn-au",xwk:"xwk-latn-au",xwl:"xwl-latn-bj",xwo:"xwo-cyrl-ru",xwr:"xwr-latn-id",xwt:"xwt-latn-au",xww:"xww-latn-au",xxb:"xxb-latn-gh",xxk:"xxk-latn-id",xxm:"xxm-latn-au",xxr:"xxr-latn-br",xxt:"xxt-latn-id",xya:"xya-latn-au",xyb:"xyb-latn-au",xyj:"xyj-latn-au",xyk:"xyk-latn-au",xyl:"xyl-latn-br",xyt:"xyt-latn-au",xyy:"xyy-latn-au",xzh:"xzh-marc-cn",xzp:"xzp-latn-mx",yaa:"yaa-latn-pe",yab:"yab-latn-br",yac:"yac-latn-id",yad:"yad-latn-pe",yae:"yae-latn-ve",yaf:"yaf-latn-cd",yag:"yag-latn-cl",yai:"yai-cyrl-tj",yaj:"yaj-latn-cf",yak:"yak-latn-us",yal:"yal-latn-gn","yal-arab":"yal-arab-gn",yam:"yam-latn-zz",yan:"yan-latn-ni",yao:"yao-latn-mz",yap:"yap-latn-fm",yaq:"yaq-latn-mx",yar:"yar-latn-ve",yas:"yas-latn-zz",yat:"yat-latn-zz",yau:"yau-latn-ve",yav:"yav-latn-cm",yaw:"yaw-latn-br",yax:"yax-latn-ao",yay:"yay-latn-zz",yaz:"yaz-latn-zz",yba:"yba-latn-zz",ybb:"ybb-latn-cm",ybe:"ybe-latn-cn","ybe-ougr":"ybe-ougr-cn",ybh:"ybh-deva-np",ybi:"ybi-deva-np",ybj:"ybj-latn-ng",ybl:"ybl-latn-ng",ybm:"ybm-latn-pg",ybn:"ybn-latn-br",ybo:"ybo-latn-pg",ybx:"ybx-latn-pg",yby:"yby-latn-zz",ycl:"ycl-latn-cn",ycn:"ycn-latn-co",yda:"yda-latn-au",yde:"yde-latn-pg",ydg:"ydg-arab-pk",ydk:"ydk-latn-pg",yea:"yea-mlym-in","yea-knda":"yea-knda-in",yec:"yec-latn-de",yee:"yee-latn-pg",yei:"yei-latn-cm",yej:"yej-grek-il",yel:"yel-latn-cd",yer:"yer-latn-zz",yes:"yes-latn-ng",yet:"yet-latn-id",yeu:"yeu-telu-in",yev:"yev-latn-pg",yey:"yey-latn-bw",yga:"yga-latn-au",ygi:"ygi-latn-au",ygl:"ygl-latn-pg",ygm:"ygm-latn-pg",ygp:"ygp-plrd-cn",ygr:"ygr-latn-zz",ygu:"ygu-latn-au",ygw:"ygw-latn-zz",yhd:"yhd-hebr-il",yi:"yi-hebr-001",yia:"yia-latn-au",yig:"yig-yiii-cn",yih:"yih-hebr-de",yii:"yii-latn-au",yij:"yij-latn-au",yil:"yil-latn-au",yim:"yim-latn-in",yir:"yir-latn-id",yis:"yis-latn-pg",yiv:"yiv-yiii-cn",yka:"yka-latn-ph","yka-arab":"yka-arab-ph",ykg:"ykg-cyrl-ru",yki:"yki-latn-id",ykk:"ykk-latn-pg",ykm:"ykm-latn-pg",yko:"yko-latn-zz",ykr:"ykr-latn-pg",yky:"yky-latn-cf",yla:"yla-latn-pg",ylb:"ylb-latn-pg",yle:"yle-latn-zz",ylg:"ylg-latn-zz",yli:"yli-latn-id",yll:"yll-latn-zz",ylr:"ylr-latn-au",ylu:"ylu-latn-pg",yly:"yly-latn-nc",ymb:"ymb-latn-pg",yme:"yme-latn-pe",ymg:"ymg-latn-cd",ymk:"ymk-latn-mz","ymk-arab":"ymk-arab-mz",yml:"yml-latn-zz",ymm:"ymm-latn-so",ymn:"ymn-latn-id",ymo:"ymo-latn-pg",ymp:"ymp-latn-pg",yna:"yna-plrd-cn",ynd:"ynd-latn-au",yng:"yng-latn-cd",ynk:"ynk-cyrl-ru",ynl:"ynl-latn-pg",ynq:"ynq-latn-ng",yns:"yns-latn-cd",ynu:"ynu-latn-co",yo:"yo-latn-ng",yob:"yob-latn-pg",yog:"yog-latn-ph",yoi:"yoi-jpan-jp",yok:"yok-latn-us",yol:"yol-latn-gb",yom:"yom-latn-cd",yon:"yon-latn-zz",yot:"yot-latn-ng",yoy:"yoy-thai-th",yra:"yra-latn-pg",yrb:"yrb-latn-zz",yre:"yre-latn-zz",yrk:"yrk-cyrl-ru",yrl:"yrl-latn-br",yrm:"yrm-latn-au",yro:"yro-latn-br",yrs:"yrs-latn-id",yrw:"yrw-latn-pg",yry:"yry-latn-au",ysd:"ysd-yiii-cn",ysn:"ysn-yiii-cn",ysp:"ysp-yiii-cn",ysr:"ysr-cyrl-ru",yss:"yss-latn-zz",ysy:"ysy-plrd-cn",ytw:"ytw-latn-pg",yty:"yty-latn-au",yua:"yua-latn-mx",yub:"yub-latn-au",yuc:"yuc-latn-us",yud:"yud-hebr-il",yue:"yue-hant-hk","yue-cn":"yue-hans-cn","yue-hans":"yue-hans-cn",yuf:"yuf-latn-us",yug:"yug-cyrl-ru",yui:"yui-latn-co",yuj:"yuj-latn-zz",yul:"yul-latn-cf",yum:"yum-latn-us",yun:"yun-latn-ng",yup:"yup-latn-co",yuq:"yuq-latn-bo",yur:"yur-latn-us",yut:"yut-latn-zz",yuw:"yuw-latn-zz",yux:"yux-cyrl-ru",yuz:"yuz-latn-bo",yva:"yva-latn-id",yvt:"yvt-latn-ve",ywa:"ywa-latn-pg",ywg:"ywg-latn-au",ywn:"ywn-latn-br",ywq:"ywq-plrd-cn","ywq-yiii":"ywq-yiii-cn",ywr:"ywr-latn-au",ywu:"ywu-plrd-cn","ywu-yiii":"ywu-yiii-cn",yww:"yww-latn-au",yxa:"yxa-latn-au",yxg:"yxg-latn-au",yxl:"yxl-latn-au",yxm:"yxm-latn-au",yxu:"yxu-latn-au",yxy:"yxy-latn-au",yyr:"yyr-latn-au",yyu:"yyu-latn-pg",za:"za-latn-cn",zaa:"zaa-latn-mx",zab:"zab-latn-mx",zac:"zac-latn-mx",zad:"zad-latn-mx",zae:"zae-latn-mx",zaf:"zaf-latn-mx",zag:"zag-latn-sd",zah:"zah-latn-ng",zaj:"zaj-latn-tz",zak:"zak-latn-tz",zam:"zam-latn-mx",zao:"zao-latn-mx",zap:"zap-latn-mx",zaq:"zaq-latn-mx",zar:"zar-latn-mx",zas:"zas-latn-mx",zat:"zat-latn-mx",zau:"zau-tibt-in","zau-arab":"zau-arab-in",zav:"zav-latn-mx",zaw:"zaw-latn-mx",zax:"zax-latn-mx",zay:"zay-latn-et","zay-ethi":"zay-ethi-et",zaz:"zaz-latn-ng",zba:"zba-arab-001",zbc:"zbc-latn-my",zbe:"zbe-latn-my",zbt:"zbt-latn-id",zbu:"zbu-latn-ng",zbw:"zbw-latn-my",zca:"zca-latn-mx",zch:"zch-hani-cn",zdj:"zdj-arab-km",zea:"zea-latn-nl",zeg:"zeg-latn-pg",zeh:"zeh-hani-cn",zen:"zen-tfng-mr","zen-arab":"zen-arab-mr",zga:"zga-latn-tz",zgb:"zgb-hani-cn",zgh:"zgh-tfng-ma",zgm:"zgm-hani-cn",zgn:"zgn-hani-cn",zgr:"zgr-latn-pg",zh:"zh-hans-cn","zh-au":"zh-hant-au","zh-bn":"zh-hant-bn","zh-bopo":"zh-bopo-tw","zh-gb":"zh-hant-gb","zh-gf":"zh-hant-gf","zh-hanb":"zh-hanb-tw","zh-hant":"zh-hant-tw","zh-hk":"zh-hant-hk","zh-id":"zh-hant-id","zh-mo":"zh-hant-mo","zh-pa":"zh-hant-pa","zh-pf":"zh-hant-pf","zh-ph":"zh-hant-ph","zh-sr":"zh-hant-sr","zh-th":"zh-hant-th","zh-tw":"zh-hant-tw","zh-us":"zh-hant-us","zh-vn":"zh-hant-vn",zhd:"zhd-hani-cn","zhd-latn":"zhd-latn-vn",zhi:"zhi-latn-ng",zhn:"zhn-latn-cn","zhn-hani":"zhn-hani-cn",zhw:"zhw-latn-cm",zhx:"zhx-nshu-cn",zia:"zia-latn-zz",zik:"zik-latn-pg",zil:"zil-latn-gn",zim:"zim-latn-td",zin:"zin-latn-tz",ziw:"ziw-latn-tz",ziz:"ziz-latn-ng",zka:"zka-latn-id",zkb:"zkb-cyrl-ru",zkd:"zkd-latn-mm",zko:"zko-cyrl-ru",zkp:"zkp-latn-br",zkt:"zkt-kits-cn",zku:"zku-latn-au",zkz:"zkz-cyrl-ru",zla:"zla-latn-cd",zlj:"zlj-hani-cn","zlj-latn":"zlj-latn-cn",zlm:"zlm-latn-tg",zln:"zln-hani-cn",zlq:"zlq-hani-cn",zma:"zma-latn-au",zmb:"zmb-latn-cd",zmc:"zmc-latn-au",zmd:"zmd-latn-au",zme:"zme-latn-au",zmf:"zmf-latn-cd",zmg:"zmg-latn-au",zmh:"zmh-latn-pg",zmi:"zmi-latn-my",zmj:"zmj-latn-au",zmk:"zmk-latn-au",zml:"zml-latn-au",zmm:"zmm-latn-au",zmn:"zmn-latn-ga",zmo:"zmo-latn-sd",zmp:"zmp-latn-cd",zmq:"zmq-latn-cd",zmr:"zmr-latn-au",zms:"zms-latn-cd",zmt:"zmt-latn-au",zmu:"zmu-latn-au",zmv:"zmv-latn-au",zmw:"zmw-latn-cd",zmx:"zmx-latn-cg",zmy:"zmy-latn-au",zmz:"zmz-latn-cd",zna:"zna-latn-td",zne:"zne-latn-zz",zng:"zng-latn-vn",znk:"znk-latn-au",zns:"zns-latn-ng",zoc:"zoc-latn-mx",zoh:"zoh-latn-mx",zom:"zom-latn-in",zoo:"zoo-latn-mx",zoq:"zoq-latn-mx",zor:"zor-latn-mx",zos:"zos-latn-mx",zpa:"zpa-latn-mx",zpb:"zpb-latn-mx",zpc:"zpc-latn-mx",zpd:"zpd-latn-mx",zpe:"zpe-latn-mx",zpf:"zpf-latn-mx",zpg:"zpg-latn-mx",zph:"zph-latn-mx",zpi:"zpi-latn-mx",zpj:"zpj-latn-mx",zpk:"zpk-latn-mx",zpl:"zpl-latn-mx",zpm:"zpm-latn-mx",zpn:"zpn-latn-mx",zpo:"zpo-latn-mx",zpp:"zpp-latn-mx",zpq:"zpq-latn-mx",zpr:"zpr-latn-mx",zps:"zps-latn-mx",zpt:"zpt-latn-mx",zpu:"zpu-latn-mx",zpv:"zpv-latn-mx",zpw:"zpw-latn-mx",zpx:"zpx-latn-mx",zpy:"zpy-latn-mx",zpz:"zpz-latn-mx",zqe:"zqe-hani-cn","zqe-latn":"zqe-latn-cn",zrn:"zrn-latn-td",zro:"zro-latn-ec",zrp:"zrp-hebr-fr",zrs:"zrs-latn-id",zsa:"zsa-latn-pg",zsr:"zsr-latn-mx",zsu:"zsu-latn-pg",zte:"zte-latn-mx",ztg:"ztg-latn-mx",ztl:"ztl-latn-mx",ztm:"ztm-latn-mx",ztn:"ztn-latn-mx",ztp:"ztp-latn-mx",ztq:"ztq-latn-mx",zts:"zts-latn-mx",ztt:"ztt-latn-mx",ztu:"ztu-latn-mx",ztx:"ztx-latn-mx",zty:"zty-latn-mx",zu:"zu-latn-za",zua:"zua-latn-ng",zuh:"zuh-latn-pg",zum:"zum-arab-om",zun:"zun-latn-us",zuy:"zuy-latn-cm",zyg:"zyg-hani-cn",zyj:"zyj-latn-cn","zyj-hani":"zyj-hani-cn",zyn:"zyn-hani-cn",zyp:"zyp-latn-mm",zza:"zza-latn-tr",zzj:"zzj-hani-cn"},pc={}.hasOwnProperty;function ad(D){const{language:C,script:R,region:P}=D;let F;var z,Q;return R&&P&&(F=ea[Ll({language:C,script:R,region:P})])?(D.script=void 0,D.region=void 0):R&&(F=ea[Ll({language:C,script:R})])?D.script=void 0:P&&(F=ea[Ll({language:C,region:P})])?D.region=void 0:C&&(F=ea[C]),F&&(D.language=void 0,z=D,Q=Qa(F),z.language||(z.language=Q.language),z.script||(z.script=Q.script),z.region||(z.region=Q.region),Q.variants&&z.variants.push(...Q.variants)),Ll(D)}function Kf(D,C){const R={},P=Qa(String(D||"").toLowerCase(),R),F=Ll(P);if(!F)return F;let z=-1;for(;++z<Ds.length;){let Q=Ds[z].from;Q.slice(0,4)==="und-"&&P.language&&(Q=P.language+Q.slice(3)),$f(F,Q).length>0&&ll(P,Q,Ds[z].to)}for(z=-1;++z<yo.length;)vo(P,yo[z].from.field,yo[z].from.value)&&As(P,yo[z].to.field,yo[z].to.value);if(function(Q){ad(Q);const{language:ne,script:B,region:oe}=Q;if(!ne)return Q;const X=Ll({language:ne,script:B,region:oe});X===ad(Qa(ne))?(Q.script=void 0,Q.region=void 0):oe&&X===ad(Qa(ne+"-"+oe))?Q.script=void 0:B&&X===ad(Qa(ne+"-"+B))&&(Q.region=void 0)}(P),P.variants.sort(),P.extensions.sort(Uu),R.warning){let Q;for(Q in ps)if(pc.call(ps,Q)){const ne=ps[Q],B=P[Q];if(B&&pc.call(ne,B)){const oe=ne[B];R.warning("Deprecated "+Q+" `"+B+"`, expected one of `"+oe.join("`, `")+"`",-1,7)}}}return P.script&&(P.script=P.script.charAt(0).toUpperCase()+P.script.slice(1)),P.region&&(P.region=P.region.toUpperCase()),Ll(P)}function ll(D,C,R){const P=Qa(C),F=Qa(R),z=[],Q=P.language;let ne;for(ne in P)if(pc.call(P,ne)){const B=P[ne];B&&vo(D,ne,B)&&z.push(ne)}for(ne in F)if(pc.call(F,ne)){const B=F[ne];Q&&B&&(z.includes(ne)||!D[ne])&&As(D,ne,ne==="language"&&B==="und"?Q:B)}}function vo(D,C,R){let P,F=!1;if(R){const z=D[C];if(P=z,Array.isArray(z)){P=[];let Q=-1;for(;++Q<z.length;){const ne=z[Q];R.includes(ne)?F=!0:P.push(ne)}}else z===R&&(P=null,F=!0);D[C]=P}return F}function As(D,C,R){const P=D[C];if(Array.isArray(P)){const F=Array.isArray(R)?R:[R];let z=-1;for(;++z<F.length;){const Q=F[z];P.includes(Q)||P.push(Q)}}else D[C]=R}function Uu(D,C){return D.singleton>C.singleton?1:D.singleton<C.singleton?-1:0}const Pl={0:void 0,1:1,2:2,3:3,4:4,5:5,6:5,7:7,8:2,9:3,10:4,11:6,12:7,13:22,14:7,15:10,16:9,17:11,18:13,19:11,20:13};function Xh(D){return D==0?0:D.toString(2).match(/1/g).length}function Yf(D,C){let R,P=parseInt("0x"+D,16),F=P&C[0],z=P&C[1];return R=Xh(F)+2*Xh(z),R}function $d(){const D=this.context,C=(0,K.default)(D).getInstance();let R,P,F,z,Q,ne,B,oe,X,q,$;function re(de){if(!(de&&de.currentRepresentation&&de.currentRepresentation.mediaInfo&&de.currentRepresentation.mediaInfo.type))return;const we=de.currentRepresentation.mediaInfo.type;B[we]=de.currentRepresentation}function ve(de,we){return de&&F[we]&&F[we][de]?F[we][de].list:[]}function Se(de,we){return de&&F[we]&&F[we][de]?F[we][de].current:null}function ke(de){let we=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!de||!de.streamInfo)return;const qe=de.type,tt=de.streamInfo.id,mt=Se(qe,tt);if(F[tt]&&F[tt][qe]&&(F[tt][qe].current=de,F[tt][qe].current&&(qe!==j.default.TEXT&&!Le(de,mt)||qe===j.default.TEXT&&de.isFragmented)&&C.trigger(x.default.CURRENT_TRACK_CHANGED,{oldMediaInfo:mt,newMediaInfo:de,switchMode:z.get().streaming.trackSwitchMode[qe],options:we},{streamId:tt}),!we.hasOwnProperty("noSettingsSave")||!we.noSettingsSave)){let Tt=function(Vt){const Jt={lang:Vt.lang,viewpoint:Vt.viewpoint,roles:Vt.roles,accessibility:Vt.accessibility,audioChannelConfiguration:Vt.audioChannelConfiguration,codec:Vt.codec};return Jt.lang||Jt.viewpoint||Jt.role&&Jt.role.length>0||Jt.accessibility&&Jt.accessibility.length>0||Jt.audioChannelConfiguration&&Jt.audioChannelConfiguration.length>0?Jt:null}(de);if(!Tt||!F[tt][qe].storeLastSettings)return;Tt.roles&&(Tt.role=Tt.roles[0],delete Tt.roles),Tt.accessibility&&(Tt.accessibility=Tt.accessibility[0]),Tt.audioChannelConfiguration&&(Tt.audioChannelConfiguration=Tt.audioChannelConfiguration[0]),ne[qe]=Tt,$.setSavedMediaSettings(qe,Tt)}}function Ie(de,we){de&&we&&(Q[de]=we)}function Ce(de){return de?Q[de]:null}function Le(de,we){if(!de&&!we)return!0;if(!de||!we)return!1;const qe=de.id===we.id,tt=JSON.stringify(de.viewpoint)===JSON.stringify(we.viewpoint),mt=de.lang===we.lang,Tt=de.codec===we.codec,Vt=JSON.stringify(de.roles)===JSON.stringify(we.roles),Jt=JSON.stringify(de.accessibility)===JSON.stringify(we.accessibility),yn=JSON.stringify(de.audioChannelConfiguration)===JSON.stringify(we.audioChannelConfiguration);return qe&&Tt&&tt&&mt&&Vt&&Jt&&yn}function Ye(){F={},ne={},B={},Q={audio:null,video:null,text:null},C.off(xe.default.REPRESENTATION_SWITCH,re,R)}function Te(de,we,qe){let tt=[];return de.forEach(function(mt){we(qe,mt)&&tt.push(mt)}),tt.length!==0?tt:(P.info("Filter-Function ("+we.name+") resulted in no tracks; setting ignored"),de)}function ie(de,we){try{return!de.lang||de.lang instanceof RegExp?we.lang.match(de.lang):we.lang!==""&&$f(we.lang,Kf(de.lang)).length>0}catch{return!1}}function le(de,we){return de.index===void 0||de.index===null||we.index===de.index}function he(de,we){return de.id===void 0||de.id===null||we.id===de.id}function Pe(de,we){return!de.viewpoint||!!we.viewpoint.filter(function(qe){return ye(qe,de.viewpoint)})[0]}function Ge(de,we){let qe=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return!de.role||!!we.roles.filter(function(tt){return ye(tt,de.role)})[0]||we.type===j.default.AUDIO&&qe}function ze(de,we){let qe;return qe=de.accessibility?!!we.accessibility.filter(function(tt){return ye(tt,de.accessibility)})[0]:!we.accessibility.length,qe}function Ve(de,we){return!de.audioChannelConfiguration||!!we.audioChannelConfiguration.filter(function(qe){return ye(qe,de.audioChannelConfiguration)})[0]}function nt(de,we){return!de.codec||de.codec===we.codec}function rt(de){let we=0,qe=[];return de.forEach(tt=>{isNaN(tt.selectionPriority)||(tt.selectionPriority>we?(we=tt.selectionPriority,qe=[tt]):tt.selectionPriority===we&&qe.push(tt))}),qe}function fe(de){let we,qe=0,tt=[];return de.forEach(function(mt){we=Math.max.apply(Math,mt.bitrateList.map(function(Tt){return Tt.bandwidth})),we>qe?(qe=we,tt=[mt]):we===qe&&tt.push(mt)}),tt}function me(de){return de[0]&&de[0].type===j.default.VIDEO?function(we){let qe,tt=1/0,mt=[];return we.forEach(function(Tt){qe=Tt.bitrateList.reduce(function(Jt,yn){const Cn=Math.max(1,yn.width*yn.height);return Jt+yn.bandwidth/Cn},0)/Tt.bitrateList.length,qe<tt?(tt=qe,mt=[Tt]):qe===tt&&mt.push(Tt)}),mt}(de):de[0]&&de[0].type===j.default.AUDIO?function(we){let qe=1/0,tt=[];return we.forEach(function(mt){let Tt=mt.audioChannelConfiguration.reduce(function(Jt,yn){return Jt+(function(Cn){let Kn;if(!Cn||!Cn.schemeIdUri||!Cn.value)return;const Zn=Cn.schemeIdUri,gi=Cn.value;return Zn==="urn:mpeg:dash:23003:3:audio_channel_configuration:2011"||Zn==="urn:mpeg:mpegB:cicp:ChannelConfiguration"?Kn=Pl[gi]:Zn==="tag:dolby.com,2014:dash:audio_channel_configuration:2011"?Kn=function(_n){if(_n.length===4)return Yf(_n,[63880,1648])}(gi):Zn==="tag:dolby.com,2015:dash:audio_channel_configuration:2015"?Kn=function(_n){if(_n.length===6)return _n==="800000"?24:Yf(_n,[56834,205245])}(gi):Zn==="tag:dts.com,2014:dash:audio_channel_configuration:2012"?Kn=parseInt(gi):Zn==="tag:dts.com,2018:uhd:audio_channel_configuration"&&(Kn=function(_n){if(!(_n.length>8))return Yf(_n,[4294901727,0])}(gi)),Kn}(yn)||0)},0)/mt.audioChannelConfiguration.length;mt.hasOwnProperty("supplementalProperties")&&mt.supplementalProperties.some(Jt=>Jt.schemeIdUri==="tag:dolby.com,2018:dash:EC3_ExtensionType:2018"&&Jt.value==="JOC")&&(Tt=16),Tt||(Tt=1);let Vt=mt.bitrateList.reduce(function(Jt,yn){return Jt+yn.bandwidth/Tt},0)/mt.bitrateList.length;Vt<qe?(qe=Vt,tt=[mt]):Vt===qe&&tt.push(mt)}),tt}(de):de}function Ue(de){let we,qe=0,tt=[];return de.forEach(function(mt){we=mt.representationCount,we>qe?(qe=we,tt=[mt]):we===qe&&tt.push(mt)}),tt}function je(de,we){if(de===j.default.TEXT)return function(mt){if(!mt||mt.length===0)return null;const Tt=mt.filter(Vt=>!(Vt&&Vt.roles&&Vt.roles.length>0)||Vt.roles.every(Jt=>Jt.schemeIdUri!==j.default.DASH_ROLE_SCHEME_ID||Jt.value!==M.default.FORCED_SUBTITLE));return Tt.length>0?Tt[0]:mt[0]}(we);let qe;const tt=oe.getCustomInitialTrackSelectionFunction();if(qe=function(mt){try{let Tt;return Tt=function(Vt){try{const Jt=Vt.filter(yn=>{const Cn=yn.type;return yn.bitrateList.some(Kn=>{const Zn=X.getAbrBitrateParameter("maxBitrate",Cn),gi=X.getAbrBitrateParameter("minBitrate",Cn);return!(Zn>-1&&Kn.bandwidth>1e3*Zn||gi>-1&&Kn.bandwidth<1e3*gi)})});return Jt.length>0?Jt:Vt}catch(Jt){return P.error(Jt),Vt}}(mt),Tt=function(Vt){try{if(!z.get().streaming.abr.limitBitrateByPortal)return Vt;const{elementWidth:Jt}=q.getVideoElementSize(),yn=Vt.filter(Cn=>Cn.type!==j.default.VIDEO||Cn.bitrateList.some(Kn=>Kn.width<=Jt));return yn.length>0?yn:Vt}catch(Jt){return P.error(Jt),Vt}}(Tt),Tt}catch(Tt){return P.error(Tt),mt}}(we),tt&&typeof tt=="function")qe=tt(qe);else if(B[de])qe=function(mt,Tt){if(!mt||mt.length===0||!Tt||!B[Tt])return mt;const Vt=B[Tt].bandwidth;if(!Vt||isNaN(Vt))return mt;let Jt={min:NaN,track:null};return mt.forEach(yn=>{yn.bitrateList.forEach(Cn=>{const Kn=Math.abs(Cn.bandwidth-Vt);(isNaN(Jt.min)||Kn<Jt.min)&&(Jt.min=Kn,Jt.track=yn)})}),Jt.track?[Jt.track]:mt}(qe,de);else if(z.get().streaming.ignoreSelectionPriority||(qe=function(mt){return rt(mt)}(qe)),qe.length>1){let mt=z.get().streaming.selectionModeForInitialTrack;switch(mt){case j.default.TRACK_SELECTION_MODE_HIGHEST_BITRATE:qe=function(Tt){let Vt=fe(Tt);return Vt.length>1&&(Vt=Ue(Vt)),Vt}(qe);break;case j.default.TRACK_SELECTION_MODE_FIRST_TRACK:qe=Ee(qe);break;case j.default.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY:qe=function(Tt){let Vt=me(Tt);return Vt.length>1&&(Vt=fe(Vt)),Vt}(qe);break;case j.default.TRACK_SELECTION_MODE_WIDEST_RANGE:qe=function(Tt){let Vt=Ue(Tt);return Vt.length>1&&(Vt=fe(Tt)),Vt}(qe);break;default:P.warn(`Track selection mode ${mt} is not supported. Falling back to TRACK_SELECTION_MODE_FIRST_TRACK`),qe=Ee(qe)}}return qe.length>0?qe[0]:we[0]}function Ee(de){return de[0]}function ye(de,we){return!(!de||!we)&&JSON.stringify({schemeIdUri:de.schemeIdUri,value:de.value})===JSON.stringify({schemeIdUri:we.schemeIdUri,value:we.value})}return R={addTrack:function(de){if(!de)return;const we=de.type;if((qe=we)!==j.default.AUDIO&&qe!==j.default.VIDEO&&qe!==j.default.TEXT&&qe!==j.default.IMAGE)return;var qe;let tt=de.streamInfo.id;F[tt]||(F[tt]=function(){const Tt=z.get().streaming.saveLastMediaSettingsForCurrentStreamingSession;return{audio:{list:[],storeLastSettings:Tt,current:null},video:{list:[],storeLastSettings:Tt,current:null},text:{list:[],storeLastSettings:Tt,current:null},image:{list:[],storeLastSettings:Tt,current:null}}}());const mt=F[tt][we].list;for(let Tt=0,Vt=mt.length;Tt<Vt;++Tt)if(Le(mt[Tt],de))return;mt.push(de)},areTracksEqual:Le,clearDataForStream:function(de){F[de]&&delete F[de]},getCurrentTrackFor:Se,getInitialSettings:Ce,getTracksFor:ve,getTracksWithHighestSelectionPriority:rt,getTracksWithHighestBitrate:fe,getTracksWithHighestEfficiency:me,getTracksWithWidestRange:Ue,initialize:function(){C.on(xe.default.REPRESENTATION_SWITCH,re,R)},isCurrentTrack:function(de){if(!de)return!1;const we=de.type,qe=de.streamInfo.id;return F[qe]&&F[qe][we]&&Le(F[qe][we].current,de)},matchSettings:function(de,we){let qe=arguments.length>2&&arguments[2]!==void 0&&arguments[2];try{let tt=!1;if(de.lang){if(de.lang instanceof RegExp)tt=we.lang.match(de.lang);else if(we.lang!==""){const Cn=Kf(de.lang);Cn&&(tt=$f(we.lang,Cn).length>0)}}else tt=!0;const mt=de.index===void 0||de.index===null||we.index===de.index,Tt=!de.viewpoint||!!we.viewpoint.filter(function(Cn){return ye(Cn,de.viewpoint)})[0],Vt=!de.role||!!we.roles.filter(function(Cn){return ye(Cn,de.role)})[0];let Jt=!de.accessibility||!!we.accessibility.filter(function(Cn){return ye(Cn,de.accessibility)})[0],yn=!de.audioChannelConfiguration||!!we.audioChannelConfiguration.filter(function(Cn){return ye(Cn,de.audioChannelConfiguration)})[0];return tt&&mt&&Tt&&(Vt||we.type===j.default.AUDIO&&qe)&&Jt&&yn}catch{return!1}},matchSettingsAccessibility:ze,matchSettingsAudioChannelConfig:Ve,matchSettingsIndex:le,matchSettingsLang:ie,matchSettingsRole:Ge,matchSettingsViewPoint:Pe,reset:Ye,saveTextSettingsDisabled:function(){$.setSavedMediaSettings(j.default.TEXT,null)},selectInitialTrack:je,setConfig:function(de){de&&(de.domStorage&&($=de.domStorage),de.settings&&(z=de.settings),de.customParametersModel&&(oe=de.customParametersModel),de.mediaPlayerModel&&(X=de.mediaPlayerModel),de.videoModel&&(q=de.videoModel))},setInitialMediaSettingsForType:function(de,we){let qe=ne[de]||Ce(de);const tt=ve(de,we.id);let mt=[];qe&&Object.keys(qe).length!==0||(qe=$.getSavedMediaSettings(de),qe&&delete qe.codec,Ie(de,qe)),tt&&tt.length!==0&&(qe&&(mt=Array.from(tt),P.info("Filtering "+mt.length+" "+de+" tracks based on settings"),mt=Te(mt,he,qe),mt=Te(mt,ie,qe),mt=Te(mt,le,qe),mt=Te(mt,Pe,qe),de===j.default.AUDIO&&ne[de]||(mt=Te(mt,Ge,qe)),mt=Te(mt,ze,qe),mt=Te(mt,Ve,qe),mt=Te(mt,nt,qe),P.info("Filtering "+de+" tracks ended, found "+mt.length+" matching track(s).")),mt.length===0?ke(je(de,tt)):mt.length>1?ke(je(de,mt)):ke(mt[0]))},setInitialSettings:Ie,setTrack:ke},P=(0,$e.default)(D).getInstance().getLogger(R),Ye(),R}$d.__dashjs_factory_name="MediaController";const Wf=ue.default.getSingletonFactory($d);ue.default.updateSingletonFactory($d.__dashjs_factory_name,Wf);var zg=Wf;const ul=NaN;class Qh{constructor(C,R){this.data={baseUrls:C||null,selectedIdx:R||ul},this.children=[]}}function Jh(){let D,C,R,P;const F=this.context,z=(0,Bi.default)(F).getInstance();function Q(X,q,$){const re=ne($);X[q]?z.areEqual(re,X[q].data.baseUrls)||(X[q].data.baseUrls=re,X[q].data.selectedIdx=ul):X[q]=new Qh(re)}function ne(X){let q=R.getBaseURLsFromElement(X);const $=P.getSynthesizedBaseUrlElements(q);return $&&$.length>0&&$.forEach(re=>{const ve=q.findIndex(Se=>Se.serviceLocation===re.serviceLocation);ve!==-1?q[ve]=re:q.push(re)}),q}function B(X,q){const $=q||C;X($.data),$.children&&$.children.forEach(re=>B(X,re))}function oe(){C=new Qh}return D={reset:oe,update:function(X){(function(q){(function(){if(!R||!R.hasOwnProperty("getBaseURLsFromElement")||!R.hasOwnProperty("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously")})();const $=ne(q);z.areEqual($,C.data.baseUrls)||(C.data.baseUrls=$,C.data.selectedIdx=ul),q&&q.Period&&q.Period.forEach((re,ve)=>{Q(C.children,ve,re),re.AdaptationSet&&re.AdaptationSet.forEach((Se,ke)=>{Q(C.children[ve].children,ke,Se),Se.Representation&&Se.Representation.sort(R.getRepresentationSortFunction()).forEach((Ie,Ce)=>{Q(C.children[ve].children[ke].children,Ce,Ie)})})})})(X)},getForPath:function(X){let q=C;const $=[q.data];return X&&X.forEach(re=>{q=q.children[re],q&&$.push(q.data)}),$.filter(re=>re.baseUrls.length)},invalidateSelectedIndexes:function(X){B(q=>{isNaN(q.selectedIdx)||X===q.baseUrls[q.selectedIdx].serviceLocation&&(q.selectedIdx=ul)})},setConfig:function(X){X.adapter&&(R=X.adapter),X.contentSteeringController&&(P=X.contentSteeringController)},getBaseUrls:function(X){return ne(X)}},oe(),D}Jh.__dashjs_factory_name="BaseURLTreeModel";var Ml=ue.default.getClassFactory(Jh);function jo(D){let C;const R=(D=D||{}).blacklistController;return C={select:function(P){return P&&function(F){let z,Q,ne=0,B=[],oe=0;if(Q=F.sort(function(X,q){let $=X.dvbPriority-q.dvbPriority;return isNaN($)?0:$}).filter(function(X,q,$){return!q||$[0].dvbPriority&&X.dvbPriority&&$[0].dvbPriority===X.dvbPriority}),Q.length)return Q.length>1&&(Q.forEach(X=>{ne+=X.dvbWeight,B.push(ne)}),z=Math.floor(Math.random()*(ne-1)),B.every((X,q)=>(oe=q,!(z<X)))),Q[oe]}(function(F){let z=[];return F.filter(function(Q){return!R.contains(Q.serviceLocation)||(Q.dvbPriority&&z.push(Q.dvbPriority),!1)}).filter(function(Q){return!z.length||!Q.dvbPriority||z.indexOf(Q.dvbPriority)===-1})}(P))}},C}jo.__dashjs_factory_name="DVBSelector";var gr=ue.default.getClassFactory(jo);function Ja(D){let C;const R=(D=D||{}).blacklistController;return C={select:function(P){let F,z=0;return P&&P.some((Q,ne)=>(z=ne,!R.contains(Q.serviceLocation)))&&(F=P[z]),F}},C}Ja.__dashjs_factory_name="BasicSelector";var qs=ue.default.getClassFactory(Ja);function Za(){const D=this.context,C=(0,K.default)(D).getInstance();let R,P,F,z=[];function Q(){let B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],X=0,q=NaN;for(;X<B.length;){const $=B[X],re=oe.findIndex(ve=>ve.serviceLocation&&ve.serviceLocation===$);if(re!==-1&&!F.contains(oe[re].serviceLocation)){q=re;break}X+=1}return q}function ne(B){const oe=P.getCurrentSteeringResponseData();if(!oe)return;const X=B.entry,q=setTimeout(()=>{F.remove(X),z.splice(z.indexOf(q,1))},1e3*oe.ttl);z.push(q)}return R={selectBaseUrlIndex:function(B){let oe=NaN;if(isNaN(B.selectedIdx)){const q=P.getSteeringDataFromManifest();q&&q.defaultServiceLocationArray.length>0&&(oe=Q(q.defaultServiceLocationArray,B.baseUrls))}const X=P.getCurrentSteeringResponseData();return B.baseUrls&&B.baseUrls.length&&X&&X.pathwayPriority&&X.pathwayPriority.length&&(oe=Q(X.pathwayPriority,B.baseUrls)),oe},setConfig:function(B){B.blacklistController&&(F=B.blacklistController),B.contentSteeringController&&(P=B.contentSteeringController),C.on(B.addBlacklistEventName,ne,R)},reset:function(){z.forEach(B=>clearTimeout(B)),z=[]}},P=Pu(D).getInstance(),R}Za.__dashjs_factory_name="ContentSteeringSelector";var Sr=ue.default.getClassFactory(Za);function Nl(){const D=this.context,C=(0,K.default)(D).getInstance(),R=(0,ge.default)(D).getInstance();let P,F,z,Q,ne,B;function oe(){ne.reset(),F.reset()}return P={chooseSelector:function(X){(0,on.checkParameterType)(X,"boolean"),B=X?Q:z},select:function(X){if(!X)return;if(R.get().streaming.applyContentSteering){const $=ne.selectBaseUrlIndex(X);isNaN($)||$===-1||(X.selectedIdx=$)}if(!isNaN(X.selectedIdx))return X.baseUrls[X.selectedIdx];let q=B.select(X.baseUrls);return q?(X.selectedIdx=X.baseUrls.indexOf(q),q):(C.trigger(x.default.URL_RESOLUTION_FAILED,{error:new Ze.default(ce.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,ce.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(B===z&&oe()))},reset:oe,setConfig:function(X){X.selector&&(B=X.selector),X.contentSteeringSelector&&(ne=X.contentSteeringSelector)}},F=Zc(D).create({updateEventName:x.default.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,addBlacklistEventName:x.default.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD}),z=qs(D).create({blacklistController:F}),Q=gr(D).create({blacklistController:F}),ne=Sr(D).create(),ne.setConfig({blacklistController:F,addBlacklistEventName:x.default.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD}),B=z,P}Nl.__dashjs_factory_name="BaseURLSelector";var Xf=ue.default.getClassFactory(Nl);function Kd(){let D,C;const R=this.context,P=(0,K.default)(R).getInstance(),F=Ne(R).getInstance();let z,Q,ne;function B(X){z.update(X),Q.chooseSelector(C.getIsDVB(X)),P.trigger(xe.default.BASE_URLS_UPDATED,{baseUrls:oe(X)})}function oe(X){return z.getBaseUrls(X)}return D={reset:function(){z.reset(),Q.reset()},initialize:function(X){z.setConfig({adapter:C,contentSteeringController:ne}),B(X)},resolve:function(X){const q=z.getForPath(X).reduce(($,re)=>{const ve=Q.select(re);return ve?(F.isRelative(ve.url)?$.url=F.resolve(ve.url,$.url):($.url=ve.url,$.serviceLocation=ve.serviceLocation),$.availabilityTimeOffset=ve.availabilityTimeOffset,$.availabilityTimeComplete=ve.availabilityTimeComplete,$.queryParams=ve.queryParams,$):new Da},new Da);if(!F.isRelative(q.url))return q},setConfig:function(X){X.baseURLTreeModel&&(z=X.baseURLTreeModel),X.baseURLSelector&&(Q=X.baseURLSelector),X.adapter&&(C=X.adapter),X.contentSteeringController&&(ne=X.contentSteeringController)},getBaseUrls:oe,update:B},z=Ml(R).create(),Q=Xf(R).create(),P.on(x.default.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,function(X){z.invalidateSelectedIndexes(X.entry)},D),D}Kd.__dashjs_factory_name="BaseURLController";var Yd=ue.default.getClassFactory(Kd),Qf=class extends Dt{constructor(D,C){super(),this.url=D||null,this.type=C||null,this.mediaType=j.default.STREAM,this.responseType=""}};function Jf(D){D=D||{};const C=this.context,R=(0,K.default)(C).getInstance();let P,F=pa(C).create({errHandler:D.errHandler,dashMetrics:D.dashMetrics,mediaPlayerModel:D.mediaPlayerModel,errors:ce});return P={load:function(z,Q,ne){const B=function(oe,X){Q.resolved=!0,Q.resolvedContent=oe||null,R.trigger(x.default.XLINK_ELEMENT_LOADED,{element:Q,resolveObject:ne,error:oe||X?null:new Ze.default(ce.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,ce.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+z)})};if(z==="urn:mpeg:dash:resolve-to-zero:2013")B(null,!0);else{const oe=new Qf(z,Xe.HTTPRequest.XLINK_EXPANSION_TYPE);F.load({request:oe,success:function(X){B(X)},error:function(){B(null)}})}},reset:function(){F&&(F.abort(),F=null)}},P}Jf.__dashjs_factory_name="XlinkLoader";var Zh=ue.default.getClassFactory(Jf);const gc="onLoad";function Zf(D){D=D||{};let C=this.context,R=(0,K.default)(C).getInstance();const P=Ne(C).getInstance();let F,z,Q,ne;function B(re,ve,Se){let ke,Ie,Ce={};Ce.elements=re,Ce.type=ve,Ce.resolveType=Se,Ce.elements.length===0&&X(Ce);for(let Le=0;Le<Ce.elements.length;Le++)ke=Ce.elements[Le],Ie=P.isHTTPURL(ke.url)?ke.url:ke.originalContent.BaseURL+ke.url,ne.load(Ie,ke,Ce)}function oe(re){let ve,Se,ke="";if(ve=re.element,Se=re.resolveObject,ve.resolvedContent){let Ie=0;ve.resolvedContent.indexOf("<?xml")===0&&(Ie=ve.resolvedContent.indexOf("?>")+2),ke=ve.resolvedContent.substr(0,Ie)+"<response>"+ve.resolvedContent.substr(Ie)+"</response>",ve.resolvedContent=z.parseXml(ke).response}(function(Ie){let Ce,Le;for(Ce=0;Ce<Ie.elements.length;Ce++)if(Le=Ie.elements[Ce],Le.resolved===!1)return!1;return!0})(Se)&&X(Se)}function X(re){let ve,Se,ke=[];if(function(Ie){let Ce,Le,Ye,Te,ie,le,he=[];for(Te=Ie.elements.length-1;Te>=0;Te--){if(Ce=Ie.elements[Te],Le=Ce.type,Ce.resolvedContent){if(Ce.resolvedContent)for(ie=0;ie<Ce.resolvedContent[Le].length;ie++)Ye=Ce.resolvedContent[Le][ie],he.push(Ye)}else delete Ce.originalContent["xlink:actuate"],delete Ce.originalContent["xlink:href"],he.push(Ce.originalContent);for(Ce.parentElement[Le].splice(Ce.index,1),le=0;le<he.length;le++)Ce.parentElement[Le].splice(Ce.index+le,0,he[le]);he=[]}Ie.elements.length>0&&z.getIron().run(Q)}(re),re.resolveType==="onActuate"&&R.trigger(x.default.XLINK_READY,{manifest:Q}),re.resolveType===gc)switch(re.type){case M.default.PERIOD:for(ve=0;ve<Q[M.default.PERIOD].length;ve++)Se=Q[M.default.PERIOD][ve],Se.hasOwnProperty(M.default.ADAPTATION_SET)&&(ke=ke.concat(q(Se[M.default.ADAPTATION_SET],Se,M.default.ADAPTATION_SET,gc))),Se.hasOwnProperty(M.default.EVENT_STREAM)&&(ke=ke.concat(q(Se[M.default.EVENT_STREAM],Se,M.default.EVENT_STREAM,gc)));B(ke,M.default.ADAPTATION_SET,gc);break;case M.default.ADAPTATION_SET:R.trigger(x.default.XLINK_READY,{manifest:Q})}}function q(re,ve,Se,ke){let Ie,Ce,Le,Ye=[];for(Ce=re.length-1;Ce>=0;Ce--)Ie=re[Ce],Ie.hasOwnProperty("xlink:href")&&Ie["xlink:href"]==="urn:mpeg:dash:resolve-to-zero:2013"&&re.splice(Ce,1);for(Ce=0;Ce<re.length;Ce++)Ie=re[Ce],Ie.hasOwnProperty("xlink:href")&&Ie.hasOwnProperty("xlink:actuate")&&Ie["xlink:actuate"]===ke&&(Le=$(Ie["xlink:href"],ve,Se,Ce,ke,Ie),Ye.push(Le));return Ye}function $(re,ve,Se,ke,Ie,Ce){return{url:re,parentElement:ve,type:Se,index:ke,resolveType:Ie,originalContent:Ce,resolvedContent:null,resolved:!1}}return F={resolveManifestOnLoad:function(re){let ve;Q=re,Q.Period?(ve=q(Q.Period,Q,M.default.PERIOD,gc),B(ve,M.default.PERIOD,gc)):R.trigger(x.default.XLINK_READY,{manifest:Q})},setParser:function(re){re&&(z=re)},reset:function(){R.off(x.default.XLINK_ELEMENT_LOADED,oe,F),ne&&(ne.reset(),ne=null)}},R.on(x.default.XLINK_ELEMENT_LOADED,oe,F),ne=Zh(C).create({errHandler:D.errHandler,dashMetrics:D.dashMetrics,mediaPlayerModel:D.mediaPlayerModel,settings:D.settings}),F}Zf.__dashjs_factory_name="XlinkController";var N=ue.default.getClassFactory(Zf);function H(D){function C(F,z){for(let Q in F)z.hasOwnProperty(Q)||(z[Q]=F[Q])}function R(F,z,Q){for(let ne=0,B=F.length;ne<B;++ne){const oe=F[ne];if(z[oe.name])if(Q[oe.name]){if(oe.merge){const X=z[oe.name],q=Q[oe.name];typeof X=="object"&&typeof q=="object"?C(X,q):Q[oe.name]=X+q}}else Q[oe.name]=z[oe.name]}}function P(F,z){for(let Q=0,ne=F.children.length;Q<ne;++Q){const B=F.children[Q],oe=z[B.name];if(oe)for(let X=0,q=oe.length;X<q;++X){const $=oe[X];R(F.properties,z,$),P(B,$)}}}return{run:function(F){if(F===null||typeof F!="object")return F;if(F.Period&&"period"in D){const z=D.period,Q=F.Period;for(let ne=0,B=Q.length;ne<B;++ne){const oe=Q[ne];if(P(z,oe),"adaptationset"in D){const X=oe.AdaptationSet;if(X){const q=D.adaptationset;for(let $=0,re=X.length;$<re;++$)P(q,X[$])}}}}return F}}}H.__dashjs_factory_name="ObjectIron";var ee=ue.default.getClassFactory(H),J=class{constructor(D,C){this._test=D,this._converter=C}get test(){return this._test}get converter(){return this._converter}};const be=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/;var Oe=class extends J{constructor(){super((D,C,R)=>{const P=[M.default.MIN_BUFFER_TIME,M.default.MEDIA_PRESENTATION_DURATION,M.default.MINIMUM_UPDATE_PERIOD,M.default.TIMESHIFT_BUFFER_DEPTH,M.default.MAX_SEGMENT_DURATION,M.default.MAX_SUBSEGMENT_DURATION,M.default.SUGGESTED_PRESENTATION_DELAY,M.default.START,j.default.START_TIME,M.default.DURATION],F=P.length;for(let z=0;z<F;z++)if(C===P[z])return be.test(R);return!1},D=>{const C=be.exec(D);let R=31536e3*parseFloat(C[3]||0)+2592e3*parseFloat(C[5]||0)+86400*parseFloat(C[7]||0)+3600*parseFloat(C[9]||0)+60*parseFloat(C[11]||0)+parseFloat(C[13]||0);return C[1]!==void 0&&(R=-R),R})}};const ct=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/;var pt=class extends J{constructor(){super((D,C,R)=>ct.test(R),D=>{const C=ct.exec(D);let R;if(R=Date.UTC(parseInt(C[1],10),parseInt(C[2],10)-1,parseInt(C[3],10),parseInt(C[4],10),parseInt(C[5],10),C[6]&&parseInt(C[6],10)||0,C[7]&&1e3*parseFloat(C[7])||0),C[9]&&C[10]){const P=60*parseInt(C[9],10)+parseInt(C[10],10);R+=(C[8]==="+"?-1:1)*P*60*1e3}return new Date(R)})}};const wt=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,Ct=[M.default.ID];var $t=class extends J{constructor(){super((D,C,R)=>wt.test(R)&&Ct.indexOf(C)===-1,D=>parseFloat(D))}},xn=class extends J{constructor(){super((D,C)=>{const R={[M.default.ADAPTATION_SET]:[M.default.LANG],[M.default.REPRESENTATION]:[M.default.LANG],[M.default.CONTENT_COMPONENT]:[M.default.LANG],[M.default.LABEL]:[M.default.LANG],[M.default.GROUP_LABEL]:[M.default.LANG]};if(R.hasOwnProperty(D)){let P=R[D];return P!==void 0&&P.indexOf(C)>=0}return!1},D=>Kf(D)||String(D))}},hi=class{constructor(D){var C;this._name=D,this._merge=(C=D)&&C.length&&C.charAt(0)===C.charAt(0).toUpperCase()}get name(){return this._name}get merge(){return this._merge}},Pn=class{constructor(D,C,R){this._name=D||"",this._properties=[],this._children=R||[],Array.isArray(C)&&C.forEach(P=>{this._properties.push(new hi(P))})}get name(){return this._name}get children(){return this._children}get properties(){return this._properties}},Oi=class extends Pn{constructor(){const D=[M.default.PROFILES,M.default.WIDTH,M.default.HEIGHT,M.default.SAR,M.default.FRAMERATE,M.default.AUDIO_SAMPLING_RATE,M.default.MIME_TYPE,M.default.SEGMENT_PROFILES,M.default.CODECS,M.default.MAXIMUM_SAP_PERIOD,M.default.START_WITH_SAP,M.default.MAX_PLAYOUT_RATE,M.default.CODING_DEPENDENCY,M.default.SCAN_TYPE,M.default.FRAME_PACKING,M.default.AUDIO_CHANNEL_CONFIGURATION,M.default.CONTENT_PROTECTION,M.default.INBAND_EVENT_STREAM];super(M.default.ADAPTATION_SET,D,[new Pn(M.default.REPRESENTATION,D,[new Pn(M.default.SUB_REPRESENTATION,D)])])}},lr=class extends Pn{constructor(){const D=[M.default.SEGMENT_BASE,M.default.SEGMENT_TEMPLATE,M.default.SEGMENT_LIST];super(M.default.PERIOD,D,[new Pn(M.default.ADAPTATION_SET,D,[new Pn(M.default.REPRESENTATION,D)])])}};const Rs={"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"',"&apos;":"'"};function ga(D,C){const R=C.split(/(&[#a-zA-Z0-9]+;)/);if(R.length<=1)return C;for(let P=1;P<R.length;P+=2){const F=R[P];if(F.charAt(1)==="#"){let z;z=F.charAt(2)==="x"?parseInt(F.substring(3,F.length-1),16):parseInt(F.substring(2,F.length-1),10),!isNaN(z)&&z>=0&&z<=1114111&&(R[P]=String.fromCodePoint(z))}else D.hasOwnProperty(F)&&(R[P]=D[F])}return R.join("")}function Ol(D,C){var R=(C=C||{}).pos||0,P=!!C.keepComments,F=!!C.keepWhitespace,z=C.attrMatchers||[],Q=C.nodesAsArray||[],ne="<",B=60,oe=">",X=62,q=45,$=47,re=33,ve=39,Se=34,ke=91,Ie=93;function Ce(Ge,ze){for(var Ve=[];D[R];)if(D.charCodeAt(R)==B){if(D.charCodeAt(R+1)===$){var nt=R+2;if(R=D.indexOf(oe,R),D.substring(nt,R).indexOf(Ge)==-1){var rt=D.substring(0,R).split(`
`);throw new Error(`Unexpected close tag
Line: `+(rt.length-1)+`
Column: `+(rt[rt.length-1].length+1)+`
Char: `+D[R])}return R+1&&(R+=1),Ve}if(D.charCodeAt(R+1)===re){if(D.charCodeAt(R+2)==q){const ye=R;for(;R!==-1&&(D.charCodeAt(R)!==X||D.charCodeAt(R-1)!=q||D.charCodeAt(R-2)!=q||R==-1);)R=D.indexOf(oe,R+1);R===-1&&(R=D.length),P&&Ve.push(D.substring(ye,R+1))}else{if(D.charCodeAt(R+2)===ke&&D.charCodeAt(R+8)===ke&&D.substr(R+3,5).toLowerCase()==="cdata"){var fe=D.indexOf("]]>",R);fe==-1?(Ve.push(D.substr(R+9)),R=D.length):(Ve.push(D.substring(R+9,fe)),R=fe+3);continue}{const ye=R+1;R+=2;for(var me=!1;(D.charCodeAt(R)!==X||me===!0)&&D[R];)D.charCodeAt(R)===ke?me=!0:me===!0&&D.charCodeAt(R)===Ie&&(me=!1),R++;Ve.push(D.substring(ye,R))}}R++;continue}var Ue=le();if(Ve.push(Ue),Ue.tagName[0]==="?"&&(Ve.push(...Ue.children),Ue.children=[]),ze){let ye=Ue.tagName;Q.indexOf(ye)!==-1?(ze[ye]||(ze[ye]=[]),ze[ye].push(Ue)):ze[ye]=Ue}}else{var je=(Ee=void 0,Ee=R,(R=D.indexOf(ne,R)-1)==-2&&(R=D.length),ga(Rs,D.slice(Ee,R+1)));F||(je=je.trim()),ze?ze.__text=je:Ve.push(je),R++}var Ee;return Ve}function Le(Ge,ze,Ve){if(Ge==="S")return parseInt(Ve);let nt=ga(Rs,Ve);return z.forEach(rt=>{rt.test(Ge,ze,Ve)&&(nt=rt.converter(Ve))}),nt}var Ye=`\r
	>/= `;function Te(){for(var Ge=R;Ye.indexOf(D[R])===-1&&D[R];)R++;return D.slice(Ge,R)}var ie=C.noChildNodes||["img","br","input","meta","link","hr"];function le(){R++;const Ge=Te();let ze=[],Ve={tagName:Ge},nt=Ve.tagName.indexOf(":");for(nt!==-1&&(Ve.__prefix=Ve.tagName.substr(0,nt),Ve.tagName=Ve.tagName.substr(nt+1));D.charCodeAt(R)!==X&&D[R];){var rt=D.charCodeAt(R);if(rt>64&&rt<91||rt>96&&rt<123){for(var fe=Te(),me=D.charCodeAt(R);me&&me!==ve&&me!==Se&&!(me>64&&me<91||me>96&&me<123)&&me!==X;)R++,me=D.charCodeAt(R);if(me===ve||me===Se){var Ue=(je=void 0,Ee=void 0,je=D[R],Ee=R+1,R=D.indexOf(je,Ee),D.slice(Ee,R));if(R===-1)return Ve}else Ue=null,R--;Ue=Le(Ve.tagName,fe,Ue),Ve[fe]=Ue}R++}var je,Ee;if(D.charCodeAt(R-1)!==$)if(Ge=="script"){var ye=R+1;R=D.indexOf("<\/script>",R),ze=[D.slice(ye,R)],R+=9}else Ge=="style"?(ye=R+1,R=D.indexOf("</style>",R),ze=[D.slice(ye,R)],R+=8):ie.indexOf(Ge)===-1?(R++,ze=Ce(Ge,Ve)):R++;else R++;return Ve.__children=ze,Ve}var he,Pe=null;if(C.attrValue!==void 0)for(C.attrName=C.attrName||"id",Pe=[];he=new RegExp("\\s"+C.attrName+`\\s*=['"]`+C.attrValue+`['"]`).exec(D),(R=he?he.index:-1)!==-1;)(R=D.lastIndexOf("<",R))!==-1&&Pe.push(le()),D=D.substr(R),R=0;else Pe=C.parseNode?le():Ce("");return C.filter&&(Pe=Bu(Pe,C.filter)),C.simplify?cu(Array.isArray(Pe)?Pe:[Pe]):(C.setPos&&(Pe.pos=R),Pe)}function cu(D){var C={};if(!D.length)return"";if(D.length===1&&typeof D[0]=="string")return D[0];for(var R in D.forEach(function(P){if(typeof P=="object"){C[P.tagName]||(C[P.tagName]=[]);var F=cu(P.children);C[P.tagName].push(F),Object.keys(P.attributes).length&&typeof F!="string"&&(F._attributes=P.attributes)}}),C)C[R].length==1&&(C[R]=C[R][0]);return C}function Bu(D,C){let R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,P=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"";var F=[];return D.forEach(function(z,Q){if(typeof z=="object"&&C(z,Q,R,P)&&F.push(z),z.children){var ne=Bu(z.children,C,R+1,(P?P+".":"")+Q+"."+z.tagName);F=F.concat(ne)}}),F}const Fl=[M.default.PERIOD,M.default.BASE_URL,M.default.ADAPTATION_SET,M.default.REPRESENTATION,M.default.CONTENT_PROTECTION,M.default.ROLE,M.default.ACCESSIBILITY,M.default.AUDIO_CHANNEL_CONFIGURATION,M.default.CONTENT_COMPONENT,M.default.ESSENTIAL_PROPERTY,M.default.LABEL,M.default.S,M.default.SEGMENT_URL,M.default.EVENT,M.default.EVENT_STREAM,M.default.LOCATION,M.default.SERVICE_DESCRIPTION,M.default.SUPPLEMENTAL_PROPERTY,M.default.METRICS,M.default.REPORTING,M.default.PATCH_LOCATION,M.default.REPLACE,M.default.ADD,M.default.REMOVE,M.default.UTC_TIMING,M.default.INBAND_EVENT_STREAM,M.default.PRODUCER_REFERENCE_TIME,M.default.CONTENT_STEERING];function Ul(D){D=D||{};const C=this.context,R=D.debug;let P,F,z,Q;function ne(B){try{let oe=Ol(B,{parseNode:!0,attrMatchers:z,nodesAsArray:Fl}),X={};if(oe.tagName.toLowerCase().indexOf("xml")!==-1)for(let q in oe){if(Array.isArray(oe[q])){X[q]=oe[q][0];break}if(typeof oe[q]=="object"){X[q]=oe[q];break}}else X[oe.tagName]=oe,delete oe.tagName;return X}catch{return null}}return P={getIron:function(){return Q},parseXml:ne,parse:function(B){let oe;const X=window.performance.now();if(oe=ne(B),!oe)throw new Error("failed to parse the manifest");oe.Patch?(oe=oe.Patch,oe.add&&oe.add.forEach($=>Q.run($)),oe.replace&&oe.replace.forEach($=>Q.run($))):(oe=oe.MPD,Q.run(oe));const q=window.performance.now();return F.info("Parsing complete: "+(q-X).toPrecision(3)+"ms"),oe.protocol="DASH",oe}},F=R.getLogger(P),z=[new Oe,new pt,new $t,new xn],Q=ee(C).create({adaptationset:new Oi,period:new lr}),P}Ul.__dashjs_factory_name="DashParser";var Bl=ue.default.getClassFactory(Ul);function Qr(D){D=D||{};const C=this.context,R=D.debug,P=D.settings,F=(0,K.default)(C).getInstance(),z=Ne(C).getInstance();let Q,ne,B,oe,X,q=D.mssHandler,$=D.errHandler;function re(ve){F.trigger(x.default.INTERNAL_MANIFEST_LOADED,{manifest:ve.manifest})}return Q={load:function(ve){let Se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,ke=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;const Ie=new Date,Ce=new Qf(ve,Xe.HTTPRequest.MPD_TYPE);Se&&(Ce.serviceLocation=Se),ke&&(Ce.queryParams=ke),Ce.startDate||(Ce.startDate=Ie),F.trigger(x.default.MANIFEST_LOADING_STARTED,{request:Ce}),B.load({request:Ce,success:function(Le,Ye,Te){if(!oe)return;let ie,le,he;if(Te&&Te!==ve?(le=z.parseBaseUrl(Te),ie=Te):(z.isRelative(ve)&&(ve=z.resolve(ve,window.location.href)),le=z.parseBaseUrl(ve)),Ye!="No Content")if(X===null&&(X=function(Pe){let Ge=null;return Pe.indexOf("SmoothStreamingMedia")>-1?(q&&(Ge=q.createMssParser(),q.createMssFragmentProcessor(),q.registerEvents()),Ge):Pe.indexOf("MPD")>-1||Pe.indexOf("Patch")>-1?Bl(C).create({debug:R}):Ge}(Le)),X!==null){oe.setParser(X);try{he=X.parse(Le)}catch{return void F.trigger(x.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new Ze.default(ce.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,ce.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+`${ve}`)})}if(he){if(he.url=ie||ve,he.originalUrl||(he.originalUrl=he.url),P&&P.get().streaming.enableManifestDurationMismatchFix&&he.mediaPresentationDuration&&he.Period.length>1){const Pe=he.Period.reduce((Ge,ze)=>Ge+ze.duration,0);!isNaN(Pe)&&he.mediaPresentationDuration>Pe&&(ne.warn("Media presentation duration greater than duration of all periods. Setting duration to total period duration"),he.mediaPresentationDuration=Pe)}he.baseUri=le,he.loadedTime=new Date,oe.resolveManifestOnLoad(he),F.trigger(x.default.ORIGINAL_MANIFEST_LOADED,{originalManifest:Le})}else F.trigger(x.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new Ze.default(ce.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,ce.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+`${ve}`)})}else F.trigger(x.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new Ze.default(ce.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,ce.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+`${ve}`)});else F.trigger(x.default.INTERNAL_MANIFEST_LOADED,{manifest:null})},error:function(Le,Ye,Te){F.trigger(x.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new Ze.default(ce.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,ce.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+`${ve}, ${Te}`)})}})},reset:function(){F.off(x.default.XLINK_READY,re,Q),q&&q.reset(),oe&&(oe.reset(),oe=null),B&&(B.abort(),B=null)}},ne=R.getLogger(Q),F.on(x.default.XLINK_READY,re,Q),B=pa(C).create({errHandler:D.errHandler,dashMetrics:D.dashMetrics,mediaPlayerModel:D.mediaPlayerModel,urlUtils:z,constants:j.default,dashConstants:M.default,errors:ce,requestTimeout:D.settings.get().streaming.manifestRequestTimeout}),oe=N(C).create({errHandler:$,dashMetrics:D.dashMetrics,mediaPlayerModel:D.mediaPlayerModel,settings:D.settings}),X=null,Q}Qr.__dashjs_factory_name="ManifestLoader";var mc=ue.default.getClassFactory(Qr);function eo(){let D;const C=this.context,R=(0,K.default)(C).getInstance();return D={error:function(P){R.trigger(x.default.ERROR,{error:P})}},D}eo.__dashjs_factory_name="ErrorHandler";var Yy=ue.default.getSingletonFactory(eo),eh=n(559);function Wy(){const D=this.context,C=(0,K.default)(D).getInstance();let R,P,F,z,Q,ne,B;function oe(re,ve,Se){const ke=q(re,ve,Se);return F.isCodecSupportedBasedOnTestedConfigurations(ke,re)}function X(re,ve,Se,ke,Ie){const Ce=q(re,ve,Se),Le=JSON.stringify(Ce);ke.has(Le)||(ke.add(Le),Ie.push(Ce))}function q(re,ve,Se){let ke=null;switch(re){case j.default.VIDEO:ke=function(Ie,Ce){let Le={codec:Ce,width:Ie.width||null,height:Ie.height||null,framerate:P.getFramerate(Ie)||null,bitrate:Ie.bandwidth||null,isSupported:!0};z.get().streaming.capabilities.filterVideoColorimetryEssentialProperties&&Object.assign(Le,function(ie){let le={colorGamut:null,transferFunction:null,isSupported:!0};for(const he of ie.EssentialProperty||[])he.schemeIdUri===j.default.COLOUR_PRIMARIES_SCHEME_ID_URI&&["1","5","6","7"].includes(he.value.toString())?le.colorGamut=j.default.MEDIA_CAPABILITIES_API.COLORGAMUT.SRGB:he.schemeIdUri===j.default.COLOUR_PRIMARIES_SCHEME_ID_URI&&["11","12"].includes(he.value.toString())?le.colorGamut=j.default.MEDIA_CAPABILITIES_API.COLORGAMUT.P3:he.schemeIdUri===j.default.COLOUR_PRIMARIES_SCHEME_ID_URI&&["9"].includes(he.value.toString())?le.colorGamut=j.default.MEDIA_CAPABILITIES_API.COLORGAMUT.REC2020:he.schemeIdUri===j.default.COLOUR_PRIMARIES_SCHEME_ID_URI&&["2"].includes(he.value.toString())?le.colorGamut=null:he.schemeIdUri===j.default.COLOUR_PRIMARIES_SCHEME_ID_URI&&(le.isSupported=!1),he.schemeIdUri===j.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI&&["1","6","13","14","15"].includes(he.value.toString())?le.transferFunction=j.default.MEDIA_CAPABILITIES_API.TRANSFERFUNCTION.SRGB:he.schemeIdUri===j.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI&&["16"].includes(he.value.toString())?le.transferFunction=j.default.MEDIA_CAPABILITIES_API.TRANSFERFUNCTION.PQ:he.schemeIdUri===j.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI&&["18"].includes(he.value.toString())?le.transferFunction=j.default.MEDIA_CAPABILITIES_API.TRANSFERFUNCTION.HLG:he.schemeIdUri===j.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI&&["2"].includes(he.value.toString())?le.transferFunction=null:he.schemeIdUri===j.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI&&(le.isSupported=!1);return le}(Ie));let Ye=Le.isSupported;z.get().streaming.capabilities.filterHDRMetadataFormatEssentialProperties&&Object.assign(Le,function(ie){let le={isSupported:!0,hdrMetadataType:null};for(const he of ie.EssentialProperty||[])he.schemeIdUri===j.default.HDR_METADATA_FORMAT_SCHEME_ID_URI&&he.value===j.default.HDR_METADATA_FORMAT_VALUES.ST2094_10?le.hdrMetadataType=j.default.MEDIA_CAPABILITIES_API.HDR_METADATATYPE.SMPTE_ST_2094_10:he.schemeIdUri===j.default.HDR_METADATA_FORMAT_SCHEME_ID_URI&&he.value===j.default.HDR_METADATA_FORMAT_VALUES.SL_HDR2?le.hdrMetadataType=j.default.MEDIA_CAPABILITIES_API.HDR_METADATATYPE.SLHDR2:he.schemeIdUri===j.default.HDR_METADATA_FORMAT_SCHEME_ID_URI&&he.value===j.default.HDR_METADATA_FORMAT_VALUES.ST2094_40?le.hdrMetadataType=j.default.MEDIA_CAPABILITIES_API.HDR_METADATATYPE.SMPTE_ST_2094_40:he.schemeIdUri===j.default.HDR_METADATA_FORMAT_SCHEME_ID_URI&&(le.isSupported=!1);return le}(Ie));let Te=Le.isSupported;return Ye&&Te||(Le.isSupported=!1),Le}(ve,Se);break;case j.default.AUDIO:ke=function(Ie,Ce){const Le=Ie.audioSamplingRate||null;return{codec:Ce,bitrate:Ie.bandwidth||null,samplerate:Le,isSupported:!0}}(ve,Se);break;default:return ke}return function(Ie,Ce){return Ie&&Ie[M.default.CONTENT_PROTECTION]&&Ie[M.default.CONTENT_PROTECTION].length>0&&(Ce.keySystemsMetadata=ne.getSupportedKeySystemMetadataFromContentProtection(Ie[M.default.CONTENT_PROTECTION])),Ce}(ve,ke)}function $(re){if(!re||re.length===0)return!0;let ve=0;for(;ve<re.length;){if(!F.supportsEssentialProperty(re[ve]))return B.debug("[Stream] EssentialProperty not supported: "+re[ve].schemeIdUri),!1;ve+=1}return!0}return R={setConfig:function(re){re&&(re.adapter&&(P=re.adapter),re.capabilities&&(F=re.capabilities),re.settings&&(z=re.settings),re.protectionController&&(ne=re.protectionController),re.customParametersModel&&(Q=re.customParametersModel))},filterUnsupportedFeatures:function(re){return new Promise(ve=>{const Se=[j.default.VIDEO,j.default.AUDIO],ke=[];Se.forEach(Ie=>{(function(Le,Ye){if(!Le||!Le.Period||Le.Period.length===0)return[];const Te=new Set,ie=[];return Le.Period.forEach(le=>{le.AdaptationSet.forEach(he=>{P.getIsTypeOf(he,Ye)&&he.Representation.forEach((Pe,Ge)=>{const ze=P.getCodec(he,Ge,!1);X(Ye,Pe,ze,Te,ie);const Ve=P.getSupplementalCodecs(Pe);Ve.length>0&&X(Ye,Pe,Ve[0],Te,ie)})})}),ie})(re,Ie).forEach(Le=>{ke.push(F.runCodecSupportCheck(Le,Ie))})}),Promise.allSettled(ke).then(()=>(Se.forEach(Ie=>{(function(Ce,Le){Le&&Le.Period&&Le.Period.length!==0&&Le.Period.forEach(Ye=>{(function(Te,ie){Te&&Te.AdaptationSet&&Te.AdaptationSet.length!==0&&(Te.AdaptationSet=Te.AdaptationSet.filter(le=>{P.getIsTypeOf(le,ie)&&function(Pe,Ge){Pe.Representation&&Pe.Representation.length!==0&&(Pe.Representation=Pe.Representation.filter((ze,Ve)=>{const nt=P.getCodec(Pe,Ve,!1),rt=oe(Ge,ze,nt);let fe=function(me,Ue){let je=!1;const Ee=P.getSupplementalCodecs(me);return Ee.length>0&&(Ee.length>1&&B.warn("[CapabilitiesFilter] Multiple supplemental codecs not supported; using the first in list"),je=oe(Ue,me,Ee[0])),je}(ze,Ge);return fe&&(B.debug(`[CapabilitiesFilter] Codec supported. Upgrading codecs string of Representation with ID ${ze.id}`),ze.codecs=ze[M.default.SUPPLEMENTAL_CODECS]),rt||fe||B.warn(`[CapabilitiesFilter] Codec ${nt} not supported. Removing Representation with ID ${ze.id}`),rt||fe}))}(le,ie);const he=le.Representation&&le.Representation.length>0;return he||(C.trigger(x.default.ADAPTATION_SET_REMOVED_NO_CAPABILITIES,{adaptationSet:le}),B.warn(`[CapabilitiesFilter] AdaptationSet with ID ${le.id?le.id:"undefined"} and codec ${le.codecs?le.codecs:"undefined"} has been removed because of no supported Representation`)),he}))})(Ye,Ce)})})(Ie,re)}),z.get().streaming.capabilities.filterUnsupportedEssentialProperties&&function(Ie){Ie&&Ie.Period&&Ie.Period.length!==0&&Ie.Period.forEach(Ce=>{Ce.AdaptationSet=Ce.AdaptationSet.filter(Le=>!Le.Representation||Le.Representation.length===0||!!$(P.getEssentialPropertiesForAdaptationSet(Le))&&(Le.Representation=Le.Representation.filter(Ye=>$(P.getEssentialPropertiesForRepresentation(Ye))),Le.Representation&&Le.Representation.length>0))})}(re),function(Ie){if(!Ie||!Ie.Period||Ie.Period.length===0)return Promise.resolve();const Ce=[];return Ie.Period.forEach(Le=>{Ce.push(function(Ye){return new Promise(Te=>{if(!Ye||!Ye.AdaptationSet||Ye.AdaptationSet.length===0)return void Te();const ie=[];Ye.AdaptationSet.forEach(le=>{ie.push(function(he){return new Promise(Pe=>{if(!he.Representation||he.Representation.length===0)return void Pe();const Ge=[];he.Representation.forEach(ze=>{Ge.push(function(Ve){const nt=[],rt=Q.getCustomCapabilitiesFilters();return rt&&rt.length!==0?rt.forEach(fe=>{nt.push(new Promise(me=>me(fe(Ve))))}):nt.push(Promise.resolve(!0)),Promise.all(nt)}(ze))}),Promise.all(Ge).then(ze=>{he.Representation=he.Representation.filter((Ve,nt)=>{let rt=ze[nt].every(fe=>fe);return rt||B.debug("[Stream] Representation "+Ve.id+" has been removed because of unsupported CustomFilter"),rt}),Pe()}).catch(ze=>{B.warn("[Stream] at least one promise rejected in CustomFilter with error: ",ze),Pe()})})}(le))}),Promise.all(ie).then(()=>{Ye.AdaptationSet=Ye.AdaptationSet.filter(le=>le.Representation&&le.Representation.length>0),Te()}).catch(()=>{Te()})})}(Le))}),Promise.all(Ce)}(re))).then(()=>{ve()}).catch(Ie=>{B.error(Ie),ve()})})}},B=(0,$e.default)(D).getInstance().getLogger(R),R}Wy.__dashjs_factory_name="CapabilitiesFilter";var ep=ue.default.getSingletonFactory(Wy),tb=class{constructor(){this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null}};function Vr(){let D,C;return D={initialize:function(R){if(C=new tb,!R)return null;const P=R.indexOf("#");if(P!==-1){const F=R.substr(P+1).split("&");for(let z=0,Q=F.length;z<Q;++z){const ne=F[z],B=ne.indexOf("=");if(B!==-1){const oe=ne.substring(0,B);C.hasOwnProperty(oe)&&(C[oe]=ne.substr(B+1))}}}},getURIFragmentData:function(){return C}},D}Vr.__dashjs_factory_name="URIFragmentModel";var Xy=ue.default.getSingletonFactory(Vr);function tp(){let D,C,R=this.context,P=(0,K.default)(R).getInstance();return D={getValue:function(){return C},setValue:function(F){C=F,F&&P.trigger(x.default.MANIFEST_LOADED,{data:F})}},D}tp.__dashjs_factory_name="ManifestModel";var nb=ue.default.getSingletonFactory(tp);function Qy(){let D,C,R,P;const F=this.context,z=(0,ge.default)(F).getInstance();function Q(q,$){return isNaN(q)?0:q>0?($&&C.warn("Supplied minimum playback rate is a positive value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):q<-.5?($&&C.warn("Supplied minimum playback rate is out of range and will be limited to -0.5: -50% playback speed."),-.5):q}function ne(q,$){return isNaN(q)?0:q<0?($&&C.warn("Supplied maximum playback rate is a negative value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):q>1?($&&C.warn("Supplied maximum playback rate is out of range and will be limited to 1: 200% playback speed."),1):q}function B(){const q=oe(),$=R.getLiveDelay();return!isNaN($)&&$>0?Math.min(q,$):q}function oe(){return z.get().streaming.buffer.bufferTimeDefault>0?z.get().streaming.buffer.bufferTimeDefault:X()?20:12}function X(){return z.get().streaming.buffer.fastSwitchEnabled!==null?z.get().streaming.buffer.fastSwitchEnabled:!R.getLowLatencyModeEnabled()}return D={getCatchupMaxDrift:function(){if(!isNaN(z.get().streaming.liveCatchup.maxDrift)&&z.get().streaming.liveCatchup.maxDrift>=0)return z.get().streaming.liveCatchup.maxDrift;const q=P.getServiceDescriptionSettings();return q&&q.liveCatchup&&!isNaN(q.liveCatchup.maxDrift)&&q.liveCatchup.maxDrift>=0?q.liveCatchup.maxDrift:12},getCatchupModeEnabled:function(){return z.get().streaming.liveCatchup.enabled!==null?z.get().streaming.liveCatchup.enabled:R.getInitialCatchupModeActivated()},getBufferTimeDefault:B,getBufferTimeDefaultUnadjusted:oe,getFastSwitchEnabled:X,getInitialBufferLevel:function(){const q=z.get().streaming.buffer.initialBufferLevel;return isNaN(q)||q<0?0:Math.min(B(),q)},getRetryAttemptsForType:function(q){const $=isNaN(z.get().streaming.retryAttempts.lowLatencyMultiplyFactor)?5:z.get().streaming.retryAttempts.lowLatencyMultiplyFactor;return R.getLowLatencyModeEnabled()?z.get().streaming.retryAttempts[q]*$:z.get().streaming.retryAttempts[q]},getRetryIntervalsForType:function(q){const $=isNaN(z.get().streaming.retryIntervals.lowLatencyReductionFactor)?10:z.get().streaming.retryIntervals.lowLatencyReductionFactor;return R.getLowLatencyModeEnabled()?z.get().streaming.retryIntervals[q]/$:z.get().streaming.retryIntervals[q]},getCatchupPlaybackRates:function(q){const $=z.get().streaming.liveCatchup.playbackRate;if(!isNaN($.min)||!isNaN($.max))return{min:Q($.min,q),max:ne($.max,q)};const re=P.getServiceDescriptionSettings();if(re&&re.liveCatchup&&(!isNaN(re.liveCatchup.playbackRate.min)||!isNaN(re.liveCatchup.playbackRate.max))){const ve=re.liveCatchup.playbackRate;return{min:Q(ve.min,q),max:ne(ve.max,q)}}return{min:-.5,max:.5}},getAbrBitrateParameter:function(q,$){try{const re=z.get().streaming.abr[q][$];if(!isNaN(re)&&re!==-1)return re;const ve=P.getServiceDescriptionSettings();return ve&&ve[q]&&!isNaN(ve[q][$])?ve[q][$]:-1}catch{return-1}},setConfig:function(q){q.playbackController&&(R=q.playbackController),q.serviceDescriptionController&&(P=q.serviceDescriptionController)},reset:function(){}},C=(0,$e.default)(F).getInstance().getLogger(D),D}Qy.__dashjs_factory_name="MediaPlayerModel";var Jy=ue.default.getSingletonFactory(Qy);const Wd={DEFAULT:.5,STRONG:1,WEAK:0};function qo(D,C,R,P){let F,z,Q,ne,B;return z=D===void 0?null:D,Q=function(oe){let X=Wd.DEFAULT;return oe!==Wd.DEFAULT&&oe!==Wd.STRONG&&oe!==Wd.WEAK||(X=oe),X}(R),ne=C===void 0?null:C,B=P===void 0?null:P,F={representation:z,reason:ne,rule:B,priority:Q},F}qo.__dashjs_factory_name="SwitchRequest";const mr=ue.default.getClassFactory(qo);mr.NO_CHANGE=null,mr.PRIORITY=Wd,ue.default.updateClassFactory(qo.__dashjs_factory_name,mr);var Fi=mr;function yc(D){D=D||{};const C=this.context,R=D.dashMetrics;let P,F;return P={getSwitchRequest:function(z){try{const Q=Fi(C).create();Q.rule=this.getClassName();const ne=z.getMediaInfo(),B=z.getMediaType(),oe=R.getCurrentBufferState(B),X=z.getScheduleController(),q=z.getAbrController(),$=z.getStreamInfo(),re=$?$.id:null,ve=$&&$.manifestInfo?$.manifestInfo.isDynamic:null,Se=z.getThroughputController(),ke=Se.getSafeAverageThroughput(B),Ie=Se.getAverageLatency(B);return isNaN(ke)||!oe||q.getAbandonmentStateFor(re,B)===Z.ALLOW_LOAD&&(oe.state===Z.BUFFER_LOADED||ve)&&(Q.representation=q.getOptimalRepresentationForBitrate(ne,ke,!0),Q.reason={throughput:ke,latency:Ie,message:`[ThroughputRule]: Switching to Representation with bitrate ${Q.representation?Q.representation.bitrateInKbit:"n/a"} kbit/s. Throughput: ${ke}`},X.setTimeToLoadDelay(0)),Q}catch(Q){return F.error(Q),Fi(C).create()}},reset:function(){}},F=(0,$e.default)(C).getInstance().getLogger(P),P}yc.__dashjs_factory_name="ThroughputRule";var np=ue.default.getClassFactory(yc);function od(D){D=D||{};const C=this.context,R=(0,K.default)(C).getInstance(),P=D.dashMetrics,F=(0,ge.default)(C).getInstance();let z,Q,ne;function B(){const q=F.get().streaming.abr.rules.insufficientBufferRule.parameters.segmentIgnoreCount;ne={},ne[j.default.VIDEO]={ignoreCount:q},ne[j.default.AUDIO]={ignoreCount:q}}function oe(){B()}function X(q){isNaN(q.startTime)||q.mediaType!==j.default.AUDIO&&q.mediaType!==j.default.VIDEO||ne[q.mediaType].ignoreCount>0&&ne[q.mediaType].ignoreCount--}return z={getSwitchRequest:function(q){const $=Fi(C).create();if($.rule=this.getClassName(),!q||!q.hasOwnProperty("getMediaType"))return $;const re=q.getMediaType(),ve=P.getCurrentBufferState(re),Se=q.getRepresentation().fragmentDuration;if(!function(Ce,Le,Ye){return!Ce.getLowLatencyModeEnabled()&&ne[Le].ignoreCount<=0&&Ye}(q.getScheduleController().getPlaybackController(),re,Se))return $;const ke=q.getMediaInfo(),Ie=q.getAbrController();if(ve&&ve.state===Z.BUFFER_EMPTY)Q.debug("["+re+"] Switch to index 0; buffer is empty."),$.representation=Ie.getOptimalRepresentationForBitrate(ke,0,!0),$.reason={message:"[InsufficientBufferRule]: Switching to lowest Representation because buffer is empty"};else{const Ce=q.getThroughputController(),Le=P.getCurrentBufferLevel(re),Ye=Ce.getAverageThroughput(re,null,NaN)*F.get().streaming.abr.rules.insufficientBufferRule.parameters.throughputSafetyFactor*Le/Se;if(isNaN(Ye)||Ye<=0)return $;$.representation=Ie.getOptimalRepresentationForBitrate(ke,Ye,!0),$.reason={message:"[InsufficientBufferRule]: Limiting maximum bitrate to avoid a buffer underrun.",bitrate:Ye}}return $},reset:function(){B(),R.off(xe.default.PLAYBACK_SEEKING,oe,z),R.off(x.default.BYTES_APPENDED_END_FRAGMENT,X,z)}},Q=(0,$e.default)(C).getInstance().getLogger(z),B(),R.on(xe.default.PLAYBACK_SEEKING,oe,z),R.on(x.default.BYTES_APPENDED_END_FRAGMENT,X,z),z}od.__dashjs_factory_name="InsufficientBufferRule";var Zy=ue.default.getClassFactory(od);function jg(D){const C=(D=D||{}).mediaPlayerModel,R=D.dashMetrics,P=this.context,F=(0,ge.default)(P).getInstance();let z,Q,ne;function B(){ne={}}return z={shouldAbandon:function(oe){const X=Fi(P).create();X.rule=this.getClassName();try{if(!oe)return X;const q=oe.getCurrentRequest();if(!isNaN(q.index)){if(q.firstByteDate===null||ne.hasOwnProperty(q.index))return X;const $=C.getBufferTimeDefault(),re=oe.getMediaType();if(R.getCurrentBufferLevel(re)>$)return X;const ve=Date.now()-q.firstByteDate.getTime();if(q.traces.length>=F.get().streaming.abr.rules.abandonRequestsRule.parameters.minThroughputSamplesThreshold&&ve>F.get().streaming.abr.rules.abandonRequestsRule.parameters.minSegmentDownloadTimeThresholdInMs&&q.bytesLoaded<q.bytesTotal)return function(Se,ke,Ie){const Ce=Se.getMediaInfo(),Le=Se.getMediaType(),Ye=ke.traces.reduce((Ge,ze)=>Ge+ze.b[0],0)-ke.traces[0].b[0],Te=Math.max(ke.traces.reduce((Ge,ze)=>Ge+ze.d,0)-ke.traces[0].d,1),ie=Math.round(8*Ye/Te),le=Number(8*ke.bytesTotal/ie/1e3).toFixed(2),he=Se.getRepresentation(),Pe=Se.getAbrController();if(le<ke.duration*F.get().streaming.abr.rules.abandonRequestsRule.parameters.abandonDurationMultiplier||Pe.isPlayingAtLowestQuality(he))return Ie;if(!ne.hasOwnProperty(ke.index)){const Ge=Se.getAbrController(),ze=ke.bytesTotal-ke.bytesLoaded,Ve=Ge.getOptimalRepresentationForBitrate(Ce,ie,!0),nt=ke.representation;ze>ke.bytesTotal*Ve.bitrateInKbit/nt.bitrateInKbit&&(Ie.representation=Ve,Ie.reason={throughputInKbit:ie,message:`[AbandonRequestRule][${Le} is asking to abandon and switch to quality to ${Ve.absoluteIndex}. The measured bandwidth was ${ie} kbit/s`},ne[ke.index]=!0)}return Ie}(oe,q,X)}return X}catch(q){return Q.error(q),X}},reset:B},Q=(0,$e.default)(P).getInstance().getLogger(z),B(),z}jg.__dashjs_factory_name="AbandonRequestsRule";var ib=ue.default.getClassFactory(jg);function Jn(){const D=this.context,C=(0,ge.default)(D).getInstance();let R;return R={getSwitchRequest:function(P){const F=Fi(D).create();if(F.rule=this.getClassName(),!P||!P.hasOwnProperty("getDroppedFramesHistory"))return F;const z=P.getDroppedFramesHistory();if(!z)return F;const Q=P.getStreamInfo().id,ne=P.getMediaInfo(),B=P.getAbrController(),oe=z.getFrameHistory(Q);if(!oe||Object.keys(oe).length===0)return F;let X=0,q=0;const $=B.getPossibleVoRepresentationsFilteredBySettings(ne,!0);let re=null;for(let ve=1;ve<$.length;ve++){const Se=$[ve];if(Se&&oe[Se.id]&&(X=oe[Se.id].droppedVideoFrames,q=oe[Se.id].totalVideoFrames,q>C.get().streaming.abr.rules.droppedFramesRule.parameters.minimumSampleSize&&X/q>C.get().streaming.abr.rules.droppedFramesRule.parameters.droppedFramesPercentageThreshold)){re=$[ve-1];break}}return re&&(F.representation=re,F.reason={droppedFrames:X,message:`[DroppedFramesRule]: Switching to index ${re.absoluteIndex}. Dropped Frames: ${X}, Total Frames: ${q}`}),F}},R}Jn.__dashjs_factory_name="DroppedFramesRule";var e0=ue.default.getClassFactory(Jn);function th(){const D=this.context,C=(0,ge.default)(D).getInstance();let R;return R={getSwitchRequest:function(P){const F=Fi(D).create();if(F.rule=this.getClassName(),!P)return F;const z=P.getStreamInfo().id,Q=P.getMediaType(),ne=P?P.getSwitchRequestHistory():null,B=ne?ne.getSwitchRequests(z,Q):{},oe=P.getAbrController(),X=P.getMediaInfo(),q=oe.getPossibleVoRepresentationsFilteredBySettings(X,!0);let $=0,re=0;for(let ve=0;ve<q.length;ve++){const Se=q[ve];if(Se&&B[Se.id]&&($+=B[Se.id].drops,re+=B[Se.id].noDrops,$+re>=C.get().streaming.abr.rules.switchHistoryRule.parameters.sampleSize&&$/re>C.get().streaming.abr.rules.switchHistoryRule.parameters.switchPercentageThreshold)){F.representation=ve>0&&B[Se.id].drops>0?q[ve-1]:Se,F.reason={drops:$,noDrops:re,message:`[SwitchHistoryRule]: Switch to index: ${F.representation.absoluteIndex} samples: ${$+re} drops:  ${$}`};break}}return F}},R}th.__dashjs_factory_name="SwitchHistoryRule";var xr=ue.default.getClassFactory(th);const Ho="BOLA_STATE_ONE_BITRATE",du="BOLA_STATE_STARTUP",Dr="BOLA_STATE_STEADY",To=10;function qg(D){D=D||{};const C=this.context,R=D.dashMetrics,P=D.mediaPlayerModel,F=(0,K.default)(C).getInstance(),z=ju(C).getInstance();let Q,ne,B;function oe(le){const he=le.mediaType,Pe=le.streamId,Ge=he===j.default.AUDIO?[j.default.AUDIO]:B[Pe];for(const ze in Ge)B[Pe]&&B[Pe].hasOwnProperty(ze)&&B[Pe][ze].state===Dr&&(B[Pe][ze].placeholderBuffer=0)}function X(le){const he=le.streamId;for(const Pe in B[he])if(B[he].hasOwnProperty(Pe)){const Ge=B[he][Pe];Ge.state!==Ho&&(Ge.state=du,q(Ge))}}function q(le){le.placeholderBuffer=0,le.mostAdvancedSegmentStart=NaN,le.lastSegmentWasReplacement=!1,le.lastSegmentStart=NaN,le.lastSegmentDurationS=NaN,le.lastSegmentRequestTimeMs=NaN,le.lastSegmentFinishTimeMs=NaN}function $(le){try{if(le&&le.metric===Z.HTTP_REQUEST&&le.value&&le.value.type===Xe.HTTPRequest.MEDIA_SEGMENT_TYPE&&le.value.trace&&le.value.trace.length){const he=B[le.value._streamId]&&B[le.value._streamId][le.mediaType]?B[le.value._streamId][le.mediaType]:null;he&&he.state!==Ho&&(he.lastSegmentRequestTimeMs=le.value.trequest.getTime(),he.lastSegmentFinishTimeMs=le.value._tfinish.getTime(),re(he,le.mediaType))}}catch(he){ne.error(he)}}function re(le,he){if(!isNaN(le.lastSegmentStart)&&!isNaN(le.lastSegmentRequestTimeMs)&&!isNaN(le.placeholderBuffer)){if(le.placeholderBuffer*=.99,!isNaN(le.lastSegmentFinishTimeMs)){const Pe=R.getCurrentBufferLevel(he)+.001*(le.lastSegmentFinishTimeMs-le.lastSegmentRequestTimeMs),Ge=Ie(le,le.currentRepresentation),ze=Math.max(0,Ge-Pe);le.placeholderBuffer=Math.min(ze,le.placeholderBuffer)}le.lastSegmentWasReplacement&&!isNaN(le.lastSegmentDurationS)&&(le.placeholderBuffer+=le.lastSegmentDurationS),le.lastSegmentStart=NaN,le.lastSegmentRequestTimeMs=NaN}}function ve(le){if(le&&B[le.streamId]&&B[le.streamId][le.mediaType]){const he=B[le.streamId][le.mediaType];he&&he.state!==Ho&&(he.currentRepresentation=le.newRepresentation)}}function Se(le,he,Pe){const Ge=Pe.reduce((nt,rt,fe)=>rt>Pe[nt]?fe:nt,0);if(Ge===0)return null;const ze=Math.max(le,To+2*he.length),Ve=(Pe[Ge]-1)/(ze/To-1);return{gp:Ve,Vp:To/Ve}}function ke(le,he){const Pe=P.getBufferTimeDefault();if(le.bufferTimeDefault!==Pe){const Ge=Se(Pe,le.representations,le.utilities);if(Ge.Vp!==le.Vp||Ge.gp!==le.gp){const ze=R.getCurrentBufferLevel(he);let Ve=ze+le.placeholderBuffer;Ve-=To,Ve*=Ge.Vp/le.Vp,Ve+=To,le.bufferTimeDefault=Pe,le.Vp=Ge.Vp,le.gp=Ge.gp,le.placeholderBuffer=Math.max(0,Ve-ze)}}}function Ie(le,he){return le.Vp*(le.utilities[he.absoluteIndex]+le.gp)}function Ce(le){if(le&&le.chunk&&le.chunk.representation.mediaInfo&&B[le.streamId]){const he=B[le.streamId][le.chunk.representation.mediaInfo.type];if(he&&he.state!==Ho){const Pe=le.chunk.start;isNaN(he.mostAdvancedSegmentStart)||Pe>he.mostAdvancedSegmentStart?(he.mostAdvancedSegmentStart=Pe,he.lastSegmentWasReplacement=!1):he.lastSegmentWasReplacement=!0,he.lastSegmentStart=Pe,he.lastSegmentDurationS=le.chunk.duration,he.currentRepresentation=le.chunk.representation,re(he,le.chunk.representation.mediaInfo.type)}}}function Le(){ie()}function Ye(le,he){const Pe=he.absoluteIndex,Ge=he.bandwidth,ze=le.utilities[Pe];let Ve=0;for(let nt=Pe-1;nt>=0;--nt)if(le.utilities[nt]<le.utilities[Pe]){const rt=le.representations[nt].bandwidth,fe=le.utilities[nt],me=le.Vp*(le.gp+(Ge*fe-rt*ze)/(Ge-rt));Ve=Math.max(Ve,me)}return Ve}function Te(le){if(le&&B[le.streamId]){const he=B[le.streamId][le.mediaType];if(he&&he.state!==Ho){const Pe=R.getCurrentBufferLevel(le.mediaType);let Ge;Ge=he.currentRepresentation.absoluteIndex>0?Ye(he,he.currentRepresentation):To;const ze=Math.max(0,Ge-Pe);he.placeholderBuffer=Math.min(he.placeholderBuffer,ze)}}}function ie(){B={}}return Q={getSwitchRequest:function(le){try{const he=Fi(C).create();le.getScheduleController().setTimeToLoadDelay(0),he.rule=this.getClassName(),he.reason=he.reason||{};const Pe=function(Ge){const ze=Ge.getMediaType(),Ve=Ge.getStreamInfo().id;B[Ve]||(B={},B[Ve]={});let nt=B[Ve][ze];return nt?nt.state!==Ho&&ke(nt,ze):(nt=function(rt){const fe={},me=rt.getMediaInfo(),Ue=z.getPossibleVoRepresentationsFilteredBySettings(me,!0);let je=Ue.map(de=>de.bandwidth).map(de=>Math.log(de));je=je.map(de=>de-je[0]+1);const Ee=P.getBufferTimeDefault(),ye=Se(Ee,Ue,je);return ye?(fe.state=du,fe.representations=Ue,fe.utilities=je,fe.bufferTimeDefault=Ee,fe.Vp=ye.Vp,fe.gp=ye.gp,fe.currentRepresentation=null,q(fe)):fe.state=Ho,fe}(Ge),B[Ve][ze]=nt),nt}(le);switch(he.reason.state=Pe.state,Pe.state){case Ho:break;case du:(function(Ge,ze,Ve){const nt=ze.getMediaType(),rt=ze.getThroughputController().getSafeAverageThroughput(nt);if(isNaN(rt))return;const fe=ze.getMediaInfo(),me=z.getOptimalRepresentationForBitrate(fe,rt,!0),Ue=R.getCurrentBufferLevel(nt);Ge.representation=me,Ge.reason.throughput=rt,Ve.placeholderBuffer=Math.max(0,Ye(Ve,me)-Ue),Ve.currentRepresentation=me,!isNaN(Ve.lastSegmentDurationS)&&Ue>=Ve.lastSegmentDurationS&&(Ve.state=Dr)})(he,le,Pe);break;case Dr:(function(Ge,ze,Ve){const nt=ze.getMediaType(),rt=ze.getThroughputController(),fe=ze.getMediaInfo(),me=rt.getSafeAverageThroughput(nt),Ue=ze.getScheduleController();(function(we,qe){const tt=Date.now();if(isNaN(we.lastSegmentFinishTimeMs)){if(!isNaN(we.lastCallTimeMs)){const mt=.001*(tt-we.lastCallTimeMs);we.placeholderBuffer+=Math.max(0,mt)}}else{const mt=.001*(tt-we.lastSegmentFinishTimeMs);we.placeholderBuffer+=Math.max(0,mt)}we.lastCallTimeMs=tt,we.lastSegmentStart=NaN,we.lastSegmentRequestTimeMs=NaN,we.lastSegmentFinishTimeMs=NaN,ke(we,qe)})(Ve,nt);const je=R.getCurrentBufferLevel(nt);let Ee=function(we,qe){const tt=we.representations.length;let mt=NaN,Tt=NaN;for(let Vt=0;Vt<tt;++Vt){let Jt=(we.Vp*(we.utilities[Vt]-1+we.gp)-qe)/we.representations[Vt].bandwidth;(isNaN(Tt)||Jt>=Tt)&&(Tt=Jt,mt=Vt)}return we.representations[mt]}(Ve,je+Ve.placeholderBuffer);const ye=z.getOptimalRepresentationForBitrate(fe,me,!0);Ee.absoluteIndex>Ve.currentRepresentation.absoluteIndex&&Ee.absoluteIndex>ye.absoluteIndex&&(Ee=ye.absoluteIndex>Ve.currentRepresentation.absoluteIndex?ye:Ve.currentRepresentation);let de=Math.max(0,je+Ve.placeholderBuffer-Ie(Ve,Ee));de<=Ve.placeholderBuffer?(Ve.placeholderBuffer-=de,de=0):(de-=Ve.placeholderBuffer,Ve.placeholderBuffer=0,z.isPlayingAtTopQuality(Ee)?de=0:Ue.setTimeToLoadDelay(1e3*de)),Ge.representation=Ee,Ge.reason.throughput=me,Ge.reason.bufferLevel=je,Ge.reason.placeholderBuffer=Ve.placeholderBuffer,Ge.reason.delay=de,Ve.currentRepresentation=Ee})(he,le,Pe);break;default:(function(Ge,ze,Ve){ne.debug("BOLA ABR rule invoked in bad state.");const nt=ze.getMediaInfo(),rt=ze.getMediaType(),fe=ze.getThroughputController().getSafeAverageThroughput(rt);Ge.representation=z.getOptimalRepresentationForBitrate(nt,fe,!0),Ge.reason.state=Ve.state,Ge.reason.throughput=fe,Ve.state=du,q(Ve)})(he,le,Pe)}return he}catch(he){return ne.error(he),Fi(C).create()}},handleNewMediaInfo:function(le){le&&le.streamInfo&&le.type&&B[le.streamInfo.id]&&B[le.streamInfo.id][le.type]&&delete B[le.streamInfo.id][le.type]},reset:function(){ie(),F.off(xe.default.BUFFER_EMPTY,oe,Q),F.off(xe.default.PLAYBACK_SEEKING,X,Q),F.off(xe.default.METRIC_ADDED,$,Q),F.off(xe.default.QUALITY_CHANGE_REQUESTED,ve,Q),F.off(xe.default.FRAGMENT_LOADING_ABANDONED,Te,Q),F.off(x.default.MEDIA_FRAGMENT_LOADED,Ce,Q),F.off(x.default.SETTING_UPDATED_MAX_BITRATE,Le,Q),F.off(x.default.SETTING_UPDATED_MIN_BITRATE,Le,Q)}},ne=(0,$e.default)(C).getInstance().getLogger(Q),ie(),F.on(xe.default.BUFFER_EMPTY,oe,Q),F.on(xe.default.PLAYBACK_SEEKING,X,Q),F.on(xe.default.METRIC_ADDED,$,Q),F.on(xe.default.QUALITY_CHANGE_REQUESTED,ve,Q),F.on(xe.default.FRAGMENT_LOADING_ABANDONED,Te,Q),F.on(x.default.MEDIA_FRAGMENT_LOADED,Ce,Q),F.on(x.default.SETTING_UPDATED_MAX_BITRATE,Le,Q),F.on(x.default.SETTING_UPDATED_MIN_BITRATE,Le,Q),Q}qg.__dashjs_factory_name="BolaRule";var ws=ue.default.getClassFactory(qg);const ip="L2A_STATE_ONE_BITRATE",nh="L2A_STATE_STARTUP",t0="L2A_STATE_STEADY",ih=Math.pow(4,.99);function Hg(D){D=D||{};const C=this.context,R=D.dashMetrics,P=(0,K.default)(C).getInstance();let F,z,Q,ne;function B(Se){Se.placeholderBuffer=0,Se.mostAdvancedSegmentStart=NaN,Se.lastSegmentWasReplacement=!1,Se.lastSegmentStart=NaN,Se.lastSegmentDurationS=NaN,Se.lastSegmentRequestTimeMs=NaN,Se.lastSegmentFinishTimeMs=NaN,Se.lastSegmentUrl=""}function oe(){for(const Se in z)if(z.hasOwnProperty(Se)){const ke=z[Se];ke.state!==ip&&(ke.state=nh,B(ke))}}function X(Se){if(Se&&Se.chunk&&Se.chunk.representation&&Se.chunk.representation.mediaInfo){const ke=z[Se.chunk.representation.mediaInfo.type],Ie=Q[Se.chunk.representation.mediaInfo.type];if(ke&&ke.state!==ip){const Ce=Se.chunk.start;isNaN(ke.mostAdvancedSegmentStart)||Ce>ke.mostAdvancedSegmentStart?(ke.mostAdvancedSegmentStart=Ce,ke.lastSegmentWasReplacement=!1):ke.lastSegmentWasReplacement=!0,ke.lastSegmentStart=Ce,ke.lastSegmentDurationS=Se.chunk.duration,ke.currentRepresentation=Se.chunk.representation,$(ke,Ie)}}}function q(Se){if(Se&&Se.metric===Z.HTTP_REQUEST&&Se.value&&Se.value.type===Xe.HTTPRequest.MEDIA_SEGMENT_TYPE&&Se.value.trace&&Se.value.trace.length){const ke=z[Se.mediaType],Ie=Q[Se.mediaType];ke&&ke.state!==ip&&(ke.lastSegmentRequestTimeMs=Se.value.trequest.getTime(),ke.lastSegmentFinishTimeMs=Se.value._tfinish.getTime(),$(ke,Ie))}}function $(Se,ke){isNaN(Se.lastSegmentStart)||isNaN(Se.lastSegmentRequestTimeMs)||(ke.segment_request_start_s=.001*Se.lastSegmentRequestTimeMs,ke.segment_download_finish_s=.001*Se.lastSegmentFinishTimeMs,Se.lastSegmentStart=NaN,Se.lastSegmentRequestTimeMs=NaN)}function re(Se,ke){if(Se.length!==ke.length)return-1;let Ie=0;for(let Ce=0;Ce<Se.length;Ce++)Ie+=Se[Ce]*ke[Ce];return Ie}function ve(){z={},Q={}}return F={getSwitchRequest:function(Se){try{const ke=Fi(C).create();ke.rule=this.getClassName();const Ie=Se.getMediaType(),Ce=Se.getScheduleController();if(ke.reason=ke.reason||{},Ie===j.default.AUDIO)return ke;Ce.setTimeToLoadDelay(0);const Le=function(Ye){const Te=Ye.getMediaType();let ie=z[Te];return ie||(ie=function(le){const he={},Pe=le.getMediaInfo();return he.state=nh,he.currentRepresentation=null,function(Ge){Ge&&Ge.type&&(Q[Ge.type]={},Q[Ge.type].w=[],Q[Ge.type].prev_w=[],Q[Ge.type].Q=0,Q[Ge.type].segment_request_start_s=0,Q[Ge.type].segment_download_finish_s=0,Q[Ge.type].B_target=1.5)}(Pe),B(he),he}(Ye),z[Te]=ie),ie}(Se);if(!Q[Ie])return ke;switch(ke.reason.state=Le.state,Le.state){case ip:break;case nh:(function(Ye,Te,ie){const le=Ye.getMediaInfo(),he=Ye.getMediaType(),Pe=Ye.getThroughputController().getSafeAverageThroughput(he);if(isNaN(Pe))return Te;const Ge=Ye.getAbrController(),ze=Ge.getOptimalRepresentationForBitrate(le,Pe,!0),Ve=R.getCurrentBufferLevel(he,!0),nt=Q[he],rt=Ge.getPossibleVoRepresentationsFilteredBySettings(le,!0);if(Te.representation=ze,Te.reason.throughput=Pe,ie.currentRepresentation=ze,!isNaN(ie.lastSegmentDurationS)&&Ve>=nt.B_target){ie.state=t0,nt.Q=ih;for(let fe=0;fe<rt.length;++fe)rt[fe].id===ie.currentRepresentation.id?nt.prev_w[fe]=1:nt.prev_w[fe]=0}})(Se,ke,Le);break;case t0:(function(Ye,Te,ie){let le=[];const he=Ye.getThroughputController(),Pe=Ye.getMediaType();let Ge=he.getAverageThroughput(Pe,j.default.THROUGHPUT_CALCULATION_MODES.ARITHMETIC_MEAN,1),ze=R.getCurrentHttpRequest(Pe),Ve=null;const nt=Q[Pe];if(Ge<1&&(Ge=1),ze.url===ie.lastSegmentUrl||ze.type===Xe.HTTPRequest.INIT_SEGMENT_TYPE)Ve=ie.currentRepresentation;else{let rt=ie.lastSegmentDurationS,fe=1;const me=Ye.getAbrController(),Ue=Ye.getMediaInfo(),je=me.getPossibleVoRepresentationsFilteredBySettings(Ue,!0);let Ee=Ye.getVideoModel().getPlaybackRate();const ye=Math.max(Math.pow(4,1),ih*Math.sqrt(4));for(let tt=0;tt<je.length;++tt){const mt=je[tt];Ee*mt.bitrateInKbit>Ge&&(fe=-1),nt.w[tt]=nt.prev_w[tt]+fe*(rt/(2*ye))*((nt.Q+ih)*(Ee*mt.bitrateInKbit/Ge))}nt.w=function(tt){const mt=tt.length;let Tt=!1,Vt=[];for(let Zn=0;Zn<mt;++Zn)Vt[Zn]=tt[Zn];let Jt=tt.sort(function(Zn,gi){return gi-Zn}),yn=0,Cn=0,Kn=[];for(let Zn=0;Zn<mt-1;++Zn)if(yn+=Jt[Zn],Cn=(yn-1)/(Zn+1),Cn>=Jt[Zn+1]){Tt=!0;break}Tt||(Cn=(yn+Jt[mt-1]-1)/mt);for(let Zn=0;Zn<mt;++Zn)Kn[Zn]=Math.max(Vt[Zn]-Cn,0);return Kn}(nt.w);for(let tt=0;tt<je.length;++tt)le[tt]=nt.w[tt]-nt.prev_w[tt],nt.prev_w[tt]=nt.w[tt];const de=je.map(tt=>tt.bandwidth);nt.Q=Math.max(0,nt.Q-rt+rt*Ee*((re(de,nt.prev_w)+re(de,le))/Ge));let we=[];for(let tt=0;tt<de.length;++tt)we[tt]=Math.abs(de[tt]-re(nt.w,de));const qe=we.indexOf(Math.min(...we));Ve=me.getRepresentationByAbsoluteIndex(qe,Ue,!0),Ve.absoluteIndex>ie.currentRepresentation.absoluteIndex&&de[ie.currentRepresentation.absoluteIndex+1]<=Ge&&(Ve=me.getRepresentationByAbsoluteIndex(ie.currentRepresentation.absoluteIndex+1,Ue,!0)),Ve.bitrateInKbit>=Ge&&(nt.Q=2*Math.max(ih,nt.Q)),ie.lastSegmentUrl=ze.url}Te.representation=Ve,ie.currentRepresentation=Te.representation})(Se,ke,Le);break;default:(function(Ye,Te,ie){const le=Ye.getAbrController(),he=Ye.getMediaInfo(),Pe=Ye.getMediaType(),Ge=Ye.getThroughputController().getSafeAverageThroughput(Pe);Te.representation=le.getOptimalRepresentationForBitrate(he,Ge,!0),Te.reason.throughput=Ge,ie.state=nh,B(ie)})(Se,ke,Le)}return ke}catch(ke){return ne.error(ke),Fi(C).create()}},reset:function(){ve(),P.off(x.default.PLAYBACK_SEEKING,oe,F),P.off(x.default.MEDIA_FRAGMENT_LOADED,X,F),P.off(x.default.METRIC_ADDED,q,F)}},ne=(0,$e.default)(C).getInstance().getLogger(F),ve(),P.on(x.default.PLAYBACK_SEEKING,oe,F),P.on(x.default.MEDIA_FRAGMENT_LOADED,X,F),P.on(x.default.METRIC_ADDED,q,F),F}Hg.__dashjs_factory_name="L2ARule";var rp=ue.default.getClassFactory(Hg);function Go(){const D=this.context;let C,R,P,F,z,Q,ne,B,oe;function X(){P=null,F=1,z=100,Q=0,ne=null,B=null,oe="dynamic_weight_selection"}function q(){let ke=0;if(P)for(let Ie=0;Ie<P.length;Ie++){let Ce=P[Ie];Ce.state.throughput>ke&&(ke=Ce.state.throughput)}return ke}function $(ke,Ie,Ce){let Le=ke.map((Ye,Te)=>Ce[Te]*Math.pow(Ye-Ie[Te],2)).reduce((Ye,Te)=>Ye+Te);return(Le<0?-1:1)*Math.sqrt(Math.abs(Le))}function re(ke,Ie){return $([ke.state.throughput,ke.state.latency,ke.state.rebuffer,ke.state.switch],[Ie.state.throughput,Ie.state.latency,Ie.state.rebuffer,Ie.state.switch],[1,1,1,1])}function ve(ke,Ie){for(let Ce=0;Ce<P.length;Ce++){let Le=P[Ce],Ye=.1;const Te=re(Le,ke);Se(Le,Ie,Math.exp(-1*Math.pow(Te,2)/(2*Math.pow(Ye,2))))}}function Se(ke,Ie,Ce){let Le=ke.state,Ye=[.01,.01,.01,.01];Le.throughput=Le.throughput+(Ie[0]-Le.throughput)*Ye[0]*Ce,Le.latency=Le.latency+(Ie[1]-Le.latency)*Ye[1]*Ce,Le.rebuffer=Le.rebuffer+(Ie[2]-Le.rebuffer)*Ye[2]*Ce,Le.switch=Le.switch+(Ie[3]-Le.switch)*Ye[3]*Ce}return C={getNextQuality:function(ke,Ie,Ce,Le,Ye,Te,ie,le){let he=Le,Pe=Ce;(function(je,Ee){if(!P){P=[];const ye=Ee.getPossibleVoRepresentationsFilteredBySettings(je,!0),de=ye.map(we=>we.bandwidth);Q=Math.min(...de),F=function(we){const qe=we.map(tt=>Math.pow(tt,2)).reduce((tt,mt)=>tt+mt);return Math.sqrt(qe)}(de),ye.forEach(we=>{let qe={representation:we,state:{throughput:we.bandwidth/F,latency:0,rebuffer:0,switch:0}};P.push(qe)}),B=function(we){let qe=[],tt=function(yn){let Cn=[];for(let Kn=0;Kn<yn;Kn++){let Zn=[Math.random()*q(),Math.random(),Math.random(),Math.random()];Cn.push(Zn)}return Cn}(Math.pow(we.length,2));qe.push(tt[0]);let mt=[1,1,1,1];for(let yn=1;yn<we.length;yn++){let Cn=null,Kn=null;for(let Zn=0;Zn<tt.length;Zn++){let gi=tt[Zn],_n=null;for(let ri=0;ri<qe.length;ri++){let pi=$(gi,qe[ri],mt);(_n===null||pi<_n)&&(_n=pi)}(Kn===null||_n>Kn)&&(Cn=gi,Kn=_n)}qe.push(Cn)}let Tt=null,Vt=null;for(let yn=0;yn<qe.length;yn++){let Cn=0;for(let Kn=0;Kn<qe.length;Kn++)yn!==Kn&&(Cn+=$(qe[yn],qe[Kn],mt));(Tt===null||Cn>Tt)&&(Tt=Cn,Vt=yn)}let Jt=[];for(Jt.push(qe[Vt]),qe.splice(Vt,1);qe.length>0;){let yn=null,Cn=null;for(let Kn=0;Kn<qe.length;Kn++){let Zn=$(Jt[0],qe[Kn],mt);(yn===null||Zn<yn)&&(yn=Zn,Cn=Kn)}Jt.push(qe[Cn]),qe.splice(Cn,1)}return Jt}(P)}})(Ie,ke);let Ge=Ce/F;Ge>1&&(Ge=q()),Le/=z;let ze=P.find(je=>je.representation.id===ie.id),Ve=ze.representation.bandwidth*le.getSegmentDuration()/Pe,nt=Math.max(0,Ve-Ye);if(Ye-Ve<le.getMinBuffer())return R.debug(`Buffer is low for bitrate= ${ze.representation.bandwidth} downloadTime=${Ve} currentBuffer=${Ye} rebuffer=${nt}`),function(je,Ee){let ye=0,de=je;if(P)for(let we=0;we<P.length;we++){let qe=P[we];qe.representation.bandwidth<je.representation.bandwidth&&qe.representation.bandwidth>ye&&Ee>qe.representation.bandwidth&&(ye=qe.representation.bandwidth,de=qe)}return de}(ze,Pe).representation;switch(oe){case"manual_weight_selection":ne=[.4,.4,.4,.4];break;case"random_weight_selection":ne=function(je){let Ee=[],ye=Math.sqrt(2/je);for(let de=0;de<4;de++)Ee.push(Math.random()*ye);return ne=Ee,ne}(P.length);break;default:(function(je,Ee,ye,de,we,qe){ne||(ne=B[B.length-1]);let tt=je.findWeightVector(P,Ee,ye,de,we,qe);tt!==null&&tt!==-1&&(ne=tt)})(le,he,Ye,nt,Pe,Te)}let rt=null,fe=null,me=null;for(let je=0;je<P.length;je++){let Ee=P[je],ye=Ee.state,de=[ye.throughput,ye.latency,ye.rebuffer,ye.switch],we=ne.slice(),qe=le.getNextBufferWithBitrate(Ee.representation.bandwidth,Ye,Pe),tt=qe<le.getMinBuffer();tt&&R.debug(`Buffer is low for bitrate=${Ee.representation.bandwidth} downloadTime=${Ve} currentBuffer=${Ye} nextBuffer=${qe}`),(Ee.representation.bandwidth>Ce-1e4||tt)&&Ee.representation.bandwidth!==Q&&(we[0]=100);let mt=$(de,[Ge,0,0,0],we);(rt===null||mt<rt)&&(rt=mt,fe=Ee.representation,me=Ee)}let Ue=Math.abs(ze.representation.bandwidth-me.representation.bandwidth)/F;return ve(ze,[Ge,Le,nt,Ue]),ve(me,[Ge,0,0,Ue]),fe},reset:function(){X()}},R=(0,$e.default)(D).getInstance().getLogger(C),X(),C}Go.__dashjs_factory_name="LearningAbrController";var n0=ue.default.getClassFactory(Go),sp=class{constructor(){this.type=null,this.lastBitrate=null,this.weights={},this.weights.bitrateReward=null,this.weights.bitrateSwitchPenalty=null,this.weights.rebufferPenalty=null,this.weights.latencyPenalty=null,this.weights.playbackSpeedPenalty=null,this.bitrateWSum=0,this.bitrateSwitchWSum=0,this.rebufferWSum=0,this.latencyWSum=0,this.playbackSpeedWSum=0,this.totalQoe=0}};function ld(){let D,C,R,P,F;function z(){C=null,R=null,P=null,F=null}function Q(B,oe,X,q){let $=new sp;return $.type=B,$.weights.bitrateReward=oe||1,$.weights.bitrateSwitchPenalty=1,$.weights.rebufferPenalty=X||1e3,$.weights.latencyPenalty=[],$.weights.latencyPenalty.push({threshold:1.1,penalty:.05*q}),$.weights.latencyPenalty.push({threshold:1e8,penalty:.1*X}),$.weights.playbackSpeedPenalty=q||200,$}function ne(B,oe,X,q,$){$.bitrateWSum+=$.weights.bitrateReward*B,$.lastBitrate&&($.bitrateSwitchWSum+=$.weights.bitrateSwitchPenalty*Math.abs(B-$.lastBitrate)),$.lastBitrate=B,$.rebufferWSum+=$.weights.rebufferPenalty*oe;for(let re=0;re<$.weights.latencyPenalty.length;re++){let ve=$.weights.latencyPenalty[re];if(X<=ve.threshold){$.latencyWSum+=ve.penalty*X;break}}$.playbackSpeedWSum+=$.weights.playbackSpeedPenalty*Math.abs(1-q),$.totalQoe=$.bitrateWSum-$.bitrateSwitchWSum-$.rebufferWSum-$.latencyWSum-$.playbackSpeedWSum}return D={setupPerSegmentQoe:function(B,oe,X){C=Q("segment",B,oe,X),R=B,P=oe,F=X},logSegmentMetrics:function(B,oe,X,q){C&&ne(B,oe,X,q,C)},getPerSegmentQoe:function(){return C},calculateSingleUseQoe:function(B,oe,X,q){let $=null;return R&&P&&F&&($=Q("segment",R,P,F)),$?(ne(B,oe,X,q,$),$.totalQoe):0},reset:function(){z()}},z(),D}ld.__dashjs_factory_name="LoLpQoeEvaluator";var Lr=ue.default.getClassFactory(ld);function ap(D){let C,R,P,F,z=D.targetLatency,Q=D.bufferMin,ne=D.segmentDuration,B=D.qoeEvaluator;function oe(){return ne}function X(q,$){const re=oe();let ve;return ve=$>re?q-re:q+re-$,ve}return C={getMinBuffer:function(){return Q},getSegmentDuration:oe,getNextBufferWithBitrate:function(q,$,re){return X($,q*ne/re)},getNextBuffer:X,findWeightVector:function(q,$,re,ve,Se,ke){let Ie=null,Ce=null,Le=null,Ye=Math.abs($-F);return q.forEach(Te=>{P.forEach(ie=>{ie[0];let le,he=ie[1],Pe=ie[2],Ge=(ie[3],Te.representation.bandwidth*ne/Se),ze=X(re,Ge);le=Pe===0?10:1/Pe;let Ve=le*Math.max(1e-5,Ge-ze);le=he===0?10:1/he;let nt=le*Te.state.latency,rt=B.calculateSingleUseQoe(Te.representation.bandwidth,Ve,nt,ke);(Ie===null||rt>Ie)&&function(fe,me,Ue){return!(fe>z+Ue)&&me>=Q}($,ze,Ye)&&(Ie=rt,Ce=ie,Le=Te.representation.bandwidth)})}),Ce===null&&Le===null&&(Ce=-1),F=$,Ce}},R=[.2,.4,.6,.8,1],P=function(q){let $=q.map(function(ve){return[ve]}),re=function(ve,Se,ke){if(ke===Se)return ve;let Ie=ve.length;for(let Ce=0;Ce<Ie;Ce++){let Le=ve.shift();for(let Ye=0;Ye<q.length;Ye++)ve.push(Le.concat(q[Ye]))}return re(ve,Se,ke+1)};return re($,4,1)}(R),F=0,C}ap.__dashjs_factory_name="LoLpWeightSelector";var rb=ue.default.getClassFactory(ap);function vc(D){let C,R,P,F,z=(D=D||{}).dashMetrics,Q=this.context;return R={getSwitchRequest:function(ne){try{let B=Fi(Q).create();B.rule=this.getClassName();let oe=ne.getMediaInfo().type,X=ne.getAbrController();const q=ne.getStreamInfo();let $=ne.getRepresentation();const re=ne.getMediaInfo(),ve=z.getCurrentBufferState(oe),Se=ne.getScheduleController(),ke=z.getCurrentBufferLevel(oe,!0),Ie=Se.getPlaybackController();let Ce=Ie.getCurrentLiveLatency();if(oe===j.default.AUDIO)return B;Ce||(Ce=0);const Le=Ie.getPlaybackRate(),Ye=ne.getThroughputController().getSafeAverageThroughput(oe);if(C.debug(`Throughput ${Math.round(Ye)} kbps`),isNaN(Ye)||!ve||X.getAbandonmentStateFor(q.id,oe)===Z.ABANDON_LOAD)return B;let Te=X.getPossibleVoRepresentationsFilteredBySettings(re,!0).map(rt=>rt.bandwidth),ie=ne.getRepresentation().fragmentDuration,le=Math.min(...Te)/1e3,he=Math.max(...Te)/1e3,Pe=$.bandwidth/1e3,Ge=z.getCurrentHttpRequest(oe,!0),ze=(Ge.tresponse.getTime()-Ge.trequest.getTime())/1e3,Ve=ze>ie?ze-ie:0;F.setupPerSegmentQoe(ie,he,le),F.logSegmentMetrics(Pe,Ve,Ce,Le);let nt=rb(Q).create({targetLatency:1.5,bufferMin:.3,segmentDuration:ie,qoeEvaluator:F});return B.representation=P.getNextQuality(X,re,1e3*Ye,Ce,ke,Le,$,nt),B.reason={throughput:Ye,latency:Ce},B.priority=Fi.PRIORITY.STRONG,Se.setTimeToLoadDelay(0),B}catch(B){throw B}},reset:function(){P.reset(),F.reset()}},C=(0,$e.default)(Q).getInstance().getLogger(R),P=n0(Q).create(),F=Lr(Q).create(),R}vc.__dashjs_factory_name="LoLPRule";var Gg=ue.default.getClassFactory(vc);function Pr(D){D=D||{};const C=this.context,R=D.mediaPlayerModel,P=D.customParametersModel,F=D.dashMetrics,z=D.settings,Q=(0,K.default)(C).getInstance();let ne,B,oe,X;function q(){Object.values(j.default.QUALITY_SWITCH_RULES).forEach(Ie=>{B=$(Ie,B)});let ke=Object.values(j.default.ABANDON_FRAGMENT_RULES);ke.forEach(Ie=>{oe=$(Ie,oe)}),P.getAbrCustomRules().forEach(function(Ie){Ie.type===j.default.RULES_TYPES.QUALITY_SWITCH_RULES&&B.push(Ie.rule(C).create()),Ie.type===j.default.RULES_TYPES.ABANDON_FRAGMENT_RULES&&ke.push(Ie.rule(C).create())}),B.length===0&&(B.push(ws(C).create({dashMetrics:F,mediaPlayerModel:R,settings:z})),B.push(np(C).create({dashMetrics:F})))}function $(ke,Ie){const Ce=ke.charAt(0).toLowerCase()+ke.slice(1);return z.get().streaming.abr.rules[Ce].active&&!function(Le,Ye){return Le.filter(Te=>Te.getClassName()===Ye).length>0}(Ie,ke)?(Ie.push(function(Le){switch(Le){case j.default.QUALITY_SWITCH_RULES.BOLA_RULE:return ws(C).create({dashMetrics:F,mediaPlayerModel:R,settings:z});case j.default.QUALITY_SWITCH_RULES.THROUGHPUT_RULE:return np(C).create({dashMetrics:F});case j.default.QUALITY_SWITCH_RULES.INSUFFICIENT_BUFFER_RULE:return Zy(C).create({dashMetrics:F,settings:z});case j.default.QUALITY_SWITCH_RULES.SWITCH_HISTORY_RULE:return xr(C).create();case j.default.QUALITY_SWITCH_RULES.DROPPED_FRAMES_RULE:return e0(C).create();case j.default.QUALITY_SWITCH_RULES.LEARN_TO_ADAPT_RULE:return rp(C).create({dashMetrics:F,settings:z});case j.default.QUALITY_SWITCH_RULES.LOL_PLUS_RULE:return Gg(C).create({dashMetrics:F});case j.default.ABANDON_FRAGMENT_RULES.ABANDON_REQUEST_RULE:return ib(C).create({dashMetrics:F,mediaPlayerModel:R,settings:z})}}(ke)),Ie):z.get().streaming.abr.rules[Ce].active?Ie:function(Le,Ye){return Le.filter(Te=>Te.getClassName()!==Ye)}(Ie,ke)}function re(ke){return ke.filter(Ie=>Ie.representation!==Fi.NO_CHANGE)}function ve(ke){const Ie={};let Ce,Le,Ye,Te=null;if(ke.length!==0){for(Ie[Fi.PRIORITY.STRONG]=null,Ie[Fi.PRIORITY.WEAK]=null,Ie[Fi.PRIORITY.DEFAULT]=null,Ce=0,Le=ke.length;Ce<Le;Ce+=1)Ye=ke[Ce],Ye.representation!==Fi.NO_CHANGE&&(Ie[Ye.priority]===null||Ie[Ye.priority].representation!==Fi.NO_CHANGE&&Ye.representation.bitrateInKbit<Ie[Ye.priority].representation.bitrateInKbit)&&(Ie[Ye.priority]=Ye);return Ie[Fi.PRIORITY.WEAK]&&Ie[Fi.PRIORITY.WEAK].representation!==Fi.NO_CHANGE&&(Te=Ie[Fi.PRIORITY.WEAK]),Ie[Fi.PRIORITY.DEFAULT]&&Ie[Fi.PRIORITY.DEFAULT].representation!==Fi.NO_CHANGE&&(Te=Ie[Fi.PRIORITY.DEFAULT]),Ie[Fi.PRIORITY.STRONG]&&Ie[Fi.PRIORITY.STRONG].representation!==Fi.NO_CHANGE&&(Te=Ie[Fi.PRIORITY.STRONG]),Te}}function Se(){q()}return ne={clearDataForStream:function(ke){[B,oe].forEach(Ie=>{Ie&&Ie.length&&Ie.forEach(Ce=>Ce.clearDataForStream&&typeof Ce.clearDataForStream=="function"&&Ce.clearDataForStream(ke))})},getAbandonFragmentRules:function(){return oe},getBestPossibleSwitchRequest:function(ke){return ke&&ve(re(B.filter(Ie=>{const Ce=Ie.getClassName();if(Ce!==j.default.QUALITY_SWITCH_RULES.BOLA_RULE&&Ce!==j.default.QUALITY_SWITCH_RULES.THROUGHPUT_RULE)return!0;const Le=ke.getMediaType();return X[Le]&&Ce===j.default.QUALITY_SWITCH_RULES.BOLA_RULE||!X[Le]&&Ce===j.default.QUALITY_SWITCH_RULES.THROUGHPUT_RULE}).map(Ie=>Ie.getSwitchRequest(ke))))||Fi(C).create()},getBolaState:function(ke){return X[ke]},getMinSwitchRequest:ve,getQualitySwitchRules:function(){return B},handleNewMediaInfo:function(ke){B.forEach(Ie=>Ie.handleNewMediaInfo&&Ie.handleNewMediaInfo(ke)),oe.forEach(Ie=>Ie.handleNewMediaInfo&&Ie.handleNewMediaInfo(ke))},initialize:function(){B=[],oe=[],X={},q(),Q.on(x.default.SETTING_UPDATED_ABR_ACTIVE_RULES,Se,ne)},reset:function(){[B,oe].forEach(ke=>{ke&&ke.length&&ke.forEach(Ie=>Ie.reset&&Ie.reset())}),B=[],oe=[],X={},Q.off(x.default.SETTING_UPDATED_ABR_ACTIVE_RULES,Se,ne)},setBolaState:function(ke,Ie){X[ke]=Ie},shouldAbandonFragment:function(ke){if(!ke)return Fi(C).create();const Ie=ve(re(oe.map(Ce=>Ce.shouldAbandon(ke))));return Ie&&(Ie.reason.forceAbandon=!0),Ie||Fi(C).create()}},ne}Pr.__dashjs_factory_name="ABRRulesCollection";const fu=ue.default.getClassFactory(Pr);ue.default.updateSingletonFactory(Pr.__dashjs_factory_name,fu);var i0=fu;function Ar(D){let C;const R=(D=D||{}).abrController,P=D.throughputController,F=D.switchRequestHistory,z=D.droppedFramesHistory,Q=D.currentRequest,ne=D.streamProcessor?D.streamProcessor.getScheduleController():null,B=D.streamProcessor?D.streamProcessor.getRepresentation():null,oe=D.videoModel?D.videoModel:null;function X(){return B?B.mediaInfo:null}return C={getAbrController:function(){return R},getCurrentRequest:function(){return Q},getDroppedFramesHistory:function(){return z},getMediaInfo:X,getMediaType:function(){const q=X();return q?q.type:null},getRepresentation:function(){return B},getScheduleController:function(){return ne},getStreamInfo:function(){const q=X();return q?q.streamInfo:null},getSwitchRequestHistory:function(){return F},getThroughputController:function(){return P},getVideoModel:function(){return oe}},C}Ar.__dashjs_factory_name="RulesContext";var $i=ue.default.getClassFactory(Ar);function zu(){let D={},C={};const R=this.context,P=(0,ge.default)(R).getInstance();return{clearForStream:function(F){delete D[F],delete C[F]},getSwitchRequests:function(F,z){return F!=null&&z!=null&&D[F]&&D[F][z]?D[F][z]:{}},push:function(F){const z=F.currentRepresentation,Q=F.newRepresentation;if(z.mediaInfo.streamInfo.id!==Q.mediaInfo.streamInfo.id||Q.mediaInfo.id!==z.mediaInfo.id)return;const ne=z.mediaInfo.streamInfo.id;D[ne]||function(Se){D[Se]={},C[Se]={}}(ne);const B=z.mediaInfo.type;D[ne][B]||function(Se,ke){D[Se][ke]={},C[Se][ke]=[]}(ne,B);const oe=F.currentRepresentation.id;D[ne][B][oe]||function(Se,ke,Ie){D[Se][ke][Ie]={noDrops:0,drops:0,dropSize:0}}(ne,B,oe);let X=F.newRepresentation.absoluteIndex-F.currentRepresentation.absoluteIndex,q=X<0?1:0,$=q?-X:0,re=q?0:1;D[ne][B][F.currentRepresentation.id].drops+=q,D[ne][B][F.currentRepresentation.id].dropSize+=$,D[ne][B][F.currentRepresentation.id].noDrops+=re,C[ne][B].push({id:F.currentRepresentation.id,noDrop:re,drop:q,dropSize:$});const ve=function(Se,ke){return C[Se][ke].length>P.get().streaming.abr.rules.switchHistoryRule.parameters.sampleSize?C[Se][ke].shift():null}(ne,B);ve&&function(Se,ke,Ie){D[Se][ke][Ie.id].drops-=Ie.drop,D[Se][ke][Ie.id].dropSize-=Ie.dropSize,D[Se][ke][Ie.id].noDrops-=Ie.noDrop}(ne,B,ve)},reset:function(){D={},C={}}}}zu.__dashjs_factory_name="SwitchRequestHistory";var to=ue.default.getClassFactory(zu);function op(){let D={},C={},R={};return{clearForStream:function(P){delete D[P],delete C[P],delete R[P]},getFrameHistory:function(P){return D[P]},push:function(P,F,z){if(!F)return;D[P]||function(q){D[q]=[],C[q]=0,R[q]=0}(P);let Q=z&&z.droppedVideoFrames?z.droppedVideoFrames:0,ne=z&&z.totalVideoFrames?z.totalVideoFrames:0,B=Q-C[P];C[P]=Q;let oe=ne-R[P];R[P]=ne;const X=D[P];X[F]?(X[F].droppedVideoFrames+=B,X[F].totalVideoFrames+=oe):X[F]={droppedVideoFrames:B,totalVideoFrames:oe}},reset:function(){D={},C={},R={}}}}op.__dashjs_factory_name="DroppedFramesHistory";var Xd=ue.default.getClassFactory(op);function lp(){const D=this.context,C=(0,$e.default)(D).getInstance(),R=(0,K.default)(D).getInstance();let P,F,z,Q,ne,B,oe,X,q,$,re,ve,Se,ke,Ie,Ce,Le,Ye,Te,ie;function le(){oe={},B={},Le&&Le.reset(),Ce&&Ce.reset(),Ie=void 0,Le=void 0,Ce=void 0,clearTimeout(X),X=null}function he(me){let Ue=Pe(me,!(arguments.length>1&&arguments[1]!==void 0)||arguments[1]);return Ue=function(je){try{return function(Ee){try{if(!ie.get().streaming.cmsd.enabled||!ie.get().streaming.cmsd.abr.applyMb)return Ee;const ye=Ee.filter(de=>{const we=de.mediaInfo.type;let qe=Se.getMaxBitrate(we);if(we!==j.default.VIDEO||qe<0)return!0;const tt=de.mediaInfo.streamInfo.id;return qe-=B[tt][j.default.AUDIO].getRepresentation().bitrateInKbit||0,de.bitrateInKbit<=qe});return ye.length>0?ye:Ee}catch(ye){return F.error(ye),Ee}}(je=function(Ee){try{if(!ie.get().streaming.abr.limitBitrateByPortal)return Ee;const{elementWidth:ye}=$.getVideoElementSize(),de=Ee.filter(we=>we.mediaInfo.type!==j.default.VIDEO||we.width<=ye);return de.length>0?de:Ee}catch(ye){return F.error(ye),Ee}}(je=function(Ee){try{const ye=Ee.filter(de=>{const we=de.mediaInfo.type,qe=de.bitrateInKbit,tt=re.getAbrBitrateParameter("maxBitrate",we),mt=re.getAbrBitrateParameter("minBitrate",we);return!(tt>-1&&qe>tt||mt>-1&&qe<mt)});return ye.length>0?ye:Ee}catch(ye){return F.error(ye),Ee}}(je)))}catch(Ee){return F.error(Ee),je}}(Ue),Ue}function Pe(me,Ue){let je=[];return me&&(function(ye){try{const de=[];if(ye&&de.push(ye),!ie.get().streaming.abr.enableSupplementalPropertyAdaptationSetSwitching||!ye.adaptationSetSwitchingCompatibleIds||ye.adaptationSetSwitchingCompatibleIds.length===0)return de;const we=B[ye.streamInfo.id][ye.type].getAllMediaInfos().filter(qe=>ye.adaptationSetSwitchingCompatibleIds.includes(qe.id));return de.concat(we)}catch{return[ye]}}(me).forEach(ye=>{let de=q.getVoRepresentations(ye);de&&de.length>0&&(je=je.concat(de))}),je=function(ye){return ye=function(de){let we=null;return de.filter(qe=>(we||(we=qe.mediaInfo),!isNaN(qe.qualityRanking)&&q.areMediaInfosEqual(we,qe.mediaInfo))).length===de.length}(ye)?function(de){return de.sort((we,qe)=>qe.qualityRanking-we.qualityRanking),de}(ye):function(de){return de.sort((we,qe)=>q.areMediaInfosEqual(we.mediaInfo,qe.mediaInfo)?isNaN(we.pixelsPerSecond)||isNaN(qe.pixelsPerSecond)||we.pixelsPerSecond===qe.pixelsPerSecond?we.bandwidth-qe.bandwidth:we.pixelsPerSecond-qe.pixelsPerSecond:isNaN(we.pixelsPerSecond)||isNaN(qe.pixelsPerSecond)||we.pixelsPerSecond===qe.pixelsPerSecond?isNaN(we.bitsPerPixel)||isNaN(qe.bitsPerPixel)?we.bandwidth-qe.bandwidth:qe.bitsPerPixel-we.bitsPerPixel:we.pixelsPerSecond-qe.pixelsPerSecond),de}(ye)}(je),je.forEach((ye,de)=>{ye.absoluteIndex=de}),je=je.filter(ye=>{const de=!!Ue||q.areMediaInfosEqual(ye.mediaInfo,me),we=!ye||!ye.mediaInfo||ne.areKeyIdsUsable(ye.mediaInfo);return de&&we})),je}function Ge(me){const Ue=me.request.mediaType,je=me.streamId;if(!(Ue&&je&&B[je]&&ie.get().streaming.abr.autoSwitchBitrate[Ue]))return;const Ee=B[je][Ue];if(!Ee)return;const ye=$i(D).create({abrController:P,streamProcessor:Ee,currentRequest:me.request,throughputController:Ye,adapter:q,videoModel:$}),de=z.shouldAbandonFragment(ye);de&&de.representation!==Fi.NO_CHANGE&&function(we,qe,tt,mt,Tt){if(mt.getFragmentModel().getRequests({state:Qe.FRAGMENT_MODEL_LOADING,index:we.request.index})[0]){const Vt=function(Jt,yn){return oe[Jt]&&oe[Jt][yn]?oe[Jt][yn]:null}(qe,tt);Vt&&(Vt.state=Z.ABANDON_LOAD),Ce.reset(),nt(tt,Q.getActiveStreamInfo(),Tt.representation,Tt.reason),clearTimeout(X),X=setTimeout(()=>{Vt&&(oe[qe][tt].state=Z.ALLOW_LOAD),X=null},ie.get().streaming.abandonLoadTimeout)}}(me,je,Ue,Ee,de)}function ze(me){me.mediaType===j.default.VIDEO&&(Ie!==void 0&&Le.push(me.streamId,Ie,$.getPlaybackQuality()),Ie=me.newRepresentation.id)}function Ve(me){!fe()||me.metric!==Z.BUFFER_LEVEL||me.mediaType!==j.default.AUDIO&&me.mediaType!==j.default.VIDEO||function(Ue,je){try{const Ee=re.getBufferTimeDefault(),ye=Ee,de=.5*Ee,we=z.getBolaState(Ue),qe=je>=(we?de:ye);z.setBolaState(Ue,qe),qe!==we&&(qe?F.info("["+Ue+"] switching from throughput to buffer occupancy ABR rule (buffer: "+je.toFixed(3)+")."):F.info("["+Ue+"] switching from buffer occupancy to throughput ABR rule (buffer: "+je.toFixed(3)+")."))}catch(Ee){F.error(Ee)}}(me.mediaType,.001*me.value.level)}function nt(me,Ue,je){let Ee=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(!(Ue&&Ue.id&&me&&B&&B[Ue.id]&&B[Ue.id][me]&&je))return;const ye=B[Ue.id][me].getRepresentation();ye&&je.id===ye.id||rt(ye,je,Ee)}function rt(me,Ue,je){const Ee=Ue.mediaInfo.streamInfo.id,ye=Ue.mediaInfo.type;if(ye&&B[Ee]&&B[Ee][ye]){const de=B[Ee][ye].getStreamInfo(),we=Te.getCurrentBufferLevel(ye),qe=me!==null&&!q.areMediaInfosEqual(me.mediaInfo,Ue.mediaInfo),tt=me?me.bitrateInKbit:0;F.info(`[AbrController]: Switching quality in period ${Ee} for media type ${ye}. Switch from bitrate ${tt} to bitrate ${Ue.bitrateInKbit}. Current buffer level: ${we}. Reason:`+(je?JSON.stringify(je):"/")),R.trigger(x.default.QUALITY_CHANGE_REQUESTED,{oldRepresentation:me,newRepresentation:Ue,reason:je,streamInfo:de,mediaType:ye,isAdaptationSetSwitch:qe},{streamId:de.id,mediaType:ye});const mt=Ye.getAverageThroughput(ye);isNaN(mt)||ke.setSavedBitrateSettings(ye,mt)}}function fe(){return ie.get().streaming.abr.rules.bolaRule.active&&ie.get().streaming.abr.rules.throughputRule.active}return P={checkPlaybackQuality:function(me,Ue){try{if(!(me&&B&&B[Ue]&&B[Ue][me]))return!1;if(Le){const qe=$.getPlaybackQuality();qe&&Le.push(Ue,Ie,qe)}if(!ie.get().streaming.abr.autoSwitchBitrate[me])return!1;const je=B[Ue][me],Ee=je.getRepresentation(),ye=$i(D).create({abrController:P,throughputController:Ye,switchRequestHistory:Ce,droppedFramesHistory:Le,streamProcessor:je,adapter:q,videoModel:$}),de=z.getBestPossibleSwitchRequest(ye);if(!de||!de.representation)return!1;let we=de.representation;return Ce.push({currentRepresentation:Ee,newRepresentation:we}),we.id!==Ee.id&&(oe[Ue][me].state===Z.ALLOW_LOAD||we.absoluteIndex<Ee.absoluteIndex)&&(rt(Ee,we,de.reason),!0)}catch(je){return F.error(je),!1}},clearDataForStream:function(me){Le&&Le.clearForStream(me),B[me]&&delete B[me],Ce&&Ce.clearForStream(me),oe[me]&&delete oe[me],z.clearDataForStream(me)},getAbandonmentStateFor:function(me,Ue){return oe[me]&&oe[me][Ue]?oe[me][Ue].state:null},getInitialBitrateFor:function(me){if(me===j.default.TEXT)return NaN;let Ue=re.getAbrBitrateParameter("initialBitrate",me);if(Ue>0)return Ue;let je=NaN;if(ke&&ke.hasOwnProperty("getSavedBitrateSettings")&&(je=ke.getSavedBitrateSettings(me)),!isNaN(je))return je;const Ee=Ye.getAverageThroughput(me);return!isNaN(Ee)&&Ee>0?Ee:me===j.default.VIDEO?1e3:100},getOptimalRepresentationForBitrate:function(me,Ue){const je=he(me,!(arguments.length>2&&arguments[2]!==void 0)||arguments[2]);if(!je||je.length===0)return null;const Ee=je.reduce((de,we)=>de.bandwidth<we.bandwidth?de:we);if(Ue<=0)return Ee;const ye=je.filter(de=>de.bitrateInKbit<=Ue);return ye&&ye.length!==0?ye.reduce((de,we)=>we.absoluteIndex>de.absoluteIndex?we:de):Ee},getPossibleVoRepresentations:function(me){return Pe(me,!(arguments.length>1&&arguments[1]!==void 0)||arguments[1])},getPossibleVoRepresentationsFilteredBySettings:he,getRepresentationByAbsoluteIndex:function(me,Ue){let je=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];return isNaN(me)||me<0?null:he(Ue,je).find(Ee=>Ee.absoluteIndex===me)},handleNewMediaInfo:function(me){z.handleNewMediaInfo(me)},initialize:function(){Le=Xd(D).create(),Ce=to(D).create(),z=i0(D).create({dashMetrics:Te,customParametersModel:ve,mediaPlayerModel:re,settings:ie}),z.initialize(),R.on(xe.default.QUALITY_CHANGE_RENDERED,ze,P),R.on(xe.default.METRIC_ADDED,Ve,P),R.on(x.default.LOADING_PROGRESS,Ge,P)},isPlayingAtLowestQuality:function(me){return he(me.mediaInfo,!0)[0].id===me.id},isPlayingAtTopQuality:function(me){if(!me)return!0;const Ue=he(me.mediaInfo,!0);return Ue[Ue.length-1].id===me.id},registerStreamType:function(me,Ue){const je=Ue.getStreamInfo().id;B[je]||(B[je]={}),B[je][me]=Ue,oe[je]||(oe[je]={}),oe[je][me]={},oe[je][me].state=Z.ALLOW_LOAD,z.getBolaState(me)===void 0&&z.setBolaState(me,ie.get().streaming.abr.rules.bolaRule.active&&!fe())},reset:function(){le(),R.off(xe.default.QUALITY_CHANGE_RENDERED,ze,P),R.off(xe.default.METRIC_ADDED,Ve,P),R.off(x.default.LOADING_PROGRESS,Ge,P),z&&z.reset()},setConfig:function(me){me&&(me.streamController&&(Q=me.streamController),me.throughputController&&(Ye=me.throughputController),me.domStorage&&(ke=me.domStorage),me.mediaPlayerModel&&(re=me.mediaPlayerModel),me.customParametersModel&&(ve=me.customParametersModel),me.cmsdModel&&(Se=me.cmsdModel),me.dashMetrics&&(Te=me.dashMetrics),me.adapter&&(q=me.adapter),me.videoModel&&($=me.videoModel),me.settings&&(ie=me.settings),me.capabilities&&(ne=me.capabilities))},setPlaybackQuality:nt,setWindowResizeEventCalled:function(me){},unRegisterStreamType:function(me,Ue){try{B[me]&&B[me][Ue]&&delete B[me][Ue],oe[me]&&oe[me][Ue]&&delete oe[me][Ue]}catch{}}},F=C.getLogger(P),le(),P}lp.__dashjs_factory_name="AbrController";const rh=ue.default.getSingletonFactory(lp);ue.default.updateSingletonFactory(lp.__dashjs_factory_name,rh);var ju=rh;const sb=new Map([[j.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,"loadedmetadata"],[j.default.VIDEO_ELEMENT_READY_STATES.HAVE_CURRENT_DATA,"loadeddata"],[j.default.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,"canplay"],[j.default.VIDEO_ELEMENT_READY_STATES.HAVE_ENOUGH_DATA,"canplaythrough"]]);function Vg(){let D,C,R,P,F,z,Q,ne,B,oe,X;const q=this.context,$=(0,K.default)(q).getInstance(),re=[];function ve(Ge){P&&(arguments.length>1&&arguments[1]!==void 0&&arguments[1]?P.playbackRate=Ge:Pe(j.default.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,()=>{P.playbackRate=Ge}))}function Se(){return re.length>0}function ke(Ge){let ze=re.indexOf(Ge);if(Ge!==null&&(ze!==-1&&re.splice(ze,1),R.get().streaming.buffer.syntheticStallEvents.enabled&&P&&!Se())){const Ve=()=>{if(ve(oe||1,R.get().streaming.buffer.syntheticStallEvents.ignoreReadyState),!P.paused){const nt=document.createEvent("Event");nt.initEvent("playing",!0,!1),P.dispatchEvent(nt)}};R.get().streaming.buffer.syntheticStallEvents.ignoreReadyState?Ve():(Q&&Q.func&&Q.event&&Le(Q.event,Q.func),Q=Pe(j.default.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,Ve))}}function Ie(){if(P&&Se()&&P.playbackRate===0){const Ge=document.createEvent("Event");Ge.initEvent("waiting",!0,!1),P.dispatchEvent(Ge)}}function Ce(Ge,ze){P&&P.addEventListener(Ge,ze)}function Le(Ge,ze){P&&P.removeEventListener(Ge,ze)}function Ye(){return P?P.readyState:NaN}function Te(){return P?P.buffered:null}function ie(){return P?P.clientWidth:NaN}function le(){return P?P.clientHeight:NaN}function he(Ge,ze,Ve,nt,rt){if(P){for(let fe=0;fe<P.textTracks.length;fe++)if(P.textTracks[fe].kind===Ge&&(!ze||P.textTracks[fe].label==ze)&&P.textTracks[fe].language===Ve&&P.textTracks[fe].isTTML===nt&&P.textTracks[fe].isEmbedded===rt)return P.textTracks[fe]}return null}function Pe(Ge,ze){return Ge===j.default.VIDEO_ELEMENT_READY_STATES.HAVE_NOTHING||Ye()>=Ge?(ze(),null):function(Ve,nt){const rt=()=>{Le(Ve,rt),nt(Ve)};return Ce(Ve,rt),{func:rt,event:Ve}}(sb.get(Ge),ze)}return D={addEventListener:Ce,addTextTrack:function(Ge,ze,Ve,nt,rt){if(!P)return null;let fe=he(Ge,ze,Ve,nt,rt);return fe||(fe=P.addTextTrack(Ge,ze,Ve),fe.isEmbedded=rt,fe.isTTML=nt),fe},appendChild:function(Ge){P&&(P.appendChild(Ge),Ge.isTTML!==void 0&&(P.textTracks[P.textTracks.length-1].isTTML=Ge.isTTML,P.textTracks[P.textTracks.length-1].isEmbedded=Ge.isEmbedded))},getBufferRange:Te,getClientHeight:le,getClientWidth:ie,getElement:function(){return P},getEnded:function(){return P?P.ended:null},getPlaybackQuality:function(){if(!P)return null;let Ge="webkitDroppedFrameCount"in P&&"webkitDecodedFrameCount"in P,ze=null;return"getVideoPlaybackQuality"in P?ze=P.getVideoPlaybackQuality():Ge&&(ze={droppedVideoFrames:P.webkitDroppedFrameCount,totalVideoFrames:P.webkitDroppedFrameCount+P.webkitDecodedFrameCount,creationTime:new Date}),ze},getPlaybackRate:function(){return P?P.playbackRate:null},getPlayedRanges:function(){return P?P.played:null},getReadyState:Ye,getSource:function(){return P?P.src:null},getTTMLRenderingDiv:function(){return ne},getTextTrack:he,getTextTracks:function(){return P?P.textTracks:[]},getTime:function(){return P?isNaN(F)?P.currentTime:F:null},getVideoElementSize:function(){const Ge=R.get().streaming.abr.usePixelRatioInLimitBitrateByPortal&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1;return{elementWidth:ie()*Ge,elementHeight:le()*Ge}},getVideoHeight:function(){return P?P.videoHeight:NaN},getVideoRelativeOffsetLeft:function(){if(P){const Ge=P.parentNode.host||P.parentNode;return Ge?P.getBoundingClientRect().left-Ge.getBoundingClientRect().left:NaN}return NaN},getVideoRelativeOffsetTop:function(){if(P){const Ge=P.parentNode.host||P.parentNode;return Ge?P.getBoundingClientRect().top-Ge.getBoundingClientRect().top:NaN}return NaN},getVideoWidth:function(){return P?P.videoWidth:NaN},getVttRenderingDiv:function(){return B},initialize:function(){$.on(x.default.PLAYBACK_PLAYING,Ie,this)},isPaused:function(){return P?P.paused:null},isSeeking:function(){return P?P.seeking||!isNaN(F):null},isStalled:Se,pause:function(){P&&(P.pause(),P.autoplay=!1)},play:function(){if(P){P.autoplay=!0;const Ge=P.play();Ge&&Ge.catch&&typeof Promise<"u"&&Ge.catch(ze=>{ze.name==="NotAllowedError"&&$.trigger(x.default.PLAYBACK_NOT_ALLOWED),C.warn(`Caught pending play exception - continuing (${ze})`)})}},removeChild:function(Ge){P&&P.removeChild(Ge)},removeEventListener:Le,reset:function(){clearTimeout(X),$.off(x.default.PLAYBACK_PLAYING,Ie,this),re.length=0},setConfig:function(Ge){Ge&&Ge.settings&&(R=Ge.settings)},setCurrentTime:function(Ge,ze){P&&(z&&z.func&&z.event&&Le(z.event,z.func),F=Ge,z=Pe(j.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,()=>{if(P)if(P.currentTime!==F)try{F=ze?function(Ve){const nt=Te();let rt=Ve,fe=9999999999;if(nt)for(let me=0;me<nt.length;me++){const Ue=nt.start(me),je=nt.end(me),Ee=Math.abs(Ue-Ve),ye=Math.abs(je-Ve);if(Ve>=Ue&&Ve<=je)return Ve;Ee<fe&&(fe=Ee,rt=Ue),ye<fe&&(fe=ye,rt=je)}return rt}(F):F,isNaN(F)||(P.currentTime=F),F=NaN}catch(Ve){P.readyState===0&&Ve.code===Ve.INVALID_STATE_ERR&&(X=setTimeout(function(){P.currentTime=F,F=NaN},400))}else F=NaN}))},setDisableRemotePlayback:function(Ge){P&&(P.disableRemotePlayback=Ge)},setElement:function(Ge){if(!(Ge==null||Ge&&/^(VIDEO|AUDIO)$/i.test(Ge.nodeName)))throw"element is not video or audio DOM type!";P=Ge,P&&(P.preload="auto")},setPlaybackRate:ve,setSource:function(Ge){P&&(Ge?P.src=Ge:(P.removeAttribute("src"),P.load()))},setStallState:function(Ge,ze){(function(Ve,nt){nt?function(rt){if(rt!==null&&P&&!P.seeking&&re.indexOf(rt)===-1&&(re.push(rt),R.get().streaming.buffer.syntheticStallEvents.enabled&&P&&re.length===1&&(R.get().streaming.buffer.syntheticStallEvents.ignoreReadyState||Ye()>=j.default.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA))){oe=P.playbackRate,ve(0,!0);const fe=document.createEvent("Event");fe.initEvent("waiting",!0,!1),P.dispatchEvent(fe)}}(Ve):ke(Ve)})(Ge,ze)},setTTMLRenderingDiv:function(Ge){ne=Ge,ne.style.position="absolute",ne.style.display="flex",ne.style.overflow="hidden",ne.style.pointerEvents="none",ne.style.top=0,ne.style.left=0},setVttRenderingDiv:function(Ge){B=Ge},waitForReadyState:Pe},C=(0,$e.default)(q).getInstance().getLogger(D),R=(0,ge.default)(q).getInstance(),F=NaN,D}Vg.__dashjs_factory_name="VideoModel";var $g=ue.default.getSingletonFactory(Vg);const up=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],sh="dashjs_?_bitrate",r0="dashjs_?_settings",Qd="localStorage",Kg="lastBitrate",s0="lastMediaSettings";function Yg(D){D=D||{};const C=this.context,R=D.settings;let P,F,z;function Q(X){if(z!==void 0)return z;let q;z=!1;try{typeof window<"u"&&(q=window[X])}catch($){return F.warn("DOMStorage access denied: "+$.message),z}if(!q||X!==Qd)return z;try{q.setItem("1","1"),q.removeItem("1"),z=!0}catch($){F.warn("DOMStorage is supported, but cannot be used: "+$.message)}return z}function ne(){return Math.round(new Date().getTime()/6e5)*6e5}function B(X,q){return Q(X)&&R.get().streaming[q+"CachingInfo"].enabled}function oe(){if(!R)throw new Error(j.default.MISSING_CONFIG_ERROR)}return P={getSavedBitrateSettings:function(X){if(oe(),!R.get().streaming.lastBitrateCachingInfo.enabled)return NaN;let q=NaN;if(B(Qd,Kg)){const $=sh.replace(/\?/,X);try{const re=JSON.parse(localStorage.getItem($))||{},ve=new Date().getTime()-parseInt(re.timestamp,10)>=R.get().streaming.lastBitrateCachingInfo.ttl||!1,Se=parseFloat(re.bitrate);isNaN(Se)||ve?ve&&localStorage.removeItem($):(q=Se,F.debug("Last saved bitrate for "+X+" was "+Se))}catch{return null}}return q},setSavedBitrateSettings:function(X,q){if(B(Qd,Kg)&&q){const $=sh.replace(/\?/,X);try{localStorage.setItem($,JSON.stringify({bitrate:q.toFixed(3),timestamp:ne()}))}catch(re){F.error(re.message)}}},getSavedMediaSettings:function(X){if(oe(),!R.get().streaming.lastMediaSettingsCachingInfo.enabled)return null;let q=null;if(B(Qd,s0)){const $=r0.replace(/\?/,X);try{const re=JSON.parse(localStorage.getItem($))||{},ve=new Date().getTime()-parseInt(re.timestamp,10)>=R.get().streaming.lastMediaSettingsCachingInfo.ttl||!1;q=re.settings,ve&&(localStorage.removeItem($),q=null)}catch{return null}}return q},setSavedMediaSettings:function(X,q){if(B(Qd,s0)){const $=r0.replace(/\?/,X);try{localStorage.setItem($,JSON.stringify({settings:q,timestamp:ne()}))}catch(re){F.error(re.message)}}}},F=(0,$e.default)(C).getInstance().getLogger(P),Q(Qd)&&up.forEach(X=>{const q=localStorage.getItem(X.oldKey);if(q){localStorage.removeItem(X.oldKey);try{localStorage.setItem(X.newKey,q)}catch($){F.error($.message)}}}),P}Yg.__dashjs_factory_name="DOMStorage";var a0=ue.default.getSingletonFactory(Yg),ab=n(8986);function o0(){const D=this.context;let C,R,P,F,z,Q,ne,B,oe,X,q,$;function re(Ie,Ce,Le,Ye){let Te=null;const ie=Ie?$.resolve(Ie.path):null,le=Ye||{init:!0,url:ie?ie.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500,mediaType:Ce,representation:Ie};R.debug("Start searching for initialization.");const he=ke(le);ne.load({request:he,success:function(Pe){if(le.bytesLoaded=le.range.end,Te=F.findInitRange(Pe),!Te)return le.range.end=le.bytesLoaded+le.bytesToLoad,re(Ie,Ce,Le,le);Ie.range=Te,Le(Ie)},error:function(){Le(Ie)}}),R.debug("Perform init search: "+le.url)}function ve(Ie,Ce,Le,Ye,Te,ie){if(Le&&(Le.start===void 0||Le.end===void 0)){const nt=Le?Le.toString().split("-"):null;Le=nt?{start:parseFloat(nt[0]),end:parseFloat(nt[1])}:null}Te=Te||Se;let le=null,he=null;const Pe=!!Le,Ge=Ie?$.resolve(Ie.path):null,ze={init:!1,url:Ge?Ge.url:void 0,range:Pe?Le:{start:0,end:1500},searching:!Pe,bytesLoaded:ie?ie.bytesLoaded:0,bytesToLoad:1500,mediaType:Ce,representation:Ie},Ve=ke(ze);ne.load({request:Ve,success:function(nt){const rt=ze.bytesToLoad,fe=nt.byteLength;if(ze.bytesLoaded=ze.range.end-ze.range.start,le=F.parse(nt),he=le.getBox("sidx"),he&&he.isComplete){const me=he.references;let Ue,je;if(me!=null&&me.length>0&&(Ue=me[0].reference_type===1),Ue){let Ee,ye,de,we,qe;R.debug("Initiate multiple SIDX load."),ze.range.end=ze.range.start+he.size;let tt=[],mt=0,Tt=(he.offset||ze.range.start)+he.size;const Vt=function(Jt){Jt?(tt=tt.concat(Jt),mt++,mt>=ye&&(tt.sort(function(yn,Cn){return yn.startTime-Cn.startTime<0?-1:0}),Te(tt,Ie,Ye))):Te(null,Ie,Ye)};for(Ee=0,ye=me.length;Ee<ye;Ee++)de=Tt,we=Tt+me[Ee].referenced_size-1,Tt+=me[Ee].referenced_size,qe={start:de,end:we},ve(Ie,Ce,qe,Ye,Vt,ze)}else R.debug("Parsing segments from SIDX. representation "+Ce+" - id: "+Ie.id+" for range : "+ze.range.start+" - "+ze.range.end),je=function(Ee,ye){const de=Ee.references,we=de.length,qe=Ee.timescale;let tt=Ee.earliest_presentation_time,mt=ye.range.start+Ee.offset+Ee.first_offset+Ee.size;const Tt=[];let Vt,Jt,yn,Cn;for(let Kn=0;Kn<we;Kn++)yn=de[Kn].subsegment_duration,Cn=de[Kn].referenced_size,Vt=new Vn,Vt.duration=yn,Vt.startTime=tt,Vt.timescale=qe,Jt=mt+Cn-1,Vt.mediaRange=mt+"-"+Jt,Tt.push(Vt),tt+=yn,mt+=Cn;return Tt}(he,ze),Te(je,Ie,Ye)}else{if(he)ze.range.start=he.offset||ze.range.start,ze.range.end=ze.range.start+(he.size||rt);else{if(fe<ze.bytesLoaded)return void Te(null,Ie,Ye);{const me=le.getLastBox();me&&me.size?(ze.range.start=me.offset+me.size,ze.range.end=ze.range.start+rt):ze.range.end+=rt}}ve(Ie,Ce,ze.range,Ye,null,ze)}},error:function(){Te(null,Ie,Ye)}}),R.debug(`Perform SIDX load for type ${Ce} : ${ze.url} with range ${ze.range.start} - ${ze.range.end}`)}function Se(Ie,Ce,Le){Le({segments:Ie,representation:Ce,error:Ie?void 0:new Ze.default(B.SEGMENT_BASE_LOADER_ERROR_CODE,B.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}function ke(Ie){if(!Ie.url)return;const Ce=new Dt;return Ce.setInfo(Ie),Ce}return C={setConfig:function(Ie){Ie.baseURLController&&($=Ie.baseURLController),Ie.dashMetrics&&(z=Ie.dashMetrics),Ie.mediaPlayerModel&&(Q=Ie.mediaPlayerModel),Ie.errHandler&&(P=Ie.errHandler),Ie.boxParser&&(F=Ie.boxParser),Ie.debug&&(R=Ie.debug.getLogger(C)),Ie.errors&&(B=Ie.errors),Ie.urlUtils&&(q=Ie.urlUtils),Ie.constants&&(oe=Ie.constants),Ie.dashConstants&&(X=Ie.dashConstants)},initialize:function(){ne=pa(D).create({errHandler:P,dashMetrics:z,mediaPlayerModel:Q,boxParser:F,errors:B,urlUtils:q,constants:oe,dashConstants:X})},loadInitialization:function(Ie,Ce){return new Promise(Le=>{re(Ie,Ce,Le)})},loadSegments:function(Ie,Ce,Le){return new Promise(Ye=>{ve(Ie,Ce,Le,Ye)})},reset:function(){ne&&(ne.abort(),ne=null)}},C}o0.__dashjs_factory_name="SegmentBaseLoader";var ob=ue.default.getSingletonFactory(o0);function Wg(D){let C;D=D||{};let R=new DataView(D.data),P=0;function F(Q,ne){let B,oe,X=!0,q=0;if(ne===void 0&&(ne=!1),Q.tag>16777215?(R.getUint32(P)!==Q.tag&&(X=!1),q=4):Q.tag>65535?(B=R.getUint16(P),oe=R.getUint8(P+2),256*B+oe!==Q.tag&&(X=!1),q=3):Q.tag>255?(R.getUint16(P)!==Q.tag&&(X=!1),q=2):(R.getUint8(P)!==Q.tag&&(X=!1),q=1),!X&&Q.required&&!ne)throw new Error("required tag not found");return X&&(P+=q),X}function z(Q){let ne=1,B=128,oe=-1,X=0,q=R.getUint8(P),$=0;for($=0;$<8;$+=1){if((q&B)===B){X=Q===void 0?q&~B:q,oe=$;break}B>>=1}for($=0;$<oe;$+=1,ne+=1)X=X<<8|255&R.getUint8(P+ne);return P+=ne,X}return C={getPos:function(){return P},setPos:function(Q){P=Q},consumeTag:F,consumeTagAndSize:function(Q,ne){let B=F(Q,ne);return B&&z(),B},parseTag:function(Q){let ne;return F(Q),ne=z(),C[Q.parse](ne)},skipOverElement:function(Q,ne){let B,oe=F(Q,ne);return oe&&(B=z(),P+=B),oe},getMatroskaCodedNum:z,getMatroskaFloat:function(Q){let ne;switch(Q){case 4:ne=R.getFloat32(P),P+=4;break;case 8:ne=R.getFloat64(P),P+=8}return ne},getMatroskaUint:function(Q){if(Q>4)return function(B){const oe=Math.floor(Number.MAX_SAFE_INTEGER/256);let X=0;for(let q=0;q<B;q+=1){if(X>oe)throw new Error("Value exceeds safe integer limit");X*=256;const $=R.getUint8(P+q);if(X>Number.MAX_SAFE_INTEGER-$)throw new Error("Value exceeds safe integer limit");X+=$}return P+=B,X}(Q);let ne=0;for(let B=0;B<Q;B+=1)ne<<=8,ne|=255&R.getUint8(P+B);return P+=Q,ne>>>0},moreData:function(){return P<R.byteLength}},C}Wg.__dashjs_factory_name="EBMLParser";var Jd=ue.default.getClassFactory(Wg);function Xg(){const D=this.context;let C,R,P,F,z,Q,ne,B,oe;function X(q){const $=new Dt;return $.setInfo(q),$}return C={setConfig:function(q){if(!(q.baseURLController&&q.dashMetrics&&q.mediaPlayerModel&&q.errHandler))throw new Error(j.default.MISSING_CONFIG_ERROR);oe=q.baseURLController,z=q.dashMetrics,Q=q.mediaPlayerModel,F=q.errHandler,B=q.errors,R=q.debug.getLogger(C)},initialize:function(){ne=pa(D).create({errHandler:F,dashMetrics:z,mediaPlayerModel:Q,errors:B})},loadInitialization:function(q,$){return new Promise(re=>{let ve=null,Se=q?oe.resolve(q.path):null,ke=q?q.range.split("-"):null,Ie={range:{start:ke?parseFloat(ke[0]):null,end:ke?parseFloat(ke[1]):null},request:ve,url:Se?Se.url:void 0,init:!0,mediaType:$};R.info("Start loading initialization."),ve=X(Ie),ne.load({request:ve,success:function(){re(q)},error:function(){re(q)}}),R.debug("Perform init load: "+Ie.url)})},loadSegments:function(q,$,re){return new Promise(ve=>{let Se=null,ke=q?oe.resolve(q.path):null,Ie=ke?ke.url:void 0;Se=X({bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:Se,url:Ie,init:!1,mediaType:$,representation:q}),R.debug("Parsing ebml header"),ne.load({request:Se,success:function(Ce){(function(Le,Ye,Te,ie){if(!Le||Le.byteLength===0)return void ie(null);let le,he,Pe,Ge,ze=Jd(D).create({data:Le}),Ve=Te?Te.split("-"):null,nt=null,rt={url:Ye,range:{start:Ve?parseFloat(Ve[0]):null,end:Ve?parseFloat(Ve[1]):null},request:nt};for(R.debug("Parse EBML header: "+rt.url),ze.skipOverElement(P.EBML),ze.consumeTag(P.Segment),Pe=ze.getMatroskaCodedNum(),Pe+=ze.getPos(),Ge=ze.getPos();ze.moreData()&&!ze.consumeTagAndSize(P.Segment.Info,!0);)if(!(ze.skipOverElement(P.Segment.SeekHead,!0)||ze.skipOverElement(P.Segment.Tracks,!0)||ze.skipOverElement(P.Segment.Cues,!0)||ze.skipOverElement(P.Void,!0)))throw new Error("no valid top level element found");for(;le===void 0;){let fe=ze.getMatroskaCodedNum(!0),me=ze.getMatroskaCodedNum();fe===P.Segment.Info.Duration.tag?le=ze[P.Segment.Info.Duration.parse](me):ze.setPos(ze.getPos()+me)}nt=X(rt),ne.load({request:nt,success:function(fe){he=function(me,Ue,je,Ee){let ye,de,we,qe,tt,mt,Tt,Vt;for(de=function(Jt){let yn,Cn,Kn=[],Zn=Jd(D).create({data:Jt});for(Zn.consumeTagAndSize(P.Segment.Cues);Zn.moreData()&&Zn.consumeTagAndSize(P.Segment.Cues.CuePoint,!0);){for(yn={},yn.CueTime=Zn.parseTag(P.Segment.Cues.CuePoint.CueTime),yn.CueTracks=[];Zn.moreData()&&Zn.consumeTag(P.Segment.Cues.CuePoint.CueTrackPositions,!0);){const gi=Zn.getMatroskaCodedNum(),_n=Zn.getPos();if(Cn={},Cn.Track=Zn.parseTag(P.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),Cn.Track===0)throw new Error("Cue track cannot be 0");Cn.ClusterPosition=Zn.parseTag(P.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),yn.CueTracks.push(Cn),Zn.setPos(_n+gi)}if(yn.CueTracks.length===0)throw new Error("Mandatory cuetrack not found");Kn.push(yn)}if(Kn.length===0)throw new Error("mandatory cuepoint not found");return Kn}(me),we=[],tt=0,mt=de.length;tt<mt;tt+=1)qe=new Vn,ye=0,ye=tt<de.length-1?de[tt+1].CueTime-de[tt].CueTime:Ee-de[tt].CueTime,qe.duration=ye,qe.startTime=de[tt].CueTime,qe.timescale=1e3,Tt=de[tt].CueTracks[0].ClusterPosition+Ue,Vt=tt<de.length-1?de[tt+1].CueTracks[0].ClusterPosition+Ue-1:je-1,qe.mediaRange=Tt+"-"+Vt,we.push(qe);return R.debug("Parsed cues: "+we.length+" cues."),we}(fe,Ge,Pe,le),ie(he)},error:function(){R.error("Download Error: Cues "+rt.url),ie(null)}}),R.debug("Perform cues load: "+rt.url+" bytes="+rt.range.start+"-"+rt.range.end)})(Ce,Ie,re,function(Le){ve({segments:Le,representation:q,error:Le?void 0:new Ze.default(B.SEGMENT_BASE_LOADER_ERROR_CODE,B.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})})},error:function(){ve({representation:q,error:new Ze.default(B.SEGMENT_BASE_LOADER_ERROR_CODE,B.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}})})},reset:function(){ne&&(ne.abort(),ne=null)}},P={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}},C}Xg.__dashjs_factory_name="WebmSegmentBaseLoader";var l0=ue.default.getSingletonFactory(Xg);function u0(D){D=D||{};const C=this.context,R=D.eventBus,P=D.events,F=D.dashMetrics,z=D.mediaPlayerModel,Q=D.errHandler,ne=D.baseURLController,B=D.debug,oe=D.boxParser,X=D.errors;let q,$,re;function ve(Se){return(Se?Se.split("/")[1]:"").toLowerCase()==="webm"}return q={initialize:function(){$.initialize(),re.initialize()},getSegmentBaseInitSegment:function(Se){return ve(Se.representation.mimeType)?re.loadInitialization(Se.representation,Se.mediaType):$.loadInitialization(Se.representation,Se.mediaType)},getSegmentList:function(Se){return ve(Se.mimeType)?re.loadSegments(Se.representation,Se.mediaType,Se.representation?Se.representation.indexRange:null):$.loadSegments(Se.representation,Se.mediaType,Se.representation?Se.representation.indexRange:null)},reset:function(){$.reset(),re.reset()}},$=ob(C).getInstance(),re=l0(C).getInstance(),$.setConfig({baseURLController:ne,dashMetrics:F,mediaPlayerModel:z,errHandler:Q,eventBus:R,events:P,errors:X,debug:B,boxParser:oe}),re.setConfig({baseURLController:ne,dashMetrics:F,mediaPlayerModel:z,errHandler:Q,eventBus:R,events:P,errors:X,debug:B}),q}u0.__dashjs_factory_name="SegmentBaseController";var lb=ue.default.getSingletonFactory(u0),ah=class{constructor(){this.accessibility=null,this.adaptationSetSwitchingCompatibleIds=[],this.audioChannelConfiguration=null,this.bitrateList=null,this.codec=null,this.contentProtection=null,this.essentialProperties=[],this.id=null,this.index=null,this.isEmbedded=null,this.isFragmented=null,this.isText=!1,this.labels=null,this.lang=null,this.mimeType=null,this.normalizedKeyIds=new Set,this.representationCount=0,this.roles=null,this.segmentAlignment=!1,this.selectionPriority=1,this.streamInfo=null,this.subSegmentAlignment=!1,this.supplementalProperties=[],this.type=null,this.viewpoint=null}},Qg=class{constructor(){this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0,this.isEncrypted=!1}},c0=class{constructor(){this.dvrWindowSize=NaN,this.loadedTime=null,this.availableFrom=null,this.minBufferTime=NaN,this.duration=NaN,this.isDynamic=!1,this.maxFragmentDuration=null,this.serviceDescriptions=[],this.protocol=null}},ub=class{constructor(D){this.valid=D[0]=="/",this.path=D.split("/").filter(C=>C.length!==0).map(C=>{let R={name:C},P=C.indexOf("[");if(P!=-1){R.name=C.substring(0,P);let F=C.substring(P+1,C.length-1);this.valid=this.valid&&F.indexOf("[")==-1;let z=F.indexOf("=");z!=-1?(R.attribute={name:F.substring(1,z),value:F.substring(z+1)},["'",'"'].indexOf(R.attribute.value[0])!=-1&&(R.attribute.value=R.attribute.value.substring(1,R.attribute.value.length-1))):R.position=parseInt(F,10)-1}return R})}isValid(){return this.valid}findsElement(){return!this.findsAttribute()}findsAttribute(){return this.path[this.path.length-1].name.startsWith("@")}findsTextReplace(){return this.path[this.path.length-1].name==="text()"}getMpdTarget(D,C){let R=null,P=D,F=1,z="MPD";for(;F<this.path.length&&P!==null;){R=P;let Q=this.path[F];if(z=Q.name,F!==this.path.length-1||!z.startsWith("@")&&z!=="text()"){let ne=R[z]||[];if(ne.length===0&&R[z]&&ne.push(R[z]),Q.position)P=ne[Q.position]||null;else if(Q.attribute){let B=Q.attribute;P=ne.filter(oe=>oe[B.name]==B.value)[0]||null}else P=Array.isArray(ne)?ne[0]:ne}F++}return P===null?null:z.startsWith("@")?{name:z.substring(1),leaf:P,target:P}:z==="text()"?{name:"__text",leaf:P,target:P}:{name:z,leaf:P,target:C?R:P}}},cb=class{constructor(D,C,R){this.action=D,this.xpath=C,this.value=R,this.position=null}getMpdTarget(D){let C=this.action==="remove"||this.action==="replace"||this.position==="before"||this.position==="after";return this.xpath.getMpdTarget(D,C)}};function cp(){let D,C;const R=this.context;return D={getIsPatch:function(P){return P&&P.hasOwnProperty(M.default.ORIGINAL_MPD_ID)||!1},getMpdId:function(P){return P&&P[M.default.ORIGINAL_MPD_ID]||null},getOriginalPublishTime:function(P){return P&&P.hasOwnProperty(M.default.ORIGINAL_PUBLISH_TIME)?new Date(P[M.default.ORIGINAL_PUBLISH_TIME]):null},getPatchOperations:function(P){return P?(P.__children||[]).map(F=>{const z=F.tagName;if(z!=="add"&&z!=="remove"&&z!=="replace")return C.warn(`Ignoring node of invalid action: ${z}`),null;let Q=F.sel;if(z==="add"&&F.type){if(!F.type.startsWith("@"))return C.warn(`Ignoring add action for prefixed namespace declaration: ${F.type}=${F.__text}`),null;Q=`${Q}/${F.type}`}let ne=new ub(Q);if(!ne.isValid())return C.warn(`Ignoring action with invalid selector: ${z} - ${Q}`),null;let B=null;ne.findsAttribute()||ne.findsTextReplace()?B=F.__text||"":z!=="remove"&&(B=F.__children.reduce((X,q)=>{let $=q.tagName;return $!=="#text"&&(X[$]=X[$]||[],X[$].push(q)),X},{}));let oe=new cb(z,ne,B);return z==="add"&&(oe.position=F.pos),oe}).filter(F=>!!F):[]},getPublishTime:function(P){return P&&P.hasOwnProperty(M.default.PUBLISH_TIME)?new Date(P[M.default.PUBLISH_TIME]):null}},C=(0,$e.default)(R).getInstance().getLogger(D),D}cp.__dashjs_factory_name="PatchManifestModel";var d0=ue.default.getSingletonFactory(cp);function hu(D){let C=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(typeof TextDecoder<"u"){const B=new TextDecoder("utf-8").decode(D);if(C){const oe=B.indexOf("\0");return oe!==-1?B.substring(0,oe):B}return B.replace(/\0/g,"")}const R=D.length;let P,F,z,Q="",ne=0;for(;ne<R;){if(P=D[ne++],P===0&&C)return Q;if(P!==0&&P!==3)switch(P>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:Q+=String.fromCharCode(P);break;case 12:case 13:F=D[ne++],Q+=String.fromCharCode((31&P)<<6|63&F);break;case 14:F=D[ne++],z=D[ne++],Q+=String.fromCharCode((15&P)<<12|(63&F)<<6|63&z)}}return Q}function Jg(D){return function(C,R,P,F){const z=(Q=C)instanceof ArrayBuffer?Q:Q.buffer;var Q;let ne=1;"BYTES_PER_ELEMENT"in F&&(ne=F.BYTES_PER_ELEMENT);const B=($=C)&&$.buffer instanceof ArrayBuffer&&$.byteLength!==void 0&&$.byteOffset!==void 0?C.byteOffset:0,oe=(B+C.byteLength)/ne,X=(B+R)/ne,q=Math.floor(Math.max(0,Math.min(X,oe)));var $;return new F(z,q,Math.floor(Math.min(q+Math.max(P,0),oe))-q)}(D,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,arguments.length>2&&arguments[2]!==void 0?arguments[2]:1/0,Uint8Array)}function f0(D){return D.type==="PRIV"?function(C){if(C.size<2)return;const R=hu(C.data,!0),P=new Uint8Array(C.data.subarray(R.length+1));return{key:C.type,info:R,data:P.buffer}}(D):D.type[0]==="W"?function(C){if(C.type==="WXXX"){if(C.size<2)return;let P=1;const F=hu(C.data.subarray(P),!0);P+=F.length+1;const z=hu(C.data.subarray(P));return{key:C.type,info:F,data:z}}const R=hu(C.data);return{key:C.type,info:"",data:R}}(D):D.type==="APIC"?function(C){const R={key:C.type,description:"",data:"",mimeType:null,pictureType:null};if(C.size<2)return;if(C.data[0]!==3)return void console.log("Ignore frame with unrecognized character encoding");const P=C.data.subarray(1).indexOf(0);if(P===-1)return;const F=hu(Jg(C.data,1,P)),z=C.data[2+P],Q=C.data.subarray(3+P).indexOf(0);if(Q===-1)return;const ne=hu(Jg(C.data,3+P,Q));let B;return B=F==="-->"?hu(Jg(C.data,4+P+Q)):(oe=C.data.subarray(4+P+Q))instanceof ArrayBuffer?oe:oe.byteOffset==0&&oe.byteLength==oe.buffer.byteLength?oe.buffer:new Uint8Array(oe).buffer,R.mimeType=F,R.pictureType=z,R.description=ne,R.data=B,R;var oe}(D):function(C){if(C.size<2)return;if(C.type==="TXXX"){let P=1;const F=hu(C.data.subarray(P),!0);P+=F.length+1;const z=hu(C.data.subarray(P));return{key:C.type,info:F,data:z}}const R=hu(C.data.subarray(1));return{key:C.type,info:"",data:R}}(D)}function Zd(D,C){let R=0;return R=(127&D[C])<<21,R|=(127&D[C+1])<<14,R|=(127&D[C+2])<<7,R|=127&D[C+3],R}function h0(D){const C=String.fromCharCode(D[0],D[1],D[2],D[3]),R=Zd(D,4);return{type:C,size:R,data:D.subarray(10,10+R)}}function db(D,C){return C+10<=D.length&&D[C]===51&&D[C+1]===68&&D[C+2]===73&&D[C+3]<255&&D[C+4]<255&&D[C+6]<128&&D[C+7]<128&&D[C+8]<128&&D[C+9]<128}function oh(D,C){return C+10<=D.length&&D[C]===73&&D[C+1]===68&&D[C+2]===51&&D[C+3]<255&&D[C+4]<255&&D[C+6]<128&&D[C+7]<128&&D[C+8]<128&&D[C+9]<128}function p0(){let D,C,R,P,F,z;const Q=this.context;function ne(Te,ie){const le=ie?ie.index:0,he=C.getAdaptationsForType(P[le].mpd.manifest,le,Te);if(!he||he.length===0)return null;if(he.length>1&&ie){for(let Ge=0,ze=he.length;Ge<ze;Ge++)if(Pe=he[Ge],C.getRolesForAdaptation(Pe).filter(function(Ve){return Ve.value===M.default.MAIN})[0])return he[Ge]}var Pe;return he[0]}function B(Te,ie,le,he,Pe,Ge){let ze,Ve,nt,rt,fe,me,Ue=[];if(!he||he.length===0)return[];const je=C.getAdaptationsForPeriod(ie);for(rt=0,me=he.length;rt<me;rt++)if(ze=he[rt],nt=C.getIndexForAdaptation(ze,Te,le.index),Ve=Se(je[nt]),Ge){let Ee=Ve.accessibility.length;for(fe=0;fe<Ee;fe++){if(!Ve)continue;let ye=Ve.accessibility[fe];if(ye.schemeIdUri===F.ACCESSIBILITY_CEA608_SCHEME)if(ye.value&&ye.value!==""){let de=ye.value.split(";");if(de[0].substring(0,2)==="CC")for(fe=0;fe<de.length;fe++)Ve||(Ve=Se.call(this,je[nt])),ke(Ve,de[fe].substring(0,3),de[fe].substring(4)),Ue.push(Ve),Ve=null;else for(fe=0;fe<de.length;fe++)Ve||(Ve=Se.call(this,je[nt])),ke(Ve,"CC"+(fe+1),de[fe]),Ue.push(Ve),Ve=null}else ke(Ve,F.CC1,"eng"),Ue.push(Ve),Ve=null}}else Pe===F.IMAGE?(Ve.type=F.IMAGE,Ue.push(Ve),Ve=null):Ve&&Ue.push(Ve);return Ue}function oe(Te){const ie=X(Te);return C.getRegularPeriods(ie)}function X(Te){const ie=$(Te);return C.getMpd(ie)}function q(){P=[]}function $(Te){return Te||(P.length>0?P[0].mpd.manifest:null)}function re(Te){try{const ie=ve(Te.streamInfo,P),le=C.getAdaptationsForPeriod(ie);return Te&&Te.streamInfo&&Te.streamInfo.id!==void 0&&le?le[Te.index]:null}catch{return null}}function ve(Te,ie){const le=ie.length;for(let he=0;he<le;he++){let Pe=ie[he];if(Te&&Te.id===Pe.id)return Pe}return null}function Se(Te){if(!Te)return null;let ie=new ah;const le=Te.period.mpd.manifest.Period[Te.period.index].AdaptationSet[Te.index];return ie.id=Te.id,ie.index=Te.index,ie.type=Te.type,ie.streamInfo=Ie(Te.period),ie.representationCount=C.getRepresentationCount(le),ie.labels=C.getLabelsForAdaptation(le),ie.lang=C.getLanguageForAdaptation(le),ie.segmentAlignment=C.getSegmentAlignment(le),ie.subSegmentAlignment=C.getSubSegmentAlignment(le),ie.viewpoint=C.getViewpointForAdaptation(le),ie.accessibility=C.getAccessibilityForAdaptation(le),ie.accessibility.filter(function(he){if(he.schemeIdUri&&he.schemeIdUri.search("cea-608")>=0&&z!==void 0)return!0})[0]&&(ie.embeddedCaptions=!0),ie.audioChannelConfiguration=C.getAudioChannelConfigurationForAdaptation(le),ie.audioChannelConfiguration.length===0&&le.Representation&&le.Representation.length>0&&(ie.audioChannelConfiguration=C.getAudioChannelConfigurationForRepresentation(le.Representation[0])),ie.roles=C.getRolesForAdaptation(le),ie.codec=C.getCodec(le),ie.mimeType=C.getMimeType(le),ie.contentProtection=C.getContentProtectionByAdaptation(le),ie.bitrateList=C.getBitrateListForAdaptation(le),ie.selectionPriority=C.getSelectionPriority(le),ie.contentProtection&&ie.contentProtection.length>0&&(ie.contentProtection=function(he,Pe){if(!he||!he.length||!Pe)return he;const Ge=C.getContentProtectionByManifest(Pe);if(!Ge||!Ge.length)return he;const ze=Ge.reduce((Ve,nt)=>(nt.refId&&Ve.set(nt.refId,nt),Ve),new Map);return he.map(Ve=>{if(Ve.ref){const nt=ze.get(Ve.ref);nt&&Ve.mergeAttributesFromReference(nt)}return Ve})}(ie.contentProtection,Te.period.mpd.manifest),ie.contentProtection=function(he){const Pe=he.map(Ge=>Ge.cencDefaultKid).filter(Ge=>Ge!==null);if(Pe.length){const Ge=Pe[0];he.forEach(ze=>{ze.keyId=Ge})}return he}(ie.contentProtection),ie.normalizedKeyIds=function(he){const Pe=new Set;return he.forEach(Ge=>{Ge.cencDefaultKid&&typeof Ge.cencDefaultKid=="string"&&Pe.add(Ge.cencDefaultKid.replace(/-/g,"").toLowerCase())}),Pe}(ie.contentProtection)),ie.isText=C.getIsText(le),ie.essentialProperties=C.getCombinedEssentialPropertiesForAdaptationSet(le),ie.supplementalProperties=C.getCombinedSupplementalPropertiesForAdaptationSet(le),ie.isFragmented=C.getIsFragmented(le),ie.isEmbedded=!1,ie.adaptationSetSwitchingCompatibleIds=function(he){if(!he||!he.supplementalProperties)return[];let Pe=[];const Ge=he.supplementalProperties.filter(ze=>ze.schemeIdUri===M.default.ADAPTATION_SET_SWITCHING_SCHEME_ID_URI);return Ge&&Ge.length>0&&(Pe=Ge[0].value.toString().split(",").map(ze=>ze)),Pe}(ie),ie}function ke(Te,ie,le){Te.id=ie,Te.index=100+parseInt(ie.substring(2,3)),Te.type=F.TEXT,Te.codec="cea-608-in-SEI",Te.isEmbedded=!0,Te.isFragmented=!1,Te.lang=Kf(le),Te.roles=[{schemeIdUri:"urn:mpeg:dash:role:2011",value:"caption"}]}function Ie(Te){let ie=new Qg;return ie.id=Te.id,ie.index=Te.index,ie.start=Te.start,ie.duration=Te.duration,ie.manifestInfo=function(le){let he=new c0;return he.dvrWindowSize=le.timeShiftBufferDepth,he.loadedTime=le.manifest.loadedTime,he.availableFrom=le.availabilityStartTime,he.minBufferTime=le.manifest.minBufferTime,he.maxFragmentDuration=le.maxSegmentDuration,he.duration=C.getDuration(le.manifest),he.isDynamic=C.getIsDynamic(le.manifest),he.serviceDescriptions=C.getServiceDescriptions(le.manifest),he.protocol=le.manifest.protocol,he}(Te.mpd),ie.isLast=Te.mpd.manifest.Period.length===1||Math.abs(ie.start+ie.duration-ie.manifestInfo.duration)<1,ie.isEncrypted=Te.isEncrypted,ie}function Ce(){if(!F)throw new Error("setConfig function has to be called previously")}function Le(Te){return P.length>0?P[0].mpd.manifest.Period[Te]:null}function Ye(Te,ie,le){let he,Pe,Ge,ze,Ve,nt;if(Te){for(Pe=Te.AdaptationSet,Ve=0;Ve<Pe.length;Ve+=1)for(he=Pe[Ve],ze=he.Representation,nt=0;nt<ze.length;nt+=1)if(Ge=ze[nt],ie===Ge.id)return le?nt:Ge}return null}return D={applyPatchToManifest:function(Te,ie){R.getPatchOperations(ie).forEach(le=>{let he=le.getMpdTarget(Te);if(he===null)return;let{name:Pe,target:Ge,leaf:ze}=he;if(le.xpath.findsAttribute()||Pe==="__text"){switch(le.action){case"add":case"replace":Ge[Pe]=le.value;break;case"remove":delete Ge[Pe]}return}let Ve=(Ge[Pe]||[]).indexOf(ze),nt=le.position==="prepend"||le.position==="before";if(le.action==="remove"||le.action==="replace")if(Array.isArray(Ge[Pe])){if(Ve!=-1){let rt=Ge[Pe];rt.splice(Ve,1),rt.length>0?Ge[Pe]=rt:delete Ge[Pe]}}else delete Ge[Pe];le.action!=="add"&&le.action!=="replace"||Object.keys(le.value).forEach(rt=>{let fe=le.value[rt],me=Ge[rt]||[];if(me.length===0&&Ge[rt]&&me.push(Ge[rt]),me.length===0)me=fe;else{let Ue=me.length;Ue=rt==Pe&&Ve!=-1?Ve+(nt?0:1)+(le.action==="replace"?-1:0):nt?0:me.length,me.splice.apply(me,[Ue,0].concat(fe))}Ge[rt]=me})})},areMediaInfosEqual:function(Te,ie){if(!Te||!ie)return!1;const le=Te.id===ie.id,he=Te.codec===ie.codec,Pe=JSON.stringify(Te.viewpoint)===JSON.stringify(ie.viewpoint),Ge=Te.lang===ie.lang,ze=JSON.stringify(Te.roles)===JSON.stringify(ie.roles),Ve=JSON.stringify(Te.accessibility)===JSON.stringify(ie.accessibility),nt=JSON.stringify(Te.audioChannelConfiguration)===JSON.stringify(ie.audioChannelConfiguration);return le&&he&&Pe&&Ge&&ze&&Ve&&nt},getAllMediaInfoForType:function(Te,ie,le){let he=P,Pe=le,Ge=[];if(Pe)Ce(),he=oe(Pe);else{if(!(P.length>0))return Ge;Pe=P[0].mpd.manifest}const ze=ve(Te,he);let Ve=C.getAdaptationsForType(Pe,Te?Te.index:null,ie);return Ge=B(Pe,ze,Te,Ve,ie),ie===F.TEXT&&(Ve=C.getAdaptationsForType(Pe,Te?Te.index:null,F.VIDEO),Ge=Ge.concat(B(Pe,ze,Te,Ve,ie,!0))),Ge},getAvailabilityStartTime:function(Te){const ie=X(Te);return C.getAvailabilityStartTime(ie)},getBandwidthForRepresentation:function(Te,ie){let le;return le=Ye(Le(ie),Te),le?le.bandwidth:null},getBaseURLsFromElement:function(Te){return C.getBaseURLsFromElement(Te)},getCodec:function(Te,ie,le){return C.getCodec(Te,ie,le)},getContentSteering:function(Te){return C.getContentSteering(Te)},getDuration:function(Te){const ie=$(Te);return C.getDuration(ie)},getEssentialPropertiesForAdaptationSet:function(Te){try{return C.getEssentialPropertiesForRepresentation(Te)}catch{return[]}},getEssentialPropertiesForRepresentation:function(Te){try{return C.getEssentialPropertiesForRepresentation(Te)}catch{return[]}},getEvent:function(Te,ie,le,he){try{if(!Te||!ie||isNaN(le)||!he)return null;const Pe=Te.scheme_id_uri,Ge=Te.value;if(!ie[Pe+"/"+Ge])return null;const ze=new In,Ve=Te.timescale||1,nt=he.adaptation.period.start,rt=ie[Pe+"/"+Ge],fe=isNaN(he.presentationTimeOffset)?isNaN(rt.presentationTimeOffset)?0:rt.presentationTimeOffset:he.presentationTimeOffset;let me,Ue=Te.presentation_time_delta/Ve;me=Te.version===0?nt+le-fe+Ue:nt-fe+Ue;const je=Te.event_duration/Ve,Ee=Te.id,ye=Te.message_data;return ze.eventStream=rt,ze.eventStream.value=Ge,ze.eventStream.timescale=Ve,ze.duration=je,ze.id=Ee,ze.calculatedPresentationTime=me,ze.messageData=ye,ze.presentationTimeDelta=Ue,ze.parsedMessageData=Pe===j.default.ID3_SCHEME_ID_URI?function(de){let we=0;const qe=[];for(;oh(de,we);){const tt=Zd(de,we+6);de[we+5]>>6&1&&(we+=10),we+=10;const mt=we+tt;for(;we+10<mt;){const Tt=h0(de.subarray(we)),Vt=f0(Tt);Vt&&qe.push(Vt),we+=Tt.size+10}db(de,we)&&(we+=10)}return qe}(ye):null,ze}catch{return null}},getEventsFor:function(Te,ie,le){let he=[];if(P.length>0){const Pe=P[0].mpd.manifest;if(Te instanceof Qg){const Ge=ve(Te,P);he=C.getEventsForPeriod(Ge)}else if(Te instanceof ah){const Ge=ve(le,P);he=C.getEventStreamForAdaptationSet(Pe,re(Te),Ge)}else if(Te instanceof ur){const Ge=ve(le,P);he=C.getEventStreamForRepresentation(Pe,ie,Ge)}}return he},getFramerate:function(Te){return C.getFramerate(Te)},getIndexForRepresentation:function(Te,ie){return function(le,he){const Pe=Ye(le,he,!0);return Pe!==null?Pe:-1}(Le(ie),Te)},getIsDVB:function(Te){return C.hasProfile(Te,"urn:dvb:dash:profile:dvb-dash:2014")},getIsDynamic:function(Te){const ie=$(Te);return C.getIsDynamic(ie)},getIsPatch:function(Te){return R.getIsPatch(Te)},getIsTextTrack:function(Te){return C.getIsText(Te)},getIsTypeOf:function(Te,ie){return C.getIsTypeOf(Te,ie)},getLocation:function(Te){return C.getLocation(Te)},getMainAdaptationForType:ne,getManifestUpdatePeriod:function(Te){let ie=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return C.getManifestUpdatePeriod(Te,ie)},getMediaInfoForType:function(Te,ie){if(P.length===0||!Te)return null;let le=ve(Te,P);if(!le)return null;const he=C.getAdaptationsForPeriod(le);let Pe=ne(ie,Te);return Pe?Se(he[C.getIndexForAdaptation(Pe,P[0].mpd.manifest,Te.index)]):null},getMpd:X,getPatchLocation:function(Te){const ie=C.getPatchLocation(Te),le=C.getPublishTime(Te);return ie&&ie.length!==0&&le?ie.filter(he=>isNaN(he.ttl)||le.getTime()+he.ttl>new Date().getTime()):[]},getPeriodById:function(Te){if(!Te||P.length===0)return null;const ie=P.filter(le=>le.id===Te);return ie&&ie.length>0?ie[0]:null},getProducerReferenceTimes:function(Te,ie){let le,he;const Pe=ve(Te,P);return le=ie?ie.id:null,P.length>0&&Pe&&(he=le?C.getAdaptationForId(le,P[0].mpd.manifest,Pe.index):C.getAdaptationForIndex(ie?ie.index:null,P[0].mpd.manifest,Pe.index)),he?C.getProducerReferenceTimesForAdaptation(he):[]},getPublishTime:function(Te){return C.getPublishTime(Te)},getRealAdaptation:function(Te,ie){let le,he;const Pe=ve(Te,P);return le=ie?ie.id:null,P.length>0&&Pe&&(he=le?C.getAdaptationForId(le,P[0].mpd.manifest,Pe.index):C.getAdaptationForIndex(ie?ie.index:null,P[0].mpd.manifest,Pe.index)),he},getRealPeriodByIndex:function(Te){return C.getRealPeriodForIndex(Te,P[0].mpd.manifest)},getRegularPeriods:oe,getRepresentationSortFunction:function(){return C.getRepresentationSortFunction()},getStreamsInfo:function(Te,ie){const le=[];let he=P;if(Te&&(Ce(),he=oe(Te)),he.length>0){(!ie||ie>he.length)&&(ie=he.length);for(let Pe=0;Pe<ie;Pe++)le.push(Ie(he[Pe]))}return le},getSuggestedPresentationDelay:function(){const Te=P.length>0?P[0].mpd:null;return C.getSuggestedPresentationDelay(Te)},getSupplementalCodecs:function(Te){const ie=Te[M.default.SUPPLEMENTAL_CODECS];return ie?ie.split(" ").map(le=>Te.mimeType+';codecs="'+le+'"'):[]},getUTCTimingSources:function(){const Te=$();return C.getUTCTimingSources(Te)},getVoRepresentations:function(Te){let ie;const le=re(Te);return ie=C.getRepresentationsForAdaptation(le,Te),ie},isPatchValid:function(Te,ie){let le=C.getId(Te),he=R.getMpdId(ie),Pe=C.getPublishTime(Te),Ge=R.getPublishTime(ie),ze=R.getOriginalPublishTime(ie);return!!(le&&he&&le==he&&Pe&&ze&&Pe.getTime()==ze.getTime()&&Ge&&Pe.getTime()<Ge.getTime())},reset:q,setConfig:function(Te){Te&&(Te.constants&&(F=Te.constants),Te.cea608parser&&(z=Te.cea608parser),Te.errHandler&&C.setConfig({errHandler:Te.errHandler}),Te.BASE64&&C.setConfig({BASE64:Te.BASE64}))},updatePeriods:function(Te){if(!Te)return null;Ce(),P=oe(Te)}},C=Ms(Q).getInstance(),R=d0(Q).getInstance(),q(),D}p0.__dashjs_factory_name="DashAdapter";var fb=ue.default.getSingletonFactory(p0);class g0{static round10(C,R){return function(P,F,z){return z===void 0||+z==0?Math[P](F):(z=+z,(F=+F)===null||isNaN(F)||typeof z!="number"||z%1!=0?NaN:(F=F.toString().split("e"),+((F=(F=Math[P](+(F[0]+"e"+(F[1]?+F[1]-z:-z)))).toString().split("e"))[0]+"e"+(F[1]?+F[1]+z:z))))}("round",C,R)}}var hb=class{constructor(){this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]}},m0=class{constructor(){this.t=null,this.mt=null,this.to=null,this.lto=null}},pb=class{constructor(){this.t=null,this.level=null}},gb=class{constructor(){this.target=null,this.state=Z.BUFFER_EMPTY}},mb=class{constructor(){this.time=null,this.range=null,this.manifestInfo=null}},dp=class{constructor(){this.time=null,this.droppedFrames=null}};class y0{constructor(){this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]}}class v0{constructor(){this.id=null,this.index=null,this.start=null,this.duration=null}}class Zg{constructor(){this.id=null,this.index=null,this.mediaType=null,this.presentationTimeOffset=null,this.startNumber=null}}var yb=class{constructor(){this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.bandwidth=null,this.range=null,this.state=null}},ef=class{constructor(){this.loadingRequests=[],this.executedRequests=[]}};function tf(D){const C=(D=D||{}).settings;let R,P,F=this.context,z=(0,K.default)(F).getInstance();function Q(){z.trigger(x.default.METRICS_CHANGED)}function ne(re){z.trigger(x.default.METRIC_CHANGED,{mediaType:re}),Q()}function B(re,ve,Se){z.trigger(x.default.METRIC_UPDATED,{mediaType:re,metric:ve,value:Se}),ne(re)}function oe(re,ve,Se){z.trigger(x.default.METRIC_ADDED,{mediaType:re,metric:ve,value:Se}),ne(re)}function X(re,ve){let Se=null;return re&&(P.hasOwnProperty(re)?Se=P[re]:ve||(Se=new hb,P[re]=Se)),Se}function q(re,ve,Se){let ke=X(re);ke!==null&&(ke[ve].push(Se),ke[ve].length>C.get().streaming.metrics.maxListDepth&&ke[ve].shift())}function $(re,ve,Se){q(re,ve,Se),oe(re,ve,Se)}return R={addBufferLevel:function(re,ve,Se){let ke=new pb;ke.t=ve,ke.level=Se,$(re,Z.BUFFER_LEVEL,ke)},addBufferState:function(re,ve,Se){let ke=new gb;ke.target=Se,ke.state=ve,$(re,Z.BUFFER_STATE,ke)},addDVBErrors:function(re){$(j.default.STREAM,Z.DVB_ERRORS,re)},addDVRInfo:function(re,ve,Se,ke){let Ie=new mb;Ie.time=ve,Ie.range=ke,Ie.manifestInfo=Se,$(re,Z.DVR_INFO,Ie)},addDroppedFrames:function(re,ve){let Se=new dp,ke=X(re).DroppedFrames;ve&&(Se.time=ve.creationTime,Se.droppedFrames=ve.droppedVideoFrames,ke.length>0&&ke[ke.length-1]==Se||$(re,Z.DROPPED_FRAMES,Se))},addHttpRequest:function re(ve,Se,ke,Ie){let Ce=new Xe.HTTPRequest;Se.url&&Se.url!==ve.url&&(re({mediaType:ve.mediaType,type:ve.type,url:ve.url,serviceLocation:null,range:ve.range,startDate:ve.startDate,firstByteDate:null,endDate:null,duration:ve.duration,fileLoaderType:ve.fileLoaderType,resourceTimingValues:ve.resourceTimingValues},{url:null,status:null,headers:null},null,Ie),Ce.actualurl=Se.url),Ce.tcpid=null,Ce.type=ve.type,Ce.url=ve.url,Ce.range=ve.range||null,Ce.trequest=ve.startDate,Ce.tresponse=ve.firstByteDate,Ce.responsecode=Se.status,Ce.cmsd=Ie,Ce._tfinish=ve.endDate,Ce._stream=ve.mediaType,Ce._mediaduration=ve.duration,Ce._responseHeaders="";for(const Le in Se.headers)Ce._responseHeaders+=Le+": "+Se.headers[Le]+`\r
`;Ce._serviceLocation=ve.serviceLocation||null,Ce._fileLoaderType=ve.fileLoaderType,Ce._resourceTimingValues=ve.resourceTimingValues,Ce._streamId=ve&&ve.representation&&ve.representation.mediaInfo&&ve.representation.mediaInfo.streamInfo?ve.representation.mediaInfo.streamInfo.id:null,ke?ke.forEach(Le=>{(function(Ye,Te,ie,le){let he=new Xe.HTTPRequestTrace;he.s=Te,he.d=ie,he.b=le,Ye.trace.push(he),Ye.interval||(Ye.interval=0),Ye.interval+=ie})(Ce,Le.s,Le.d,Le.b,Le.t)}):(delete Ce.interval,delete Ce.trace),$(ve.mediaType,Z.HTTP_REQUEST,Ce)},addManifestUpdate:function(re,ve,Se,ke){let Ie=new y0;Ie.mediaType=re,Ie.type=ve,Ie.requestTime=Se,Ie.fetchTime=ke,q(j.default.STREAM,Z.MANIFEST_UPDATE,Ie),oe(re,Z.MANIFEST_UPDATE,Ie)},addManifestUpdateRepresentationInfo:function(re,ve,Se){if(re&&re.representationInfo){const ke=new Zg;ke.id=ve?ve.id:null,ke.index=ve?ve.index:null,ke.mediaType=Se,ke.startNumber=ve?ve.startNumber:null,ke.presentationTimeOffset=ve?ve.presentationTimeOffset:null,re.representationInfo.push(ke),B(re.mediaType,Z.MANIFEST_UPDATE_TRACK_INFO,re)}},addManifestUpdateStreamInfo:function(re,ve,Se,ke,Ie){if(re){let Ce=new v0;Ce.id=ve,Ce.index=Se,Ce.start=ke,Ce.duration=Ie,re.streamInfo.push(Ce),B(re.mediaType,Z.MANIFEST_UPDATE_STREAM_INFO,re)}},addPlayList:function(re){re.trace&&Array.isArray(re.trace)?re.trace.forEach(ve=>{ve.hasOwnProperty("subreplevel")&&!ve.subreplevel&&delete ve.subreplevel}):delete re.trace,$(j.default.STREAM,Z.PLAY_LIST,re)},addRepresentationSwitch:function(re,ve,Se,ke,Ie){let Ce=new m0;Ce.t=ve,Ce.mt=Se,Ce.to=ke,Ie?Ce.lto=Ie:delete Ce.lto,$(re,Z.TRACK_SWITCH,Ce)},addRequestsQueue:function(re,ve,Se){let ke=new ef;ke.loadingRequests=ve,ke.executedRequests=Se,X(re).RequestsQueue=ke,oe(re,Z.REQUESTS_QUEUE,ke)},addSchedulingInfo:function(re,ve,Se,ke,Ie,Ce,Le,Ye,Te){let ie=new yb;ie.mediaType=re,ie.t=ve,ie.type=Se,ie.startTime=ke,ie.availabilityStartTime=Ie,ie.duration=Ce,ie.bandwidth=Le,ie.range=Ye,ie.state=Te,$(re,Z.SCHEDULING_INFO,ie)},clearAllCurrentMetrics:function(){P={},Q()},clearCurrentMetricsForType:function(re){delete P[re],ne(re)},getMetricsFor:X,updateManifestUpdateInfo:function(re,ve){if(re){for(let Se in ve)re[Se]=ve[Se];B(re.mediaType,Z.MANIFEST_UPDATE,re)}}},P={},R}tf.__dashjs_factory_name="MetricsModel";var em=ue.default.getSingletonFactory(tf);function tm(D){D=D||{};const C=this.context;let R,P,F,z,Q=D.metricsModel;function ne(X){const q=Q.getMetricsFor(X,!0);if(!q)return null;const $=q.HttpList;let re,ve=null;if(!$||$.length<=0)return null;for(re=$.length-1;re>=0;){if($[re].responsecode){ve=$[re];break}re--}return ve}function B(X){const q=Q.getMetricsFor(X,!0);return q&&q.HttpList?q.HttpList:[]}function oe(X,q){if(!X)return null;const $=X[q];return $&&$.length!==0?$[$.length-1]:null}return R={getCurrentRepresentationSwitch:function(X){return oe(Q.getMetricsFor(X,!0),Z.TRACK_SWITCH)},getCurrentBufferState:function(X){return oe(Q.getMetricsFor(X,!0),Z.BUFFER_STATE)},getCurrentBufferLevel:function(X){const q=oe(Q.getMetricsFor(X,!0),Z.BUFFER_LEVEL);return q?g0.round10(q.level/1e3,-3):0},getCurrentHttpRequest:ne,getHttpRequests:B,getCurrentDroppedFrames:function(){return oe(Q.getMetricsFor(j.default.VIDEO,!0),Z.DROPPED_FRAMES)},getCurrentSchedulingInfo:function(X){return oe(Q.getMetricsFor(X,!0),Z.SCHEDULING_INFO)},getCurrentDVRInfo:function(X){return oe(X?Q.getMetricsFor(X,!0):Q.getMetricsFor(j.default.VIDEO,!0)||Q.getMetricsFor(j.default.AUDIO,!0),Z.DVR_INFO)},getCurrentManifestUpdate:function(){return oe(Q.getMetricsFor(j.default.STREAM),Z.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function(X,q){if(!q)return null;let $={},re=ne(X);re&&($=it.default.parseHttpHeaders(re._responseHeaders));const ve=$[q.toLowerCase()];return ve===void 0?null:ve},getLatestMPDRequestHeaderValueByID:function(X){if(!X)return null;let q,$,re,ve={};for(q=B(j.default.STREAM),re=q.length-1;re>=0;re--)if($=q[re],$.type===Xe.HTTPRequest.MPD_TYPE){ve=it.default.parseHttpHeaders($._responseHeaders);break}const Se=ve[X.toLowerCase()];return Se===void 0?null:Se},addRepresentationSwitch:function(X,q,$,re,ve){Q.addRepresentationSwitch(X,q,$,re,ve)},addDVRInfo:function(X,q,$,re){Q.addDVRInfo(X,q,$,re)},updateManifestUpdateInfo:function(X){const q=this.getCurrentManifestUpdate();Q.updateManifestUpdateInfo(q,X)},addManifestUpdateStreamInfo:function(X){if(X){const q=this.getCurrentManifestUpdate();Q.addManifestUpdateStreamInfo(q,X.id,X.index,X.start,X.duration)}},addManifestUpdateRepresentationInfo:function(X,q){if(X){const $=this.getCurrentManifestUpdate();Q.addManifestUpdateRepresentationInfo($,X,q)}},addManifestUpdate:function(X){Q.addManifestUpdate(j.default.STREAM,X.type,X.startDate,X.endDate)},addHttpRequest:function(X,q,$,re,ve,Se){const ke={status:$,headers:re,url:q};Q.addHttpRequest(X,ke,ve,Se)},addSchedulingInfo:function(X,q){Q.addSchedulingInfo(X.mediaType,new Date,X.type,X.startTime,X.availabilityStartTime,X.duration,X.bandwidth,X.range,q)},addRequestsQueue:function(X,q,$){Q.addRequestsQueue(X,q,$)},addBufferLevel:function(X,q,$){Q.addBufferLevel(X,q,$)},addBufferState:function(X,q,$){Q.addBufferState(X,q,$)},addDroppedFrames:function(X){Q.addDroppedFrames(j.default.VIDEO,X)},addPlayList:function(){z&&(Q.addPlayList(z),z=null)},addDVBErrors:function(X){Q.addDVBErrors(X)},createPlaylistMetrics:function(X,q){z=new Ke,z.start=new Date,z.mstart=X,z.starttype=q},createPlaylistTraceMetrics:function(X,q,$){P===!0&&(P=!1,F=new ft,F.representationid=X,F.start=new Date,F.mstart=q,F.playbackspeed=$!==null?$.toString():null)},updatePlayListTraceMetrics:function(X){if(F)for(let q in F)F[q]=X[q]},pushPlayListTraceMetrics:function(X,q){if(P===!1&&z&&F&&F.start){const $=F.start;F.duration=X.getTime()-$.getTime(),F.stopreason=q,z.trace.push(F),P=!0}},clearAllCurrentMetrics:function(){Q.clearAllCurrentMetrics()}},Q=Q||em(C).getInstance({settings:D.settings}),P=!0,F=null,z=null,R}tm.__dashjs_factory_name="DashMetrics";var T0=ue.default.getSingletonFactory(tm);function nm(){const D=this.context,C=(0,K.default)(D).getInstance(),R=(0,ge.default)(D).getInstance();let P,F,z,Q;function ne(Ie){Q=Ie}function B(Ie,Ce,Le,Ye){let Te,ie=Ce.adaptation.period.mpd;const le=ie.availabilityStartTime;if(Ye)Te=Le&&ie.timeShiftBufferDepth!==Number.POSITIVE_INFINITY?new Date(le.getTime()+1e3*(Ie+ie.timeShiftBufferDepth)):ie.availabilityEndTime;else if(Le){const he=Ce.availabilityTimeOffset;Te=new Date(le.getTime()+1e3*(Ie-he))}else Te=le;return Te}function oe(Ie,Ce){return(Ie.getTime()-Ce.mpd.availabilityStartTime.getTime()+1e3*Q)/1e3}function X(Ie,Ce){return Ie+(Ce.adaptation.period.start-Ce.presentationTimeOffset)}function q(Ie){const Ce={start:NaN,end:NaN},Le=Ie[0].getAdapter().getRegularPeriods()[0],Ye=oe(new Date,Le);if(!Ie||Ie.length===0)return{range:Ce,now:Ye};Ie.forEach(ie=>{let le=ie.getCurrentRepresentationForType(j.default.VIDEO);if(le||(le=ie.getCurrentRepresentationForType(j.default.AUDIO)),!le){const Pe=ie.getAdapter(),Ge=Pe.getMediaInfoForType(ie.getStreamInfo(),j.default.VIDEO)||Pe.getMediaInfoForType(ie.getStreamInfo(),j.default.AUDIO);le=Pe.getVoRepresentations(Ge)[0]}let he={start:NaN,end:NaN};if(le)if(le.segmentInfoType===M.default.SEGMENT_TIMELINE)he=function(Pe){const Ge=Pe.adaptation.period.mpd.manifest.Period[Pe.adaptation.period.index].AdaptationSet[Pe.adaptation.index],ze=F.getRepresentationFor(Pe.index,Ge),Ve=ze.SegmentTemplate||ze.SegmentList,nt=Ve.SegmentTimeline,rt=Ve.timescale,fe=nt.S,me={start:0,end:0},Ue=fe[0].t,je=!isNaN(Ue),Ee=je?Ue:0;let ye,de,we,qe,tt=0;for(je&&(me.start=X(Ee/rt,Pe)),we=0,qe=fe.length;we<qe;we++)ye=fe[we],de=0,ye.hasOwnProperty("r")&&(de=ye.r),tt+=ye.d*(1+de);return me.end=X((Ee+tt)/rt,Pe),me}(le);else{const Pe=le.adaptation.period;he.start=Pe.start,he.end=Math.max(Ye,Pe.start+Pe.duration)}!isNaN(he.start)&&(isNaN(Ce.start)||Ce.start>he.start)&&(Ce.start=he.start),!isNaN(he.end)&&(isNaN(Ce.end)||Ce.end<he.end)&&(Ce.end=he.end)}),Ce.end=Math.min(Ye,Ce.end);const Te=re(Ie,Ce.end,!0);return Ce.end=isNaN(Te)?Ce.end:Te,Ce.start=Le&&Le.mpd&&Le.mpd.timeShiftBufferDepth&&!isNaN(Le.mpd.timeShiftBufferDepth)&&!isNaN(Ce.end)?Math.max(Ce.end-Le.mpd.timeShiftBufferDepth,Ce.start):Ce.start,Ce.start=re(Ie,Ce.start),{range:Ce,now:Ye}}function $(Ie,Ce){z=Ie-Ce.end}function re(Ie,Ce){let Le=arguments.length>2&&arguments[2]!==void 0&&arguments[2];try{let Ye=0,Te=!1,ie=NaN;for(;!Te&&Ye<Ie.length;){const le=Ie[Ye].getStreamInfo();le.start<=Ce&&(!isFinite(le.duration)||le.start+le.duration>=Ce)?(ie=Ce,Te=!0):!Le&&le.start>Ce&&(isNaN(ie)||le.start<ie)?ie=le.start:Le&&le.start+le.duration<Ce&&(isNaN(ie)||le.start+le.duration>ie)&&(ie=le.start+le.duration),Ye+=1}return ie}catch{return Ce}}function ve(Ie){Ie.offset===void 0||isNaN(Ie.offset)||ne(Ie.offset/1e3)}function Se(){Q=0,z=0}function ke(){C.off(x.default.UPDATE_TIME_SYNC_OFFSET,ve,this),Se()}return P={initialize:function(){Se(),C.on(x.default.UPDATE_TIME_SYNC_OFFSET,ve,this)},getClientTimeOffset:function(){return Q},setClientTimeOffset:ne,getClientReferenceTime:function(){return Date.now()-1e3*z+1e3*Q},calcAvailabilityStartTimeFromPresentationTime:function(Ie,Ce,Le){return B(Ie,Ce,Le)},calcAvailabilityEndTimeFromPresentationTime:function(Ie,Ce,Le){return B(Ie,Ce,Le,!0)},calcPresentationTimeFromWallTime:oe,calcPresentationTimeFromMediaTime:X,calcPeriodRelativeTimeFromMpdRelativeTime:function(Ie,Ce){return Ce-Ie.adaptation.period.start},calcMediaTimeFromPresentationTime:function(Ie,Ce){return Ie-Ce.adaptation.period.start+Ce.presentationTimeOffset},calcWallTimeForSegment:function(Ie,Ce){let Le,Ye,Te;return Ce&&(Le=Ie.representation.adaptation.period.mpd.suggestedPresentationDelay,Ye=Ie.presentationStartTime+Le,Te=new Date(Ie.availabilityStartTime.getTime()+1e3*Ye)),Te},calcTimeShiftBufferWindow:function(Ie,Ce){if(!Ce)return function(Le){const Ye={start:NaN,end:NaN};let Te=0,ie=NaN;return Le.forEach(le=>{const he=le.getStreamInfo();Te+=he.duration,(isNaN(ie)||he.start<ie)&&(ie=he.start)}),Ye.start=ie,Ye.end=ie+Te,Ye}(Ie);if(R.get().streaming.timeShiftBuffer.calcFromSegmentTimeline){const Le=q(Ie);return $(Le.now,Le.range),Le.range}return function(Le){const Ye={start:NaN,end:NaN};if(!Le||Le.length===0)return Ye;const Te=Le[0].getAdapter().getRegularPeriods()[0],ie=oe(new Date,Te),le=Te.mpd.timeShiftBufferDepth,he=isNaN(le)?0:ie-le;if(Ye.start=re(Le,he),Ye.end=!isNaN(Ye.start)&&ie<Ye.start?ie:re(Le,ie,!0),!isNaN(le)&&Ye.end<ie-le&&(Ye.end=NaN),R.get().streaming.timeShiftBuffer.fallbackToSegmentTimeline){const Pe=q(Le);if(Pe.range.end<Ye.start)return C.trigger(xe.default.CONFORMANCE_VIOLATION,{level:Xa.LEVELS.WARNING,event:Xa.EVENTS.INVALID_DVR_WINDOW}),$(Pe.now,Pe.range),Pe.range}return Ye}(Ie)},reset:ke},F=Ms(D).getInstance(),ke(),P}nm.__dashjs_factory_name="TimelineConverter";var Vo,fp,ud,Tc,qu,vb=ue.default.getSingletonFactory(nm),E0=function(D){for(var C=[],R=0;R<D.length;++R){var P=D.charCodeAt(R);P<128?C.push(P):P<2048?(C.push(192|P>>6),C.push(128|63&P)):P<65536?(C.push(224|P>>12),C.push(128|63&P>>6),C.push(128|63&P)):(C.push(240|P>>18),C.push(128|63&P>>12),C.push(128|63&P>>6),C.push(128|63&P))}return C},nf=function(D){for(var C=[],R=0;R<D.length;){var P=D[R++];P<128||(P<224?(P=(31&P)<<6,P|=63&D[R++]):P<240?(P=(15&P)<<12,P|=(63&D[R++])<<6,P|=63&D[R++]):(P=(7&P)<<18,P|=(63&D[R++])<<12,P|=(63&D[R++])<<6,P|=63&D[R++])),C.push(String.fromCharCode(P))}return C.join("")},$o={};Vo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fp=function(D){for(var C=0,R=[],P=0|D.length/3;0<P--;){var F=(D[C]<<16)+(D[C+1]<<8)+D[C+2];C+=3,R.push(Vo.charAt(63&F>>18)),R.push(Vo.charAt(63&F>>12)),R.push(Vo.charAt(63&F>>6)),R.push(Vo.charAt(63&F))}return D.length-C==2?(F=(D[C]<<16)+(D[C+1]<<8),R.push(Vo.charAt(63&F>>18)),R.push(Vo.charAt(63&F>>12)),R.push(Vo.charAt(63&F>>6)),R.push("=")):D.length-C==1&&(F=D[C]<<16,R.push(Vo.charAt(63&F>>18)),R.push(Vo.charAt(63&F>>12)),R.push("==")),R.join("")},ud=function(){for(var D=[],C=0;C<64;++C)D[Vo.charCodeAt(C)]=C;return D[61]=0,D}(),Tc=function(D){for(var C=0,R=[],P=0|D.length/4;0<P--;){var F=(ud[D.charCodeAt(C)]<<18)+(ud[D.charCodeAt(C+1)]<<12)+(ud[D.charCodeAt(C+2)]<<6)+ud[D.charCodeAt(C+3)];R.push(255&F>>16),R.push(255&F>>8),R.push(255&F),C+=4}return R&&(D.charAt(C-2)=="="?(R.pop(),R.pop()):D.charAt(C-1)=="="&&R.pop()),R},qu={encode:function(D){for(var C=[],R=0;R<D.length;++R)C.push(D.charCodeAt(R));return C},decode:function(D){for(var C=0;C<s.length;++C)a[C]=String.fromCharCode(a[C]);return a.join("")}},$o.decodeArray=function(D){var C=Tc(D);return new Uint8Array(C)},$o.encodeASCII=function(D){var C=qu.encode(D);return fp(C)},$o.decodeASCII=function(D){var C=Tc(D);return qu.decode(C)},$o.encode=function(D){var C=E0(D);return fp(C)},$o.decode=function(D){var C=Tc(D);return nf(C)},typeof Zp<"u"&&(Zp.decode=$o.decode,Zp.decodeArray=$o.decodeArray,Zp.encode=$o.encode,Zp.encodeASCII=$o.encodeASCII);var rf=$o,hp=class extends ah{constructor(){super(),this.captionData=null,this.label=null,this.defaultTrack=!1,this.kind=null,this.isFragmented=!1,this.isEmbedded=!1,this.isTTML=null}},pp=n(7377);function im(){let D,C=0;function R(B){let oe="";for(let X=0;X<B.length;++X)oe+=B[X].uchar;return oe.length-oe.replace(/^\s+/,"").length}function P(B){return"left: "+3.125*B.x+"%; top: "+6.66*B.y1+"%; width: "+(100-3.125*B.x)+"%; height: "+6.66*Math.max(B.y2-1-B.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"}function F(B){return B==="red"?"rgb(255, 0, 0)":B==="green"?"rgb(0, 255, 0)":B==="blue"?"rgb(0, 0, 255)":B==="cyan"?"rgb(0, 255, 255)":B==="magenta"?"rgb(255, 0, 255)":B==="yellow"?"rgb(255, 255, 0)":B==="white"?"rgb(255, 255, 255)":B==="black"?"rgb(0, 0, 0)":B}function z(B,oe){const X=B.videoHeight/15;return oe?"font-size: "+X+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(oe.foreground?F(oe.foreground):"rgb(255, 255, 255)")+"; font-style: "+(oe.italics?"italic":"normal")+"; text-decoration: "+(oe.underline?"underline":"none")+"; white-space: pre; background-color: "+(oe.background?F(oe.background):"transparent")+";":"font-size: "+X+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}function Q(B){return B.replace(/^\s+/g,"")}function ne(B){return B.replace(/\s+$/g,"")}return D={createHTMLCaptionsFromScreen:function(B,oe,X,q){let $=null,re=null,ve=!1,Se=-1,ke={start:oe,end:X,spans:[]},Ie="style_cea608_white_black";const Ce={},Le={},Ye=[];let Te,ie;for(Te=0;Te<15;++Te){const he=q.rows[Te];let Pe="",Ge=null;if(he.isEmpty()===!1){const ze=R(he.chars);$===null&&($={x:ze,y1:Te,y2:Te+1,p:[]}),ze!==Se&&ve&&($.p.push(ke),ke={start:oe,end:X,spans:[]},$.y2=Te,$.name="region_"+$.x+"_"+$.y1+"_"+$.y2,Ce.hasOwnProperty($.name)===!1?(Ye.push($),Ce[$.name]=$):(re=Ce[$.name],re.p.contat($.p)),$={x:ze,y1:Te,y2:Te+1,p:[]});for(let Ve=0;Ve<he.chars.length;++Ve){const nt=he.chars[Ve],rt=nt.penState;if(Ge===null||!rt.equals(Ge)){Pe.trim().length>0&&(ke.spans.push({name:Ie,line:Pe,row:Te}),Pe="");let fe="style_cea608_"+rt.foreground+"_"+rt.background;rt.underline&&(fe+="_underline"),rt.italics&&(fe+="_italics"),Le.hasOwnProperty(fe)||(Le[fe]=JSON.parse(JSON.stringify(rt))),Ge=rt,Ie=fe}Pe+=nt.uchar}Pe.trim().length>0&&ke.spans.push({name:Ie,line:Pe,row:Te}),ve=!0,Se=ze}else ve=!1,Se=-1,$&&($.p.push(ke),ke={start:oe,end:X,spans:[]},$.y2=Te,$.name="region_"+$.x+"_"+$.y1+"_"+$.y2,Ce.hasOwnProperty($.name)===!1?(Ye.push($),Ce[$.name]=$):(re=Ce[$.name],re.p.contat($.p)),$=null)}$&&($.p.push(ke),$.y2=Te+1,$.name="region_"+$.x+"_"+$.y1+"_"+$.y2,Ce.hasOwnProperty($.name)===!1?(Ye.push($),Ce[$.name]=$):(re=Ce[$.name],re.p.contat($.p)),$=null);const le=[];for(Te=0;Te<Ye.length;++Te){const he=Ye[Te],Pe="sub_cea608_"+C++,Ge=document.createElement("div");Ge.id=Pe;const ze=P(he);Ge.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+ze;const Ve=document.createElement("div");Ve.className="paragraph bodyStyle",Ve.style.cssText=z(B);const nt=document.createElement("div");nt.className="cueUniWrapper",nt.style.cssText="unicode-bidi: normal; direction: ltr;";for(let fe=0;fe<he.p.length;++fe){const me=he.p[fe];let Ue=0;for(ie=0;ie<me.spans.length;++ie){let je=me.spans[ie];if(je.line.length>0){if(ie!==0&&Ue!=je.row){const we=document.createElement("br");we.className="lineBreak",nt.appendChild(we)}let Ee=!1;Ue===je.row&&(Ee=!0),Ue=je.row;const ye=Le[je.name],de=document.createElement("span");de.className="spanPadding "+je.name+" customSpanColor",de.style.cssText=z(B,ye),ie!==0&&Ee?ie===me.spans.length-1?de.textContent=ne(je.line):de.textContent=je.line:me.spans.length>1&&ie<me.spans.length-1&&je.row===me.spans[ie+1].row?de.textContent=Q(je.line):de.textContent=je.line.trim(),nt.appendChild(de)}}}Ve.appendChild(nt),Ge.appendChild(Ve);const rt={bodyStyle:["%",90]};for(const fe in Le)Le.hasOwnProperty(fe)&&(rt[fe]=["%",90]);le.push({type:"html",start:oe,end:X,cueHTMLElement:Ge,cueID:Pe,cellResolution:[32,15],isFromCEA608:!0,fontSize:rt,lineHeight:{},linePadding:{}})}return le}},D}im.__dashjs_factory_name="EmbeddedTextHtmlRender";var b0=ue.default.getSingletonFactory(im);function Tb(D,C,R){const P=[];for(let F=C;F<R;F++)F+2<R&&D.getUint8(F)===0&&D.getUint8(F+1)===0&&D.getUint8(F+2)===3?(P.push(0),P.push(0),F+=2):P.push(D.getUint8(F));return new DataView(new Uint8Array(P).buffer)}function lh(D,C,R,P){return!(D!==4||C<8)&&R.getUint8(P)===181&&R.getUint16(P+1)===49&&R.getUint32(P+3)===1195456820&&R.getUint8(P+7)===3}function no(D,C){return(127&D)>0||(127&C)>0}function cd(D,C){let R=0;for(;R<D.byteLength;){let F,z=0,Q=0;do z+=F=D.getUint8(R++);while(F===255);do Q+=F=D.getUint8(R++);while(F===255);if(lh(z,Q,D,R)){const ne=R+10,B=ne+3*(31&D.getUint8(ne-2));for(let oe=ne;oe<B;oe+=3){const X=D.getUint8(oe);if(4&X){const q=3&X;if((P=q)===0||P===1){const $=D.getUint8(oe+1),re=D.getUint8(oe+2);no($,re)&&C[q].push($,re)}}}}R+=Q}var P}function sf(D,C,R){let P=0,F=0;const z=[[],[]];for(let Q=C;Q<C+R-5&&(P=D.getUint32(Q),F=31&D.getUint8(Q+4),!(Q+5+P>C+R));Q++)F===6&&Q+5+P<=D.byteLength&&cd(Tb(D,Q+5,Q+5+P),z),Q+=P+3;return z}function rm(D){const C=D.errHandler,R=D.manifestModel,P=D.mediaController,F=D.videoModel,z=D.textTracks,Q=D.vttParser,ne=D.vttCustomRenderingParser,B=D.ttmlParser,oe=D.streamInfo,X=D.settings,q=this.context,$=(0,K.default)(q).getInstance();let re,ve,Se,ke,Ie,Ce,Le,Ye,Te,ie,le,he,Pe,Ge,ze,Ve,nt,rt=!1;function fe(){Ce=null,Ye=NaN,Te=[],ie=null,Le=!1,Ie=[],ke=null}function me(mt){const Tt={};Tt[M.default.SUBTITLE]="subtitles",Tt[M.default.CAPTION]="captions",Tt[M.default.FORCED_SUBTITLE]="subtitles";const Vt=new hp;for(let Jt in mt)Vt[Jt]=mt[Jt];Vt.defaultTrack=function(Jt){let yn=!1;return he.length>1&&Jt.isEmbedded?yn=Jt.id&&Jt.id===j.default.CC1:he.length===1?Jt.id&&typeof Jt.id=="string"&&Jt.id.substring(0,2)==="CC"&&(yn=!0):he.length===0&&(yn=Jt.index===Ie[0].index),yn}(mt),Vt.isTTML=function(Jt){return Jt.codec&&Jt.codec.search(j.default.STPP)>=0||Jt.mimeType&&Jt.mimeType.search(j.default.TTML)>=0}(mt),Vt.kind=function(Jt,yn){let Cn=Jt.roles&&Jt.roles.length>0?yn[Jt.roles[0].value]:yn.caption;return Cn=Object.values(yn).includes(Cn)?Cn:yn.caption,Cn}(mt,Tt),z.addTextTrackInfo(Vt)}function Ue(mt){const Tt=mt.chunk;Tt.representation.mediaInfo.embeddedCaptions&&Ee(Tt.bytes,Tt)}function je(mt){le=mt}function Ee(mt,Tt){const Vt=Tt.representation.mediaInfo,Jt=Vt.type,yn=Vt.mimeType,Cn=Vt.codec||yn;Cn?Vt.codec.indexOf("application/mp4")!==-1?function(Kn,Zn,gi){let _n,ri;if(Zn.segmentType==="InitializationSegment")Le=!0,Ye=Se.getMediaTimescaleFromMoov(Kn);else{if(!Le)return;ri=Se.getSamplesInfo(Kn),_n=ri.sampleList,_n.length>0&&(ie=_n[0].cts-Zn.start*Ye),gi.search(j.default.STPP)>=0?function(pi,Gi,Ki){let bi,Nt;for(ke=ke!==null?ke:we(Ki),bi=0;bi<Gi.length;bi++){const rn=Gi[bi],en=rn.cts,gn=de(),qn=gn+en/Ye,Kt=qn+rn.duration/Ye;re.buffered.add(qn,Kt);const kn=new DataView(pi,rn.offset,rn.subSizes[0]);let Bn=vs.Utils.dataViewToString(kn,j.default.UTF8);const Xn=[];let zn=rn.offset+rn.subSizes[0];for(Nt=1;Nt<rn.subSizes.length;Nt++){const Ut=new Uint8Array(pi,zn,rn.subSizes[Nt]),hn=String.fromCharCode.apply(null,Ut);Xn.push(hn),zn+=rn.subSizes[Nt]}try{const Ut=R.getValue().ttmlTimeIsRelative?en/Ye:0,hn=ke.parse(Bn,Ut,en/Ye,(en+rn.duration)/Ye,Xn);z.addCaptions(le,gn,hn)}catch(Ut){Ce.removeExecutedRequestsBeforeTime(),qe(),ve.error("TTML parser error: "+Ut)}}}(Kn,_n,gi):function(pi,Gi){let Ki,bi,Nt;const rn=[];for(Ki=0;Ki<Gi.length;Ki++){const en=Gi[Ki];en.cts-=ie;const gn=de()+en.cts/Ye,qn=gn+en.duration/Ye;re.buffered.add(gn,qn);const Kt=pi.slice(en.offset,en.offset+en.size),kn=vs.parseBuffer(Kt);for(bi=0;bi<kn.boxes.length;bi++){const Bn=kn.boxes[bi];if(ve.debug("VTT box1: "+Bn.type),Bn.type!=="vtte"&&Bn.type==="vttc"){ve.debug("VTT vttc boxes.length = "+Bn.boxes.length);let Xn={styles:{}};for(Nt=0;Nt<Bn.boxes.length;Nt++){const zn=Bn.boxes[Nt];if(ve.debug("VTT box2: "+zn.type),zn.type==="payl")Xn.start=en.cts/Ye,Xn.end=(en.cts+en.duration)/Ye,Xn.data=zn.cue_text;else if(zn.type==="sttg"&&zn.settings&&zn.settings!=="")try{const Ut=zn.settings.split(" ");Xn.styles=Q.getCaptionStyles(Ut)}catch{}}Xn&&Xn.data&&(rn.push(Xn),ve.debug(`VTT  ${Xn.start} - ${Xn.end} :  ${Xn.data}`))}}}rn.length>0&&z.addCaptions(le,0,rn)}(Kn,_n)}}(mt,Tt,Cn):Jt===j.default.VIDEO?function(Kn,Zn){let gi,_n;if(Zn.segmentType===Xe.HTTPRequest.INIT_SEGMENT_TYPE)Pe===0&&(Pe=Se.getMediaTimescaleFromMoov(Kn));else if(Zn.segmentType===Xe.HTTPRequest.MEDIA_SEGMENT_TYPE){if(Pe===0)return void ve.warn("CEA-608: No timescale for embeddedTextTrack yet");_n=Se.getSamplesInfo(Kn);const ri=_n.lastSequenceNumber,pi=Math.trunc(Zn.start),Gi=Math.trunc(Zn.end);if(Ve[0]||Ve[1]||function(){let Ki;for(let bi=0;bi<he.length;bi++){if(Ki=z.getTrackIdxForId(he[bi].id),Ki===-1)return void ve.warn("CEA-608: data before track is ready.");const Nt=ye(Ki);Ve[bi]=new Be(bi+1,{newCue:Nt},null)}}(),Pe){if(function(bi,Nt,rn,en,gn){return bi!==null&&Nt!==null&&en!==null&&gn!==null&&(Nt===bi?en!==gn:Nt!==bi+rn)}(Ge,ri,_n.numSequences,ze,pi))for(gi=0;gi<Ve.length;gi++)Ve[gi]&&Ve[gi].reset();const Ki=function(bi,Nt){if(Nt.length===0)return null;const rn={splits:[],fields:[[],[]]},en=new DataView(bi);for(let gn=0;gn<Nt.length;gn++){const qn=Nt[gn],Kt=sf(en,qn.offset,qn.size);let kn=null,Bn=0;for(let Xn=0;Xn<2;Xn++)if(Kt[Xn].length>0){qn.cts!==kn?Bn=0:Bn+=1;const zn=de();rn.fields[Xn].push([qn.cts+zn*Pe,Kt[Xn],Bn]),kn=qn.cts}}return rn.fields.forEach(function(gn){gn.sort(function(qn,Kt){return qn[0]===Kt[0]?qn[2]-Kt[2]:qn[0]-Kt[0]})}),rn}(Kn,_n.sampleList);for(let bi=0;bi<Ve.length;bi++){const Nt=Ki.fields[bi],rn=Ve[bi];if(rn)for(gi=0;gi<Nt.length;gi++)rn.addData(Nt[gi][0]/Pe,Nt[gi][1])}Ge=ri,ze=Gi}}}(mt,Tt):function(Kn,Zn,gi){let _n,ri;const pi=new DataView(Kn,0,Kn.byteLength);ri=vs.Utils.dataViewToString(pi,j.default.UTF8);try{_n=we(gi).parse(ri,0),z.addCaptions(z.getCurrentTrackIdx(),0,_n),re.buffered&&re.buffered.add(Zn.start,Zn.end)}catch(Gi){C.error(new Ze.default(ce.TIMED_TEXT_ERROR_ID_PARSE_CODE,ce.TIMED_TEXT_ERROR_MESSAGE_PARSE+Gi.message,ri))}}(mt,Tt,Cn):ve.error("No text type defined")}function ye(mt){return function(Tt,Vt,Jt){let yn;yn=F.getTTMLRenderingDiv()?nt.createHTMLCaptionsFromScreen(F.getElement(),Tt,Vt,Jt):[{start:Tt,end:Vt,data:Jt.getDisplayText(),styles:{}}],yn&&z.addCaptions(mt,0,yn)}}function de(){return isNaN(re.timestampOffset)?0:re.timestampOffset}function we(mt){let Tt;return mt.search(j.default.VTT)>=0?Tt=X.get().streaming.text.webvtt.customRenderingEnabled&&ne?ne:Q:(mt.search(j.default.TTML)>=0||mt.search(j.default.STPP)>=0)&&(Tt=B),Tt}function qe(mt,Tt){mt===void 0&&mt===Tt&&(mt=re.buffered.start(0),Tt=re.buffered.end(re.buffered.length-1)),re.buffered.remove(mt,Tt),z.deleteCuesFromTrackIdx(le,mt,Tt)}function tt(mt){he.forEach(function(Tt){const Vt=z.getTrackIdxForId(Tt.id);Vt>=0&&z.deleteCuesFromTrackIdx(Vt,mt.from,mt.to)})}return re={initialize:function(){rt||(he=[],le=null,Pe=0,Ve=[],Ge=null,ze=null,rt=!0,nt=b0(q).getInstance(),$.on(x.default.VIDEO_CHUNK_RECEIVED,Ue,re),$.on(x.default.BUFFER_CLEARED,tt,re))},addMediaInfos:function(mt,Tt,Vt){if(Ie=Ie.concat(Tt),mt===j.default.TEXT&&Tt[0].isFragmented&&!Tt[0].isEmbedded){Ce=Vt,re.buffered=(0,pp.default)(q).create(),Te=P.getTracksFor(j.default.TEXT,oe.id).filter(yn=>yn.isFragmented);const Jt=P.getCurrentTrackFor(j.default.TEXT,oe.id);for(let yn=0;yn<Te.length;yn++)if(Te[yn]===Jt){je(yn);break}}for(let Jt=0;Jt<Tt.length;Jt++)me(Tt[Jt])},resetMediaInfos:function(){Ie=[]},getStreamId:function(){return oe.id},append:Ee,abort:function(){},addEmbeddedTrack:function(mt){if(rt&&mt)if(mt.id===j.default.CC1||mt.id===j.default.CC3){for(let Tt=0;Tt<he.length;Tt++)if(he[Tt].id===mt.id)return;he.push(mt)}else ve.warn("Embedded track "+mt.id+" not supported!")},resetEmbedded:function(){$.off(x.default.VIDEO_CHUNK_RECEIVED,Ue,re),$.off(x.default.BUFFER_CLEARED,tt,re),z&&z.deleteAllTextTracks(),rt=!1,he=[],Ve=[null,null],Ge=null,ze=null},getConfig:function(){return{fragmentModel:Ce,fragmentedTracks:Te,videoModel:F}},setCurrentFragmentedTrackIdx:je,remove:qe,reset:function(){fe(),Ie=[],Se=null}},ve=(0,$e.default)(q).getInstance().getLogger(re),Se=Qc(q).getInstance(),fe(),re}rm.__dashjs_factory_name="TextSourceBuffer";var _0=ue.default.getClassFactory(rm),dd=n(7640);const fd=["text","align","fontSize","id","isd","line","lineAlign","lineHeight","linePadding","position","positionAlign","region","size","snapToLines","vertical"];function af(D){const C=this.context,R=(0,K.default)(C).getInstance(),P=D.videoModel,F=D.streamInfo,z=D.settings;let Q,ne,B,oe,X,q,$,re,ve,Se,ke,Ie,Ce,Le,Ye,Te,ie,le,he,Pe;function Ge(Nt){const rn=Nt.kind,en=Nt.id!==void 0?Nt.id:Nt.lang,gn=Nt.lang,qn=Nt.isTTML,Kt=Nt.isEmbedded;return P.addTextTrack(rn,en,gn,qn,Kt)}function ze(Nt,rn,en,gn,qn,Kt){let kn=0,Bn=0;Nt/rn>en/gn?(Bn=rn,kn=Bn/gn*en):(kn=Nt,Bn=kn/en*gn);let Xn=0,zn=0,Ut=0,hn=0;return kn/Bn>qn?(hn=Bn,Ut=Bn*qn):(Ut=kn,hn=kn/qn),Xn=(Nt-Ut)/2,zn=(rn-hn)/2,Kt?{x:Xn+.1*Ut,y:zn+.1*hn,w:.8*Ut,h:.8*hn}:{x:Xn,y:zn,w:Ut,h:hn}}function Ve(Nt,rn){const en=P.getClientWidth(),gn=P.getClientHeight(),qn=P.getVideoWidth(),Kt=P.getVideoHeight(),kn=P.getVideoRelativeOffsetTop(),Bn=P.getVideoRelativeOffsetLeft();if(qn!==0&&Kt!==0){let Xn=qn/Kt,zn=!1;Nt.isFromCEA608&&(Xn=3.5/3,zn=!0);const Ut=ze.call(this,en,gn,qn,Kt,Xn,zn),hn=Ut.w,$n=Ut.h,Yn=Ut.x,tn=Ut.y;if(hn!=ve||$n!=Se||Yn!=$||tn!=re||rn){if($=Yn+Bn,re=tn+kn,ve=hn,Se=$n,ke){const Ot=ke.style;Ot&&(Ot.left=$+"px",Ot.top=re+"px",Ot.width=ve+"px",Ot.height=Se+"px",Ot.zIndex=Le&&document[Le]||Ye?ie:null,R.trigger(xe.default.CAPTION_CONTAINER_RESIZE))}const Je=Nt.activeCues;if(Je){const Ot=Je.length;for(let an=0;an<Ot;++an){const Ft=Je[an];Ft.scaleCue(Ft)}}}}}function nt(Nt){const rn=ve,en=Se;let gn,qn,Kt,kn,Bn;if(Nt.cellResolution){const Xn=[rn/Nt.cellResolution[0],en/Nt.cellResolution[1]];if(Nt.linePadding){for(gn in Nt.linePadding)if(Nt.linePadding.hasOwnProperty(gn)){qn=(Nt.linePadding[gn]*Xn[0]).toString();const zn=document.getElementsByClassName("spanPadding");for(let Ut=0;Ut<zn.length;Ut++)zn[Ut].style.cssText=zn[Ut].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+qn),zn[Ut].style.cssText=zn[Ut].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+qn)}}if(Nt.fontSize){for(gn in Nt.fontSize)if(Nt.fontSize.hasOwnProperty(gn)){Nt.fontSize[gn][0]==="%"?Kt=Nt.fontSize[gn][1]/100:Nt.fontSize[gn][0]==="c"&&(Kt=Nt.fontSize[gn][1]),qn=(Kt*Xn[1]).toString(),Bn=gn!=="defaultFontSize"?document.getElementsByClassName(gn):document.getElementsByClassName("paragraph");for(let zn=0;zn<Bn.length;zn++)Bn[zn].style.cssText=Bn[zn].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+qn)}if(Nt.lineHeight){for(gn in Nt.lineHeight)if(Nt.lineHeight.hasOwnProperty(gn)){Nt.lineHeight[gn][0]==="%"?kn=Nt.lineHeight[gn][1]/100:Nt.fontSize[gn][0]==="c"&&(kn=Nt.lineHeight[gn][1]),qn=(kn*Xn[1]).toString(),Bn=document.getElementsByClassName(gn);for(let zn=0;zn<Bn.length;zn++)Bn[zn].style.cssText=Bn[zn].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+qn)}}}}if(Nt.isd){let Xn=document.getElementById(Nt.cueID);Xn&&ke.removeChild(Xn),fe(Nt)}}function rt(Nt,rn){const en=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,gn=/^#(.*)$/;if(en.test(rn)){const qn=en.exec(rn),Kt=parseInt(qn[4],10)-1;return"data:image/png;base64,"+btoa(Nt.images[Kt])}if(gn.test(rn)){const qn=gn.exec(rn)[1];return"data:image/png;base64,"+Nt.embeddedImages[qn]}return rn}function fe(Nt){if(ke){bi.call(this);const rn=document.createElement("div");ke.appendChild(rn),Te=(0,dd.renderHTML)(Nt.isd,rn,function(en){return rt(Nt,en)},ke.clientHeight,ke.clientWidth,z.get().streaming.text.imsc.displayForcedOnlyMode,function(en){ne.info("renderCaption :",en)},Te,z.get().streaming.text.imsc.enableRollUp),rn.id=Nt.cueID,R.trigger(xe.default.CAPTION_RENDERED,{captionDiv:rn,currentTrackIdx:q})}}function me(Nt,rn){return!!rn&&rn.endTime>=Nt.startTime}function Ue(Nt,rn){return!!z.get().streaming.text.extendSegmentedCues&&!!function(en,gn,qn){for(let Kt=0;Kt<qn.length;Kt++){const kn=qn[Kt];if(JSON.stringify(en[kn])!==JSON.stringify(gn[kn]))return!1}return!0}(rn,Nt,fd)&&(rn.endTime=Math.max(rn.endTime,Nt.endTime),!0)}function je(Nt,rn){rn&&rn.forEach(en=>{en.kind&&en.kind==="image"&&(en.src=rt(Nt,en.src)),je(Nt,en.contents)})}function Ee(Nt,rn,en){const gn=yn(Nt),qn=z.get().streaming.text.dispatchForManualRendering;if(gn&&Array.isArray(en)&&en.length!==0)for(let Kt=0;Kt<en.length;Kt++){let kn=null;const Bn=en[Kt];gn.cellResolution=Bn.cellResolution,gn.isFromCEA608=Bn.isFromCEA608,isNaN(Bn.start)||isNaN(Bn.end)||(qn?kn=ye(Bn,rn):mt(Bn)&&ke?kn=qe(Bn,rn,gn):Bn.data&&(kn=tt(Bn,rn,gn)));try{if(kn){if(!Zn(gn,kn))if(z.get().streaming.text.webvtt.customRenderingEnabled)gn.manualCueList||(gn.manualCueList=[]),gn.manualCueList.push(kn);else{let zn;gn.cues&&gn.cues.length!==0&&(zn=gn.cues[gn.cues.length-1]),me(kn,zn)?Ue(kn,zn)||(zn.isd&&(zn.onexit=function(){}),gn.mode!==j.default.TEXT_DISABLED&&gn.addCue(kn)):gn.mode!==j.default.TEXT_DISABLED&&gn.addCue(kn)}const Xn=z.get().streaming.buffer.bufferToKeep;_n(gn,0,P.getTime()-Xn)}else ne.error("Impossible to display subtitles. You might have missed setting a TTML rendering div via player.attachTTMLRenderingDiv(TTMLRenderingDiv)")}catch(Xn){throw ri(gn),gn.addCue(kn),Xn}}}function ye(Nt,rn){let en=Tt(Nt,rn);return en.onenter=function(){mt(Nt)&&Pe&&Pe.cueID!==en.cueID&&we(Pe),delete en.type,Pe=en,de(en)},en.onexit=function(){we(en),Pe=null},en}function de(Nt){R.trigger(xe.default.CUE_ENTER,Nt)}function we(Nt){R.trigger(xe.default.CUE_EXIT,{cueID:Nt.cueID})}function qe(Nt,rn,en){const gn=this;let qn=Tt(Nt,rn);return ke.style.left=$+"px",ke.style.top=re+"px",ke.style.width=ve+"px",ke.style.height=Se+"px",qn.onenter=function(){en.mode===j.default.TEXT_SHOWING&&(this.isd?(he?requestAnimationFrame(()=>fe(this)):fe(this),ne.debug("Cue enter id:"+this.cueID)):(ke.appendChild(this.cueHTMLElement),nt.call(gn,this),R.trigger(xe.default.CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:q})))},qn.onexit=function(){if(ke){const Kt=ke.childNodes;for(let kn=0;kn<Kt.length;++kn)Kt[kn].id===this.cueID&&(ne.debug("Cue exit id:"+Kt[kn].id),ke.removeChild(Kt[kn]),--kn)}},qn}function tt(Nt,rn,en){let gn=Tt(Nt,rn);if(gn.isActive=!1,Nt.styles)try{Nt.styles.align!==void 0&&"align"in gn&&(gn.align=Nt.styles.align),Nt.styles.line!==void 0&&"line"in gn&&(gn.line=Nt.styles.line),Nt.styles.snapToLines!==void 0&&"snapToLines"in gn&&(gn.snapToLines=Nt.styles.snapToLines),Nt.styles.position!==void 0&&"position"in gn&&(gn.position=Nt.styles.position),Nt.styles.size!==void 0&&"size"in gn&&(gn.size=Nt.styles.size)}catch(qn){ne.error(qn)}return gn.onenter=function(){en.mode===j.default.TEXT_SHOWING&&R.trigger(xe.default.CAPTION_RENDERED,{currentTrackIdx:q})},gn}function mt(Nt){return Nt.type==="html"}function Tt(Nt,rn){return mt(Nt)?function(en,gn){let qn=new B(en.start+gn,en.end+gn,"");return qn.cueHTMLElement=en.cueHTMLElement,qn.isd=en.isd,qn.images=en.images,qn.embeddedImages=en.embeddedImages,qn.cueID=en.cueID,qn.scaleCue=nt.bind(self),qn.cellResolution=en.cellResolution,qn.lineHeight=en.lineHeight,qn.linePadding=en.linePadding,qn.fontSize=en.fontSize,qn.isd&&je(qn,qn.isd.contents),qn}(Nt,rn):function(en,gn){let qn=new B(en.start-gn,en.end-gn,en.data);return qn.cueID=`${qn.startTime}_${qn.endTime}`,qn}(Nt,rn)}function Vt(Nt){if(Ie){const rn=Ie.childNodes;for(let en=0;en<rn.length;++en)rn[en].id===Nt.cueID&&(Ie.removeChild(rn[en]),--en)}}function Jt(){const Nt=P.getTextTracks(),rn=[];for(const en of Nt)en.manualMode===j.default.TEXT_SHOWING&&rn.push(en);return rn}function yn(Nt){return Nt>=0&&oe[Nt]?P.getTextTrack(oe[Nt].kind,oe[Nt].id,oe[Nt].lang,oe[Nt].isTTML,oe[Nt].isEmbedded):null}function Cn(Nt){if(Nt===q)return;q=Nt;const rn=yn(q);Kn.call(this,rn),Ce&&(clearInterval(Ce),Ce=null),rn&&rn.renderingType==="html"&&(Ve.call(this,rn,!0),window.ResizeObserver?(le=new window.ResizeObserver(()=>{Ve.call(this,rn,!0)}),le.observe(P.getElement())):Ce=setInterval(Ve.bind(this,rn),500))}function Kn(Nt){bi.call(this),Nt&&Nt.renderingType==="html"?Gi.call(this):Ki.call(this)}function Zn(Nt,rn){if(!Nt.cues)return!1;for(let en=0;en<Nt.cues.length;en++)if(Nt.cues[en].startTime===rn.startTime&&Nt.cues[en].endTime===rn.endTime)return!0;return!1}function gi(Nt,rn,en){let gn=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];return!!Nt&&(isNaN(rn)||(gn?Nt.startTime:Nt.endTime)>=rn)&&(isNaN(en)||(gn?Nt.endTime:Nt.startTime)<=en)}function _n(Nt,rn,en){if(!(en<rn)&&Nt&&(Nt.cues||Nt.manualCueList)){const gn=Nt.cues&&Nt.cues.length>0?"native":"custom",qn=gn==="native"?Nt.cues:Nt.manualCueList;if(!qn||qn.length===0)return;for(let Kt=qn.length-1;Kt>=0;Kt--)gi(qn[Kt],rn,en,!0)&&!pi(qn[Kt])&&(gn==="native"?Nt.removeCue(qn[Kt]):(Vt(qn[Kt]),delete Nt.manualCueList[Kt]))}}function ri(Nt,rn,en){let gn=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];if(Nt&&(Nt.cues||Nt.manualCueList)){const qn=Nt.cues&&Nt.cues.length>0?"native":"custom",Kt=qn==="native"?Nt.cues:Nt.manualCueList;if(!Kt||Kt.length===0)return;for(let kn=Kt.length-1;kn>=0;kn--)gi(Kt[kn],rn,en,gn)&&(qn==="native"?(Kt[kn].onexit&&Kt[kn].onexit(),Nt.removeCue(Kt[kn])):(Vt(Kt[kn]),delete Nt.manualCueList[kn]))}}function pi(Nt){const rn=P.getTime();return rn>=Nt.startTime&&rn<=Nt.endTime}function Gi(){let Nt=document.getElementById("native-cue-style");if(Nt)return;Nt=document.createElement("style"),Nt.id="native-cue-style",document.head.appendChild(Nt);const rn=Nt.sheet,en=P.getElement();try{en&&(en.id?rn.insertRule("#"+en.id+"::cue {background: transparent}",0):en.classList.length!==0?rn.insertRule("."+en.className+"::cue {background: transparent}",0):rn.insertRule("video::cue {background: transparent}",0))}catch(gn){ne.info(""+gn.message)}}function Ki(){const Nt=document.getElementById("native-cue-style");Nt&&document.head.removeChild(Nt)}function bi(){if(ke)for(;ke.firstChild;)ke.removeChild(ke.firstChild)}return Q={addCaptions:Ee,addTextTrackInfo:function(Nt){oe.push(Nt)},createTracks:function(){oe.sort(function(rn,en){return rn.index-en.index}),ke=P.getTTMLRenderingDiv(),Ie=P.getVttRenderingDiv();let Nt=-1;for(let rn=0;rn<oe.length;rn++){const en=Ge(oe[rn]);X.push(en),oe[rn].defaultTrack&&(en.default=!0,Nt=rn);const gn=yn(rn);gn&&(gn.mode=j.default.TEXT_SHOWING,ke&&(oe[rn].isTTML||oe[rn].isEmbedded)?gn.renderingType="html":gn.renderingType="default"),Ee(rn,0,oe[rn].captionData),R.trigger(xe.default.TEXT_TRACK_ADDED)}if(Cn.call(this,Nt),Nt>=0){let rn=function(){const en=yn(Nt);en&&en.renderingType==="html"&&Ve.call(this,en,!0),R.off(xe.default.PLAYBACK_METADATA_LOADED,rn,this)};R.on(xe.default.PLAYBACK_METADATA_LOADED,rn,this);for(let en=0;en<oe.length;en++){const gn=yn(en);if(gn){const qn=z.get().streaming.text.dispatchForManualRendering;gn.mode=en!==Nt||qn?j.default.TEXT_HIDDEN:j.default.TEXT_SHOWING,gn.manualMode=en===Nt?j.default.TEXT_SHOWING:j.default.TEXT_HIDDEN}}}R.trigger(x.default.TEXT_TRACKS_QUEUE_INITIALIZED,{index:q,tracks:oe,streamId:F.id})},deleteAllTextTracks:function(){const Nt=X?X.length:0;for(let rn=0;rn<Nt;rn++){const en=yn(rn);en&&ri.call(this,en,F.start,F.start+F.duration,!1)}X=[],oe=[],Ce&&(clearInterval(Ce),Ce=null),le&&P&&(le.unobserve(P.getElement()),le=null),q=-1,bi.call(this)},deleteCuesFromTrackIdx:function(Nt,rn,en){const gn=yn(Nt);gn&&ri(gn,rn,en)},disableManualTracks:function(){const Nt=Jt();if(Nt&&Nt.length>0){const rn=Nt[0].manualCueList;rn&&rn.length>0&&rn.forEach(en=>{if(en.isActive){if(en.isActive=!1,z.get().streaming.text.dispatchForManualRendering)we(en);else if(Ie){const gn=Ie.childNodes;for(let qn=0;qn<gn.length;++qn)gn[qn].id===en.cueID&&(Ie.removeChild(gn[qn]),--qn)}}})}},getCurrentTrackIdx:function(){return q},getCurrentTextTrackInfo:function(){return oe[q]},getStreamId:function(){return F.id},getTextTrackInfos:function(){return oe},getTrackIdxForId:function(Nt){let rn=-1;for(let en=0;en<oe.length;en++)if(oe[en].id===Nt){rn=en;break}return rn},initialize:function(){typeof window<"u"&&typeof navigator<"u"&&(B=window.VTTCue||window.TextTrackCue,oe=[],X=[],q=-1,$=0,re=0,ve=0,Se=0,ke=null,Ie=null,Ce=null,Ye=!1,ie=2147483647,Te=null,he="requestAnimationFrame"in window,document.fullscreenElement!==void 0?Le="fullscreenElement":document.webkitIsFullScreen!==void 0?Le="webkitIsFullScreen":document.msFullscreenElement?Le="msFullscreenElement":document.mozFullScreen&&(Le="mozFullScreen"))},manualCueProcessing:function(Nt){const rn=Jt();if(rn&&rn.length>0){const en=rn[0].manualCueList;en&&en.length>0&&en.forEach(gn=>{gn.startTime<=Nt&&gn.endTime>=Nt&&!gn.isActive?(gn.isActive=!0,z.get().streaming.text.dispatchForManualRendering?de(gn):WebVTT.processCues(window,[gn],Ie,gn.cueID)):gn.isActive&&(gn.startTime>Nt||gn.endTime<Nt)&&(gn.isActive=!1,z.get().streaming.text.dispatchForManualRendering?we(gn):Vt(gn))})}},setCurrentTrackIdx:Cn,setModeForTrackIdx:function(Nt,rn){const en=yn(Nt);en&&en.mode!==rn&&(en.mode=rn),en&&en.manualMode!==rn&&(en.manualMode=rn)}},ne=(0,$e.default)(C).getInstance().getLogger(Q),Q}af.__dashjs_factory_name="TextTracks";var Eb=ue.default.getClassFactory(af);function Hr(){const D=this.context;let C,R,P,F,z,Q;function ne(q){const $=q.split(":"),re=$.length-1;return q=60*parseInt($[re-1],10)+parseFloat($[re]),re===2&&(q+=3600*parseInt($[0],10)),q}function B(q){const $=q.split(F),re=$[1].split(Q);return re.shift(),$[1]=re[0],re.shift(),{cuePoints:$,styles:oe(re)}}function oe(q){const $={};return q.forEach(function(re){if(re.split(/:/).length>1){let ve=re.split(/:/)[1],Se=!1;ve&&ve.search(/%/)!=-1&&(Se=!0,ve=parseInt(ve.replace(/%/,""),10)),(re.match(/align/)||re.match(/A/))&&($.align=ve),(re.match(/line/)||re.match(/L/))&&($.line=ve==="auto"?ve:parseInt(ve,10),Se&&($.snapToLines=!1)),(re.match(/position/)||re.match(/P/))&&($.position=ve),(re.match(/size/)||re.match(/S/))&&($.size=ve)}}),$}function X(q,$){let re,ve=$,Se="",ke="";for(;q[ve]!==""&&ve<q.length;)ve++;if(re=ve-$,re>1)for(let Ie=0;Ie<re;Ie++){if(ke=q[$+Ie],ke.match(F)){Se="";break}Se+=ke,Ie!==re-1&&(Se+=`
`)}else ke=q[$],ke.match(F)||(Se=ke);return Se}return C={parse:function(q){const $=[];let re,ve;if(!q)return $;re=(q=q.split(P)).length,ve=-1;for(let Se=0;Se<re;Se++){let ke=q[Se];if(ke.length>0&&ke!=="WEBVTT"&&ke.match(F)){const Ie=B(ke),Ce=Ie.cuePoints,Le=Ie.styles,Ye=X(q,Se+1),Te=ne(Ce[0].replace(z,"")),ie=ne(Ce[1].replace(z,""));!isNaN(Te)&&!isNaN(ie)&&Te>=ve&&ie>Te?Ye!==""?(ve=Te,$.push({start:Te,end:ie,data:Ye,styles:Le})):R.error("Skipping cue due to empty/malformed cue text"):R.error("Skipping cue due to incorrect cue timing")}}return $},getCaptionStyles:oe},R=(0,$e.default)(D).getInstance().getLogger(C),P=/(?:\r\n|\r|\n)/gm,F=/-->/,z=/(^[\s]+|[\s]+$)/g,Q=/\s\b/g,C}Hr.__dashjs_factory_name="VTTParser";var S0=ue.default.getSingletonFactory(Hr);function sm(){let D,C;return D={parse:function(R){let P=[];return C.oncue=function(F){F.start=F.startTime,F.end=F.endTime,F.data=F.text,F.styles={align:F.align,line:F.line,position:F.position,size:F.size},P.push(F)},C.parse(R),P}},function(){try{window&&window.WebVTT&&window.WebVTT.Parser&&(C=new window.WebVTT.Parser(window,window.vttjs,window.WebVTT.StringDecoder()))}catch{}}(),D}sm.__dashjs_factory_name="VttCustomRenderingParser";var tr=ue.default.getSingletonFactory(sm);function am(){const D=this.context,C=(0,K.default)(D).getInstance();let R,P,F=0;function z(){const Q="cue_TTML_"+F;return F++,Q}return R={parse:function(Q,ne,B,oe,X){let q="";const $=[];let re,ve,Se;const ke={},Ie={};let Ce="",Le="",Ye={onOpenTag:function(le,he,Pe){if(Pe[" imagetype"]&&!Pe[" imageType"]&&(C.trigger(xe.default.CONFORMANCE_VIOLATION,{level:Xa.LEVELS.ERROR,event:Xa.EVENTS.NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE}),Pe[" imageType"]=Pe[" imagetype"]),he==="image"&&(le==="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"||le==="http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt")){if(!Pe[" imageType"]||Pe[" imageType"].value!=="PNG")return void P.warn("smpte-tt imageType != PNG. Discarded");Ce=Pe["http://www.w3.org/XML/1998/namespace id"].value}},onCloseTag:function(){Ce&&(Ie[Ce]=Le.trim()),Le="",Ce=""},onText:function(le){Ce&&(Le+=le)}};if(!Q)throw q="no ttml data to parse",new Error(q);ke.data=Q,C.trigger(x.default.TTML_TO_PARSE,ke);let Te=(0,dd.fromXML)(ke.data,function(le){q=le},Ye);C.trigger(x.default.TTML_PARSED,{ttmlString:ke.data,ttmlDoc:Te});const ie=Te.getMediaTimeEvents();for(Se=0;Se<ie.length;Se++){let le=(0,dd.generateISD)(Te,ie[Se],function(he){q=he});le.contents.some(he=>he.contents.length)&&(re=ie[Se]+ne,ve=ie[Se+1]+ne,re<ve&&$.push({start:re,end:ve,type:"html",cueID:z(),isd:le,images:X,embeddedImages:Ie}))}if(q!=="")throw P.error(q),new Error(q);return $}},P=(0,$e.default)(D).getInstance().getLogger(R),R}am.__dashjs_factory_name="TTMLParser";var Ec=ue.default.getSingletonFactory(am);function om(D){let C=this.context;const R=(0,K.default)(C).getInstance(),P=Ne(C).getInstance(),F=D.adapter,z=D.baseURLController,Q="error",ne="loaded",B="unloaded";let oe,X,q;function $(Se,ke){let Ie,Ce,Le=!1;if(z.resolve()){const ie=F.getVoRepresentations(Se);ie&&ie.length>0&&(Ie=z.resolve(ie[0].path).url)}const Ye=Se.essentialProperties.filter(ie=>ie.schemeIdUri&&ie.schemeIdUri===j.default.FONT_DOWNLOAD_DVB_SCHEME),Te=Se.supplementalProperties.filter(ie=>ie.schemeIdUri&&ie.schemeIdUri===j.default.FONT_DOWNLOAD_DVB_SCHEME);Ye.length>0?(Le=!0,Ce=Ye):Ce=Te,Ce.forEach(ie=>{if(function(Pe){return!(!(Pe.value&&parseInt(Pe.value)===1&&Pe.dvbUrl&&Pe.dvbUrl.length>0&&Pe.dvbFontFamily&&Pe.dvbFontFamily.length>0&&Pe.dvbMimeType)||Pe.dvbMimeType!==j.default.OFF_MIMETYPE&&Pe.dvbMimeType!==j.default.WOFF_MIMETYPE)}(ie)){let Pe=(le=ie.dvbUrl,he=Ie,P.isPathAbsolute(le)?le:P.isRelative(le)?he?P.resolve(le,he):P.resolve(le):le);q.push({fontFamily:ie.dvbFontFamily,url:Pe,mimeType:ie.dvbMimeType,trackId:Se.id,streamId:ke,isEssential:Le,status:B,fontFace:new FontFace(ie.dvbFontFamily,`url(${Pe})`,{display:"swap"})})}var le,he})}function re(Se,ke){const Ie=q[Se];q[Se]={...Ie,status:ke}}function ve(){q=[]}return oe={addFontsFromTracks:function(Se,ke){if(Se&&Array.isArray(Se)&&ke)for(let Ie=0;Ie<Se.length;Ie++)$(Se[Ie],ke)},downloadFonts:function(){for(let Se=0;Se<q.length;Se++){let ke=q[Se];document.fonts.add(ke.fontFace),R.trigger(xe.default.DVB_FONT_DOWNLOAD_ADDED,ke),ke.fontFace.load().then(()=>{re(Se,ne),R.trigger(xe.default.DVB_FONT_DOWNLOAD_COMPLETE,ke)},Ie=>{re(Se,Q),X.debug("Font download error: ",Ie),R.trigger(xe.default.DVB_FONT_DOWNLOAD_FAILED,ke)})}},getFonts:function(){return q},getFontsForTrackId:function(Se){return q.filter(ke=>ke.trackId&&ke.trackId===Se)},reset:function(){(function(){for(const Se of q){let ke=document.fonts.delete(Se.fontFace);X.debug(`Removal of fontFamily: ${Se.fontFamily} was ${ke?"successful":"unsuccessful"}`)}})(),ve()}},X=(0,$e.default)(C).getInstance().getLogger(oe),ve(),oe}om.__dashjs_factory_name="DVBFonts";var bb=ue.default.getClassFactory(om);function x0(D){let C=this.context;const R=D.adapter,P=D.errHandler,F=D.manifestModel,z=D.mediaController,Q=D.baseURLController,ne=D.videoModel,B=D.settings;let oe,X,q,$,re,ve,Se,ke,Ie,Ce,Le,Ye,Te,ie;function le(Ee){if(ie.error(`Could not download ${Ee.isEssential?"an essential":"a"} font - fontFamily: ${Ee.fontFamily}, url: ${Ee.url}`),Ee.isEssential){let ye=$[Ee.streamId].getTrackIdxForId(Ee.trackId);$[Ee.streamId].setModeForTrackIdx(ye,j.default.TEXT_DISABLED)}}function he(Ee){if(ie.debug(`Successfully downloaded ${Ee.isEssential?"an essential":"a"} font - fontFamily: ${Ee.fontFamily}, url: ${Ee.url}`),Ee.isEssential){let ye=$[Ee.streamId].getTrackIdxForId(Ee.trackId);ye===$[Ee.streamId].getCurrentTrackIdx()?$[Ee.streamId].setModeForTrackIdx(ye,j.default.TEXT_SHOWING):$[Ee.streamId].setModeForTrackIdx(ye,j.default.TEXT_HIDDEN)}}function Pe(Ee){let ye=Ee.tracks,de=Ee.index;const we=Ee.streamId;if(B.get().streaming.text.defaultEnabled===!1&&!nt()||Ye)rt(we,-1);else{const qe=z.getCurrentTrackFor(j.default.TEXT,we);if(qe){const tt={lang:qe.lang,role:qe.roles[0],index:qe.index,codec:qe.codec,accessibility:qe.accessibility[0]};ye.some((mt,Tt)=>{if(z.matchSettings(tt,mt))return rt(we,Tt),de=Tt,!0})}Ie=!1}X[we].lastEnabledIndex=de,ke.trigger(xe.default.TEXT_TRACKS_ADDED,{enabled:nt(),index:de,tracks:ye,streamId:we}),Le=!0,Te.addFontsFromTracks(ye,we),Te.getFonts().forEach(qe=>{if(qe.isEssential){let tt=$[qe.streamId].getTrackIdxForId(qe.trackId);$[qe.streamId].setModeForTrackIdx(tt,j.default.TEXT_DISABLED)}}),Te.downloadFonts()}function Ge(Ee){try{const ye=Ee.streamId;if(!$[ye]||isNaN(Ee.time))return;$[ye].manualCueProcessing(Ee.time)}catch{}}function ze(Ee){try{const ye=Ee.streamId;if(!$[ye])return;$[ye].disableManualTracks()}catch{}}function Ve(Ee){try{if(!Ee||!Ee.mediaType||Ee.mediaType!==j.default.AUDIO||!Ee.currentMediaInfo)return;const ye=$[Ee.streamId].getCurrentTextTrackInfo();let de=NaN;Ie?de=fe(Ee.streamId):me(ye)&&Ee.currentMediaInfo.lang&&Ee.currentMediaInfo.lang!==ye.lang&&(de=fe(Ee.streamId),isNaN(de)&&(de=-1)),isNaN(de)||rt(Ee.streamId,de)}catch(ye){ie.error(ye)}}function nt(){let Ee=!0;return Ie&&!Ce&&(Ee=!1),Ee}function rt(Ee,ye){Ie=ye===-1,Ie&&z&&z.saveTextSettingsDisabled();let de=Ue(Ee);if(de===ye||!$[Ee])return;$[Ee].disableManualTracks();let we=$[Ee].getCurrentTextTrackInfo(),qe=we?ne.getTextTrack(we.kind,we.id,we.lang,we.isTTML,we.isEmbedded):null;qe&&qe.mode!==j.default.TEXT_DISABLED&&$[Ee].setModeForTrackIdx(de,j.default.TEXT_HIDDEN),$[Ee].setCurrentTrackIdx(ye),we=$[Ee].getCurrentTextTrackInfo();const tt=B.get().streaming.text.dispatchForManualRendering;if(we&&!tt&&we.mode!==j.default.TEXT_DISABLED&&$[Ee].setModeForTrackIdx(ye,j.default.TEXT_SHOWING),we&&we.isFragmented&&!we.isEmbedded)(function(mt,Tt,Vt){if(!q[mt])return;let Jt=q[mt].getConfig().fragmentedTracks;for(let yn=0;yn<Jt.length;yn++){let Cn=Jt[yn];if(Tt.lang===Cn.lang&&(Cn.id?Tt.id===Cn.id:Tt.index===Cn.index)){let Kn=z.getCurrentTrackFor(j.default.TEXT,mt);(Cn.id?Kn.id!==Cn.id:Kn.index!==Cn.index)?($[mt].deleteCuesFromTrackIdx(Vt),q[mt].setCurrentFragmentedTrackIdx(yn)):Vt===-1&&ke.trigger(x.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,{},{streamId:mt,mediaType:j.default.TEXT})}}})(Ee,we,de);else if(we&&!we.isFragmented)(function(mt,Tt){ke.trigger(x.default.SET_NON_FRAGMENTED_TEXT,{currentTrackInfo:Tt},{streamId:mt,mediaType:j.default.TEXT})})(Ee,we);else if(!we&&Ie){const mt=fe(Ee);return void(isNaN(mt)||rt(Ee,mt))}z.setTrack(we)}function fe(Ee){const ye=function(qe){return $[qe].getTextTrackInfos().filter((tt,mt)=>(tt._indexToSelect=mt,!!(tt&&tt.roles&&tt.roles.length>0)&&me(tt)))}(Ee);if(!ye||ye.length<=0)return NaN;const de=z.getCurrentTrackFor(j.default.AUDIO,Ee);if(!de)return NaN;const we=ye.find(qe=>de.lang===qe.lang);return we?we._indexToSelect:NaN}function me(Ee){return!(!Ee||!Ee.roles||Ee.roles.length===0)&&Ee.roles.some(ye=>ye.schemeIdUri===j.default.DASH_ROLE_SCHEME_ID&&ye.value===M.default.FORCED_SUBTITLE)}function Ue(Ee){return $[Ee].getCurrentTrackIdx()}function je(){q={},$={},X={},Ie=!0,Le=!1,Ye=!1}return oe={addEmbeddedTrack:function(Ee,ye){const de=Ee.id;q[de]&&q[de].addEmbeddedTrack(ye)},addMediaInfosToBuffer:function(Ee,ye,de){let we=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null;const qe=Ee.id;q[qe]&&q[qe].addMediaInfos(ye,de,we)},createTracks:function(Ee){const ye=Ee.id;$[ye]&&$[ye].createTracks()},deactivateStream:function(Ee){if(!Ee)return;const ye=Ee.id;q[ye]&&q[ye].resetMediaInfos(),$[ye]&&$[ye].deleteAllTextTracks()},enableForcedTextStreaming:function(Ee){return(0,on.checkParameterType)(Ee,"boolean"),Ce=Ee,!0},enableText:function(Ee,ye){return(0,on.checkParameterType)(ye,"boolean"),nt()!==ye&&(ye&&rt(Ee,X[Ee].lastEnabledIndex),ye||(X[Ee].lastEnabledIndex=Ue(Ee),Le?rt(Ee,-1):Ye=!0)),!0},getAllTracksAreDisabled:function(){return Ie},getCurrentTrackIdx:Ue,getTextSourceBuffer:function(Ee){const ye=Ee.id;if(q&&q[ye])return q[ye]},initialize:function(){Te=bb(C).create({adapter:R,baseURLController:Q}),ke.on(x.default.TEXT_TRACKS_QUEUE_INITIALIZED,Pe,oe),ke.on(x.default.DVB_FONT_DOWNLOAD_FAILED,le,oe),ke.on(x.default.DVB_FONT_DOWNLOAD_COMPLETE,he,oe),ke.on(x.default.MEDIAINFO_UPDATED,Ve,oe),B.get().streaming.text.webvtt.customRenderingEnabled&&(ke.on(x.default.PLAYBACK_TIME_UPDATED,Ge,oe),ke.on(x.default.PLAYBACK_SEEKING,ze,oe))},initializeForStream:function(Ee){const ye=Ee.id,de=Eb(C).create({videoModel:ne,settings:B,streamInfo:Ee});de.initialize(),$[ye]=de;const we=_0(C).create({errHandler:P,adapter:R,dvbFonts:Te,manifestModel:F,mediaController:z,videoModel:ne,textTracks:de,vttParser:re,vttCustomRenderingParser:ve,ttmlParser:Se,streamInfo:Ee,settings:B});we.initialize(),q[ye]=we,X[ye]={},X[ye].lastEnabledIndex=-1},isTextEnabled:nt,reset:function(){Object.keys(q).forEach(Ee=>{q[Ee].resetEmbedded(),q[Ee].reset()}),Te.reset(),je(),ke.off(x.default.TEXT_TRACKS_QUEUE_INITIALIZED,Pe,oe),ke.off(x.default.DVB_FONT_DOWNLOAD_FAILED,le,oe),ke.off(x.default.DVB_FONT_DOWNLOAD_COMPLETE,he,oe),ke.off(x.default.MEDIAINFO_UPDATED,Ve,oe),B.get().streaming.text.webvtt.customRenderingEnabled&&(ke.off(x.default.PLAYBACK_TIME_UPDATED,Ge,oe),ke.off(x.default.PLAYBACK_SEEKING,ze,oe))},setTextTrack:rt,clearDataForStream:function(Ee){q[Ee]&&(q[Ee].resetEmbedded(),q[Ee].reset(),delete q[Ee]),$[Ee]&&($[Ee].deleteAllTextTracks(),delete $[Ee]),X[Ee]&&delete X[Ee]}},Ce=!1,Le=!1,Ye=!1,re=S0(C).getInstance(),ve=tr(C).getInstance(),Se=Ec(C).getInstance(),ke=(0,K.default)(C).getInstance(),ie=(0,$e.default)(C).getInstance().getLogger(oe),je(),oe}x0.__dashjs_factory_name="TextController";var _b=ue.default.getClassFactory(x0);function A0(D){D=D||{};const C=this.context,R=(0,$e.default)(C).getInstance(),P=D.settings,F=(0,K.default)(C).getInstance();let z,Q,ne,B,oe,X;function q(){return navigator&&navigator.connection&&!isNaN(navigator.connection.downlink)&&navigator.connection.downlink>0?1e3*navigator.connection.downlink:NaN}function $(Se,ke,Ie,Ce){const Le=Math.pow(.5,Ie/Ce.fast);Se.fastEstimate=(1-Le)*ke+Le*Se.fastEstimate;const Ye=Math.pow(.5,Ie/Ce.slow);Se.slowEstimate=(1-Ye)*ke+Ye*Se.slowEstimate,Se.totalWeight+=Ie}function re(){z={},Q={},ne={},B={}}const ve={addEntry:function(Se,ke){try{if(!(Se&&ke&&ke.trace&&ke.trace.length))return;(function(Le){z[Le]=z[Le]||[],Q[Le]=Q[Le]||[],ne[Le]=ne[Le]||{fastEstimate:0,slowEstimate:0,totalWeight:0},B[Le]=B[Le]||{fastEstimate:0,slowEstimate:0,totalWeight:0}})(Se);const Ie=ke.tresponse.getTime()-ke.trequest.getTime()||1;let Ce=function(Le,Ye){return Le._fileLoaderType&&Le._fileLoaderType===j.default.FILE_LOADER_TYPES.FETCH?function(Te){const ie=Te.trace.reduce((Pe,Ge)=>Pe+Ge.b[0],0),le=Te.trace.reduce((Pe,Ge)=>Pe+Ge.d,0);let he=NaN;return P.get().streaming.abr.throughput.useNetworkInformationApi.fetch&&(he=q()),isNaN(he)&&(he=Math.round(8*ie/le)),{downloadedBytes:ie,value:he,downloadTimeInMs:le}}(Le):function(Te,ie){let le=NaN,he=NaN,Pe=!1;if(P.get().streaming.abr.throughput.useResourceTimingApi&&Te._resourceTimingValues)le=Te._resourceTimingValues.transferSize,he=Te._resourceTimingValues.responseEnd-Te._resourceTimingValues.responseStart,Pe=!0;else{if(Te.trace.length<=1)return{throughput:NaN,downloadTimeInMs:NaN};le=Te.trace.reduce((ze,Ve)=>ze+Ve.b[0],0)-Te.trace[0].b[0],he=Math.max(Te.trace.reduce((ze,Ve)=>ze+Ve.d,0)-Te.trace[0].d,1)}let Ge=NaN;if(!Pe&&P.get().streaming.abr.throughput.useNetworkInformationApi.xhr&&(Ge=q()),isNaN(Ge)){const ze=P.get().streaming.abr.throughput.useDeadTimeLatency?he:he+ie;Ge=Math.round(8*le/ze)}return{downloadedBytes:le,value:Ge,downloadTimeInMs:he}}(Le,Ye)}(ke,Ie);if(Ce.latencyInMs=Ie,isNaN(Ce.value)||!isFinite(Ce.value))return;if(ke.cmsd){const Le=ke.cmsd.dynamic&&ke.cmsd.dynamic.etp?ke.cmsd.dynamic.etp:null;if(Le){const Ye=P.get().streaming.cmsd.abr.etpWeightRatio;Ye>0&&Ye<=1&&(Ce.value=Ce.value*(1-Ye)+Le*Ye)}}if(function(Le,Ye,Te){return P.get().streaming.abr.throughput.useResourceTimingApi&&Te._resourceTimingValues?Te._resourceTimingValues.transferSize===0&&Te._resourceTimingValues.decodedBodySize>0:!isNaN(Ye)&&(Le===j.default.VIDEO?Ye<P.get().streaming.cacheLoadThresholds[j.default.VIDEO]:Le===j.default.AUDIO?Ye<P.get().streaming.cacheLoadThresholds[j.default.AUDIO]:void 0)}(Se,ke._tfinish.getTime()-ke.trequest.getTime(),ke))return void X.debug(`${Se} Assuming segment ${ke.url} came from cache, ignoring it for throughput calculation`);X.debug(`Added throughput entry for ${Se}: ${Ce.value} kbit/s`),Ce.serviceLocation=ke._serviceLocation,z[Se].push(Ce),Q[Se].push({value:Ie}),function(Le){z[Le].length>P.get().streaming.abr.throughput.sampleSettings.maxMeasurementsToKeep&&z[Le].shift(),Q[Le].length>P.get().streaming.abr.throughput.sampleSettings.maxMeasurementsToKeep&&Q[Le].shift()}(Se),F.trigger(xe.default.THROUGHPUT_MEASUREMENT_STORED,{throughputValues:Ce}),ke.type!==Xe.HTTPRequest.MPD_TYPE&&($(ne[Se],Ce.value,P.get().streaming.abr.throughput.ewma.weightDownloadTimeMultiplicationFactor*Ce.downloadTimeInMs,oe.bandwidthHalfLife),$(B[Se],Ie,1,oe.latencyHalfLife))}catch(Ie){X.error(Ie)}},getThroughputDict:function(Se){return Se?z[Se]:z},getEwmaThroughputDict:function(Se){return Se?ne[Se]:ne},getEwmaLatencyDict:function(Se){return Se?B[Se]:B},getEwmaHalfLife:function(){return oe},getLatencyDict:function(Se){return Se?Q[Se]:Q},reset:re};return X=R.getLogger(ve),oe={bandwidthHalfLife:{fast:P.get().streaming.abr.throughput.ewma.throughputFastHalfLifeSeconds,slow:P.get().streaming.abr.throughput.ewma.throughputSlowHalfLifeSeconds},latencyHalfLife:{fast:P.get().streaming.abr.throughput.ewma.latencyFastHalfLifeCount,slow:P.get().streaming.abr.throughput.ewma.latencySlowHalfLifeCount}},re(),ve}A0.__dashjs_factory_name="ThroughputModel";var Sb=ue.default.getClassFactory(A0);function w0(){const D=this.context,C=(0,K.default)(D).getInstance();let R,P,F;function z(){performance.clearResourceTimings()}function Q(Le){Le.metric!==Z.HTTP_REQUEST||!Le.value||Le.value.type!==Xe.HTTPRequest.MPD_TYPE&&(Le.value.type!==Xe.HTTPRequest.MEDIA_SEGMENT_TYPE||Le.mediaType!==j.default.AUDIO&&Le.mediaType!==j.default.VIDEO)||R.addEntry(Le.mediaType,Le.value)}function ne(Le,Ye){let Te,ie=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,le=arguments.length>3&&arguments[3]!==void 0?arguments[3]:NaN,he=null,Pe=R.getEwmaHalfLife(),Ge=null,ze=!0;switch(ie||(ie=F.get().streaming.abr.throughput.averageCalculationMode),Le){case j.default.THROUGHPUT_TYPES.BANDWIDTH:he=ie===j.default.THROUGHPUT_CALCULATION_MODES.EWMA?R.getEwmaThroughputDict(Ye):R.getThroughputDict(Ye),Ge=Pe.bandwidthHalfLife,ze=!0,le=isNaN(le)?P.getIsDynamic()?F.get().streaming.abr.throughput.sampleSettings.live:F.get().streaming.abr.throughput.sampleSettings.vod:le;break;case j.default.THROUGHPUT_TYPES.LATENCY:he=ie===j.default.THROUGHPUT_CALCULATION_MODES.EWMA?R.getEwmaLatencyDict(Ye):R.getLatencyDict(Ye),Ge=Pe.latencyHalfLife,ze=!1,le=isNaN(le)?F.get().streaming.abr.throughput.sampleSettings.averageLatencySampleAmount:le}if(!he||he.length===0)return NaN;switch(ie){case j.default.THROUGHPUT_CALCULATION_MODES.ARITHMETIC_MEAN:return Te=B(he,le,Le),oe(he,Te);case j.default.THROUGHPUT_CALCULATION_MODES.BYTE_SIZE_WEIGHTED_ARITHMETIC_MEAN:return Te=B(he,le,Le),X(he,Te);case j.default.THROUGHPUT_CALCULATION_MODES.DATE_WEIGHTED_ARITHMETIC_MEAN:return Te=B(he,le,Le),q(he,Te);case j.default.THROUGHPUT_CALCULATION_MODES.HARMONIC_MEAN:return Te=B(he,le,Le),$(he,Te);case j.default.THROUGHPUT_CALCULATION_MODES.BYTE_SIZE_WEIGHTED_HARMONIC_MEAN:return Te=B(he,le,Le),re(he,Te);case j.default.THROUGHPUT_CALCULATION_MODES.DATE_WEIGHTED_HARMONIC_MEAN:return Te=B(he,le,Le),ve(he,Te);case j.default.THROUGHPUT_CALCULATION_MODES.EWMA:return Se(he,Ge,ze);case j.default.THROUGHPUT_CALCULATION_MODES.ZLEMA:return Te=B(he,le,Le),ke(he,Te)}}function B(Le,Ye,Te){if(Le){if(Ye>=Le.length)Ye=Le.length;else if(Te===j.default.THROUGHPUT_TYPES.BANDWIDTH&&F.get().streaming.abr.throughput.sampleSettings.enableSampleSizeAdjustment)for(let ie=1;ie<Ye;++ie){const le=Le[Le.length-ie].value/Le[Le.length-ie-1].value;if((le>=F.get().streaming.abr.throughput.sampleSettings.increaseScale||le<=F.get().streaming.abr.throughput.sampleSettings.decreaseScale)&&(Ye+=1)===Le.length)break}}else Ye=0;return Ye}function oe(Le,Ye){let Te=Le;return Ye!==0&&Te&&Te.length!==0?(Te=Te.slice(-Ye),Te.reduce((ie,le)=>ie+le.value,0)/Te.length):NaN}function X(Le,Ye){let Te=Le;if(Ye===0||!Te||Te.length===0)return NaN;Te=Te.slice(-Ye);let ie=0;return Te.reduce((le,he)=>{let Pe=Math.sqrt(he.downloadedBytes);return ie+=Pe,le+he.value*Pe},0)/ie}function q(Le,Ye){let Te=Le;if(Ye===0||!Te||Te.length===0)return NaN;Te=Te.slice(-Ye);let ie=0;return Te.reduce((le,he,Pe)=>{let Ge=Pe+1;return ie+=Ge,le+he.value*Ge},0)/ie}function $(Le,Ye){let Te=Le;if(Ye===0||!Te||Te.length===0)return NaN;Te=Te.slice(-Ye);const ie=Te.reduce((le,he)=>le+1/he.value,0);return Te.length/ie}function re(Le,Ye){let Te=Le;if(Ye===0||!Te||Te.length===0)return NaN;Te=Te.slice(-Ye);let ie=0;const le=Te.reduce((he,Pe)=>{let Ge=Math.sqrt(Pe.downloadedBytes);return ie+=Ge,he+1/Pe.value*Ge},0);return ie/le}function ve(Le,Ye){let Te=Le;if(Ye===0||!Te||Te.length===0)return NaN;Te=Te.slice(-Ye);let ie=0;const le=Te.reduce((he,Pe,Ge)=>{let ze=Ge+1;return ie+=ze,he+1/Pe.value*ze},0);return ie/le}function Se(Le,Ye){let Te=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(!Le||Le.totalWeight<=0)return NaN;const ie=Le.fastEstimate/(1-Math.pow(.5,Le.totalWeight/Ye.fast)),le=Le.slowEstimate/(1-Math.pow(.5,Le.totalWeight/Ye.slow));return Te?Math.min(ie,le):Math.max(ie,le)}function ke(Le,Ye){if(Ye===0||!Le||Le.length===0)return NaN;let Te=Le.slice(-Ye).map(Pe=>Pe.value),ie=2/(Te.length+1),le=Te[Te.length-1],he=Te[Te.length-1];for(let Pe=0;Pe<Te.length;Pe++)le=ie*Te[Pe]+(1-ie)*le,he=ie*le+(1-ie)*he;return he}function Ie(Le){let Ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,Te=arguments.length>2&&arguments[2]!==void 0?arguments[2]:NaN;const ie=ne(j.default.THROUGHPUT_TYPES.BANDWIDTH,Le,Ye,Te);return Math.round(ie)}const Ce={getArithmeticMean:oe,getAverageLatency:function(Le){let Ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,Te=arguments.length>2&&arguments[2]!==void 0?arguments[2]:NaN;const ie=ne(j.default.THROUGHPUT_TYPES.LATENCY,Le,Ye,Te);return Math.round(ie)},getAverageThroughput:Ie,getByteSizeWeightedArithmeticMean:X,getByteSizeWeightedHarmonicMean:re,getDateWeightedArithmeticMean:q,getDateWeightedHarmonicMean:ve,getEwma:Se,getHarmonicMean:$,getRawThroughputData:function(Le){return Le?R.getThroughputDict(Le):[]},getSafeAverageThroughput:function(Le){let Ye=Ie(Le,arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,arguments.length>2&&arguments[2]!==void 0?arguments[2]:NaN);return isNaN(Ye)||(Ye*=F.get().streaming.abr.throughput.bandwidthSafetyFactor),Ye},getZlema:ke,initialize:function(){R=Sb(D).create({settings:F}),C.on(xe.default.METRIC_ADDED,Q,Ce),performance&&performance.addEventListener("resourcetimingbufferfull",z)},reset:function(){R.reset(),C.off(xe.default.METRIC_ADDED,Q,Ce),performance&&performance.removeEventListener("resourcetimingbufferfull",z)},setConfig:function(Le){Le.settings&&(F=Le.settings),Le.playbackController&&(P=Le.playbackController)}};return Ce}w0.__dashjs_factory_name="ThroughputController";var xb=ue.default.getSingletonFactory(w0);function lm(){const D="You must first call initialize() and set a source before calling this method",C="You must first call initialize() and set a valid source and view before calling this method",R="You must first call attachView() to set the video element before calling this method",P="You must first call attachSource() with a valid source before calling this method",F="MediaPlayer not initialized!",z=this.context,Q=(0,K.default)(z).getInstance();let ne=(0,ge.default)(z).getInstance();const B=(0,$e.default)(z).getInstance({settings:ne});let oe,X,q,$,re,ve,Se,ke,Ie,Ce,Le,Ye,Te,ie,le,he,Pe,Ge,ze,Ve,nt,rt,fe,me,Ue,je,Ee,ye,de,we,qe,tt,mt,Tt,Vt,Jt,yn,Cn,Kn,Zn,gi;function _n(){Xn(null),kn(null),$=null,le&&(le.reset(),le=null),he&&(he.reset(),he=null),nt&&nt.reset(),ne.reset(),Ge&&(Ge.reset(),Ge=null)}function ri(){return!!q&&!!yn.getElement()}function pi(){return(0,ab.getVersionString)()}function Gi(){if(!Se)throw C;return de.isPaused()}function Ki(){if(!Se)throw C;return de.getIsDynamic()}function bi(Je){const Ot=je&&je.hasVideoTrack()?j.default.VIDEO:j.default.AUDIO;let an=mt.getCurrentDVRInfo(Ot);return an?Nt(an.range.start+Je,an):0}function Nt(Je,Ot){let an=de.getOriginalLiveDelay();return Je>Ot.range.end-an&&(Je=Ot.range.end-an),Je}function rn(){let Je=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(!Se)throw C;let Ot=Kt().currentTime;return Je!==""&&(Ot=je.getTimeRelativeToStreamId(Ot,Je)),Ot}function en(Je){(0,on.checkParameterType)(Je,"boolean"),ke=Je}function gn(){nt.restoreDefaultUTCTimingSources()}function qn(){return mt}function Kt(){if(!yn.getElement())throw R;return yn.getElement()}function kn(Je){if(!re)throw F;yn.setElement(Je),Je&&($n(),function(){if(he||typeof dashjs>"u")return;let Ot=dashjs.MetricsReporting;typeof Ot=="function"&&(he=Ot(z).create().createMetricsReporting({debug:B,eventBus:Q,mediaElement:Kt(),adapter:ze,dashMetrics:mt,mediaPlayerModel:Ve,events:x.default,constants:j.default,metricsConstants:Z}))}(),function(){if(Pe||typeof dashjs>"u")return;let Ot=dashjs.MssHandler;typeof Ot=="function"&&(ce.extend(Ot.errors),Pe=Ot(z).create({eventBus:Q,mediaPlayerModel:Ve,dashMetrics:mt,manifestModel:Tt,playbackController:de,streamController:je,protectionController:le,baseURLController:fe,errHandler:rt,events:x.default,constants:j.default,debug:B,initSegmentType:Xe.HTTPRequest.INIT_SEGMENT_TYPE,BASE64:rf,ISOBoxer:vs,settings:ne}))}(),je&&je.switchToVideoElement(Ie)),Se&&Ut(),tn(Ie)}function Bn(Je){if(!ve)throw D;let Ot=je.getActiveStreamInfo();return Ot?ie.getTracksFor(Je,Ot.id).filter(an=>!le||le.areKeyIdsUsable(an.normalizedKeyIds)):[]}function Xn(Je){let Ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:NaN;if(!re)throw F;typeof Je=="string"&&Cn.initialize(Je),Ot==null&&(Ot=NaN),isNaN(Ot)||(Ot=Math.max(0,Ot)),Ie=Ot,q=Je,(ve||Se)&&Ut(),ri()&&tn(Ie)}function zn(){if(!ve)throw D;let Je=je.getActiveStreamInfo();return Je?je.getStreamById(Je.id):null}function Ut(){Se=!1,ve=!1,ze.reset(),je.reset(),ye.reset(),tt.reset(),de.reset(),we.reset(),qe.reset(),Ce.reset(),Le.reset(),ie.reset(),Zn.reset(),le&&(ne.get().streaming.protection.keepProtectionMediaKeys?le.stop():(le.reset(),le=null,$n())),Ee.reset(),Vt.reset(),Jt.reset()}function hn(){return mc(z).create({debug:B,errHandler:rt,dashMetrics:mt,mediaPlayerModel:Ve,mssHandler:Pe,settings:ne})}function $n(){if(le)return le;if(typeof dashjs>"u")return null;let Je=dashjs.Protection;if(typeof Je=="function"){let Ot=Je(z).create();return x.default.extend(Je.events),xe.default.extend(Je.events,{publicOnly:!0}),ce.extend(Je.errors),le=Ot.createProtectionSystem({debug:B,errHandler:rt,videoModel:yn,customParametersModel:nt,capabilities:me,eventBus:Q,events:x.default,BASE64:rf,constants:j.default,cmcdModel:Vt,settings:ne}),me||(me=(0,eh.default)(z).getInstance()),me.setProtectionController(le),le}return null}function Yn(){if(!re)throw F;if(Ge)return Ge;if(typeof dashjs>"u")return null;let Je=dashjs.OfflineController;if(typeof Je=="function"){x.default.extend(Je.events),xe.default.extend(Je.events,{publicOnly:!0}),ce.extend(Je.errors);const Ot=hn(),an=Mu(z).create();return an.setConfig({manifestModel:Tt,adapter:ze,manifestLoader:Ot,errHandler:rt,contentSteeringController:qe}),Ge=Je(z).create({debug:B,manifestUpdater:an,baseURLController:fe,manifestLoader:Ot,manifestModel:Tt,mediaPlayerModel:Ve,abrController:Ce,playbackController:de,adapter:ze,errHandler:rt,dashMetrics:mt,timelineConverter:Te,segmentBaseController:Zn,schemeLoaderFactory:Ye,eventBus:Q,events:x.default,errors:ce,constants:j.default,settings:ne,dashConstants:M.default,urlUtils:Ne(z).getInstance()}),Ge}return null}function tn(){let Je=arguments.length>0&&arguments[0]!==void 0?arguments[0]:NaN;Ge&&Ge.resetRecords(),!ve&&q&&(ve=!0,X.info("Streaming Initialized"),function(){const Ot=hn();je||(je=rd(z).getInstance()),Ee||(Ee=_b(z).create({errHandler:rt,manifestModel:Tt,adapter:ze,mediaController:ie,baseURLController:fe,videoModel:yn,settings:ne})),Ue.setConfig({capabilities:me,customParametersModel:nt,adapter:ze,settings:ne,protectionController:le,manifestModel:Tt,errHandler:rt}),je.setConfig({capabilities:me,capabilitiesFilter:Ue,manifestLoader:Ot,manifestModel:Tt,mediaPlayerModel:Ve,customParametersModel:nt,protectionController:le,textController:Ee,adapter:ze,dashMetrics:mt,errHandler:rt,timelineConverter:Te,videoModel:yn,playbackController:de,serviceDescriptionController:we,contentSteeringController:qe,abrController:Ce,throughputController:Le,mediaController:ie,settings:ne,baseURLController:fe,uriFragmentModel:Cn,segmentBaseController:Zn}),ye.setConfig({settings:ne,playbackController:de,streamController:je,videoModel:yn,timelineConverter:Te,adapter:ze}),de.setConfig({streamController:je,serviceDescriptionController:we,dashMetrics:mt,adapter:ze,videoModel:yn,timelineConverter:Te,settings:ne}),tt.setConfig({streamController:je,playbackController:de,mediaPlayerModel:Ve,videoModel:yn,settings:ne}),Le.setConfig({settings:ne,playbackController:de}),Ce.setConfig({streamController:je,capabilities:me,domStorage:Kn,mediaPlayerModel:Ve,customParametersModel:nt,throughputController:Le,cmsdModel:Jt,dashMetrics:mt,adapter:ze,videoModel:yn,settings:ne}),Vt.setConfig({abrController:Ce,dashMetrics:mt,playbackController:de,serviceDescriptionController:we,throughputController:Le}),gi.setConfig({serviceDescriptionController:we}),Jt.setConfig({}),ie.initialize(),Le.initialize(),Ce.initialize(),je.initialize(ke,$),Ee.initialize(),ye.initialize(),tt.initialize(),Vt.initialize(ke),Jt.initialize(),qe.initialize(),Zn.initialize()}(),typeof q=="string"?je.load(q,Je):je.loadWithManifest(q,Je)),!Se&&ri()&&(Se=!0,Q.trigger(xe.default.PLAYBACK_INITIALIZED),X.info("Playback Initialized"))}return oe={addABRCustomRule:function(Je,Ot,an){nt.addAbrCustomRule(Je,Ot,an)},addRequestInterceptor:function(Je){nt.addRequestInterceptor(Je)},addResponseInterceptor:function(Je){nt.addResponseInterceptor(Je)},addUTCTimingSource:function(Je,Ot){nt.addUTCTimingSource(Je,Ot)},attachProtectionController:function(Je){le=Je},attachSource:Xn,attachTTMLRenderingDiv:function(Je){if(!yn.getElement())throw R;yn.setTTMLRenderingDiv(Je)},attachView:kn,attachVttRenderingDiv:function(Je){if(!yn.getElement())throw R;yn.setVttRenderingDiv(Je)},clearDefaultUTCTimingSources:function(){nt.clearDefaultUTCTimingSources()},convertToTimeCode:function(Je){Je=Math.max(Je,0);let Ot=Math.floor(Je/3600),an=Math.floor(Je%3600/60),Ft=Math.floor(Je%3600%60);return(Ot===0?"":Ot<10?"0"+Ot.toString()+":":Ot.toString()+":")+(an<10?"0"+an.toString():an.toString())+":"+(Ft<10?"0"+Ft.toString():Ft.toString())},destroy:function(){_n(),ue.default.deleteSingletonInstances(z)},duration:function(){if(!Se)throw C;let Je=Kt().duration;if(de.getIsDynamic()){const Ot=je&&je.hasVideoTrack()?j.default.VIDEO:j.default.AUDIO;let an=mt.getCurrentDVRInfo(Ot);Je=an?an.range.end-an.range.start:0}return Je},enableForcedTextStreaming:function(Je){return!(!je.getActiveStreamInfo()||!Ee)&&Ee.enableForcedTextStreaming(Je)},enableText:function(Je){const Ot=je.getActiveStreamInfo();return!(!Ot||!Ee)&&Ee.enableText(Ot.id,Je)},extend:function(Je,Ot,an){ue.default.extend(Je,Ot,an,z)},formatUTC:function(Je,Ot,an){let Ft=arguments.length>3&&arguments[3]!==void 0&&arguments[3];const bn=new Date(1e3*Je),Fn=bn.toLocaleDateString(Ot),ci=bn.toLocaleTimeString(Ot,{hour12:an});return Ft?ci+" "+Fn:ci},getABRCustomRules:function(){return nt.getAbrCustomRules()},getActiveStream:zn,getAutoPlay:function(){return ke},getAvailableBaseUrls:function(){const Je=Tt.getValue();return Je?fe.getBaseUrls(Je):[]},getAvailableLocations:function(){const Je=Tt.getValue();if(!Je)return[];const Ot=ze.getLocation(Je),an=qe.getSynthesizedLocationElements(Ot);return Ot.concat(an)},getAverageLatency:function(){let Je=arguments.length>0&&arguments[0]!==void 0?arguments[0]:j.default.VIDEO,Ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,an=arguments.length>2&&arguments[2]!==void 0?arguments[2]:NaN;return Le?Le.getAverageLatency(Je,Ot,an):0},getAverageThroughput:function(){let Je=arguments.length>0&&arguments[0]!==void 0?arguments[0]:j.default.VIDEO,Ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,an=arguments.length>2&&arguments[2]!==void 0?arguments[2]:NaN;return Le?Le.getAverageThroughput(Je,Ot,an):0},getBufferLength:function(Je){const Ot=[j.default.VIDEO,j.default.AUDIO,j.default.TEXT];if(Je)return Ot.indexOf(Je)!==-1?qn().getCurrentBufferLevel(Je)||NaN:(X.warn("getBufferLength requested for invalid type"),NaN);{const an=Ot.map(Ft=>Bn(Ft).length>0?qn().getCurrentBufferLevel(Ft):Number.MAX_VALUE).reduce((Ft,bn)=>Math.min(Ft,bn));return an===Number.MAX_VALUE?NaN:an}},getCurrentLiveLatency:function(){if(!re)throw F;return Se?de.getCurrentLiveLatency():NaN},getCurrentRepresentationForType:function(Je){if(!ve)throw D;if(Je!==j.default.IMAGE&&Je!==j.default.VIDEO&&Je!==j.default.AUDIO)return null;const Ot=zn();if(!Ot)return null;if(Je===j.default.IMAGE){const an=Ot.getThumbnailController();return an?an.getCurrentTrack():-1}return Ot.getCurrentRepresentationForType(Je)},getCurrentSteeringResponseData:function(){if(qe)return qe.getCurrentSteeringResponseData()},getCurrentTextTrackIndex:function(){let Je=NaN;const Ot=je.getActiveStreamInfo();if(Ot&&Ee)return Je=Ee.getCurrentTrackIdx(Ot.id),Je},getCurrentTrackFor:function(Je){if(!ve)throw D;let Ot=je.getActiveStreamInfo();return Ot?ie.getCurrentTrackFor(Je,Ot.id):null},getDashAdapter:function(){return ze},getDashMetrics:qn,getDebug:function(){return B},getDvrSeekOffset:bi,getDvrWindow:function(){if(!Se)throw C;const Je=je&&je.hasVideoTrack()?j.default.VIDEO:j.default.AUDIO;let Ot=mt.getCurrentDVRInfo(Je);if(!Ot)return{};let an=0;const Ft=de.getIsDynamic();return Ft&&(an=Ot.manifestInfo.availableFrom.getTime()/1e3),{start:Ot.range.start,end:Ot.range.end,startAsUtc:Ft?an+Ot.range.start:NaN,endAsUtc:Ft?an+Ot.range.end:NaN,size:Ot.range.end-Ot.range.start}},getInitialMediaSettingsFor:function(Je){if(!re)throw F;return ie.getInitialSettings(Je)},getLowLatencyModeEnabled:function(){if(!Se)throw C;return de.getLowLatencyModeEnabled()},getManifest:function(){return Tt.getValue()},getOfflineController:function(){return Yn()},getPlaybackRate:function(){return Kt().playbackRate},getProtectionController:function(){return $n()},getRawThroughputData:function(){let Je=arguments.length>0&&arguments[0]!==void 0?arguments[0]:j.default.VIDEO;return Le?Le.getRawThroughputData(Je):[]},getRepresentationsByType:function(Je){let Ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!ve)throw D;let an=Ot?je.getStreamById(Ot):zn();return an?an.getRepresentationsByType(Je):[]},getSafeAverageThroughput:function(){let Je=arguments.length>0&&arguments[0]!==void 0?arguments[0]:j.default.VIDEO,Ot=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,an=arguments.length>2&&arguments[2]!==void 0?arguments[2]:NaN;return Le?Le.getSafeAverageThroughput(Je,Ot,an):0},getSettings:function(){return ne.get()},getSource:function(){if(!q)throw P;return q},getStreamsFromManifest:function(Je){if(!ve)throw D;return ze.getStreamsInfo(Je)},getTTMLRenderingDiv:function(){return yn?yn.getTTMLRenderingDiv():null},getTargetLiveDelay:function(){if(!Se)throw C;return de.getOriginalLiveDelay()},getTracksFor:Bn,getTracksForTypeFromManifest:function(Je,Ot,an){if(!ve)throw D;return(an=an||ze.getStreamsInfo(Ot,1)[0])?ze.getAllMediaInfoForType(an,Je,Ot):[]},getVersion:pi,getVideoElement:Kt,getVolume:function(){return Kt().volume},getXHRWithCredentialsForType:function(Je){return nt.getXHRWithCredentialsForType(Je)},initialize:function(Je,Ot,an){let Ft=arguments.length>3&&arguments[3]!==void 0?arguments[3]:NaN;me||(me=(0,eh.default)(z).getInstance(),me.setConfig({settings:ne,protectionController:le})),rt||(rt=Yy(z).getInstance()),me.supportsMediaSource()?(re||(re=!0,Te=vb(z).getInstance(),Le||(Le=xb(z).getInstance()),Ce||(Ce=ju(z).getInstance()),Ye||(Ye=ns(z).getInstance()),de||(de=et(z).getInstance()),ie||(ie=zg(z).getInstance()),je||(je=rd(z).getInstance()),ye||(ye=Ou(z).getInstance()),tt||(tt=Gf(z).getInstance()),we||(we=lu(z).getInstance()),qe||(qe=Pu(z).getInstance()),Ue||(Ue=ep(z).getInstance()),ze=fb(z).getInstance(),Tt=nb(z).getInstance(),Vt=tl(z).getInstance(),Jt=Du(z).getInstance(),gi=qd(z).getInstance(),mt=T0(z).getInstance({settings:ne}),Kn=a0(z).getInstance({settings:ne}),ze.setConfig({constants:j.default,cea608parser:new Be,errHandler:rt,BASE64:rf}),fe||(fe=Yd(z).create()),fe.setConfig({adapter:ze,contentSteeringController:qe}),we.setConfig({adapter:ze}),Zn||(Zn=lb(z).getInstance({dashMetrics:mt,mediaPlayerModel:Ve,errHandler:rt,baseURLController:fe,events:x.default,eventBus:Q,debug:B,boxParser:Qc(z).getInstance(),errors:ce})),ie.setConfig({domStorage:Kn,settings:ne,mediaPlayerModel:Ve,customParametersModel:nt,videoModel:yn}),Ve.setConfig({playbackController:de,serviceDescriptionController:we}),qe.setConfig({adapter:ze,errHandler:rt,dashMetrics:mt,mediaPlayerModel:Ve,manifestModel:Tt,serviceDescriptionController:we,throughputController:Le,eventBus:Q}),gn(),en(an===void 0||an),Yn()),Je&&kn(Je),Ot&&Xn(Ot,Ft),X.info("[dash.js "+pi()+"] MediaPlayer has been initialized")):rt.error(new Ze.default(ce.CAPABILITY_MEDIASOURCE_ERROR_CODE,ce.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE))},isDynamic:Ki,isMuted:function(){return Kt().muted},isPaused:Gi,isReady:ri,isSeeking:function(){if(!Se)throw C;return de.isSeeking()},isTextEnabled:function(){const Je=je.getActiveStreamInfo();return!(!Je||!Ee)&&Ee.isTextEnabled(Je)},off:function(Je,Ot,an){Q.off(Je,Ot,an)},on:function(Je,Ot,an,Ft){Q.on(Je,Ot,an,Ft)},pause:function(){if(!Se)throw C;de.pause()},play:function(){if(!Se)throw C;(!ke||Gi()&&Se)&&de.play(!0)},preload:function(){if(!yn.getElement()&&!ve){if(!q)throw P;tn(Ie)}},provideThumbnail:function(Je,Ot){if(typeof Ot!="function")return;if(Je<0)return void Ot(null);const an=de.getIsDynamic()?bi(Je):Je,Ft=je.getStreamForTime(an);if(Ft===null)return void Ot(null);const bn=Ft.getThumbnailController();if(bn)return bn.provide(an,Ot);Ot(null)},refreshManifest:function(Je){if(!re)throw F;if(!ri())return Je(null,P);let Ot=this;if(typeof Je=="function"){const an=function(Ft){Q.off(x.default.INTERNAL_MANIFEST_LOADED,an,Ot),Ft.error?Je(null,Ft.error):Je(Ft.manifest)};Q.on(x.default.INTERNAL_MANIFEST_LOADED,an,Ot)}je.refreshManifest()},registerCustomCapabilitiesFilter:function(Je){nt.registerCustomCapabilitiesFilter(Je)},registerLicenseRequestFilter:function(Je){nt.registerLicenseRequestFilter(Je)},registerLicenseResponseFilter:function(Je){nt.registerLicenseResponseFilter(Je)},removeABRCustomRule:function(Je){nt.removeAbrCustomRule(Je)},removeAllABRCustomRule:function(){nt.removeAllAbrCustomRule()},removeRequestInterceptor:function(Je){nt.removeRequestInterceptor(Je)},removeResponseInterceptor:function(Je){nt.removeResponseInterceptor(Je)},removeUTCTimingSource:function(Je,Ot){nt.removeUTCTimingSource(Je,Ot)},reset:_n,resetCustomInitialTrackSelectionFunction:function(){nt.resetCustomInitialTrackSelectionFunction(null)},resetSettings:function(){ne.reset()},restoreDefaultUTCTimingSources:gn,retrieveManifest:function(Je,Ot){let an=hn(),Ft=this;const bn=function(Fn){Fn.error?Ot(null,Fn.error):Ot(Fn.manifest),Q.off(x.default.INTERNAL_MANIFEST_LOADED,bn,Ft),an.reset()};Q.on(x.default.INTERNAL_MANIFEST_LOADED,bn,Ft),Cn.initialize(Je),an.load(Je)},seek:function(Je){if(!Se)throw C;if((0,on.checkParameterType)(Je,"number"),isNaN(Je))throw j.default.BAD_ARGUMENT_ERROR;Je<0&&(Je=0);let Ot=de.getIsDynamic()?bi(Je):Je;const an=Kt();!de.getIsDynamic()&&an.duration&&(Ot=Math.min(an.duration,Ot)),de.seek(Ot,!1,!1,!0)},seekToOriginalLive:function(){Se&&Ki()&&de.seekToOriginalLive()},seekToPresentationTime:function(Je){if(!Se)throw C;if((0,on.checkParameterType)(Je,"number"),isNaN(Je))throw j.default.BAD_ARGUMENT_ERROR;Je<0&&(Je=0);const Ot=Kt();if(!de.getIsDynamic()&&Ot.duration&&(Je=Math.min(Ot.duration,Je)),de.getIsDynamic()){const an=je&&je.hasVideoTrack()?j.default.VIDEO:j.default.AUDIO;let Ft=mt.getCurrentDVRInfo(an);if(!Ft)return;(Je=Nt(Je,Ft))<Ft.range.start&&(Je=Ft.range.start)}de.seek(Je,!1,!1,!0)},setAutoPlay:en,setConfig:function(Je){Je&&(Je.capabilities&&(me=Je.capabilities),Je.capabilitiesFilter&&(Ue=Je.capabilitiesFilter),Je.streamController&&(je=Je.streamController),Je.textController&&(Ee=Je.textController),Je.gapController&&(ye=Je.gapController),Je.throughputController&&(Le=Je.throughputController),Je.playbackController&&(de=Je.playbackController),Je.serviceDescriptionController&&(we=Je.serviceDescriptionController),Je.contentSteeringController&&(qe=Je.contentSteeringController),Je.clientDataReportingController&&(gi=Je.clientDataReportingController),Je.catchupController&&(tt=Je.catchupController),Je.mediaPlayerModel&&(Ve=Je.mediaPlayerModel),Je.customParametersModel&&(nt=Je.customParametersModel),Je.abrController&&(Ce=Je.abrController),Je.schemeLoaderFactory&&(Ye=Je.schemeLoaderFactory),Je.mediaController&&(ie=Je.mediaController),Je.settings&&(ne=Je.settings),Je.dashMetrics&&(mt=Je.dashMetrics))},setCurrentTrack:function(Je){let Ot=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!ve)throw D;!le||le.areKeyIdsUsable(Je.normalizedKeyIds)?ie.setTrack(Je,{noSettingsSave:Ot}):X.error(`Can not switch to track with index ${Je.index} because key is not usable`)},setCustomInitialTrackSelectionFunction:function(Je){nt.setCustomInitialTrackSelectionFunction(Je)},setInitialMediaSettingsFor:function(Je,Ot){if(!re)throw F;let an=function(Ft){const bn=ne.get().streaming.defaultSchemeIdUri;let Fn={};function ci(_i,ui,Nr){let Is={};if(ui){if(ui instanceof Array)throw"Array type not supported for settings!";return ui instanceof Object?(Is.schemeIdUri=ui.schemeIdUri?ui.schemeIdUri:"",Is.value=ui.value?ui.value:""):(Is.schemeIdUri=Nr,Is.value=ui,X.warn("No schemeIdUri provided for "+_i+', using default "'+Nr+'"')),Is}return null}return Ft.id!==void 0&&(Fn.id=Ft.id),Ft.lang!==void 0&&(Fn.lang=Ft.lang),isNaN(Ft.index)||(Fn.index=Ft.index),Ft.viewpoint!==void 0&&(Fn.viewpoint=ci("viewpoint",Ft.viewpoint,bn.viewpoint)),Ft.audioChannelConfiguration!==void 0&&(Fn.audioChannelConfiguration=ci("audioChannelConfiguration",Ft.audioChannelConfiguration,bn.audioChannelConfiguration)),Ft.role!==void 0&&(Fn.role=ci("role",Ft.role,bn.role)),Ft.accessibility!==void 0&&(Fn.accessibility=ci("accessibility",Ft.accessibility,bn.accessibility)),Fn}(Ot);ie.setInitialSettings(Je,an)},setMute:function(Je){(0,on.checkParameterType)(Je,"boolean"),Kt().muted=Je},setPlaybackRate:function(Je){Kt().playbackRate=Je},setProtectionData:function(Je){$=Je,je&&je.setProtectionData($)},setRepresentationForTypeById:function(Je,Ot){let an=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(Je!==j.default.IMAGE&&Je!==j.default.VIDEO&&Je!==j.default.AUDIO)return;if(!ve)throw D;const Ft=zn();if(Ft)if(Je===j.default.IMAGE){const bn=Ft.getThumbnailController();bn&&bn.setTrackById(Ot)}else{const bn=Ft.getRepresentationForTypeById(Je,Ot);bn&&Ce.setPlaybackQuality(Je,je.getActiveStreamInfo(),bn,{forceReplace:an})}},setRepresentationForTypeByIndex:function(Je,Ot){let an=arguments.length>2&&arguments[2]!==void 0&&arguments[2];if(Je!==j.default.IMAGE&&Je!==j.default.VIDEO&&Je!==j.default.AUDIO)return;if(!ve)throw D;const Ft=zn();if(Ft)if(Je===j.default.IMAGE){const bn=Ft.getThumbnailController();bn&&bn.setTrackByIndex(Ot)}else{const bn=Ft.getRepresentationForTypeByIndex(Je,Ot);bn&&Ce.setPlaybackQuality(Je,je.getActiveStreamInfo(),bn,{forceReplace:an})}},setTextTrack:function(Je){if(!Se)throw C;const Ot=je.getActiveStreamInfo();Ot&&Ee&&Ee.setTextTrack(Ot.id,Je)},setVolume:function(Je){if(typeof Je!="number"||isNaN(Je)||Je<0||Je>1)throw j.default.BAD_ARGUMENT_ERROR;Kt().volume=Je},setXHRWithCredentialsForType:function(Je,Ot){nt.setXHRWithCredentialsForType(Je,Ot)},time:rn,timeAsUTC:function(){if(!Se)throw C;if(!de.getIsDynamic()||rn()<0)return NaN;const Je=je&&je.hasVideoTrack()?j.default.VIDEO:j.default.AUDIO;let Ot,an,Ft=mt.getCurrentDVRInfo(Je);return Ft?(Ot=Ft.manifestInfo.availableFrom.getTime()/1e3,an=Ot+rn(),an):0},timeInDvrWindow:function(){if(!Se)throw C;if(!de.getIsDynamic())return rn();let Je=Kt().currentTime;const Ot=je&&je.hasVideoTrack()?j.default.VIDEO:j.default.AUDIO;let an=mt.getCurrentDVRInfo(Ot);return Je=an===null||Je===0?0:Math.max(0,Je-an.range.start),Je},trigger:function(Je,Ot,an){Q.trigger(Je,Ot,an)},triggerSteeringRequest:function(){if(qe)return qe.loadSteeringData()},unregisterCustomCapabilitiesFilter:function(Je){nt.unregisterCustomCapabilitiesFilter(Je)},unregisterLicenseRequestFilter:function(Je){nt.unregisterLicenseRequestFilter(Je)},unregisterLicenseResponseFilter:function(Je){nt.unregisterLicenseResponseFilter(Je)},updateSettings:function(Je){ne.update(Je)},updateSource:function(Je){q=Je,je.load(q)}},X=B.getLogger(oe),re=!1,Se=!1,ve=!1,ke=!0,Ie=NaN,le=null,Ge=null,$=null,ze=null,Zn=null,x.default.extend(xe.default),Ve=Jy(z).getInstance(),nt=(0,nl.default)(z).getInstance(),yn=$g(z).getInstance(),Cn=Xy(z).getInstance(),oe}lm.__dashjs_factory_name="MediaPlayer";const gp=ue.default.getClassFactory(lm);gp.events=xe.default,gp.errors=ce,ue.default.updateClassFactory(lm.__dashjs_factory_name,gp);var mp=gp},1191:function(u,t,n){n.r(t);var r=n(7252);class l extends r.default{constructor(){super(),this.AST_IN_FUTURE="astInFuture",this.BASE_URLS_UPDATED="baseUrlsUpdated",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_LOADED="bufferLoaded",this.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",this.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",this.DVB_FONT_DOWNLOAD_ADDED="dvbFontDownloadAdded",this.DVB_FONT_DOWNLOAD_COMPLETE="dvbFontDownloadComplete",this.DVB_FONT_DOWNLOAD_FAILED="dvbFontDownloadFailed",this.DYNAMIC_TO_STATIC="dynamicToStatic",this.ERROR="error",this.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",this.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",this.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",this.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",this.LOG="log",this.MANIFEST_LOADING_STARTED="manifestLoadingStarted",this.MANIFEST_LOADING_FINISHED="manifestLoadingFinished",this.MANIFEST_LOADED="manifestLoaded",this.METRICS_CHANGED="metricsChanged",this.METRIC_CHANGED="metricChanged",this.METRIC_ADDED="metricAdded",this.METRIC_UPDATED="metricUpdated",this.PERIOD_SWITCH_STARTED="periodSwitchStarted",this.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",this.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",this.QUALITY_CHANGE_RENDERED="qualityChangeRendered",this.NEW_TRACK_SELECTED="newTrackSelected",this.TRACK_CHANGE_RENDERED="trackChangeRendered",this.STREAM_INITIALIZING="streamInitializing",this.STREAM_UPDATED="streamUpdated",this.STREAM_ACTIVATED="streamActivated",this.STREAM_DEACTIVATED="streamDeactivated",this.STREAM_INITIALIZED="streamInitialized",this.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",this.TEXT_TRACKS_ADDED="allTextTracksAdded",this.TEXT_TRACK_ADDED="textTrackAdded",this.CUE_ENTER="cueEnter",this.CUE_EXIT="cueExit",this.THROUGHPUT_MEASUREMENT_STORED="throughputMeasurementStored",this.TTML_PARSED="ttmlParsed",this.TTML_TO_PARSE="ttmlToParse",this.CAPTION_RENDERED="captionRendered",this.CAPTION_CONTAINER_RESIZE="captionContainerResize",this.CAN_PLAY="canPlay",this.CAN_PLAY_THROUGH="canPlayThrough",this.PLAYBACK_ENDED="playbackEnded",this.PLAYBACK_ERROR="playbackError",this.PLAYBACK_INITIALIZED="playbackInitialized",this.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",this.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",this.PLAYBACK_LOADED_DATA="playbackLoadedData",this.PLAYBACK_PAUSED="playbackPaused",this.PLAYBACK_PLAYING="playbackPlaying",this.PLAYBACK_PROGRESS="playbackProgress",this.PLAYBACK_RATE_CHANGED="playbackRateChanged",this.PLAYBACK_SEEKED="playbackSeeked",this.PLAYBACK_SEEKING="playbackSeeking",this.PLAYBACK_STALLED="playbackStalled",this.PLAYBACK_STARTED="playbackStarted",this.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",this.PLAYBACK_VOLUME_CHANGED="playbackVolumeChanged",this.PLAYBACK_WAITING="playbackWaiting",this.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged",this.EVENT_MODE_ON_START="eventModeOnStart",this.EVENT_MODE_ON_RECEIVE="eventModeOnReceive",this.CONFORMANCE_VIOLATION="conformanceViolation",this.REPRESENTATION_SWITCH="representationSwitch",this.ADAPTATION_SET_REMOVED_NO_CAPABILITIES="adaptationSetRemovedNoCapabilities",this.CONTENT_STEERING_REQUEST_COMPLETED="contentSteeringRequestCompleted",this.INBAND_PRFT="inbandPrft",this.MANAGED_MEDIA_SOURCE_START_STREAMING="managedMediaSourceStartStreaming",this.MANAGED_MEDIA_SOURCE_END_STREAMING="managedMediaSourceEndStreaming"}}let d=new l;t.default=d},5212:function(u,t,n){n.r(t),t.default={STREAM:"stream",VIDEO:"video",AUDIO:"audio",TEXT:"text",MUXED:"muxed",IMAGE:"image",STPP:"stpp",TTML:"ttml",VTT:"vtt",WVTT:"wvtt",CONTENT_STEERING:"contentSteering",LIVE_CATCHUP_MODE_DEFAULT:"liveCatchupModeDefault",LIVE_CATCHUP_MODE_LOLP:"liveCatchupModeLoLP",MOVING_AVERAGE_SLIDING_WINDOW:"slidingWindow",MOVING_AVERAGE_EWMA:"ewma",BAD_ARGUMENT_ERROR:"Invalid Arguments",MISSING_CONFIG_ERROR:"Missing config parameter(s)",TRACK_SWITCH_MODE_ALWAYS_REPLACE:"alwaysReplace",TRACK_SWITCH_MODE_NEVER_REPLACE:"neverReplace",TRACK_SELECTION_MODE_FIRST_TRACK:"firstTrack",TRACK_SELECTION_MODE_HIGHEST_BITRATE:"highestBitrate",TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY:"highestEfficiency",TRACK_SELECTION_MODE_WIDEST_RANGE:"widestRange",CMCD_QUERY_KEY:"CMCD",CMCD_MODE_QUERY:"query",CMCD_MODE_HEADER:"header",CMCD_AVAILABLE_KEYS:["br","d","ot","tb","bl","dl","mtp","nor","nrr","su","bs","rtp","cid","pr","sf","sid","st","v"],CMCD_V2_AVAILABLE_KEYS:["msd","ltc"],CMCD_AVAILABLE_REQUESTS:["segment","mpd","xlink","steering","other"],INITIALIZE:"initialize",TEXT_SHOWING:"showing",TEXT_HIDDEN:"hidden",TEXT_DISABLED:"disabled",ACCESSIBILITY_CEA608_SCHEME:"urn:scte:dash:cc:cea-608:2015",CC1:"CC1",CC3:"CC3",UTF8:"utf-8",SCHEME_ID_URI:"schemeIdUri",START_TIME:"starttime",SERVICE_DESCRIPTION_DVB_LL_SCHEME:"urn:dvb:dash:lowlatency:scope:2019",SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME:"urn:dvb:dash:lowlatency:critical:2019",CTA_5004_2023_SCHEME:"urn:mpeg:dash:cta-5004:2023",THUMBNAILS_SCHEME_ID_URIS:["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"],FONT_DOWNLOAD_DVB_SCHEME:"urn:dvb:dash:fontdownload:2014",COLOUR_PRIMARIES_SCHEME_ID_URI:"urn:mpeg:mpegB:cicp:ColourPrimaries",URL_QUERY_INFO_SCHEME:"urn:mpeg:dash:urlparam:2014",EXT_URL_QUERY_INFO_SCHEME:"urn:mpeg:dash:urlparam:2016",MATRIX_COEFFICIENTS_SCHEME_ID_URI:"urn:mpeg:mpegB:cicp:MatrixCoefficients",TRANSFER_CHARACTERISTICS_SCHEME_ID_URI:"urn:mpeg:mpegB:cicp:TransferCharacteristics",HDR_METADATA_FORMAT_SCHEME_ID_URI:"urn:dvb:dash:hdr-dmi",HDR_METADATA_FORMAT_VALUES:{ST2094_10:"ST2094-10",SL_HDR2:"SL-HDR2",ST2094_40:"ST2094-40"},MEDIA_CAPABILITIES_API:{COLORGAMUT:{SRGB:"srgb",P3:"p3",REC2020:"rec2020"},TRANSFERFUNCTION:{SRGB:"srgb",PQ:"pq",HLG:"hlg"},HDR_METADATATYPE:{SMPTE_ST_2094_10:"smpteSt2094-10",SLHDR2:"slhdr2",SMPTE_ST_2094_40:"smpteSt2094-40"}},XML:"XML",ARRAY_BUFFER:"ArrayBuffer",DVB_REPORTING_URL:"dvb:reportingUrl",DVB_PROBABILITY:"dvb:probability",OFF_MIMETYPE:"application/font-sfnt",WOFF_MIMETYPE:"application/font-woff",VIDEO_ELEMENT_READY_STATES:{HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},FILE_LOADER_TYPES:{FETCH:"fetch_loader",XHR:"xhr_loader"},THROUGHPUT_TYPES:{LATENCY:"throughput_type_latency",BANDWIDTH:"throughput_type_bandwidth"},THROUGHPUT_CALCULATION_MODES:{EWMA:"throughputCalculationModeEwma",ZLEMA:"throughputCalculationModeZlema",ARITHMETIC_MEAN:"throughputCalculationModeArithmeticMean",BYTE_SIZE_WEIGHTED_ARITHMETIC_MEAN:"throughputCalculationModeByteSizeWeightedArithmeticMean",DATE_WEIGHTED_ARITHMETIC_MEAN:"throughputCalculationModeDateWeightedArithmeticMean",HARMONIC_MEAN:"throughputCalculationModeHarmonicMean",BYTE_SIZE_WEIGHTED_HARMONIC_MEAN:"throughputCalculationModeByteSizeWeightedHarmonicMean",DATE_WEIGHTED_HARMONIC_MEAN:"throughputCalculationModeDateWeightedHarmonicMean"},LOW_LATENCY_DOWNLOAD_TIME_CALCULATION_MODE:{MOOF_PARSING:"lowLatencyDownloadTimeCalculationModeMoofParsing",DOWNLOADED_DATA:"lowLatencyDownloadTimeCalculationModeDownloadedData",AAST:"lowLatencyDownloadTimeCalculationModeAast"},RULES_TYPES:{QUALITY_SWITCH_RULES:"qualitySwitchRules",ABANDON_FRAGMENT_RULES:"abandonFragmentRules"},QUALITY_SWITCH_RULES:{BOLA_RULE:"BolaRule",THROUGHPUT_RULE:"ThroughputRule",INSUFFICIENT_BUFFER_RULE:"InsufficientBufferRule",SWITCH_HISTORY_RULE:"SwitchHistoryRule",DROPPED_FRAMES_RULE:"DroppedFramesRule",LEARN_TO_ADAPT_RULE:"L2ARule",LOL_PLUS_RULE:"LoLPRule"},ABANDON_FRAGMENT_RULES:{ABANDON_REQUEST_RULE:"AbandonRequestsRule"},ID3_SCHEME_ID_URI:"https://aomedia.org/emsg/ID3",COMMON_ACCESS_TOKEN_HEADER:"common-access-token",DASH_ROLE_SCHEME_ID:"urn:mpeg:dash:role:2011",CODEC_FAMILIES:{MP3:"mp3",AAC:"aac",AC3:"ac3",EC3:"ec3",DTSX:"dtsx",DTSC:"dtsc",AVC:"avc",HEVC:"hevc"}}},2861:function(u,t,n){n.r(t),t.default={CLEARKEY_KEYSTEM_STRING:"org.w3.clearkey",WIDEVINE_KEYSTEM_STRING:"com.widevine.alpha",PLAYREADY_KEYSTEM_STRING:"com.microsoft.playready",PLAYREADY_RECOMMENDATION_KEYSTEM_STRING:"com.microsoft.playready.recommendation",WIDEVINE_UUID:"edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",PLAYREADY_UUID:"9a04f079-9840-4286-ab92-e65be0885f95",CLEARKEY_UUID:"e2719d58-a985-b3c9-781a-b030af78d30e",W3C_CLEARKEY_UUID:"1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",INITIALIZATION_DATA_TYPE_CENC:"cenc",INITIALIZATION_DATA_TYPE_KEYIDS:"keyids",INITIALIZATION_DATA_TYPE_WEBM:"webm",ENCRYPTION_SCHEME_CENC:"cenc",ENCRYPTION_SCHEME_CBCS:"cbcs",MEDIA_KEY_MESSAGE_TYPES:{LICENSE_REQUEST:"license-request",LICENSE_RENEWAL:"license-renewal",LICENSE_RELEASE:"license-release",INDIVIDUALIZATION_REQUEST:"individualization-request"},ROBUSTNESS_STRINGS:{WIDEVINE:{SW_SECURE_CRYPTO:"SW_SECURE_CRYPTO",SW_SECURE_DECODE:"SW_SECURE_DECODE",HW_SECURE_CRYPTO:"HW_SECURE_CRYPTO",HW_SECURE_DECODE:"HW_SECURE_DECODE",HW_SECURE_ALL:"HW_SECURE_ALL"}},MEDIA_KEY_STATUSES:{USABLE:"usable",EXPIRED:"expired",RELEASED:"released",OUTPUT_RESTRICTED:"output-restricted",OUTPUT_DOWNSCALED:"output-downscaled",STATUS_PENDING:"status-pending",INTERNAL_ERROR:"internal-error"}}},4469:function(u,t,n){n.r(t),n.d(t,{default:function(){return ae}});class r{constructor(){this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null}}r.SSL_CONNECTION_FAILED_PREFIX="SSL",r.DNS_RESOLUTION_FAILED="C00",r.HOST_UNREACHABLE="C01",r.CONNECTION_REFUSED="C02",r.CONNECTION_ERROR="C03",r.CORRUPT_MEDIA_ISOBMFF="M00",r.CORRUPT_MEDIA_OTHER="M01",r.BASE_URL_CHANGED="F00",r.BECAME_REPORTER="S00";var l=r,d=n(913),f=n(138);function p(_e){let Ae,yt;const zt=(_e=_e||{}).eventBus,vt=_e.dashMetrics,Lt=_e.metricsConstants,bt=_e.events;function Mt(Vn){let Sn=new l;if(yt){for(const ni in Vn)Vn.hasOwnProperty(ni)&&(Sn[ni]=Vn[ni]);Sn.mpdurl||(Sn.mpdurl=yt.originalUrl||yt.url),Sn.terror||(Sn.terror=new Date),vt.addDVBErrors(Sn)}}function kt(Vn){Vn.error||(yt=Vn.manifest)}function Bt(Vn){Mt({errorcode:l.BASE_URL_CHANGED,servicelocation:Vn.entry})}function sn(){Mt({errorcode:l.BECAME_REPORTER})}function ti(Vn){var Sn;Vn.metric===Lt.HTTP_REQUEST&&((Sn=Vn.value).responsecode===0||Sn.responsecode==null||Sn.responsecode>=400||Sn.responsecode<100||Sn.responsecode>=600)&&Mt({errorcode:Sn.responsecode||l.CONNECTION_ERROR,url:Sn.url,terror:Sn.tresponse,servicelocation:Sn._serviceLocation})}function On(Vn){let Sn;switch(Vn.error?Vn.error.code:0){case MediaError.MEDIA_ERR_NETWORK:Sn=l.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:Sn=l.CORRUPT_MEDIA_OTHER;break;default:return}Mt({errorcode:Sn})}return Ae={initialize:function(){zt.on(bt.MANIFEST_UPDATED,kt,Ae),zt.on(bt.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,Bt,Ae),zt.on(bt.METRIC_ADDED,ti,Ae),zt.on(bt.METRIC_UPDATED,ti,Ae),zt.on(bt.PLAYBACK_ERROR,On,Ae),zt.on(d.default.BECAME_REPORTING_PLAYER,sn,Ae)},reset:function(){zt.off(bt.MANIFEST_UPDATED,kt,Ae),zt.off(bt.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,Bt,Ae),zt.off(bt.METRIC_ADDED,ti,Ae),zt.off(bt.METRIC_UPDATED,ti,Ae),zt.off(bt.PLAYBACK_ERROR,On,Ae),zt.off(d.default.BECAME_REPORTING_PLAYER,sn,Ae)}},Ae}p.__dashjs_factory_name="DVBErrorsTranslator";var m=f.default.getSingletonFactory(p),y=n(7377);function b(_e){_e=_e||{};let Ae,yt,zt=!1,vt=this.context,Lt=_e.mediaElement;return Ae={initialize:function(bt){bt&&bt.length&&(bt.forEach(Mt=>{let kt=Mt.starttime,Bt=kt+Mt.duration;yt.add(kt,Bt)}),zt=!!bt[0]._useWallClockTime)},reset:function(){yt.clear()},isEnabled:function(){let bt,Mt=yt.length;if(!Mt)return!0;bt=zt?new Date().getTime()/1e3:Lt.currentTime;for(let kt=0;kt<Mt;kt+=1){let Bt=yt.start(kt),sn=yt.end(kt);if(Bt<=bt&&bt<sn)return!0}return!1}},yt=(0,y.default)(vt).create(),Ae}b.__dashjs_factory_name="RangeController";var _=f.default.getClassFactory(b);function A(){return{serialise:function _e(Ae){let yt,zt,vt=[],Lt=[];for(yt in Ae)if(Ae.hasOwnProperty(yt)&&yt.indexOf("_")!==0){if(zt=Ae[yt],zt==null&&(zt=""),Array.isArray(zt)){if(!zt.length)continue;Lt=[],zt.forEach(function(bt){let Mt=Object.prototype.toString.call(bt).slice(8,-1)!=="Object";Lt.push(Mt?bt:_e(bt))}),zt=Lt.map(encodeURIComponent).join(",")}else typeof zt=="string"?zt=encodeURIComponent(zt):zt instanceof Date?zt=zt.toISOString():typeof zt=="number"&&(zt=Math.round(zt));vt.push(yt+"="+zt)}return vt.join("&")}}}A.__dashjs_factory_name="MetricSerialiser";var w=f.default.getSingletonFactory(A);function T(){let _e,Ae,yt,zt=window.crypto||window.msCrypto,vt=Uint32Array,Lt=Math.pow(2,8*vt.BYTES_PER_ELEMENT)-1;function bt(){zt&&(_e||(_e=new vt(10)),zt.getRandomValues(_e),Ae=0)}return yt={random:function(Mt,kt){let Bt;return Mt||(Mt=0),kt||(kt=1),zt?(Ae===_e.length&&bt(),Bt=_e[Ae]/Lt,Ae+=1):Bt=Math.random(),Bt*(kt-Mt)+Mt}},bt(),yt}T.__dashjs_factory_name="RNG";var k=f.default.getSingletonFactory(T),U=n(1926);function Y(_e){let Ae;_e=_e||{};let yt,zt,vt,Lt,bt,Mt,kt,Bt=this.context,sn=[];const ti=_e.metricsConstants;function On(){Lt=!1,bt=!1,Mt=null,kt=null}return Ae={report:function(Vn,Sn){Array.isArray(Sn)||(Sn=[Sn]),bt&&kt.isEnabled()&&Sn.forEach(function(ni){let dr=yt.serialise(ni);Vn!==ti.DVB_ERRORS&&(dr=`metricname=${Vn}&${dr}`),dr=`${Mt}?${dr}`,function(_r,bs,Zr){let Zi=new XMLHttpRequest;Zi.withCredentials=zt.getXHRWithCredentialsForType(ti.HTTP_REQUEST_DVB_REPORTING_TYPE);const dn=function(){let Mn=sn.indexOf(Zi);Mn!==-1&&(sn.splice(Mn,1),!(Zi.status>=200&&Zi.status<300)&&Zr&&Zr())};sn.push(Zi);try{Zi.open("GET",_r),Zi.onloadend=dn,Zi.onerror=dn,Zi.send()}catch{Zi.onerror()}}(dr,0,function(){bt=!1})})},initialize:function(Vn,Sn){let ni;if(kt=Sn,Mt=Vn.dvbReportingUrl,!Mt)throw new Error("required parameter missing (dvb:reportingUrl)");Lt||(ni=Vn.dvbProbability,ni&&(ni===1e3||ni/1e3>=vt.random())&&(bt=!0),Lt=!0)},reset:function(){On()}},yt=w(Bt).getInstance(),vt=k(Bt).getInstance(),zt=(0,U.default)(Bt).getInstance(),On(),Ae}Y.__dashjs_factory_name="DVBReporting";var se=f.default.getClassFactory(Y);function te(_e){_e=_e||{};const Ae={"urn:dvb:dash:reporting:2014":se},yt=this.context;let zt;const vt=_e.debug?_e.debug.getLogger(zt):{},Lt=_e.metricsConstants,bt=_e.mediaPlayerModel||{};return zt={create:function(Mt,kt){let Bt;try{Bt=Ae[Mt.schemeIdUri](yt).create({metricsConstants:Lt,mediaPlayerModel:bt}),Bt.initialize(Mt,kt)}catch(sn){Bt=null,vt.error(`ReportingFactory: could not create Reporting with schemeIdUri ${Mt.schemeIdUri} (${sn.message})`)}return Bt},register:function(Mt,kt){Ae[Mt]=kt},unregister:function(Mt){delete Ae[Mt]}},zt}te.__dashjs_factory_name="ReportingFactory";var Re=f.default.getSingletonFactory(te);function Be(_e){let Ae,yt=[];const zt=Re(this.context).getInstance(_e);return Ae={initialize:function(vt,Lt){vt.some(bt=>{let Mt=zt.create(bt,Lt);if(Mt)return yt.push(Mt),!0})},reset:function(){yt.forEach(vt=>vt.reset()),yt=[]},report:function(vt,Lt){yt.forEach(bt=>bt.report(vt,Lt))}},Ae}Be.__dashjs_factory_name="ReportingController";var j=f.default.getClassFactory(Be);function M(){return{reconstructFullMetricName:function(_e,Ae,yt){let zt=_e;return Ae&&(zt+="("+Ae,yt&&yt.length&&(zt+=","+yt),zt+=")"),zt},validateN:function(_e){if(!_e)throw new Error("missing n");if(isNaN(_e))throw new Error("n is NaN");if(_e<0)throw new Error("n must be positive");return _e}}}M.__dashjs_factory_name="HandlerHelpers";var Z=f.default.getSingletonFactory(M);function K(_e){let Ae,yt,zt,vt,Lt,bt;_e=_e||{};let Mt=this.context,kt=Z(Mt).getInstance(),Bt=[];const sn=_e.metricsConstants;function ti(){let On=function(){try{return Object.keys(Bt).map(Vn=>Bt[Vn]).reduce((Vn,Sn)=>Vn.level<Sn.level?Vn:Sn)}catch{return}}();On&&bt!==On.t&&(bt=On.t,yt.report(vt,On))}return Ae={initialize:function(On,Vn,Sn){Vn&&(zt=kt.validateN(Sn),yt=Vn,vt=kt.reconstructFullMetricName(On,Sn),Lt=setInterval(ti,zt))},reset:function(){clearInterval(Lt),Lt=null,zt=0,yt=null,bt=null},handleNewMetric:function(On,Vn,Sn){On===sn.BUFFER_LEVEL&&(Bt[Sn]=Vn)}},Ae}K.__dashjs_factory_name="BufferLevelHandler";var x=f.default.getClassFactory(K),ue=f.default.getClassFactory(function(_e){let Ae,yt,zt=(_e=_e||{}).eventBus;const vt=_e.metricsConstants;function Lt(){zt.off(d.default.METRICS_INITIALISATION_COMPLETE,Lt,this),zt.trigger(d.default.BECAME_REPORTING_PLAYER)}return Ae={initialize:function(bt,Mt){Mt&&(yt=Mt,zt.on(d.default.METRICS_INITIALISATION_COMPLETE,Lt,this))},reset:function(){yt=null},handleNewMetric:function(bt,Mt){bt===vt.DVB_ERRORS&&yt&&yt.report(bt,Mt)}},Ae});function $e(_e){let Ae,yt,zt,vt,Lt,bt;_e=_e||{};let Mt=[],kt=Z(this.context).getInstance();const Bt=_e.metricsConstants;function sn(){var ti=Mt;ti.length&&yt&&yt.report(Lt,ti),Mt=[]}return Ae={initialize:function(ti,On,Vn,Sn){On&&(zt=kt.validateN(Vn),yt=On,Sn&&Sn.length&&(vt=Sn),Lt=kt.reconstructFullMetricName(ti,Vn,Sn),bt=setInterval(sn,zt))},reset:function(){clearInterval(bt),bt=null,zt=null,vt=null,Mt=[],yt=null},handleNewMetric:function(ti,On){ti===Bt.HTTP_REQUEST&&(vt&&vt!==On.type||Mt.push(On))}},Ae}$e.__dashjs_factory_name="HttpListHandler";var xe=f.default.getClassFactory($e);function lt(){let _e,Ae,yt;return _e={initialize:function(zt,vt){Ae=zt,yt=vt},reset:function(){yt=null,Ae=void 0},handleNewMetric:function(zt,vt){zt===Ae&&yt&&yt.report(Ae,vt)}},_e}lt.__dashjs_factory_name="GenericMetricHandler";var et=f.default.getClassFactory(lt);function Xe(_e){let Ae;const yt=(_e=_e||{}).debug?_e.debug.getLogger(Ae):{};let zt=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/;const vt=this.context;let Lt={BufferLevel:x,DVBErrors:ue,HttpList:xe,PlayList:et,RepSwitchList:et,TcpList:et};return Ae={create:function(bt,Mt){var kt,Bt=bt.match(zt);if(Bt){try{(kt=Lt[Bt[1]](vt).create({eventBus:_e.eventBus,metricsConstants:_e.metricsConstants})).initialize(Bt[1],Mt,Bt[3],Bt[5])}catch(sn){kt=null,yt.error(`MetricsHandlerFactory: Could not create handler for type ${Bt[1]} with args ${Bt[3]}, ${Bt[5]} (${sn.message})`)}return kt}},register:function(bt,Mt){Lt[bt]=Mt},unregister:function(bt){delete Lt[bt]}},Ae}Xe.__dashjs_factory_name="MetricsHandlerFactory";var ut=f.default.getSingletonFactory(Xe);function Dt(_e){_e=_e||{};let Ae,yt=[];const zt=this.context,vt=_e.eventBus,Lt=_e.events;let bt=ut(zt).getInstance({debug:_e.debug,eventBus:_e.eventBus,metricsConstants:_e.metricsConstants});function Mt(kt){yt.forEach(Bt=>{Bt.handleNewMetric(kt.metric,kt.value,kt.mediaType)})}return Ae={initialize:function(kt,Bt){kt.split(",").forEach((sn,ti,On)=>{let Vn;if(sn.indexOf("(")!==-1&&sn.indexOf(")")===-1){let Sn=On[ti+1];Sn&&Sn.indexOf("(")===-1&&Sn.indexOf(")")!==-1&&(sn+=","+Sn,delete On[ti+1])}Vn=bt.create(sn,Bt),Vn&&yt.push(Vn)}),vt.on(Lt.METRIC_ADDED,Mt,Ae),vt.on(Lt.METRIC_UPDATED,Mt,Ae)},reset:function(){vt.off(Lt.METRIC_ADDED,Mt,Ae),vt.off(Lt.METRIC_UPDATED,Mt,Ae),yt.forEach(kt=>kt.reset()),yt=[]}},Ae}Dt.__dashjs_factory_name="MetricsHandlersController";var dt=f.default.getClassFactory(Dt);function Et(_e){let Ae,yt,zt,vt;_e=_e||{};let Lt=this.context;function bt(){Ae&&Ae.reset(),yt&&yt.reset(),zt&&zt.reset()}return vt={initialize:function(Mt){try{zt=_(Lt).create({mediaElement:_e.mediaElement}),zt.initialize(Mt.Range),yt=j(Lt).create({debug:_e.debug,metricsConstants:_e.metricsConstants,mediaPlayerModel:_e.mediaPlayerModel}),yt.initialize(Mt.Reporting,zt),Ae=dt(Lt).create({debug:_e.debug,eventBus:_e.eventBus,metricsConstants:_e.metricsConstants,events:_e.events}),Ae.initialize(Mt.metrics,yt)}catch(kt){throw bt(),kt}},reset:bt},vt}Et.__dashjs_factory_name="MetricsController";var Rt=f.default.getClassFactory(Et),mn=class{constructor(){this.metrics="",this.Range=[],this.Reporting=[]}},Tn=class{constructor(){this.starttime=0,this.duration=1/0,this._useWallClockTime=!1}},Qe=class{constructor(){this.schemeIdUri="",this.value="",this.dvbReportingUrl="",this.dvbProbability=1e3}};function Ze(_e){let Ae,yt=(_e=_e||{}).adapter;const zt=_e.constants;return Ae={getMetrics:function(vt){let Lt=[];return vt&&vt.Metrics&&vt.Metrics.forEach(bt=>{var Mt=new mn,kt=yt.getIsDynamic(vt);bt.hasOwnProperty("metrics")&&(Mt.metrics=bt.metrics,bt.Range&&bt.Range.forEach(Bt=>{var sn=new Tn;sn.starttime=function(ti,On,Vn){let Sn,ni,dr=0;return On?dr=yt.getAvailabilityStartTime(ti)/1e3:(Sn=yt.getRegularPeriods(ti),Sn.length&&(dr=Sn[0].start)),ni=dr,Vn&&Vn.hasOwnProperty(zt.START_TIME)&&(ni+=Vn.starttime),ni}(vt,kt,Bt),Bt.hasOwnProperty("duration")?sn.duration=Bt.duration:sn.duration=yt.getDuration(vt),sn._useWallClockTime=kt,Mt.Range.push(sn)}),bt.Reporting&&(bt.Reporting.forEach(Bt=>{var sn=new Qe;Bt.hasOwnProperty(zt.SCHEME_ID_URI)&&(sn.schemeIdUri=Bt.schemeIdUri,Bt.hasOwnProperty("value")&&(sn.value=Bt.value),Bt.hasOwnProperty(zt.DVB_REPORTING_URL)&&(sn.dvbReportingUrl=Bt[zt.DVB_REPORTING_URL]),Bt.hasOwnProperty(zt.DVB_PROBABILITY)&&(sn.dvbProbability=Bt[zt.DVB_PROBABILITY]),Mt.Reporting.push(sn))}),Lt.push(Mt)))}),Lt}},Ae}Ze.__dashjs_factory_name="ManifestParsing";var at=f.default.getSingletonFactory(Ze);function nn(_e){let Ae;_e=_e||{};let yt={},zt=this.context,vt=_e.eventBus;const Lt=_e.events;function bt(kt){if(kt.error)return;let Bt=Object.keys(yt);at(zt).getInstance({adapter:_e.adapter,constants:_e.constants}).getMetrics(kt.manifest).forEach(sn=>{const ti=JSON.stringify(sn);if(yt.hasOwnProperty(ti))Bt.splice(ti,1);else try{let On=Rt(zt).create(_e);On.initialize(sn),yt[ti]=On}catch{}}),Bt.forEach(sn=>{yt[sn].reset(),delete yt[sn]}),vt.trigger(d.default.METRICS_INITIALISATION_COMPLETE)}function Mt(){Object.keys(yt).forEach(kt=>{yt[kt].reset()}),yt={}}return Ae={reset:function(){vt.off(Lt.MANIFEST_UPDATED,bt,Ae),vt.off(Lt.STREAM_TEARDOWN_COMPLETE,Mt,Ae)}},vt.on(Lt.MANIFEST_UPDATED,bt,Ae),vt.on(Lt.STREAM_TEARDOWN_COMPLETE,Mt,Ae),Ae}nn.__dashjs_factory_name="MetricsCollectionController";var ce=f.default.getClassFactory(nn);function ge(){let _e,Ae,yt=this.context;return _e={createMetricsReporting:function(zt){return Ae=m(yt).getInstance({eventBus:zt.eventBus,dashMetrics:zt.dashMetrics,metricsConstants:zt.metricsConstants,events:zt.events}),Ae.initialize(),ce(yt).create(zt)},getReportingFactory:function(){return Re(yt).getInstance()},getMetricsHandlerFactory:function(){return ut(yt).getInstance()}},_e}ge.__dashjs_factory_name="MetricsReporting";const G=dashjs.FactoryMaker.getClassFactory(ge);G.events=d.default,dashjs.FactoryMaker.updateClassFactory(ge.__dashjs_factory_name,G);var ae=G},913:function(u,t,n){n.r(t);var r=n(7252);class l extends r.default{constructor(){super(),this.METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",this.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer",this.CMCD_DATA_GENERATED="cmcdDataGenerated"}}let d=new l;t.default=d},1926:function(u,t,n){n.r(t);var r=n(5717),l=n(138),d=n(8261),f=n(656),p=n(5212);function m(){let y,b,_,A,w,T,k,U,Y,se;const te=this.context,Re=(0,d.default)(te).getInstance();function Be(){A=[],w=[],T=[],k=[],U=[],se=[],Y=null,b=[]}function j(x,ue){let $e=-1;x.some((xe,lt)=>{if(xe===ue)return $e=lt,!0}),$e<0||x.splice($e,1)}function M(x){let ue;for(ue=0;ue<se.length;ue++)if(se[ue].rulename===x)return ue;return-1}function Z(x,ue){K(x,ue);let $e=new r.default;$e.schemeIdUri=x,$e.value=ue,b.push($e)}function K(x,ue){(0,f.checkParameterType)(x,"string"),(0,f.checkParameterType)(ue,"string"),b.forEach(function($e,xe){$e.schemeIdUri===x&&$e.value===ue&&b.splice(xe,1)})}return y={addAbrCustomRule:function(x,ue,$e){if(typeof x!="string"||x!==p.default.RULES_TYPES.ABANDON_FRAGMENT_RULES&&x!==p.default.RULES_TYPES.QUALITY_SWITCH_RULES||typeof ue!="string")throw p.default.BAD_ARGUMENT_ERROR;let xe=M(ue);xe===-1?se.push({type:x,rulename:ue,rule:$e}):(se[xe].type=x,se[xe].rule=$e)},addRequestInterceptor:function(x){A.push(x)},addResponseInterceptor:function(x){w.push(x)},addUTCTimingSource:Z,clearDefaultUTCTimingSources:function(){b=[]},getAbrCustomRules:function(){return se},getCustomCapabilitiesFilters:function(){return U},getCustomInitialTrackSelectionFunction:function(){return Y},getLicenseRequestFilters:function(){return T},getLicenseResponseFilters:function(){return k},getRequestInterceptors:function(){return A},getResponseInterceptors:function(){return w},getUTCTimingSources:function(){return b},getXHRWithCredentialsForType:function(x){const ue=_[x];return ue===void 0?_.default:ue},registerCustomCapabilitiesFilter:function(x){U.push(x)},registerLicenseRequestFilter:function(x){T.push(x)},registerLicenseResponseFilter:function(x){k.push(x)},removeAbrCustomRule:function(x){if(x){let ue=M(x);ue!==-1&&se.splice(ue,1)}else se=[]},removeAllAbrCustomRule:function(){se=[]},removeRequestInterceptor:function(x){j(A,x)},removeResponseInterceptor:function(x){j(w,x)},removeUTCTimingSource:K,reset:function(){Be()},resetCustomInitialTrackSelectionFunction:function(){Y=null},restoreDefaultUTCTimingSources:function(){let x=Re.get().streaming.utcSynchronization.defaultTimingSource;Z(x.scheme,x.value)},setConfig:function(){},setCustomInitialTrackSelectionFunction:function(x){Y=x},setXHRWithCredentialsForType:function x(ue,$e){ue?_[ue]=!!$e:Object.keys(_).forEach(xe=>{x(xe,$e)})},unregisterCustomCapabilitiesFilter:function(x){j(U,x)},unregisterLicenseRequestFilter:function(x){j(T,x)},unregisterLicenseResponseFilter:function(x){j(k,x)}},_={default:!1},Be(),y}m.__dashjs_factory_name="CustomParametersModel",t.default=l.default.getSingletonFactory(m)},3888:function(u,t,n){n.r(t),n.d(t,{default:function(){return Zi}});var r=n(8854),l=n(2861);const d={prefixes:["clearkey","dashif","ck"]};class f{static findMp4ProtectionElement(Mn){let An=null;for(let on=0;on<Mn.length;++on){let Un=Mn[on];Un.schemeIdUri&&Un.schemeIdUri.toLowerCase()===r.default.MP4_PROTECTION_SCHEME&&Un.value&&(Un.value.toLowerCase()===l.default.ENCRYPTION_SCHEME_CENC||Un.value.toLowerCase()===l.default.ENCRYPTION_SCHEME_CBCS)&&(An=Un)}return An}static getPSSHData(Mn){let An=8,on=new DataView(Mn),Un=on.getUint8(An);return An+=20,Un>0&&(An+=4+16*on.getUint32(An)),An+=4,Mn.slice(An)}static getPSSHForKeySystem(Mn,An){let on=f.parsePSSHList(An);return Mn&&on.hasOwnProperty(Mn.uuid.toLowerCase())?on[Mn.uuid.toLowerCase()]:null}static parseInitDataFromContentProtection(Mn,An){return"pssh"in Mn&&Mn.pssh?(Mn.pssh.__text=Mn.pssh.__text.replace(/\r?\n|\r/g,"").replace(/\s+/g,""),An.decodeArray(Mn.pssh.__text).buffer):null}static parsePSSHList(Mn){if(Mn==null)return[];let An=new DataView(Mn.buffer||Mn),on={},Un=0;for(;;){let vn,Hn,ei,wn,Ne,Ke,ft=Un;if(Un>=An.buffer.byteLength)break;if(vn=An.getUint32(Un),Hn=Un+vn,Un+=4,An.getUint32(Un)===1886614376)if(Un+=4,ei=An.getUint8(Un),ei===0||ei===1){for(Un++,Un+=3,wn="",Ne=0;Ne<4;Ne++)Ke=An.getUint8(Un+Ne).toString(16),wn+=Ke.length===1?"0"+Ke:Ke;for(Un+=4,wn+="-",Ne=0;Ne<2;Ne++)Ke=An.getUint8(Un+Ne).toString(16),wn+=Ke.length===1?"0"+Ke:Ke;for(Un+=2,wn+="-",Ne=0;Ne<2;Ne++)Ke=An.getUint8(Un+Ne).toString(16),wn+=Ke.length===1?"0"+Ke:Ke;for(Un+=2,wn+="-",Ne=0;Ne<2;Ne++)Ke=An.getUint8(Un+Ne).toString(16),wn+=Ke.length===1?"0"+Ke:Ke;for(Un+=2,wn+="-",Ne=0;Ne<6;Ne++)Ke=An.getUint8(Un+Ne).toString(16),wn+=Ke.length===1?"0"+Ke:Ke;Un+=6,wn=wn.toLowerCase(),Un+=4,on[wn]=An.buffer.slice(ft,Hn),Un=Hn}else Un=Hn;else Un=Hn}return on}static getLicenseServerUrlFromMediaInfo(Mn,An){try{if(!Mn||Mn.length===0)return null;let on=0,Un=null;for(;on<Mn.length&&!Un;){const vn=Mn[on];if(vn&&vn.contentProtection&&vn.contentProtection.length>0){const Hn=vn.contentProtection.filter(ei=>ei.schemeIdUri&&ei.schemeIdUri===An);if(Hn&&Hn.length>0){let ei=0;for(;ei<Hn.length&&!Un;){const wn=Hn[ei];wn.laUrl&&wn.laUrl.__prefix&&d.prefixes.includes(wn.laUrl.__prefix)&&wn.laUrl.__text&&(Un=wn.laUrl.__text),ei+=1}}}on+=1}return Un}catch{return null}}static hexKidToBufferSource(Mn){const An=Mn.replace(/-/g,"");return new Uint8Array(An.match(/[\da-f]{2}/gi).map(function(on){return parseInt(on,16)})).buffer}}var p=f,m=class{constructor(dn,Mn){this.contentType=dn,this.robustness=Mn}},y=class{constructor(dn,Mn,An,on,Un,vn){this.initDataTypes=vn&&vn.length>0?vn:[l.default.INITIALIZATION_DATA_TYPE_CENC],dn&&dn.length&&(this.audioCapabilities=dn),Mn&&Mn.length&&(this.videoCapabilities=Mn),this.distinctiveIdentifier=An,this.persistentState=on,this.sessionTypes=Un}},b=n(1923),_=n(1944),A=class{constructor(dn,Mn,An,on,Un,vn,Hn,ei){this.url=dn,this.method=Mn,this.responseType=An,this.headers=on,this.withCredentials=Un,this.messageType=vn,this.sessionId=Hn,this.data=ei}},w=class{constructor(dn,Mn,An){this.url=dn,this.headers=Mn,this.data=An}},T=n(7568),k=n(7263),U=n(5212),Y=n(138);function se(dn){const Mn=(dn=dn||{}).BASE64,An=dn.cmcdModel,on=dn.constants,Un=dn.customParametersModel,vn=dn.debug,Hn=dn.eventBus,ei=dn.events,wn=dn.protectionKeyController,Ne=dn.settings;let Ke,ft,At,un,Qn,ai,vi,Xi,si,cn,Wt,Ln,Nn=dn.protectionModel,fi=[];function jn(){if(!(Hn&&Hn.hasOwnProperty("on")&&wn&&wn.hasOwnProperty("getSupportedKeySystemMetadataFromContentProtection")))throw new Error("Missing config parameter(s)")}function cr(In,ii){Wt||un?Wt&&Ni():function(Si,hr){if(un)return;var Bi;un=!0;const ms=function(sr){const Qi=[];for(let ur=0;ur<sr.length;ur++){const Ur=Ir(sr[ur]);Qi.push({ks:sr[ur].ks,configs:[Ur],protData:sr[ur].protData})}return Qi}(Si=(Bi=Si).sort((sr,Qi)=>(Ke&&Ke[sr.ks.systemString]&&Ke[sr.ks.systemString].priority>=0?Ke[sr.ks.systemString].priority:Bi.length)-(Ke&&Ke[Qi.ks.systemString]&&Ke[Qi.ks.systemString].priority>=0?Ke[Qi.ks.systemString].priority:Bi.length)));let er;Nn.requestKeySystemAccess(ms).then(sr=>(er=sr.data,function(Qi){let ur=Qi&&Qi.selectedSystemString?Qi.selectedSystemString:Qi.keySystem.systemString;return vi.info("DRM: KeySystem Access Granted for system string ("+ur+")!  Selecting key system..."),Nn.selectKeySystem(Qi)}(er))).then(sr=>{(function(Qi,ur){Wt=Qi,un=!1,Hn.trigger(ei.KEY_SYSTEM_SELECTED,{data:ur});const Ur=Ws(Wt);Ur&&Ur.serverCertificate&&Ur.serverCertificate.length>0&&Nn.setServerCertificate(Mn.decodeArray(Ur.serverCertificate).buffer),Ni()})(sr,er)}).catch(sr=>{(function(Qi,ur){Wt=null,un=!1,ur||Hn.trigger(ei.KEY_SYSTEM_SELECTED,{data:null,error:new _.default(b.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,b.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+Qi.error)})})(sr,hr)})}(In,ii)}function Ni(){let In;for(let Si=0;Si<si.length;Si++)for(In=0;In<si[Si].length;In++)if(Wt===si[Si][In].ks){ii=si[Si][In],wn.isClearKey(Wt)&&function(hr){if(hr.protData&&hr.protData.hasOwnProperty("clearkeys")&&Object.keys(hr.protData.clearkeys).length!==0){const Bi={kids:Object.keys(hr.protData.clearkeys)};hr.initData=new TextEncoder().encode(JSON.stringify(Bi))}}(ii),ii.sessionId?it(ii):ii.initData!==null&&Br(ii);break}var ii;si=[]}function Ir(In){const ii=In.protData,Si=[],hr=[],Bi=ii&&ii.initDataTypes&&ii.initDataTypes.length>0?ii.initDataTypes:[l.default.INITIALIZATION_DATA_TYPE_CENC],ms=ii&&ii.audioRobustness&&ii.audioRobustness.length>0?ii.audioRobustness:cn,er=ii&&ii.videoRobustness&&ii.videoRobustness.length>0?ii.videoRobustness:cn,sr=In.sessionType,Qi=ii&&ii.distinctiveIdentifier?ii.distinctiveIdentifier:"optional",ur=ii&&ii.persistentState?ii.persistentState:sr==="temporary"?"optional":"required";return Xi.forEach(Ur=>{Ur.type===on.AUDIO?Si.push(new m(Ur.codec,ms)):Ur.type===on.VIDEO&&hr.push(new m(Ur.codec,er))}),new y(Si,hr,Qi,ur,[sr],Bi)}function it(In){jn(),Nn.loadKeySession(In)}function Br(In){if(In&&function(Si){if(!Si)return!1;try{const hr=Nn.getSessionTokens();for(let Bi=0;Bi<hr.length;Bi++)if(hr[Bi].getKeyId()===Si)return!0;return!1}catch{return!1}}(In.keyId))return;const ii=p.getPSSHForKeySystem(Wt,In?In.initData:null);if(ii){if(Xs(ii))return;try{In.initData=ii,Nn.createKeySession(In)}catch(Si){Hn.trigger(ei.KEY_SESSION_CREATED,{data:null,error:new _.default(b.default.KEY_SESSION_CREATED_ERROR_CODE,b.default.KEY_SESSION_CREATED_ERROR_MESSAGE+Si.message)})}}else In&&In.initData?Nn.createKeySession(In):Hn.trigger(ei.KEY_SESSION_CREATED,{data:null,error:new _.default(b.default.KEY_SESSION_CREATED_ERROR_CODE,b.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+(Wt?Wt.systemString:null)+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function Ws(In){if(In){const ii=In.systemString;if(Ke)return ii in Ke?Ke[ii]:null}return null}function Xs(In){if(!In)return!1;try{const ii=Nn.getAllInitData();for(let Si=0;Si<ii.length;Si++)if(wn.initDataEquals(In,ii[Si]))return vi.debug("DRM: Ignoring initData because we have already seen it!"),!0;return!1}catch{return!1}}function Po(In){jn(),In?(Nn.setMediaElement(In),Hn.on(ei.NEED_KEY,el,ft)):In===null&&(Nn.setMediaElement(In),Hn.off(ei.NEED_KEY,el,ft))}function es(In){vi.debug("DRM: onKeyMessage");const ii=In.data;Hn.trigger(ei.KEY_MESSAGE,{data:ii});const Si=ii.messageType?ii.messageType:l.default.MEDIA_KEY_MESSAGE_TYPES.LICENSE_REQUEST,hr=ii.message,Bi=ii.sessionToken,ms=Ws(Wt),er=wn.getLicenseServerModelInstance(Wt,ms,Si),sr={sessionToken:Bi,messageType:Si};if(hr&&hr.byteLength!==0){if(!er)return vi.debug("DRM: License server request not required for this message (type = "+In.data.messageType+").  Session ID = "+Bi.getSessionId()),void Tr(sr);if(wn.isClearKey(Wt)){const Qi=wn.processClearKeyLicenseRequest(Wt,ms,hr);if(Qi&&Qi.keyPairs&&Qi.keyPairs.length>0)return vi.debug("DRM: ClearKey license request handled by application!"),Tr(sr),void Nn.updateKeySession(Bi,Qi)}(function(Qi,ur,Ur){const fo=Qi.sessionToken,Ms=Qi.messageType?Qi.messageType:l.default.MEDIA_KEY_MESSAGE_TYPES.LICENSE_REQUEST,Mo={sessionToken:fo,messageType:Ms},Qs=Wt?Wt.systemString:null;let Cr=function(jr,ys,ru,Wr,ho){let _s=null;const aa=Wr.message;if(jr&&jr.serverURL){const oa=jr.serverURL;typeof oa=="string"&&oa!==""?_s=oa:typeof oa=="object"&&oa.hasOwnProperty(ys)&&(_s=oa[ys])}else if(jr&&jr.laURL&&jr.laURL!=="")_s=jr.laURL;else if(_s=p.getLicenseServerUrlFromMediaInfo(Xi,Wt.schemeIdURI),!_s&&!wn.isClearKey(Wt)){const oa=p.getPSSHData(ru.initData);_s=Wt.getLicenseServerURLFromInitData(oa),_s||(_s=Wr.laURL)}return _s=ho.getServerURLFromMessage(_s,aa,ys),_s}(Ur,Ms,fo,Qi,ur);if(!Cr)return void Tr(Mo,new _.default(b.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,b.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE));const Ra={};let Zu=!1;Ur&&Li(Ra,Ur.httpRequestHeaders);const ec=Qi.message;Li(Ra,Wt.getRequestHeadersFromMessage(ec)),Object.keys(Ra).forEach(jr=>{jr.toLowerCase()==="authorization"&&(Zu=!0)}),Ur&&typeof Ur.withCredentials=="boolean"&&(Zu=Ur.withCredentials);const La=function(jr){if(Nn)if(jr.status>=200&&jr.status<=299){const ys=k.default.parseHttpHeaders(jr.getAllResponseHeaders?jr.getAllResponseHeaders():null);let ru=new w(jr.responseURL,ys,jr.response);nu(Un.getLicenseResponseFilters(),ru).then(()=>{const Wr=ur.getLicenseMessage(ru.data,Qs,Ms);Wr!==null?(Tr(Mo),Nn.updateKeySession(fo,Wr)):Ya(jr,Mo,Qs,Ms,ur)})}else Ya(jr,Mo,Qs,Ms,ur)},Js=function(jr){Tr(Mo,new _.default(b.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,b.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+Qs+' update, XHR aborted. status is "'+jr.statusText+'" ('+jr.status+"), readyState is "+jr.readyState))},tc=function(jr){Tr(Mo,new _.default(b.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,b.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+Qs+' update, XHR error. status is "'+jr.statusText+'" ('+jr.status+"), readyState is "+jr.readyState))},Ns=Wt.getLicenseRequestFromMessage(ec),Pa=ur.getHTTPMethod(Ms),Er=ur.getResponseType(Qs,Ms),ra=Ur&&!isNaN(Ur.httpTimeout)?Ur.httpTimeout:8e3,da=fo.getSessionId()||null;let sa=new A(Cr,Pa,Er,Ra,Zu,Ms,da,Ns);const iu=isNaN(Ne.get().streaming.retryAttempts[T.HTTPRequest.LICENSE])?3:Ne.get().streaming.retryAttempts[T.HTTPRequest.LICENSE];nu(Un.getLicenseRequestFilters(),sa).then(()=>{ia(sa,iu,ra,La,Js,tc)})})(ii,er,ms)}else Tr(sr,new _.default(b.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,b.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE))}function Tr(In){let ii=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;Hn.trigger(ei.LICENSE_REQUEST_COMPLETE,{data:In,error:ii})}function ia(In,ii,Si,hr,Bi,ms){const er=new XMLHttpRequest,sr=An.getCmcdParametersFromManifest();if(An.isCmcdEnabled()&&(sr.mode?sr.mode:Ne.get().streaming.cmcd.mode)===U.default.CMCD_MODE_QUERY){const ur=An.getQueryParameter({url:In.url,type:T.HTTPRequest.LICENSE});ur&&(In.url=k.default.addAdditionalQueryParameterToUrl(In.url,[ur]))}er.open(In.method,In.url,!0),er.responseType=In.responseType,er.withCredentials=In.withCredentials,Si>0&&(er.timeout=Si);for(const ur in In.headers)er.setRequestHeader(ur,In.headers[ur]);if(An.isCmcdEnabled()&&(sr.mode?sr.mode:Ne.get().streaming.cmcd.mode)===U.default.CMCD_MODE_HEADER){const ur=An.getHeaderParameters({url:In.url,type:T.HTTPRequest.LICENSE});if(ur)for(const Ur in ur){let fo=ur[Ur];fo&&er.setRequestHeader(Ur,fo)}}const Qi=function(){ii--;const ur=isNaN(Ne.get().streaming.retryIntervals[T.HTTPRequest.LICENSE])?1e3:Ne.get().streaming.retryIntervals[T.HTTPRequest.LICENSE];Qn=setTimeout(function(){ia(In,ii,Si,hr,Bi,ms)},ur)};er.onload=function(){ai=null,this.status>=200&&this.status<=299||ii<=0?hr(this):(vi.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+ii),Qi())},er.ontimeout=er.onerror=function(){ai=null,ii<=0?ms(this):(vi.warn("License request network request failed . Retrying it... Pending retries: "+ii),Qi())},er.onabort=function(){Bi(this)},Hn.trigger(ei.LICENSE_REQUEST_SENDING,{url:In.url,headers:In.headers,payload:In.data,sessionId:In.sessionId}),ai=er,er.send(In.data)}function Da(){ai&&(ai.onloadend=ai.onerror=ai.onprogress=void 0,ai.abort(),ai=null),Qn&&(clearTimeout(Qn),Qn=null)}function Li(In,ii){if(ii)for(const Si in ii)In[Si]=ii[Si]}function Ya(In,ii,Si,hr,Bi){let ms="NONE",er=null;In.response&&(ms=Bi.getErrorResponse(In.response,Si,hr),er={serverResponse:In.response||null,responseCode:In.status||null,responseText:In.statusText||null}),Tr(ii,new _.default(b.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,b.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+Si+' update, XHR complete. status is "'+In.statusText+'" ('+In.status+"), readyState is "+In.readyState+".  Response is "+ms,er))}function nu(In,ii){return In?In.reduce((Si,hr)=>Si.then(()=>hr(ii)),Promise.resolve()):Promise.resolve()}function el(In,ii){if(Ne.get().streaming.protection.ignoreEmeEncryptedEvent)return;if(vi.debug("DRM: onNeedKey"),In.key.initDataType!==l.default.INITIALIZATION_DATA_TYPE_CENC)return void vi.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+In.key.initDataType);if(Xi.length===0&&(vi.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),(ii=ii===void 0?1:ii+1)<5))return void fi.push(setTimeout(()=>{el(In,ii)},500));let Si=In.key.initData;if(ArrayBuffer.isView(Si)&&(Si=Si.buffer),Wt){const Bi=p.getPSSHForKeySystem(Wt,Si);if(Bi&&Xs(Bi))return}vi.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(Si)));const hr=wn.getSupportedKeySystemMetadataFromSegmentPssh(Si,Ke,Ln);hr.length!==0?function(Bi){si.push(Bi),cr(Bi,!1)}(hr):vi.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!")}function ca(In,ii){if(In.size<=0)return!1;if(ii.size>0&&[...In].every(hr=>{const Bi=ii.get(hr);return Bi!==void 0&&Bi!==""}))return!0;const Si=Nn.getSessionTokens();if(Si&&Si.length>0){const hr=Si.filter(Bi=>[...In].includes(Bi.normalizedKeyId));if(hr.some(Bi=>!Bi.hasTriggeredKeyStatusMapUpdate)||hr.length===0)return!1}return!Ne.get().streaming.protection.ignoreKeyStatuses&&In&&In.size>0&&ii&&ii.size>0}return ft={areKeyIdsExpired:function(In){try{return!!ca(In,At)&&[...In].every(ii=>At.get(ii)===l.default.MEDIA_KEY_STATUSES.EXPIRED)}catch(ii){return vi.error(ii),!1}},areKeyIdsUsable:function(In){try{return!ca(In,At)||[...In].some(ii=>{const Si=At.get(ii);return Si&&Si!==l.default.MEDIA_KEY_STATUSES.INTERNAL_ERROR&&Si!==l.default.MEDIA_KEY_STATUSES.OUTPUT_RESTRICTED})}catch(ii){return vi.error(ii),!0}},clearMediaInfoArray:function(){Xi=[]},closeKeySession:function(In){jn(),Nn.closeKeySession(In)},createKeySession:Br,getKeySystems:function(){return wn?wn.getKeySystems():[]},getSupportedKeySystemMetadataFromContentProtection:function(In){return jn(),wn.getSupportedKeySystemMetadataFromContentProtection(In,Ke,Ln)},handleKeySystemFromManifest:function(){if(!Xi||Xi.length===0)return;let In=[];Xi.forEach(ii=>{const Si=wn.getSupportedKeySystemMetadataFromContentProtection(ii.contentProtection,Ke,Ln);Si.length>0&&(In.length===0&&(In=Si),si.push(Si))}),In&&In.length>0&&cr(In,!0)},initializeForMedia:function(In){if(!In)throw new Error("mediaInfo can not be null or undefined");jn(),Xi.push(In)},loadKeySession:it,removeKeySession:function(In){jn(),Nn.removeKeySession(In)},reset:function(){Hn.off(ei.INTERNAL_KEY_MESSAGE,es,ft),jn(),Da(),Po(null),Wt=null,un=!1,At=new Map,Nn&&(Nn.reset(),Nn=null),fi.forEach(In=>clearTimeout(In)),fi=[],Xi=[],si=[]},setKeySystems:function(In){wn&&wn.setKeySystems(In)},setMediaElement:Po,setProtectionData:function(In){Ke=In,wn.setProtectionData(In)},setRobustnessLevel:function(In){cn=In},setServerCertificate:function(In){jn(),Nn.setServerCertificate(In)},setSessionType:function(In){Ln=In},stop:function(){Da(),Nn&&Nn.stop()},updateKeyStatusesMap:function(In){try{if(!In||!In.sessionToken||!In.parsedKeyStatuses)return;In.sessionToken.hasTriggeredKeyStatusMapUpdate=!0;const ii=In.parsedKeyStatuses,Si=k.default.parseUserAgent(),hr=Si&&Si.browser&&Si.browser.name&&Si.browser.name.toLowerCase()==="edge";ii.forEach(Bi=>{hr&&Wt.uuid===l.default.PLAYREADY_UUID&&Bi.keyId&&Bi.keyId.byteLength===16&&function(er){const sr=k.default.bufferSourceToDataView(er),Qi=sr.getUint32(0,!0),ur=sr.getUint16(4,!0),Ur=sr.getUint16(6,!0);sr.setUint32(0,Qi,!1),sr.setUint16(4,ur,!1),sr.setUint16(6,Ur,!1)}(Bi.keyId);const ms=k.default.bufferSourceToHex(Bi.keyId).slice(0,32);ms&&ms!==""&&At.set(ms,Bi.status)}),Hn.trigger(ei.KEY_STATUSES_MAP_UPDATED,{keyStatusMap:At})}catch(ii){vi.error(ii)}}},vi=vn.getLogger(ft),si=[],Xi=[],Ln="temporary",cn="",ai=null,Qn=null,At=new Map,Hn.on(ei.INTERNAL_KEY_MESSAGE,es,ft),ft}se.__dashjs_factory_name="ProtectionController";var te=Y.default.getClassFactory(se),Re=class{constructor(dn,Mn){this.keyID=dn,this.key=Mn}},Be=class{constructor(dn,Mn){if(Mn&&Mn!=="persistent"&&Mn!=="temporary")throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=dn,this.type=Mn}toJWK(){let dn,Mn=this.keyPairs.length,An={keys:[]};for(dn=0;dn<Mn;dn++){let ei={kty:"oct",alg:"A128KW",kid:this.keyPairs[dn].keyID,k:this.keyPairs[dn].key};An.keys.push(ei)}this.type&&(An.type=this.type);let on=JSON.stringify(An);const Un=on.length;let vn=new ArrayBuffer(Un),Hn=new Uint8Array(vn);for(dn=0;dn<Un;dn++)Hn[dn]=on.charCodeAt(dn);return vn}};const j=l.default.CLEARKEY_UUID,M=l.default.CLEARKEY_KEYSTEM_STRING,Z="urn:uuid:"+j;function K(dn){let Mn;const An=(dn=dn||{}).BASE64;return Mn={uuid:j,schemeIdURI:Z,systemString:M,getInitData:function(on,Un){try{let vn=p.parseInitDataFromContentProtection(on,An);if(!vn&&Un){const Hn={kids:[function(ei){try{let wn=ei.replace(/-/g,"");return wn=btoa(wn.match(/\w{2}/g).map(Ne=>String.fromCharCode(parseInt(Ne,16))).join("")),wn.replace(/=/g,"").replace(/\//g,"_").replace(/\+/g,"-")}catch{return null}}(Un.cencDefaultKid)]};vn=new TextEncoder().encode(JSON.stringify(Hn))}return vn}catch{return null}},getRequestHeadersFromMessage:function(){return{"Content-Type":"application/json"}},getLicenseRequestFromMessage:function(on){return JSON.stringify(JSON.parse(String.fromCharCode.apply(null,new Uint8Array(on))))},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(on,Un){let vn=null;if(on){const Hn=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(Un))),ei=[];for(let wn=0;wn<Hn.kids.length;wn++){const Ne=Hn.kids[wn],Ke=on.clearkeys&&on.clearkeys.hasOwnProperty(Ne)?on.clearkeys[Ne]:null;if(!Ke)throw new Error("DRM: ClearKey keyID ("+Ne+") is not known!");ei.push(new Re(Ne,Ke))}vn=new Be(ei)}return vn}},Mn}K.__dashjs_factory_name="KeySystemClearKey";var x=Y.default.getSingletonFactory(K);const ue=l.default.W3C_CLEARKEY_UUID,$e=l.default.CLEARKEY_KEYSTEM_STRING,xe="urn:uuid:"+ue;function lt(dn){let Mn;const An=dn.BASE64,on=dn.debug.getLogger(Mn);return Mn={uuid:ue,schemeIdURI:xe,systemString:$e,getInitData:function(Un){return p.parseInitDataFromContentProtection(Un,An)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(Un){return new Uint8Array(Un)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(Un,vn){let Hn=null;if(Un){const ei=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(vn))),wn=[];for(let Ne=0;Ne<ei.kids.length;Ne++){const Ke=ei.kids[Ne],ft=Un.clearkeys&&Un.clearkeys.hasOwnProperty(Ke)?Un.clearkeys[Ke]:null;if(!ft)throw new Error("DRM: ClearKey keyID ("+Ke+") is not known!");wn.push(new Re(Ke,ft))}Hn=new Be(wn),on.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return Hn}},Mn}lt.__dashjs_factory_name="KeySystemW3CClearKey";var et=Y.default.getSingletonFactory(lt);const Xe=l.default.WIDEVINE_UUID,ut=l.default.WIDEVINE_KEYSTEM_STRING,Dt="urn:uuid:"+Xe;function dt(dn){let Mn;const An=(dn=dn||{}).BASE64;return Mn={uuid:Xe,schemeIdURI:Dt,systemString:ut,getInitData:function(on){return p.parseInitDataFromContentProtection(on,An)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(on){return new Uint8Array(on)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null}},Mn}dt.__dashjs_factory_name="KeySystemWidevine";var Et=Y.default.getSingletonFactory(dt);const Rt=l.default.PLAYREADY_UUID,mn=l.default.PLAYREADY_KEYSTEM_STRING,Tn="urn:uuid:"+Rt;function Qe(dn){let Mn,An="utf-16";const on=(dn=dn||{}).BASE64,Un=dn.settings;function vn(){if(!on||!on.hasOwnProperty("decodeArray")||!on.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}return Mn={uuid:Rt,schemeIdURI:Tn,systemString:mn,getInitData:function(Hn){const ei=new Uint8Array([112,115,115,104,0,0,0,0]),wn=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);let Ne,Ke,ft,At,un,Qn=0,ai=null;if(vn(),!Hn)return null;if("pssh"in Hn&&Hn.pssh)return p.parseInitDataFromContentProtection(Hn,on);if("pro"in Hn&&Hn.pro)ai=on.decodeArray(Hn.pro.__text);else{if(!("prheader"in Hn)||!Hn.prheader)return null;ai=on.decodeArray(Hn.prheader.__text)}return Ne=ai.length,Ke=4+ei.length+wn.length+4+Ne,ft=new ArrayBuffer(Ke),At=new Uint8Array(ft),un=new DataView(ft),un.setUint32(Qn,Ke),Qn+=4,At.set(ei,Qn),Qn+=ei.length,At.set(wn,Qn),Qn+=wn.length,un.setUint32(Qn,Ne),Qn+=4,At.set(ai,Qn),Qn+=Ne,At.buffer},getRequestHeadersFromMessage:function(Hn){let ei,wn;const Ne={},Ke=new DOMParser;if(Un&&Un.get().streaming.protection.detectPlayreadyMessageFormat&&An==="utf-16"&&Hn&&Hn.byteLength%2==1)return Ne["Content-Type"]="text/xml; charset=utf-8",Ne;const ft=An==="utf-16"?new Uint16Array(Hn):new Uint8Array(Hn);ei=String.fromCharCode.apply(null,ft),wn=Ke.parseFromString(ei,"application/xml");const At=wn.getElementsByTagName("name"),un=wn.getElementsByTagName("value");for(let Qn=0;Qn<At.length;Qn++)Ne[At[Qn].childNodes[0].nodeValue]=un[Qn].childNodes[0].nodeValue;return Ne.hasOwnProperty("Content")&&(Ne["Content-Type"]=Ne.Content,delete Ne.Content),Ne.hasOwnProperty("Content-Type")||(Ne["Content-Type"]="text/xml; charset=utf-8"),Ne},getLicenseRequestFromMessage:function(Hn){let ei=null;const wn=new DOMParser;if(Un&&Un.get().streaming.protection.detectPlayreadyMessageFormat&&An==="utf-16"&&Hn&&Hn.byteLength%2==1)return Hn;const Ne=An==="utf-16"?new Uint16Array(Hn):new Uint8Array(Hn);vn();const Ke=String.fromCharCode.apply(null,Ne),ft=wn.parseFromString(Ke,"application/xml");if(!ft.getElementsByTagName("PlayReadyKeyMessage")[0])return Hn;{const At=ft.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;At&&(ei=on.decode(At))}return ei},getLicenseServerURLFromInitData:function(Hn){if(Hn){const ei=new DataView(Hn),wn=ei.getUint16(4,!0);let Ne=6;const Ke=new DOMParser;for(let ft=0;ft<wn;ft++){const At=ei.getUint16(Ne,!0);Ne+=2;const un=ei.getUint16(Ne,!0);if(Ne+=2,At!==1){Ne+=un;continue}const Qn=Hn.slice(Ne,Ne+un),ai=String.fromCharCode.apply(null,new Uint16Array(Qn)),vi=Ke.parseFromString(ai,"application/xml");if(vi.getElementsByTagName("LA_URL")[0]){const Xi=vi.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(Xi)return Xi}if(vi.getElementsByTagName("LUI_URL")[0]){const Xi=vi.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(Xi)return Xi}}}return null},getCDMData:function(Hn){let ei,wn,Ne,Ke;if(vn(),!Hn)return null;for(ei=[],Ke=0;Ke<Hn.length;++Ke)ei.push(Hn.charCodeAt(Ke)),ei.push(0);for(ei=String.fromCharCode.apply(null,ei),ei=on.encode(ei),wn='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>'.replace("%CUSTOMDATA%",ei),Ne=[],Ke=0;Ke<wn.length;++Ke)Ne.push(wn.charCodeAt(Ke)),Ne.push(0);return new Uint8Array(Ne).buffer},setPlayReadyMessageFormat:function(Hn){if(Hn!=="utf-8"&&Hn!=="utf-16")throw new Error('Specified message format is not one of "utf-8" or "utf-16"');An=Hn}},Mn}Qe.__dashjs_factory_name="KeySystemPlayReady";var Ze=Y.default.getSingletonFactory(Qe);function at(dn){const Mn=(dn=dn||{}).BASE64,An={};let on;return An[l.default.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(Un){return Mn.decodeArray(Un.license)},getErrorResponse:function(Un){return Un}},An[l.default.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(Un){return Un},getErrorResponse:function(Un){return String.fromCharCode.apply(null,new Uint8Array(Un))}},on={getServerURLFromMessage:function(Un){return Un},getHTTPMethod:function(){return"POST"},getResponseType:function(Un){return An[Un].responseType},getLicenseMessage:function(Un,vn){return function(){if(!Mn||!Mn.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}(),An[vn].getLicenseMessage(Un)},getErrorResponse:function(Un,vn){return An[vn].getErrorResponse(Un)}},on}at.__dashjs_factory_name="DRMToday";var nn=Y.default.getSingletonFactory(at);function ce(){let dn;const Mn="http://schemas.xmlsoap.org/soap/envelope/";function An(vn){const Hn=String.fromCharCode.apply(null,new Uint8Array(vn));return decodeURIComponent(escape(Hn))}function on(vn){if(window.DOMParser){const Hn=An(vn),ei=new window.DOMParser().parseFromString(Hn,"text/xml"),wn=ei?ei.getElementsByTagNameNS(Mn,"Envelope")[0]:null,Ne=wn?wn.getElementsByTagNameNS(Mn,"Body")[0]:null;if(Ne&&Ne.getElementsByTagNameNS(Mn,"Fault")[0])return null}return vn}function Un(vn){let Hn="",ei="",wn="",Ne=-1,Ke=-1;if(window.DOMParser){const At=An(vn),un=new window.DOMParser().parseFromString(At,"text/xml"),Qn=un?un.getElementsByTagNameNS(Mn,"Envelope")[0]:null,ai=Qn?Qn.getElementsByTagNameNS(Mn,"Body")[0]:null,vi=ai?ai.getElementsByTagNameNS(Mn,"Fault")[0]:null,Xi=vi?vi.getElementsByTagName("detail")[0]:null,si=Xi?Xi.getElementsByTagName("Exception")[0]:null;let cn=null;if(vi===null)return At;cn=vi.getElementsByTagName("faultstring")[0].firstChild,Hn=cn?cn.nodeValue:null,si!==null&&(cn=si.getElementsByTagName("StatusCode")[0],ei=cn?cn.firstChild.nodeValue:null,cn=si.getElementsByTagName("Message")[0],wn=cn?cn.firstChild.nodeValue:null,Ne=wn?wn.lastIndexOf("[")+1:-1,Ke=wn?wn.indexOf("]"):-1,wn=wn?wn.substring(Ne,Ke):"")}let ft=`code: ${ei}, name: ${Hn}`;return wn&&(ft+=`, message: ${wn}`),ft}return dn={getServerURLFromMessage:function(vn){return vn},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(vn){return on.call(this,vn)},getErrorResponse:function(vn){return Un.call(this,vn)}},dn}ce.__dashjs_factory_name="PlayReady";var ge=Y.default.getSingletonFactory(ce);function G(){let dn;return dn={getServerURLFromMessage:function(Mn){return Mn},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(Mn){return Mn},getErrorResponse:function(Mn){return String.fromCharCode.apply(null,new Uint8Array(Mn))}},dn}G.__dashjs_factory_name="Widevine";var ae=Y.default.getSingletonFactory(G);function _e(){let dn;return dn={getServerURLFromMessage:function(Mn){return Mn},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"json"},getLicenseMessage:function(Mn){if(!Mn.hasOwnProperty("keys"))return null;let An=[];for(let on=0;on<Mn.keys.length;on++){let Un=Mn.keys[on],vn=Un.kid.replace(/=/g,""),Hn=Un.k.replace(/=/g,"");An.push(new Re(vn,Hn))}return new Be(An)},getErrorResponse:function(Mn){return String.fromCharCode.apply(null,new Uint8Array(Mn))}},dn}_e.__dashjs_factory_name="ClearKey";var Ae=Y.default.getSingletonFactory(_e),yt=class{constructor(dn){this.ks=dn.ks,this.keyId=dn.keyId,this.initData=dn.initData,this.protData=dn.protData,this.cdmData=dn.cdmData,this.sessionId=dn.sessionId,this.sessionType=dn.sessionType}};function zt(){let dn,Mn,An,on,Un,vn,Hn,ei,wn=this.context;function Ne(At,un){return un&&At in un?un[At]:null}function Ke(At,un){return At&&At.sessionId?At.sessionId:un&&un.sessionId?un.sessionId:null}function ft(At,un){return At&&At.sessionType?At.sessionType:un}return dn={getKeySystemBySystemString:function(At){for(let un=0;un<on.length;un++)if(on[un].systemString===At)return on[un];return null},getKeySystems:function(){return on},getLicenseServerModelInstance:function(At,un,Qn){if(Qn===l.default.MEDIA_KEY_MESSAGE_TYPES.LICENSE_RELEASE||Qn===l.default.MEDIA_KEY_MESSAGE_TYPES.INDIVIDUALIZATION_REQUEST)return null;let ai=null;return un&&un.hasOwnProperty("drmtoday")?ai=nn(wn).getInstance({BASE64:Un}):At.systemString===l.default.WIDEVINE_KEYSTEM_STRING?ai=ae(wn).getInstance():At.systemString===l.default.PLAYREADY_KEYSTEM_STRING?ai=ge(wn).getInstance():At.systemString===l.default.CLEARKEY_KEYSTEM_STRING&&(ai=Ae(wn).getInstance()),ai},getSupportedKeySystemMetadataFromContentProtection:function(At,un,Qn){let ai,vi,Xi,si,cn=[];if(!At||!At.length)return cn;const Wt=p.findMp4ProtectionElement(At);for(Xi=0;Xi<on.length;Xi++){vi=on[Xi];const Ln=Ne(vi.systemString,un);for(si=0;si<At.length;si++)if(ai=At[si],ai.schemeIdUri.toLowerCase()===vi.schemeIdURI){let Nn=vi.getInitData(ai,Wt);const fi=new yt({ks:on[Xi],keyId:ai.keyId,initData:Nn,protData:Ln,cdmData:vi.getCDMData(Ln?Ln.cdmData:null),sessionId:Ke(Ln,ai),sessionType:ft(Ln,Qn)});Ln?cn.unshift(fi):cn.push(fi)}}return cn},getSupportedKeySystemMetadataFromSegmentPssh:function(At,un,Qn){let ai,vi,Xi=[],si=p.parsePSSHList(At);for(let cn=0;cn<on.length;++cn){ai=on[cn],vi=ai.systemString;const Wt=Ne(vi,un);ai.uuid in si&&Xi.push({ks:ai,initData:si[ai.uuid],protData:Wt,cdmData:ai.getCDMData(Wt?Wt.cdmData:null),sessionId:Ke(Wt),sessionType:ft(Wt,Qn)})}return Xi},initDataEquals:function(At,un){if(At.byteLength===un.byteLength){let Qn=new Uint8Array(At),ai=new Uint8Array(un);for(let vi=0;vi<Qn.length;vi++)if(Qn[vi]!==ai[vi])return!1;return!0}return!1},initialize:function(){let At;on=[],At=Ze(wn).getInstance({BASE64:Un,settings:vn}),on.push(At),At=Et(wn).getInstance({BASE64:Un}),on.push(At),At=x(wn).getInstance({BASE64:Un}),on.push(At),Hn=At,At=et(wn).getInstance({BASE64:Un,debug:Mn}),on.push(At),ei=At},isClearKey:function(At){return At===Hn||At===ei},processClearKeyLicenseRequest:function(At,un,Qn){try{return At.getClearKeysFromProtectionData(un,Qn)}catch{return An.error("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function(At){At&&(At.debug&&(Mn=At.debug,An=Mn.getLogger(dn)),At.BASE64&&(Un=At.BASE64),At.settings&&(vn=At.settings))},setKeySystems:function(At){on=At},setProtectionData:function(At){for(var un,Qn,ai=0;ai<on.length;ai++){var vi=on[ai];vi.hasOwnProperty("init")&&vi.init((un=vi.systemString,Qn=void 0,Qn=null,At&&(Qn=un in At?At[un]:null),Qn))}}},dn}zt.__dashjs_factory_name="ProtectionKeyController";var vt=Y.default.getSingletonFactory(zt),Lt=n(445),bt=class{constructor(dn,Mn){this.initData=dn,this.initDataType=Mn}},Mt=class{constructor(dn,Mn,An,on){this.sessionToken=dn,this.message=Mn,this.defaultURL=An,this.messageType=on||l.default.MEDIA_KEY_MESSAGE_TYPES.LICENSE_REQUEST}},kt=class{constructor(dn,Mn){this.keySystem=dn,this.ksConfiguration=Mn,this.nativeMediaKeySystemAccessObject=null,this.selectedSystemString=null}};const Bt={};function sn(dn){dn=dn||{};const Mn=this.context,An=dn.eventBus,on=dn.events,Un=dn.debug;let vn,Hn,ei,wn,Ne,Ke,ft,At;function un(cn,Wt,Ln,Nn){if(navigator.requestMediaKeySystemAccess===void 0||typeof navigator.requestMediaKeySystemAccess!="function"){const Ir="Insecure origins are not allowed";return An.trigger(on.KEY_SYSTEM_ACCESS_COMPLETE,{error:Ir}),void Nn({error:Ir})}const fi=cn[Wt].protData&&cn[Wt].protData.systemStringPriority?cn[Wt].protData.systemStringPriority:null,jn=cn[Wt].configs,cr=cn[Wt].ks;let Ni=cr.systemString;(function(Ir,it){return new Promise((Br,Ws)=>{Qn(Ir,it,0,Br,Ws)})})(fi||(Bt[Ni]?Bt[Ni]:[Ni]),jn).then(Ir=>{const it=Ir&&Ir.nativeMediaKeySystemAccessObject&&typeof Ir.nativeMediaKeySystemAccessObject.getConfiguration=="function"?Ir.nativeMediaKeySystemAccessObject.getConfiguration():null,Br=new kt(cr,it);Br.selectedSystemString=Ir.selectedSystemString,Br.nativeMediaKeySystemAccessObject=Ir.nativeMediaKeySystemAccessObject,An.trigger(on.KEY_SYSTEM_ACCESS_COMPLETE,{data:Br}),Ln({data:Br})}).catch(Ir=>{if(Wt+1<cn.length)un(cn,Wt+1,Ln,Nn);else{const it="Key system access denied! ";An.trigger(on.KEY_SYSTEM_ACCESS_COMPLETE,{error:it+Ir.message}),Nn({error:it+Ir.message})}})}function Qn(cn,Wt,Ln,Nn,fi){const jn=cn[Ln];Hn.debug(`Requesting key system access for system string ${jn}`),navigator.requestMediaKeySystemAccess(jn,Wt).then(cr=>{Nn({nativeMediaKeySystemAccessObject:cr,selectedSystemString:jn})}).catch(cr=>{Ln+1<cn.length?Qn(cn,Wt,Ln+1,Nn,fi):fi(cr)})}function ai(cn){if(!cn||!cn.session)return Promise.resolve;const Wt=cn.session;return Wt.removeEventListener("keystatuseschange",cn),Wt.removeEventListener("message",cn),Wt.close()}function vi(cn){for(let Wt=0;Wt<Ke.length;Wt++)if(Ke[Wt]===cn){Ke.splice(Wt,1);break}}function Xi(cn,Wt){const Ln={session:cn,keyId:Wt.keyId,normalizedKeyId:Wt&&Wt.keyId&&typeof Wt.keyId=="string"?Wt.keyId.replace(/-/g,"").toLowerCase():"",initData:Wt.initData,sessionId:Wt.sessionId,sessionType:Wt.sessionType,hasTriggeredKeyStatusMapUpdate:!1,handleEvent:function(Nn){switch(Nn.type){case"keystatuseschange":this._onKeyStatusesChange(Nn);break;case"message":this._onKeyMessage(Nn)}},_onKeyStatusesChange:function(Nn){An.trigger(on.KEY_STATUSES_CHANGED,{data:this});const fi=[];Nn.target.keyStatuses.forEach(function(){fi.push(si(arguments))}),An.trigger(on.INTERNAL_KEY_STATUSES_CHANGED,{parsedKeyStatuses:fi,sessionToken:Ln})},_onKeyMessage:function(Nn){let fi=ArrayBuffer.isView(Nn.message)?Nn.message.buffer:Nn.message;An.trigger(on.INTERNAL_KEY_MESSAGE,{data:new Mt(this,fi,void 0,Nn.messageType)})},getKeyId:function(){return this.keyId},getSessionId:function(){return cn.sessionId},getSessionType:function(){return this.sessionType},getExpirationTime:function(){return cn.expiration},getKeyStatuses:function(){return cn.keyStatuses},getUsable:function(){let Nn=!1;return cn.keyStatuses.forEach(function(){si(arguments).status===l.default.MEDIA_KEY_STATUSES.USABLE&&(Nn=!0)}),Nn}};return cn.addEventListener("keystatuseschange",Ln),cn.addEventListener("message",Ln),cn.closed.then(()=>{vi(Ln),Hn.debug("DRM: Session closed.  SessionID = "+Ln.getSessionId()),An.trigger(on.KEY_SESSION_CLOSED,{data:Ln.getSessionId()})}),Ke.push(Ln),Ln}function si(cn){let Wt,Ln;return cn&&cn.length>0&&(cn[0]&&(typeof cn[0]=="string"?Wt=cn[0]:Ln=cn[0]),cn[1]&&(typeof cn[1]=="string"?Wt=cn[1]:Ln=cn[1])),{status:Wt,keyId:Ln}}return vn={closeKeySession:function(cn){ai(cn).catch(function(Wt){vi(cn),An.trigger(on.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+cn.getSessionId()+") "+Wt.name})})},createKeySession:function(cn){if(!ei||!Ne)throw new Error("Can not create sessions until you have selected a key system");const Wt=Ne.createSession(cn.sessionType),Ln=Xi(Wt,cn),Nn=ei.systemString===l.default.CLEARKEY_KEYSTEM_STRING&&(cn.initData||cn.protData&&cn.protData.clearkeys)?l.default.INITIALIZATION_DATA_TYPE_KEYIDS:l.default.INITIALIZATION_DATA_TYPE_CENC;Wt.generateRequest(Nn,cn.initData).then(function(){Hn.debug("DRM: Session created.  SessionID = "+Ln.getSessionId()),An.trigger(on.KEY_SESSION_CREATED,{data:Ln})}).catch(function(fi){vi(Ln),An.trigger(on.KEY_SESSION_CREATED,{data:null,error:new _.default(b.default.KEY_SESSION_CREATED_ERROR_CODE,b.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+fi.name)})})},getAllInitData:function(){const cn=[];for(let Wt=0;Wt<Ke.length;Wt++)Ke[Wt].initData&&cn.push(Ke[Wt].initData);return cn},getSessionTokens:function(){return Ke},loadKeySession:function(cn){if(!ei||!Ne)throw new Error("Can not load sessions until you have selected a key system");const Wt=cn.sessionId;for(let fi=0;fi<Ke.length;fi++)if(Wt===Ke[fi].sessionId)return void Hn.warn("DRM: Ignoring session ID because we have already seen it!");const Ln=Ne.createSession(cn.sessionType),Nn=Xi(Ln,cn);Nn.hasTriggeredKeyStatusMapUpdate=!0,Ln.load(Wt).then(function(fi){fi?(Hn.debug("DRM: Session loaded.  SessionID = "+Nn.getSessionId()),An.trigger(on.KEY_SESSION_CREATED,{data:Nn})):(vi(Nn),An.trigger(on.KEY_SESSION_CREATED,{data:null,error:new _.default(b.default.KEY_SESSION_CREATED_ERROR_CODE,b.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+Wt+")")}))}).catch(function(fi){vi(Nn),An.trigger(on.KEY_SESSION_CREATED,{data:null,error:new _.default(b.default.KEY_SESSION_CREATED_ERROR_CODE,b.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+Wt+")! "+fi.name)})})},removeKeySession:function(cn){cn.session.remove().then(function(){Hn.debug("DRM: Session removed.  SessionID = "+cn.getSessionId()),An.trigger(on.KEY_SESSION_REMOVED,{data:cn.getSessionId()})},function(Wt){An.trigger(on.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+cn.getSessionId()+"). "+Wt.name})})},requestKeySystemAccess:function(cn){return new Promise((Wt,Ln)=>{un(cn,0,Wt,Ln)})},reset:function(){const cn=Ke.length;let Wt;if(cn!==0){const Ln=function(Nn){vi(Nn),Ke.length===0&&(wn?(wn.removeEventListener("encrypted",ft),wn.setMediaKeys(null).then(function(){An.trigger(on.TEARDOWN_COMPLETE)})):An.trigger(on.TEARDOWN_COMPLETE))};for(let Nn=0;Nn<cn;Nn++)Wt=Ke[Nn],function(fi){ai(Wt),Ln(fi)}(Wt)}else An.trigger(on.TEARDOWN_COMPLETE)},selectKeySystem:function(cn){return new Promise((Wt,Ln)=>{cn.nativeMediaKeySystemAccessObject.createMediaKeys().then(Nn=>(ei=cn.keySystem,Ne=Nn,wn?wn.setMediaKeys(Ne):Promise.resolve())).then(()=>{Wt(ei)}).catch(function(){Ln({error:"Error selecting keys system ("+cn.keySystem.systemString+")! Could not create MediaKeys -- TODO"})})})},setMediaElement:function(cn){wn!==cn&&(wn&&(wn.removeEventListener("encrypted",ft),wn.setMediaKeys&&wn.setMediaKeys(null)),wn=cn,wn&&(wn.addEventListener("encrypted",ft),wn.setMediaKeys&&Ne&&wn.setMediaKeys(Ne)))},setServerCertificate:function(cn){return new Promise((Wt,Ln)=>{Ne.setServerCertificate(cn).then(function(){Hn.info("DRM: License server certificate successfully updated."),An.trigger(on.SERVER_CERTIFICATE_UPDATED),Wt()}).catch(Nn=>{Ln(Nn),An.trigger(on.SERVER_CERTIFICATE_UPDATED,{error:new _.default(b.default.SERVER_CERTIFICATE_UPDATED_ERROR_CODE,b.default.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+Nn.name)})})})},stop:function(){let cn;for(let Wt=0;Wt<Ke.length;Wt++)cn=Ke[Wt],cn.getUsable()||(ai(cn),vi(cn))},updateKeySession:function(cn,Wt){const Ln=cn.session;At.isClearKey(ei)&&(Wt=Wt.toJWK()),Ln.update(Wt).then(()=>{An.trigger(on.KEY_SESSION_UPDATED)}).catch(function(Nn){An.trigger(on.KEY_ERROR,{error:new _.default(b.default.MEDIA_KEYERR_CODE,"Error sending update() message! "+Nn.name,cn)})})}},Hn=Un.getLogger(vn),ei=null,wn=null,Ne=null,Ke=[],At=vt(Mn).getInstance(),ft={handleEvent:function(cn){if(cn.type==="encrypted"&&cn.initData){let Wt=ArrayBuffer.isView(cn.initData)?cn.initData.buffer:cn.initData;An.trigger(on.NEED_KEY,{key:new bt(Wt,cn.initDataType)})}}},vn}Bt[l.default.PLAYREADY_KEYSTEM_STRING]=[l.default.PLAYREADY_KEYSTEM_STRING,l.default.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING],Bt[l.default.WIDEVINE_KEYSTEM_STRING]=[l.default.WIDEVINE_KEYSTEM_STRING],Bt[l.default.CLEARKEY_KEYSTEM_STRING]=[l.default.CLEARKEY_KEYSTEM_STRING],sn.__dashjs_factory_name="DefaultProtectionModel";var ti=Y.default.getClassFactory(sn);function On(dn){dn=dn||{};const Mn=this.context,An=dn.eventBus,on=dn.events,Un=dn.debug,vn=dn.api;let Hn,ei,wn,Ne,Ke,ft,At,un,Qn;function ai(){try{for(let si=0;si<At.length;si++)vi(At[si]);wn&&wn.removeEventListener(vn.needkey,un),An.trigger(on.TEARDOWN_COMPLETE)}catch(si){An.trigger(on.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+si.message})}}function vi(si){const cn=si.session;cn.removeEventListener(vn.error,si),cn.removeEventListener(vn.message,si),cn.removeEventListener(vn.ready,si),cn.removeEventListener(vn.close,si);for(let Wt=0;Wt<At.length;Wt++)if(At[Wt]===si){At.splice(Wt,1);break}cn[vn.release]()}function Xi(){let si=null;const cn=function(){wn.removeEventListener("loadedmetadata",si),wn[vn.setMediaKeys](Ke),An.trigger(on.VIDEO_ELEMENT_SELECTED)};wn.readyState>=1?cn():(si=cn.bind(this),wn.addEventListener("loadedmetadata",si))}return Hn={getAllInitData:function(){const si=[];for(let cn=0;cn<At.length;cn++)si.push(At[cn].initData);return si},getSessionTokens:function(){return At},requestKeySystemAccess:function(si){return new Promise((cn,Wt)=>{let Ln=!1;for(let Nn=0;Nn<si.length;Nn++){const fi=si[Nn].ks.systemString,jn=si[Nn].configs;let cr=null,Ni=null;for(let Ir=0;Ir<jn.length;Ir++){const it=jn[Ir].audioCapabilities,Br=jn[Ir].videoCapabilities;if(it&&it.length!==0){cr=[];for(let es=0;es<it.length;es++)window[vn.MediaKeys].isTypeSupported(fi,it[es].contentType)&&cr.push(it[es])}if(Br&&Br.length!==0){Ni=[];for(let es=0;es<Br.length;es++)window[vn.MediaKeys].isTypeSupported(fi,Br[es].contentType)&&Ni.push(Br[es])}if(!cr&&!Ni||cr&&cr.length===0||Ni&&Ni.length===0)continue;Ln=!0;const Ws=new y(cr,Ni),Xs=Qn.getKeySystemBySystemString(fi),Po=new kt(Xs,Ws);An.trigger(on.KEY_SYSTEM_ACCESS_COMPLETE,{data:Po}),cn({data:Po});break}}if(!Ln){const Nn="Key system access denied! -- No valid audio/video content configurations detected!";An.trigger(on.KEY_SYSTEM_ACCESS_COMPLETE,{error:Nn}),Wt({error:Nn})}})},selectKeySystem:function(si){return new Promise((cn,Wt)=>{try{Ke=si.mediaKeys=new window[vn.MediaKeys](si.keySystem.systemString),Ne=si.keySystem,ft=si,wn&&Xi(),cn(Ne)}catch{Wt({error:"Error selecting keys system ("+Ne.systemString+")! Could not create MediaKeys -- TODO"})}})},setMediaElement:function(si){wn!==si&&(wn&&wn.removeEventListener(vn.needkey,un),wn=si,wn&&(wn.addEventListener(vn.needkey,un),Ke&&Xi()))},createKeySession:function(si){if(!Ne||!Ke||!ft)throw new Error("Can not create sessions until you have selected a key system");let cn=null;if(ft.ksConfiguration.videoCapabilities&&ft.ksConfiguration.videoCapabilities.length>0&&(cn=ft.ksConfiguration.videoCapabilities[0]),cn===null&&ft.ksConfiguration.audioCapabilities&&ft.ksConfiguration.audioCapabilities.length>0&&(cn=ft.ksConfiguration.audioCapabilities[0]),cn===null)throw new Error("Can not create sessions for unknown content types.");const Wt=cn.contentType,Ln=Ke.createSession(Wt,new Uint8Array(si.initData),si.cdmData?new Uint8Array(si.cdmData):null),Nn=function(fi,jn){return{session:fi,keyId:jn.keyId,normalizedKeyId:jn&&jn.keyId&&typeof jn.keyId=="string"?jn.keyId.replace(/-/g,"").toLowerCase():"",initData:jn.initData,hasTriggeredKeyStatusMapUpdate:!1,getKeyId:function(){return this.keyId},getSessionId:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},getKeyStatuses:function(){return{size:0,has:()=>!1,get:()=>{}}},handleEvent:function(cr){switch(cr.type){case vn.error:let Ni="KeyError";An.trigger(on.KEY_ERROR,{error:new _.default(b.default.MEDIA_KEYERR_CODE,Ni,this)});break;case vn.message:let Ir=ArrayBuffer.isView(cr.message)?cr.message.buffer:cr.message;An.trigger(on.INTERNAL_KEY_MESSAGE,{data:new Mt(this,Ir,cr.destinationURL)});break;case vn.ready:ei.debug("DRM: Key added."),An.trigger(on.KEY_ADDED);break;case vn.close:ei.debug("DRM: Session closed.  SessionID = "+this.getSessionId()),An.trigger(on.KEY_SESSION_CLOSED,{data:this.getSessionId()})}}}}(Ln,si);Ln.addEventListener(vn.error,Nn),Ln.addEventListener(vn.message,Nn),Ln.addEventListener(vn.ready,Nn),Ln.addEventListener(vn.close,Nn),At.push(Nn),ei.debug("DRM: Session created.  SessionID = "+Nn.getSessionId()),An.trigger(on.KEY_SESSION_CREATED,{data:Nn})},updateKeySession:function(si,cn){const Wt=si.session;Qn.isClearKey(Ne)?Wt.update(new Uint8Array(cn.toJWK())):Wt.update(new Uint8Array(cn)),An.trigger(on.KEY_SESSION_UPDATED)},closeKeySession:vi,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:ai,reset:ai},ei=Un.getLogger(Hn),wn=null,Ne=null,Ke=null,ft=null,At=[],Qn=vt(Mn).getInstance(),un={handleEvent:function(si){if(si.type===vn.needkey&&si.initData){const cn=ArrayBuffer.isView(si.initData)?si.initData.buffer:si.initData;An.trigger(on.NEED_KEY,{key:new bt(cn,l.default.INITIALIZATION_DATA_TYPE_CENC)})}}},Hn}On.__dashjs_factory_name="ProtectionModel_3Feb2014";var Vn=Y.default.getClassFactory(On);function Sn(dn){dn=dn||{};const Mn=this.context,An=dn.eventBus,on=dn.events,Un=dn.debug,vn=dn.api,Hn=dn.errHandler;let ei,wn,Ne,Ke,ft,At,un,Qn,ai;function vi(){Ne&&cn();for(let Wt=0;Wt<un.length;Wt++)Xi(un[Wt]);An.trigger(on.TEARDOWN_COMPLETE)}function Xi(Wt){try{Ne[vn.cancelKeyRequest](Ke.systemString,Wt.sessionId)}catch(Ln){An.trigger(on.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+Wt.sessionId+") "+Ln.message})}}function si(Wt,Ln){if(Ln&&Wt){const Nn=Wt.length;for(let fi=0;fi<Nn;fi++)if(Wt[fi].sessionId==Ln)return Wt[fi];return null}return null}function cn(){Ne.removeEventListener(vn.keyerror,ai),Ne.removeEventListener(vn.needkey,ai),Ne.removeEventListener(vn.keymessage,ai),Ne.removeEventListener(vn.keyadded,ai)}return ei={getAllInitData:function(){const Wt=[];for(let Ln=0;Ln<At.length;Ln++)Wt.push(At[Ln].initData);for(let Ln=0;Ln<un.length;Ln++)Wt.push(un[Ln].initData);return Wt},getSessionTokens:function(){return un.concat(At)},requestKeySystemAccess:function(Wt){return new Promise((Ln,Nn)=>{let fi=Ne;fi||(fi=document.createElement("video"));let jn=!1;for(let cr=0;cr<Wt.length;cr++){const Ni=Wt[cr].ks.systemString,Ir=Wt[cr].configs;let it=null,Br=null;for(let Ws=0;Ws<Ir.length;Ws++){const Xs=Ir[Ws].videoCapabilities;if(Xs&&Xs.length!==0){Br=[];for(let ia=0;ia<Xs.length;ia++)fi.canPlayType(Xs[ia].contentType,Ni)!==""&&Br.push(Xs[ia])}if(!Br||it||Br&&Br.length===0)continue;jn=!0;const Po=new y(it,Br),es=ft.getKeySystemBySystemString(Ni),Tr=new kt(es,Po);An.trigger(on.KEY_SYSTEM_ACCESS_COMPLETE,{data:Tr}),Ln({data:Tr});break}}if(!jn){const cr="Key system access denied! -- No valid audio/video content configurations detected!";An.trigger(on.KEY_SYSTEM_ACCESS_COMPLETE,{error:cr}),Nn({error:cr})}})},selectKeySystem:function(Wt){return Ke=Wt.keySystem,Promise.resolve(Ke)},setMediaElement:function(Wt){if(Ne!==Wt){if(Ne){cn();for(var Ln=0;Ln<un.length;Ln++)Xi(un[Ln]);un=[]}Ne=Wt,Ne&&(Ne.addEventListener(vn.keyerror,ai),Ne.addEventListener(vn.needkey,ai),Ne.addEventListener(vn.keymessage,ai),Ne.addEventListener(vn.keyadded,ai),An.trigger(on.VIDEO_ELEMENT_SELECTED))}},createKeySession:function(Wt){if(!Ke)throw new Error("Can not create sessions until you have selected a key system");if(Qn||un.length===0){const Ln={sessionId:null,keyId:Wt.keyId,normalizedKeyId:Wt&&Wt.keyId&&typeof Wt.keyId=="string"?Wt.keyId.replace(/-/g,"").toLowerCase():"",initData:Wt.initData,hasTriggeredKeyStatusMapUpdate:!1,getKeyId:function(){return this.keyId},getSessionId:function(){return this.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},getKeyStatuses:function(){return{size:0,has:()=>!1,get:()=>{}}}};return At.push(Ln),Ne[vn.generateKeyRequest](Ke.systemString,new Uint8Array(Wt.initData)),Ln}throw new Error("Multiple sessions not allowed!")},updateKeySession:function(Wt,Ln){const Nn=Wt.sessionId;if(ft.isClearKey(Ke))for(let fi=0;fi<Ln.keyPairs.length;fi++)Ne[vn.addKey](Ke.systemString,Ln.keyPairs[fi].key,Ln.keyPairs[fi].keyID,Nn);else Ne[vn.addKey](Ke.systemString,new Uint8Array(Ln),new Uint8Array(Wt.initData),Nn);An.trigger(on.KEY_SESSION_UPDATED)},closeKeySession:Xi,setServerCertificate:function(){},loadKeySession:function(){},removeKeySession:function(){},stop:vi,reset:vi},wn=Un.getLogger(ei),Ne=null,Ke=null,At=[],un=[],ft=vt(Mn).getInstance(),ai={handleEvent:function(Wt){let Ln=null;switch(Wt.type){case vn.needkey:let Nn=ArrayBuffer.isView(Wt.initData)?Wt.initData.buffer:Wt.initData;An.trigger(on.NEED_KEY,{key:new bt(Nn,l.default.INITIALIZATION_DATA_TYPE_CENC)});break;case vn.keyerror:if(Ln=si(un,Wt.sessionId),Ln||(Ln=si(At,Wt.sessionId)),Ln){let fi=b.default.MEDIA_KEYERR_CODE,jn="";switch(Wt.errorCode.code){case 1:fi=b.default.MEDIA_KEYERR_UNKNOWN_CODE,jn+="MEDIA_KEYERR_UNKNOWN - "+b.default.MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:fi=b.default.MEDIA_KEYERR_CLIENT_CODE,jn+="MEDIA_KEYERR_CLIENT - "+b.default.MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:fi=b.default.MEDIA_KEYERR_SERVICE_CODE,jn+="MEDIA_KEYERR_SERVICE - "+b.default.MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:fi=b.default.MEDIA_KEYERR_OUTPUT_CODE,jn+="MEDIA_KEYERR_OUTPUT - "+b.default.MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:fi=b.default.MEDIA_KEYERR_HARDWARECHANGE_CODE,jn+="MEDIA_KEYERR_HARDWARECHANGE - "+b.default.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:fi=b.default.MEDIA_KEYERR_DOMAIN_CODE,jn+="MEDIA_KEYERR_DOMAIN - "+b.default.MEDIA_KEYERR_DOMAIN_MESSAGE}jn+="  System Code = "+Wt.systemCode,An.trigger(on.KEY_ERROR,{error:new _.default(fi,jn,Ln)})}else wn.error("No session token found for key error");break;case vn.keyadded:Ln=si(un,Wt.sessionId),Ln||(Ln=si(At,Wt.sessionId)),Ln?(wn.debug("DRM: Key added."),An.trigger(on.KEY_ADDED,{data:Ln})):wn.debug("No session token found for key added");break;case vn.keymessage:if(Qn=Wt.sessionId!==null&&Wt.sessionId!==void 0,Qn?(Ln=si(un,Wt.sessionId),!Ln&&At.length>0&&(Ln=At.shift(),un.push(Ln),Ln.sessionId=Wt.sessionId,An.trigger(on.KEY_SESSION_CREATED,{data:Ln}))):At.length>0&&(Ln=At.shift(),un.push(Ln),At.length!==0&&Hn.error(new _.default(b.default.MEDIA_KEY_MESSAGE_ERROR_CODE,b.default.MEDIA_KEY_MESSAGE_ERROR_MESSAGE))),Ln){let fi=ArrayBuffer.isView(Wt.message)?Wt.message.buffer:Wt.message;Ln.keyMessage=fi,An.trigger(on.INTERNAL_KEY_MESSAGE,{data:new Mt(Ln,fi,Wt.defaultURL)})}else wn.warn("No session token found for key message")}}},ei}Sn.__dashjs_factory_name="ProtectionModel_01b";var ni=Y.default.getClassFactory(Sn);const dr=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],_r=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function bs(){let dn;const Mn=this.context;function An(on,Un){for(let vn=0;vn<Un.length;vn++){const Hn=Un[vn];if(typeof on[Hn[Object.keys(Hn)[0]]]=="function")return Hn}return null}return dn={createProtectionSystem:function(on){let Un=null;const vn=vt(Mn).getInstance();vn.setConfig({debug:on.debug,BASE64:on.BASE64,settings:on.settings}),vn.initialize();let Hn=function(ei){const wn=ei.debug,Ne=wn.getLogger(dn),Ke=ei.eventBus,ft=ei.errHandler,At=ei.videoModel?ei.videoModel.getElement():null;return At&&At.onencrypted===void 0||At&&At.mediaKeys===void 0?An(At,_r)?(Ne.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),Vn(Mn).create({debug:wn,eventBus:Ke,events:ei.events,api:An(At,_r)})):An(At,dr)?(Ne.info("EME detected on this user agent! (ProtectionModel_01b)"),ni(Mn).create({debug:wn,eventBus:Ke,errHandler:ft,events:ei.events,api:An(At,dr)})):(Ne.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(Ne.info("EME detected on this user agent! (DefaultProtectionModel"),ti(Mn).create({debug:wn,eventBus:Ke,events:ei.events}))}(on);return Hn&&(Un=te(Mn).create({BASE64:on.BASE64,cmcdModel:on.cmcdModel,constants:on.constants,customParametersModel:on.customParametersModel,debug:on.debug,eventBus:on.eventBus,events:on.events,protectionKeyController:vn,protectionModel:Hn,settings:on.settings}),on.capabilities.setEncryptedMediaSupported(!0)),Un}},dn}bs.__dashjs_factory_name="Protection";const Zr=dashjs.FactoryMaker.getClassFactory(bs);Zr.events=Lt.default,Zr.errors=b.default,dashjs.FactoryMaker.updateClassFactory(bs.__dashjs_factory_name,Zr);var Zi=Zr},445:function(u,t,n){n.r(t);var r=n(7252);class l extends r.default{constructor(){super(),this.INTERNAL_KEY_MESSAGE="internalKeyMessage",this.INTERNAL_KEY_STATUSES_CHANGED="internalkeyStatusesChanged",this.KEY_ADDED="public_keyAdded",this.KEY_ERROR="public_keyError",this.KEY_MESSAGE="public_keyMessage",this.KEY_SESSION_CLOSED="public_keySessionClosed",this.KEY_SESSION_CREATED="public_keySessionCreated",this.KEY_SESSION_REMOVED="public_keySessionRemoved",this.KEY_STATUSES_CHANGED="public_keyStatusesChanged",this.KEY_STATUSES_MAP_UPDATED="keyStatusesMapUpdated",this.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",this.KEY_SYSTEM_SELECTED="public_keySystemSelected",this.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",this.LICENSE_REQUEST_SENDING="public_licenseRequestSending",this.NEED_KEY="needkey",this.PROTECTION_CREATED="public_protectioncreated",this.PROTECTION_DESTROYED="public_protectiondestroyed",this.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",this.TEARDOWN_COMPLETE="protectionTeardownComplete",this.VIDEO_ELEMENT_SELECTED="videoElementSelected",this.KEY_SESSION_UPDATED="public_keySessionUpdated"}}let d=new l;t.default=d},1923:function(u,t,n){n.r(t);var r=n(8748);class l extends r.default{constructor(){super(),this.MEDIA_KEYERR_CODE=100,this.MEDIA_KEYERR_UNKNOWN_CODE=101,this.MEDIA_KEYERR_CLIENT_CODE=102,this.MEDIA_KEYERR_SERVICE_CODE=103,this.MEDIA_KEYERR_OUTPUT_CODE=104,this.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,this.MEDIA_KEYERR_DOMAIN_CODE=106,this.MEDIA_KEY_MESSAGE_ERROR_CODE=107,this.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,this.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,this.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,this.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,this.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,this.KEY_SESSION_CREATED_ERROR_CODE=113,this.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,this.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",this.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",this.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",this.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",this.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",this.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",this.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",this.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",this.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",this.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",this.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",this.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",this.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",this.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --"}}let d=new l;t.default=d},559:function(u,t,n){n.r(t),n.d(t,{supportsMediaSource:function(){return m}});var r=n(138),l=n(5212),d=n(2861),f=n(7393),p=n(649);function m(){let b="ManagedMediaSource"in window,_="WebKitMediaSource"in window,A="MediaSource"in window;return b||_||A}function y(){let b,_,A,w,T,k;const U=this.context,Y=(0,f.default)(U).getInstance();function se(j,M){let Z;M===l.default.VIDEO?Z=function(x){const ue={video:{}};return x&&(x.width&&(ue.video.width=x.width),x.height&&(ue.video.height=x.height),x.framerate&&(ue.video.framerate=parseFloat(x.framerate)),x.hdrMetadataType&&(ue.video.hdrMetadataType=x.hdrMetadataType),x.colorGamut&&(ue.video.colorGamut=x.colorGamut),x.transferFunction&&(ue.video.transferFunction=x.transferFunction)),ue}(j):M===l.default.AUDIO&&(Z=function(x){const ue={audio:{}};return x.samplerate&&(ue.audio.samplerate=x.samplerate),ue}(j)),Z[M].contentType=j.codec,Z[M].bitrate=parseInt(j.bitrate),Z.type="media-source";let K=j.codec;return j.width&&j.height&&(K+=';width="'+j.width+'";height="'+j.height+'"'),Z.mediaSourceCodecString=K,function(x,ue,$e){return ue&&ue.keySystemsMetadata&&ue.keySystemsMetadata.length!==0?ue.keySystemsMetadata.map(xe=>{const lt={...x};if(xe.ks){lt.keySystemConfiguration={},xe.ks.systemString&&(lt.keySystemConfiguration.keySystem=xe.ks.systemString);let et="";xe.ks.systemString===d.default.WIDEVINE_KEYSTEM_STRING&&(et=d.default.ROBUSTNESS_STRINGS.WIDEVINE.SW_SECURE_CRYPTO);const Xe=xe.protData,ut=Xe&&Xe.audioRobustness&&Xe.audioRobustness.length>0?Xe.audioRobustness:et,Dt=Xe&&Xe.videoRobustness&&Xe.videoRobustness.length>0?Xe.videoRobustness:et;$e===l.default.AUDIO?lt.keySystemConfiguration[$e]={robustness:ut}:$e===l.default.VIDEO&&(lt.keySystemConfiguration[$e]={robustness:Dt})}return lt}):[x]}(Z,j,M)}function te(j){if(w&&w.length!==0&&j)return w.find(M=>{const Z=Re(j,M,l.default.AUDIO),K=Re(j,M,l.default.VIDEO),x=Re(j,M,"keySystemConfiguration");return Z&&K&&x})}function Re(j,M,Z){return!j[Z]&&!M[Z]||!(!j[Z]||!M[Z])&&Y.areEqual(j[Z],M[Z])}function Be(j,M){return(j=j.filter(Z=>!(Z.schemeIdUri&&M.some(K=>K.schemeIdUri===Z.schemeIdUri)))).push(...M),j}return b={areKeyIdsExpired:function(j){return!!(A&&j&&j.normalizedKeyIds&&j.normalizedKeyIds.size!==0)&&A.areKeyIdsExpired(j.normalizedKeyIds)},areKeyIdsUsable:function(j){return!(A&&j&&j.normalizedKeyIds&&j.normalizedKeyIds.size!==0)||A.areKeyIdsUsable(j.normalizedKeyIds)},isCodecSupportedBasedOnTestedConfigurations:function(j,M){if(!j||!j.codec||j.isSupported===!1)return!1;const Z=se(j,M).map(K=>te(K)).filter(K=>K!=null);return!(Z&&Z.length>0)||function(K){return K.some(x=>x&&x.decodingInfo&&x.decodingInfo.supported)}(Z)},isProtectionCompatible:function(j,M){return!M||!(!j.isEncrypted&&M.isEncrypted)},runCodecSupportCheck:function(j,M){if(M!==l.default.AUDIO&&M!==l.default.VIDEO)return Promise.resolve();const Z=se(j,M);return function(K,x){return _.get().streaming.capabilities.useMediaCapabilitiesApi&&navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo&&(K.codec&&x===l.default.AUDIO||x===l.default.VIDEO&&K.codec&&K.width&&K.height&&K.bitrate&&K.framerate)}(j,M)?function(K){return new Promise(x=>{if(!K||K.length===0)return void x();const ue=K.map($e=>function(xe){return new Promise(lt=>{te(xe)?lt():navigator.mediaCapabilities.decodingInfo(xe).then(et=>{xe.decodingInfo=et,w.push(xe),lt()}).catch(et=>{xe.decodingInfo={supported:!1},w.push(xe),k.error(et),lt()})})}($e));Promise.allSettled(ue).then(()=>{x()}).catch($e=>{k.error($e),x()})})}(Z):(function(K){if(!K||!K.length)return;const x=K[0];if(te(x))return;let ue={supported:!1};("ManagedMediaSource"in window&&ManagedMediaSource.isTypeSupported(x.mediaSourceCodecString)||"MediaSource"in window&&MediaSource.isTypeSupported(x.mediaSourceCodecString)||"WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported(x.mediaSourceCodecString))&&(ue.supported=!0),x.decodingInfo=ue,w.push(x)}(Z),Promise.resolve())},setConfig:function(j){j&&(j.settings&&(_=j.settings),j.protectionController&&(A=j.protectionController))},setEncryptedMediaSupported:function(j){T=j},setProtectionController:function(j){A=j},supportsChangeType:function(){return!!window.SourceBuffer&&!!SourceBuffer.prototype&&!!SourceBuffer.prototype.changeType},supportsEncryptedMedia:function(){return T},supportsEssentialProperty:function(j){let M=_.get().streaming.capabilities.supportedEssentialProperties;_.get().streaming.capabilities.useMediaCapabilitiesApi&&_.get().streaming.capabilities.filterVideoColorimetryEssentialProperties&&(M=Be(M,[{schemeIdUri:l.default.COLOUR_PRIMARIES_SCHEME_ID_URI},{schemeIdUri:l.default.MATRIX_COEFFICIENTS_SCHEME_ID_URI},{schemeIdUri:l.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI}])),_.get().streaming.capabilities.useMediaCapabilitiesApi&&_.get().streaming.capabilities.filterHDRMetadataFormatEssentialProperties&&(M=Be(M,[{schemeIdUri:l.default.HDR_METADATA_FORMAT_SCHEME_ID_URI}]));try{return j.inArray(M)}catch{return!0}},supportsMediaSource:m},T=!1,w=[],k=(0,p.default)(U).getInstance().getLogger(b),b}y.__dashjs_factory_name="Capabilities",t.default=r.default.getSingletonFactory(y)},7377:function(u,t,n){n.r(t);var r=n(138),l=n(656);function d(){return{customTimeRangeArray:[],length:0,add:function(f,p){let m;for(m=0;m<this.customTimeRangeArray.length&&f>this.customTimeRangeArray[m].start;m++);for(this.customTimeRangeArray.splice(m,0,{start:f,end:p}),m=0;m<this.customTimeRangeArray.length-1;m++)this.mergeRanges(m,m+1)&&m--;this.length=this.customTimeRangeArray.length},clear:function(){this.customTimeRangeArray=[],this.length=0},remove:function(f,p){for(let m=0;m<this.customTimeRangeArray.length;m++)if(f<=this.customTimeRangeArray[m].start&&p>=this.customTimeRangeArray[m].end)this.customTimeRangeArray.splice(m,1),m--;else{if(f>this.customTimeRangeArray[m].start&&p<this.customTimeRangeArray[m].end){this.customTimeRangeArray.splice(m+1,0,{start:p,end:this.customTimeRangeArray[m].end}),this.customTimeRangeArray[m].end=f;break}f>this.customTimeRangeArray[m].start&&f<this.customTimeRangeArray[m].end?this.customTimeRangeArray[m].end=f:p>this.customTimeRangeArray[m].start&&p<this.customTimeRangeArray[m].end&&(this.customTimeRangeArray[m].start=p)}this.length=this.customTimeRangeArray.length},mergeRanges:function(f,p){let m=this.customTimeRangeArray[f],y=this.customTimeRangeArray[p];return m.start<=y.start&&y.start<=m.end&&m.end<=y.end?(m.end=y.end,this.customTimeRangeArray.splice(p,1),!0):y.start<=m.start&&m.start<=y.end&&y.end<=m.end?(m.start=y.start,this.customTimeRangeArray.splice(p,1),!0):y.start<=m.start&&m.start<=y.end&&m.end<=y.end?(this.customTimeRangeArray.splice(f,1),!0):m.start<=y.start&&y.start<=m.end&&y.end<=m.end&&(this.customTimeRangeArray.splice(p,1),!0)},start:function(f){return(0,l.checkInteger)(f),f>=this.customTimeRangeArray.length||f<0?NaN:this.customTimeRangeArray[f].start},end:function(f){return(0,l.checkInteger)(f),f>=this.customTimeRangeArray.length||f<0?NaN:this.customTimeRangeArray[f].end}}}d.__dashjs_factory_name="CustomTimeRanges",t.default=r.default.getClassFactory(d)},7393:function(u,t,n){n.r(t);var r=n(138),l=n(7316);function d(){let f;return f={areEqual:function(p,m){return l(p,m)}},f}d.__dashjs_factory_name="ObjectUtils",t.default=r.default.getSingletonFactory(d)},656:function(u,t,n){n.r(t),n.d(t,{checkInteger:function(){return d},checkIsVideoOrAudioType:function(){return p},checkParameterType:function(){return l},checkRange:function(){return f}});var r=n(5212);function l(m,y){if(typeof m!==y)throw r.default.BAD_ARGUMENT_ERROR}function d(m){if(m===null||isNaN(m)||m%1!=0)throw r.default.BAD_ARGUMENT_ERROR+" : argument is not an integer"}function f(m,y,b){if(m<y||m>b)throw r.default.BAD_ARGUMENT_ERROR+" : argument out of range"}function p(m){if(typeof m!="string"||m!==r.default.AUDIO&&m!==r.default.VIDEO)throw r.default.BAD_ARGUMENT_ERROR}},1944:function(u,t,n){n.r(t),t.default=class{constructor(r,l,d){this.code=r||null,this.message=l||null,this.data=d||null}}},7568:function(u,t,n){n.r(t),n.d(t,{HTTPRequest:function(){return r},HTTPRequestTrace:function(){return l}});class r{constructor(){this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this.cmsd=null,this._stream=null,this._tfinish=null,this._mediaduration=null,this._responseHeaders=null,this._serviceLocation=null,this._fileLoaderType=null,this._resourceTimingValues=null}}class l{constructor(){this.s=null,this.d=null,this.b=[]}}r.GET="GET",r.HEAD="HEAD",r.MPD_TYPE="MPD",r.XLINK_EXPANSION_TYPE="XLinkExpansion",r.INIT_SEGMENT_TYPE="InitializationSegment",r.INDEX_SEGMENT_TYPE="IndexSegment",r.MEDIA_SEGMENT_TYPE="MediaSegment",r.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",r.MSS_FRAGMENT_INFO_SEGMENT_TYPE="FragmentInfoSegment",r.DVB_REPORTING_TYPE="DVBReporting",r.LICENSE="license",r.CONTENT_STEERING_TYPE="ContentSteering",r.OTHER_TYPE="other"}},ZR={};function co(u){var t=ZR[u];if(t!==void 0)return t.exports;var n=ZR[u]={exports:{}};return E5[u].call(n.exports,n,n.exports,co),n.exports}co.amdO={},co.d=function(u,t){for(var n in t)co.o(t,n)&&!co.o(u,n)&&Object.defineProperty(u,n,{enumerable:!0,get:t[n]})},co.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),co.o=function(u,t){return Object.prototype.hasOwnProperty.call(u,t)},co.r=function(u){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(u,"__esModule",{value:!0})};var Xu={};co.r(Xu),co.d(Xu,{Constants:function(){return oM.default},Debug:function(){return aM.default},MediaPlayer:function(){return b5.MediaPlayer},MediaPlayerFactory:function(){return sM},MetricsReporting:function(){return iM.default},Protection:function(){return rM.default},default:function(){return S5},supportsMediaSource:function(){return lM.supportsMediaSource}});var b5=co(5393),iM=co(4469),rM=co(3888),_5=co(4461);let e2,MT=function(){const u="application/dash+xml";let t;function n(l,d,f){if(!l||!/^VIDEO$/i.test(l.nodeName))return null;if(l._dashjs_player)return l._dashjs_player;let p,m=l.id||l.name||"video element";if(!(d=d||[].slice.call(l.querySelectorAll("source")).filter(function(y){return y.type==u})[0])&&l.src)(d=document.createElement("source")).src=l.src;else if(!d&&!l.src)return null;return f=f||{},p=(0,_5.default)(f).create(),p.initialize(l,d.src,l.autoplay),t||(t=p.getDebug().getLogger()),t.debug("Converted "+m+" to dash.js player and added content: "+d.src),l._dashjs_player=p,p}function r(l){return/^VIDEO$/i.test(l.nodeName)?l:r(l.parentNode)}return{create:n,createAll:function(l,d){let f=[];l=l||"[data-dashjs-player]";let p=(d=d||document).querySelectorAll(l);for(let y=0;y<p.length;y++){let b=n(p[y],null);f.push(b)}let m=d.querySelectorAll('source[type="'+u+'"]');for(let y=0;y<m.length;y++){let b=n(r(m[y]),null);f.push(b)}return f}}}();!(typeof window<"u"&&window&&window.dashjs&&window.dashjs.skipAutoCreate)&&typeof window<"u"&&window&&window.addEventListener&&(window.document.readyState==="complete"?window.dashjs?MT.createAll():e2=window.setInterval(function(){window.dashjs&&(window.clearInterval(e2),MT.createAll())},500):window.addEventListener("load",function u(){window.removeEventListener("load",u),MT.createAll()}));var sM=MT,aM=co(649),oM=co(5212),lM=co(559);dashjs.Protection=rM.default,dashjs.MetricsReporting=iM.default,dashjs.MediaPlayerFactory=sM,dashjs.Debug=aM.default,dashjs.supportsMediaSource=lM.supportsMediaSource,dashjs.Constants=oM.default;var S5=dashjs;(Xu=Xu.default).Constants;Xu.Debug;var t2=Xu.MediaPlayer;Xu.MediaPlayerFactory;Xu.MetricsReporting;Xu.Protection;Xu.default;Xu.supportsMediaSource;var x5=Ka('<div class=player-container><div class="player-label player-name-label">Dash.js</div><div class="player-label player-status-label"></div><div class="player-label player-time-label"></div><video muted width=320 height=240>'),A5=Ka("<div>");const w5={};function I5(u){let t,n;const[r,l]=Va(null);let d=null,f=null,p=null;const[m,y]=Va([]),b=async()=>{n=t2().create(),n.initialize(t,void 0,!0);for(const w of["PLAYBACK_ENDED","PLAYBACK_ERROR","PLAYBACK_PAUSED","PLAYBACK_PLAYING","PLAYBACK_STALLED","PLAYBACK_WAITING"])n.on(t2.events[w],T=>{var Y;let k=(Y=T.type)==null?void 0:Y.toLowerCase().replace("playback","");if(k==="waiting"&&(k="buffering"),k==null||k===p)return;const U=performance.now();if(p!=="playing"&&f!=null){const se=((U-f)/1e3).toFixed(2);y(te=>[`${p} for ${se}s`,...te])}f=U,p=k,l(k)});t.muted=!0,t.addEventListener("loadeddata",()=>{if(d!==null){const T=((performance.now()-d)/1e3).toFixed(2);y(k=>[` loaded in ${T}s`,...k])}})},_=async(w,T)=>{if(y([]),l("loading"),f=null,p=null,!!n){if(w==null){l(null),n.attachSource(null);return}try{if(d=performance.now(),n.attachSource(w),T){const k={"com.widevine.alpha":{serverURL:T}};n.setProtectionData(k)}n.updateSettings(w5)}catch(k){console.error("Dashjs: Error code",k.code,"object",k),l(`error: ${k.code||"unknown"}`)}}},A=async()=>{try{n==null||n.destroy()}catch(w){console.error("Dashjs: Error destroying Dashjs player:",w)}};return Mf(()=>b()),zh(()=>_(u.playbackUrl,u.licenseUrl)),jh(()=>A()),(()=>{var w=x5(),T=w.firstChild,k=T.nextSibling,U=k.nextSibling,Y=U.nextSibling;T.style.setProperty("background","green"),ls(k,r),ls(U,xl(Od,{get each(){return m()},children:te=>(()=>{var Re=A5();return ls(Re,te),Re})()}));var se=t;return typeof se=="function"?jy(se,Y):t=Y,w})()}const xi=Number.isFinite||function(u){return typeof u=="number"&&isFinite(u)},C5=Number.isSafeInteger||function(u){return typeof u=="number"&&Math.abs(u)<=k5},k5=Number.MAX_SAFE_INTEGER||9007199254740991;let Hi=function(u){return u.NETWORK_ERROR="networkError",u.MEDIA_ERROR="mediaError",u.KEY_SYSTEM_ERROR="keySystemError",u.MUX_ERROR="muxError",u.OTHER_ERROR="otherError",u}({}),pn=function(u){return u.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",u.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",u.KEY_SYSTEM_NO_SESSION="keySystemNoSession",u.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",u.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",u.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",u.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",u.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",u.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",u.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",u.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR="keySystemDestroyMediaKeysError",u.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR="keySystemDestroyCloseSessionError",u.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR="keySystemDestroyRemoveSessionError",u.MANIFEST_LOAD_ERROR="manifestLoadError",u.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",u.MANIFEST_PARSING_ERROR="manifestParsingError",u.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",u.LEVEL_EMPTY_ERROR="levelEmptyError",u.LEVEL_LOAD_ERROR="levelLoadError",u.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",u.LEVEL_PARSING_ERROR="levelParsingError",u.LEVEL_SWITCH_ERROR="levelSwitchError",u.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",u.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",u.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",u.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",u.FRAG_LOAD_ERROR="fragLoadError",u.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",u.FRAG_DECRYPT_ERROR="fragDecryptError",u.FRAG_PARSING_ERROR="fragParsingError",u.FRAG_GAP="fragGap",u.REMUX_ALLOC_ERROR="remuxAllocError",u.KEY_LOAD_ERROR="keyLoadError",u.KEY_LOAD_TIMEOUT="keyLoadTimeOut",u.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",u.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",u.BUFFER_APPEND_ERROR="bufferAppendError",u.BUFFER_APPENDING_ERROR="bufferAppendingError",u.BUFFER_STALLED_ERROR="bufferStalledError",u.BUFFER_FULL_ERROR="bufferFullError",u.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",u.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",u.ASSET_LIST_LOAD_ERROR="assetListLoadError",u.ASSET_LIST_LOAD_TIMEOUT="assetListLoadTimeout",u.ASSET_LIST_PARSING_ERROR="assetListParsingError",u.INTERSTITIAL_ASSET_ITEM_ERROR="interstitialAssetItemError",u.INTERNAL_EXCEPTION="internalException",u.INTERNAL_ABORTED="aborted",u.ATTACH_MEDIA_ERROR="attachMediaError",u.UNKNOWN="unknown",u}({}),He=function(u){return u.MEDIA_ATTACHING="hlsMediaAttaching",u.MEDIA_ATTACHED="hlsMediaAttached",u.MEDIA_DETACHING="hlsMediaDetaching",u.MEDIA_DETACHED="hlsMediaDetached",u.MEDIA_ENDED="hlsMediaEnded",u.STALL_RESOLVED="hlsStallResolved",u.BUFFER_RESET="hlsBufferReset",u.BUFFER_CODECS="hlsBufferCodecs",u.BUFFER_CREATED="hlsBufferCreated",u.BUFFER_APPENDING="hlsBufferAppending",u.BUFFER_APPENDED="hlsBufferAppended",u.BUFFER_EOS="hlsBufferEos",u.BUFFERED_TO_END="hlsBufferedToEnd",u.BUFFER_FLUSHING="hlsBufferFlushing",u.BUFFER_FLUSHED="hlsBufferFlushed",u.MANIFEST_LOADING="hlsManifestLoading",u.MANIFEST_LOADED="hlsManifestLoaded",u.MANIFEST_PARSED="hlsManifestParsed",u.LEVEL_SWITCHING="hlsLevelSwitching",u.LEVEL_SWITCHED="hlsLevelSwitched",u.LEVEL_LOADING="hlsLevelLoading",u.LEVEL_LOADED="hlsLevelLoaded",u.LEVEL_UPDATED="hlsLevelUpdated",u.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",u.LEVELS_UPDATED="hlsLevelsUpdated",u.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",u.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",u.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",u.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",u.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",u.AUDIO_TRACK_UPDATED="hlsAudioTrackUpdated",u.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",u.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",u.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",u.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",u.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",u.SUBTITLE_TRACK_UPDATED="hlsSubtitleTrackUpdated",u.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",u.CUES_PARSED="hlsCuesParsed",u.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",u.INIT_PTS_FOUND="hlsInitPtsFound",u.FRAG_LOADING="hlsFragLoading",u.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",u.FRAG_LOADED="hlsFragLoaded",u.FRAG_DECRYPTED="hlsFragDecrypted",u.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",u.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",u.FRAG_PARSING_METADATA="hlsFragParsingMetadata",u.FRAG_PARSED="hlsFragParsed",u.FRAG_BUFFERED="hlsFragBuffered",u.FRAG_CHANGED="hlsFragChanged",u.FPS_DROP="hlsFpsDrop",u.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",u.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",u.ERROR="hlsError",u.DESTROYING="hlsDestroying",u.KEY_LOADING="hlsKeyLoading",u.KEY_LOADED="hlsKeyLoaded",u.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",u.BACK_BUFFER_REACHED="hlsBackBufferReached",u.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",u.ASSET_LIST_LOADING="hlsAssetListLoading",u.ASSET_LIST_LOADED="hlsAssetListLoaded",u.INTERSTITIALS_UPDATED="hlsInterstitialsUpdated",u.INTERSTITIALS_BUFFERED_TO_BOUNDARY="hlsInterstitialsBufferedToBoundary",u.INTERSTITIAL_ASSET_PLAYER_CREATED="hlsInterstitialAssetPlayerCreated",u.INTERSTITIAL_STARTED="hlsInterstitialStarted",u.INTERSTITIAL_ASSET_STARTED="hlsInterstitialAssetStarted",u.INTERSTITIAL_ASSET_ENDED="hlsInterstitialAssetEnded",u.INTERSTITIAL_ASSET_ERROR="hlsInterstitialAssetError",u.INTERSTITIAL_ENDED="hlsInterstitialEnded",u.INTERSTITIALS_PRIMARY_RESUMED="hlsInterstitialsPrimaryResumed",u.PLAYOUT_LIMIT_REACHED="hlsPlayoutLimitReached",u.EVENT_CUE_ENTER="hlsEventCueEnter",u}({});var Fr={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},Ui={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};class $p{constructor(t,n=0,r=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=t,this.alpha_=t?Math.exp(Math.log(.5)/t):0,this.estimate_=n,this.totalWeight_=r}sample(t,n){const r=Math.pow(this.alpha_,t);this.estimate_=n*(1-r)+r*this.estimate_,this.totalWeight_+=t}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const t=1-Math.pow(this.alpha_,this.totalWeight_);if(t)return this.estimate_/t}return this.estimate_}}class D5{constructor(t,n,r,l=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=r,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new $p(t),this.fast_=new $p(n),this.defaultTTFB_=l,this.ttfb_=new $p(t)}update(t,n){const{slow_:r,fast_:l,ttfb_:d}=this;r.halfLife!==t&&(this.slow_=new $p(t,r.getEstimate(),r.getTotalWeight())),l.halfLife!==n&&(this.fast_=new $p(n,l.getEstimate(),l.getTotalWeight())),d.halfLife!==t&&(this.ttfb_=new $p(t,d.getEstimate(),d.getTotalWeight()))}sample(t,n){t=Math.max(t,this.minDelayMs_);const r=8*n,l=t/1e3,d=r/l;this.fast_.sample(l,d),this.slow_.sample(l,d)}sampleTTFB(t){const n=t/1e3,r=Math.sqrt(2)*Math.exp(-Math.pow(n,2)/2);this.ttfb_.sample(r,Math.max(t,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}get defaultEstimate(){return this.defaultEstimate_}destroy(){}}function R5(u,t,n){return(t=P5(t))in u?Object.defineProperty(u,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):u[t]=n,u}function hs(){return hs=Object.assign?Object.assign.bind():function(u){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(u[r]=n[r])}return u},hs.apply(null,arguments)}function n2(u,t){var n=Object.keys(u);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(u);t&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(u,l).enumerable})),n.push.apply(n,r)}return n}function as(u){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?n2(Object(n),!0).forEach(function(r){R5(u,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(n)):n2(Object(n)).forEach(function(r){Object.defineProperty(u,r,Object.getOwnPropertyDescriptor(n,r))})}return u}function L5(u,t){if(typeof u!="object"||!u)return u;var n=u[Symbol.toPrimitive];if(n!==void 0){var r=n.call(u,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(u)}function P5(u){var t=L5(u,"string");return typeof t=="symbol"?t:t+""}class Bd{constructor(t,n){this.trace=void 0,this.debug=void 0,this.log=void 0,this.warn=void 0,this.info=void 0,this.error=void 0;const r=`[${t}]:`;this.trace=Af,this.debug=n.debug.bind(null,r),this.log=n.log.bind(null,r),this.warn=n.warn.bind(null,r),this.info=n.info.bind(null,r),this.error=n.error.bind(null,r)}}const Af=function(){},M5={trace:Af,debug:Af,log:Af,warn:Af,info:Af,error:Af};function fA(){return hs({},M5)}function N5(u,t){const n=self.console[u];return n?n.bind(self.console,`${t?"["+t+"] ":""}[${u}] >`):Af}function i2(u,t,n){return t[u]?t[u].bind(t):N5(u,n)}const hA=fA();function O5(u,t,n){const r=fA();if(typeof console=="object"&&u===!0||typeof u=="object"){const l=["debug","log","info","warn","error"];l.forEach(d=>{r[d]=i2(d,u,n)});try{r.log(`Debug logs enabled for "${t}" in hls.js version 1.6.2`)}catch{return fA()}l.forEach(d=>{hA[d]=i2(d,u)})}else hs(hA,r);return r}const Gr=hA;function kf(u=!0){return typeof self>"u"?void 0:(u||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function F5(u){return typeof self<"u"&&u===self.ManagedMediaSource}function uM(u,t){const n=Object.keys(u),r=Object.keys(t),l=n.length,d=r.length;return!l||!d||l===d&&!n.some(f=>r.indexOf(f)===-1)}function Zl(u,t=!1){if(typeof TextDecoder<"u"){const y=new TextDecoder("utf-8").decode(u);if(t){const b=y.indexOf("\0");return b!==-1?y.substring(0,b):y}return y.replace(/\0/g,"")}const n=u.length;let r,l,d,f="",p=0;for(;p<n;){if(r=u[p++],r===0&&t)return f;if(r===0||r===3)continue;switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:f+=String.fromCharCode(r);break;case 12:case 13:l=u[p++],f+=String.fromCharCode((r&31)<<6|l&63);break;case 14:l=u[p++],d=u[p++],f+=String.fromCharCode((r&15)<<12|(l&63)<<6|(d&63)<<0);break}}return f}const Dc={hexDump:function(u){let t="";for(let n=0;n<u.length;n++){let r=u[n].toString(16);r.length<2&&(r="0"+r),t+=r}return t}};function U5(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var ix={exports:{}},r2;function B5(){return r2||(r2=1,function(u,t){(function(n){var r=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,l=/^(?=([^\/?#]*))\1([^]*)$/,d=/(?:\/|^)\.(?=\/)/g,f=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,p={buildAbsoluteURL:function(m,y,b){if(b=b||{},m=m.trim(),y=y.trim(),!y){if(!b.alwaysNormalize)return m;var _=p.parseURL(m);if(!_)throw new Error("Error trying to parse base URL.");return _.path=p.normalizePath(_.path),p.buildURLFromParts(_)}var A=p.parseURL(y);if(!A)throw new Error("Error trying to parse relative URL.");if(A.scheme)return b.alwaysNormalize?(A.path=p.normalizePath(A.path),p.buildURLFromParts(A)):y;var w=p.parseURL(m);if(!w)throw new Error("Error trying to parse base URL.");if(!w.netLoc&&w.path&&w.path[0]!=="/"){var T=l.exec(w.path);w.netLoc=T[1],w.path=T[2]}w.netLoc&&!w.path&&(w.path="/");var k={scheme:w.scheme,netLoc:A.netLoc,path:null,params:A.params,query:A.query,fragment:A.fragment};if(!A.netLoc&&(k.netLoc=w.netLoc,A.path[0]!=="/"))if(!A.path)k.path=w.path,A.params||(k.params=w.params,A.query||(k.query=w.query));else{var U=w.path,Y=U.substring(0,U.lastIndexOf("/")+1)+A.path;k.path=p.normalizePath(Y)}return k.path===null&&(k.path=b.alwaysNormalize?p.normalizePath(A.path):A.path),p.buildURLFromParts(k)},parseURL:function(m){var y=r.exec(m);return y?{scheme:y[1]||"",netLoc:y[2]||"",path:y[3]||"",params:y[4]||"",query:y[5]||"",fragment:y[6]||""}:null},normalizePath:function(m){for(m=m.split("").reverse().join("").replace(d,"");m.length!==(m=m.replace(f,"")).length;);return m.split("").reverse().join("")},buildURLFromParts:function(m){return m.scheme+m.netLoc+m.path+m.params+m.query+m.fragment}};u.exports=p})()}(ix)),ix.exports}var sw=B5();class aw{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var fs={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class cM{constructor(t){this._byteRange=null,this._url=null,this._stats=null,this._streams=null,this.base=void 0,this.relurl=void 0,typeof t=="string"&&(t={url:t}),this.base=t,j5(this,"stats")}setByteRange(t,n){const r=t.split("@",2);let l;r.length===1?l=(n==null?void 0:n.byteRangeEndOffset)||0:l=parseInt(r[1]),this._byteRange=[l,parseInt(r[0])+l]}get baseurl(){return this.base.url}get byteRange(){return this._byteRange===null?[]:this._byteRange}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get elementaryStreams(){return this._streams===null&&(this._streams={[fs.AUDIO]:null,[fs.VIDEO]:null,[fs.AUDIOVIDEO]:null}),this._streams}set elementaryStreams(t){this._streams=t}get hasStats(){return this._stats!==null}get hasStreams(){return this._streams!==null}get stats(){return this._stats===null&&(this._stats=new aw),this._stats}set stats(t){this._stats=t}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=sw.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(t){this._url=t}clearElementaryStreamInfo(){const{elementaryStreams:t}=this;t[fs.AUDIO]=null,t[fs.VIDEO]=null,t[fs.AUDIOVIDEO]=null}}function Ha(u){return u.sn!=="initSegment"}class rx extends cM{constructor(t,n){super(n),this._decryptdata=null,this._programDateTime=null,this._ref=null,this._bitrate=void 0,this.rawProgramDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.playlistOffset=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=t}get byteLength(){if(this.hasStats){const t=this.stats.total;if(t)return t}if(this.byteRange){const t=this.byteRange[0],n=this.byteRange[1];if(xi(t)&&xi(n))return n-t}return null}get bitrate(){return this.byteLength?this.byteLength*8/this.duration:this._bitrate?this._bitrate:null}set bitrate(t){this._bitrate=t}get decryptdata(){const{levelkeys:t}=this;if(!t&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const n=this.levelkeys.identity;if(n)this._decryptdata=n.getDecryptData(this.sn);else{const r=Object.keys(this.levelkeys);if(r.length===1)return this._decryptdata=this.levelkeys[r[0]].getDecryptData(this.sn)}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null)return null;const t=xi(this.duration)?this.duration:0;return this.programDateTime+t*1e3}get encrypted(){var t;if((t=this._decryptdata)!=null&&t.encrypted)return!0;if(this.levelkeys){const n=Object.keys(this.levelkeys),r=n.length;if(r>1||r===1&&this.levelkeys[n[0]].encrypted)return!0}return!1}get programDateTime(){return this._programDateTime===null&&this.rawProgramDateTime&&(this.programDateTime=Date.parse(this.rawProgramDateTime)),this._programDateTime}set programDateTime(t){if(!xi(t)){this._programDateTime=this.rawProgramDateTime=null;return}this._programDateTime=t}get ref(){return Ha(this)?(this._ref||(this._ref={base:this.base,start:this.start,duration:this.duration,sn:this.sn,programDateTime:this.programDateTime}),this._ref):null}addStart(t){this.setStart(this.start+t)}setStart(t){this.start=t,this._ref&&(this._ref.start=t)}setDuration(t){this.duration=t,this._ref&&(this._ref.duration=t)}setKeyFormat(t){if(this.levelkeys){const n=this.levelkeys[t];n&&!this._decryptdata&&(this._decryptdata=n.getDecryptData(this.sn))}}abortRequests(){var t,n;(t=this.loader)==null||t.abort(),(n=this.keyLoader)==null||n.abort()}setElementaryStreamInfo(t,n,r,l,d,f=!1){const{elementaryStreams:p}=this,m=p[t];if(!m){p[t]={startPTS:n,endPTS:r,startDTS:l,endDTS:d,partial:f};return}m.startPTS=Math.min(m.startPTS,n),m.endPTS=Math.max(m.endPTS,r),m.startDTS=Math.min(m.startDTS,l),m.endDTS=Math.max(m.endDTS,d)}}class z5 extends cM{constructor(t,n,r,l,d){super(r),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.duration=t.decimalFloatingPoint("DURATION"),this.gap=t.bool("GAP"),this.independent=t.bool("INDEPENDENT"),this.relurl=t.enumeratedString("URI"),this.fragment=n,this.index=l;const f=t.enumeratedString("BYTERANGE");f&&this.setByteRange(f,d),d&&(this.fragOffset=d.fragOffset+d.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:t}=this;return!!(t.audio||t.video||t.audiovideo)}}function dM(u,t){const n=Object.getPrototypeOf(u);if(n){const r=Object.getOwnPropertyDescriptor(n,t);return r||dM(n,t)}}function j5(u,t){const n=dM(u,t);n&&(n.enumerable=!0,Object.defineProperty(u,t,n))}const JT=Math.pow(2,32)-1,q5=[].push,fM={video:1,audio:2,id3:3,text:4};function wa(u){return String.fromCharCode.apply(null,u)}function hM(u,t){const n=u[t]<<8|u[t+1];return n<0?65536+n:n}function rr(u,t){const n=pM(u,t);return n<0?4294967296+n:n}function s2(u,t){let n=rr(u,t);return n*=Math.pow(2,32),n+=rr(u,t+4),n}function pM(u,t){return u[t]<<24|u[t+1]<<16|u[t+2]<<8|u[t+3]}function sx(u,t,n){u[t]=n>>24,u[t+1]=n>>16&255,u[t+2]=n>>8&255,u[t+3]=n&255}function H5(u){const t=u.byteLength;for(let n=0;n<t;){const r=rr(u,n);if(r>8&&u[n+4]===109&&u[n+5]===111&&u[n+6]===111&&u[n+7]===102)return!0;n=r>1?n+r:t}return!1}function vr(u,t){const n=[];if(!t.length)return n;const r=u.byteLength;for(let l=0;l<r;){const d=rr(u,l),f=wa(u.subarray(l+4,l+8)),p=d>1?l+d:r;if(f===t[0])if(t.length===1)n.push(u.subarray(l+8,p));else{const m=vr(u.subarray(l+8,p),t.slice(1));m.length&&q5.apply(n,m)}l=p}return n}function G5(u){const t=[],n=u[0];let r=8;const l=rr(u,r);r+=4;let d=0,f=0;n===0?(d=rr(u,r),f=rr(u,r+4),r+=8):(d=s2(u,r),f=s2(u,r+8),r+=16),r+=2;let p=u.length+f;const m=hM(u,r);r+=2;for(let y=0;y<m;y++){let b=r;const _=rr(u,b);b+=4;const A=_&2147483647;if((_&2147483648)>>>31===1)return Gr.warn("SIDX has hierarchical references (not supported)"),null;const T=rr(u,b);b+=4,t.push({referenceSize:A,subsegmentDuration:T,info:{duration:T/l,start:p,end:p+A-1}}),p+=A,b+=4,r=b}return{earliestPresentationTime:d,timescale:l,version:n,referencesCount:m,references:t}}function gM(u){const t=[],n=vr(u,["moov","trak"]);for(let l=0;l<n.length;l++){const d=n[l],f=vr(d,["tkhd"])[0];if(f){let p=f[0];const m=rr(f,p===0?12:20),y=vr(d,["mdia","mdhd"])[0];if(y){p=y[0];const b=rr(y,p===0?12:20),_=vr(d,["mdia","hdlr"])[0];if(_){const A=wa(_.subarray(8,12)),w={soun:fs.AUDIO,vide:fs.VIDEO}[A],T=vr(d,["mdia","minf","stbl","stsd"])[0],k=V5(T);w?(t[m]={timescale:b,type:w,stsd:k},t[w]=as({timescale:b,id:m},k)):t[m]={timescale:b,type:A,stsd:k}}}}}return vr(u,["moov","mvex","trex"]).forEach(l=>{const d=rr(l,4),f=t[d];f&&(f.default={duration:rr(l,12),flags:rr(l,20)})}),t}function V5(u){const t=u.subarray(8),n=t.subarray(86),r=wa(t.subarray(4,8));let l=r,d;const f=r==="enca"||r==="encv";if(f){const y=vr(t,[r])[0].subarray(r==="enca"?28:78);vr(y,["sinf"]).forEach(_=>{const A=vr(_,["schm"])[0];if(A){const w=wa(A.subarray(4,8));if(w==="cbcs"||w==="cenc"){const T=vr(_,["frma"])[0];T&&(l=wa(T))}}})}const p=l;switch(l){case"avc1":case"avc2":case"avc3":case"avc4":{const m=vr(n,["avcC"])[0];m&&m.length>3&&(l+="."+hT(m[1])+hT(m[2])+hT(m[3]),d=fT(p==="avc1"?"dva1":"dvav",n));break}case"mp4a":{const m=vr(t,[r])[0],y=vr(m.subarray(28),["esds"])[0];if(y&&y.length>7){let b=4;if(y[b++]!==3)break;b=ax(y,b),b+=2;const _=y[b++];if(_&128&&(b+=2),_&64&&(b+=y[b++]),y[b++]!==4)break;b=ax(y,b);const A=y[b++];if(A===64)l+="."+hT(A);else break;if(b+=12,y[b++]!==5)break;b=ax(y,b);const w=y[b++];let T=(w&248)>>3;T===31&&(T+=1+((w&7)<<3)+((y[b]&224)>>5)),l+="."+T}break}case"hvc1":case"hev1":{const m=vr(n,["hvcC"])[0];if(m&&m.length>12){const y=m[1],b=["","A","B","C"][y>>6],_=y&31,A=rr(m,2),w=(y&32)>>5?"H":"L",T=m[12],k=m.subarray(6,12);l+="."+b+_,l+="."+A.toString(16).toUpperCase(),l+="."+w+T;let U="";for(let Y=k.length;Y--;){const se=k[Y];(se||U)&&(U="."+se.toString(16).toUpperCase()+U)}l+=U}d=fT(p=="hev1"?"dvhe":"dvh1",n);break}case"dvh1":case"dvhe":case"dvav":case"dva1":case"dav1":{l=fT(l,n)||l;break}case"vp09":{const m=vr(n,["vpcC"])[0];if(m&&m.length>6){const y=m[4],b=m[5],_=m[6]>>4&15;l+="."+kc(y)+"."+kc(b)+"."+kc(_)}break}case"av01":{const m=vr(n,["av1C"])[0];if(m&&m.length>2){const y=m[1]>>>5,b=m[1]&31,_=m[2]>>>7?"H":"M",A=(m[2]&64)>>6,w=(m[2]&32)>>5,T=y===2&&A?w?12:10:A?10:8,k=(m[2]&16)>>4,U=(m[2]&8)>>3,Y=(m[2]&4)>>2,se=m[2]&3;l+="."+y+"."+kc(b)+_+"."+kc(T)+"."+k+"."+U+Y+se+"."+kc(1)+"."+kc(1)+"."+kc(1)+"."+0,d=fT("dav1",n)}break}}return{codec:l,encrypted:f,supplemental:d}}function fT(u,t){const n=vr(t,["dvvC"]),r=n.length?n[0]:vr(t,["dvcC"])[0];if(r){const l=r[2]>>1&127,d=r[2]<<5&32|r[3]>>3&31;return u+"."+kc(l)+"."+kc(d)}}function ax(u,t){const n=t+5;for(;u[t++]&128&&t<n;);return t}function hT(u){return("0"+u.toString(16).toUpperCase()).slice(-2)}function kc(u){return(u<10?"0":"")+u}function $5(u,t){if(!u||!t)return u;const n=t.keyId;return n&&t.isCommonEncryption&&vr(u,["moov","trak"]).forEach(l=>{const f=vr(l,["mdia","minf","stbl","stsd"])[0].subarray(8);let p=vr(f,["enca"]);const m=p.length>0;m||(p=vr(f,["encv"])),p.forEach(y=>{const b=m?y.subarray(28):y.subarray(78);vr(b,["sinf"]).forEach(A=>{const w=mM(A);if(w){const T=w.subarray(8,24);T.some(k=>k!==0)||(Gr.log(`[eme] Patching keyId in 'enc${m?"a":"v"}>sinf>>tenc' box: ${Dc.hexDump(T)} -> ${Dc.hexDump(n)}`),w.set(n,8))}})})}),u}function mM(u){const t=vr(u,["schm"])[0];if(t){const n=wa(t.subarray(4,8));if(n==="cbcs"||n==="cenc")return vr(u,["schi","tenc"])[0]}return null}function K5(u,t){return vr(t,["moof","traf"]).reduce((n,r)=>{const l=vr(r,["tfdt"])[0],d=l[0],f=vr(r,["tfhd"]).reduce((p,m)=>{const y=rr(m,4),b=u[y];if(b){let _=rr(l,4);if(d===1){if(_===JT)return Gr.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),p;_*=JT+1,_+=rr(l,8)}const A=b.timescale||9e4,w=_/A;if(xi(w)&&(p===null||w<p))return w}return p},null);return f!==null&&xi(f)&&(n===null||f<n)?f:n},null)}function Y5(u,t){let n=0,r=0,l=0;const d=vr(u,["moof","traf"]);for(let f=0;f<d.length;f++){const p=d[f],m=vr(p,["tfhd"])[0],y=rr(m,4),b=t[y];if(!b)continue;const _=b.default,A=rr(m,0)|(_==null?void 0:_.flags);let w=_==null?void 0:_.duration;A&8&&(A&2?w=rr(m,12):w=rr(m,8));const T=b.timescale||9e4,k=vr(p,["trun"]);for(let U=0;U<k.length;U++){if(n=W5(k[U]),!n&&w){const Y=rr(k[U],4);n=w*Y}b.type===fs.VIDEO?r+=n/T:b.type===fs.AUDIO&&(l+=n/T)}}if(r===0&&l===0){let f=1/0,p=0,m=0;const y=vr(u,["sidx"]);for(let b=0;b<y.length;b++){const _=G5(y[b]);if(_!=null&&_.references){f=Math.min(f,_.earliestPresentationTime/_.timescale);const A=_.references.reduce((w,T)=>w+T.info.duration||0,0);p=Math.max(p,A+_.earliestPresentationTime/_.timescale),m=p-f}}if(m&&xi(m))return m}return r||l}function W5(u){const t=rr(u,0);let n=8;t&1&&(n+=4),t&4&&(n+=4);let r=0;const l=rr(u,4);for(let d=0;d<l;d++){if(t&256){const f=rr(u,n);r+=f,n+=4}t&512&&(n+=4),t&1024&&(n+=4),t&2048&&(n+=4)}return r}function X5(u,t,n){vr(t,["moof","traf"]).forEach(r=>{vr(r,["tfhd"]).forEach(l=>{const d=rr(l,4),f=u[d];if(!f)return;const p=f.timescale||9e4;vr(r,["tfdt"]).forEach(m=>{const y=m[0],b=n*p;if(b){let _=rr(m,4);if(y===0)_-=b,_=Math.max(_,0),sx(m,4,_);else{_*=Math.pow(2,32),_+=rr(m,8),_-=b,_=Math.max(_,0);const A=Math.floor(_/(JT+1)),w=Math.floor(_%(JT+1));sx(m,4,A),sx(m,8,w)}}})})})}function Q5(u){const t={valid:null,remainder:null},n=vr(u,["moof"]);if(n.length<2)return t.remainder=u,t;const r=n[n.length-1];return t.valid=u.slice(0,r.byteOffset-8),t.remainder=u.slice(r.byteOffset-8),t}function _u(u,t){const n=new Uint8Array(u.length+t.length);return n.set(u),n.set(t,u.length),n}function a2(u,t){const n=[],r=t.samples,l=t.timescale,d=t.id;let f=!1;return vr(r,["moof"]).map(m=>{const y=m.byteOffset-8;vr(m,["traf"]).map(_=>{const A=vr(_,["tfdt"]).map(w=>{const T=w[0];let k=rr(w,4);return T===1&&(k*=Math.pow(2,32),k+=rr(w,8)),k/l})[0];return A!==void 0&&(u=A),vr(_,["tfhd"]).map(w=>{const T=rr(w,4),k=rr(w,0)&16777215,U=(k&1)!==0,Y=(k&2)!==0,se=(k&8)!==0;let te=0;const Re=(k&16)!==0;let Be=0;const j=(k&32)!==0;let M=8;T===d&&(U&&(M+=8),Y&&(M+=4),se&&(te=rr(w,M),M+=4),Re&&(Be=rr(w,M),M+=4),j&&(M+=4),t.type==="video"&&(f=DE(t.codec)),vr(_,["trun"]).map(Z=>{const K=Z[0],x=rr(Z,0)&16777215,ue=(x&1)!==0;let $e=0;const xe=(x&4)!==0,lt=(x&256)!==0;let et=0;const Xe=(x&512)!==0;let ut=0;const Dt=(x&1024)!==0,dt=(x&2048)!==0;let Et=0;const Rt=rr(Z,4);let mn=8;ue&&($e=rr(Z,mn),mn+=4),xe&&(mn+=4);let Tn=$e+y;for(let Qe=0;Qe<Rt;Qe++){if(lt?(et=rr(Z,mn),mn+=4):et=te,Xe?(ut=rr(Z,mn),mn+=4):ut=Be,Dt&&(mn+=4),dt&&(K===0?Et=rr(Z,mn):Et=pM(Z,mn),mn+=4),t.type===fs.VIDEO){let Ze=0;for(;Ze<ut;){const at=rr(r,Tn);if(Tn+=4,J5(f,r[Tn])){const nn=r.subarray(Tn,Tn+at);ow(nn,f?2:1,u+Et/l,n)}Tn+=at,Ze+=at+4}}u+=et/l}}))})})}),n}function DE(u){if(!u)return!1;const t=u.substring(0,4);return t==="hvc1"||t==="hev1"||t==="dvh1"||t==="dvhe"}function J5(u,t){if(u){const n=t>>1&63;return n===39||n===40}else return(t&31)===6}function ow(u,t,n,r){const l=yM(u);let d=0;d+=t;let f=0,p=0,m=0;for(;d<l.length;){f=0;do{if(d>=l.length)break;m=l[d++],f+=m}while(m===255);p=0;do{if(d>=l.length)break;m=l[d++],p+=m}while(m===255);const y=l.length-d;let b=d;if(p<y)d+=p;else if(p>y){Gr.error(`Malformed SEI payload. ${p} is too small, only ${y} bytes left to parse.`);break}if(f===4){if(l[b++]===181){const A=hM(l,b);if(b+=2,A===49){const w=rr(l,b);if(b+=4,w===1195456820){const T=l[b++];if(T===3){const k=l[b++],U=31&k,Y=64&k,se=Y?2+U*3:0,te=new Uint8Array(se);if(Y){te[0]=k;for(let Re=1;Re<se;Re++)te[Re]=l[b++]}r.push({type:T,payloadType:f,pts:n,bytes:te})}}}}}else if(f===5&&p>16){const _=[];for(let T=0;T<16;T++){const k=l[b++].toString(16);_.push(k.length==1?"0"+k:k),(T===3||T===5||T===7||T===9)&&_.push("-")}const A=p-16,w=new Uint8Array(A);for(let T=0;T<A;T++)w[T]=l[b++];r.push({payloadType:f,pts:n,uuid:_.join(""),userData:Zl(w),userDataBytes:w})}}}function yM(u){const t=u.byteLength,n=[];let r=1;for(;r<t-2;)u[r]===0&&u[r+1]===0&&u[r+2]===3?(n.push(r+2),r+=2):r++;if(n.length===0)return u;const l=t-n.length,d=new Uint8Array(l);let f=0;for(r=0;r<l;f++,r++)f===n[0]&&(f++,n.shift()),d[r]=u[f];return d}function Z5(u){const t=u[0];let n="",r="",l=0,d=0,f=0,p=0,m=0,y=0;if(t===0){for(;wa(u.subarray(y,y+1))!=="\0";)n+=wa(u.subarray(y,y+1)),y+=1;for(n+=wa(u.subarray(y,y+1)),y+=1;wa(u.subarray(y,y+1))!=="\0";)r+=wa(u.subarray(y,y+1)),y+=1;r+=wa(u.subarray(y,y+1)),y+=1,l=rr(u,12),d=rr(u,16),p=rr(u,20),m=rr(u,24),y=28}else if(t===1){y+=4,l=rr(u,y),y+=4;const _=rr(u,y);y+=4;const A=rr(u,y);for(y+=4,f=2**32*_+A,C5(f)||(f=Number.MAX_SAFE_INTEGER,Gr.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),p=rr(u,y),y+=4,m=rr(u,y),y+=4;wa(u.subarray(y,y+1))!=="\0";)n+=wa(u.subarray(y,y+1)),y+=1;for(n+=wa(u.subarray(y,y+1)),y+=1;wa(u.subarray(y,y+1))!=="\0";)r+=wa(u.subarray(y,y+1)),y+=1;r+=wa(u.subarray(y,y+1)),y+=1}const b=u.subarray(y,u.byteLength);return{schemeIdUri:n,value:r,timeScale:l,presentationTime:f,presentationTimeDelta:d,eventDuration:p,id:m,payload:b}}function e6(u,...t){const n=t.length;let r=8,l=n;for(;l--;)r+=t[l].byteLength;const d=new Uint8Array(r);for(d[0]=r>>24&255,d[1]=r>>16&255,d[2]=r>>8&255,d[3]=r&255,d.set(u,4),l=0,r=8;l<n;l++)d.set(t[l],r),r+=t[l].byteLength;return d}function t6(u,t,n){if(u.byteLength!==16)throw new RangeError("Invalid system id");let r,l;r=0,l=new Uint8Array;let d;r>0?(d=new Uint8Array(4),t.length>0&&new DataView(d.buffer).setUint32(0,t.length,!1)):d=new Uint8Array;const f=new Uint8Array(4);return n&&n.byteLength>0&&new DataView(f.buffer).setUint32(0,n.byteLength,!1),e6([112,115,115,104],new Uint8Array([r,0,0,0]),u,d,l,f,n||new Uint8Array)}function n6(u){const t=[];if(u instanceof ArrayBuffer){const n=u.byteLength;let r=0;for(;r+32<n;){const l=new DataView(u,r),d=i6(l);t.push(d),r+=d.size}}return t}function i6(u){const t=u.getUint32(0),n=u.byteOffset,r=u.byteLength;if(r<t)return{offset:n,size:r};if(u.getUint32(4)!==1886614376)return{offset:n,size:t};const d=u.getUint32(8)>>>24;if(d!==0&&d!==1)return{offset:n,size:t};const f=u.buffer,p=Dc.hexDump(new Uint8Array(f,n+12,16)),m=u.getUint32(28);let y=null,b=null;if(d===0){if(t-32<m||m<22)return{offset:n,size:t};b=new Uint8Array(f,n+32,m)}else if(d===1){if(!m||r<n+32+m*16+16)return{offset:n,size:t};y=[];for(let _=0;_<m;_++)y.push(new Uint8Array(f,n+32+_*16,16))}return{version:d,systemId:p,kids:y,data:b,offset:n,size:t}}const vM=()=>/\(Windows.+Firefox\//i.test(navigator.userAgent),yg={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,dav1:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function TM(u,t){const n=yg[t];return!!n&&!!n[u.slice(0,4)]}function pA(u,t,n=!0){return!u.split(",").some(r=>!EM(r,t,n))}function EM(u,t,n=!0){var r;const l=kf(n);return(r=l==null?void 0:l.isTypeSupported(Ay(u,t)))!=null?r:!1}function Ay(u,t){return`${t}/mp4;codecs=${u}`}function o2(u){if(u){const t=u.substring(0,4);return yg.video[t]}return 2}function ZT(u){const t=vM();return u.split(",").reduce((n,r)=>{const d=t&&DE(r)?9:yg.video[r];return d?(d*2+n)/(n?3:2):(yg.audio[r]+n)/(n?2:1)},0)}const ox={};function r6(u,t=!0){if(ox[u])return ox[u];const n={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"],"mp4a.40.34":["mp3"]}[u];for(let l=0;l<n.length;l++){var r;if(EM(n[l],"audio",t))return ox[u]=n[l],n[l];if(n[l]==="mp3"&&(r=kf(t))!=null&&r.isTypeSupported("audio/mpeg"))return""}return u}const s6=/flac|opus|mp4a\.40\.34/i;function eE(u,t=!0){return u.replace(s6,n=>r6(n.toLowerCase(),t))}function a6(u,t){const n=[];if(u){const r=u.split(",");for(let l=0;l<r.length;l++)TM(r[l],"video")||n.push(r[l])}return t&&n.push(t),n.join(",")}function NT(u,t){if(u&&(u.length>4||["ac-3","ec-3","alac","fLaC","Opus"].indexOf(u)!==-1))return u;if(t){const n=t.split(",");if(n.length>1){if(u){for(let r=n.length;r--;)if(n[r].substring(0,4)===u.substring(0,4))return n[r]}return n[0]}}return t||u}function o6(u){const t=u.split(",");for(let n=0;n<t.length;n++){const r=t[n].split(".");if(r.length>2){let l=r.shift()+".";l+=parseInt(r.shift()).toString(16),l+=("000"+parseInt(r.shift()).toString(16)).slice(-4),t[n]=l}}return t.join(",")}function l6(u){if(u.startsWith("av01.")){const t=u.split("."),n=["0","111","01","01","01","0"];for(let r=t.length;r>4&&r<10;r++)t[r]=n[r-4];return t.join(".")}return u}function l2(u){const t=kf(u)||{isTypeSupported:()=>!1};return{mpeg:t.isTypeSupported("audio/mpeg"),mp3:t.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:t.isTypeSupported('audio/mp4; codecs="ac-3"')}}function bM(u){return u.replace(/^.+codecs=["']?([^"']+).*$/,"$1")}const _M={supported:!0,configurations:[],decodingInfoResults:[{supported:!0,powerEfficient:!0,smooth:!0}]};function SM(u,t){return{supported:!1,configurations:t,decodingInfoResults:[{supported:!1,smooth:!1,powerEfficient:!1}],error:u}}const u2={};function u6(u,t,n,r,l,d){const f=u.audioCodec?u.audioGroups:null,p=d==null?void 0:d.audioCodec,m=d==null?void 0:d.channels,y=m?parseInt(m):p?1/0:2;let b=null;if(f!=null&&f.length)try{f.length===1&&f[0]?b=t.groups[f[0]].channels:b=f.reduce((_,A)=>{if(A){const w=t.groups[A];if(!w)throw new Error(`Audio track group ${A} not found`);Object.keys(w.channels).forEach(T=>{_[T]=(_[T]||0)+w.channels[T]})}return _},{2:0})}catch{return!0}return u.videoCodec!==void 0&&(u.width>1920&&u.height>1088||u.height>1920&&u.width>1088||u.frameRate>Math.max(r,30)||u.videoRange!=="SDR"&&u.videoRange!==n||u.bitrate>Math.max(l,8e6))||!!b&&xi(y)&&Object.keys(b).some(_=>parseInt(_)>y)}function xM(u,t,n){const r=u.videoCodec,l=u.audioCodec;if(!r&&!l||!n)return Promise.resolve(_M);const d=[];if(r){const f={width:u.width,height:u.height,bitrate:Math.ceil(Math.max(u.bitrate*.9,u.averageBitrate)),framerate:u.frameRate||30},p=u.videoRange;p!=="SDR"&&(f.transferFunction=p.toLowerCase());const m=r.split(","),y=navigator.userAgent;if(m.some(b=>DE(b))&&vM())return Promise.resolve(SM(new Error(`Overriding Windows Firefox HEVC MediaCapabilities result based on user-agent sting: (${y})`),d));d.push.apply(d,m.map(b=>({type:"media-source",video:as(as({},f),{},{contentType:Ay(l6(b),"video")})})))}return l&&u.audioGroups&&u.audioGroups.forEach(f=>{var p;f&&((p=t.groups[f])==null||p.tracks.forEach(m=>{if(m.groupId===f){const y=m.channels||"",b=parseFloat(y);xi(b)&&b>2&&d.push.apply(d,l.split(",").map(_=>({type:"media-source",audio:{contentType:Ay(_,"audio"),channels:""+b}})))}}))}),Promise.all(d.map(f=>{const p=c6(f);return u2[p]||(u2[p]=n.decodingInfo(f))})).then(f=>({supported:!f.some(p=>!p.supported),configurations:d,decodingInfoResults:f})).catch(f=>({supported:!1,configurations:d,decodingInfoResults:[],error:f}))}function c6(u){const{audio:t,video:n}=u,r=n||t;if(r){const l=bM(r.contentType);if(n)return`r${n.height}x${n.width}f${Math.ceil(n.framerate)}${n.transferFunction||"sd"}_${l}_${Math.ceil(n.bitrate/1e5)}`;if(t)return`c${t.channels}${t.spatialRendering?"s":"n"}_${l}`}return""}const gA=["NONE","TYPE-0","TYPE-1",null];function d6(u){return gA.indexOf(u)>-1}const tE=["SDR","PQ","HLG"];function f6(u){return!!u&&tE.indexOf(u)>-1}var OT={No:"",Yes:"YES",v2:"v2"};function c2(u){const{canSkipUntil:t,canSkipDateRanges:n,age:r}=u,l=r<t/2;return t&&l?n?OT.v2:OT.Yes:OT.No}class d2{constructor(t,n,r){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=t,this.part=n,this.skip=r}addDirectives(t){const n=new self.URL(t);return this.msn!==void 0&&n.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&n.searchParams.set("_HLS_part",this.part.toString()),this.skip&&n.searchParams.set("_HLS_skip",this.skip),n.href}}class wy{constructor(t){if(this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.supplemental=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[t.url],this._attrs=[t.attrs],this.bitrate=t.bitrate,t.details&&(this.details=t.details),this.id=t.id||0,this.name=t.name,this.width=t.width||0,this.height=t.height||0,this.frameRate=t.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=t.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=t.audioCodec,this.videoCodec=t.videoCodec,this.codecSet=[t.videoCodec,t.audioCodec].filter(r=>!!r).map(r=>r.substring(0,4)).join(","),"supplemental"in t){var n;this.supplemental=t.supplemental;const r=(n=t.supplemental)==null?void 0:n.videoCodec;r&&r!==t.videoCodec&&(this.codecSet+=`,${r.substring(0,4)}`)}this.addGroupId("audio",t.attrs.AUDIO),this.addGroupId("text",t.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(t){return f2(this._audioGroups,t)}hasSubtitleGroup(t){return f2(this._subtitleGroups,t)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(t,n){if(n){if(t==="audio"){let r=this._audioGroups;r||(r=this._audioGroups=[]),r.indexOf(n)===-1&&r.push(n)}else if(t==="text"){let r=this._subtitleGroups;r||(r=this._subtitleGroups=[]),r.indexOf(n)===-1&&r.push(n)}}}get urlId(){return 0}set urlId(t){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var t;return(t=this.audioGroups)==null?void 0:t[0]}get textGroupId(){var t;return(t=this.subtitleGroups)==null?void 0:t[0]}addFallback(){}}function f2(u,t){return!t||!u?!1:u.indexOf(t)!==-1}function h6(){if(typeof matchMedia=="function"){const u=matchMedia("(dynamic-range: high)"),t=matchMedia("bad query");if(u.media!==t.media)return u.matches===!0}return!1}function p6(u,t){let n=!1,r=[];if(u&&(n=u!=="SDR",r=[u]),t){r=t.allowedVideoRanges||tE.slice(0);const l=r.join("")!=="SDR"&&!t.videoCodec;n=t.preferHDR!==void 0?t.preferHDR:l&&h6(),n||(r=["SDR"])}return{preferHDR:n,allowedVideoRanges:r}}const g6=u=>{const t=new WeakSet;return(n,r)=>{if(u&&(r=u(n,r)),typeof r=="object"&&r!==null){if(t.has(r))return;t.add(r)}return r}},Bs=(u,t)=>JSON.stringify(u,g6(t));function m6(u,t,n,r,l){const d=Object.keys(u),f=r==null?void 0:r.channels,p=r==null?void 0:r.audioCodec,m=l==null?void 0:l.videoCodec,y=f&&parseInt(f)===2;let b=!1,_=!1,A=1/0,w=1/0,T=1/0,k=1/0,U=0,Y=[];const{preferHDR:se,allowedVideoRanges:te}=p6(t,l);for(let Z=d.length;Z--;){const K=u[d[Z]];b||(b=K.channels[2]>0),A=Math.min(A,K.minHeight),w=Math.min(w,K.minFramerate),T=Math.min(T,K.minBitrate),te.filter(ue=>K.videoRanges[ue]>0).length>0&&(_=!0)}A=xi(A)?A:0,w=xi(w)?w:0;const Re=Math.max(1080,A),Be=Math.max(30,w);T=xi(T)?T:n,n=Math.max(T,n),_||(t=void 0);const j=d.length>1;return{codecSet:d.reduce((Z,K)=>{const x=u[K];if(K===Z)return Z;if(Y=_?te.filter(ue=>x.videoRanges[ue]>0):[],j){if(x.minBitrate>n)return Ic(K,`min bitrate of ${x.minBitrate} > current estimate of ${n}`),Z;if(!x.hasDefaultAudio)return Ic(K,"no renditions with default or auto-select sound found"),Z;if(p&&K.indexOf(p.substring(0,4))%5!==0)return Ic(K,`audio codec preference "${p}" not found`),Z;if(f&&!y){if(!x.channels[f])return Ic(K,`no renditions with ${f} channel sound found (channels options: ${Object.keys(x.channels)})`),Z}else if((!p||y)&&b&&x.channels[2]===0)return Ic(K,"no renditions with stereo sound found"),Z;if(x.minHeight>Re)return Ic(K,`min resolution of ${x.minHeight} > maximum of ${Re}`),Z;if(x.minFramerate>Be)return Ic(K,`min framerate of ${x.minFramerate} > maximum of ${Be}`),Z;if(!Y.some(ue=>x.videoRanges[ue]>0))return Ic(K,`no variants with VIDEO-RANGE of ${Bs(Y)} found`),Z;if(m&&K.indexOf(m.substring(0,4))%5!==0)return Ic(K,`video codec preference "${m}" not found`),Z;if(x.maxScore<U)return Ic(K,`max score of ${x.maxScore} < selected max of ${U}`),Z}return Z&&(ZT(K)>=ZT(Z)||x.fragmentError>u[Z].fragmentError)?Z:(k=x.minIndex,U=x.maxScore,K)},void 0),videoRanges:Y,preferHDR:se,minFramerate:w,minBitrate:T,minIndex:k}}function Ic(u,t){Gr.log(`[abr] start candidates with "${u}" ignored because ${t}`)}function AM(u){return u.reduce((t,n)=>{let r=t.groups[n.groupId];r||(r=t.groups[n.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),r.tracks.push(n);const l=n.channels||"2";return r.channels[l]=(r.channels[l]||0)+1,r.hasDefault=r.hasDefault||n.default,r.hasAutoSelect=r.hasAutoSelect||n.autoselect,r.hasDefault&&(t.hasDefaultAudio=!0),r.hasAutoSelect&&(t.hasAutoSelectAudio=!0),t},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function y6(u,t,n,r){return u.slice(n,r+1).reduce((l,d,f)=>{if(!d.codecSet)return l;const p=d.audioGroups;let m=l[d.codecSet];m||(l[d.codecSet]=m={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,minIndex:f,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!p,fragmentError:0}),m.minBitrate=Math.min(m.minBitrate,d.bitrate);const y=Math.min(d.height,d.width);return m.minHeight=Math.min(m.minHeight,y),m.minFramerate=Math.min(m.minFramerate,d.frameRate),m.minIndex=Math.min(m.minIndex,f),m.maxScore=Math.max(m.maxScore,d.score),m.fragmentError+=d.fragmentError,m.videoRanges[d.videoRange]=(m.videoRanges[d.videoRange]||0)+1,p&&p.forEach(b=>{if(!b)return;const _=t.groups[b];_&&(m.hasDefaultAudio=m.hasDefaultAudio||t.hasDefaultAudio?_.hasDefault:_.hasAutoSelect||!t.hasDefaultAudio&&!t.hasAutoSelectAudio,Object.keys(_.channels).forEach(A=>{m.channels[A]=(m.channels[A]||0)+_.channels[A]}))}),l},{})}function h2(u){if(!u)return u;const{lang:t,assocLang:n,characteristics:r,channels:l,audioCodec:d}=u;return{lang:t,assocLang:n,characteristics:r,channels:l,audioCodec:d}}function Nc(u,t,n){if("attrs"in u){const r=t.indexOf(u);if(r!==-1)return r}for(let r=0;r<t.length;r++){const l=t[r];if(Rh(u,l,n))return r}return-1}function Rh(u,t,n){const{groupId:r,name:l,lang:d,assocLang:f,default:p}=u,m=u.forced;return(r===void 0||t.groupId===r)&&(l===void 0||t.name===l)&&(d===void 0||v6(d,t.lang))&&(d===void 0||t.assocLang===f)&&(p===void 0||t.default===p)&&(m===void 0||t.forced===m)&&(!("characteristics"in u)||T6(u.characteristics||"",t.characteristics))&&(n===void 0||n(u,t))}function v6(u,t="--"){return u.length===t.length?u===t:u.startsWith(t)||t.startsWith(u)}function T6(u,t=""){const n=u.split(","),r=t.split(",");return n.length===r.length&&!n.some(l=>r.indexOf(l)===-1)}function Ah(u,t){const{audioCodec:n,channels:r}=u;return(n===void 0||(t.audioCodec||"").substring(0,4)===n.substring(0,4))&&(r===void 0||r===(t.channels||"2"))}function E6(u,t,n,r,l){const d=t[r],p=t.reduce((A,w,T)=>{const k=w.uri;return(A[k]||(A[k]=[])).push(T),A},{})[d.uri];p.length>1&&(r=Math.max.apply(Math,p));const m=d.videoRange,y=d.frameRate,b=d.codecSet.substring(0,4),_=p2(t,r,A=>{if(A.videoRange!==m||A.frameRate!==y||A.codecSet.substring(0,4)!==b)return!1;const w=A.audioGroups,T=n.filter(k=>!w||w.indexOf(k.groupId)!==-1);return Nc(u,T,l)>-1});return _>-1?_:p2(t,r,A=>{const w=A.audioGroups,T=n.filter(k=>!w||w.indexOf(k.groupId)!==-1);return Nc(u,T,l)>-1})}function p2(u,t,n){for(let r=t;r>-1;r--)if(n(u[r]))return r;for(let r=t+1;r<u.length;r++)if(n(u[r]))return r;return-1}function nE(u,t){var n;return!!u&&u!==((n=t.loadLevelObj)==null?void 0:n.uri)}class b6 extends Bd{constructor(t){super("abr",t.logger),this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.rebufferNotice=-1,this.bwEstimator=void 0,this._abandonRulesCheck=n=>{var r;const{fragCurrent:l,partCurrent:d,hls:f}=this,{autoLevelEnabled:p,media:m}=f;if(!l||!m)return;const y=performance.now(),b=d?d.stats:l.stats,_=d?d.duration:l.duration,A=y-b.loading.start,w=f.minAutoLevel,T=l.level,k=this._nextAutoLevel;if(b.aborted||b.loaded&&b.loaded===b.total||T<=w){this.clearTimer(),this._nextAutoLevel=-1;return}if(!p)return;const U=k>-1&&k!==T,Y=!!n||U;if(!Y&&(m.paused||!m.playbackRate||!m.readyState))return;const se=f.mainForwardBufferInfo;if(!Y&&se===null)return;const te=this.bwEstimator.getEstimateTTFB(),Re=Math.abs(m.playbackRate);if(A<=Math.max(te,1e3*(_/(Re*2))))return;const Be=se?se.len/Re:0,j=b.loading.first?b.loading.first-b.loading.start:-1,M=b.loaded&&j>-1,Z=this.getBwEstimate(),K=f.levels,x=K[T],ue=Math.max(b.loaded,Math.round(_*(l.bitrate||x.averageBitrate)/8));let $e=M?A-j:A;$e<1&&M&&($e=Math.min(A,b.loaded*8/Z));const xe=M?b.loaded*1e3/$e:0,lt=te/1e3,et=xe?(ue-b.loaded)/xe:ue*8/Z+lt;if(et<=Be)return;const Xe=xe?xe*8:Z,ut=((r=(n==null?void 0:n.details)||this.hls.latestLevelDetails)==null?void 0:r.live)===!0,Dt=this.hls.config.abrBandWidthUpFactor;let dt=Number.POSITIVE_INFINITY,Et;for(Et=T-1;Et>w;Et--){const Qe=K[Et].maxBitrate,Ze=!K[Et].details||ut;if(dt=this.getTimeToLoadFrag(lt,Xe,_*Qe,Ze),dt<Math.min(Be,_+lt))break}if(dt>=et||dt>_*10)return;M?this.bwEstimator.sample(A-Math.min(te,j),b.loaded):this.bwEstimator.sampleTTFB(A);const Rt=K[Et].maxBitrate;this.getBwEstimate()*Dt>Rt&&this.resetEstimator(Rt);const mn=this.findBestLevel(Rt,w,Et,0,Be,1,1);mn>-1&&(Et=mn),this.warn(`Fragment ${l.sn}${d?" part "+d.index:""} of level ${T} is loading too slowly;
      Fragment duration: ${l.duration.toFixed(3)}
      Time to underbuffer: ${Be.toFixed(3)} s
      Estimated load time for current fragment: ${et.toFixed(3)} s
      Estimated load time for down switch fragment: ${dt.toFixed(3)} s
      TTFB estimate: ${j|0} ms
      Current BW estimate: ${xi(Z)?Z|0:"Unknown"} bps
      New BW estimate: ${this.getBwEstimate()|0} bps
      Switching to level ${Et} @ ${Rt|0} bps`),f.nextLoadLevel=f.nextAutoLevel=Et,this.clearTimer();const Tn=()=>{if(this.clearTimer(),this.fragCurrent===l&&this.hls.loadLevel===Et&&Et>0){const Qe=this.getStarvationDelay();if(this.warn(`Aborting inflight request ${Et>0?"and switching down":""}
      Fragment duration: ${l.duration.toFixed(3)} s
      Time to underbuffer: ${Qe.toFixed(3)} s`),l.abortRequests(),this.fragCurrent=this.partCurrent=null,Et>w){let Ze=this.findBestLevel(this.hls.levels[w].bitrate,w,Et,0,Qe,1,1);Ze===-1&&(Ze=w),this.hls.nextLoadLevel=this.hls.nextAutoLevel=Ze,this.resetEstimator(this.hls.levels[Ze].bitrate)}}};U||et>dt*2?Tn():this.timer=self.setInterval(Tn,dt*1e3),f.trigger(He.FRAG_LOAD_EMERGENCY_ABORTED,{frag:l,part:d,stats:b})},this.hls=t,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(t){t&&(this.log(`setting initial bwe to ${t}`),this.hls.config.abrEwmaDefaultEstimate=t),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const t=this.hls.config;return new D5(t.abrEwmaSlowVoD,t.abrEwmaFastVoD,t.abrEwmaDefaultEstimate)}registerListeners(){const{hls:t}=this;t.on(He.MANIFEST_LOADING,this.onManifestLoading,this),t.on(He.FRAG_LOADING,this.onFragLoading,this),t.on(He.FRAG_LOADED,this.onFragLoaded,this),t.on(He.FRAG_BUFFERED,this.onFragBuffered,this),t.on(He.LEVEL_SWITCHING,this.onLevelSwitching,this),t.on(He.LEVEL_LOADED,this.onLevelLoaded,this),t.on(He.LEVELS_UPDATED,this.onLevelsUpdated,this),t.on(He.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),t.on(He.ERROR,this.onError,this)}unregisterListeners(){const{hls:t}=this;t&&(t.off(He.MANIFEST_LOADING,this.onManifestLoading,this),t.off(He.FRAG_LOADING,this.onFragLoading,this),t.off(He.FRAG_LOADED,this.onFragLoaded,this),t.off(He.FRAG_BUFFERED,this.onFragBuffered,this),t.off(He.LEVEL_SWITCHING,this.onLevelSwitching,this),t.off(He.LEVEL_LOADED,this.onLevelLoaded,this),t.off(He.LEVELS_UPDATED,this.onLevelsUpdated,this),t.off(He.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),t.off(He.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(t,n){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(t,n){const r=n.frag;if(!this.ignoreFragment(r)){if(!r.bitrateTest){var l;this.fragCurrent=r,this.partCurrent=(l=n.part)!=null?l:null}this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(t,n){this.clearTimer()}onError(t,n){if(!n.fatal)switch(n.details){case pn.BUFFER_ADD_CODEC_ERROR:case pn.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case pn.FRAG_LOAD_TIMEOUT:{const r=n.frag,{fragCurrent:l,partCurrent:d}=this;if(r&&l&&r.sn===l.sn&&r.level===l.level){const f=performance.now(),p=d?d.stats:r.stats,m=f-p.loading.start,y=p.loading.first?p.loading.first-p.loading.start:-1;if(p.loaded&&y>-1){const _=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(m-Math.min(_,y),p.loaded)}else this.bwEstimator.sampleTTFB(m)}break}}}getTimeToLoadFrag(t,n,r,l){const d=t+r/n,f=l?t+this.lastLevelLoadSec:0;return d+f}onLevelLoaded(t,n){const r=this.hls.config,{loading:l}=n.stats,d=l.end-l.first;xi(d)&&(this.lastLevelLoadSec=d/1e3),n.details.live?this.bwEstimator.update(r.abrEwmaSlowLive,r.abrEwmaFastLive):this.bwEstimator.update(r.abrEwmaSlowVoD,r.abrEwmaFastVoD),this.timer>-1&&this._abandonRulesCheck(n.levelInfo)}onFragLoaded(t,{frag:n,part:r}){const l=r?r.stats:n.stats;if(n.type===Ui.MAIN&&this.bwEstimator.sampleTTFB(l.loading.first-l.loading.start),!this.ignoreFragment(n)){if(this.clearTimer(),n.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const d=r?r.duration:n.duration,f=this.hls.levels[n.level],p=(f.loaded?f.loaded.bytes:0)+l.loaded,m=(f.loaded?f.loaded.duration:0)+d;f.loaded={bytes:p,duration:m},f.realBitrate=Math.round(8*p/m)}if(n.bitrateTest){const d={stats:l,frag:n,part:r,id:n.type};this.onFragBuffered(He.FRAG_BUFFERED,d),n.bitrateTest=!1}else this.lastLoadedFragLevel=n.level}}onFragBuffered(t,n){const{frag:r,part:l}=n,d=l!=null&&l.stats.loaded?l.stats:r.stats;if(d.aborted||this.ignoreFragment(r))return;const f=d.parsing.end-d.loading.start-Math.min(d.loading.first-d.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(f,d.loaded),d.bwEstimate=this.getBwEstimate(),r.bitrateTest?this.bitrateTestDelay=f/1e3:this.bitrateTestDelay=0}ignoreFragment(t){return t.type!==Ui.MAIN||t.sn==="initSegment"}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:t,minAutoLevel:n}=this.hls,r=this.getBwEstimate(),l=this.hls.config.maxStarvationDelay,d=this.findBestLevel(r,n,t,0,l,1,1);if(d>-1)return d;const f=this.hls.firstLevel,p=Math.min(Math.max(f,n),t);return this.warn(`Could not find best starting auto level. Defaulting to first in playlist ${f} clamped to ${p}`),p}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const t=this.forcedAutoLevel,r=this.bwEstimator.canEstimate(),l=this.lastLoadedFragLevel>-1;if(t!==-1&&(!r||!l||this.nextAutoLevelKey===this.getAutoLevelKey()))return t;const d=r&&l?this.getNextABRAutoLevel():this.firstAutoLevel;if(t!==-1){const f=this.hls.levels;if(f.length>Math.max(t,d)&&f[t].loadError<=f[d].loadError)return t}return this._nextAutoLevel=d,this.nextAutoLevelKey=this.getAutoLevelKey(),d}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:t,partCurrent:n,hls:r}=this;if(r.levels.length<=1)return r.loadLevel;const{maxAutoLevel:l,config:d,minAutoLevel:f}=r,p=n?n.duration:t?t.duration:0,m=this.getBwEstimate(),y=this.getStarvationDelay();let b=d.abrBandWidthFactor,_=d.abrBandWidthUpFactor;if(y){const U=this.findBestLevel(m,f,l,y,0,b,_);if(U>=0)return this.rebufferNotice=-1,U}let A=p?Math.min(p,d.maxStarvationDelay):d.maxStarvationDelay;if(!y){const U=this.bitrateTestDelay;U&&(A=(p?Math.min(p,d.maxLoadingDelay):d.maxLoadingDelay)-U,this.info(`bitrate test took ${Math.round(1e3*U)}ms, set first fragment max fetchDuration to ${Math.round(1e3*A)} ms`),b=_=1)}const w=this.findBestLevel(m,f,l,y,A,b,_);if(this.rebufferNotice!==w&&(this.rebufferNotice=w,this.info(`${y?"rebuffering expected":"buffer is empty"}, optimal quality level ${w}`)),w>-1)return w;const T=r.levels[f],k=r.loadLevelObj;return k&&(T==null?void 0:T.bitrate)<k.bitrate?f:r.loadLevel}getStarvationDelay(){const t=this.hls,n=t.media;if(!n)return 1/0;const r=n&&n.playbackRate!==0?Math.abs(n.playbackRate):1,l=t.mainForwardBufferInfo;return(l?l.len:0)/r}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(t,n,r,l,d,f,p){var m;const y=l+d,b=this.lastLoadedFragLevel,_=b===-1?this.hls.firstLevel:b,{fragCurrent:A,partCurrent:w}=this,{levels:T,allAudioTracks:k,loadLevel:U,config:Y}=this.hls;if(T.length===1)return 0;const se=T[_],te=!!((m=this.hls.latestLevelDetails)!=null&&m.live),Re=U===-1||b===-1;let Be,j="SDR",M=(se==null?void 0:se.frameRate)||0;const{audioPreference:Z,videoPreference:K}=Y,x=this.audioTracksByGroup||(this.audioTracksByGroup=AM(k));let ue=-1;if(Re){if(this.firstSelection!==-1)return this.firstSelection;const Xe=this.codecTiers||(this.codecTiers=y6(T,x,n,r)),ut=m6(Xe,j,t,Z,K),{codecSet:Dt,videoRanges:dt,minFramerate:Et,minBitrate:Rt,minIndex:mn,preferHDR:Tn}=ut;ue=mn,Be=Dt,j=Tn?dt[dt.length-1]:dt[0],M=Et,t=Math.max(t,Rt),this.log(`picked start tier ${Bs(ut)}`)}else Be=se==null?void 0:se.codecSet,j=se==null?void 0:se.videoRange;const $e=w?w.duration:A?A.duration:0,xe=this.bwEstimator.getEstimateTTFB()/1e3,lt=[];for(let Xe=r;Xe>=n;Xe--){var et;const ut=T[Xe],Dt=Xe>_;if(!ut)continue;if(Y.useMediaCapabilities&&!ut.supportedResult&&!ut.supportedPromise){const Ze=navigator.mediaCapabilities;typeof(Ze==null?void 0:Ze.decodingInfo)=="function"&&(u6(ut,x,j,M,t,Z)||DE(ut.videoCodec))?(ut.supportedPromise=xM(ut,x,Ze),ut.supportedPromise.then(at=>{if(!this.hls)return;ut.supportedResult=at;const nn=this.hls.levels,ce=nn.indexOf(ut);at.error?this.warn(`MediaCapabilities decodingInfo error: "${at.error}" for level ${ce} ${Bs(at)}`):at.supported||(this.warn(`Unsupported MediaCapabilities decodingInfo result for level ${ce} ${Bs(at)}`),ce>-1&&nn.length>1&&(this.log(`Removing unsupported level ${ce}`),this.hls.removeLevel(ce),this.hls.loadLevel===-1&&(this.hls.nextLoadLevel=0)))})):ut.supportedResult=_M}if((Be&&ut.codecSet!==Be||j&&ut.videoRange!==j||Dt&&M>ut.frameRate||!Dt&&M>0&&M<ut.frameRate||ut.supportedResult&&!((et=ut.supportedResult.decodingInfoResults)!=null&&et[0].smooth))&&(!Re||Xe!==ue)){lt.push(Xe);continue}const dt=ut.details,Et=(w?dt==null?void 0:dt.partTarget:dt==null?void 0:dt.averagetargetduration)||$e;let Rt;Dt?Rt=p*t:Rt=f*t;const mn=$e&&l>=$e*2&&d===0?ut.averageBitrate:ut.maxBitrate,Tn=this.getTimeToLoadFrag(xe,Rt,mn*Et,dt===void 0);if(Rt>=mn&&(Xe===b||ut.loadError===0&&ut.fragmentError===0)&&(Tn<=xe||!xi(Tn)||te&&!this.bitrateTestDelay||Tn<y)){const Ze=this.forcedAutoLevel;return Xe!==U&&(Ze===-1||Ze!==U)&&(lt.length&&this.trace(`Skipped level(s) ${lt.join(",")} of ${r} max with CODECS and VIDEO-RANGE:"${T[lt[0]].codecs}" ${T[lt[0]].videoRange}; not compatible with "${Be}" ${j}`),this.info(`switch candidate:${_}->${Xe} adjustedbw(${Math.round(Rt)})-bitrate=${Math.round(Rt-mn)} ttfb:${xe.toFixed(1)} avgDuration:${Et.toFixed(1)} maxFetchDuration:${y.toFixed(1)} fetchDuration:${Tn.toFixed(1)} firstSelection:${Re} codecSet:${ut.codecSet} videoRange:${ut.videoRange} hls.loadLevel:${U}`)),Re&&(this.firstSelection=Xe),Xe}}return-1}set nextAutoLevel(t){const n=this.deriveNextAutoLevel(t);this._nextAutoLevel!==n&&(this.nextAutoLevelKey="",this._nextAutoLevel=n)}deriveNextAutoLevel(t){const{maxAutoLevel:n,minAutoLevel:r}=this.hls;return Math.min(Math.max(t,r),n)}}const lw={search:function(u,t){let n=0,r=u.length-1,l=null,d=null;for(;n<=r;){l=(n+r)/2|0,d=u[l];const f=t(d);if(f>0)n=l+1;else if(f<0)r=l-1;else return d}return null}};function _6(u,t,n){if(t===null||!Array.isArray(u)||!u.length||!xi(t))return null;const r=u[0].programDateTime;if(t<(r||0))return null;const l=u[u.length-1].endProgramDateTime;if(t>=(l||0))return null;n=n||0;for(let d=0;d<u.length;++d){const f=u[d];if(x6(t,n,f))return f}return null}function Fh(u,t,n=0,r=0,l=.005){let d=null;if(u){d=t[1+u.sn-t[0].sn]||null;const p=u.endDTS-n;p>0&&p<15e-7&&(n+=15e-7),d&&u.level!==d.level&&d.end<=u.end&&(d=t[2+u.sn-t[0].sn]||null)}else n===0&&t[0].start===0&&(d=t[0]);if(d&&((!u||u.level===d.level)&&g2(n,r,d)===0||S6(d,u,Math.min(l,r))))return d;const f=lw.search(t,g2.bind(null,n,r));return f&&(f!==u||!d)?f:d}function S6(u,t,n){if(t&&t.start===0&&t.level<u.level&&(t.endPTS||0)>0){const r=t.tagList.reduce((l,d)=>(d[0]==="INF"&&(l+=parseFloat(d[1])),l),n);return u.start<=r}return!1}function g2(u=0,t=0,n){if(n.start<=u&&n.start+n.duration>u)return 0;const r=Math.min(t,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.start+n.duration-r<=u?1:n.start-r>u&&n.start?-1:0}function x6(u,t,n){const r=Math.min(t,n.duration+(n.deltaPTS?n.deltaPTS:0))*1e3;return(n.endProgramDateTime||0)-r>u}function wM(u,t){return lw.search(u,n=>n.cc<t?1:n.cc>t?-1:0)}function A6(u,t,n){if(u&&u.startCC<=t&&u.endCC>=t){const r=n.start,l=n.end;let d=u.fragments;if(!n.relurl){const{fragmentHint:f}=u;f&&(d=d.concat(f))}return lw.search(d,f=>f.cc<t||f.end<=r?1:f.cc>t||f.start>=l?-1:0)}return null}function iE(u){switch(u.details){case pn.FRAG_LOAD_TIMEOUT:case pn.KEY_LOAD_TIMEOUT:case pn.LEVEL_LOAD_TIMEOUT:case pn.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function m2(u,t){const n=iE(t);return u.default[`${n?"timeout":"error"}Retry`]}function uw(u,t){const n=u.backoff==="linear"?1:Math.pow(2,t);return Math.min(n*u.retryDelayMs,u.maxRetryDelayMs)}function y2(u){return as(as({},u),{errorRetry:null,timeoutRetry:null})}function rE(u,t,n,r){if(!u)return!1;const l=r==null?void 0:r.code,d=t<u.maxNumRetry&&(w6(l)||!!n);return u.shouldRetry?u.shouldRetry(u,t,n,r,d):d}function w6(u){return u===0&&navigator.onLine===!1||!!u&&(u<400||u>499)}var Co={DoNothing:0,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,RetryRequest:5},Ku={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2};class I6 extends Bd{constructor(t){super("error-controller",t.logger),this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.hls=t,this.registerListeners()}registerListeners(){const t=this.hls;t.on(He.ERROR,this.onError,this),t.on(He.MANIFEST_LOADING,this.onManifestLoading,this),t.on(He.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const t=this.hls;t&&(t.off(He.ERROR,this.onError,this),t.off(He.ERROR,this.onErrorOut,this),t.off(He.MANIFEST_LOADING,this.onManifestLoading,this),t.off(He.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(t){}stopLoad(){this.playlistError=0}getVariantLevelIndex(t){return(t==null?void 0:t.type)===Ui.MAIN?t.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(t,n){var r;if(n.fatal)return;const l=this.hls,d=n.context;switch(n.details){case pn.FRAG_LOAD_ERROR:case pn.FRAG_LOAD_TIMEOUT:case pn.KEY_LOAD_ERROR:case pn.KEY_LOAD_TIMEOUT:n.errorAction=this.getFragRetryOrSwitchAction(n);return;case pn.FRAG_PARSING_ERROR:if((r=n.frag)!=null&&r.gap){n.errorAction=Iy();return}case pn.FRAG_GAP:case pn.FRAG_DECRYPT_ERROR:{n.errorAction=this.getFragRetryOrSwitchAction(n),n.errorAction.action=Co.SendAlternateToPenaltyBox;return}case pn.LEVEL_EMPTY_ERROR:case pn.LEVEL_PARSING_ERROR:{var f,p;const y=n.parent===Ui.MAIN?n.level:l.loadLevel;n.details===pn.LEVEL_EMPTY_ERROR&&((f=n.context)!=null&&(p=f.levelDetails)!=null&&p.live)?n.errorAction=this.getPlaylistRetryOrSwitchAction(n,y):(n.levelRetry=!1,n.errorAction=this.getLevelSwitchAction(n,y))}return;case pn.LEVEL_LOAD_ERROR:case pn.LEVEL_LOAD_TIMEOUT:typeof(d==null?void 0:d.level)=="number"&&(n.errorAction=this.getPlaylistRetryOrSwitchAction(n,d.level));return;case pn.AUDIO_TRACK_LOAD_ERROR:case pn.AUDIO_TRACK_LOAD_TIMEOUT:case pn.SUBTITLE_LOAD_ERROR:case pn.SUBTITLE_TRACK_LOAD_TIMEOUT:if(d){const y=l.loadLevelObj;if(y&&(d.type===Fr.AUDIO_TRACK&&y.hasAudioGroup(d.groupId)||d.type===Fr.SUBTITLE_TRACK&&y.hasSubtitleGroup(d.groupId))){n.errorAction=this.getPlaylistRetryOrSwitchAction(n,l.loadLevel),n.errorAction.action=Co.SendAlternateToPenaltyBox,n.errorAction.flags=Ku.MoveAllAlternatesMatchingHost;return}}return;case pn.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const y=l.loadLevelObj,b=y==null?void 0:y.attrs["HDCP-LEVEL"];b?n.errorAction={action:Co.SendAlternateToPenaltyBox,flags:Ku.MoveAllAlternatesMatchingHDCP,hdcpLevel:b}:this.keySystemError(n)}return;case pn.BUFFER_ADD_CODEC_ERROR:case pn.REMUX_ALLOC_ERROR:case pn.BUFFER_APPEND_ERROR:if(!n.errorAction){var m;n.errorAction=this.getLevelSwitchAction(n,(m=n.level)!=null?m:l.loadLevel)}return;case pn.INTERNAL_EXCEPTION:case pn.BUFFER_APPENDING_ERROR:case pn.BUFFER_FULL_ERROR:case pn.LEVEL_SWITCH_ERROR:case pn.BUFFER_STALLED_ERROR:case pn.BUFFER_SEEK_OVER_HOLE:case pn.BUFFER_NUDGE_ON_STALL:n.errorAction=Iy();return}n.type===Hi.KEY_SYSTEM_ERROR&&this.keySystemError(n)}keySystemError(t){const n=this.getVariantLevelIndex(t.frag);t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,n)}getPlaylistRetryOrSwitchAction(t,n){const r=this.hls,l=m2(r.config.playlistLoadPolicy,t),d=this.playlistError++;if(rE(l,d,iE(t),t.response))return{action:Co.RetryRequest,flags:Ku.None,retryConfig:l,retryCount:d};const p=this.getLevelSwitchAction(t,n);return l&&(p.retryConfig=l,p.retryCount=d),p}getFragRetryOrSwitchAction(t){const n=this.hls,r=this.getVariantLevelIndex(t.frag),l=n.levels[r],{fragLoadPolicy:d,keyLoadPolicy:f}=n.config,p=m2(t.details.startsWith("key")?f:d,t),m=n.levels.reduce((b,_)=>b+_.fragmentError,0);if(l&&(t.details!==pn.FRAG_GAP&&l.fragmentError++,rE(p,m,iE(t),t.response)))return{action:Co.RetryRequest,flags:Ku.None,retryConfig:p,retryCount:m};const y=this.getLevelSwitchAction(t,r);return p&&(y.retryConfig=p,y.retryCount=m),y}getLevelSwitchAction(t,n){const r=this.hls;n==null&&(n=r.loadLevel);const l=this.hls.levels[n];if(l){var d,f;const y=t.details;l.loadError++,y===pn.BUFFER_APPEND_ERROR&&l.fragmentError++;let b=-1;const{levels:_,loadLevel:A,minAutoLevel:w,maxAutoLevel:T}=r;r.autoLevelEnabled||(r.loadLevel=-1);const k=(d=t.frag)==null?void 0:d.type,Y=(k===Ui.AUDIO&&y===pn.FRAG_PARSING_ERROR||t.sourceBufferName==="audio"&&(y===pn.BUFFER_ADD_CODEC_ERROR||y===pn.BUFFER_APPEND_ERROR))&&_.some(({audioCodec:j})=>l.audioCodec!==j),te=t.sourceBufferName==="video"&&(y===pn.BUFFER_ADD_CODEC_ERROR||y===pn.BUFFER_APPEND_ERROR)&&_.some(({codecSet:j,audioCodec:M})=>l.codecSet!==j&&l.audioCodec===M),{type:Re,groupId:Be}=(f=t.context)!=null?f:{};for(let j=_.length;j--;){const M=(j+A)%_.length;if(M!==A&&M>=w&&M<=T&&_[M].loadError===0){var p,m;const Z=_[M];if(y===pn.FRAG_GAP&&k===Ui.MAIN&&t.frag){const K=_[M].details;if(K){const x=Fh(t.frag,K.fragments,t.frag.start);if(x!=null&&x.gap)continue}}else{if(Re===Fr.AUDIO_TRACK&&Z.hasAudioGroup(Be)||Re===Fr.SUBTITLE_TRACK&&Z.hasSubtitleGroup(Be))continue;if(k===Ui.AUDIO&&(p=l.audioGroups)!=null&&p.some(K=>Z.hasAudioGroup(K))||k===Ui.SUBTITLE&&(m=l.subtitleGroups)!=null&&m.some(K=>Z.hasSubtitleGroup(K))||Y&&l.audioCodec===Z.audioCodec||!Y&&l.audioCodec!==Z.audioCodec||te&&l.codecSet===Z.codecSet)continue}b=M;break}}if(b>-1&&r.loadLevel!==b)return t.levelRetry=!0,this.playlistError=0,{action:Co.SendAlternateToPenaltyBox,flags:Ku.None,nextAutoLevel:b}}return{action:Co.SendAlternateToPenaltyBox,flags:Ku.MoveAllAlternatesMatchingHost}}onErrorOut(t,n){var r;switch((r=n.errorAction)==null?void 0:r.action){case Co.DoNothing:break;case Co.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(n),!n.errorAction.resolved&&n.details!==pn.FRAG_GAP?n.fatal=!0:/MediaSource readyState: ended/.test(n.error.message)&&(this.warn(`MediaSource ended after "${n.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError());break}if(n.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(t){const n=this.hls,r=t.errorAction;if(!r)return;const{flags:l,hdcpLevel:d,nextAutoLevel:f}=r;switch(l){case Ku.None:this.switchLevel(t,f);break;case Ku.MoveAllAlternatesMatchingHDCP:d&&(n.maxHdcpLevel=gA[gA.indexOf(d)-1],r.resolved=!0),this.warn(`Restricting playback to HDCP-LEVEL of "${n.maxHdcpLevel}" or lower`);break}r.resolved||this.switchLevel(t,f)}switchLevel(t,n){if(n!==void 0&&t.errorAction&&(this.warn(`switching to level ${n} after ${t.details}`),this.hls.nextAutoLevel=n,t.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel,t.details===pn.BUFFER_ADD_CODEC_ERROR&&t.mimeType&&t.sourceBufferName!=="audiovideo")){const r=bM(t.mimeType),l=this.hls.levels;for(let d=l.length;d--;)l[d][`${t.sourceBufferName}Codec`]===r&&this.hls.removeLevel(d)}}}function Iy(u){const t={action:Co.DoNothing,flags:Ku.None};return u&&(t.resolved=!0),t}var Ca={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class C6{constructor(t){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=t,this._registerListeners()}_registerListeners(){const{hls:t}=this;t.on(He.MANIFEST_LOADING,this.onManifestLoading,this),t.on(He.BUFFER_APPENDED,this.onBufferAppended,this),t.on(He.FRAG_BUFFERED,this.onFragBuffered,this),t.on(He.FRAG_LOADED,this.onFragLoaded,this)}_unregisterListeners(){const{hls:t}=this;t.off(He.MANIFEST_LOADING,this.onManifestLoading,this),t.off(He.BUFFER_APPENDED,this.onBufferAppended,this),t.off(He.FRAG_BUFFERED,this.onFragBuffered,this),t.off(He.FRAG_LOADED,this.onFragLoaded,this)}destroy(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(t,n){const r=this.activePartLists[n];if(r)for(let l=r.length;l--;){const d=r[l];if(!d)break;const f=d.end;if(d.start<=t&&f!==null&&t<=f)return d}return this.getBufferedFrag(t,n)}getBufferedFrag(t,n){return this.getFragAtPos(t,n,!0)}getFragAtPos(t,n,r){const{fragments:l}=this,d=Object.keys(l);for(let f=d.length;f--;){const p=l[d[f]];if((p==null?void 0:p.body.type)===n&&(!r||p.buffered)){const m=p.body;if(m.start<=t&&t<=m.end)return m}}return null}detectEvictedFragments(t,n,r,l,d){this.timeRanges&&(this.timeRanges[t]=n);const f=(l==null?void 0:l.fragment.sn)||-1;Object.keys(this.fragments).forEach(p=>{const m=this.fragments[p];if(!m||f>=m.body.sn)return;if(!m.buffered&&(!m.loaded||d)){m.body.type===r&&this.removeFragment(m.body);return}const y=m.range[t];if(y){if(y.time.length===0){this.removeFragment(m.body);return}y.time.some(b=>{const _=!this.isTimeBuffered(b.startPTS,b.endPTS,n);return _&&this.removeFragment(m.body),_})}})}detectPartialFragments(t){const n=this.timeRanges;if(!n||t.frag.sn==="initSegment")return;const r=t.frag,l=Kp(r),d=this.fragments[l];if(!d||d.buffered&&r.gap)return;const f=!r.relurl;Object.keys(n).forEach(p=>{const m=r.elementaryStreams[p];if(!m)return;const y=n[p],b=f||m.partial===!0;d.range[p]=this.getBufferedTimes(r,t.part,b,y)}),d.loaded=null,Object.keys(d.range).length?(d.buffered=!0,(d.body.endList=r.endList||d.body.endList)&&(this.endListFragments[d.body.type]=d),pT(d)||this.removeParts(r.sn-1,r.type)):this.removeFragment(d.body)}removeParts(t,n){const r=this.activePartLists[n];r&&(this.activePartLists[n]=v2(r,l=>l.fragment.sn>=t))}fragBuffered(t,n){const r=Kp(t);let l=this.fragments[r];!l&&n&&(l=this.fragments[r]={body:t,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},t.gap&&(this.hasGaps=!0)),l&&(l.loaded=null,l.buffered=!0)}getBufferedTimes(t,n,r,l){const d={time:[],partial:r},f=t.start,p=t.end,m=t.minEndPTS||p,y=t.maxStartPTS||f;for(let b=0;b<l.length;b++){const _=l.start(b)-this.bufferPadding,A=l.end(b)+this.bufferPadding;if(y>=_&&m<=A){d.time.push({startPTS:Math.max(f,l.start(b)),endPTS:Math.min(p,l.end(b))});break}else if(f<A&&p>_){const w=Math.max(f,l.start(b)),T=Math.min(p,l.end(b));T>w&&(d.partial=!0,d.time.push({startPTS:w,endPTS:T}))}else if(p<=_)break}return d}getPartialFragment(t){let n=null,r,l,d,f=0;const{bufferPadding:p,fragments:m}=this;return Object.keys(m).forEach(y=>{const b=m[y];b&&pT(b)&&(l=b.body.start-p,d=b.body.end+p,t>=l&&t<=d&&(r=Math.min(t-l,d-t),f<=r&&(n=b.body,f=r)))}),n}isEndListAppended(t){const n=this.endListFragments[t];return n!==void 0&&(n.buffered||pT(n))}getState(t){const n=Kp(t),r=this.fragments[n];return r?r.buffered?pT(r)?Ca.PARTIAL:Ca.OK:Ca.APPENDING:Ca.NOT_LOADED}isTimeBuffered(t,n,r){let l,d;for(let f=0;f<r.length;f++){if(l=r.start(f)-this.bufferPadding,d=r.end(f)+this.bufferPadding,t>=l&&n<=d)return!0;if(n<=l)return!1}return!1}onManifestLoading(){this.removeAllFragments()}onFragLoaded(t,n){if(n.frag.sn==="initSegment"||n.frag.bitrateTest)return;const r=n.frag,l=n.part?null:n,d=Kp(r);this.fragments[d]={body:r,appendedPTS:null,loaded:l,buffered:!1,range:Object.create(null)}}onBufferAppended(t,n){const{frag:r,part:l,timeRanges:d,type:f}=n;if(r.sn==="initSegment")return;const p=r.type;if(l){let y=this.activePartLists[p];y||(this.activePartLists[p]=y=[]),y.push(l)}this.timeRanges=d;const m=d[f];this.detectEvictedFragments(f,m,p,l)}onFragBuffered(t,n){this.detectPartialFragments(n)}hasFragment(t){const n=Kp(t);return!!this.fragments[n]}hasFragments(t){const{fragments:n}=this,r=Object.keys(n);if(!t)return r.length>0;for(let l=r.length;l--;){const d=n[r[l]];if((d==null?void 0:d.body.type)===t)return!0}return!1}hasParts(t){var n;return!!((n=this.activePartLists[t])!=null&&n.length)}removeFragmentsInRange(t,n,r,l,d){l&&!this.hasGaps||Object.keys(this.fragments).forEach(f=>{const p=this.fragments[f];if(!p)return;const m=p.body;m.type!==r||l&&!m.gap||m.start<n&&m.end>t&&(p.buffered||d)&&this.removeFragment(m)})}removeFragment(t){const n=Kp(t);t.clearElementaryStreamInfo();const r=this.activePartLists[t.type];if(r){const l=t.sn;this.activePartLists[t.type]=v2(r,d=>d.fragment.sn!==l)}delete this.fragments[n],t.endList&&delete this.endListFragments[t.type]}removeAllFragments(){var t,n;this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1;const r=(t=this.hls)==null||(n=t.latestLevelDetails)==null?void 0:n.partList;r&&r.forEach(l=>l.clearElementaryStreamInfo())}}function pT(u){var t,n,r;return u.buffered&&(u.body.gap||((t=u.range.video)==null?void 0:t.partial)||((n=u.range.audio)==null?void 0:n.partial)||((r=u.range.audiovideo)==null?void 0:r.partial))}function Kp(u){return`${u.type}_${u.level}_${u.sn}`}function v2(u,t){return u.filter(n=>{const r=t(n);return r||n.clearElementaryStreamInfo(),r})}var Df={cbc:0,ctr:1};class k6{constructor(t,n,r){this.subtle=void 0,this.aesIV=void 0,this.aesMode=void 0,this.subtle=t,this.aesIV=n,this.aesMode=r}decrypt(t,n){switch(this.aesMode){case Df.cbc:return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},n,t);case Df.ctr:return this.subtle.decrypt({name:"AES-CTR",counter:this.aesIV,length:64},n,t);default:throw new Error(`[AESCrypto] invalid aes mode ${this.aesMode}`)}}}function D6(u){const t=u.byteLength,n=t&&new DataView(u.buffer).getUint8(t-1);return n?u.slice(0,t-n):u}class R6{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(t){const n=new DataView(t),r=new Uint32Array(4);for(let l=0;l<4;l++)r[l]=n.getUint32(l*4);return r}initTable(){const t=this.sBox,n=this.invSBox,r=this.subMix,l=r[0],d=r[1],f=r[2],p=r[3],m=this.invSubMix,y=m[0],b=m[1],_=m[2],A=m[3],w=new Uint32Array(256);let T=0,k=0,U=0;for(U=0;U<256;U++)U<128?w[U]=U<<1:w[U]=U<<1^283;for(U=0;U<256;U++){let Y=k^k<<1^k<<2^k<<3^k<<4;Y=Y>>>8^Y&255^99,t[T]=Y,n[Y]=T;const se=w[T],te=w[se],Re=w[te];let Be=w[Y]*257^Y*16843008;l[T]=Be<<24|Be>>>8,d[T]=Be<<16|Be>>>16,f[T]=Be<<8|Be>>>24,p[T]=Be,Be=Re*16843009^te*65537^se*257^T*16843008,y[Y]=Be<<24|Be>>>8,b[Y]=Be<<16|Be>>>16,_[Y]=Be<<8|Be>>>24,A[Y]=Be,T?(T=se^w[w[w[Re^se]]],k^=w[w[k]]):T=k=1}}expandKey(t){const n=this.uint8ArrayToUint32Array_(t);let r=!0,l=0;for(;l<n.length&&r;)r=n[l]===this.key[l],l++;if(r)return;this.key=n;const d=this.keySize=n.length;if(d!==4&&d!==6&&d!==8)throw new Error("Invalid aes key size="+d);const f=this.ksRows=(d+6+1)*4;let p,m;const y=this.keySchedule=new Uint32Array(f),b=this.invKeySchedule=new Uint32Array(f),_=this.sBox,A=this.rcon,w=this.invSubMix,T=w[0],k=w[1],U=w[2],Y=w[3];let se,te;for(p=0;p<f;p++){if(p<d){se=y[p]=n[p];continue}te=se,p%d===0?(te=te<<8|te>>>24,te=_[te>>>24]<<24|_[te>>>16&255]<<16|_[te>>>8&255]<<8|_[te&255],te^=A[p/d|0]<<24):d>6&&p%d===4&&(te=_[te>>>24]<<24|_[te>>>16&255]<<16|_[te>>>8&255]<<8|_[te&255]),y[p]=se=(y[p-d]^te)>>>0}for(m=0;m<f;m++)p=f-m,m&3?te=y[p]:te=y[p-4],m<4||p<=4?b[m]=te:b[m]=T[_[te>>>24]]^k[_[te>>>16&255]]^U[_[te>>>8&255]]^Y[_[te&255]],b[m]=b[m]>>>0}networkToHostOrderSwap(t){return t<<24|(t&65280)<<8|(t&16711680)>>8|t>>>24}decrypt(t,n,r){const l=this.keySize+6,d=this.invKeySchedule,f=this.invSBox,p=this.invSubMix,m=p[0],y=p[1],b=p[2],_=p[3],A=this.uint8ArrayToUint32Array_(r);let w=A[0],T=A[1],k=A[2],U=A[3];const Y=new Int32Array(t),se=new Int32Array(Y.length);let te,Re,Be,j,M,Z,K,x,ue,$e,xe,lt,et,Xe;const ut=this.networkToHostOrderSwap;for(;n<Y.length;){for(ue=ut(Y[n]),$e=ut(Y[n+1]),xe=ut(Y[n+2]),lt=ut(Y[n+3]),M=ue^d[0],Z=lt^d[1],K=xe^d[2],x=$e^d[3],et=4,Xe=1;Xe<l;Xe++)te=m[M>>>24]^y[Z>>16&255]^b[K>>8&255]^_[x&255]^d[et],Re=m[Z>>>24]^y[K>>16&255]^b[x>>8&255]^_[M&255]^d[et+1],Be=m[K>>>24]^y[x>>16&255]^b[M>>8&255]^_[Z&255]^d[et+2],j=m[x>>>24]^y[M>>16&255]^b[Z>>8&255]^_[K&255]^d[et+3],M=te,Z=Re,K=Be,x=j,et=et+4;te=f[M>>>24]<<24^f[Z>>16&255]<<16^f[K>>8&255]<<8^f[x&255]^d[et],Re=f[Z>>>24]<<24^f[K>>16&255]<<16^f[x>>8&255]<<8^f[M&255]^d[et+1],Be=f[K>>>24]<<24^f[x>>16&255]<<16^f[M>>8&255]<<8^f[Z&255]^d[et+2],j=f[x>>>24]<<24^f[M>>16&255]<<16^f[Z>>8&255]<<8^f[K&255]^d[et+3],se[n]=ut(te^w),se[n+1]=ut(j^T),se[n+2]=ut(Be^k),se[n+3]=ut(Re^U),w=ue,T=$e,k=xe,U=lt,n=n+4}return se.buffer}}class L6{constructor(t,n,r){this.subtle=void 0,this.key=void 0,this.aesMode=void 0,this.subtle=t,this.key=n,this.aesMode=r}expandKey(){const t=P6(this.aesMode);return this.subtle.importKey("raw",this.key,{name:t},!1,["encrypt","decrypt"])}}function P6(u){switch(u){case Df.cbc:return"AES-CBC";case Df.ctr:return"AES-CTR";default:throw new Error(`[FastAESKey] invalid aes mode ${u}`)}}const M6=16;let cw=class{constructor(t,{removePKCS7Padding:n=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.enableSoftwareAES=void 0,this.enableSoftwareAES=t.enableSoftwareAES,this.removePKCS7Padding=n,n)try{const r=self.crypto;r&&(this.subtle=r.subtle||r.webkitSubtle)}catch{}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:t,remainderData:n}=this;if(!t||n)return this.reset(),null;const r=new Uint8Array(t);return this.reset(),this.removePKCS7Padding?D6(r):r}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(t,n,r,l){return this.useSoftware?new Promise((d,f)=>{const p=ArrayBuffer.isView(t)?t:new Uint8Array(t);this.softwareDecrypt(p,n,r,l);const m=this.flush();m?d(m.buffer):f(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(t),n,r,l)}softwareDecrypt(t,n,r,l){const{currentIV:d,currentResult:f,remainderData:p}=this;if(l!==Df.cbc||n.byteLength!==16)return Gr.warn("SoftwareDecrypt: can only handle AES-128-CBC"),null;this.logOnce("JS AES decrypt"),p&&(t=_u(p,t),this.remainderData=null);const m=this.getValidChunk(t);if(!m.length)return null;d&&(r=d);let y=this.softwareDecrypter;y||(y=this.softwareDecrypter=new R6),y.expandKey(n);const b=f;return this.currentResult=y.decrypt(m.buffer,0,r),this.currentIV=m.slice(-16).buffer,b||null}webCryptoDecrypt(t,n,r,l){if(this.key!==n||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(t,n,r,l));this.key=n,this.fastAesKey=new L6(this.subtle,n,l)}return this.fastAesKey.expandKey().then(d=>this.subtle?(this.logOnce("WebCrypto AES decrypt"),new k6(this.subtle,new Uint8Array(r),l).decrypt(t.buffer,d)):Promise.reject(new Error("web crypto not initialized"))).catch(d=>(Gr.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${d.name}: ${d.message}`),this.onWebCryptoError(t,n,r,l)))}onWebCryptoError(t,n,r,l){const d=this.enableSoftwareAES;if(d){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(t,n,r,l);const f=this.flush();if(f)return f.buffer}throw new Error("WebCrypto"+(d?" and softwareDecrypt":"")+": failed to decrypt data")}getValidChunk(t){let n=t;const r=t.length-t.length%M6;return r!==t.length&&(n=t.slice(0,r),this.remainderData=t.slice(r)),n}logOnce(t){this.logEnabled&&(Gr.log(`[decrypter]: ${t}`),this.logEnabled=!1)}};const T2=Math.pow(2,17);class N6{constructor(t){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=t}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(t,n){const r=t.url;if(!r)return Promise.reject(new Dd({type:Hi.NETWORK_ERROR,details:pn.FRAG_LOAD_ERROR,fatal:!1,frag:t,error:new Error(`Fragment does not have a ${r?"part list":"url"}`),networkDetails:null}));this.abort();const l=this.config,d=l.fLoader,f=l.loader;return new Promise((p,m)=>{if(this.loader&&this.loader.destroy(),t.gap)if(t.tagList.some(T=>T[0]==="GAP")){m(b2(t));return}else t.gap=!1;const y=this.loader=d?new d(l):new f(l),b=E2(t);t.loader=y;const _=y2(l.fragLoadPolicy.default),A={loadPolicy:_,timeout:_.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:t.sn==="initSegment"?1/0:T2};t.stats=y.stats;const w={onSuccess:(T,k,U,Y)=>{this.resetLoader(t,y);let se=T.data;U.resetIV&&t.decryptdata&&(t.decryptdata.iv=new Uint8Array(se.slice(0,16)),se=se.slice(16)),p({frag:t,part:null,payload:se,networkDetails:Y})},onError:(T,k,U,Y)=>{this.resetLoader(t,y),m(new Dd({type:Hi.NETWORK_ERROR,details:pn.FRAG_LOAD_ERROR,fatal:!1,frag:t,response:as({url:r,data:void 0},T),error:new Error(`HTTP Error ${T.code} ${T.text}`),networkDetails:U,stats:Y}))},onAbort:(T,k,U)=>{this.resetLoader(t,y),m(new Dd({type:Hi.NETWORK_ERROR,details:pn.INTERNAL_ABORTED,fatal:!1,frag:t,error:new Error("Aborted"),networkDetails:U,stats:T}))},onTimeout:(T,k,U)=>{this.resetLoader(t,y),m(new Dd({type:Hi.NETWORK_ERROR,details:pn.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t,error:new Error(`Timeout after ${A.timeout}ms`),networkDetails:U,stats:T}))}};n&&(w.onProgress=(T,k,U,Y)=>n({frag:t,part:null,payload:U,networkDetails:Y})),y.load(b,A,w)})}loadPart(t,n,r){this.abort();const l=this.config,d=l.fLoader,f=l.loader;return new Promise((p,m)=>{if(this.loader&&this.loader.destroy(),t.gap||n.gap){m(b2(t,n));return}const y=this.loader=d?new d(l):new f(l),b=E2(t,n);t.loader=y;const _=y2(l.fragLoadPolicy.default),A={loadPolicy:_,timeout:_.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:T2};n.stats=y.stats,y.load(b,A,{onSuccess:(w,T,k,U)=>{this.resetLoader(t,y),this.updateStatsFromPart(t,n);const Y={frag:t,part:n,payload:w.data,networkDetails:U};r(Y),p(Y)},onError:(w,T,k,U)=>{this.resetLoader(t,y),m(new Dd({type:Hi.NETWORK_ERROR,details:pn.FRAG_LOAD_ERROR,fatal:!1,frag:t,part:n,response:as({url:b.url,data:void 0},w),error:new Error(`HTTP Error ${w.code} ${w.text}`),networkDetails:k,stats:U}))},onAbort:(w,T,k)=>{t.stats.aborted=n.stats.aborted,this.resetLoader(t,y),m(new Dd({type:Hi.NETWORK_ERROR,details:pn.INTERNAL_ABORTED,fatal:!1,frag:t,part:n,error:new Error("Aborted"),networkDetails:k,stats:w}))},onTimeout:(w,T,k)=>{this.resetLoader(t,y),m(new Dd({type:Hi.NETWORK_ERROR,details:pn.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t,part:n,error:new Error(`Timeout after ${A.timeout}ms`),networkDetails:k,stats:w}))}})})}updateStatsFromPart(t,n){const r=t.stats,l=n.stats,d=l.total;if(r.loaded+=l.loaded,d){const m=Math.round(t.duration/n.duration),y=Math.min(Math.round(r.loaded/d),m),_=(m-y)*Math.round(r.loaded/y);r.total=r.loaded+_}else r.total=Math.max(r.loaded,r.total);const f=r.loading,p=l.loading;f.start?f.first+=p.first-p.start:(f.start=p.start,f.first=p.first),f.end=p.end}resetLoader(t,n){t.loader=null,this.loader===n&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),n.destroy()}}function E2(u,t=null){const n=t||u,r={frag:u,part:t,responseType:"arraybuffer",url:n.url,headers:{},rangeStart:0,rangeEnd:0},l=n.byteRangeStartOffset,d=n.byteRangeEndOffset;if(xi(l)&&xi(d)){var f;let p=l,m=d;if(u.sn==="initSegment"&&O6((f=u.decryptdata)==null?void 0:f.method)){const y=d-l;y%16&&(m=d+(16-y%16)),l!==0&&(r.resetIV=!0,p=l-16)}r.rangeStart=p,r.rangeEnd=m}return r}function b2(u,t){const n=new Error(`GAP ${u.gap?"tag":"attribute"} found`),r={type:Hi.MEDIA_ERROR,details:pn.FRAG_GAP,fatal:!1,frag:u,error:n,networkDetails:null};return t&&(r.part=t),(t||u).stats.aborted=!0,new Dd(r)}function O6(u){return u==="AES-128"||u==="AES-256"}class Dd extends Error{constructor(t){super(t.error.message),this.data=void 0,this.data=t}}class IM extends Bd{constructor(t,n){super(t,n),this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(t){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,t),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}class dw{constructor(t,n,r,l=0,d=-1,f=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=gT(),this.buffering={audio:gT(),video:gT(),audiovideo:gT()},this.level=t,this.sn=n,this.id=r,this.size=l,this.part=d,this.partial=f}}function gT(){return{start:0,executeStart:0,executeEnd:0,end:0}}const _2={length:0,start:()=>0,end:()=>0};class wr{static isBuffered(t,n){if(t){const r=wr.getBuffered(t);for(let l=r.length;l--;)if(n>=r.start(l)&&n<=r.end(l))return!0}return!1}static bufferedRanges(t){if(t){const n=wr.getBuffered(t);return wr.timeRangesToArray(n)}return[]}static timeRangesToArray(t){const n=[];for(let r=0;r<t.length;r++)n.push({start:t.start(r),end:t.end(r)});return n}static bufferInfo(t,n,r){if(t){const l=wr.bufferedRanges(t);if(l.length)return wr.bufferedInfo(l,n,r)}return{len:0,start:n,end:n,bufferedIndex:-1}}static bufferedInfo(t,n,r){n=Math.max(0,n),t.length>1&&t.sort((b,_)=>b.start-_.start||_.end-b.end);let l=-1,d=[];if(r)for(let b=0;b<t.length;b++){n>=t[b].start&&n<=t[b].end&&(l=b);const _=d.length;if(_){const A=d[_-1].end;t[b].start-A<r?t[b].end>A&&(d[_-1].end=t[b].end):d.push(t[b])}else d.push(t[b])}else d=t;let f=0,p,m=n,y=n;for(let b=0;b<d.length;b++){const _=d[b].start,A=d[b].end;if(l===-1&&n>=_&&n<=A&&(l=b),n+r>=_&&n<A)m=_,y=A,f=y-n;else if(n+r<_){p=_;break}}return{len:f,start:m||0,end:y||0,nextStart:p,buffered:t,bufferedIndex:l}}static getBuffered(t){try{return t.buffered||_2}catch(n){return Gr.log("failed to get media.buffered",n),_2}}}const CM=/\{\$([a-zA-Z0-9-_]+)\}/g;function S2(u){return CM.test(u)}function mA(u,t){if(u.variableList!==null||u.hasVariableRefs){const n=u.variableList;return t.replace(CM,r=>{const l=r.substring(2,r.length-1),d=n==null?void 0:n[l];return d===void 0?(u.playlistParsingError||(u.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${l}"`)),r):d})}return t}function x2(u,t,n){let r=u.variableList;r||(u.variableList=r={});let l,d;if("QUERYPARAM"in t){l=t.QUERYPARAM;try{const f=new self.URL(n).searchParams;if(f.has(l))d=f.get(l);else throw new Error(`"${l}" does not match any query parameter in URI: "${n}"`)}catch(f){u.playlistParsingError||(u.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${f.message}`))}}else l=t.NAME,d=t.VALUE;l in r?u.playlistParsingError||(u.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${l}"`)):r[l]=d||""}function F6(u,t,n){const r=t.IMPORT;if(n&&r in n){let l=u.variableList;l||(u.variableList=l={}),l[r]=n[r]}else u.playlistParsingError||(u.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${r}"`))}const U6=/^(\d+)x(\d+)$/,A2=/(.+?)=(".*?"|.*?)(?:,|$)/g;class $s{constructor(t,n){typeof t=="string"&&(t=$s.parseAttrList(t,n)),hs(this,t)}get clientAttrs(){return Object.keys(this).filter(t=>t.substring(0,2)==="X-")}decimalInteger(t){const n=parseInt(this[t],10);return n>Number.MAX_SAFE_INTEGER?1/0:n}hexadecimalInteger(t){if(this[t]){let n=(this[t]||"0x").slice(2);n=(n.length&1?"0":"")+n;const r=new Uint8Array(n.length/2);for(let l=0;l<n.length/2;l++)r[l]=parseInt(n.slice(l*2,l*2+2),16);return r}return null}hexadecimalIntegerAsNumber(t){const n=parseInt(this[t],16);return n>Number.MAX_SAFE_INTEGER?1/0:n}decimalFloatingPoint(t){return parseFloat(this[t])}optionalFloat(t,n){const r=this[t];return r?parseFloat(r):n}enumeratedString(t){return this[t]}enumeratedStringList(t,n){const r=this[t];return(r?r.split(/[ ,]+/):[]).reduce((l,d)=>(l[d.toLowerCase()]=!0,l),n)}bool(t){return this[t]==="YES"}decimalResolution(t){const n=U6.exec(this[t]);if(n!==null)return{width:parseInt(n[1],10),height:parseInt(n[2],10)}}static parseAttrList(t,n){let r;const l={},d='"';for(A2.lastIndex=0;(r=A2.exec(t))!==null;){const f=r[1].trim();let p=r[2];const m=p.indexOf(d)===0&&p.lastIndexOf(d)===p.length-1;let y=!1;if(m)p=p.slice(1,-1);else switch(f){case"IV":case"SCTE35-CMD":case"SCTE35-IN":case"SCTE35-OUT":y=!0}if(n&&(m||y))p=mA(n,p);else if(!y&&!m)switch(f){case"CLOSED-CAPTIONS":if(p==="NONE")break;case"ALLOWED-CPC":case"CLASS":case"ASSOC-LANGUAGE":case"AUDIO":case"BYTERANGE":case"CHANNELS":case"CHARACTERISTICS":case"CODECS":case"DATA-ID":case"END-DATE":case"GROUP-ID":case"ID":case"IMPORT":case"INSTREAM-ID":case"KEYFORMAT":case"KEYFORMATVERSIONS":case"LANGUAGE":case"NAME":case"PATHWAY-ID":case"QUERYPARAM":case"RECENTLY-REMOVED-DATERANGES":case"SERVER-URI":case"STABLE-RENDITION-ID":case"STABLE-VARIANT-ID":case"START-DATE":case"SUBTITLES":case"SUPPLEMENTAL-CODECS":case"URI":case"VALUE":case"VIDEO":case"X-ASSET-LIST":case"X-ASSET-URI":Gr.warn(`${t}: attribute ${f} is missing quotes`)}l[f]=p}return l}}const B6="com.apple.hls.interstitial";function z6(u){return u!=="ID"&&u!=="CLASS"&&u!=="CUE"&&u!=="START-DATE"&&u!=="DURATION"&&u!=="END-DATE"&&u!=="END-ON-NEXT"}function j6(u){return u==="SCTE35-OUT"||u==="SCTE35-IN"||u==="SCTE35-CMD"}class kM{constructor(t,n,r=0){var l;if(this.attr=void 0,this.tagAnchor=void 0,this.tagOrder=void 0,this._startDate=void 0,this._endDate=void 0,this._dateAtEnd=void 0,this._cue=void 0,this._badValueForSameId=void 0,this.tagAnchor=(n==null?void 0:n.tagAnchor)||null,this.tagOrder=(l=n==null?void 0:n.tagOrder)!=null?l:r,n){const d=n.attr;for(const f in d)if(Object.prototype.hasOwnProperty.call(t,f)&&t[f]!==d[f]){Gr.warn(`DATERANGE tag attribute: "${f}" does not match for tags with ID: "${t.ID}"`),this._badValueForSameId=f;break}t=hs(new $s({}),d,t)}if(this.attr=t,n?(this._startDate=n._startDate,this._cue=n._cue,this._endDate=n._endDate,this._dateAtEnd=n._dateAtEnd):this._startDate=new Date(t["START-DATE"]),"END-DATE"in this.attr){const d=(n==null?void 0:n.endDate)||new Date(this.attr["END-DATE"]);xi(d.getTime())&&(this._endDate=d)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get cue(){const t=this._cue;return t===void 0?this._cue=this.attr.enumeratedStringList(this.attr.CUE?"CUE":"X-CUE",{pre:!1,post:!1,once:!1}):t}get startTime(){const{tagAnchor:t}=this;return t===null||t.programDateTime===null?(Gr.warn(`Expected tagAnchor Fragment with PDT set for DateRange "${this.id}": ${t}`),NaN):t.start+(this.startDate.getTime()-t.programDateTime)/1e3}get startDate(){return this._startDate}get endDate(){const t=this._endDate||this._dateAtEnd;if(t)return t;const n=this.duration;return n!==null?this._dateAtEnd=new Date(this._startDate.getTime()+n*1e3):null}get duration(){if("DURATION"in this.attr){const t=this.attr.decimalFloatingPoint("DURATION");if(xi(t))return t}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isInterstitial(){return this.class===B6}get isValid(){return!!this.id&&!this._badValueForSameId&&xi(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)&&(!this.attr.CUE||!this.cue.pre&&!this.cue.post||this.cue.pre!==this.cue.post)&&(!this.isInterstitial||"X-ASSET-URI"in this.attr||"X-ASSET-LIST"in this.attr)}}const q6=10;class H6{constructor(t){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.dateRangeTagCount=0,this.live=!0,this.requestScheduled=-1,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.appliedTimelineOffset=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=t}reloaded(t){if(!t){this.advanced=!0,this.updated=!0;return}const n=this.lastPartSn-t.lastPartSn,r=this.lastPartIndex-t.lastPartIndex;this.updated=this.endSN!==t.endSN||!!r||!!n||!this.live,this.advanced=this.endSN>t.endSN||n>0||n===0&&r>0,this.updated||this.advanced?this.misses=Math.floor(t.misses*.6):this.misses=t.misses+1}get hasProgramDateTime(){return this.fragments.length?xi(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||q6}get drift(){const t=this.driftEndTime-this.driftStartTime;return t>0?(this.driftEnd-this.driftStart)*1e3/t:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var t;return(t=this.partList)!=null&&t.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){var t;return(t=this.fragments)!=null&&t.length?this.fragments[this.fragments.length-1].end:0}get fragmentStart(){var t;return(t=this.fragments)!=null&&t.length?this.fragments[0].start:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var t;return(t=this.partList)!=null&&t.length?this.partList[this.partList.length-1].index:-1}get maxPartIndex(){const t=this.partList;if(t){const n=this.lastPartIndex;if(n!==-1){for(let r=t.length;r--;)if(t[r].index>n)return t[r].index;return n}}return 0}get lastPartSn(){var t;return(t=this.partList)!=null&&t.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}get expired(){if(this.live&&this.age&&this.misses<3){const t=this.partEnd-this.fragmentStart;return this.age>Math.max(t,this.totalduration)+this.levelTargetDuration}return!1}}function sg(u){return u==="AES-128"||u==="AES-256"||u==="AES-256-CTR"}function fw(u){switch(u){case"AES-128":case"AES-256":return Df.cbc;case"AES-256-CTR":return Df.ctr;default:throw new Error(`invalid full segment method ${u}`)}}function hw(u){return Uint8Array.from(atob(u),t=>t.charCodeAt(0))}function yA(u){return Uint8Array.from(unescape(encodeURIComponent(u)),t=>t.charCodeAt(0))}function G6(u){const t=yA(u).subarray(0,16),n=new Uint8Array(16);return n.set(t,16-t.length),n}function V6(u){const t=function(r,l,d){const f=r[l];r[l]=r[d],r[d]=f};t(u,0,3),t(u,1,2),t(u,4,5),t(u,6,7)}function $6(u){const t=u.split(":");let n=null;if(t[0]==="data"&&t.length===2){const r=t[1].split(";"),l=r[r.length-1].split(",");if(l.length===2){const d=l[0]==="base64",f=l[1];d?(r.splice(-1,1),n=hw(f)):n=G6(f)}}return n}const sE=typeof self<"u"?self:void 0;var os={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},_l={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function lx(u){switch(u){case _l.FAIRPLAY:return os.FAIRPLAY;case _l.PLAYREADY:return os.PLAYREADY;case _l.WIDEVINE:return os.WIDEVINE;case _l.CLEARKEY:return os.CLEARKEY}}var mT={CENC:"1077efecc0b24d02ace33c1e52e2fb4b",CLEARKEY:"e2719d58a985b3c9781ab030af78d30e",PLAYREADY:"9a04f07998404286ab92e65be0885f95",WIDEVINE:"edef8ba979d64acea3c827dcd51d21ed"};function ux(u){if(u===mT.WIDEVINE)return os.WIDEVINE;if(u===mT.PLAYREADY)return os.PLAYREADY;if(u===mT.CENC||u===mT.CLEARKEY)return os.CLEARKEY}function cx(u){switch(u){case os.FAIRPLAY:return _l.FAIRPLAY;case os.PLAYREADY:return _l.PLAYREADY;case os.WIDEVINE:return _l.WIDEVINE;case os.CLEARKEY:return _l.CLEARKEY}}function yT(u){const{drmSystems:t,widevineLicenseUrl:n}=u,r=t?[os.FAIRPLAY,os.WIDEVINE,os.PLAYREADY,os.CLEARKEY].filter(l=>!!t[l]):[];return!r[os.WIDEVINE]&&n&&r.push(os.WIDEVINE),r}const DM=function(u){return sE!=null&&(u=sE.navigator)!=null&&u.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}();function K6(u,t,n,r){let l;switch(u){case os.FAIRPLAY:l=["cenc","sinf"];break;case os.WIDEVINE:case os.PLAYREADY:l=["cenc"];break;case os.CLEARKEY:l=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${u}`)}return Y6(l,t,n,r)}function Y6(u,t,n,r){return[{initDataTypes:u,persistentState:r.persistentState||"optional",distinctiveIdentifier:r.distinctiveIdentifier||"optional",sessionTypes:r.sessionTypes||[r.sessionType||"temporary"],audioCapabilities:t.map(d=>({contentType:`audio/mp4; codecs=${d}`,robustness:r.audioRobustness||"",encryptionScheme:r.audioEncryptionScheme||null})),videoCapabilities:n.map(d=>({contentType:`video/mp4; codecs=${d}`,robustness:r.videoRobustness||"",encryptionScheme:r.videoEncryptionScheme||null}))}]}function W6(u){var t;return u.sessionType==="persistent-license"||!!((t=u.sessionTypes)!=null&&t.some(n=>n==="persistent-license"))}function RM(u){const t=new Uint16Array(u.buffer,u.byteOffset,u.byteLength/2),n=String.fromCharCode.apply(null,Array.from(t)),r=n.substring(n.indexOf("<"),n.length),f=new DOMParser().parseFromString(r,"text/xml").getElementsByTagName("KID")[0];if(f){const p=f.childNodes[0]?f.childNodes[0].nodeValue:f.getAttribute("VALUE");if(p){const m=hw(p).subarray(0,16);return V6(m),m}}return null}let vT={};class Cy{static clearKeyUriToKeyIdMap(){vT={}}constructor(t,n,r,l=[1],d=null){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=t,this.uri=n,this.keyFormat=r,this.keyFormatVersions=l,this.iv=d,this.encrypted=t?t!=="NONE":!1,this.isCommonEncryption=this.encrypted&&!sg(t)}isSupported(){if(this.method){if(sg(this.method)||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case _l.FAIRPLAY:case _l.WIDEVINE:case _l.PLAYREADY:case _l.CLEARKEY:return["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(t){if(!this.encrypted||!this.uri)return null;if(sg(this.method)&&this.uri&&!this.iv){typeof t!="number"&&(Gr.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),t=0);const r=X6(t);return new Cy(this.method,this.uri,"identity",this.keyFormatVersions,r)}const n=$6(this.uri);if(n)switch(this.keyFormat){case _l.WIDEVINE:this.pssh=n,n.length>=22&&(this.keyId=n.subarray(n.length-22,n.length-6));break;case _l.PLAYREADY:{const r=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=t6(r,null,n),this.keyId=RM(n);break}default:{let r=n.subarray(0,16);if(r.length!==16){const l=new Uint8Array(16);l.set(r,16-r.length),r=l}this.keyId=r;break}}if(!this.keyId||this.keyId.byteLength!==16){let r=vT[this.uri];if(!r){const l=Object.keys(vT).length%Number.MAX_SAFE_INTEGER;r=new Uint8Array(16),new DataView(r.buffer,12,4).setUint32(0,l),vT[this.uri]=r}this.keyId=r}return this}}function X6(u){const t=new Uint8Array(16);for(let n=12;n<16;n++)t[n]=u>>8*(15-n)&255;return t}const w2=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,I2=/#EXT-X-MEDIA:(.*)/g,Q6=/^#EXT(?:INF|-X-TARGETDURATION):/m,dx=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#.*/.source].join("|"),"g"),J6=new RegExp([/#EXT-X-(PROGRAM-DATE-TIME|BYTERANGE|DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class Oc{static findGroup(t,n){for(let r=0;r<t.length;r++){const l=t[r];if(l.id===n)return l}}static resolve(t,n){return sw.buildAbsoluteURL(n,t,{alwaysNormalize:!0})}static isMediaPlaylist(t){return Q6.test(t)}static parseMasterPlaylist(t,n){const r=S2(t),l={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:r},d=[];w2.lastIndex=0;let f;for(;(f=w2.exec(t))!=null;)if(f[1]){var p;const y=new $s(f[1],l),b=mA(l,f[2]),_={attrs:y,bitrate:y.decimalInteger("BANDWIDTH")||y.decimalInteger("AVERAGE-BANDWIDTH"),name:y.NAME,url:Oc.resolve(b,n)},A=y.decimalResolution("RESOLUTION");A&&(_.width=A.width,_.height=A.height),D2(y.CODECS,_);const w=y["SUPPLEMENTAL-CODECS"];w&&(_.supplemental={},D2(w,_.supplemental)),(p=_.unknownCodecs)!=null&&p.length||d.push(_),l.levels.push(_)}else if(f[3]){const y=f[3],b=f[4];switch(y){case"SESSION-DATA":{const _=new $s(b,l),A=_["DATA-ID"];A&&(l.sessionData===null&&(l.sessionData={}),l.sessionData[A]=_);break}case"SESSION-KEY":{const _=C2(b,n,l);_.encrypted&&_.isSupported()?(l.sessionKeys===null&&(l.sessionKeys=[]),l.sessionKeys.push(_)):Gr.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${b}"`);break}case"DEFINE":{{const _=new $s(b,l);x2(l,_,n)}break}case"CONTENT-STEERING":{const _=new $s(b,l);l.contentSteering={uri:Oc.resolve(_["SERVER-URI"],n),pathwayId:_["PATHWAY-ID"]||"."};break}case"START":{l.startTimeOffset=k2(b);break}}}const m=d.length>0&&d.length<l.levels.length;return l.levels=m?d:l.levels,l.levels.length===0&&(l.playlistParsingError=new Error("no levels found in manifest")),l}static parseMasterPlaylistMedia(t,n,r){let l;const d={},f=r.levels,p={AUDIO:f.map(y=>({id:y.attrs.AUDIO,audioCodec:y.audioCodec})),SUBTITLES:f.map(y=>({id:y.attrs.SUBTITLES,textCodec:y.textCodec})),"CLOSED-CAPTIONS":[]};let m=0;for(I2.lastIndex=0;(l=I2.exec(t))!==null;){const y=new $s(l[1],r),b=y.TYPE;if(b){const _=p[b],A=d[b]||[];d[b]=A;const w=y.LANGUAGE,T=y["ASSOC-LANGUAGE"],k=y.CHANNELS,U=y.CHARACTERISTICS,Y=y["INSTREAM-ID"],se={attrs:y,bitrate:0,id:m++,groupId:y["GROUP-ID"]||"",name:y.NAME||w||"",type:b,default:y.bool("DEFAULT"),autoselect:y.bool("AUTOSELECT"),forced:y.bool("FORCED"),lang:w,url:y.URI?Oc.resolve(y.URI,n):""};if(T&&(se.assocLang=T),k&&(se.channels=k),U&&(se.characteristics=U),Y&&(se.instreamId=Y),_!=null&&_.length){const te=Oc.findGroup(_,se.groupId)||_[0];R2(se,te,"audioCodec"),R2(se,te,"textCodec")}A.push(se)}}return d}static parseLevelPlaylist(t,n,r,l,d,f){var p;const m={url:n},y=new H6(n),b=y.fragments,_=[];let A=null,w=0,T=0,k=0,U=0,Y=0,se=null,te=new rx(l,m),Re,Be,j,M=-1,Z=!1,K=null,x;if(dx.lastIndex=0,y.m3u8=t,y.hasVariableRefs=S2(t),((p=dx.exec(t))==null?void 0:p[0])!=="#EXTM3U")return y.playlistParsingError=new Error("Missing format identifier #EXTM3U"),y;for(;(Re=dx.exec(t))!==null;){Z&&(Z=!1,te=new rx(l,m),te.playlistOffset=k,te.start=k,te.sn=w,te.cc=U,Y&&(te.bitrate=Y),te.level=r,A&&(te.initSegment=A,A.rawProgramDateTime&&(te.rawProgramDateTime=A.rawProgramDateTime,A.rawProgramDateTime=null),K&&(te.setByteRange(K),K=null)));const lt=Re[1];if(lt){te.duration=parseFloat(lt);const et=(" "+Re[2]).slice(1);te.title=et||null,te.tagList.push(et?["INF",lt,et]:["INF",lt])}else if(Re[3]){if(xi(te.duration)){te.playlistOffset=k,te.start=k,j&&P2(te,j,y),te.sn=w,te.level=r,te.cc=U,b.push(te);const et=(" "+Re[3]).slice(1);te.relurl=mA(y,et),vA(te,se,_),se=te,k+=te.duration,w++,T=0,Z=!0}}else{if(Re=Re[0].match(J6),!Re){Gr.warn("No matches on slow regex match for level playlist!");continue}for(Be=1;Be<Re.length&&Re[Be]===void 0;Be++);const et=(" "+Re[Be]).slice(1),Xe=(" "+Re[Be+1]).slice(1),ut=Re[Be+2]?(" "+Re[Be+2]).slice(1):null;switch(et){case"BYTERANGE":se?te.setByteRange(Xe,se):te.setByteRange(Xe);break;case"PROGRAM-DATE-TIME":te.rawProgramDateTime=Xe,te.tagList.push(["PROGRAM-DATE-TIME",Xe]),M===-1&&(M=b.length);break;case"PLAYLIST-TYPE":y.type&&Id(y,et,Re),y.type=Xe.toUpperCase();break;case"MEDIA-SEQUENCE":y.startSN!==0?Id(y,et,Re):b.length>0&&M2(y,et,Re),w=y.startSN=parseInt(Xe);break;case"SKIP":{y.skippedSegments&&Id(y,et,Re);const Dt=new $s(Xe,y),dt=Dt.decimalInteger("SKIPPED-SEGMENTS");if(xi(dt)){y.skippedSegments+=dt;for(let Rt=dt;Rt--;)b.push(null);w+=dt}const Et=Dt.enumeratedString("RECENTLY-REMOVED-DATERANGES");Et&&(y.recentlyRemovedDateranges=(y.recentlyRemovedDateranges||[]).concat(Et.split("	")));break}case"TARGETDURATION":y.targetduration!==0&&Id(y,et,Re),y.targetduration=Math.max(parseInt(Xe),1);break;case"VERSION":y.version!==null&&Id(y,et,Re),y.version=parseInt(Xe);break;case"INDEPENDENT-SEGMENTS":break;case"ENDLIST":y.live||Id(y,et,Re),y.live=!1;break;case"#":(Xe||ut)&&te.tagList.push(ut?[Xe,ut]:[Xe]);break;case"DISCONTINUITY":U++,te.tagList.push(["DIS"]);break;case"GAP":te.gap=!0,te.tagList.push([et]);break;case"BITRATE":te.tagList.push([et,Xe]),Y=parseInt(Xe)*1e3,xi(Y)?te.bitrate=Y:Y=0;break;case"DATERANGE":{const Dt=new $s(Xe,y),dt=new kM(Dt,y.dateRanges[Dt.ID],y.dateRangeTagCount);y.dateRangeTagCount++,dt.isValid||y.skippedSegments?y.dateRanges[dt.id]=dt:Gr.warn(`Ignoring invalid DATERANGE tag: "${Xe}"`),te.tagList.push(["EXT-X-DATERANGE",Xe]);break}case"DEFINE":{{const Dt=new $s(Xe,y);"IMPORT"in Dt?F6(y,Dt,f):x2(y,Dt,n)}break}case"DISCONTINUITY-SEQUENCE":y.startCC!==0?Id(y,et,Re):b.length>0&&M2(y,et,Re),y.startCC=U=parseInt(Xe);break;case"KEY":{const Dt=C2(Xe,n,y);if(Dt.isSupported()){if(Dt.method==="NONE"){j=void 0;break}j||(j={}),j[Dt.keyFormat]&&(j=hs({},j)),j[Dt.keyFormat]=Dt}else Gr.warn(`[Keys] Ignoring invalid EXT-X-KEY tag: "${Xe}"`);break}case"START":y.startTimeOffset=k2(Xe);break;case"MAP":{const Dt=new $s(Xe,y);if(te.duration){const dt=new rx(l,m);L2(dt,Dt,r,j),A=dt,te.initSegment=A,A.rawProgramDateTime&&!te.rawProgramDateTime&&(te.rawProgramDateTime=A.rawProgramDateTime)}else{const dt=te.byteRangeEndOffset;if(dt){const Et=te.byteRangeStartOffset;K=`${dt-Et}@${Et}`}else K=null;L2(te,Dt,r,j),A=te,Z=!0}A.cc=U;break}case"SERVER-CONTROL":{x&&Id(y,et,Re),x=new $s(Xe),y.canBlockReload=x.bool("CAN-BLOCK-RELOAD"),y.canSkipUntil=x.optionalFloat("CAN-SKIP-UNTIL",0),y.canSkipDateRanges=y.canSkipUntil>0&&x.bool("CAN-SKIP-DATERANGES"),y.partHoldBack=x.optionalFloat("PART-HOLD-BACK",0),y.holdBack=x.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{y.partTarget&&Id(y,et,Re);const Dt=new $s(Xe);y.partTarget=Dt.decimalFloatingPoint("PART-TARGET");break}case"PART":{let Dt=y.partList;Dt||(Dt=y.partList=[]);const dt=T>0?Dt[Dt.length-1]:void 0,Et=T++,Rt=new $s(Xe,y),mn=new z5(Rt,te,m,Et,dt);Dt.push(mn),te.duration+=mn.duration;break}case"PRELOAD-HINT":{const Dt=new $s(Xe,y);y.preloadHint=Dt;break}case"RENDITION-REPORT":{const Dt=new $s(Xe,y);y.renditionReports=y.renditionReports||[],y.renditionReports.push(Dt);break}default:Gr.warn(`line parsed but not handled: ${Re}`);break}}}se&&!se.relurl?(b.pop(),k-=se.duration,y.partList&&(y.fragmentHint=se)):y.partList&&(vA(te,se,_),te.cc=U,y.fragmentHint=te,j&&P2(te,j,y)),y.targetduration||(y.playlistParsingError=new Error("#EXT-X-TARGETDURATION is required"));const ue=b.length,$e=b[0],xe=b[ue-1];if(k+=y.skippedSegments*y.targetduration,k>0&&ue&&xe){y.averagetargetduration=k/ue;const lt=xe.sn;y.endSN=lt!=="initSegment"?lt:0,y.live||(xe.endList=!0),$e&&y.startCC===void 0&&(y.startCC=$e.cc),M>0&&(eq(b,M),$e&&_.unshift($e))}else y.endSN=0,y.startCC=0;return y.fragmentHint&&(k+=y.fragmentHint.duration),y.totalduration=k,_.length&&y.dateRangeTagCount&&$e&&LM(_,y),y.endCC=U,y}}function LM(u,t){const n=u.length,r=u[n-1],l=t.live?1/0:t.totalduration,d=Object.keys(t.dateRanges);for(let f=d.length;f--;){const p=t.dateRanges[d[f]],m=p.startDate.getTime();p.tagAnchor=r.ref;for(let y=n;y--;){const b=Z6(t,m,u,y,l);if(b!==-1){p.tagAnchor=t.fragments[b].ref;break}}}}function Z6(u,t,n,r,l){const d=n[r];if(d){const p=d.programDateTime;if(t>=p||r===0){var f;const m=(((f=n[r+1])==null?void 0:f.start)||l)-d.start;if(t<=p+m*1e3){const y=n[r].sn-u.startSN,b=u.fragments;if(b.length>n.length){const A=(n[r+1]||b[b.length-1]).sn-u.startSN;for(let w=A;w>y;w--){const T=b[w].programDateTime;if(t>=T&&t<T+b[w].duration*1e3)return w}}return y}}}return-1}function C2(u,t,n){var r,l;const d=new $s(u,n),f=(r=d.METHOD)!=null?r:"",p=d.URI,m=d.hexadecimalInteger("IV"),y=d.KEYFORMATVERSIONS,b=(l=d.KEYFORMAT)!=null?l:"identity";p&&d.IV&&!m&&Gr.error(`Invalid IV: ${d.IV}`);const _=p?Oc.resolve(p,t):"",A=(y||"1").split("/").map(Number).filter(Number.isFinite);return new Cy(f,_,b,A,m)}function k2(u){const n=new $s(u).decimalFloatingPoint("TIME-OFFSET");return xi(n)?n:null}function D2(u,t){let n=(u||"").split(/[ ,]+/).filter(r=>r);["video","audio","text"].forEach(r=>{const l=n.filter(d=>TM(d,r));l.length&&(t[`${r}Codec`]=l.map(d=>d.split("/")[0]).join(","),n=n.filter(d=>l.indexOf(d)===-1))}),t.unknownCodecs=n}function R2(u,t,n){const r=t[n];r&&(u[n]=r)}function eq(u,t){let n=u[t];for(let r=t;r--;){const l=u[r];if(!l)return;l.programDateTime=n.programDateTime-l.duration*1e3,n=l}}function vA(u,t,n){u.rawProgramDateTime?n.push(u):t!=null&&t.programDateTime&&(u.programDateTime=t.endProgramDateTime)}function L2(u,t,n,r){u.relurl=t.URI,t.BYTERANGE&&u.setByteRange(t.BYTERANGE),u.level=n,u.sn="initSegment",r&&(u.levelkeys=r),u.initSegment=null}function P2(u,t,n){u.levelkeys=t;const{encryptedFragments:r}=n;(!r.length||r[r.length-1].levelkeys!==t)&&Object.keys(t).some(l=>t[l].isCommonEncryption)&&r.push(u)}function Id(u,t,n){u.playlistParsingError=new Error(`#EXT-X-${t} must not appear more than once (${n[0]})`)}function M2(u,t,n){u.playlistParsingError=new Error(`#EXT-X-${t} must appear before the first Media Segment (${n[0]})`)}function fx(u,t){const n=t.startPTS;if(xi(n)){let r=0,l;t.sn>u.sn?(r=n-u.start,l=u):(r=u.start-n,l=t),l.duration!==r&&l.setDuration(r)}else t.sn>u.sn?u.cc===t.cc&&u.minEndPTS?t.setStart(u.start+(u.minEndPTS-u.start)):t.setStart(u.start+u.duration):t.setStart(Math.max(u.start-t.duration,0))}function PM(u,t,n,r,l,d){r-n<=0&&(Gr.warn("Fragment should have a positive duration",t),r=n+t.duration,d=l+t.duration);let p=n,m=r;const y=t.startPTS,b=t.endPTS;if(xi(y)){const U=Math.abs(y-n);xi(t.deltaPTS)?t.deltaPTS=Math.max(U,t.deltaPTS):t.deltaPTS=U,p=Math.max(n,y),n=Math.min(n,y),l=Math.min(l,t.startDTS),m=Math.min(r,b),r=Math.max(r,b),d=Math.max(d,t.endDTS)}const _=n-t.start;t.start!==0&&t.setStart(n),t.setDuration(r-t.start),t.startPTS=n,t.maxStartPTS=p,t.startDTS=l,t.endPTS=r,t.minEndPTS=m,t.endDTS=d;const A=t.sn;if(!u||A<u.startSN||A>u.endSN)return 0;let w;const T=A-u.startSN,k=u.fragments;for(k[T]=t,w=T;w>0;w--)fx(k[w],k[w-1]);for(w=T;w<k.length-1;w++)fx(k[w],k[w+1]);return u.fragmentHint&&fx(k[k.length-1],u.fragmentHint),u.PTSKnown=u.alignedSliding=!0,_}function tq(u,t){if(u===t)return;let n=null;const r=u.fragments;for(let m=r.length-1;m>=0;m--){const y=r[m].initSegment;if(y){n=y;break}}u.fragmentHint&&delete u.fragmentHint.endPTS;let l;rq(u,t,(m,y,b,_)=>{if(!t.startCC&&y.cc!==m.cc){var A,w;const T=m.cc-y.cc;for(let k=b;k<_.length;k++)_[k].cc+=T;t.startCC=(A=(w=OM(u,t.startSN-1))==null?void 0:w.cc)!=null?A:_[0].cc,t.endCC=_[_.length-1].cc}xi(m.startPTS)&&xi(m.endPTS)&&(y.setStart(y.startPTS=m.startPTS),y.startDTS=m.startDTS,y.maxStartPTS=m.maxStartPTS,y.endPTS=m.endPTS,y.endDTS=m.endDTS,y.minEndPTS=m.minEndPTS,y.setDuration(m.endPTS-m.startPTS),y.duration&&(l=y),t.PTSKnown=t.alignedSliding=!0),m.hasStreams&&(y.elementaryStreams=m.elementaryStreams),y.loader=m.loader,m.hasStats&&(y.stats=m.stats),m.initSegment&&(y.initSegment=m.initSegment,n=m.initSegment)});const d=t.fragments,f=t.fragmentHint?d.concat(t.fragmentHint):d;if(n&&f.forEach(m=>{var y;m&&(!m.initSegment||m.initSegment.relurl===((y=n)==null?void 0:y.relurl))&&(m.initSegment=n)}),t.skippedSegments)if(t.deltaUpdateFailed=d.some(m=>!m),t.deltaUpdateFailed){Gr.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let m=t.skippedSegments;m--;)d.shift();t.startSN=d[0].sn}else{t.endCC=d[d.length-1].cc,t.canSkipDateRanges&&(t.dateRanges=nq(u.dateRanges,t));const m=u.fragments.filter(y=>y.rawProgramDateTime);if(u.hasProgramDateTime&&!t.hasProgramDateTime)for(let y=1;y<f.length;y++)f[y].programDateTime===null&&vA(f[y],f[y-1],m);LM(m,t)}iq(u.partList,t.partList,(m,y)=>{y.elementaryStreams=m.elementaryStreams,y.stats=m.stats}),l?PM(t,l,l.startPTS,l.endPTS,l.startDTS,l.endDTS):MM(u,t),d.length&&(t.totalduration=t.edge-d[0].start),t.driftStartTime=u.driftStartTime,t.driftStart=u.driftStart;const p=t.advancedDateTime;if(t.advanced&&p){const m=t.edge;t.driftStart||(t.driftStartTime=p,t.driftStart=m),t.driftEndTime=p,t.driftEnd=m}else t.driftEndTime=u.driftEndTime,t.driftEnd=u.driftEnd,t.advancedDateTime=u.advancedDateTime;t.requestScheduled===-1&&(t.requestScheduled=u.requestScheduled)}function nq(u,t){const{dateRanges:n,recentlyRemovedDateranges:r}=t,l=hs({},u);r&&r.forEach(p=>{delete l[p]});const f=Object.keys(l).length;return f&&Object.keys(n).forEach(p=>{const m=l[p],y=new kM(n[p].attr,m);y.isValid?(l[p]=y,m||(y.tagOrder+=f)):Gr.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${Bs(n[p].attr)}"`)}),l}function iq(u,t,n){if(u&&t){let r=0;for(let l=0,d=u.length;l<=d;l++){const f=u[l],p=t[l+r];f&&p&&f.index===p.index&&f.fragment.sn===p.fragment.sn?n(f,p):r--}}}function rq(u,t,n){const r=t.skippedSegments,l=Math.max(u.startSN,t.startSN)-t.startSN,d=(u.fragmentHint?1:0)+(r?t.endSN:Math.min(u.endSN,t.endSN))-t.startSN,f=t.startSN-u.startSN,p=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments,m=u.fragmentHint?u.fragments.concat(u.fragmentHint):u.fragments;for(let y=l;y<=d;y++){const b=m[f+y];let _=p[y];if(r&&!_&&b&&(_=t.fragments[y]=b),b&&_){if(n(b,_,y,p),b.url&&b.url!==_.url){t.playlistParsingError=N2(`media sequence mismatch ${_.sn}:`,u,t,b,_);return}else if(b.cc!==_.cc){t.playlistParsingError=N2(`discontinuity sequence mismatch (${b.cc}!=${_.cc})`,u,t,b,_);return}}}}function N2(u,t,n,r,l){return new Error(`${u} ${l.url}
Playlist starting @${t.startSN}
${t.m3u8}

Playlist starting @${n.startSN}
${n.m3u8}`)}function MM(u,t,n=!0){const r=t.startSN+t.skippedSegments-u.startSN,l=u.fragments,d=r>=0;let f=0;if(d&&r<l.length)f=l[r].start;else if(d&&t.startSN===u.endSN+1)f=u.fragmentEnd;else if(d&&n)f=u.fragmentStart+r*t.levelTargetDuration;else if(!t.skippedSegments&&t.fragmentStart===0)f=u.fragmentStart;else return;TA(t,f)}function TA(u,t){if(t){const n=u.fragments;for(let r=u.skippedSegments;r<n.length;r++)n[r].addStart(t);u.fragmentHint&&u.fragmentHint.addStart(t)}}function NM(u,t=1/0){let n=1e3*u.targetduration;if(u.updated){const r=u.fragments;if(r.length&&n*4>t){const d=r[r.length-1].duration*1e3;d<n&&(n=d)}}else n/=2;return Math.round(n)}function OM(u,t,n){if(!u)return null;let r=u.fragments[t-u.startSN];return r||(r=u.fragmentHint,r&&r.sn===t)?r:t<u.startSN&&n&&n.sn===t?n:null}function O2(u,t,n){return u?FM(u.partList,t,n):null}function FM(u,t,n){if(u)for(let r=u.length;r--;){const l=u[r];if(l.index===n&&l.fragment.sn===t)return l}return null}function UM(u){u.forEach((t,n)=>{var r;(r=t.details)==null||r.fragments.forEach(l=>{l.level=n,l.initSegment&&(l.initSegment.level=n)})})}function py(u,t){for(let r=0,l=u.length;r<l;r++){var n;if(((n=u[r])==null?void 0:n.cc)===t)return u[r]}return null}function sq(u,t){return!!(u&&t.startCC<u.endCC&&t.endCC>u.startCC)}function F2(u,t){if(u){const n=u.start+t;u.start=u.startPTS=n,u.endPTS=n+u.duration}}function BM(u,t){const n=t.fragments;for(let r=0,l=n.length;r<l;r++)F2(n[r],u);t.fragmentHint&&F2(t.fragmentHint,u),t.alignedSliding=!0}function aq(u,t){u&&(zM(t,u),!t.alignedSliding&&u&&aE(t,u),!t.alignedSliding&&u&&!t.skippedSegments&&MM(u,t,!1))}function zM(u,t){if(!sq(t,u))return;const n=Math.min(t.endCC,u.endCC),r=py(t.fragments,n),l=py(u.fragments,n);if(!r||!l)return;Gr.log(`Aligning playlist at start of dicontinuity sequence ${n}`);const d=r.start-l.start;BM(d,u)}function aE(u,t){if(!u.hasProgramDateTime||!t.hasProgramDateTime)return;const n=u.fragments,r=t.fragments;if(!n.length||!r.length)return;let l,d;const f=Math.min(t.endCC,u.endCC);t.startCC<f&&u.startCC<f&&(l=py(r,f),d=py(n,f)),(!l||!d)&&(l=r[Math.floor(r.length/2)],d=py(n,l.cc)||n[Math.floor(n.length/2)]);const p=l.programDateTime,m=d.programDateTime;if(!p||!m)return;const y=(m-p)/1e3-(d.start-l.start);BM(y,u)}const oq={toString:function(u){let t="";const n=u.length;for(let r=0;r<n;r++)t+=`[${u.start(r).toFixed(3)}-${u.end(r).toFixed(3)}]`;return t}},Gn={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class pw extends IM{constructor(t,n,r,l,d){super(l,t.logger),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=Gn.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.loadingParts=!1,this.loopSn=void 0,this.onMediaSeeking=()=>{const{config:f,fragCurrent:p,media:m,mediaBuffer:y,state:b}=this,_=m?m.currentTime:0,A=wr.bufferInfo(y||m,_,f.maxBufferHole);if(this.log(`media seeking to ${xi(_)?_.toFixed(3):_}, state: ${b}`),this.state===Gn.ENDED)this.resetLoadingState();else if(p){const w=f.maxFragLookUpTolerance,T=p.start-w,k=p.start+p.duration+w;if(!A.len||k<A.start||T>A.end){const U=_>k;(_<T||U)&&(U&&p.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),p.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}if(m){this.fragmentTracker.removeFragmentsInRange(_,1/0,this.playlistType,!0);const w=this.lastCurrentTime;if(_>w&&(this.lastCurrentTime=_),!this.loadingParts){const T=Math.max(A.end,_),k=this.shouldLoadParts(this.getLevelDetails(),T);k&&(this.log(`LL-Part loading ON after seeking to ${_.toFixed(2)} with buffer @${T.toFixed(2)}`),this.loadingParts=k)}}!this.hls.hasEnoughToStart&&!A.len&&(this.log(`setting startPosition to ${_} because of seek before start`),this.nextLoadPosition=this.startPosition=_),this.tickImmediate()},this.onMediaEnded=()=>{this.log("setting startPosition to 0 because media ended"),this.startPosition=this.lastCurrentTime=0},this.playlistType=d,this.hls=t,this.fragmentLoader=new N6(t.config),this.keyLoader=r,this.fragmentTracker=n,this.config=t.config,this.decrypter=new cw(t.config)}registerListeners(){const{hls:t}=this;t.on(He.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(He.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(He.MANIFEST_LOADING,this.onManifestLoading,this),t.on(He.MANIFEST_LOADED,this.onManifestLoaded,this),t.on(He.ERROR,this.onError,this)}unregisterListeners(){const{hls:t}=this;t.off(He.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(He.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(He.MANIFEST_LOADING,this.onManifestLoading,this),t.off(He.MANIFEST_LOADED,this.onManifestLoaded,this),t.off(He.ERROR,this.onError,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(t){}stopLoad(){if(this.state===Gn.STOPPED)return;this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const t=this.fragCurrent;t!=null&&t.loader&&(t.abortRequests(),this.fragmentTracker.removeFragment(t)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=Gn.STOPPED}get startPositionValue(){const{nextLoadPosition:t,startPosition:n}=this;return n===-1&&t?t:n}get bufferingEnabled(){return this.buffering}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}get inFlightFrag(){return{frag:this.fragCurrent,state:this.state}}_streamEnded(t,n){if(n.live||!this.media)return!1;const r=t.end||0,l=this.config.timelineOffset||0;if(r<=l)return!1;const d=t.nextStart;if(d&&d>l&&d<n.edge||this.media.currentTime<t.start)return!1;const p=n.partList;if(p!=null&&p.length){const y=p[p.length-1];return wr.isBuffered(this.media,y.start+y.duration/2)}const m=n.fragments[n.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(m)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null){var t;return(t=this.levelLastLoaded)==null?void 0:t.details}}get timelineOffset(){const t=this.config.timelineOffset;if(t){var n;return((n=this.getLevelDetails())==null?void 0:n.appliedTimelineOffset)||t}return 0}onMediaAttached(t,n){const r=this.media=this.mediaBuffer=n.media;r.removeEventListener("seeking",this.onMediaSeeking),r.removeEventListener("ended",this.onMediaEnded),r.addEventListener("seeking",this.onMediaSeeking),r.addEventListener("ended",this.onMediaEnded);const l=this.config;this.levels&&l.autoStartLoad&&this.state===Gn.STOPPED&&this.startLoad(l.startPosition)}onMediaDetaching(t,n){const r=!!n.transferMedia,l=this.media;if(l!==null){if(l.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),l.removeEventListener("seeking",this.onMediaSeeking),l.removeEventListener("ended",this.onMediaEnded),this.keyLoader&&!r&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loopSn=void 0,r){this.resetLoadingState(),this.resetTransmuxer();return}this.loadingParts=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}}onManifestLoading(){this.initPTS=[],this.levels=this.levelLastLoaded=this.fragCurrent=null,this.lastCurrentTime=this.startPosition=0,this.startFragRequested=!1}onError(t,n){}onManifestLoaded(t,n){this.startTimeOffset=n.startTimeOffset}onHandlerDestroying(){this.stopLoad(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),super.onHandlerDestroying(),this.hls=this.onMediaSeeking=this.onMediaEnded=null}onHandlerDestroyed(){this.state=Gn.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(t,n,r){this.startFragRequested=!0,this._loadFragForPlayback(t,n,r)}_loadFragForPlayback(t,n,r){const l=d=>{const f=d.frag;if(this.fragContextChanged(f)){this.warn(`${f.type} sn: ${f.sn}${d.part?" part: "+d.part.index:""} of ${this.fragInfo(f,!1,d.part)}) was dropped during download.`),this.fragmentTracker.removeFragment(f);return}f.stats.chunkCount++,this._handleFragmentLoadProgress(d)};this._doFragLoad(t,n,r,l).then(d=>{if(!d)return;const f=this.state,p=d.frag;if(this.fragContextChanged(p)){(f===Gn.FRAG_LOADING||!this.fragCurrent&&f===Gn.PARSING)&&(this.fragmentTracker.removeFragment(p),this.state=Gn.IDLE);return}"payload"in d&&(this.log(`Loaded ${p.type} sn: ${p.sn} of ${this.playlistLabel()} ${p.level}`),this.hls.trigger(He.FRAG_LOADED,d)),this._handleFragmentLoadComplete(d)}).catch(d=>{this.state===Gn.STOPPED||this.state===Gn.ERROR||(this.warn(`Frag error: ${(d==null?void 0:d.message)||d}`),this.resetFragmentLoading(t))})}clearTrackerIfNeeded(t){var n;const{fragmentTracker:r}=this;if(r.getState(t)===Ca.APPENDING){const d=t.type,f=this.getFwdBufferInfo(this.mediaBuffer,d),p=Math.max(t.duration,f?f.len:this.config.maxBufferLength),m=this.backtrackFragment;((m?t.sn-m.sn:0)===1||this.reduceMaxBufferLength(p,t.duration))&&r.removeFragment(t)}else((n=this.mediaBuffer)==null?void 0:n.buffered.length)===0?r.removeAllFragments():r.hasParts(t.type)&&(r.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type}),r.getState(t)===Ca.PARTIAL&&r.removeFragment(t))}checkLiveUpdate(t){if(t.updated&&!t.live){const n=t.fragments[t.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:n,part:null,stats:n.stats,id:n.type})}t.fragments[0]||(t.deltaUpdateFailed=!0)}waitForLive(t){const n=t.details;return(n==null?void 0:n.live)&&n.type!=="EVENT"&&(this.levelLastLoaded!==t||n.expired)}flushMainBuffer(t,n,r=null){if(!(t-n))return;const l={startOffset:t,endOffset:n,type:r};this.hls.trigger(He.BUFFER_FLUSHING,l)}_loadInitSegment(t,n){this._doFragLoad(t,n).then(r=>{const l=r==null?void 0:r.frag;if(!l||this.fragContextChanged(l)||!this.levels)throw new Error("init load aborted");return r}).then(r=>{const{hls:l}=this,{frag:d,payload:f}=r,p=d.decryptdata;if(f&&f.byteLength>0&&p!=null&&p.key&&p.iv&&sg(p.method)){const m=self.performance.now();return this.decrypter.decrypt(new Uint8Array(f),p.key.buffer,p.iv.buffer,fw(p.method)).catch(y=>{throw l.trigger(He.ERROR,{type:Hi.MEDIA_ERROR,details:pn.FRAG_DECRYPT_ERROR,fatal:!1,error:y,reason:y.message,frag:d}),y}).then(y=>{const b=self.performance.now();return l.trigger(He.FRAG_DECRYPTED,{frag:d,payload:y,stats:{tstart:m,tdecrypt:b}}),r.payload=y,this.completeInitSegmentLoad(r)})}return this.completeInitSegmentLoad(r)}).catch(r=>{this.state===Gn.STOPPED||this.state===Gn.ERROR||(this.warn(r),this.resetFragmentLoading(t))})}completeInitSegmentLoad(t){const{levels:n}=this;if(!n)throw new Error("init load aborted, missing levels");const r=t.frag.stats;this.state!==Gn.STOPPED&&(this.state=Gn.IDLE),t.frag.data=new Uint8Array(t.payload),r.parsing.start=r.buffering.start=self.performance.now(),r.parsing.end=r.buffering.end=self.performance.now(),this.tick()}fragContextChanged(t){const{fragCurrent:n}=this;return!t||!n||t.sn!==n.sn||t.level!==n.level}fragBufferedComplete(t,n){const r=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${t.type} sn: ${t.sn}${n?" part: "+n.index:""} of ${this.fragInfo(t,!1,n)} > buffer:${r?oq.toString(wr.getBuffered(r)):"(detached)"})`),Ha(t)){var l;if(t.type!==Ui.SUBTITLE){const f=t.elementaryStreams;if(!Object.keys(f).some(p=>!!f[p])){this.state=Gn.IDLE;return}}const d=(l=this.levels)==null?void 0:l[t.level];d!=null&&d.fragmentError&&(this.log(`Resetting level fragment error count of ${d.fragmentError} on frag buffered`),d.fragmentError=0)}this.state=Gn.IDLE}_handleFragmentLoadComplete(t){const{transmuxer:n}=this;if(!n)return;const{frag:r,part:l,partsLoaded:d}=t,f=!d||d.length===0||d.some(m=>!m),p=new dw(r.level,r.sn,r.stats.chunkCount+1,0,l?l.index:-1,!f);n.flush(p)}_handleFragmentLoadProgress(t){}_doFragLoad(t,n,r=null,l){var d;this.fragCurrent=t;const f=n==null?void 0:n.details;if(!this.levels||!f)throw new Error(`frag load aborted, missing level${f?"":" detail"}s`);let p=null;t.encrypted&&!((d=t.decryptdata)!=null&&d.key)?(this.log(`Loading key for ${t.sn} of [${f.startSN}-${f.endSN}], ${this.playlistLabel()} ${t.level}`),this.state=Gn.KEY_LOADING,this.fragCurrent=t,p=this.keyLoader.load(t).then(_=>{if(!this.fragContextChanged(_.frag))return this.hls.trigger(He.KEY_LOADED,_),this.state===Gn.KEY_LOADING&&(this.state=Gn.IDLE),_}),this.hls.trigger(He.KEY_LOADING,{frag:t}),this.fragCurrent===null&&(p=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))):!t.encrypted&&f.encryptedFragments.length&&this.keyLoader.loadClear(t,f.encryptedFragments);const m=this.fragPrevious;if(Ha(t)&&(!m||t.sn!==m.sn)){const _=this.shouldLoadParts(n.details,t.end);_!==this.loadingParts&&(this.log(`LL-Part loading ${_?"ON":"OFF"} loading sn ${m==null?void 0:m.sn}->${t.sn}`),this.loadingParts=_)}if(r=Math.max(t.start,r||0),this.loadingParts&&Ha(t)){const _=f.partList;if(_&&l){r>t.end&&f.fragmentHint&&(t=f.fragmentHint);const A=this.getNextPart(_,t,r);if(A>-1){const w=_[A];t=this.fragCurrent=w.fragment,this.log(`Loading ${t.type} sn: ${t.sn} part: ${w.index} (${A}/${_.length-1}) of ${this.fragInfo(t,!1,w)}) cc: ${t.cc} [${f.startSN}-${f.endSN}], target: ${parseFloat(r.toFixed(3))}`),this.nextLoadPosition=w.start+w.duration,this.state=Gn.FRAG_LOADING;let T;return p?T=p.then(k=>!k||this.fragContextChanged(k.frag)?null:this.doFragPartsLoad(t,w,n,l)).catch(k=>this.handleFragLoadError(k)):T=this.doFragPartsLoad(t,w,n,l).catch(k=>this.handleFragLoadError(k)),this.hls.trigger(He.FRAG_LOADING,{frag:t,part:w,targetBufferTime:r}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):T}else if(!t.url||this.loadedEndOfParts(_,r))return Promise.resolve(null)}}if(Ha(t)&&this.loadingParts)this.log(`LL-Part loading OFF after next part miss @${r.toFixed(2)}`),this.loadingParts=!1;else if(!t.url)return Promise.resolve(null);this.log(`Loading ${t.type} sn: ${t.sn} of ${this.fragInfo(t,!1)}) cc: ${t.cc} ${f?"["+f.startSN+"-"+f.endSN+"]":""}, target: ${parseFloat(r.toFixed(3))}`),xi(t.sn)&&!this.bitrateTest&&(this.nextLoadPosition=t.start+t.duration),this.state=Gn.FRAG_LOADING;const y=this.config.progressive;let b;return y&&p?b=p.then(_=>!_||this.fragContextChanged(_==null?void 0:_.frag)?null:this.fragmentLoader.load(t,l)).catch(_=>this.handleFragLoadError(_)):b=Promise.all([this.fragmentLoader.load(t,y?l:void 0),p]).then(([_])=>(!y&&_&&l&&l(_),_)).catch(_=>this.handleFragLoadError(_)),this.hls.trigger(He.FRAG_LOADING,{frag:t,targetBufferTime:r}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):b}doFragPartsLoad(t,n,r,l){return new Promise((d,f)=>{var p;const m=[],y=(p=r.details)==null?void 0:p.partList,b=_=>{this.fragmentLoader.loadPart(t,_,l).then(A=>{m[_.index]=A;const w=A.part;this.hls.trigger(He.FRAG_LOADED,A);const T=O2(r.details,t.sn,_.index+1)||FM(y,t.sn,_.index+1);if(T)b(T);else return d({frag:t,part:w,partsLoaded:m})}).catch(f)};b(n)})}handleFragLoadError(t){if("data"in t){const n=t.data;t.data&&n.details===pn.INTERNAL_ABORTED?this.handleFragLoadAborted(n.frag,n.part):this.hls.trigger(He.ERROR,n)}else this.hls.trigger(He.ERROR,{type:Hi.OTHER_ERROR,details:pn.INTERNAL_EXCEPTION,err:t,error:t,fatal:!0});return null}_handleTransmuxerFlush(t){const n=this.getCurrentContext(t);if(!n||this.state!==Gn.PARSING){!this.fragCurrent&&this.state!==Gn.STOPPED&&this.state!==Gn.ERROR&&(this.state=Gn.IDLE);return}const{frag:r,part:l,level:d}=n,f=self.performance.now();r.stats.parsing.end=f,l&&(l.stats.parsing.end=f);const p=this.getLevelDetails(),y=p&&r.sn>p.endSN||this.shouldLoadParts(p,r.end);y!==this.loadingParts&&(this.log(`LL-Part loading ${y?"ON":"OFF"} after parsing segment ending @${r.end.toFixed(2)}`),this.loadingParts=y),this.updateLevelTiming(r,l,d,t.partial)}shouldLoadParts(t,n){if(this.config.lowLatencyMode){if(!t)return this.loadingParts;if(t!=null&&t.partList){var r;const d=t.partList[0],f=d.end+(((r=t.fragmentHint)==null?void 0:r.duration)||0);if(n>=f){var l;if((this.hls.hasEnoughToStart?((l=this.media)==null?void 0:l.currentTime)||this.lastCurrentTime:this.getLoadPosition())>d.start-d.fragment.duration)return!0}}}return!1}getCurrentContext(t){const{levels:n,fragCurrent:r}=this,{level:l,sn:d,part:f}=t;if(!(n!=null&&n[l]))return this.warn(`Levels object was unset while buffering fragment ${d} of ${this.playlistLabel()} ${l}. The current chunk will not be buffered.`),null;const p=n[l],m=p.details,y=f>-1?O2(m,d,f):null,b=y?y.fragment:OM(m,d,r);return b?(r&&r!==b&&(b.stats=r.stats),{frag:b,part:y,level:p}):null}bufferFragmentData(t,n,r,l,d){var f;if(!t||this.state!==Gn.PARSING)return;const{data1:p,data2:m}=t;let y=p;if(p&&m&&(y=_u(p,m)),!((f=y)!=null&&f.length))return;const b={type:t.type,frag:n,part:r,chunkMeta:l,parent:n.type,data:y};if(this.hls.trigger(He.BUFFER_APPENDING,b),t.dropped&&t.independent&&!r){if(d)return;this.flushBufferGap(n)}}flushBufferGap(t){const n=this.media;if(!n)return;if(!wr.isBuffered(n,n.currentTime)){this.flushMainBuffer(0,t.start);return}const r=n.currentTime,l=wr.bufferInfo(n,r,0),d=t.duration,f=Math.min(this.config.maxFragLookUpTolerance*2,d*.25),p=Math.max(Math.min(t.start-f,l.end-f),r+f);t.start-p>f&&this.flushMainBuffer(p,t.start)}getFwdBufferInfo(t,n){var r;const l=this.getLoadPosition();if(!xi(l))return null;const f=this.lastCurrentTime>l||(r=this.media)!=null&&r.paused?0:this.config.maxBufferHole;return this.getFwdBufferInfoAtPos(t,l,n,f)}getFwdBufferInfoAtPos(t,n,r,l){const d=wr.bufferInfo(t,n,l);if(d.len===0&&d.nextStart!==void 0){const f=this.fragmentTracker.getBufferedFrag(n,r);if(f&&(d.nextStart<=f.end||f.gap)){const p=Math.max(Math.min(d.nextStart,f.end)-n,l);return wr.bufferInfo(t,n,p)}}return d}getMaxBufferLength(t){const{config:n}=this;let r;return t?r=Math.max(8*n.maxBufferSize/t,n.maxBufferLength):r=n.maxBufferLength,Math.min(r,n.maxMaxBufferLength)}reduceMaxBufferLength(t,n){const r=this.config,l=Math.max(Math.min(t-n,r.maxBufferLength),n),d=Math.max(t-n*3,r.maxMaxBufferLength/2,l);return d>=l?(r.maxMaxBufferLength=d,this.warn(`Reduce max buffer length to ${d}s`),!0):!1}getAppendedFrag(t,n=Ui.MAIN){var r;const l=(r=this.fragmentTracker)==null?void 0:r.getAppendedFrag(t,n);return l&&"fragment"in l?l.fragment:l}getNextFragment(t,n){const r=n.fragments,l=r.length;if(!l)return null;const{config:d}=this,f=r[0].start,p=d.lowLatencyMode&&!!n.partList;let m=null;if(n.live){const _=d.initialLiveManifestSize;if(l<_)return this.warn(`Not enough fragments to start playback (have: ${l}, need: ${_})`),null;if(!n.PTSKnown&&!this.startFragRequested&&this.startPosition===-1||t<f){var y;p&&!this.loadingParts&&(this.log("LL-Part loading ON for initial live fragment"),this.loadingParts=!0),m=this.getInitialLiveFragment(n,r);const A=this.hls.startPosition,w=this.hls.liveSyncPosition,T=m?(A!==-1&&A>=f?A:w)||m.start:t;this.log(`Setting startPosition to ${T} to match start frag at live edge. mainStart: ${A} liveSyncPosition: ${w} frag.start: ${(y=m)==null?void 0:y.start}`),this.startPosition=this.nextLoadPosition=T}}else t<=f&&(m=r[0]);if(!m){const _=this.loadingParts?n.partEnd:n.fragmentEnd;m=this.getFragmentAtPosition(t,_,n)}let b=this.filterReplacedPrimary(m,n);if(!b&&m){const _=m.sn-n.startSN;b=this.filterReplacedPrimary(r[_+1]||null,n)}return this.mapToInitFragWhenRequired(b)}isLoopLoading(t,n){const r=this.fragmentTracker.getState(t);return(r===Ca.OK||r===Ca.PARTIAL&&!!t.gap)&&this.nextLoadPosition>n}getNextFragmentLoopLoading(t,n,r,l,d){let f=null;if(t.gap&&(f=this.getNextFragment(this.nextLoadPosition,n),f&&!f.gap&&r.nextStart)){const p=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,r.nextStart,l,0);if(p!==null&&r.len+p.len>=d){const m=f.sn;return this.loopSn!==m&&(this.log(`buffer full after gaps in "${l}" playlist starting at sn: ${m}`),this.loopSn=m),null}}return this.loopSn=void 0,f}get primaryPrefetch(){if(U2(this.hls.config)){var t,n;if((t=this.hls.interstitialsManager)==null||(n=t.playingItem)==null?void 0:n.event)return!0}return!1}filterReplacedPrimary(t,n){if(!t)return t;if(U2(this.hls.config)&&t.type!==Ui.SUBTITLE){const r=this.hls.interstitialsManager,l=r==null?void 0:r.bufferingItem;if(l){const f=l.event;if(f){if(f.appendInPlace||Math.abs(t.start-l.start)>1||l.start===0)return null}else if(t.end<=l.start&&(n==null?void 0:n.live)===!1||t.start>l.end&&l.nextEvent&&(l.nextEvent.appendInPlace||t.start-l.end>1))return null}const d=r==null?void 0:r.playerQueue;if(d)for(let f=d.length;f--;){const p=d[f].interstitial;if(p.appendInPlace&&t.start>=p.startTime&&t.end<=p.resumeTime)return null}}return t}mapToInitFragWhenRequired(t){return t!=null&&t.initSegment&&!(t!=null&&t.initSegment.data)&&!this.bitrateTest?t.initSegment:t}getNextPart(t,n,r){let l=-1,d=!1,f=!0;for(let p=0,m=t.length;p<m;p++){const y=t[p];if(f=f&&!y.independent,l>-1&&r<y.start)break;const b=y.loaded;b?l=-1:(d||y.independent||f)&&y.fragment===n&&(l=p),d=b}return l}loadedEndOfParts(t,n){const r=t[t.length-1];return r&&n>r.start&&r.loaded}getInitialLiveFragment(t,n){const r=this.fragPrevious;let l=null;if(r){if(t.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${r.programDateTime}`),l=_6(n,r.endProgramDateTime,this.config.maxFragLookUpTolerance)),!l){const d=r.sn+1;if(d>=t.startSN&&d<=t.endSN){const f=n[d-t.startSN];r.cc===f.cc&&(l=f,this.log(`Live playlist, switching playlist, load frag with next SN: ${l.sn}`))}l||(l=wM(n,r.cc),l&&this.log(`Live playlist, switching playlist, load frag with same CC: ${l.sn}`))}}else{const d=this.hls.liveSyncPosition;d!==null&&(l=this.getFragmentAtPosition(d,this.bitrateTest?t.fragmentEnd:t.edge,t))}return l}getFragmentAtPosition(t,n,r){const{config:l}=this;let{fragPrevious:d}=this,{fragments:f,endSN:p}=r;const{fragmentHint:m}=r,{maxFragLookUpTolerance:y}=l,b=r.partList,_=!!(this.loadingParts&&b!=null&&b.length&&m);_&&m&&!this.bitrateTest&&b[b.length-1].fragment.sn===m.sn&&(f=f.concat(m),p=m.sn);let A;if(t<n){var w;const k=t<this.lastCurrentTime||t>n-y||(w=this.media)!=null&&w.paused||!this.startFragRequested?0:y;A=Fh(d,f,t,k)}else A=f[f.length-1];if(A){const T=A.sn-r.startSN,k=this.fragmentTracker.getState(A);if((k===Ca.OK||k===Ca.PARTIAL&&A.gap)&&(d=A),d&&A.sn===d.sn&&(!_||b[0].fragment.sn>A.sn||!r.live&&!_)&&d&&A.level===d.level){const Y=f[T+1];A.sn<p&&this.fragmentTracker.getState(Y)!==Ca.OK?A=Y:A=null}}return A}alignPlaylists(t,n,r){const l=t.fragments.length;if(!l)return this.warn("No fragments in live playlist"),0;const d=t.fragmentStart,f=!n,p=t.alignedSliding&&xi(d);if(f||!p&&!d){aq(r,t);const m=t.fragmentStart;return this.log(`Live playlist sliding: ${m.toFixed(2)} start-sn: ${n?n.startSN:"na"}->${t.startSN} fragments: ${l}`),m}return d}waitForCdnTuneIn(t){return t.live&&t.canBlockReload&&t.partTarget&&t.tuneInGoal>Math.max(t.partHoldBack,t.partTarget*3)}setStartPosition(t,n){let r=this.startPosition;r<n&&(r=-1);const l=this.timelineOffset;if(r===-1){const d=this.startTimeOffset!==null,f=d?this.startTimeOffset:t.startTimeOffset;f!==null&&xi(f)?(r=n+f,f<0&&(r+=t.edge),r=Math.min(Math.max(n,r),n+t.totalduration),this.log(`Setting startPosition to ${r} for start time offset ${f} found in ${d?"multivariant":"media"} playlist`),this.startPosition=r):t.live?(r=this.hls.liveSyncPosition||n,this.log(`Setting startPosition to -1 to start at live edge ${r}`),this.startPosition=-1):(this.log("setting startPosition to 0 by default"),this.startPosition=r=0),this.lastCurrentTime=r+l}this.nextLoadPosition=r+l}getLoadPosition(){var t;const{media:n}=this;let r=0;return(t=this.hls)!=null&&t.hasEnoughToStart&&n?r=n.currentTime:this.nextLoadPosition>=0&&(r=this.nextLoadPosition),r}handleFragLoadAborted(t,n){this.transmuxer&&t.type===this.playlistType&&Ha(t)&&t.stats.aborted&&(this.warn(`Fragment ${t.sn}${n?" part "+n.index:""} of ${this.playlistLabel()} ${t.level} was aborted`),this.resetFragmentLoading(t))}resetFragmentLoading(t){(!this.fragCurrent||!this.fragContextChanged(t)&&this.state!==Gn.FRAG_LOADING_WAITING_RETRY)&&(this.state=Gn.IDLE)}onFragmentOrKeyLoadError(t,n){if(n.chunkMeta&&!n.frag){const T=this.getCurrentContext(n.chunkMeta);T&&(n.frag=T.frag)}const r=n.frag;if(!r||r.type!==t||!this.levels)return;if(this.fragContextChanged(r)){var l;this.warn(`Frag load error must match current frag to retry ${r.url} > ${(l=this.fragCurrent)==null?void 0:l.url}`);return}const d=n.details===pn.FRAG_GAP;d&&this.fragmentTracker.fragBuffered(r,!0);const f=n.errorAction,{action:p,flags:m,retryCount:y=0,retryConfig:b}=f||{},_=!!f&&!!b,A=_&&p===Co.RetryRequest,w=_&&!f.resolved&&m===Ku.MoveAllAlternatesMatchingHost;if(!A&&w&&Ha(r)&&!r.endList)this.resetFragmentErrors(t),this.treatAsGap(r),f.resolved=!0;else if((A||w)&&y<b.maxNumRetry){this.resetStartWhenNotLoaded(this.levelLastLoaded);const T=uw(b,y);this.warn(`Fragment ${r.sn} of ${t} ${r.level} errored with ${n.details}, retrying loading ${y+1}/${b.maxNumRetry} in ${T}ms`),f.resolved=!0,this.retryDate=self.performance.now()+T,this.state=Gn.FRAG_LOADING_WAITING_RETRY}else if(b&&f)if(this.resetFragmentErrors(t),y<b.maxNumRetry)!d&&p!==Co.RemoveAlternatePermanently&&(f.resolved=!0);else{this.warn(`${n.details} reached or exceeded max retry (${y})`);return}else p===Co.SendAlternateToPenaltyBox?this.state=Gn.WAITING_LEVEL:this.state=Gn.ERROR;this.tickImmediate()}reduceLengthAndFlushBuffer(t){if(this.state===Gn.PARSING||this.state===Gn.PARSED){const n=t.frag,r=t.parent,l=this.getFwdBufferInfo(this.mediaBuffer,r),d=l&&l.len>.5;d&&this.reduceMaxBufferLength(l.len,(n==null?void 0:n.duration)||10);const f=!d;return f&&this.warn(`Buffer full error while media.currentTime is not buffered, flush ${r} buffer`),n&&(this.fragmentTracker.removeFragment(n),this.nextLoadPosition=n.start),this.resetLoadingState(),f}return!1}resetFragmentErrors(t){t===Ui.AUDIO&&(this.fragCurrent=null),this.hls.hasEnoughToStart||(this.startFragRequested=!1),this.state!==Gn.STOPPED&&(this.state=Gn.IDLE)}afterBufferFlushed(t,n,r){if(!t)return;const l=wr.getBuffered(t);this.fragmentTracker.detectEvictedFragments(n,l,r),this.state===Gn.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state!==Gn.STOPPED&&(this.state=Gn.IDLE)}resetStartWhenNotLoaded(t){if(!this.hls.hasEnoughToStart){this.startFragRequested=!1;const n=t?t.details:null;n!=null&&n.live?(this.log("resetting startPosition for live start"),this.startPosition=-1,this.setStartPosition(n,n.fragmentStart),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(t){this.warn(`The loading context changed while buffering fragment ${t.sn} of ${this.playlistLabel()} ${t.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState()}removeUnbufferedFrags(t=0){this.fragmentTracker.removeFragmentsInRange(t,1/0,this.playlistType,!1,!0)}updateLevelTiming(t,n,r,l){const d=r.details;if(!d){this.warn("level.details undefined");return}if(!Object.keys(t.elementaryStreams).reduce((m,y)=>{const b=t.elementaryStreams[y];if(b){const _=b.endPTS-b.startPTS;if(_<=0)return this.warn(`Could not parse fragment ${t.sn} ${y} duration reliably (${_})`),m||!1;const A=l?0:PM(d,t,b.startPTS,b.endPTS,b.startDTS,b.endDTS);return this.hls.trigger(He.LEVEL_PTS_UPDATED,{details:d,level:r,drift:A,type:y,frag:t,start:b.startPTS,end:b.endPTS}),!0}return m},!1)){var p;if(r.fragmentError===0&&this.treatAsGap(t,r),((p=this.transmuxer)==null?void 0:p.error)===null){const m=new Error(`Found no media in fragment ${t.sn} of ${this.playlistLabel()} ${t.level} resetting transmuxer to fallback to playlist timing`);if(this.warn(m.message),this.hls.trigger(He.ERROR,{type:Hi.MEDIA_ERROR,details:pn.FRAG_PARSING_ERROR,fatal:!1,error:m,frag:t,reason:`Found no media in msn ${t.sn} of ${this.playlistLabel()} "${r.url}"`}),!this.hls)return;this.resetTransmuxer()}}this.state=Gn.PARSED,this.log(`Parsed ${t.type} sn: ${t.sn}${n?" part: "+n.index:""} of ${this.fragInfo(t,!1,n)})`),this.hls.trigger(He.FRAG_PARSED,{frag:t,part:n})}playlistLabel(){return this.playlistType===Ui.MAIN?"level":"track"}fragInfo(t,n=!0,r){var l,d;return`${this.playlistLabel()} ${t.level} (${r?"part":"frag"}:[${((l=n&&!r?t.startPTS:(r||t).start)!=null?l:NaN).toFixed(3)}-${((d=n&&!r?t.endPTS:(r||t).end)!=null?d:NaN).toFixed(3)}]${r&&t.type==="main"?"INDEPENDENT="+(r.independent?"YES":"NO"):""}`}treatAsGap(t,n){n&&n.fragmentError++,t.gap=!0,this.fragmentTracker.removeFragment(t),this.fragmentTracker.fragBuffered(t,!0)}resetTransmuxer(){var t;(t=this.transmuxer)==null||t.reset()}recoverWorkerError(t){t.event==="demuxerWorker"&&(this.fragmentTracker.removeAllFragments(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState())}set state(t){const n=this._state;n!==t&&(this._state=t,this.log(`${n}->${t}`))}get state(){return this._state}}function U2(u){return!!u.interstitialsController&&u.enableInterstitialPlayback!==!1}class jM{constructor(){this.chunks=[],this.dataLength=0}push(t){this.chunks.push(t),this.dataLength+=t.length}flush(){const{chunks:t,dataLength:n}=this;let r;if(t.length)t.length===1?r=t[0]:r=lq(t,n);else return new Uint8Array(0);return this.reset(),r}reset(){this.chunks.length=0,this.dataLength=0}}function lq(u,t){const n=new Uint8Array(t);let r=0;for(let l=0;l<u.length;l++){const d=u[l];n.set(d,r),r+=d.length}return n}var hx={exports:{}},B2;function uq(){return B2||(B2=1,function(u){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function l(m,y,b){this.fn=m,this.context=y,this.once=b||!1}function d(m,y,b,_,A){if(typeof b!="function")throw new TypeError("The listener must be a function");var w=new l(b,_||m,A),T=n?n+y:y;return m._events[T]?m._events[T].fn?m._events[T]=[m._events[T],w]:m._events[T].push(w):(m._events[T]=w,m._eventsCount++),m}function f(m,y){--m._eventsCount===0?m._events=new r:delete m._events[y]}function p(){this._events=new r,this._eventsCount=0}p.prototype.eventNames=function(){var y=[],b,_;if(this._eventsCount===0)return y;for(_ in b=this._events)t.call(b,_)&&y.push(n?_.slice(1):_);return Object.getOwnPropertySymbols?y.concat(Object.getOwnPropertySymbols(b)):y},p.prototype.listeners=function(y){var b=n?n+y:y,_=this._events[b];if(!_)return[];if(_.fn)return[_.fn];for(var A=0,w=_.length,T=new Array(w);A<w;A++)T[A]=_[A].fn;return T},p.prototype.listenerCount=function(y){var b=n?n+y:y,_=this._events[b];return _?_.fn?1:_.length:0},p.prototype.emit=function(y,b,_,A,w,T){var k=n?n+y:y;if(!this._events[k])return!1;var U=this._events[k],Y=arguments.length,se,te;if(U.fn){switch(U.once&&this.removeListener(y,U.fn,void 0,!0),Y){case 1:return U.fn.call(U.context),!0;case 2:return U.fn.call(U.context,b),!0;case 3:return U.fn.call(U.context,b,_),!0;case 4:return U.fn.call(U.context,b,_,A),!0;case 5:return U.fn.call(U.context,b,_,A,w),!0;case 6:return U.fn.call(U.context,b,_,A,w,T),!0}for(te=1,se=new Array(Y-1);te<Y;te++)se[te-1]=arguments[te];U.fn.apply(U.context,se)}else{var Re=U.length,Be;for(te=0;te<Re;te++)switch(U[te].once&&this.removeListener(y,U[te].fn,void 0,!0),Y){case 1:U[te].fn.call(U[te].context);break;case 2:U[te].fn.call(U[te].context,b);break;case 3:U[te].fn.call(U[te].context,b,_);break;case 4:U[te].fn.call(U[te].context,b,_,A);break;default:if(!se)for(Be=1,se=new Array(Y-1);Be<Y;Be++)se[Be-1]=arguments[Be];U[te].fn.apply(U[te].context,se)}}return!0},p.prototype.on=function(y,b,_){return d(this,y,b,_,!1)},p.prototype.once=function(y,b,_){return d(this,y,b,_,!0)},p.prototype.removeListener=function(y,b,_,A){var w=n?n+y:y;if(!this._events[w])return this;if(!b)return f(this,w),this;var T=this._events[w];if(T.fn)T.fn===b&&(!A||T.once)&&(!_||T.context===_)&&f(this,w);else{for(var k=0,U=[],Y=T.length;k<Y;k++)(T[k].fn!==b||A&&!T[k].once||_&&T[k].context!==_)&&U.push(T[k]);U.length?this._events[w]=U.length===1?U[0]:U:f(this,w)}return this},p.prototype.removeAllListeners=function(y){var b;return y?(b=n?n+y:y,this._events[b]&&f(this,b)):(this._events=new r,this._eventsCount=0),this},p.prototype.off=p.prototype.removeListener,p.prototype.addListener=p.prototype.on,p.prefixed=n,p.EventEmitter=p,u.exports=p}(hx)),hx.exports}var cq=uq(),gw=U5(cq);const ky="1.6.2",vg={};function dq(){return typeof __HLS_WORKER_BUNDLE__=="function"}function fq(){const u=vg[ky];if(u)return u.clientCount++,u;const t=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),n=self.URL.createObjectURL(t),l={worker:new self.Worker(n),objectURL:n,clientCount:1};return vg[ky]=l,l}function hq(u){const t=vg[u];if(t)return t.clientCount++,t;const n=new self.URL(u,self.location.href).href,l={worker:new self.Worker(n),scriptURL:n,clientCount:1};return vg[u]=l,l}function pq(u){const t=vg[u||ky];if(t&&t.clientCount--===1){const{worker:r,objectURL:l}=t;delete vg[u||ky],l&&self.URL.revokeObjectURL(l),r.terminate()}}function qM(u,t){return t+10<=u.length&&u[t]===51&&u[t+1]===68&&u[t+2]===73&&u[t+3]<255&&u[t+4]<255&&u[t+6]<128&&u[t+7]<128&&u[t+8]<128&&u[t+9]<128}function mw(u,t){return t+10<=u.length&&u[t]===73&&u[t+1]===68&&u[t+2]===51&&u[t+3]<255&&u[t+4]<255&&u[t+6]<128&&u[t+7]<128&&u[t+8]<128&&u[t+9]<128}function RE(u,t){let n=0;return n=(u[t]&127)<<21,n|=(u[t+1]&127)<<14,n|=(u[t+2]&127)<<7,n|=u[t+3]&127,n}function Dy(u,t){const n=t;let r=0;for(;mw(u,t);){r+=10;const l=RE(u,t+6);r+=l,qM(u,t+10)&&(r+=10),t+=r}if(r>0)return u.subarray(n,n+r)}function gq(u,t,n,r){const l=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],d=t[n+2],f=d>>2&15;if(f>12){const w=new Error(`invalid ADTS sampling index:${f}`);u.emit(He.ERROR,He.ERROR,{type:Hi.MEDIA_ERROR,details:pn.FRAG_PARSING_ERROR,fatal:!0,error:w,reason:w.message});return}const p=(d>>6&3)+1,m=t[n+3]>>6&3|(d&1)<<2,y="mp4a.40."+p,b=l[f];let _=f;(p===5||p===29)&&(_-=3);const A=[p<<3|(_&14)>>1,(_&1)<<7|m<<3];return Gr.log(`manifest codec:${r}, parsed codec:${y}, channels:${m}, rate:${b} (ADTS object type:${p} sampling index:${f})`),{config:A,samplerate:b,channelCount:m,codec:y,parsedCodec:y,manifestCodec:r}}function HM(u,t){return u[t]===255&&(u[t+1]&246)===240}function GM(u,t){return u[t+1]&1?7:9}function yw(u,t){return(u[t+3]&3)<<11|u[t+4]<<3|(u[t+5]&224)>>>5}function mq(u,t){return t+5<u.length}function oE(u,t){return t+1<u.length&&HM(u,t)}function yq(u,t){return mq(u,t)&&HM(u,t)&&yw(u,t)<=u.length-t}function vq(u,t){if(oE(u,t)){const n=GM(u,t);if(t+n>=u.length)return!1;const r=yw(u,t);if(r<=n)return!1;const l=t+r;return l===u.length||oE(u,l)}return!1}function VM(u,t,n,r,l){if(!u.samplerate){const d=gq(t,n,r,l);if(!d)return;hs(u,d)}}function $M(u){return 1024*9e4/u}function Tq(u,t){const n=GM(u,t);if(t+n<=u.length){const r=yw(u,t)-n;if(r>0)return{headerLength:n,frameLength:r}}}function KM(u,t,n,r,l){const d=$M(u.samplerate),f=r+l*d,p=Tq(t,n);let m;if(p){const{frameLength:_,headerLength:A}=p,w=A+_,T=Math.max(0,n+w-t.length);T?(m=new Uint8Array(w-A),m.set(t.subarray(n+A,t.length),0)):m=t.subarray(n+A,n+w);const k={unit:m,pts:f};return T||u.samples.push(k),{sample:k,length:w,missing:T}}const y=t.length-n;return m=new Uint8Array(y),m.set(t.subarray(n,t.length),0),{sample:{unit:m,pts:f},length:y,missing:-1}}function Eq(u,t){return mw(u,t)&&RE(u,t+6)+10<=u.length-t}function bq(u){if(u.size<2)return;const t=Zl(u.data,!0),n=new Uint8Array(u.data.subarray(t.length+1));return{key:u.type,info:t,data:n.buffer}}function _q(u){if(u.size<2)return;if(u.type==="TXXX"){let n=1;const r=Zl(u.data.subarray(n),!0);n+=r.length+1;const l=Zl(u.data.subarray(n));return{key:u.type,info:r,data:l}}const t=Zl(u.data.subarray(1));return{key:u.type,info:"",data:t}}function Sq(u){if(u.type==="WXXX"){if(u.size<2)return;let n=1;const r=Zl(u.data.subarray(n),!0);n+=r.length+1;const l=Zl(u.data.subarray(n));return{key:u.type,info:r,data:l}}const t=Zl(u.data);return{key:u.type,info:"",data:t}}function xq(u){return btoa(String.fromCharCode(...u))}function YM(u,t){if(u<0)return-YM(-u,t);const n=Math.pow(10,t);if(Math.abs(u*n%1-.5)<Number.EPSILON){const l=Math.floor(u*n);return(l%2===0?l:l+1)/n}else return Math.round(u*n)/n}function Aq(u,t){const n=new URL(u),r=new URL(t);if(n.origin!==r.origin)return u;const l=n.pathname.split("/").slice(1),d=r.pathname.split("/").slice(1,-1);for(;l[0]===d[0];)l.shift(),d.shift();for(;d.length;)d.shift(),l.unshift("..");return l.join("/")}function wq(){try{return crypto.randomUUID()}catch{try{const t=URL.createObjectURL(new Blob),n=t.toString();return URL.revokeObjectURL(t),n.slice(n.lastIndexOf("/")+1)}catch{let n=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,l=>{const d=(n+Math.random()*16)%16|0;return n=Math.floor(n/16),(l=="x"?d:d&3|8).toString(16)})}}}function Iq(u){return u instanceof ArrayBuffer?u:u.byteOffset==0&&u.byteLength==u.buffer.byteLength?u.buffer:new Uint8Array(u).buffer}function px(u,t=0,n=1/0){return Cq(u,t,n,Uint8Array)}function Cq(u,t,n,r){const l=kq(u);let d=1;"BYTES_PER_ELEMENT"in r&&(d=r.BYTES_PER_ELEMENT);const f=Dq(u)?u.byteOffset:0,p=(f+u.byteLength)/d,m=(f+t)/d,y=Math.floor(Math.max(0,Math.min(m,p))),b=Math.floor(Math.min(y+Math.max(n,0),p));return new r(l,y,b-y)}function kq(u){return u instanceof ArrayBuffer?u:u.buffer}function Dq(u){return u&&u.buffer instanceof ArrayBuffer&&u.byteLength!==void 0&&u.byteOffset!==void 0}function Rq(u){const t={key:u.type,description:"",data:"",mimeType:null,pictureType:null},n=3;if(u.size<2)return;if(u.data[0]!==n){console.log("Ignore frame with unrecognized character encoding");return}const r=u.data.subarray(1).indexOf(0);if(r===-1)return;const l=Zl(px(u.data,1,r)),d=u.data[2+r],f=u.data.subarray(3+r).indexOf(0);if(f===-1)return;const p=Zl(px(u.data,3+r,f));let m;return l==="-->"?m=Zl(px(u.data,4+r+f)):m=Iq(u.data.subarray(4+r+f)),t.mimeType=l,t.pictureType=d,t.description=p,t.data=m,t}function Lq(u){return u.type==="PRIV"?bq(u):u.type[0]==="W"?Sq(u):u.type==="APIC"?Rq(u):_q(u)}function Pq(u){const t=String.fromCharCode(u[0],u[1],u[2],u[3]),n=RE(u,4),r=10;return{type:t,size:n,data:u.subarray(r,r+n)}}const TT=10,Mq=10;function WM(u){let t=0;const n=[];for(;mw(u,t);){const r=RE(u,t+6);u[t+5]>>6&1&&(t+=TT),t+=TT;const l=t+r;for(;t+Mq<l;){const d=Pq(u.subarray(t)),f=Lq(d);f&&n.push(f),t+=d.size+TT}qM(u,t)&&(t+=TT)}return n}function XM(u){return u&&u.key==="PRIV"&&u.info==="com.apple.streaming.transportStreamTimestamp"}function Nq(u){if(u.data.byteLength===8){const t=new Uint8Array(u.data),n=t[3]&1;let r=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return r/=45,n&&(r+=4772185884e-2),Math.round(r)}}function vw(u){const t=WM(u);for(let n=0;n<t.length;n++){const r=t[n];if(XM(r))return Nq(r)}}let Jl=function(u){return u.audioId3="org.id3",u.dateRange="com.apple.quicktime.HLS",u.emsg="https://aomedia.org/emsg/ID3",u.misbklv="urn:misb:KLV:bin:1910.1",u}({});function Lc(u="",t=9e4){return{type:u,id:-1,pid:-1,inputTimeScale:t,sequenceNumber:-1,samples:[],dropped:0}}class Tw{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(t,n,r,l){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(t){this.initPTS=t,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(t,n){return!1}appendFrame(t,n,r){}demux(t,n){this.cachedData&&(t=_u(this.cachedData,t),this.cachedData=null);let r=Dy(t,0),l=r?r.length:0,d;const f=this._audioTrack,p=this._id3Track,m=r?vw(r):void 0,y=t.length;for((this.basePTS===null||this.frameIndex===0&&xi(m))&&(this.basePTS=Oq(m,n,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),r&&r.length>0&&p.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:r,type:Jl.audioId3,duration:Number.POSITIVE_INFINITY});l<y;){if(this.canParse(t,l)){const b=this.appendFrame(f,t,l);b?(this.frameIndex++,this.lastPTS=b.sample.pts,l+=b.length,d=l):l=y}else Eq(t,l)?(r=Dy(t,l),p.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:r,type:Jl.audioId3,duration:Number.POSITIVE_INFINITY}),l+=r.length,d=l):l++;if(l===y&&d!==y){const b=t.slice(d);this.cachedData?this.cachedData=_u(this.cachedData,b):this.cachedData=b}}return{audioTrack:f,videoTrack:Lc(),id3Track:p,textTrack:Lc()}}demuxSampleAes(t,n,r){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(t){const n=this.cachedData;return n&&(this.cachedData=null,this.demux(n,0)),{audioTrack:this._audioTrack,videoTrack:Lc(),id3Track:this._id3Track,textTrack:Lc()}}destroy(){this.cachedData=null,this._audioTrack=this._id3Track=void 0}}const Oq=(u,t,n)=>{if(xi(u))return u*90;const r=n?n.baseTime*9e4/n.timescale:0;return t*9e4+r};let ET=null;const Fq=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],Uq=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],Bq=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],zq=[0,1,1,4];function QM(u,t,n,r,l){if(n+24>t.length)return;const d=JM(t,n);if(d&&n+d.frameLength<=t.length){const f=d.samplesPerFrame*9e4/d.sampleRate,p=r+l*f,m={unit:t.subarray(n,n+d.frameLength),pts:p,dts:p};return u.config=[],u.channelCount=d.channelCount,u.samplerate=d.sampleRate,u.samples.push(m),{sample:m,length:d.frameLength,missing:0}}}function JM(u,t){const n=u[t+1]>>3&3,r=u[t+1]>>1&3,l=u[t+2]>>4&15,d=u[t+2]>>2&3;if(n!==1&&l!==0&&l!==15&&d!==3){const f=u[t+2]>>1&1,p=u[t+3]>>6,m=n===3?3-r:r===3?3:4,y=Fq[m*14+l-1]*1e3,_=Uq[(n===3?0:n===2?1:2)*3+d],A=p===3?1:2,w=Bq[n][r],T=zq[r],k=w*8*T,U=Math.floor(w*y/_+f)*T;if(ET===null){const te=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);ET=te?parseInt(te[1]):0}return!!ET&&ET<=87&&r===2&&y>=224e3&&p===0&&(u[t+3]=u[t+3]|128),{sampleRate:_,channelCount:A,frameLength:U,samplesPerFrame:k}}}function Ew(u,t){return u[t]===255&&(u[t+1]&224)===224&&(u[t+1]&6)!==0}function ZM(u,t){return t+1<u.length&&Ew(u,t)}function jq(u,t){return Ew(u,t)&&4<=u.length-t}function eN(u,t){if(t+1<u.length&&Ew(u,t)){const r=JM(u,t);let l=4;r!=null&&r.frameLength&&(l=r.frameLength);const d=t+l;return d===u.length||ZM(u,d)}return!1}class qq extends Tw{constructor(t,n){super(),this.observer=void 0,this.config=void 0,this.observer=t,this.config=n}resetInitSegment(t,n,r,l){super.resetInitSegment(t,n,r,l),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:n,duration:l,inputTimeScale:9e4,dropped:0}}static probe(t,n){if(!t)return!1;const r=Dy(t,0);let l=(r==null?void 0:r.length)||0;if(eN(t,l))return!1;for(let d=t.length;l<d;l++)if(vq(t,l))return n.log("ADTS sync word found !"),!0;return!1}canParse(t,n){return yq(t,n)}appendFrame(t,n,r){VM(t,this.observer,n,r,t.manifestCodec);const l=KM(t,n,r,this.basePTS,this.frameIndex);if(l&&l.missing===0)return l}}const tN=(u,t)=>{let n=0,r=5;t+=r;const l=new Uint32Array(1),d=new Uint32Array(1),f=new Uint8Array(1);for(;r>0;){f[0]=u[t];const p=Math.min(r,8),m=8-p;d[0]=4278190080>>>24+m<<m,l[0]=(f[0]&d[0])>>m,n=n?n<<p|l[0]:l[0],t+=1,r-=p}return n};class Hq extends Tw{constructor(t){super(),this.observer=void 0,this.observer=t}resetInitSegment(t,n,r,l){super.resetInitSegment(t,n,r,l),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:n,duration:l,inputTimeScale:9e4,dropped:0}}canParse(t,n){return n+64<t.length}appendFrame(t,n,r){const l=nN(t,n,r,this.basePTS,this.frameIndex);if(l!==-1)return{sample:t.samples[t.samples.length-1],length:l,missing:0}}static probe(t){if(!t)return!1;const n=Dy(t,0);if(!n)return!1;const r=n.length;return t[r]===11&&t[r+1]===119&&vw(n)!==void 0&&tN(t,r)<16}}function nN(u,t,n,r,l){if(n+8>t.length||t[n]!==11||t[n+1]!==119)return-1;const d=t[n+4]>>6;if(d>=3)return-1;const p=[48e3,44100,32e3][d],m=t[n+4]&63,b=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][m*3+d]*2;if(n+b>t.length)return-1;const _=t[n+6]>>5;let A=0;_===2?A+=2:(_&1&&_!==1&&(A+=2),_&4&&(A+=2));const w=(t[n+6]<<8|t[n+7])>>12-A&1,k=[2,1,2,3,3,4,4,5][_]+w,U=t[n+5]>>3,Y=t[n+5]&7,se=new Uint8Array([d<<6|U<<1|Y>>2,(Y&3)<<6|_<<3|w<<2|m>>4,m<<4&224]),te=1536/p*9e4,Re=r+l*te,Be=t.subarray(n,n+b);return u.config=se,u.channelCount=k,u.samplerate=p,u.samples.push({unit:Be,pts:Re}),b}class Gq extends Tw{resetInitSegment(t,n,r,l){super.resetInitSegment(t,n,r,l),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:n,duration:l,inputTimeScale:9e4,dropped:0}}static probe(t){if(!t)return!1;const n=Dy(t,0);let r=(n==null?void 0:n.length)||0;if(n&&t[r]===11&&t[r+1]===119&&vw(n)!==void 0&&tN(t,r)<=16)return!1;for(let l=t.length;r<l;r++)if(eN(t,r))return Gr.log("MPEG Audio sync word found !"),!0;return!1}canParse(t,n){return jq(t,n)}appendFrame(t,n,r){if(this.basePTS!==null)return QM(t,n,r,this.basePTS,this.frameIndex)}}const Vq=/\/emsg[-/]ID3/i;class $q{constructor(t,n){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=n}resetTimeStamp(){}resetInitSegment(t,n,r,l){const d=this.videoTrack=Lc("video",1),f=this.audioTrack=Lc("audio",1),p=this.txtTrack=Lc("text",1);if(this.id3Track=Lc("id3",1),this.timeOffset=0,!(t!=null&&t.byteLength))return;const m=gM(t);if(m.video){const{id:y,timescale:b,codec:_,supplemental:A}=m.video;d.id=y,d.timescale=p.timescale=b,d.codec=_,d.supplemental=A}if(m.audio){const{id:y,timescale:b,codec:_}=m.audio;f.id=y,f.timescale=b,f.codec=_}p.id=fM.text,d.sampleDuration=0,d.duration=f.duration=l}resetContiguity(){this.remainderData=null}static probe(t){return H5(t)}demux(t,n){this.timeOffset=n;let r=t;const l=this.videoTrack,d=this.txtTrack;if(this.config.progressive){this.remainderData&&(r=_u(this.remainderData,t));const p=Q5(r);this.remainderData=p.remainder,l.samples=p.valid||new Uint8Array}else l.samples=r;const f=this.extractID3Track(l,n);return d.samples=a2(n,l),{videoTrack:l,audioTrack:this.audioTrack,id3Track:f,textTrack:this.txtTrack}}flush(){const t=this.timeOffset,n=this.videoTrack,r=this.txtTrack;n.samples=this.remainderData||new Uint8Array,this.remainderData=null;const l=this.extractID3Track(n,this.timeOffset);return r.samples=a2(t,n),{videoTrack:n,audioTrack:Lc(),id3Track:l,textTrack:Lc()}}extractID3Track(t,n){const r=this.id3Track;if(t.samples.length){const l=vr(t.samples,["emsg"]);l&&l.forEach(d=>{const f=Z5(d);if(Vq.test(f.schemeIdUri)){const p=z2(f,n);let m=f.eventDuration===4294967295?Number.POSITIVE_INFINITY:f.eventDuration/f.timeScale;m<=.001&&(m=Number.POSITIVE_INFINITY);const y=f.payload;r.samples.push({data:y,len:y.byteLength,dts:p,pts:p,type:Jl.emsg,duration:m})}else if(this.config.enableEmsgKLVMetadata&&f.schemeIdUri.startsWith("urn:misb:KLV:bin:1910.1")){const p=z2(f,n);r.samples.push({data:f.payload,len:f.payload.byteLength,dts:p,pts:p,type:Jl.misbklv,duration:Number.POSITIVE_INFINITY})}})}return r}demuxSampleAes(t,n,r){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){this.config=null,this.remainderData=null,this.videoTrack=this.audioTrack=this.id3Track=this.txtTrack=void 0}}function z2(u,t){return xi(u.presentationTime)?u.presentationTime/u.timeScale:t+u.presentationTimeDelta/u.timeScale}class Kq{constructor(t,n,r){this.keyData=void 0,this.decrypter=void 0,this.keyData=r,this.decrypter=new cw(n,{removePKCS7Padding:!1})}decryptBuffer(t){return this.decrypter.decrypt(t,this.keyData.key.buffer,this.keyData.iv.buffer,Df.cbc)}decryptAacSample(t,n,r){const l=t[n].unit;if(l.length<=16)return;const d=l.subarray(16,l.length-l.length%16),f=d.buffer.slice(d.byteOffset,d.byteOffset+d.length);this.decryptBuffer(f).then(p=>{const m=new Uint8Array(p);l.set(m,16),this.decrypter.isSync()||this.decryptAacSamples(t,n+1,r)})}decryptAacSamples(t,n,r){for(;;n++){if(n>=t.length){r();return}if(!(t[n].unit.length<32)&&(this.decryptAacSample(t,n,r),!this.decrypter.isSync()))return}}getAvcEncryptedData(t){const n=Math.floor((t.length-48)/160)*16+16,r=new Int8Array(n);let l=0;for(let d=32;d<t.length-16;d+=160,l+=16)r.set(t.subarray(d,d+16),l);return r}getAvcDecryptedUnit(t,n){const r=new Uint8Array(n);let l=0;for(let d=32;d<t.length-16;d+=160,l+=16)t.set(r.subarray(l,l+16),d);return t}decryptAvcSample(t,n,r,l,d){const f=yM(d.data),p=this.getAvcEncryptedData(f);this.decryptBuffer(p.buffer).then(m=>{d.data=this.getAvcDecryptedUnit(f,m),this.decrypter.isSync()||this.decryptAvcSamples(t,n,r+1,l)})}decryptAvcSamples(t,n,r,l){if(t instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;n++,r=0){if(n>=t.length){l();return}const d=t[n].units;for(;!(r>=d.length);r++){const f=d[r];if(!(f.data.length<=48||f.type!==1&&f.type!==5)&&(this.decryptAvcSample(t,n,r,l,f),!this.decrypter.isSync()))return}}}}class iN{constructor(){this.VideoSample=null}createVideoSample(t,n,r){return{key:t,frame:!1,pts:n,dts:r,units:[],length:0}}getLastNalUnit(t){var n;let r=this.VideoSample,l;if((!r||r.units.length===0)&&(r=t[t.length-1]),(n=r)!=null&&n.units){const d=r.units;l=d[d.length-1]}return l}pushAccessUnit(t,n){if(t.units.length&&t.frame){if(t.pts===void 0){const r=n.samples,l=r.length;if(l){const d=r[l-1];t.pts=d.pts,t.dts=d.dts}else{n.dropped++;return}}n.samples.push(t)}}parseNALu(t,n,r){const l=n.byteLength;let d=t.naluState||0;const f=d,p=[];let m=0,y,b,_,A=-1,w=0;for(d===-1&&(A=0,w=this.getNALuType(n,0),d=0,m=1);m<l;){if(y=n[m++],!d){d=y?0:1;continue}if(d===1){d=y?0:2;continue}if(!y)d=3;else if(y===1){if(b=m-d-1,A>=0){const T={data:n.subarray(A,b),type:w};p.push(T)}else{const T=this.getLastNalUnit(t.samples);T&&(f&&m<=4-f&&T.state&&(T.data=T.data.subarray(0,T.data.byteLength-f)),b>0&&(T.data=_u(T.data,n.subarray(0,b)),T.state=0))}m<l?(_=this.getNALuType(n,m),A=m,w=_,d=0):d=-1}else d=0}if(A>=0&&d>=0){const T={data:n.subarray(A,l),type:w,state:d};p.push(T)}if(p.length===0){const T=this.getLastNalUnit(t.samples);T&&(T.data=_u(T.data,n))}return t.naluState=d,p}}class gy{constructor(t){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=t,this.bytesAvailable=t.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const t=this.data,n=this.bytesAvailable,r=t.byteLength-n,l=new Uint8Array(4),d=Math.min(4,n);if(d===0)throw new Error("no bytes available");l.set(t.subarray(r,r+d)),this.word=new DataView(l.buffer).getUint32(0),this.bitsAvailable=d*8,this.bytesAvailable-=d}skipBits(t){let n;t=Math.min(t,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>t?(this.word<<=t,this.bitsAvailable-=t):(t-=this.bitsAvailable,n=t>>3,t-=n<<3,this.bytesAvailable-=n,this.loadWord(),this.word<<=t,this.bitsAvailable-=t)}readBits(t){let n=Math.min(this.bitsAvailable,t);const r=this.word>>>32-n;if(t>32&&Gr.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=n,this.bitsAvailable>0)this.word<<=n;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return n=t-n,n>0&&this.bitsAvailable?r<<n|this.readBits(n):r}skipLZ(){let t;for(t=0;t<this.bitsAvailable;++t)if((this.word&2147483648>>>t)!==0)return this.word<<=t,this.bitsAvailable-=t,t;return this.loadWord(),t+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const t=this.skipLZ();return this.readBits(t+1)-1}readEG(){const t=this.readUEG();return 1&t?1+t>>>1:-1*(t>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}}class j2 extends iN{parsePES(t,n,r,l){const d=this.parseNALu(t,r.data,l);let f=this.VideoSample,p,m=!1;r.data=null,f&&d.length&&!t.audFound&&(this.pushAccessUnit(f,t),f=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts)),d.forEach(y=>{var b,_;switch(y.type){case 1:{let k=!1;p=!0;const U=y.data;if(m&&U.length>4){const Y=this.readSliceType(U);(Y===2||Y===4||Y===7||Y===9)&&(k=!0)}if(k){var A;(A=f)!=null&&A.frame&&!f.key&&(this.pushAccessUnit(f,t),f=this.VideoSample=null)}f||(f=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),f.frame=!0,f.key=k;break}case 5:p=!0,(b=f)!=null&&b.frame&&!f.key&&(this.pushAccessUnit(f,t),f=this.VideoSample=null),f||(f=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),f.key=!0,f.frame=!0;break;case 6:{p=!0,ow(y.data,1,r.pts,n.samples);break}case 7:{var w,T;p=!0,m=!0;const k=y.data,U=this.readSPS(k);if(!t.sps||t.width!==U.width||t.height!==U.height||((w=t.pixelRatio)==null?void 0:w[0])!==U.pixelRatio[0]||((T=t.pixelRatio)==null?void 0:T[1])!==U.pixelRatio[1]){t.width=U.width,t.height=U.height,t.pixelRatio=U.pixelRatio,t.sps=[k];const Y=k.subarray(1,4);let se="avc1.";for(let te=0;te<3;te++){let Re=Y[te].toString(16);Re.length<2&&(Re="0"+Re),se+=Re}t.codec=se}break}case 8:p=!0,t.pps=[y.data];break;case 9:p=!0,t.audFound=!0,(_=f)!=null&&_.frame&&(this.pushAccessUnit(f,t),f=null),f||(f=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts));break;case 12:p=!0;break;default:p=!1;break}f&&p&&f.units.push(y)}),l&&f&&(this.pushAccessUnit(f,t),this.VideoSample=null)}getNALuType(t,n){return t[n]&31}readSliceType(t){const n=new gy(t);return n.readUByte(),n.readUEG(),n.readUEG()}skipScalingList(t,n){let r=8,l=8,d;for(let f=0;f<t;f++)l!==0&&(d=n.readEG(),l=(r+d+256)%256),r=l===0?r:l}readSPS(t){const n=new gy(t);let r=0,l=0,d=0,f=0,p,m,y;const b=n.readUByte.bind(n),_=n.readBits.bind(n),A=n.readUEG.bind(n),w=n.readBoolean.bind(n),T=n.skipBits.bind(n),k=n.skipEG.bind(n),U=n.skipUEG.bind(n),Y=this.skipScalingList.bind(this);b();const se=b();if(_(5),T(3),b(),U(),se===100||se===110||se===122||se===244||se===44||se===83||se===86||se===118||se===128){const Z=A();if(Z===3&&T(1),U(),U(),T(1),w())for(m=Z!==3?8:12,y=0;y<m;y++)w()&&(y<6?Y(16,n):Y(64,n))}U();const te=A();if(te===0)A();else if(te===1)for(T(1),k(),k(),p=A(),y=0;y<p;y++)k();U(),T(1);const Re=A(),Be=A(),j=_(1);j===0&&T(1),T(1),w()&&(r=A(),l=A(),d=A(),f=A());let M=[1,1];if(w()&&w())switch(b()){case 1:M=[1,1];break;case 2:M=[12,11];break;case 3:M=[10,11];break;case 4:M=[16,11];break;case 5:M=[40,33];break;case 6:M=[24,11];break;case 7:M=[20,11];break;case 8:M=[32,11];break;case 9:M=[80,33];break;case 10:M=[18,11];break;case 11:M=[15,11];break;case 12:M=[64,33];break;case 13:M=[160,99];break;case 14:M=[4,3];break;case 15:M=[3,2];break;case 16:M=[2,1];break;case 255:{M=[b()<<8|b(),b()<<8|b()];break}}return{width:Math.ceil((Re+1)*16-r*2-l*2),height:(2-j)*(Be+1)*16-(j?2:4)*(d+f),pixelRatio:M}}}class q2 extends iN{constructor(...t){super(...t),this.initVPS=null}parsePES(t,n,r,l){const d=this.parseNALu(t,r.data,l);let f=this.VideoSample,p,m=!1;r.data=null,f&&d.length&&!t.audFound&&(this.pushAccessUnit(f,t),f=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts)),d.forEach(y=>{var b,_;switch(y.type){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:f||(f=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts)),f.frame=!0,p=!0;break;case 16:case 17:case 18:case 21:if(p=!0,m){var A;(A=f)!=null&&A.frame&&!f.key&&(this.pushAccessUnit(f,t),f=this.VideoSample=null)}f||(f=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),f.key=!0,f.frame=!0;break;case 19:case 20:p=!0,(b=f)!=null&&b.frame&&!f.key&&(this.pushAccessUnit(f,t),f=this.VideoSample=null),f||(f=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),f.key=!0,f.frame=!0;break;case 39:p=!0,ow(y.data,2,r.pts,n.samples);break;case 32:p=!0,t.vps||(typeof t.params!="object"&&(t.params={}),t.params=hs(t.params,this.readVPS(y.data)),this.initVPS=y.data),t.vps=[y.data];break;case 33:if(p=!0,m=!0,t.vps!==void 0&&t.vps[0]!==this.initVPS&&t.sps!==void 0&&!this.matchSPS(t.sps[0],y.data)&&(this.initVPS=t.vps[0],t.sps=t.pps=void 0),!t.sps){const w=this.readSPS(y.data);t.width=w.width,t.height=w.height,t.pixelRatio=w.pixelRatio,t.codec=w.codecString,t.sps=[],typeof t.params!="object"&&(t.params={});for(const T in w.params)t.params[T]=w.params[T]}this.pushParameterSet(t.sps,y.data,t.vps),f||(f=this.VideoSample=this.createVideoSample(!0,r.pts,r.dts)),f.key=!0;break;case 34:if(p=!0,typeof t.params=="object"){if(!t.pps){t.pps=[];const w=this.readPPS(y.data);for(const T in w)t.params[T]=w[T]}this.pushParameterSet(t.pps,y.data,t.vps)}break;case 35:p=!0,t.audFound=!0,(_=f)!=null&&_.frame&&(this.pushAccessUnit(f,t),f=null),f||(f=this.VideoSample=this.createVideoSample(!1,r.pts,r.dts));break;default:p=!1;break}f&&p&&f.units.push(y)}),l&&f&&(this.pushAccessUnit(f,t),this.VideoSample=null)}pushParameterSet(t,n,r){(r&&r[0]===this.initVPS||!r&&!t.length)&&t.push(n)}getNALuType(t,n){return(t[n]&126)>>>1}ebsp2rbsp(t){const n=new Uint8Array(t.byteLength);let r=0;for(let l=0;l<t.byteLength;l++)l>=2&&t[l]===3&&t[l-1]===0&&t[l-2]===0||(n[r]=t[l],r++);return new Uint8Array(n.buffer,0,r)}pushAccessUnit(t,n){super.pushAccessUnit(t,n),this.initVPS&&(this.initVPS=null)}readVPS(t){const n=new gy(t);n.readUByte(),n.readUByte(),n.readBits(4),n.skipBits(2),n.readBits(6);const r=n.readBits(3),l=n.readBoolean();return{numTemporalLayers:r+1,temporalIdNested:l}}readSPS(t){const n=new gy(this.ebsp2rbsp(t));n.readUByte(),n.readUByte(),n.readBits(4);const r=n.readBits(3);n.readBoolean();const l=n.readBits(2),d=n.readBoolean(),f=n.readBits(5),p=n.readUByte(),m=n.readUByte(),y=n.readUByte(),b=n.readUByte(),_=n.readUByte(),A=n.readUByte(),w=n.readUByte(),T=n.readUByte(),k=n.readUByte(),U=n.readUByte(),Y=n.readUByte(),se=[],te=[];for(let vt=0;vt<r;vt++)se.push(n.readBoolean()),te.push(n.readBoolean());if(r>0)for(let vt=r;vt<8;vt++)n.readBits(2);for(let vt=0;vt<r;vt++)se[vt]&&(n.readUByte(),n.readUByte(),n.readUByte(),n.readUByte(),n.readUByte(),n.readUByte(),n.readUByte(),n.readUByte(),n.readUByte(),n.readUByte(),n.readUByte()),te[vt]&&n.readUByte();n.readUEG();const Re=n.readUEG();Re==3&&n.skipBits(1);const Be=n.readUEG(),j=n.readUEG(),M=n.readBoolean();let Z=0,K=0,x=0,ue=0;M&&(Z+=n.readUEG(),K+=n.readUEG(),x+=n.readUEG(),ue+=n.readUEG());const $e=n.readUEG(),xe=n.readUEG(),lt=n.readUEG(),et=n.readBoolean();for(let vt=et?0:r;vt<=r;vt++)n.skipUEG(),n.skipUEG(),n.skipUEG();if(n.skipUEG(),n.skipUEG(),n.skipUEG(),n.skipUEG(),n.skipUEG(),n.skipUEG(),n.readBoolean()&&n.readBoolean())for(let Lt=0;Lt<4;Lt++)for(let bt=0;bt<(Lt===3?2:6);bt++)if(!n.readBoolean())n.readUEG();else{const kt=Math.min(64,1<<4+(Lt<<1));Lt>1&&n.readEG();for(let Bt=0;Bt<kt;Bt++)n.readEG()}n.readBoolean(),n.readBoolean(),n.readBoolean()&&(n.readUByte(),n.skipUEG(),n.skipUEG(),n.readBoolean());const Dt=n.readUEG();let dt=0;for(let vt=0;vt<Dt;vt++){let Lt=!1;if(vt!==0&&(Lt=n.readBoolean()),Lt){vt===Dt&&n.readUEG(),n.readBoolean(),n.readUEG();let bt=0;for(let Mt=0;Mt<=dt;Mt++){const kt=n.readBoolean();let Bt=!1;kt||(Bt=n.readBoolean()),(kt||Bt)&&bt++}dt=bt}else{const bt=n.readUEG(),Mt=n.readUEG();dt=bt+Mt;for(let kt=0;kt<bt;kt++)n.readUEG(),n.readBoolean();for(let kt=0;kt<Mt;kt++)n.readUEG(),n.readBoolean()}}if(n.readBoolean()){const vt=n.readUEG();for(let Lt=0;Lt<vt;Lt++){for(let bt=0;bt<lt+4;bt++)n.readBits(1);n.readBits(1)}}let Rt=0,mn=1,Tn=1,Qe=!0,Ze=1,at=0;n.readBoolean(),n.readBoolean();let nn=!1;if(n.readBoolean()){if(n.readBoolean()){const sn=n.readUByte(),ti=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],On=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];sn>0&&sn<16?(mn=ti[sn-1],Tn=On[sn-1]):sn===255&&(mn=n.readBits(16),Tn=n.readBits(16))}if(n.readBoolean()&&n.readBoolean(),n.readBoolean()&&(n.readBits(3),n.readBoolean(),n.readBoolean()&&(n.readUByte(),n.readUByte(),n.readUByte())),n.readBoolean()&&(n.readUEG(),n.readUEG()),n.readBoolean(),n.readBoolean(),n.readBoolean(),nn=n.readBoolean(),nn&&(Z+=n.readUEG(),K+=n.readUEG(),x+=n.readUEG(),ue+=n.readUEG()),n.readBoolean()&&(Ze=n.readBits(32),at=n.readBits(32),n.readBoolean()&&n.readUEG(),n.readBoolean())){const On=n.readBoolean(),Vn=n.readBoolean();let Sn=!1;(On||Vn)&&(Sn=n.readBoolean(),Sn&&(n.readUByte(),n.readBits(5),n.readBoolean(),n.readBits(5)),n.readBits(4),n.readBits(4),Sn&&n.readBits(4),n.readBits(5),n.readBits(5),n.readBits(5));for(let ni=0;ni<=r;ni++){Qe=n.readBoolean();const dr=Qe||n.readBoolean();let _r=!1;dr?n.readEG():_r=n.readBoolean();const bs=_r?1:n.readUEG()+1;if(On)for(let Zr=0;Zr<bs;Zr++)n.readUEG(),n.readUEG(),Sn&&(n.readUEG(),n.readUEG()),n.skipBits(1);if(Vn)for(let Zr=0;Zr<bs;Zr++)n.readUEG(),n.readUEG(),Sn&&(n.readUEG(),n.readUEG()),n.skipBits(1)}}n.readBoolean()&&(n.readBoolean(),n.readBoolean(),n.readBoolean(),Rt=n.readUEG())}let ge=Be,G=j;if(M||nn){let vt=1,Lt=1;Re===1?vt=Lt=2:Re==2&&(vt=2),ge=Be-vt*K-vt*Z,G=j-Lt*ue-Lt*x}const ae=l?["A","B","C"][l]:"",_e=p<<24|m<<16|y<<8|b;let Ae=0;for(let vt=0;vt<32;vt++)Ae=(Ae|(_e>>vt&1)<<31-vt)>>>0;let yt=Ae.toString(16);return f===1&&yt==="2"&&(yt="6"),{codecString:`hvc1.${ae}${f}.${yt}.${d?"H":"L"}${Y}.B0`,params:{general_tier_flag:d,general_profile_idc:f,general_profile_space:l,general_profile_compatibility_flags:[p,m,y,b],general_constraint_indicator_flags:[_,A,w,T,k,U],general_level_idc:Y,bit_depth:$e+8,bit_depth_luma_minus8:$e,bit_depth_chroma_minus8:xe,min_spatial_segmentation_idc:Rt,chroma_format_idc:Re,frame_rate:{fixed:Qe,fps:at/Ze}},width:ge,height:G,pixelRatio:[mn,Tn]}}readPPS(t){const n=new gy(this.ebsp2rbsp(t));n.readUByte(),n.readUByte(),n.skipUEG(),n.skipUEG(),n.skipBits(2),n.skipBits(3),n.skipBits(2),n.skipUEG(),n.skipUEG(),n.skipEG(),n.skipBits(2),n.readBoolean()&&n.skipUEG(),n.skipEG(),n.skipEG(),n.skipBits(4);const l=n.readBoolean(),d=n.readBoolean();let f=1;return d&&l?f=0:d?f=3:l&&(f=2),{parallelismType:f}}matchSPS(t,n){return String.fromCharCode.apply(null,t).substr(3)===String.fromCharCode.apply(null,n).substr(3)}}const ja=188;class wf{constructor(t,n,r,l){this.logger=void 0,this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=t,this.config=n,this.typeSupported=r,this.logger=l,this.videoParser=null}static probe(t,n){const r=wf.syncOffset(t);return r>0&&n.warn(`MPEG2-TS detected but first sync word found @ offset ${r}`),r!==-1}static syncOffset(t){const n=t.length;let r=Math.min(ja*5,n-ja)+1,l=0;for(;l<r;){let d=!1,f=-1,p=0;for(let m=l;m<n;m+=ja)if(t[m]===71&&(n-m===ja||t[m+ja]===71)){if(p++,f===-1&&(f=m,f!==0&&(r=Math.min(f+ja*99,t.length-ja)+1)),d||(d=EA(t,m)===0),d&&p>1&&(f===0&&p>2||m+ja>r))return f}else{if(p)return-1;break}l++}return-1}static createTrack(t,n){return{container:t==="video"||t==="audio"?"video/mp2t":void 0,type:t,id:fM[t],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:t==="audio"?n:void 0}}resetInitSegment(t,n,r,l){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=wf.createTrack("video"),this._videoTrack.duration=l,this._audioTrack=wf.createTrack("audio",l),this._id3Track=wf.createTrack("id3"),this._txtTrack=wf.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.remainderData=null,this.audioCodec=n,this.videoCodec=r}resetTimeStamp(){}resetContiguity(){const{_audioTrack:t,_videoTrack:n,_id3Track:r}=this;t&&(t.pesData=null),n&&(n.pesData=null),r&&(r.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(t,n,r=!1,l=!1){r||(this.sampleAes=null);let d;const f=this._videoTrack,p=this._audioTrack,m=this._id3Track,y=this._txtTrack;let b=f.pid,_=f.pesData,A=p.pid,w=m.pid,T=p.pesData,k=m.pesData,U=null,Y=this.pmtParsed,se=this._pmtId,te=t.length;if(this.remainderData&&(t=_u(this.remainderData,t),te=t.length,this.remainderData=null),te<ja&&!l)return this.remainderData=t,{audioTrack:p,videoTrack:f,id3Track:m,textTrack:y};const Re=Math.max(0,wf.syncOffset(t));te-=(te-Re)%ja,te<t.byteLength&&!l&&(this.remainderData=new Uint8Array(t.buffer,te,t.buffer.byteLength-te));let Be=0;for(let M=Re;M<te;M+=ja)if(t[M]===71){const Z=!!(t[M+1]&64),K=EA(t,M),x=(t[M+3]&48)>>4;let ue;if(x>1){if(ue=M+5+t[M+4],ue===M+ja)continue}else ue=M+4;switch(K){case b:if(Z){if(_&&(d=Yp(_,this.logger))){if(this.videoParser===null)switch(f.segmentCodec){case"avc":this.videoParser=new j2;break;case"hevc":this.videoParser=new q2;break}this.videoParser!==null&&this.videoParser.parsePES(f,y,d,!1)}_={data:[],size:0}}_&&(_.data.push(t.subarray(ue,M+ja)),_.size+=M+ja-ue);break;case A:if(Z){if(T&&(d=Yp(T,this.logger)))switch(p.segmentCodec){case"aac":this.parseAACPES(p,d);break;case"mp3":this.parseMPEGPES(p,d);break;case"ac3":this.parseAC3PES(p,d);break}T={data:[],size:0}}T&&(T.data.push(t.subarray(ue,M+ja)),T.size+=M+ja-ue);break;case w:Z&&(k&&(d=Yp(k,this.logger))&&this.parseID3PES(m,d),k={data:[],size:0}),k&&(k.data.push(t.subarray(ue,M+ja)),k.size+=M+ja-ue);break;case 0:Z&&(ue+=t[ue]+1),se=this._pmtId=Yq(t,ue);break;case se:{Z&&(ue+=t[ue]+1);const $e=Wq(t,ue,this.typeSupported,r,this.observer,this.logger);b=$e.videoPid,b>0&&(f.pid=b,f.segmentCodec=$e.segmentVideoCodec),A=$e.audioPid,A>0&&(p.pid=A,p.segmentCodec=$e.segmentAudioCodec),w=$e.id3Pid,w>0&&(m.pid=w),U!==null&&!Y&&(this.logger.warn(`MPEG-TS PMT found at ${M} after unknown PID '${U}'. Backtracking to sync byte @${Re} to parse all TS packets.`),U=null,M=Re-188),Y=this.pmtParsed=!0;break}case 17:case 8191:break;default:U=K;break}}else Be++;Be>0&&bA(this.observer,new Error(`Found ${Be} TS packet/s that do not start with 0x47`),void 0,this.logger),f.pesData=_,p.pesData=T,m.pesData=k;const j={audioTrack:p,videoTrack:f,id3Track:m,textTrack:y};return l&&this.extractRemainingSamples(j),j}flush(){const{remainderData:t}=this;this.remainderData=null;let n;return t?n=this.demux(t,-1,!1,!0):n={videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(n),this.sampleAes?this.decrypt(n,this.sampleAes):n}extractRemainingSamples(t){const{audioTrack:n,videoTrack:r,id3Track:l,textTrack:d}=t,f=r.pesData,p=n.pesData,m=l.pesData;let y;if(f&&(y=Yp(f,this.logger))){if(this.videoParser===null)switch(r.segmentCodec){case"avc":this.videoParser=new j2;break;case"hevc":this.videoParser=new q2;break}this.videoParser!==null&&(this.videoParser.parsePES(r,d,y,!0),r.pesData=null)}else r.pesData=f;if(p&&(y=Yp(p,this.logger))){switch(n.segmentCodec){case"aac":this.parseAACPES(n,y);break;case"mp3":this.parseMPEGPES(n,y);break;case"ac3":this.parseAC3PES(n,y);break}n.pesData=null}else p!=null&&p.size&&this.logger.log("last AAC PES packet truncated,might overlap between fragments"),n.pesData=p;m&&(y=Yp(m,this.logger))?(this.parseID3PES(l,y),l.pesData=null):l.pesData=m}demuxSampleAes(t,n,r){const l=this.demux(t,r,!0,!this.config.progressive),d=this.sampleAes=new Kq(this.observer,this.config,n);return this.decrypt(l,d)}decrypt(t,n){return new Promise(r=>{const{audioTrack:l,videoTrack:d}=t;l.samples&&l.segmentCodec==="aac"?n.decryptAacSamples(l.samples,0,()=>{d.samples?n.decryptAvcSamples(d.samples,0,0,()=>{r(t)}):r(t)}):d.samples&&n.decryptAvcSamples(d.samples,0,0,()=>{r(t)})})}destroy(){this.observer&&this.observer.removeAllListeners(),this.config=this.logger=this.observer=null,this.aacOverFlow=this.videoParser=this.remainderData=this.sampleAes=null,this._videoTrack=this._audioTrack=this._id3Track=this._txtTrack=void 0}parseAACPES(t,n){let r=0;const l=this.aacOverFlow;let d=n.data;if(l){this.aacOverFlow=null;const _=l.missing,A=l.sample.unit.byteLength;if(_===-1)d=_u(l.sample.unit,d);else{const w=A-_;l.sample.unit.set(d.subarray(0,_),w),t.samples.push(l.sample),r=l.missing}}let f,p;for(f=r,p=d.length;f<p-1&&!oE(d,f);f++);if(f!==r){let _;const A=f<p-1;if(A?_=`AAC PES did not start with ADTS header,offset:${f}`:_="No ADTS header found in AAC PES",bA(this.observer,new Error(_),A,this.logger),!A)return}VM(t,this.observer,d,f,this.audioCodec);let m;if(n.pts!==void 0)m=n.pts;else if(l){const _=$M(t.samplerate);m=l.sample.pts+_}else{this.logger.warn("[tsdemuxer]: AAC PES unknown PTS");return}let y=0,b;for(;f<p;)if(b=KM(t,d,f,m,y),f+=b.length,b.missing){this.aacOverFlow=b;break}else for(y++;f<p-1&&!oE(d,f);f++);}parseMPEGPES(t,n){const r=n.data,l=r.length;let d=0,f=0;const p=n.pts;if(p===void 0){this.logger.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;f<l;)if(ZM(r,f)){const m=QM(t,r,f,p,d);if(m)f+=m.length,d++;else break}else f++}parseAC3PES(t,n){{const r=n.data,l=n.pts;if(l===void 0){this.logger.warn("[tsdemuxer]: AC3 PES unknown PTS");return}const d=r.length;let f=0,p=0,m;for(;p<d&&(m=nN(t,r,p,l,f++))>0;)p+=m}}parseID3PES(t,n){if(n.pts===void 0){this.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const r=hs({},n,{type:this._videoTrack?Jl.emsg:Jl.audioId3,duration:Number.POSITIVE_INFINITY});t.samples.push(r)}}function EA(u,t){return((u[t+1]&31)<<8)+u[t+2]}function Yq(u,t){return(u[t+10]&31)<<8|u[t+11]}function Wq(u,t,n,r,l,d){const f={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},p=(u[t+1]&15)<<8|u[t+2],m=t+3+p-4,y=(u[t+10]&15)<<8|u[t+11];for(t+=12+y;t<m;){const b=EA(u,t),_=(u[t+3]&15)<<8|u[t+4];switch(u[t]){case 207:if(!r){gx("ADTS AAC",d);break}case 15:f.audioPid===-1&&(f.audioPid=b);break;case 21:f.id3Pid===-1&&(f.id3Pid=b);break;case 219:if(!r){gx("H.264",d);break}case 27:f.videoPid===-1&&(f.videoPid=b);break;case 3:case 4:!n.mpeg&&!n.mp3?d.log("MPEG audio found, not supported in this browser"):f.audioPid===-1&&(f.audioPid=b,f.segmentAudioCodec="mp3");break;case 193:if(!r){gx("AC-3",d);break}case 129:n.ac3?f.audioPid===-1&&(f.audioPid=b,f.segmentAudioCodec="ac3"):d.log("AC-3 audio found, not supported in this browser");break;case 6:if(f.audioPid===-1&&_>0){let A=t+5,w=_;for(;w>2;){switch(u[A]){case 106:n.ac3!==!0?d.log("AC-3 audio found, not supported in this browser for now"):(f.audioPid=b,f.segmentAudioCodec="ac3");break}const k=u[A+1]+2;A+=k,w-=k}}break;case 194:case 135:return bA(l,new Error("Unsupported EC-3 in M2TS found"),void 0,d),f;case 36:f.videoPid===-1&&(f.videoPid=b,f.segmentVideoCodec="hevc",d.log("HEVC in M2TS found"));break}t+=_+5}return f}function bA(u,t,n,r){r.warn(`parsing error: ${t.message}`),u.emit(He.ERROR,He.ERROR,{type:Hi.MEDIA_ERROR,details:pn.FRAG_PARSING_ERROR,fatal:!1,levelRetry:n,error:t,reason:t.message})}function gx(u,t){t.log(`${u} with AES-128-CBC encryption found in unencrypted stream`)}function Yp(u,t){let n=0,r,l,d,f,p;const m=u.data;if(!u||u.size===0)return null;for(;m[0].length<19&&m.length>1;)m[0]=_u(m[0],m[1]),m.splice(1,1);if(r=m[0],(r[0]<<16)+(r[1]<<8)+r[2]===1){if(l=(r[4]<<8)+r[5],l&&l>u.size-6)return null;const b=r[7];b&192&&(f=(r[9]&14)*536870912+(r[10]&255)*4194304+(r[11]&254)*16384+(r[12]&255)*128+(r[13]&254)/2,b&64?(p=(r[14]&14)*536870912+(r[15]&255)*4194304+(r[16]&254)*16384+(r[17]&255)*128+(r[18]&254)/2,f-p>60*9e4&&(t.warn(`${Math.round((f-p)/9e4)}s delta between PTS and DTS, align them`),f=p)):p=f),d=r[8];let _=d+9;if(u.size<=_)return null;u.size-=_;const A=new Uint8Array(u.size);for(let w=0,T=m.length;w<T;w++){r=m[w];let k=r.byteLength;if(_)if(_>k){_-=k;continue}else r=r.subarray(_),k-=_,_=0;A.set(r,n),n+=k}return l&&(l-=d+3),{data:A,pts:f,dts:p,len:l}}return null}class Xq{static getSilentFrame(t,n){switch(t){case"mp4a.40.2":if(n===1)return new Uint8Array([0,200,0,128,35,128]);if(n===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(n===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(n===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(n===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(n===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(n===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(n===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(n===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const Tf=Math.pow(2,32)-1;class ln{static init(){ln.types={avc1:[],avcC:[],hvc1:[],hvcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let t;for(t in ln.types)ln.types.hasOwnProperty(t)&&(ln.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);const n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);ln.HDLR_TYPES={video:n,audio:r};const l=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),d=new Uint8Array([0,0,0,0,0,0,0,0]);ln.STTS=ln.STSC=ln.STCO=d,ln.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),ln.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),ln.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),ln.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const f=new Uint8Array([105,115,111,109]),p=new Uint8Array([97,118,99,49]),m=new Uint8Array([0,0,0,1]);ln.FTYP=ln.box(ln.types.ftyp,f,m,f,p),ln.DINF=ln.box(ln.types.dinf,ln.box(ln.types.dref,l))}static box(t,...n){let r=8,l=n.length;const d=l;for(;l--;)r+=n[l].byteLength;const f=new Uint8Array(r);for(f[0]=r>>24&255,f[1]=r>>16&255,f[2]=r>>8&255,f[3]=r&255,f.set(t,4),l=0,r=8;l<d;l++)f.set(n[l],r),r+=n[l].byteLength;return f}static hdlr(t){return ln.box(ln.types.hdlr,ln.HDLR_TYPES[t])}static mdat(t){return ln.box(ln.types.mdat,t)}static mdhd(t,n){n*=t;const r=Math.floor(n/(Tf+1)),l=Math.floor(n%(Tf+1));return ln.box(ln.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,t&255,r>>24,r>>16&255,r>>8&255,r&255,l>>24,l>>16&255,l>>8&255,l&255,85,196,0,0]))}static mdia(t){return ln.box(ln.types.mdia,ln.mdhd(t.timescale||0,t.duration||0),ln.hdlr(t.type),ln.minf(t))}static mfhd(t){return ln.box(ln.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255]))}static minf(t){return t.type==="audio"?ln.box(ln.types.minf,ln.box(ln.types.smhd,ln.SMHD),ln.DINF,ln.stbl(t)):ln.box(ln.types.minf,ln.box(ln.types.vmhd,ln.VMHD),ln.DINF,ln.stbl(t))}static moof(t,n,r){return ln.box(ln.types.moof,ln.mfhd(t),ln.traf(r,n))}static moov(t){let n=t.length;const r=[];for(;n--;)r[n]=ln.trak(t[n]);return ln.box.apply(null,[ln.types.moov,ln.mvhd(t[0].timescale||0,t[0].duration||0)].concat(r).concat(ln.mvex(t)))}static mvex(t){let n=t.length;const r=[];for(;n--;)r[n]=ln.trex(t[n]);return ln.box.apply(null,[ln.types.mvex,...r])}static mvhd(t,n){n*=t;const r=Math.floor(n/(Tf+1)),l=Math.floor(n%(Tf+1)),d=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,t&255,r>>24,r>>16&255,r>>8&255,r&255,l>>24,l>>16&255,l>>8&255,l&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return ln.box(ln.types.mvhd,d)}static sdtp(t){const n=t.samples||[],r=new Uint8Array(4+n.length);let l,d;for(l=0;l<n.length;l++)d=n[l].flags,r[l+4]=d.dependsOn<<4|d.isDependedOn<<2|d.hasRedundancy;return ln.box(ln.types.sdtp,r)}static stbl(t){return ln.box(ln.types.stbl,ln.stsd(t),ln.box(ln.types.stts,ln.STTS),ln.box(ln.types.stsc,ln.STSC),ln.box(ln.types.stsz,ln.STSZ),ln.box(ln.types.stco,ln.STCO))}static avc1(t){let n=[],r=[],l,d,f;for(l=0;l<t.sps.length;l++)d=t.sps[l],f=d.byteLength,n.push(f>>>8&255),n.push(f&255),n=n.concat(Array.prototype.slice.call(d));for(l=0;l<t.pps.length;l++)d=t.pps[l],f=d.byteLength,r.push(f>>>8&255),r.push(f&255),r=r.concat(Array.prototype.slice.call(d));const p=ln.box(ln.types.avcC,new Uint8Array([1,n[3],n[4],n[5],255,224|t.sps.length].concat(n).concat([t.pps.length]).concat(r))),m=t.width,y=t.height,b=t.pixelRatio[0],_=t.pixelRatio[1];return ln.box(ln.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,m>>8&255,m&255,y>>8&255,y&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),p,ln.box(ln.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),ln.box(ln.types.pasp,new Uint8Array([b>>24,b>>16&255,b>>8&255,b&255,_>>24,_>>16&255,_>>8&255,_&255])))}static esds(t){const n=t.config;return new Uint8Array([0,0,0,0,3,25,0,1,0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,...n,6,1,2])}static audioStsd(t){const n=t.samplerate||0;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount||0,0,16,0,0,0,0,n>>8&255,n&255,0,0])}static mp4a(t){return ln.box(ln.types.mp4a,ln.audioStsd(t),ln.box(ln.types.esds,ln.esds(t)))}static mp3(t){return ln.box(ln.types[".mp3"],ln.audioStsd(t))}static ac3(t){return ln.box(ln.types["ac-3"],ln.audioStsd(t),ln.box(ln.types.dac3,t.config))}static stsd(t){const{segmentCodec:n}=t;if(t.type==="audio"){if(n==="aac")return ln.box(ln.types.stsd,ln.STSD,ln.mp4a(t));if(n==="ac3"&&t.config)return ln.box(ln.types.stsd,ln.STSD,ln.ac3(t));if(n==="mp3"&&t.codec==="mp3")return ln.box(ln.types.stsd,ln.STSD,ln.mp3(t))}else if(t.pps&&t.sps){if(n==="avc")return ln.box(ln.types.stsd,ln.STSD,ln.avc1(t));if(n==="hevc"&&t.vps)return ln.box(ln.types.stsd,ln.STSD,ln.hvc1(t))}else throw new Error("video track missing pps or sps");throw new Error(`unsupported ${t.type} segment codec (${n}/${t.codec})`)}static tkhd(t){const n=t.id,r=(t.duration||0)*(t.timescale||0),l=t.width||0,d=t.height||0,f=Math.floor(r/(Tf+1)),p=Math.floor(r%(Tf+1));return ln.box(ln.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,n&255,0,0,0,0,f>>24,f>>16&255,f>>8&255,f&255,p>>24,p>>16&255,p>>8&255,p&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,l>>8&255,l&255,0,0,d>>8&255,d&255,0,0]))}static traf(t,n){const r=ln.sdtp(t),l=t.id,d=Math.floor(n/(Tf+1)),f=Math.floor(n%(Tf+1));return ln.box(ln.types.traf,ln.box(ln.types.tfhd,new Uint8Array([0,0,0,0,l>>24,l>>16&255,l>>8&255,l&255])),ln.box(ln.types.tfdt,new Uint8Array([1,0,0,0,d>>24,d>>16&255,d>>8&255,d&255,f>>24,f>>16&255,f>>8&255,f&255])),ln.trun(t,r.length+16+20+8+16+8+8),r)}static trak(t){return t.duration=t.duration||4294967295,ln.box(ln.types.trak,ln.tkhd(t),ln.mdia(t))}static trex(t){const n=t.id;return ln.box(ln.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,n&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(t,n){const r=t.samples||[],l=r.length,d=12+16*l,f=new Uint8Array(d);let p,m,y,b,_,A;for(n+=8+d,f.set([t.type==="video"?1:0,0,15,1,l>>>24&255,l>>>16&255,l>>>8&255,l&255,n>>>24&255,n>>>16&255,n>>>8&255,n&255],0),p=0;p<l;p++)m=r[p],y=m.duration,b=m.size,_=m.flags,A=m.cts,f.set([y>>>24&255,y>>>16&255,y>>>8&255,y&255,b>>>24&255,b>>>16&255,b>>>8&255,b&255,_.isLeading<<2|_.dependsOn,_.isDependedOn<<6|_.hasRedundancy<<4|_.paddingValue<<1|_.isNonSync,_.degradPrio&61440,_.degradPrio&15,A>>>24&255,A>>>16&255,A>>>8&255,A&255],12+16*p);return ln.box(ln.types.trun,f)}static initSegment(t){ln.types||ln.init();const n=ln.moov(t);return _u(ln.FTYP,n)}static hvc1(t){const n=t.params,r=[t.vps,t.sps,t.pps],l=4,d=new Uint8Array([1,n.general_profile_space<<6|(n.general_tier_flag?32:0)|n.general_profile_idc,n.general_profile_compatibility_flags[0],n.general_profile_compatibility_flags[1],n.general_profile_compatibility_flags[2],n.general_profile_compatibility_flags[3],n.general_constraint_indicator_flags[0],n.general_constraint_indicator_flags[1],n.general_constraint_indicator_flags[2],n.general_constraint_indicator_flags[3],n.general_constraint_indicator_flags[4],n.general_constraint_indicator_flags[5],n.general_level_idc,240|n.min_spatial_segmentation_idc>>8,255&n.min_spatial_segmentation_idc,252|n.parallelismType,252|n.chroma_format_idc,248|n.bit_depth_luma_minus8,248|n.bit_depth_chroma_minus8,0,parseInt(n.frame_rate.fps),l-1|n.temporal_id_nested<<2|n.num_temporal_layers<<3|(n.frame_rate.fixed?64:0),r.length]);let f=d.length;for(let T=0;T<r.length;T+=1){f+=3;for(let k=0;k<r[T].length;k+=1)f+=2+r[T][k].length}const p=new Uint8Array(f);p.set(d,0),f=d.length;const m=r.length-1;for(let T=0;T<r.length;T+=1){p.set(new Uint8Array([32+T|(T===m?128:0),0,r[T].length]),f),f+=3;for(let k=0;k<r[T].length;k+=1)p.set(new Uint8Array([r[T][k].length>>8,r[T][k].length&255]),f),f+=2,p.set(r[T][k],f),f+=r[T][k].length}const y=ln.box(ln.types.hvcC,p),b=t.width,_=t.height,A=t.pixelRatio[0],w=t.pixelRatio[1];return ln.box(ln.types.hvc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,b>>8&255,b&255,_>>8&255,_&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),y,ln.box(ln.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),ln.box(ln.types.pasp,new Uint8Array([A>>24,A>>16&255,A>>8&255,A&255,w>>24,w>>16&255,w>>8&255,w&255])))}}ln.types=void 0;ln.HDLR_TYPES=void 0;ln.STTS=void 0;ln.STSC=void 0;ln.STCO=void 0;ln.STSZ=void 0;ln.VMHD=void 0;ln.SMHD=void 0;ln.STSD=void 0;ln.FTYP=void 0;ln.DINF=void 0;const rN=9e4;function bw(u,t,n=1,r=!1){const l=u*t*n;return r?Math.round(l):l}function Qq(u,t,n=1,r=!1){return bw(u,t,1/n,r)}function ry(u,t=!1){return bw(u,1e3,1/rN,t)}function Jq(u,t=1){return bw(u,rN,1/t)}const Zq=10*1e3,eH=1024,tH=1152,nH=1536;let Wp=null,mx=null;function H2(u,t,n,r){return{duration:t,size:n,cts:r,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:u?2:1,isNonSync:u?0:1}}}class FT{constructor(t,n,r,l){if(this.logger=void 0,this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=t,this.config=n,this.typeSupported=r,this.logger=l,this.ISGenerated=!1,Wp===null){const f=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Wp=f?parseInt(f[1]):0}if(mx===null){const d=navigator.userAgent.match(/Safari\/(\d+)/i);mx=d?parseInt(d[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(t){this.logger.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=t}resetNextTimestamp(){this.logger.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){this.logger.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(t){let n=!1;const r=t[0].pts,l=t.reduce((d,f)=>{let p=f.pts,m=p-d;return m<-4294967296&&(n=!0,p=Tu(p,r),m=p-d),m>0?d:p},r);return n&&this.logger.debug("PTS rollover detected"),l}remux(t,n,r,l,d,f,p,m){let y,b,_,A,w,T,k=d,U=d;const Y=t.pid>-1,se=n.pid>-1,te=n.samples.length,Re=t.samples.length>0,Be=p&&te>0||te>1;if((!Y||Re)&&(!se||Be)||this.ISGenerated||p){if(this.ISGenerated){var M,Z,K,x;const lt=this.videoTrackConfig;(lt&&(n.width!==lt.width||n.height!==lt.height||((M=n.pixelRatio)==null?void 0:M[0])!==((Z=lt.pixelRatio)==null?void 0:Z[0])||((K=n.pixelRatio)==null?void 0:K[1])!==((x=lt.pixelRatio)==null?void 0:x[1]))||!lt&&Be||this.nextAudioPts===null&&Re)&&this.resetInitSegment()}this.ISGenerated||(_=this.generateIS(t,n,d,f));const ue=this.isVideoContiguous;let $e=-1,xe;if(Be&&($e=iH(n.samples),!ue&&this.config.forceKeyFrameOnDiscontinuity))if(T=!0,$e>0){this.logger.warn(`[mp4-remuxer]: Dropped ${$e} out of ${te} video samples due to a missing keyframe`);const lt=this.getVideoStartPts(n.samples);n.samples=n.samples.slice($e),n.dropped+=$e,U+=(n.samples[0].pts-lt)/n.inputTimeScale,xe=U}else $e===-1&&(this.logger.warn(`[mp4-remuxer]: No keyframe found out of ${te} video samples`),T=!1);if(this.ISGenerated){if(Re&&Be){const lt=this.getVideoStartPts(n.samples),Xe=(Tu(t.samples[0].pts,lt)-lt)/n.inputTimeScale;k+=Math.max(0,Xe),U+=Math.max(0,-Xe)}if(Re){if(t.samplerate||(this.logger.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),_=this.generateIS(t,n,d,f)),b=this.remuxAudio(t,k,this.isAudioContiguous,f,se||Be||m===Ui.AUDIO?U:void 0),Be){const lt=b?b.endPTS-b.startPTS:0;n.inputTimeScale||(this.logger.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),_=this.generateIS(t,n,d,f)),y=this.remuxVideo(n,U,ue,lt)}}else Be&&(y=this.remuxVideo(n,U,ue,0));y&&(y.firstKeyFrame=$e,y.independent=$e!==-1,y.firstKeyFramePTS=xe)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(r.samples.length&&(w=sN(r,d,this._initPTS,this._initDTS)),l.samples.length&&(A=aN(l,d,this._initPTS))),{audio:b,video:y,initSegment:_,independent:T,text:A,id3:w}}generateIS(t,n,r,l){const d=t.samples,f=n.samples,p=this.typeSupported,m={},y=this._initPTS;let b=!y||l,_="audio/mp4",A,w,T;if(b&&(A=w=1/0),t.config&&d.length){switch(t.timescale=t.samplerate,t.segmentCodec){case"mp3":p.mpeg?(_="audio/mpeg",t.codec=""):p.mp3&&(t.codec="mp3");break;case"ac3":t.codec="ac-3";break}m.audio={id:"audio",container:_,codec:t.codec,initSegment:t.segmentCodec==="mp3"&&p.mpeg?new Uint8Array(0):ln.initSegment([t]),metadata:{channelCount:t.channelCount}},b&&(T=t.inputTimeScale,!y||T!==y.timescale?A=w=d[0].pts-Math.round(T*r):b=!1)}if(n.sps&&n.pps&&f.length){if(n.timescale=n.inputTimeScale,m.video={id:"main",container:"video/mp4",codec:n.codec,initSegment:ln.initSegment([n]),metadata:{width:n.width,height:n.height}},b)if(T=n.inputTimeScale,!y||T!==y.timescale){const k=this.getVideoStartPts(f),U=Math.round(T*r);w=Math.min(w,Tu(f[0].dts,k)-U),A=Math.min(A,k-U)}else b=!1;this.videoTrackConfig={width:n.width,height:n.height,pixelRatio:n.pixelRatio}}if(Object.keys(m).length)return this.ISGenerated=!0,b?(this._initPTS={baseTime:A,timescale:T},this._initDTS={baseTime:w,timescale:T}):A=T=void 0,{tracks:m,initPTS:A,timescale:T}}remuxVideo(t,n,r,l){const d=t.inputTimeScale,f=t.samples,p=[],m=f.length,y=this._initPTS;let b=this.nextAvcDts,_=8,A=this.videoSampleDuration,w,T,k=Number.POSITIVE_INFINITY,U=Number.NEGATIVE_INFINITY,Y=!1;if(!r||b===null){const dt=n*d,Et=f[0].pts-Tu(f[0].dts,f[0].pts);Wp&&b!==null&&Math.abs(dt-Et-b)<15e3?r=!0:b=dt-Et}const se=y.baseTime*d/y.timescale;for(let dt=0;dt<m;dt++){const Et=f[dt];Et.pts=Tu(Et.pts-se,b),Et.dts=Tu(Et.dts-se,b),Et.dts<f[dt>0?dt-1:dt].dts&&(Y=!0)}Y&&f.sort(function(dt,Et){const Rt=dt.dts-Et.dts,mn=dt.pts-Et.pts;return Rt||mn}),w=f[0].dts,T=f[f.length-1].dts;const te=T-w,Re=te?Math.round(te/(m-1)):A||t.inputTimeScale/30;if(r){const dt=w-b,Et=dt>Re,Rt=dt<-1;if((Et||Rt)&&(Et?this.logger.warn(`${(t.segmentCodec||"").toUpperCase()}: ${ry(dt,!0)} ms (${dt}dts) hole between fragments detected at ${n.toFixed(3)}`):this.logger.warn(`${(t.segmentCodec||"").toUpperCase()}: ${ry(-dt,!0)} ms (${dt}dts) overlapping between fragments detected at ${n.toFixed(3)}`),!Rt||b>=f[0].pts||Wp)){w=b;const mn=f[0].pts-dt;if(Et)f[0].dts=w,f[0].pts=mn;else{let Tn=!0;for(let Qe=0;Qe<f.length&&!(f[Qe].dts>mn&&Tn);Qe++){const Ze=f[Qe].pts;if(f[Qe].dts-=dt,f[Qe].pts-=dt,Qe<f.length-1){const at=f[Qe+1].pts,nn=f[Qe].pts,ce=at<=nn,ge=at<=Ze;Tn=ce==ge}}}this.logger.log(`Video: Initial PTS/DTS adjusted: ${ry(mn,!0)}/${ry(w,!0)}, delta: ${ry(dt,!0)} ms`)}}w=Math.max(0,w);let Be=0,j=0,M=w;for(let dt=0;dt<m;dt++){const Et=f[dt],Rt=Et.units,mn=Rt.length;let Tn=0;for(let Qe=0;Qe<mn;Qe++)Tn+=Rt[Qe].data.length;j+=Tn,Be+=mn,Et.length=Tn,Et.dts<M?(Et.dts=M,M+=Re/4|0||1):M=Et.dts,k=Math.min(Et.pts,k),U=Math.max(Et.pts,U)}T=f[m-1].dts;const Z=j+4*Be+8;let K;try{K=new Uint8Array(Z)}catch(dt){this.observer.emit(He.ERROR,He.ERROR,{type:Hi.MUX_ERROR,details:pn.REMUX_ALLOC_ERROR,fatal:!1,error:dt,bytes:Z,reason:`fail allocating video mdat ${Z}`});return}const x=new DataView(K.buffer);x.setUint32(0,Z),K.set(ln.types.mdat,4);let ue=!1,$e=Number.POSITIVE_INFINITY,xe=Number.POSITIVE_INFINITY,lt=Number.NEGATIVE_INFINITY,et=Number.NEGATIVE_INFINITY;for(let dt=0;dt<m;dt++){const Et=f[dt],Rt=Et.units;let mn=0;for(let Ze=0,at=Rt.length;Ze<at;Ze++){const nn=Rt[Ze],ce=nn.data,ge=nn.data.byteLength;x.setUint32(_,ge),_+=4,K.set(ce,_),_+=ge,mn+=4+ge}let Tn;if(dt<m-1)A=f[dt+1].dts-Et.dts,Tn=f[dt+1].pts-Et.pts;else{const Ze=this.config,at=dt>0?Et.dts-f[dt-1].dts:Re;if(Tn=dt>0?Et.pts-f[dt-1].pts:Re,Ze.stretchShortVideoTrack&&this.nextAudioPts!==null){const nn=Math.floor(Ze.maxBufferHole*d),ce=(l?k+l*d:this.nextAudioPts)-Et.pts;ce>nn?(A=ce-at,A<0?A=at:ue=!0,this.logger.log(`[mp4-remuxer]: It is approximately ${ce/90} ms to the next segment; using duration ${A/90} ms for the last video frame.`)):A=at}else A=at}const Qe=Math.round(Et.pts-Et.dts);$e=Math.min($e,A),lt=Math.max(lt,A),xe=Math.min(xe,Tn),et=Math.max(et,Tn),p.push(H2(Et.key,A,mn,Qe))}if(p.length){if(Wp){if(Wp<70){const dt=p[0].flags;dt.dependsOn=2,dt.isNonSync=0}}else if(mx&&et-xe<lt-$e&&Re/lt<.025&&p[0].cts===0){this.logger.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let dt=w;for(let Et=0,Rt=p.length;Et<Rt;Et++){const mn=dt+p[Et].duration,Tn=dt+p[Et].cts;if(Et<Rt-1){const Qe=mn+p[Et+1].cts;p[Et].duration=Qe-Tn}else p[Et].duration=Et?p[Et-1].duration:Re;p[Et].cts=0,dt=mn}}}A=ue||!A?Re:A,this.nextAvcDts=b=T+A,this.videoSampleDuration=A,this.isVideoContiguous=!0;const Dt={data1:ln.moof(t.sequenceNumber++,w,hs(t,{samples:p})),data2:K,startPTS:k/d,endPTS:(U+A)/d,startDTS:w/d,endDTS:b/d,type:"video",hasAudio:!1,hasVideo:!0,nb:p.length,dropped:t.dropped};return t.samples=[],t.dropped=0,Dt}getSamplesPerFrame(t){switch(t.segmentCodec){case"mp3":return tH;case"ac3":return nH;default:return eH}}remuxAudio(t,n,r,l,d){const f=t.inputTimeScale,p=t.samplerate?t.samplerate:f,m=f/p,y=this.getSamplesPerFrame(t),b=y*m,_=this._initPTS,A=t.segmentCodec==="mp3"&&this.typeSupported.mpeg,w=[],T=d!==void 0;let k=t.samples,U=A?0:8,Y=this.nextAudioPts||-1;const se=n*f,te=_.baseTime*f/_.timescale;if(this.isAudioContiguous=r=r||k.length&&Y>0&&(l&&Math.abs(se-Y)<9e3||Math.abs(Tu(k[0].pts-te,se)-Y)<20*b),k.forEach(function(Xe){Xe.pts=Tu(Xe.pts-te,se)}),!r||Y<0){if(k=k.filter(Xe=>Xe.pts>=0),!k.length)return;d===0?Y=0:l&&!T?Y=Math.max(0,se):Y=k[0].pts}if(t.segmentCodec==="aac"){const Xe=this.config.maxAudioFramesDrift;for(let ut=0,Dt=Y;ut<k.length;ut++){const dt=k[ut],Et=dt.pts,Rt=Et-Dt,mn=Math.abs(1e3*Rt/f);if(Rt<=-Xe*b&&T)ut===0&&(this.logger.warn(`Audio frame @ ${(Et/f).toFixed(3)}s overlaps nextAudioPts by ${Math.round(1e3*Rt/f)} ms.`),this.nextAudioPts=Y=Dt=Et);else if(Rt>=Xe*b&&mn<Zq&&T){let Tn=Math.round(Rt/b);Dt=Et-Tn*b,Dt<0&&(Tn--,Dt+=b),ut===0&&(this.nextAudioPts=Y=Dt),this.logger.warn(`[mp4-remuxer]: Injecting ${Tn} audio frame @ ${(Dt/f).toFixed(3)}s due to ${Math.round(1e3*Rt/f)} ms gap.`);for(let Qe=0;Qe<Tn;Qe++){const Ze=Math.max(Dt,0);let at=Xq.getSilentFrame(t.parsedCodec||t.manifestCodec||t.codec,t.channelCount);at||(this.logger.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),at=dt.unit.subarray()),k.splice(ut,0,{unit:at,pts:Ze}),Dt+=b,ut++}}dt.pts=Dt,Dt+=b}}let Re=null,Be=null,j,M=0,Z=k.length;for(;Z--;)M+=k[Z].unit.byteLength;for(let Xe=0,ut=k.length;Xe<ut;Xe++){const Dt=k[Xe],dt=Dt.unit;let Et=Dt.pts;if(Be!==null){const mn=w[Xe-1];mn.duration=Math.round((Et-Be)/m)}else if(r&&t.segmentCodec==="aac"&&(Et=Y),Re=Et,M>0){M+=U;try{j=new Uint8Array(M)}catch(mn){this.observer.emit(He.ERROR,He.ERROR,{type:Hi.MUX_ERROR,details:pn.REMUX_ALLOC_ERROR,fatal:!1,error:mn,bytes:M,reason:`fail allocating audio mdat ${M}`});return}A||(new DataView(j.buffer).setUint32(0,M),j.set(ln.types.mdat,4))}else return;j.set(dt,U);const Rt=dt.byteLength;U+=Rt,w.push(H2(!0,y,Rt,0)),Be=Et}const K=w.length;if(!K)return;const x=w[w.length-1];this.nextAudioPts=Y=Be+m*x.duration;const ue=A?new Uint8Array(0):ln.moof(t.sequenceNumber++,Re/m,hs({},t,{samples:w}));t.samples=[];const $e=Re/f,xe=Y/f,et={data1:ue,data2:j,startPTS:$e,endPTS:xe,startDTS:$e,endDTS:xe,type:"audio",hasAudio:!0,hasVideo:!1,nb:K};return this.isAudioContiguous=!0,et}}function Tu(u,t){let n;if(t===null)return u;for(t<u?n=-8589934592:n=8589934592;Math.abs(u-t)>4294967296;)u+=n;return u}function iH(u){for(let t=0;t<u.length;t++)if(u[t].key)return t;return-1}function sN(u,t,n,r){const l=u.samples.length;if(!l)return;const d=u.inputTimeScale;for(let p=0;p<l;p++){const m=u.samples[p];m.pts=Tu(m.pts-n.baseTime*d/n.timescale,t*d)/d,m.dts=Tu(m.dts-r.baseTime*d/r.timescale,t*d)/d}const f=u.samples;return u.samples=[],{samples:f}}function aN(u,t,n){const r=u.samples.length;if(!r)return;const l=u.inputTimeScale;for(let f=0;f<r;f++){const p=u.samples[f];p.pts=Tu(p.pts-n.baseTime*l/n.timescale,t*l)/l}u.samples.sort((f,p)=>f.pts-p.pts);const d=u.samples;return u.samples=[],{samples:d}}class rH{constructor(t,n,r,l){this.logger=void 0,this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null,this.logger=l}destroy(){}resetTimeStamp(t){this.initPTS=t,this.lastEndTime=null}resetNextTimestamp(){this.lastEndTime=null}resetInitSegment(t,n,r,l){this.audioCodec=n,this.videoCodec=r,this.generateInitSegment($5(t,l)),this.emitInitSegment=!0}generateInitSegment(t){let{audioCodec:n,videoCodec:r}=this;if(!(t!=null&&t.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const l=this.initData=gM(t);l.audio&&(n=G2(l.audio,fs.AUDIO)),l.video&&(r=G2(l.video,fs.VIDEO));const d={};l.audio&&l.video?d.audiovideo={container:"video/mp4",codec:n+","+r,supplemental:l.video.supplemental,initSegment:t,id:"main"}:l.audio?d.audio={container:"audio/mp4",codec:n,initSegment:t,id:"audio"}:l.video?d.video={container:"video/mp4",codec:r,supplemental:l.video.supplemental,initSegment:t,id:"main"}:this.logger.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=d}remux(t,n,r,l,d,f){var p,m;let{initPTS:y,lastEndTime:b}=this;const _={audio:void 0,video:void 0,text:l,id3:r,initSegment:void 0};xi(b)||(b=this.lastEndTime=d||0);const A=n.samples;if(!(A!=null&&A.length))return _;const w={initPTS:void 0,timescale:1};let T=this.initData;if((p=T)!=null&&p.length||(this.generateInitSegment(A),T=this.initData),!((m=T)!=null&&m.length))return this.logger.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),_;this.emitInitSegment&&(w.tracks=this.initTracks,this.emitInitSegment=!1);const k=Y5(A,T),U=K5(T,A),Y=U===null?d:U;(f||!y)&&(sH(y,Y,d,k)||w.timescale!==y.timescale)&&(w.initPTS=Y-d,y&&y.timescale===1&&this.logger.warn(`Adjusting initPTS @${d} from ${y.baseTime/y.timescale} to ${w.initPTS}`),this.initPTS=y={baseTime:w.initPTS,timescale:1});const se=t?Y-y.baseTime/y.timescale:b,te=se+k;X5(T,A,y.baseTime/y.timescale),k>0?this.lastEndTime=te:(this.logger.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const Re=!!T.audio,Be=!!T.video;let j="";Re&&(j+="audio"),Be&&(j+="video");const M={data1:A,startPTS:se,startDTS:se,endPTS:te,endDTS:te,type:j,hasAudio:Re,hasVideo:Be,nb:1,dropped:0};return _.audio=M.type==="audio"?M:void 0,_.video=M.type!=="audio"?M:void 0,_.initSegment=w,_.id3=sN(r,d,y,y),l.samples.length&&(_.text=aN(l,d,y)),_}}function sH(u,t,n,r){if(u===null)return!0;const l=Math.max(r,1),d=t-u.baseTime/u.timescale;return Math.abs(d-n)>l}function G2(u,t){const n=u==null?void 0:u.codec;return n&&n.length>4?n:t===fs.AUDIO?n==="ec-3"||n==="ac-3"||n==="alac"?n:n==="fLaC"||n==="Opus"?eE(n,!1):(Gr.warn(`Unhandled audio codec "${n}" in mp4 MAP`),n||"mp4a"):(Gr.warn(`Unhandled video codec "${n}" in mp4 MAP`),n||"avc1")}let Rd;try{Rd=self.performance.now.bind(self.performance)}catch{Rd=Date.now}const UT=[{demux:$q,remux:rH},{demux:wf,remux:FT},{demux:qq,remux:FT},{demux:Gq,remux:FT}];UT.splice(2,0,{demux:Hq,remux:FT});class V2{constructor(t,n,r,l,d,f){this.asyncResult=!1,this.logger=void 0,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=t,this.typeSupported=n,this.config=r,this.id=d,this.logger=f}configure(t){this.transmuxConfig=t,this.decrypter&&this.decrypter.reset()}push(t,n,r,l){const d=r.transmuxing;d.executeStart=Rd();let f=new Uint8Array(t);const{currentTransmuxState:p,transmuxConfig:m}=this;l&&(this.currentTransmuxState=l);const{contiguous:y,discontinuity:b,trackSwitch:_,accurateTimeOffset:A,timeOffset:w,initSegmentChange:T}=l||p,{audioCodec:k,videoCodec:U,defaultInitPts:Y,duration:se,initSegmentData:te}=m,Re=aH(f,n);if(Re&&sg(Re.method)){const Z=this.getDecrypter(),K=fw(Re.method);if(Z.isSync()){let x=Z.softwareDecrypt(f,Re.key.buffer,Re.iv.buffer,K);if(r.part>-1){const $e=Z.flush();x=$e&&$e.buffer}if(!x)return d.executeEnd=Rd(),yx(r);f=new Uint8Array(x)}else return this.asyncResult=!0,this.decryptionPromise=Z.webCryptoDecrypt(f,Re.key.buffer,Re.iv.buffer,K).then(x=>{const ue=this.push(x,null,r);return this.decryptionPromise=null,ue}),this.decryptionPromise}const Be=this.needsProbing(b,_);if(Be){const Z=this.configureTransmuxer(f);if(Z)return this.logger.warn(`[transmuxer] ${Z.message}`),this.observer.emit(He.ERROR,He.ERROR,{type:Hi.MEDIA_ERROR,details:pn.FRAG_PARSING_ERROR,fatal:!1,error:Z,reason:Z.message}),d.executeEnd=Rd(),yx(r)}(b||_||T||Be)&&this.resetInitSegment(te,k,U,se,n),(b||T||Be)&&this.resetInitialTimestamp(Y),y||this.resetContiguity();const j=this.transmux(f,Re,w,A,r);this.asyncResult=Ry(j);const M=this.currentTransmuxState;return M.contiguous=!0,M.discontinuity=!1,M.trackSwitch=!1,d.executeEnd=Rd(),j}flush(t){const n=t.transmuxing;n.executeStart=Rd();const{decrypter:r,currentTransmuxState:l,decryptionPromise:d}=this;if(d)return this.asyncResult=!0,d.then(()=>this.flush(t));const f=[],{timeOffset:p}=l;if(r){const _=r.flush();_&&f.push(this.push(_.buffer,null,t))}const{demuxer:m,remuxer:y}=this;if(!m||!y){n.executeEnd=Rd();const _=[yx(t)];return this.asyncResult?Promise.resolve(_):_}const b=m.flush(p);return Ry(b)?(this.asyncResult=!0,b.then(_=>(this.flushRemux(f,_,t),f))):(this.flushRemux(f,b,t),this.asyncResult?Promise.resolve(f):f)}flushRemux(t,n,r){const{audioTrack:l,videoTrack:d,id3Track:f,textTrack:p}=n,{accurateTimeOffset:m,timeOffset:y}=this.currentTransmuxState;this.logger.log(`[transmuxer.ts]: Flushed ${this.id} sn: ${r.sn}${r.part>-1?" part: "+r.part:""} of ${this.id===Ui.MAIN?"level":"track"} ${r.level}`);const b=this.remuxer.remux(l,d,f,p,y,m,!0,this.id);t.push({remuxResult:b,chunkMeta:r}),r.transmuxing.executeEnd=Rd()}resetInitialTimestamp(t){const{demuxer:n,remuxer:r}=this;!n||!r||(n.resetTimeStamp(t),r.resetTimeStamp(t))}resetContiguity(){const{demuxer:t,remuxer:n}=this;!t||!n||(t.resetContiguity(),n.resetNextTimestamp())}resetInitSegment(t,n,r,l,d){const{demuxer:f,remuxer:p}=this;!f||!p||(f.resetInitSegment(t,n,r,l),p.resetInitSegment(t,n,r,d))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(t,n,r,l,d){let f;return n&&n.method==="SAMPLE-AES"?f=this.transmuxSampleAes(t,n,r,l,d):f=this.transmuxUnencrypted(t,r,l,d),f}transmuxUnencrypted(t,n,r,l){const{audioTrack:d,videoTrack:f,id3Track:p,textTrack:m}=this.demuxer.demux(t,n,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(d,f,p,m,n,r,!1,this.id),chunkMeta:l}}transmuxSampleAes(t,n,r,l,d){return this.demuxer.demuxSampleAes(t,n,r).then(f=>({remuxResult:this.remuxer.remux(f.audioTrack,f.videoTrack,f.id3Track,f.textTrack,r,l,!1,this.id),chunkMeta:d}))}configureTransmuxer(t){const{config:n,observer:r,typeSupported:l}=this;let d;for(let _=0,A=UT.length;_<A;_++){var f;if((f=UT[_].demux)!=null&&f.probe(t,this.logger)){d=UT[_];break}}if(!d)return new Error("Failed to find demuxer by probing fragment data");const p=this.demuxer,m=this.remuxer,y=d.remux,b=d.demux;(!m||!(m instanceof y))&&(this.remuxer=new y(r,n,l,this.logger)),(!p||!(p instanceof b))&&(this.demuxer=new b(r,n,l,this.logger),this.probe=b.probe)}needsProbing(t,n){return!this.demuxer||!this.remuxer||t||n}getDecrypter(){let t=this.decrypter;return t||(t=this.decrypter=new cw(this.config)),t}}function aH(u,t){let n=null;return u.byteLength>0&&(t==null?void 0:t.key)!=null&&t.iv!==null&&t.method!=null&&(n=t),n}const yx=u=>({remuxResult:{},chunkMeta:u});function Ry(u){return"then"in u&&u.then instanceof Function}class oH{constructor(t,n,r,l,d){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=t,this.videoCodec=n,this.initSegmentData=r,this.duration=l,this.defaultInitPts=d||null}}class lH{constructor(t,n,r,l,d,f){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=t,this.contiguous=n,this.accurateTimeOffset=r,this.trackSwitch=l,this.timeOffset=d,this.initSegmentChange=f}}let $2=0;class oN{constructor(t,n,r,l){this.error=null,this.hls=void 0,this.id=void 0,this.instanceNo=$2++,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.onWorkerMessage=m=>{const y=m.data,b=this.hls;if(!(!b||!(y!=null&&y.event)||y.instanceNo!==this.instanceNo))switch(y.event){case"init":{var _;const A=(_=this.workerContext)==null?void 0:_.objectURL;A&&self.URL.revokeObjectURL(A);break}case"transmuxComplete":{this.handleTransmuxComplete(y.data);break}case"flush":{this.onFlush(y.data);break}case"workerLog":{b.logger[y.data.logType]&&b.logger[y.data.logType](y.data.message);break}default:{y.data=y.data||{},y.data.frag=this.frag,y.data.part=this.part,y.data.id=this.id,b.trigger(y.event,y.data);break}}},this.onWorkerError=m=>{if(!this.hls)return;const y=new Error(`${m.message}  (${m.filename}:${m.lineno})`);this.hls.config.enableWorker=!1,this.hls.logger.warn(`Error in "${this.id}" Web Worker, fallback to inline`),this.hls.trigger(He.ERROR,{type:Hi.OTHER_ERROR,details:pn.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:y})};const d=t.config;this.hls=t,this.id=n,this.useWorker=!!d.enableWorker,this.onTransmuxComplete=r,this.onFlush=l;const f=(m,y)=>{y=y||{},y.frag=this.frag||void 0,m===He.ERROR&&(y=y,y.parent=this.id,y.part=this.part,this.error=y.error),this.hls.trigger(m,y)};this.observer=new gw,this.observer.on(He.FRAG_DECRYPTED,f),this.observer.on(He.ERROR,f);const p=l2(d.preferManagedMediaSource);if(this.useWorker&&typeof Worker<"u"){const m=this.hls.logger;if(d.workerPath||dq()){try{d.workerPath?(m.log(`loading Web Worker ${d.workerPath} for "${n}"`),this.workerContext=hq(d.workerPath)):(m.log(`injecting Web Worker for "${n}"`),this.workerContext=fq());const{worker:b}=this.workerContext;b.addEventListener("message",this.onWorkerMessage),b.addEventListener("error",this.onWorkerError),b.postMessage({instanceNo:this.instanceNo,cmd:"init",typeSupported:p,id:n,config:Bs(d)})}catch(b){m.warn(`Error setting up "${n}" Web Worker, fallback to inline`,b),this.terminateWorker(),this.error=null,this.transmuxer=new V2(this.observer,p,d,"",n,t.logger)}return}}this.transmuxer=new V2(this.observer,p,d,"",n,t.logger)}reset(){if(this.frag=null,this.part=null,this.workerContext){const t=this.instanceNo;this.instanceNo=$2++;const n=this.hls.config,r=l2(n.preferManagedMediaSource);this.workerContext.worker.postMessage({instanceNo:this.instanceNo,cmd:"reset",resetNo:t,typeSupported:r,id:this.id,config:Bs(n)})}}terminateWorker(){if(this.workerContext){const{worker:t}=this.workerContext;this.workerContext=null,t.removeEventListener("message",this.onWorkerMessage),t.removeEventListener("error",this.onWorkerError),pq(this.hls.config.workerPath)}}destroy(){if(this.workerContext)this.terminateWorker(),this.onWorkerMessage=this.onWorkerError=null;else{const n=this.transmuxer;n&&(n.destroy(),this.transmuxer=null)}const t=this.observer;t&&t.removeAllListeners(),this.frag=null,this.part=null,this.observer=null,this.hls=null}push(t,n,r,l,d,f,p,m,y,b){var _,A;y.transmuxing.start=self.performance.now();const{instanceNo:w,transmuxer:T}=this,k=f?f.start:d.start,U=d.decryptdata,Y=this.frag,se=!(Y&&d.cc===Y.cc),te=!(Y&&y.level===Y.level),Re=Y?y.sn-Y.sn:-1,Be=this.part?y.part-this.part.index:-1,j=Re===0&&y.id>1&&y.id===(Y==null?void 0:Y.stats.chunkCount),M=!te&&(Re===1||Re===0&&(Be===1||j&&Be<=0)),Z=self.performance.now();(te||Re||d.stats.parsing.start===0)&&(d.stats.parsing.start=Z),f&&(Be||!M)&&(f.stats.parsing.start=Z);const K=!(Y&&((_=d.initSegment)==null?void 0:_.url)===((A=Y.initSegment)==null?void 0:A.url)),x=new lH(se,M,m,te,k,K);if(!M||se||K){this.hls.logger.log(`[transmuxer-interface]: Starting new transmux session for ${d.type} sn: ${y.sn}${y.part>-1?" part: "+y.part:""} ${this.id===Ui.MAIN?"level":"track"}: ${y.level} id: ${y.id}
        discontinuity: ${se}
        trackSwitch: ${te}
        contiguous: ${M}
        accurateTimeOffset: ${m}
        timeOffset: ${k}
        initSegmentChange: ${K}`);const ue=new oH(r,l,n,p,b);this.configureTransmuxer(ue)}if(this.frag=d,this.part=f,this.workerContext)this.workerContext.worker.postMessage({instanceNo:w,cmd:"demux",data:t,decryptdata:U,chunkMeta:y,state:x},t instanceof ArrayBuffer?[t]:[]);else if(T){const ue=T.push(t,U,y,x);Ry(ue)?ue.then($e=>{this.handleTransmuxComplete($e)}).catch($e=>{this.transmuxerError($e,y,"transmuxer-interface push error")}):this.handleTransmuxComplete(ue)}}flush(t){t.transmuxing.start=self.performance.now();const{instanceNo:n,transmuxer:r}=this;if(this.workerContext)this.workerContext.worker.postMessage({instanceNo:n,cmd:"flush",chunkMeta:t});else if(r){const l=r.flush(t);Ry(l)?l.then(d=>{this.handleFlushResult(d,t)}).catch(d=>{this.transmuxerError(d,t,"transmuxer-interface flush error")}):this.handleFlushResult(l,t)}}transmuxerError(t,n,r){this.hls&&(this.error=t,this.hls.trigger(He.ERROR,{type:Hi.MEDIA_ERROR,details:pn.FRAG_PARSING_ERROR,chunkMeta:n,frag:this.frag||void 0,part:this.part||void 0,fatal:!1,error:t,err:t,reason:r}))}handleFlushResult(t,n){t.forEach(r=>{this.handleTransmuxComplete(r)}),this.onFlush(n)}configureTransmuxer(t){const{instanceNo:n,transmuxer:r}=this;this.workerContext?this.workerContext.worker.postMessage({instanceNo:n,cmd:"configure",config:t}):r&&r.configure(t)}handleTransmuxComplete(t){t.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(t)}}const K2=100;class uH extends pw{constructor(t,n,r){super(t,n,r,"audio-stream-controller",Ui.AUDIO),this.mainAnchor=null,this.mainFragLoading=null,this.audioOnly=!1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.resetItem()}resetItem(){this.mainDetails=this.mainAnchor=this.mainFragLoading=this.bufferedTrack=this.switchingTrack=this.waitingData=this.cachedTrackLoadedData=null}registerListeners(){super.registerListeners();const{hls:t}=this;t.on(He.LEVEL_LOADED,this.onLevelLoaded,this),t.on(He.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),t.on(He.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.on(He.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.on(He.BUFFER_RESET,this.onBufferReset,this),t.on(He.BUFFER_CREATED,this.onBufferCreated,this),t.on(He.BUFFER_FLUSHING,this.onBufferFlushing,this),t.on(He.BUFFER_FLUSHED,this.onBufferFlushed,this),t.on(He.INIT_PTS_FOUND,this.onInitPtsFound,this),t.on(He.FRAG_LOADING,this.onFragLoading,this),t.on(He.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){const{hls:t}=this;t&&(super.unregisterListeners(),t.off(He.LEVEL_LOADED,this.onLevelLoaded,this),t.off(He.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),t.off(He.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.off(He.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.off(He.BUFFER_RESET,this.onBufferReset,this),t.off(He.BUFFER_CREATED,this.onBufferCreated,this),t.off(He.BUFFER_FLUSHING,this.onBufferFlushing,this),t.off(He.BUFFER_FLUSHED,this.onBufferFlushed,this),t.off(He.INIT_PTS_FOUND,this.onInitPtsFound,this),t.off(He.FRAG_LOADING,this.onFragLoading,this),t.off(He.FRAG_BUFFERED,this.onFragBuffered,this))}onInitPtsFound(t,{frag:n,id:r,initPTS:l,timescale:d}){if(r===Ui.MAIN){const f=n.cc,p=this.fragCurrent;if(this.initPTS[f]={baseTime:l,timescale:d},this.log(`InitPTS for cc: ${f} found from main: ${l}/${d}`),this.mainAnchor=n,this.state===Gn.WAITING_INIT_PTS){const m=this.waitingData;(!m&&!this.loadingParts||m&&m.frag.cc!==f)&&(this.nextLoadPosition=this.findSyncFrag(n).start),this.tick()}else!this.hls.hasEnoughToStart&&p&&p.cc!==f?(this.startFragRequested=!1,this.nextLoadPosition=this.findSyncFrag(n).start,p.abortRequests(),this.resetLoadingState()):this.state===Gn.IDLE&&this.tick()}}findSyncFrag(t){const n=this.getLevelDetails(),r=t.cc;return A6(n,r,t)||n&&wM(n.fragments,r)||t}startLoad(t,n){if(!this.levels){this.startPosition=t,this.state=Gn.STOPPED;return}const r=this.lastCurrentTime;this.stopLoad(),this.setInterval(K2),r>0&&t===-1?(this.log(`Override startPosition with lastCurrentTime @${r.toFixed(3)}`),t=r,this.state=Gn.IDLE):this.state=Gn.WAITING_TRACK,this.nextLoadPosition=this.lastCurrentTime=t+this.timelineOffset,this.startPosition=n?-1:t,this.tick()}doTick(){switch(this.state){case Gn.IDLE:this.doTickIdle();break;case Gn.WAITING_TRACK:{const{levels:n,trackId:r}=this,l=n==null?void 0:n[r],d=l==null?void 0:l.details;if(d&&!this.waitForLive(l)){if(this.waitForCdnTuneIn(d))break;this.state=Gn.WAITING_INIT_PTS}break}case Gn.FRAG_LOADING_WAITING_RETRY:{var t;const n=performance.now(),r=this.retryDate;if(!r||n>=r||(t=this.media)!=null&&t.seeking){const{levels:l,trackId:d}=this;this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded((l==null?void 0:l[d])||null),this.state=Gn.IDLE}break}case Gn.WAITING_INIT_PTS:{const n=this.waitingData;if(n){const{frag:r,part:l,cache:d,complete:f}=n,p=this.mainAnchor;if(this.initPTS[r.cc]!==void 0){this.waitingData=null,this.state=Gn.FRAG_LOADING;const m=d.flush().buffer,y={frag:r,part:l,payload:m,networkDetails:null};this._handleFragmentLoadProgress(y),f&&super._handleFragmentLoadComplete(y)}else p&&p.cc!==n.frag.cc&&(this.log(`Waiting fragment cc (${r.cc}) cancelled because video is at cc ${p.cc}`),this.nextLoadPosition=this.findSyncFrag(p).start,this.clearWaitingFragment())}else this.state=Gn.IDLE}}this.onTickEnd()}clearWaitingFragment(){const t=this.waitingData;t&&(this.hls.hasEnoughToStart||(this.startFragRequested=!1),this.fragmentTracker.removeFragment(t.frag),this.waitingData=null,this.state!==Gn.STOPPED&&(this.state=Gn.IDLE))}resetLoadingState(){this.clearWaitingFragment(),super.resetLoadingState()}onTickEnd(){const{media:t}=this;t!=null&&t.readyState&&(this.lastCurrentTime=t.currentTime)}doTickIdle(){var t;const{hls:n,levels:r,media:l,trackId:d}=this,f=n.config;if(!this.buffering||!l&&!this.primaryPrefetch&&(this.startFragRequested||!f.startFragPrefetch)||!(r!=null&&r[d]))return;const p=r[d],m=p.details;if(!m||this.waitForLive(p)||this.waitForCdnTuneIn(m)){this.state=Gn.WAITING_TRACK,this.startFragRequested=!1;return}const y=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&y&&(this.bufferFlushed=!1,this.afterBufferFlushed(y,fs.AUDIO,Ui.AUDIO));const b=this.getFwdBufferInfo(y,Ui.AUDIO);if(b===null)return;if(!this.switchingTrack&&this._streamEnded(b,m)){n.trigger(He.BUFFER_EOS,{type:"audio"}),this.state=Gn.ENDED;return}const _=b.len,A=n.maxBufferLength,w=m.fragments,T=w[0].start,k=this.getLoadPosition(),U=this.flushing?k:b.end;if(this.switchingTrack&&l){const te=k;m.PTSKnown&&te<T&&(b.end>T||b.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),l.currentTime=T+.05)}if(_>=A&&!this.switchingTrack&&U<w[w.length-1].start)return;let Y=this.getNextFragment(U,m);if(Y&&this.isLoopLoading(Y,U)&&(Y=this.getNextFragmentLoopLoading(Y,m,b,Ui.MAIN,A)),!Y){this.bufferFlushed=!0;return}let se=((t=this.mainFragLoading)==null?void 0:t.frag)||null;if(!this.audioOnly&&this.startFragRequested&&se&&Ha(Y)&&!Y.endList&&(!m.live||!this.loadingParts&&U<this.hls.liveSyncPosition)&&(this.fragmentTracker.getState(se)===Ca.OK&&(this.mainFragLoading=se=null),se&&Ha(se))){if(Y.start>se.end){const Re=this.fragmentTracker.getFragAtPos(U,Ui.MAIN);Re&&Re.end>se.end&&(se=Re,this.mainFragLoading={frag:Re,targetBufferTime:null})}if(Y.start>se.end)return}this.loadFragment(Y,p,U)}onMediaDetaching(t,n){this.bufferFlushed=this.flushing=!1,super.onMediaDetaching(t,n)}onAudioTracksUpdated(t,{audioTracks:n}){this.resetTransmuxer(),this.levels=n.map(r=>new wy(r))}onAudioTrackSwitching(t,n){const r=!!n.url;this.trackId=n.id;const{fragCurrent:l}=this;l&&(l.abortRequests(),this.removeUnbufferedFrags(l.start)),this.resetLoadingState(),r?(this.switchingTrack=n,this.flushAudioIfNeeded(n),this.state!==Gn.STOPPED&&(this.setInterval(K2),this.state=Gn.IDLE,this.tick())):(this.resetTransmuxer(),this.switchingTrack=null,this.bufferedTrack=n,this.clearInterval())}onManifestLoading(){super.onManifestLoading(),this.bufferFlushed=this.flushing=this.audioOnly=!1,this.resetItem(),this.trackId=-1}onLevelLoaded(t,n){this.mainDetails=n.details;const r=this.cachedTrackLoadedData;r&&(this.cachedTrackLoadedData=null,this.onAudioTrackLoaded(He.AUDIO_TRACK_LOADED,r))}onAudioTrackLoaded(t,n){var r;const{levels:l}=this,{details:d,id:f,groupId:p,track:m}=n;if(!l){this.warn(`Audio tracks reset while loading track ${f} "${m.name}" of "${p}"`);return}const y=this.mainDetails;if(!y||d.endCC>y.endCC||y.expired){this.cachedTrackLoadedData=n,this.state!==Gn.STOPPED&&(this.state=Gn.WAITING_TRACK);return}this.cachedTrackLoadedData=null,this.log(`Audio track ${f} "${m.name}" of "${p}" loaded [${d.startSN},${d.endSN}]${d.lastPartSn?`[part-${d.lastPartSn}-${d.lastPartIndex}]`:""},duration:${d.totalduration}`);const b=l[f];let _=0;if(d.live||(r=b.details)!=null&&r.live){if(this.checkLiveUpdate(d),d.deltaUpdateFailed)return;if(b.details){var A;_=this.alignPlaylists(d,b.details,(A=this.levelLastLoaded)==null?void 0:A.details)}d.alignedSliding||(zM(d,y),d.alignedSliding||aE(d,y),_=d.fragmentStart)}b.details=d,this.levelLastLoaded=b,this.startFragRequested||this.setStartPosition(y,_),this.hls.trigger(He.AUDIO_TRACK_UPDATED,{details:d,id:f,groupId:n.groupId}),this.state===Gn.WAITING_TRACK&&!this.waitForCdnTuneIn(d)&&(this.state=Gn.IDLE),this.tick()}_handleFragmentLoadProgress(t){var n;const r=t.frag,{part:l,payload:d}=t,{config:f,trackId:p,levels:m}=this;if(!m){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${r.sn} of level ${r.level} will not be buffered`);return}const y=m[p];if(!y){this.warn("Audio track is undefined on fragment load progress");return}const b=y.details;if(!b){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(r.start);return}const _=f.defaultAudioCodec||y.audioCodec||"mp4a.40.2";let A=this.transmuxer;A||(A=this.transmuxer=new oN(this.hls,Ui.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const w=this.initPTS[r.cc],T=(n=r.initSegment)==null?void 0:n.data;if(w!==void 0){const U=l?l.index:-1,Y=U!==-1,se=new dw(r.level,r.sn,r.stats.chunkCount,d.byteLength,U,Y);A.push(d,T,_,"",r,l,b.totalduration,!1,se,w)}else{this.log(`Unknown video PTS for cc ${r.cc}, waiting for video PTS before demuxing audio frag ${r.sn} of [${b.startSN} ,${b.endSN}],track ${p}`);const{cache:k}=this.waitingData=this.waitingData||{frag:r,part:l,cache:new jM,complete:!1};k.push(new Uint8Array(d)),this.state!==Gn.STOPPED&&(this.state=Gn.WAITING_INIT_PTS)}}_handleFragmentLoadComplete(t){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(t)}onBufferReset(){this.mediaBuffer=null}onBufferCreated(t,n){this.bufferFlushed=this.flushing=!1;const r=n.tracks.audio;r&&(this.mediaBuffer=r.buffer||null)}onFragLoading(t,n){!this.audioOnly&&n.frag.type===Ui.MAIN&&Ha(n.frag)&&(this.mainFragLoading=n,this.state===Gn.IDLE&&this.tick())}onFragBuffered(t,n){const{frag:r,part:l}=n;if(r.type!==Ui.AUDIO){!this.audioOnly&&r.type===Ui.MAIN&&!r.elementaryStreams.video&&!r.elementaryStreams.audiovideo&&(this.audioOnly=!0,this.mainFragLoading=null);return}if(this.fragContextChanged(r)){this.warn(`Fragment ${r.sn}${l?" p: "+l.index:""} of level ${r.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(Ha(r)){this.fragPrevious=r;const d=this.switchingTrack;d&&(this.bufferedTrack=d,this.switchingTrack=null,this.hls.trigger(He.AUDIO_TRACK_SWITCHED,as({},d)))}this.fragBufferedComplete(r,l),this.media&&this.tick()}onError(t,n){var r;if(n.fatal){this.state=Gn.ERROR;return}switch(n.details){case pn.FRAG_GAP:case pn.FRAG_PARSING_ERROR:case pn.FRAG_DECRYPT_ERROR:case pn.FRAG_LOAD_ERROR:case pn.FRAG_LOAD_TIMEOUT:case pn.KEY_LOAD_ERROR:case pn.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Ui.AUDIO,n);break;case pn.AUDIO_TRACK_LOAD_ERROR:case pn.AUDIO_TRACK_LOAD_TIMEOUT:case pn.LEVEL_PARSING_ERROR:!n.levelRetry&&this.state===Gn.WAITING_TRACK&&((r=n.context)==null?void 0:r.type)===Fr.AUDIO_TRACK&&(this.state=Gn.IDLE);break;case pn.BUFFER_ADD_CODEC_ERROR:case pn.BUFFER_APPEND_ERROR:if(n.parent!=="audio")return;this.resetLoadingState();break;case pn.BUFFER_FULL_ERROR:if(n.parent!=="audio")return;this.reduceLengthAndFlushBuffer(n)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case pn.INTERNAL_EXCEPTION:this.recoverWorkerError(n);break}}onBufferFlushing(t,{type:n}){n!==fs.VIDEO&&(this.flushing=!0)}onBufferFlushed(t,{type:n}){if(n!==fs.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===Gn.ENDED&&(this.state=Gn.IDLE);const r=this.mediaBuffer||this.media;r&&(this.afterBufferFlushed(r,n,Ui.AUDIO),this.tick())}}_handleTransmuxComplete(t){var n;const r="audio",{hls:l}=this,{remuxResult:d,chunkMeta:f}=t,p=this.getCurrentContext(f);if(!p){this.resetWhenMissingContext(f);return}const{frag:m,part:y,level:b}=p,{details:_}=b,{audio:A,text:w,id3:T,initSegment:k}=d;if(this.fragContextChanged(m)||!_){this.fragmentTracker.removeFragment(m);return}if(this.state=Gn.PARSING,this.switchingTrack&&A&&this.completeAudioSwitch(this.switchingTrack),k!=null&&k.tracks){const U=m.initSegment||m;this._bufferInitSegment(b,k.tracks,U,f),l.trigger(He.FRAG_PARSING_INIT_SEGMENT,{frag:U,id:r,tracks:k.tracks})}if(A){const{startPTS:U,endPTS:Y,startDTS:se,endDTS:te}=A;y&&(y.elementaryStreams[fs.AUDIO]={startPTS:U,endPTS:Y,startDTS:se,endDTS:te}),m.setElementaryStreamInfo(fs.AUDIO,U,Y,se,te),this.bufferFragmentData(A,m,y,f)}if(T!=null&&(n=T.samples)!=null&&n.length){const U=hs({id:r,frag:m,details:_},T);l.trigger(He.FRAG_PARSING_METADATA,U)}if(w){const U=hs({id:r,frag:m,details:_},w);l.trigger(He.FRAG_PARSING_USERDATA,U)}}_bufferInitSegment(t,n,r,l){if(this.state!==Gn.PARSING||(n.video&&delete n.video,n.audiovideo&&delete n.audiovideo,!n.audio))return;const d=n.audio;d.id=Ui.AUDIO;const f=t.audioCodec;this.log(`Init audio buffer, container:${d.container}, codecs[level/parsed]=[${f}/${d.codec}]`),f&&f.split(",").length===1&&(d.levelCodec=f),this.hls.trigger(He.BUFFER_CODECS,n);const p=d.initSegment;if(p!=null&&p.byteLength){const m={type:"audio",frag:r,part:null,chunkMeta:l,parent:r.type,data:p};this.hls.trigger(He.BUFFER_APPENDING,m)}this.tickImmediate()}loadFragment(t,n,r){const l=this.fragmentTracker.getState(t);if(this.switchingTrack||l===Ca.NOT_LOADED||l===Ca.PARTIAL){var d;if(!Ha(t))this._loadInitSegment(t,n);else if((d=n.details)!=null&&d.live&&!this.initPTS[t.cc]){this.log(`Waiting for video PTS in continuity counter ${t.cc} of live stream before loading audio fragment ${t.sn} of level ${this.trackId}`),this.state=Gn.WAITING_INIT_PTS;const f=this.mainDetails;f&&f.fragmentStart!==n.details.fragmentStart&&aE(n.details,f)}else super.loadFragment(t,n,r)}else this.clearTrackerIfNeeded(t)}flushAudioIfNeeded(t){if(this.media&&this.bufferedTrack){const{name:n,lang:r,assocLang:l,characteristics:d,audioCodec:f,channels:p}=this.bufferedTrack;Rh({name:n,lang:r,assocLang:l,characteristics:d,audioCodec:f,channels:p},t,Ah)||(nE(t.url,this.hls)?(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null):this.bufferedTrack=t)}}completeAudioSwitch(t){const{hls:n}=this;this.flushAudioIfNeeded(t),this.bufferedTrack=t,this.switchingTrack=null,n.trigger(He.AUDIO_TRACK_SWITCHED,as({},t))}}class _w extends Bd{constructor(t,n){super(n,t.logger),this.hls=void 0,this.canLoad=!1,this.timer=-1,this.hls=t}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){this.timer!==-1&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(t,n,r){const l=n==null?void 0:n.renditionReports;if(l){let d=-1;for(let f=0;f<l.length;f++){const p=l[f];let m;try{m=new self.URL(p.URI,n.url).href}catch(y){this.warn(`Could not construct new URL for Rendition Report: ${y}`),m=p.URI||""}if(m===t){d=f;break}else m===t.substring(0,m.length)&&(d=f)}if(d!==-1){const f=l[d],p=parseInt(f["LAST-MSN"])||(n==null?void 0:n.lastPartSn);let m=parseInt(f["LAST-PART"])||(n==null?void 0:n.lastPartIndex);if(this.hls.config.lowLatencyMode){const b=Math.min(n.age-n.partTarget,n.targetduration);m>=0&&b>n.partTarget&&(m+=1)}const y=r&&c2(r);return new d2(p,m>=0?m:void 0,y)}}}loadPlaylist(t){this.clearTimer()}loadingPlaylist(t,n){this.clearTimer()}shouldLoadPlaylist(t){return this.canLoad&&!!t&&!!t.url&&(!t.details||t.details.live)}getUrlWithDirectives(t,n){if(n)try{return n.addDirectives(t)}catch(r){this.warn(`Could not construct new URL with HLS Delivery Directives: ${r}`)}return t}playlistLoaded(t,n,r){const{details:l,stats:d}=n,f=self.performance.now(),p=d.loading.first?Math.max(0,f-d.loading.first):0;l.advancedDateTime=Date.now()-p;const m=this.hls.config.timelineOffset;if(m!==l.appliedTimelineOffset){const b=Math.max(m||0,0);l.appliedTimelineOffset=b,l.fragments.forEach(_=>{_.start=_.playlistOffset+b})}if(l.live||r!=null&&r.live){const b="levelInfo"in n?n.levelInfo:n.track;if(l.reloaded(r),r&&l.fragments.length>0){tq(r,l);const se=l.playlistParsingError;if(se){this.warn(se);const te=this.hls;if(!te.config.ignorePlaylistParsingErrors){var y;const{networkDetails:Re}=n;te.trigger(He.ERROR,{type:Hi.NETWORK_ERROR,details:pn.LEVEL_PARSING_ERROR,fatal:!1,url:l.url,error:se,reason:se.message,level:n.level||void 0,parent:(y=l.fragments[0])==null?void 0:y.type,networkDetails:Re,stats:d});return}l.playlistParsingError=null}}l.requestScheduled===-1&&(l.requestScheduled=d.loading.start);const _=this.hls.mainForwardBufferInfo,A=_?_.end-_.len:0,w=(l.edge-A)*1e3,T=NM(l,w);if(l.requestScheduled+T<f?l.requestScheduled=f:l.requestScheduled+=T,this.log(`live playlist ${t} ${l.advanced?"REFRESHED "+l.lastPartSn+"-"+l.lastPartIndex:l.updated?"UPDATED":"MISSED"}`),!this.canLoad||!l.live)return;let k,U,Y;if(l.canBlockReload&&l.endSN&&l.advanced){const se=this.hls.config.lowLatencyMode,te=l.lastPartSn,Re=l.endSN,Be=l.lastPartIndex,j=Be!==-1,M=te===Re;j?M?(U=Re+1,Y=se?0:Be):(U=te,Y=se?Be+1:l.maxPartIndex):U=Re+1;const Z=l.age,K=Z+l.ageHeader;let x=Math.min(K-l.partTarget,l.targetduration*1.5);if(x>0){if(K>l.targetduration*3)this.log(`Playlist last advanced ${Z.toFixed(2)}s ago. Omitting segment and part directives.`),U=void 0,Y=void 0;else if(r!=null&&r.tuneInGoal&&K-l.partTarget>r.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${r.tuneInGoal} to: ${x} with playlist age: ${l.age}`),x=0;else{const ue=Math.floor(x/l.targetduration);if(U+=ue,Y!==void 0){const $e=Math.round(x%l.targetduration/l.partTarget);Y+=$e}this.log(`CDN Tune-in age: ${l.ageHeader}s last advanced ${Z.toFixed(2)}s goal: ${x} skip sn ${ue} to part ${Y}`)}l.tuneInGoal=x}if(k=this.getDeliveryDirectives(l,n.deliveryDirectives,U,Y),se||!M){l.requestScheduled=f,this.loadingPlaylist(b,k);return}}else(l.canBlockReload||l.canSkipUntil)&&(k=this.getDeliveryDirectives(l,n.deliveryDirectives,U,Y));k&&U!==void 0&&l.canBlockReload&&(l.requestScheduled=d.loading.first+Math.max(T-p*2,T/2)),this.scheduleLoading(b,k,l)}else this.clearTimer()}scheduleLoading(t,n,r){const l=r||t.details;if(!l){this.loadingPlaylist(t,n);return}const d=self.performance.now(),f=l.requestScheduled;if(d>=f){this.loadingPlaylist(t,n);return}const p=f-d;this.log(`reload live playlist ${t.name||t.bitrate+"bps"} in ${Math.round(p)} ms`),this.clearTimer(),this.timer=self.setTimeout(()=>this.loadingPlaylist(t,n),p)}getDeliveryDirectives(t,n,r,l){let d=c2(t);return n!=null&&n.skip&&t.deltaUpdateFailed&&(r=n.msn,l=n.part,d=OT.No),new d2(r,l,d)}checkRetry(t){const n=t.details,r=iE(t),l=t.errorAction,{action:d,retryCount:f=0,retryConfig:p}=l||{},m=!!l&&!!p&&(d===Co.RetryRequest||!l.resolved&&d===Co.SendAlternateToPenaltyBox);if(m){var y;if(f>=p.maxNumRetry)return!1;if(r&&(y=t.context)!=null&&y.deliveryDirectives)this.warn(`Retrying playlist loading ${f+1}/${p.maxNumRetry} after "${n}" without delivery-directives`),this.loadPlaylist();else{const b=uw(p,f);this.clearTimer(),this.timer=self.setTimeout(()=>this.loadPlaylist(),b),this.warn(`Retrying playlist loading ${f+1}/${p.maxNumRetry} after "${n}" in ${b}ms`)}t.levelRetry=!0,l.resolved=!0}return m}}function lN(u,t){if(u.length!==t.length)return!1;for(let n=0;n<u.length;n++)if(!Ly(u[n].attrs,t[n].attrs))return!1;return!0}function Ly(u,t,n){const r=u["STABLE-RENDITION-ID"];return r&&!n?r===t["STABLE-RENDITION-ID"]:!(n||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(l=>u[l]!==t[l])}function _A(u,t){return t.label.toLowerCase()===u.name.toLowerCase()&&(!t.language||t.language.toLowerCase()===(u.lang||"").toLowerCase())}class cH extends _w{constructor(t){super(t,"audio-track-controller"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:t}=this;t.on(He.MANIFEST_LOADING,this.onManifestLoading,this),t.on(He.MANIFEST_PARSED,this.onManifestParsed,this),t.on(He.LEVEL_LOADING,this.onLevelLoading,this),t.on(He.LEVEL_SWITCHING,this.onLevelSwitching,this),t.on(He.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.on(He.ERROR,this.onError,this)}unregisterListeners(){const{hls:t}=this;t.off(He.MANIFEST_LOADING,this.onManifestLoading,this),t.off(He.MANIFEST_PARSED,this.onManifestParsed,this),t.off(He.LEVEL_LOADING,this.onLevelLoading,this),t.off(He.LEVEL_SWITCHING,this.onLevelSwitching,this),t.off(He.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),t.off(He.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(t,n){this.tracks=n.audioTracks||[]}onAudioTrackLoaded(t,n){const{id:r,groupId:l,details:d}=n,f=this.tracksInGroup[r];if(!f||f.groupId!==l){this.warn(`Audio track with id:${r} and group:${l} not found in active group ${f==null?void 0:f.groupId}`);return}const p=f.details;f.details=n.details,this.log(`Audio track ${r} "${f.name}" lang:${f.lang} group:${l} loaded [${d.startSN}-${d.endSN}]`),r===this.trackId&&this.playlistLoaded(r,n,p)}onLevelLoading(t,n){this.switchLevel(n.level)}onLevelSwitching(t,n){this.switchLevel(n.level)}switchLevel(t){const n=this.hls.levels[t];if(!n)return;const r=n.audioGroups||null,l=this.groupIds;let d=this.currentTrack;if(!r||(l==null?void 0:l.length)!==(r==null?void 0:r.length)||r!=null&&r.some(p=>(l==null?void 0:l.indexOf(p))===-1)){this.groupIds=r,this.trackId=-1,this.currentTrack=null;const p=this.tracks.filter(A=>!r||r.indexOf(A.groupId)!==-1);if(p.length)this.selectDefaultTrack&&!p.some(A=>A.default)&&(this.selectDefaultTrack=!1),p.forEach((A,w)=>{A.id=w});else if(!d&&!this.tracksInGroup.length)return;this.tracksInGroup=p;const m=this.hls.config.audioPreference;if(!d&&m){const A=Nc(m,p,Ah);if(A>-1)d=p[A];else{const w=Nc(m,this.tracks);d=this.tracks[w]}}let y=this.findTrackId(d);y===-1&&d&&(y=this.findTrackId(null));const b={audioTracks:p};this.log(`Updating audio tracks, ${p.length} track(s) found in group(s): ${r==null?void 0:r.join(",")}`),this.hls.trigger(He.AUDIO_TRACKS_UPDATED,b);const _=this.trackId;if(y!==-1&&_===-1)this.setAudioTrack(y);else if(p.length&&_===-1){var f;const A=new Error(`No audio track selected for current audio group-ID(s): ${(f=this.groupIds)==null?void 0:f.join(",")} track count: ${p.length}`);this.warn(A.message),this.hls.trigger(He.ERROR,{type:Hi.MEDIA_ERROR,details:pn.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:A})}}}onError(t,n){n.fatal||!n.context||n.context.type===Fr.AUDIO_TRACK&&n.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(n.context.groupId)!==-1)&&this.checkRetry(n)}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(t){this.selectDefaultTrack=!1,this.setAudioTrack(t)}setAudioOption(t){const n=this.hls;if(n.config.audioPreference=t,t){const r=this.allAudioTracks;if(this.selectDefaultTrack=!1,r.length){const l=this.currentTrack;if(l&&Rh(t,l,Ah))return l;const d=Nc(t,this.tracksInGroup,Ah);if(d>-1){const f=this.tracksInGroup[d];return this.setAudioTrack(d),f}else if(l){let f=n.loadLevel;f===-1&&(f=n.firstAutoLevel);const p=E6(t,n.levels,r,f,Ah);if(p===-1)return null;n.nextLoadLevel=p}if(t.channels||t.audioCodec){const f=Nc(t,r);if(f>-1)return r[f]}}}return null}setAudioTrack(t){const n=this.tracksInGroup;if(t<0||t>=n.length){this.warn(`Invalid audio track id: ${t}`);return}this.selectDefaultTrack=!1;const r=this.currentTrack,l=n[t],d=l.details&&!l.details.live;if(t===this.trackId&&l===r&&d||(this.log(`Switching to audio-track ${t} "${l.name}" lang:${l.lang} group:${l.groupId} channels:${l.channels}`),this.trackId=t,this.currentTrack=l,this.hls.trigger(He.AUDIO_TRACK_SWITCHING,as({},l)),d))return;const f=this.switchParams(l.url,r==null?void 0:r.details,l.details);this.loadPlaylist(f)}findTrackId(t){const n=this.tracksInGroup;for(let r=0;r<n.length;r++){const l=n[r];if(!(this.selectDefaultTrack&&!l.default)&&(!t||Rh(t,l,Ah)))return r}if(t){const{name:r,lang:l,assocLang:d,characteristics:f,audioCodec:p,channels:m}=t;for(let y=0;y<n.length;y++){const b=n[y];if(Rh({name:r,lang:l,assocLang:d,characteristics:f,audioCodec:p,channels:m},b,Ah))return y}for(let y=0;y<n.length;y++){const b=n[y];if(Ly(t.attrs,b.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return y}for(let y=0;y<n.length;y++){const b=n[y];if(Ly(t.attrs,b.attrs,["LANGUAGE"]))return y}}return-1}loadPlaylist(t){super.loadPlaylist();const n=this.currentTrack;this.shouldLoadPlaylist(n)&&nE(n.url,this.hls)&&this.scheduleLoading(n,t)}loadingPlaylist(t,n){super.loadingPlaylist(t,n);const r=t.id,l=t.groupId,d=this.getUrlWithDirectives(t.url,n),f=t.details,p=f==null?void 0:f.age;this.log(`Loading audio-track ${r} "${t.name}" lang:${t.lang} group:${l}${(n==null?void 0:n.msn)!==void 0?" at sn "+n.msn+" part "+n.part:""}${p&&f.live?" age "+p.toFixed(1)+(f.type&&" "+f.type||""):""} ${d}`),this.hls.trigger(He.AUDIO_TRACK_LOADING,{url:d,id:r,groupId:l,deliveryDirectives:n||null,track:t})}}class dH{constructor(t){this.tracks=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.tracks=t}destroy(){this.tracks=this.queues=null}append(t,n,r){if(this.queues===null||this.tracks===null)return;const l=this.queues[n];l.push(t),l.length===1&&!r&&this.executeNext(n)}appendBlocker(t){return new Promise(n=>{const r={label:"async-blocker",execute:n,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.append(r,t)})}prependBlocker(t){return new Promise(n=>{if(this.queues){const r={label:"async-blocker-prepend",execute:n,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.queues[t].unshift(r)}})}removeBlockers(){this.queues!==null&&[this.queues.video,this.queues.audio,this.queues.audiovideo].forEach(t=>{var n;const r=(n=t[0])==null?void 0:n.label;(r==="async-blocker"||r==="async-blocker-prepend")&&(t[0].execute(),t.splice(0,1))})}unblockAudio(t){if(this.queues===null)return;this.queues.audio[0]===t&&this.shiftAndExecuteNext("audio")}executeNext(t){if(this.queues===null||this.tracks===null)return;const n=this.queues[t];if(n.length){const l=n[0];try{l.execute()}catch(d){var r;if(l.onError(d),this.queues===null||this.tracks===null)return;const f=(r=this.tracks[t])==null?void 0:r.buffer;f!=null&&f.updating||this.shiftAndExecuteNext(t)}}}shiftAndExecuteNext(t){this.queues!==null&&(this.queues[t].shift(),this.executeNext(t))}current(t){var n;return((n=this.queues)==null?void 0:n[t][0])||null}toString(){const{queues:t,tracks:n}=this;return t===null||n===null?"<destroyed>":`
${this.list("video")}
${this.list("audio")}
${this.list("audiovideo")}}`}list(t){var n,r;return(n=this.queues)!=null&&n[t]||(r=this.tracks)!=null&&r[t]?`${t}: (${this.listSbInfo(t)}) ${this.listOps(t)}`:""}listSbInfo(t){var n;const r=(n=this.tracks)==null?void 0:n[t],l=r==null?void 0:r.buffer;return l?`SourceBuffer${l.updating?" updating":""}${r.ended?" ended":""}${r.ending?" ending":""}`:"none"}listOps(t){var n;return((n=this.queues)==null?void 0:n[t].map(r=>r.label).join(", "))||""}}const Y2=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/,uN="HlsJsTrackRemovedError";class fH extends Error{constructor(t){super(t),this.name=uN}}class hH extends Bd{constructor(t,n){super("buffer-controller",t.logger),this.hls=void 0,this.fragmentTracker=void 0,this.details=null,this._objectUrl=null,this.operationQueue=null,this.bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.blockedAudioAppend=null,this.lastVideoAppendEnd=0,this.appendSource=void 0,this.transferData=void 0,this.overrides=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.sourceBuffers=[[null,null],[null,null]],this._onEndStreaming=r=>{var l;this.hls&&((l=this.mediaSource)==null?void 0:l.readyState)==="open"&&this.hls.pauseBuffering()},this._onStartStreaming=r=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=r=>{const{media:l,mediaSource:d}=this;r&&this.log("Media source opened"),!(!l||!d)&&(d.removeEventListener("sourceopen",this._onMediaSourceOpen),l.removeEventListener("emptied",this._onMediaEmptied),this.updateDuration(),this.hls.trigger(He.MEDIA_ATTACHED,{media:l,mediaSource:d}),this.mediaSource!==null&&this.checkPendingTracks())},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:r,_objectUrl:l}=this;r!==l&&this.error(`Media element src was set while attaching MediaSource (${l} > ${r})`)},this.hls=t,this.fragmentTracker=n,this.appendSource=F5(kf(t.config.preferManagedMediaSource)),this.initTracks(),this.registerListeners()}hasSourceTypes(){return Object.keys(this.tracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.transferData=this.overrides=void 0,this.operationQueue&&(this.operationQueue.destroy(),this.operationQueue=null),this.hls=this.fragmentTracker=null,this._onMediaSourceOpen=this._onMediaSourceClose=null,this._onMediaSourceEnded=null,this._onStartStreaming=this._onEndStreaming=null}registerListeners(){const{hls:t}=this;t.on(He.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(He.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(He.MANIFEST_LOADING,this.onManifestLoading,this),t.on(He.MANIFEST_PARSED,this.onManifestParsed,this),t.on(He.BUFFER_RESET,this.onBufferReset,this),t.on(He.BUFFER_APPENDING,this.onBufferAppending,this),t.on(He.BUFFER_CODECS,this.onBufferCodecs,this),t.on(He.BUFFER_EOS,this.onBufferEos,this),t.on(He.BUFFER_FLUSHING,this.onBufferFlushing,this),t.on(He.LEVEL_UPDATED,this.onLevelUpdated,this),t.on(He.FRAG_PARSED,this.onFragParsed,this),t.on(He.FRAG_CHANGED,this.onFragChanged,this),t.on(He.ERROR,this.onError,this)}unregisterListeners(){const{hls:t}=this;t.off(He.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(He.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(He.MANIFEST_LOADING,this.onManifestLoading,this),t.off(He.MANIFEST_PARSED,this.onManifestParsed,this),t.off(He.BUFFER_RESET,this.onBufferReset,this),t.off(He.BUFFER_APPENDING,this.onBufferAppending,this),t.off(He.BUFFER_CODECS,this.onBufferCodecs,this),t.off(He.BUFFER_EOS,this.onBufferEos,this),t.off(He.BUFFER_FLUSHING,this.onBufferFlushing,this),t.off(He.LEVEL_UPDATED,this.onLevelUpdated,this),t.off(He.FRAG_PARSED,this.onFragParsed,this),t.off(He.FRAG_CHANGED,this.onFragChanged,this),t.off(He.ERROR,this.onError,this)}transferMedia(){const{media:t,mediaSource:n}=this;if(!t)return null;const r={};if(this.operationQueue){const d=this.isUpdating();d||this.operationQueue.removeBlockers();const f=this.isQueued();(d||f)&&this.warn(`Transfering MediaSource with${f?" operations in queue":""}${d?" updating SourceBuffer(s)":""} ${this.operationQueue}`),this.operationQueue.destroy()}const l=this.transferData;return!this.sourceBufferCount&&l&&l.mediaSource===n?hs(r,l.tracks):this.sourceBuffers.forEach(d=>{const[f]=d;f&&(r[f]=hs({},this.tracks[f]),this.removeBuffer(f)),d[0]=d[1]=null}),{media:t,mediaSource:n,tracks:r}}initTracks(){const t={};this.sourceBuffers=[[null,null],[null,null]],this.tracks=t,this.resetQueue(),this.resetAppendErrors(),this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.lastVideoAppendEnd=0}onManifestLoading(){this.bufferCodecEventsTotal=0,this.details=null}onManifestParsed(t,n){var r;let l=2;(n.audio&&!n.video||!n.altAudio)&&(l=1),this.bufferCodecEventsTotal=l,this.log(`${l} bufferCodec event(s) expected.`),(r=this.transferData)!=null&&r.mediaSource&&this.sourceBufferCount&&l&&this.bufferCreated()}onMediaAttaching(t,n){const r=this.media=n.media,l=kf(this.appendSource);if(this.transferData=this.overrides=void 0,r&&l){const d=!!n.mediaSource;(d||n.overrides)&&(this.transferData=n,this.overrides=n.overrides);const f=this.mediaSource=n.mediaSource||new l;if(this.assignMediaSource(f),d)this._objectUrl=r.src,this.attachTransferred();else{const p=this._objectUrl=self.URL.createObjectURL(f);if(this.appendSource)try{r.removeAttribute("src");const m=self.ManagedMediaSource;r.disableRemotePlayback=r.disableRemotePlayback||m&&f instanceof m,W2(r),pH(r,p),r.load()}catch{r.src=p}else r.src=p}r.addEventListener("emptied",this._onMediaEmptied)}}assignMediaSource(t){var n,r;this.log(`${((n=this.transferData)==null?void 0:n.mediaSource)===t?"transferred":"created"} media source: ${(r=t.constructor)==null?void 0:r.name}`),t.addEventListener("sourceopen",this._onMediaSourceOpen),t.addEventListener("sourceended",this._onMediaSourceEnded),t.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(t.addEventListener("startstreaming",this._onStartStreaming),t.addEventListener("endstreaming",this._onEndStreaming))}attachTransferred(){const t=this.media,n=this.transferData;if(!n||!t)return;const r=this.tracks,l=n.tracks,d=l?Object.keys(l):null,f=d?d.length:0,p=()=>{this.media&&this.mediaSourceOpenOrEnded&&this._onMediaSourceOpen()};if(l&&d&&f){if(!this.tracksReady){this.hls.config.startFragPrefetch=!0,this.log("attachTransferred: waiting for SourceBuffer track info");return}if(this.log(`attachTransferred: (bufferCodecEventsTotal ${this.bufferCodecEventsTotal})
required tracks: ${Bs(r,(m,y)=>m==="initSegment"?void 0:y)};
transfer tracks: ${Bs(l,(m,y)=>m==="initSegment"?void 0:y)}}`),!uM(l,r)){n.mediaSource=null,n.tracks=void 0;const m=t.currentTime,y=this.details,b=Math.max(m,(y==null?void 0:y.fragments[0].start)||0);if(b-m>1){this.log(`attachTransferred: waiting for playback to reach new tracks start time ${m} -> ${b}`);return}this.warn(`attachTransferred: resetting MediaSource for incompatible tracks ("${Object.keys(l)}"->"${Object.keys(r)}") start time: ${b} currentTime: ${m}`),this.onMediaDetaching(He.MEDIA_DETACHING,{}),this.onMediaAttaching(He.MEDIA_ATTACHING,n),t.currentTime=b;return}this.transferData=void 0,d.forEach(m=>{const y=m,b=l[y];if(b){const _=b.buffer;if(_){const A=this.fragmentTracker,w=b.id;if(A.hasFragments(w)||A.hasParts(w)){const U=wr.getBuffered(_);A.detectEvictedFragments(y,U,w,null,!0)}const T=vx(y),k=[y,_];this.sourceBuffers[T]=k,_.updating&&this.operationQueue&&this.operationQueue.prependBlocker(y),this.trackSourceBuffer(y,b)}}}),p(),this.bufferCreated()}else this.log("attachTransferred: MediaSource w/o SourceBuffers"),p()}get mediaSourceOpenOrEnded(){var t;const n=(t=this.mediaSource)==null?void 0:t.readyState;return n==="open"||n==="ended"}onMediaDetaching(t,n){const r=!!n.transferMedia;this.transferData=this.overrides=void 0;const{media:l,mediaSource:d,_objectUrl:f}=this;if(d){if(this.log(`media source ${r?"transferring":"detaching"}`),r)this.sourceBuffers.forEach(([p])=>{p&&this.removeBuffer(p)}),this.resetQueue();else{if(this.mediaSourceOpenOrEnded){const p=d.readyState==="open";try{const m=d.sourceBuffers;for(let y=m.length;y--;)p&&m[y].abort(),d.removeSourceBuffer(m[y]);p&&d.endOfStream()}catch(m){this.warn(`onMediaDetaching: ${m.message} while calling endOfStream`)}}this.sourceBufferCount&&this.onBufferReset()}d.removeEventListener("sourceopen",this._onMediaSourceOpen),d.removeEventListener("sourceended",this._onMediaSourceEnded),d.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(d.removeEventListener("startstreaming",this._onStartStreaming),d.removeEventListener("endstreaming",this._onEndStreaming)),this.mediaSource=null,this._objectUrl=null}l&&(l.removeEventListener("emptied",this._onMediaEmptied),r||(f&&self.URL.revokeObjectURL(f),this.mediaSrc===f?(l.removeAttribute("src"),this.appendSource&&W2(l),l.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.media=null),this.hls.trigger(He.MEDIA_DETACHED,n)}onBufferReset(){this.sourceBuffers.forEach(([t])=>{t&&this.resetBuffer(t)}),this.initTracks()}resetBuffer(t){var n;const r=(n=this.tracks[t])==null?void 0:n.buffer;if(this.removeBuffer(t),r)try{var l;(l=this.mediaSource)!=null&&l.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(r)}catch(d){this.warn(`onBufferReset ${t}`,d)}delete this.tracks[t]}removeBuffer(t){this.removeBufferListeners(t),this.sourceBuffers[vx(t)]=[null,null];const n=this.tracks[t];n&&(n.buffer=void 0)}resetQueue(){this.operationQueue&&this.operationQueue.destroy(),this.operationQueue=new dH(this.tracks)}onBufferCodecs(t,n){const r=this.tracks,l=Object.keys(n);this.log(`BUFFER_CODECS: "${l}" (current SB count ${this.sourceBufferCount})`);const d="audiovideo"in n&&(r.audio||r.video)||r.audiovideo&&("audio"in n||"video"in n),f=!d&&this.sourceBufferCount&&this.media&&l.some(p=>!r[p]);if(d||f){this.warn(`Unsupported transition between "${Object.keys(r)}" and "${l}" SourceBuffers`);return}l.forEach(p=>{var m,y,b;const _=n[p],{id:A,codec:w,levelCodec:T,container:k,metadata:U,supplemental:Y}=_;let se=r[p];const te=(m=this.transferData)==null||(y=m.tracks)==null?void 0:y[p],Re=te!=null&&te.buffer?te:se,Be=(Re==null?void 0:Re.pendingCodec)||(Re==null?void 0:Re.codec),j=Re==null?void 0:Re.levelCodec;se||(se=r[p]={buffer:void 0,listeners:[],codec:w,supplemental:Y,container:k,levelCodec:T,metadata:U,id:A});const M=NT(Be,j),Z=M==null?void 0:M.replace(Y2,"$1");let K=NT(w,T);const x=(b=K)==null?void 0:b.replace(Y2,"$1");K&&M&&Z!==x&&(p.slice(0,5)==="audio"&&(K=eE(K,this.appendSource)),this.log(`switching codec ${Be} to ${K}`),K!==(se.pendingCodec||se.codec)&&(se.pendingCodec=K),se.container=k,this.appendChangeType(p,k,K))}),(this.tracksReady||this.sourceBufferCount)&&(n.tracks=this.sourceBufferTracks),!this.sourceBufferCount&&this.mediaSourceOpenOrEnded&&this.checkPendingTracks()}get sourceBufferTracks(){return Object.keys(this.tracks).reduce((t,n)=>{const r=this.tracks[n];return t[n]={id:r.id,container:r.container,codec:r.codec,levelCodec:r.levelCodec},t},{})}appendChangeType(t,n,r){const l=`${n};codecs=${r}`,d={label:`change-type=${l}`,execute:()=>{const f=this.tracks[t];if(f){const p=f.buffer;p!=null&&p.changeType&&(this.log(`changing ${t} sourceBuffer type to ${l}`),p.changeType(l),f.codec=r,f.container=n)}this.shiftAndExecuteNext(t)},onStart:()=>{},onComplete:()=>{},onError:f=>{this.warn(`Failed to change ${t} SourceBuffer type`,f)}};this.append(d,t,this.isPending(this.tracks[t]))}blockAudio(t){var n;const r=t.start,l=r+t.duration*.05;if(((n=this.fragmentTracker.getAppendedFrag(r,Ui.MAIN))==null?void 0:n.gap)===!0)return;const f={label:"block-audio",execute:()=>{var p;const m=this.tracks.video;(this.lastVideoAppendEnd>l||m!=null&&m.buffer&&wr.isBuffered(m.buffer,l)||((p=this.fragmentTracker.getAppendedFrag(l,Ui.MAIN))==null?void 0:p.gap)===!0)&&(this.blockedAudioAppend=null,this.shiftAndExecuteNext("audio"))},onStart:()=>{},onComplete:()=>{},onError:p=>{this.warn("Error executing block-audio operation",p)}};this.blockedAudioAppend={op:f,frag:t},this.append(f,"audio",!0)}unblockAudio(){const{blockedAudioAppend:t,operationQueue:n}=this;t&&n&&(this.blockedAudioAppend=null,n.unblockAudio(t.op))}onBufferAppending(t,n){const{tracks:r}=this,{data:l,type:d,parent:f,frag:p,part:m,chunkMeta:y}=n,b=y.buffering[d],_=p.sn,A=self.performance.now();b.start=A;const w=p.stats.buffering,T=m?m.stats.buffering:null;w.start===0&&(w.start=A),T&&T.start===0&&(T.start=A);const k=r.audio;let U=!1;d==="audio"&&(k==null?void 0:k.container)==="audio/mpeg"&&(U=!this.lastMpegAudioChunk||y.id===1||this.lastMpegAudioChunk.sn!==y.sn,this.lastMpegAudioChunk=y);const Y=this.tracks.video,se=Y==null?void 0:Y.buffer;if(se&&_!=="initSegment"){const Be=m||p,j=this.blockedAudioAppend;if(d==="audio"&&f!=="main"&&!this.blockedAudioAppend){const Z=Be.start+Be.duration*.05,K=se.buffered,x=this.currentOp("video");!K.length&&!x?this.blockAudio(Be):!x&&!wr.isBuffered(se,Z)&&this.lastVideoAppendEnd<Z&&this.blockAudio(Be)}else if(d==="video"){const M=Be.end;if(j){const Z=j.frag.start;(M>Z||M<this.lastVideoAppendEnd||wr.isBuffered(se,Z))&&this.unblockAudio()}this.lastVideoAppendEnd=M}}const te=(m||p).start,Re={label:`append-${d}`,execute:()=>{if(b.executeStart=self.performance.now(),U){const Be=this.tracks[d];if(Be){const j=Be.buffer;if(j){const M=te-j.timestampOffset;Math.abs(M)>=.1&&(this.log(`Updating audio SourceBuffer timestampOffset to ${te} (delta: ${M}) sn: ${_})`),j.timestampOffset=te)}}}this.appendExecutor(l,d)},onStart:()=>{},onComplete:()=>{const Be=self.performance.now();b.executeEnd=b.end=Be,w.first===0&&(w.first=Be),T&&T.first===0&&(T.first=Be);const j={};this.sourceBuffers.forEach(([M,Z])=>{M&&(j[M]=wr.getBuffered(Z))}),this.appendErrors[d]=0,d==="audio"||d==="video"?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(He.BUFFER_APPENDED,{type:d,frag:p,part:m,chunkMeta:y,parent:p.type,timeRanges:j})},onError:Be=>{var j;const M={type:Hi.MEDIA_ERROR,parent:p.type,details:pn.BUFFER_APPEND_ERROR,sourceBufferName:d,frag:p,part:m,chunkMeta:y,error:Be,err:Be,fatal:!1},Z=(j=this.media)==null?void 0:j.error;if(Be.code===DOMException.QUOTA_EXCEEDED_ERR)M.details=pn.BUFFER_FULL_ERROR;else if(Be.code===DOMException.INVALID_STATE_ERR&&this.mediaSourceOpenOrEnded&&!Z)M.errorAction=Iy(!0);else if(Be.name===uN&&this.sourceBufferCount===0)M.errorAction=Iy(!0);else{const K=++this.appendErrors[d];this.warn(`Failed ${K}/${this.hls.config.appendErrorMaxRetry} times to append segment in "${d}" sourceBuffer (${Z||"no media error"})`),(K>=this.hls.config.appendErrorMaxRetry||Z)&&(M.fatal=!0)}this.hls.trigger(He.ERROR,M)}};this.append(Re,d,this.isPending(this.tracks[d]))}getFlushOp(t,n,r){return this.log(`queuing "${t}" remove ${n}-${r}`),{label:"remove",execute:()=>{this.removeExecutor(t,n,r)},onStart:()=>{},onComplete:()=>{this.hls.trigger(He.BUFFER_FLUSHED,{type:t})},onError:l=>{this.warn(`Failed to remove ${n}-${r} from "${t}" SourceBuffer`,l)}}}onBufferFlushing(t,n){const{type:r,startOffset:l,endOffset:d}=n;r?this.append(this.getFlushOp(r,l,d),r):this.sourceBuffers.forEach(([f])=>{f&&this.append(this.getFlushOp(f,l,d),f)})}onFragParsed(t,n){const{frag:r,part:l}=n,d=[],f=l?l.elementaryStreams:r.elementaryStreams;f[fs.AUDIOVIDEO]?d.push("audiovideo"):(f[fs.AUDIO]&&d.push("audio"),f[fs.VIDEO]&&d.push("video"));const p=()=>{const m=self.performance.now();r.stats.buffering.end=m,l&&(l.stats.buffering.end=m);const y=l?l.stats:r.stats;this.hls.trigger(He.FRAG_BUFFERED,{frag:r,part:l,stats:y,id:r.type})};d.length===0&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${r.type} level: ${r.level} sn: ${r.sn}`),this.blockBuffers(p,d).catch(m=>{this.warn(`Fragment buffered callback ${m}`),this.stepOperationQueue(this.sourceBufferTypes)})}onFragChanged(t,n){this.trimBuffers()}get bufferedToEnd(){return this.sourceBufferCount>0&&!this.sourceBuffers.some(([t])=>{var n,r;return t&&(!((n=this.tracks[t])!=null&&n.ended)||((r=this.tracks[t])==null?void 0:r.ending))})}onBufferEos(t,n){var r;this.sourceBuffers.forEach(([f])=>{if(f){const p=this.tracks[f];(!n.type||n.type===f)&&(p.ending=!0,p.ended||(p.ended=!0,this.log(`${f} buffer reached EOS`)))}});const l=((r=this.overrides)==null?void 0:r.endOfStream)!==!1;this.sourceBufferCount>0&&!this.sourceBuffers.some(([f])=>{var p;return f&&!((p=this.tracks[f])!=null&&p.ended)})&&(l?(this.log("Queueing EOS"),this.blockUntilOpen(()=>{this.tracksEnded();const{mediaSource:f}=this;if(!f||f.readyState!=="open"){f&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${f.readyState}`);return}this.log("Calling mediaSource.endOfStream()"),f.endOfStream(),this.hls.trigger(He.BUFFERED_TO_END,void 0)})):(this.tracksEnded(),this.hls.trigger(He.BUFFERED_TO_END,void 0)))}tracksEnded(){this.sourceBuffers.forEach(([t])=>{if(t!==null){const n=this.tracks[t];n&&(n.ending=!1)}})}onLevelUpdated(t,{details:n}){n.fragments.length&&(this.details=n,this.updateDuration())}updateDuration(){const t=this.getDurationAndRange();t&&this.blockUntilOpen(()=>this.updateMediaSource(t))}onError(t,n){if(n.details===pn.BUFFER_APPEND_ERROR&&n.frag){var r;const l=(r=n.errorAction)==null?void 0:r.nextAutoLevel;xi(l)&&l!==n.frag.level&&this.resetAppendErrors()}}resetAppendErrors(){this.appendErrors={audio:0,video:0,audiovideo:0}}trimBuffers(){const{hls:t,details:n,media:r}=this;if(!r||n===null||!this.sourceBufferCount)return;const l=t.config,d=r.currentTime,f=n.levelTargetDuration,p=n.live&&l.liveBackBufferLength!==null?l.liveBackBufferLength:l.backBufferLength;if(xi(p)&&p>=0){const m=Math.max(p,f),y=Math.floor(d/f)*f-m;this.flushBackBuffer(d,f,y)}if(xi(l.frontBufferFlushThreshold)&&l.frontBufferFlushThreshold>0){const m=Math.max(l.maxBufferLength,l.frontBufferFlushThreshold),y=Math.max(m,f),b=Math.floor(d/f)*f+y;this.flushFrontBuffer(d,f,b)}}flushBackBuffer(t,n,r){this.sourceBuffers.forEach(([l,d])=>{if(d){const p=wr.getBuffered(d);if(p.length>0&&r>p.start(0)){var f;this.hls.trigger(He.BACK_BUFFER_REACHED,{bufferEnd:r});const m=this.tracks[l];if((f=this.details)!=null&&f.live)this.hls.trigger(He.LIVE_BACK_BUFFER_REACHED,{bufferEnd:r});else if(m!=null&&m.ended){this.log(`Cannot flush ${l} back buffer while SourceBuffer is in ended state`);return}this.hls.trigger(He.BUFFER_FLUSHING,{startOffset:0,endOffset:r,type:l})}}})}flushFrontBuffer(t,n,r){this.sourceBuffers.forEach(([l,d])=>{if(d){const f=wr.getBuffered(d),p=f.length;if(p<2)return;const m=f.start(p-1),y=f.end(p-1);if(r>m||t>=m&&t<=y)return;this.hls.trigger(He.BUFFER_FLUSHING,{startOffset:m,endOffset:1/0,type:l})}})}getDurationAndRange(){var t;const{details:n,mediaSource:r}=this;if(!n||!this.media||(r==null?void 0:r.readyState)!=="open")return null;const l=n.edge;if(n.live&&this.hls.config.liveDurationInfinity){if(n.fragments.length&&n.live&&r.setLiveSeekableRange){const y=Math.max(0,n.fragmentStart),b=Math.max(y,l);return{duration:1/0,start:y,end:b}}return{duration:1/0}}const d=(t=this.overrides)==null?void 0:t.duration;if(d)return xi(d)?{duration:d}:null;const f=this.media.duration,p=xi(r.duration)?r.duration:0;return l>p&&l>f||!xi(f)?{duration:l}:null}updateMediaSource({duration:t,start:n,end:r}){const l=this.mediaSource;!this.media||!l||l.readyState!=="open"||(l.duration!==t&&(xi(t)&&this.log(`Updating MediaSource duration to ${t.toFixed(3)}`),l.duration=t),n!==void 0&&r!==void 0&&(this.log(`MediaSource duration is set to ${l.duration}. Setting seekable range to ${n}-${r}.`),l.setLiveSeekableRange(n,r)))}get tracksReady(){const t=this.pendingTrackCount;return t>0&&(t>=this.bufferCodecEventsTotal||this.isPending(this.tracks.audiovideo))}checkPendingTracks(){const{bufferCodecEventsTotal:t,pendingTrackCount:n,tracks:r}=this;if(this.log(`checkPendingTracks (pending: ${n} codec events expected: ${t}) ${Bs(r)}`),this.tracksReady){var l;const d=(l=this.transferData)==null?void 0:l.tracks;d&&Object.keys(d).length?this.attachTransferred():this.createSourceBuffers()}}bufferCreated(){if(this.sourceBufferCount){const t={};this.sourceBuffers.forEach(([n,r])=>{if(n){const l=this.tracks[n];t[n]={buffer:r,container:l.container,codec:l.codec,supplemental:l.supplemental,levelCodec:l.levelCodec,id:l.id,metadata:l.metadata}}}),this.hls.trigger(He.BUFFER_CREATED,{tracks:t}),this.log(`SourceBuffers created. Running queue: ${this.operationQueue}`),this.sourceBuffers.forEach(([n])=>{this.executeNext(n)})}else{const t=new Error("could not create source buffer for media codec(s)");this.hls.trigger(He.ERROR,{type:Hi.MEDIA_ERROR,details:pn.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:t,reason:t.message})}}createSourceBuffers(){const{tracks:t,sourceBuffers:n,mediaSource:r}=this;if(!r)throw new Error("createSourceBuffers called when mediaSource was null");for(const d in t){const f=d,p=t[f];if(this.isPending(p)){const m=this.getTrackCodec(p,f),y=`${p.container};codecs=${m}`;p.codec=m,this.log(`creating sourceBuffer(${y})${this.currentOp(f)?" Queued":""} ${Bs(p)}`);try{const b=r.addSourceBuffer(y),_=vx(f),A=[f,b];n[_]=A,p.buffer=b}catch(b){var l;this.error(`error while trying to add sourceBuffer: ${b.message}`),this.shiftAndExecuteNext(f),(l=this.operationQueue)==null||l.removeBlockers(),delete this.tracks[f],this.hls.trigger(He.ERROR,{type:Hi.MEDIA_ERROR,details:pn.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:b,sourceBufferName:f,mimeType:y,parent:p.id});return}this.trackSourceBuffer(f,p)}}this.bufferCreated()}getTrackCodec(t,n){const r=t.supplemental;let l=t.codec;r&&(n==="video"||n==="audiovideo")&&pA(r,"video")&&(l=a6(l,r));const d=NT(l,t.levelCodec);return d?n.slice(0,5)==="audio"?eE(d,this.appendSource):d:""}trackSourceBuffer(t,n){const r=n.buffer;if(!r)return;const l=this.getTrackCodec(n,t);this.tracks[t]={buffer:r,codec:l,container:n.container,levelCodec:n.levelCodec,supplemental:n.supplemental,metadata:n.metadata,id:n.id,listeners:[]},this.removeBufferListeners(t),this.addBufferListener(t,"updatestart",this.onSBUpdateStart),this.addBufferListener(t,"updateend",this.onSBUpdateEnd),this.addBufferListener(t,"error",this.onSBUpdateError),this.appendSource&&this.addBufferListener(t,"bufferedchange",(d,f)=>{const p=f.removedRanges;p!=null&&p.length&&this.hls.trigger(He.BUFFER_FLUSHED,{type:d})})}get mediaSrc(){var t,n;const r=((t=this.media)==null||(n=t.querySelector)==null?void 0:n.call(t,"source"))||this.media;return r==null?void 0:r.src}onSBUpdateStart(t){const n=this.currentOp(t);n&&n.onStart()}onSBUpdateEnd(t){var n;if(((n=this.mediaSource)==null?void 0:n.readyState)==="closed"){this.resetBuffer(t);return}const r=this.currentOp(t);r&&(r.onComplete(),this.shiftAndExecuteNext(t))}onSBUpdateError(t,n){var r;const l=new Error(`${t} SourceBuffer error. MediaSource readyState: ${(r=this.mediaSource)==null?void 0:r.readyState}`);this.error(`${l}`,n),this.hls.trigger(He.ERROR,{type:Hi.MEDIA_ERROR,details:pn.BUFFER_APPENDING_ERROR,sourceBufferName:t,error:l,fatal:!1});const d=this.currentOp(t);d&&d.onError(l)}removeExecutor(t,n,r){const{media:l,mediaSource:d}=this,f=this.tracks[t],p=f==null?void 0:f.buffer;if(!l||!d||!p){this.warn(`Attempting to remove from the ${t} SourceBuffer, but it does not exist`),this.shiftAndExecuteNext(t);return}const m=xi(l.duration)?l.duration:1/0,y=xi(d.duration)?d.duration:1/0,b=Math.max(0,n),_=Math.min(r,m,y);_>b&&(!f.ending||f.ended)?(f.ended=!1,this.log(`Removing [${b},${_}] from the ${t} SourceBuffer`),p.remove(b,_)):this.shiftAndExecuteNext(t)}appendExecutor(t,n){const r=this.tracks[n],l=r==null?void 0:r.buffer;if(!l)throw new fH(`Attempting to append to the ${n} SourceBuffer, but it does not exist`);r.ending=!1,r.ended=!1,l.appendBuffer(t)}blockUntilOpen(t){if(this.isUpdating()||this.isQueued())this.blockBuffers(t).catch(n=>{this.warn(`SourceBuffer blocked callback ${n}`),this.stepOperationQueue(this.sourceBufferTypes)});else try{t()}catch(n){this.warn(`Callback run without blocking ${this.operationQueue} ${n}`)}}isUpdating(){return this.sourceBuffers.some(([t,n])=>t&&n.updating)}isQueued(){return this.sourceBuffers.some(([t])=>t&&!!this.currentOp(t))}isPending(t){return!!t&&!t.buffer}blockBuffers(t,n=this.sourceBufferTypes){if(!n.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(t);const{operationQueue:r}=this,l=n.map(f=>this.appendBlocker(f));return n.length>1&&!!this.blockedAudioAppend&&this.unblockAudio(),Promise.all(l).then(f=>{r===this.operationQueue&&(t(),this.stepOperationQueue(this.sourceBufferTypes))})}stepOperationQueue(t){t.forEach(n=>{var r;const l=(r=this.tracks[n])==null?void 0:r.buffer;!l||l.updating||this.shiftAndExecuteNext(n)})}append(t,n,r){this.operationQueue&&this.operationQueue.append(t,n,r)}appendBlocker(t){if(this.operationQueue)return this.operationQueue.appendBlocker(t)}currentOp(t){return this.operationQueue?this.operationQueue.current(t):null}executeNext(t){t&&this.operationQueue&&this.operationQueue.executeNext(t)}shiftAndExecuteNext(t){this.operationQueue&&this.operationQueue.shiftAndExecuteNext(t)}get pendingTrackCount(){return Object.keys(this.tracks).reduce((t,n)=>t+(this.isPending(this.tracks[n])?1:0),0)}get sourceBufferCount(){return this.sourceBuffers.reduce((t,[n])=>t+(n?1:0),0)}get sourceBufferTypes(){return this.sourceBuffers.map(([t])=>t).filter(t=>!!t)}addBufferListener(t,n,r){const l=this.tracks[t];if(!l)return;const d=l.buffer;if(!d)return;const f=r.bind(this,t);l.listeners.push({event:n,listener:f}),d.addEventListener(n,f)}removeBufferListeners(t){const n=this.tracks[t];if(!n)return;const r=n.buffer;r&&(n.listeners.forEach(l=>{r.removeEventListener(l.event,l.listener)}),n.listeners.length=0)}}function W2(u){const t=u.querySelectorAll("source");[].slice.call(t).forEach(n=>{u.removeChild(n)})}function pH(u,t){const n=self.document.createElement("source");n.type="video/mp4",n.src=t,u.appendChild(n)}function vx(u){return u==="audio"?1:0}class Sw{constructor(t){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=t,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(t){this.streamController=t}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:t}=this;t.on(He.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),t.on(He.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(He.MANIFEST_PARSED,this.onManifestParsed,this),t.on(He.LEVELS_UPDATED,this.onLevelsUpdated,this),t.on(He.BUFFER_CODECS,this.onBufferCodecs,this),t.on(He.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:t}=this;t.off(He.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),t.off(He.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(He.MANIFEST_PARSED,this.onManifestParsed,this),t.off(He.LEVELS_UPDATED,this.onLevelsUpdated,this),t.off(He.BUFFER_CODECS,this.onBufferCodecs,this),t.off(He.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(t,n){const r=this.hls.levels[n.droppedLevel];this.isLevelAllowed(r)&&this.restrictedLevels.push({bitrate:r.bitrate,height:r.height,width:r.width})}onMediaAttaching(t,n){this.media=n.media instanceof HTMLVideoElement?n.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(t,n){const r=this.hls;this.restrictedLevels=[],this.firstLevel=n.firstLevel,r.config.capLevelToPlayerSize&&n.video&&this.startCapping()}onLevelsUpdated(t,n){this.timer&&xi(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(t,n){this.hls.config.capLevelToPlayerSize&&n.video&&this.startCapping()}onMediaDetaching(){this.stopCapping(),this.media=null}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0){this.clientRect=null;return}const t=this.hls.levels;if(t.length){const n=this.hls,r=this.getMaxLevel(t.length-1);r!==this.autoLevelCapping&&n.logger.log(`Setting autoLevelCapping to ${r}: ${t[r].height}p@${t[r].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),n.autoLevelCapping=r,n.autoLevelEnabled&&n.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=n.autoLevelCapping}}}getMaxLevel(t){const n=this.hls.levels;if(!n.length)return-1;const r=n.filter((l,d)=>this.isLevelAllowed(l)&&d<=t);return this.clientRect=null,Sw.getMaxLevelByMediaSize(r,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const t=this.media,n={width:0,height:0};if(t){const r=t.getBoundingClientRect();n.width=r.width,n.height=r.height,!n.width&&!n.height&&(n.width=r.right-r.left||t.width||0,n.height=r.bottom-r.top||t.height||0)}return this.clientRect=n,n}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let t=1;if(!this.hls.config.ignoreDevicePixelRatio)try{t=self.devicePixelRatio}catch{}return Math.min(t,this.hls.config.maxDevicePixelRatio)}isLevelAllowed(t){return!this.restrictedLevels.some(r=>t.bitrate===r.bitrate&&t.width===r.width&&t.height===r.height)}static getMaxLevelByMediaSize(t,n,r){if(!(t!=null&&t.length))return-1;const l=(p,m)=>m?p.width!==m.width||p.height!==m.height:!0;let d=t.length-1;const f=Math.max(n,r);for(let p=0;p<t.length;p+=1){const m=t[p];if((m.width>=f||m.height>=f)&&l(m,t[p+1])){d=p;break}}return d}}const gH={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"},El=gH,mH={HLS:"h"},yH=mH,vH="CMCD-Object",TH="CMCD-Request",EH="CMCD-Session",bH="CMCD-Status",cy={OBJECT:vH,REQUEST:TH,SESSION:EH,STATUS:bH},_H={[cy.OBJECT]:["br","d","ot","tb"],[cy.REQUEST]:["bl","dl","mtp","nor","nrr","su"],[cy.SESSION]:["cid","pr","sf","sid","st","v"],[cy.STATUS]:["bs","rtp"]};class Tg{constructor(t,n){Array.isArray(t)&&(t=t.map(r=>r instanceof Tg?r:new Tg(r))),this.value=t,this.params=n}}const SH="Dict";function xH(u){return Array.isArray(u)?JSON.stringify(u):u instanceof Map?"Map{}":u instanceof Set?"Set{}":typeof u=="object"?JSON.stringify(u):String(u)}function AH(u,t,n,r){return new Error(`failed to ${u} "${xH(t)}" as ${n}`,{cause:r})}function qc(u,t,n){return AH("serialize",u,t,n)}class cN{constructor(t){this.description=t}}const X2="Bare Item",wH="Boolean";function IH(u){if(typeof u!="boolean")throw qc(u,wH);return u?"?1":"?0"}const CH="Byte Sequence";function kH(u){if(ArrayBuffer.isView(u)===!1)throw qc(u,CH);return`:${xq(u)}:`}const DH="Integer";function RH(u){return u<-999999999999999||999999999999999<u}function dN(u){if(RH(u))throw qc(u,DH);return u.toString()}function LH(u){return`@${dN(u.getTime()/1e3)}`}const PH="Decimal";function MH(u){const t=YM(u,3);if(Math.floor(Math.abs(t)).toString().length>12)throw qc(u,PH);const n=t.toString();return n.includes(".")?n:`${n}.0`}const NH="String",OH=/[\x00-\x1f\x7f]+/;function FH(u){if(OH.test(u))throw qc(u,NH);return`"${u.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function UH(u){return u.description||u.toString().slice(7,-1)}const BH="Token";function Q2(u){const t=UH(u);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(t)===!1)throw qc(t,BH);return t}function SA(u){switch(typeof u){case"number":if(!xi(u))throw qc(u,X2);return Number.isInteger(u)?dN(u):MH(u);case"string":return FH(u);case"symbol":return Q2(u);case"boolean":return IH(u);case"object":if(u instanceof Date)return LH(u);if(u instanceof Uint8Array)return kH(u);if(u instanceof cN)return Q2(u);default:throw qc(u,X2)}}const zH="Key";function xA(u){if(/^[a-z*][a-z0-9\-_.*]*$/.test(u)===!1)throw qc(u,zH);return u}function xw(u){return u==null?"":Object.entries(u).map(([t,n])=>n===!0?`;${xA(t)}`:`;${xA(t)}=${SA(n)}`).join("")}function fN(u){return u instanceof Tg?`${SA(u.value)}${xw(u.params)}`:SA(u)}function jH(u){return`(${u.value.map(fN).join(" ")})${xw(u.params)}`}function qH(u,t={whitespace:!0}){if(typeof u!="object")throw qc(u,SH);const n=u instanceof Map?u.entries():Object.entries(u),r=t!=null&&t.whitespace?" ":"";return Array.from(n).map(([l,d])=>{d instanceof Tg||(d=new Tg(d));let f=xA(l);return d.value===!0?f+=xw(d.params):(f+="=",Array.isArray(d.value)?f+=jH(d):f+=fN(d)),f}).join(`,${r}`)}function HH(u,t){return qH(u,t)}function GH(u){return u==="ot"||u==="sf"||u==="st"}function VH(u){return typeof u=="number"?xi(u):u!=null&&u!==""&&u!==!1}const BT=u=>Math.round(u),$H=(u,t)=>(t!=null&&t.baseUrl&&(u=Aq(u,t.baseUrl)),encodeURIComponent(u)),bT=u=>BT(u/100)*100,KH={br:BT,d:BT,bl:bT,dl:bT,mtp:bT,nor:$H,rtp:bT,tb:BT};function YH(u,t){const n={};if(u==null||typeof u!="object")return n;const r=Object.keys(u).sort(),l=hs({},KH,t==null?void 0:t.formatters),d=t==null?void 0:t.filter;return r.forEach(f=>{if(d!=null&&d(f))return;let p=u[f];const m=l[f];m&&(p=m(p,t)),!(f==="v"&&p===1)&&(f=="pr"&&p===1||VH(p)&&(GH(f)&&typeof p=="string"&&(p=new cN(p)),n[f]=p))}),n}function hN(u,t={}){return u?HH(YH(u,t),hs({whitespace:!1},t)):""}function WH(u,t={}){const n={};if(!u)return n;const r=Object.entries(u),l=Object.entries(_H).concat(Object.entries((t==null?void 0:t.customHeaderMap)||{})),d=r.reduce((f,p)=>{var m,y;const[b,_]=p,A=((m=l.find(w=>w[1].includes(b)))===null||m===void 0?void 0:m[0])||cy.REQUEST;return(y=f[A])!==null&&y!==void 0||(f[A]={}),f[A][b]=_,f},{});return Object.entries(d).reduce((f,[p,m])=>(f[p]=hN(m,t),f),n)}function XH(u,t,n){return hs(u,WH(t,n))}const QH="CMCD";function JH(u,t={}){if(!u)return"";const n=hN(u,t);return`${QH}=${encodeURIComponent(n)}`}const J2=/CMCD=[^&#]+/;function ZH(u,t,n){const r=JH(t,n);if(!r)return u;if(J2.test(u))return u.replace(J2,r);const l=u.includes("?")?"&":"?";return`${u}${l}${r}`}class eG{constructor(t){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=l=>{try{this.apply(l,{ot:El.MANIFEST,su:!this.initialized})}catch(d){this.hls.logger.warn("Could not generate manifest CMCD data.",d)}},this.applyFragmentData=l=>{try{const{frag:d,part:f}=l,p=this.hls.levels[d.level],m=this.getObjectType(d),y={d:(f||d).duration*1e3,ot:m};(m===El.VIDEO||m===El.AUDIO||m==El.MUXED)&&(y.br=p.bitrate/1e3,y.tb=this.getTopBandwidth(m)/1e3,y.bl=this.getBufferLength(m));const b=f?this.getNextPart(f):this.getNextFrag(d);b!=null&&b.url&&b.url!==d.url&&(y.nor=b.url),this.apply(l,y)}catch(d){this.hls.logger.warn("Could not generate segment CMCD data.",d)}},this.hls=t;const n=this.config=t.config,{cmcd:r}=n;r!=null&&(n.pLoader=this.createPlaylistLoader(),n.fLoader=this.createFragmentLoader(),this.sid=r.sessionId||t.sessionId,this.cid=r.contentId,this.useHeaders=r.useHeaders===!0,this.includeKeys=r.includeKeys,this.registerListeners())}registerListeners(){const t=this.hls;t.on(He.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(He.MEDIA_DETACHED,this.onMediaDetached,this),t.on(He.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const t=this.hls;t.off(He.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(He.MEDIA_DETACHED,this.onMediaDetached,this),t.off(He.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=this.media=null}onMediaAttached(t,n){this.media=n.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(t,n){var r,l;this.audioBuffer=(r=n.tracks.audio)==null?void 0:r.buffer,this.videoBuffer=(l=n.tracks.video)==null?void 0:l.buffer}createData(){var t;return{v:1,sf:yH.HLS,sid:this.sid,cid:this.cid,pr:(t=this.media)==null?void 0:t.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(t,n={}){hs(n,this.createData());const r=n.ot===El.INIT||n.ot===El.VIDEO||n.ot===El.MUXED;this.starved&&r&&(n.bs=!0,n.su=!0,this.starved=!1),n.su==null&&(n.su=this.buffering);const{includeKeys:l}=this;l&&(n=Object.keys(n).reduce((f,p)=>(l.includes(p)&&(f[p]=n[p]),f),{}));const d={baseUrl:t.url};this.useHeaders?(t.headers||(t.headers={}),XH(t.headers,n,d)):t.url=ZH(t.url,n,d)}getNextFrag(t){var n;const r=(n=this.hls.levels[t.level])==null?void 0:n.details;if(r){const l=t.sn-r.startSN;return r.fragments[l+1]}}getNextPart(t){var n,r;const{index:l,fragment:d}=t,f=(n=this.hls.levels[d.level])==null||(r=n.details)==null?void 0:r.partList;if(f){const{sn:p}=d;for(let m=f.length-1;m>=0;m--){const y=f[m];if(y.index===l&&y.fragment.sn===p)return f[m+1]}}}getObjectType(t){const{type:n}=t;if(n==="subtitle")return El.TIMED_TEXT;if(t.sn==="initSegment")return El.INIT;if(n==="audio")return El.AUDIO;if(n==="main")return this.hls.audioTracks.length?El.VIDEO:El.MUXED}getTopBandwidth(t){let n=0,r;const l=this.hls;if(t===El.AUDIO)r=l.audioTracks;else{const d=l.maxAutoLevel,f=d>-1?d+1:l.levels.length;r=l.levels.slice(0,f)}for(const d of r)d.bitrate>n&&(n=d.bitrate);return n>0?n:NaN}getBufferLength(t){const n=this.media,r=t===El.AUDIO?this.audioBuffer:this.videoBuffer;return!r||!n?NaN:wr.bufferInfo(r,n.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:t}=this.config,n=this.applyPlaylistData,r=t||this.config.loader;return class{constructor(d){this.loader=void 0,this.loader=new r(d)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(d,f,p){n(d),this.loader.load(d,f,p)}}}createFragmentLoader(){const{fLoader:t}=this.config,n=this.applyFragmentData,r=t||this.config.loader;return class{constructor(d){this.loader=void 0,this.loader=new r(d)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(d,f,p){n(d),this.loader.load(d,f,p)}}}}const tG=3e5;let nG=class extends Bd{constructor(t){super("content-steering",t.logger),this.hls=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this._pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=t,this.registerListeners()}registerListeners(){const t=this.hls;t.on(He.MANIFEST_LOADING,this.onManifestLoading,this),t.on(He.MANIFEST_LOADED,this.onManifestLoaded,this),t.on(He.MANIFEST_PARSED,this.onManifestParsed,this),t.on(He.ERROR,this.onError,this)}unregisterListeners(){const t=this.hls;t&&(t.off(He.MANIFEST_LOADING,this.onManifestLoading,this),t.off(He.MANIFEST_LOADED,this.onManifestLoaded,this),t.off(He.MANIFEST_PARSED,this.onManifestParsed,this),t.off(He.ERROR,this.onError,this))}pathways(){return(this.levels||[]).reduce((t,n)=>(t.indexOf(n.pathwayId)===-1&&t.push(n.pathwayId),t),[])}get pathwayPriority(){return this._pathwayPriority}set pathwayPriority(t){this.updatePathwayPriority(t)}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const t=this.timeToLoad*1e3-(performance.now()-this.updated);if(t>0){this.scheduleRefresh(this.uri,t);return}}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){this.reloadTimer!==-1&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(t){const n=this.levels;n&&(this.levels=n.filter(r=>r!==t))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(t,n){const{contentSteering:r}=n;r!==null&&(this.pathwayId=r.pathwayId,this.uri=r.uri,this.started&&this.startLoad())}onManifestParsed(t,n){this.audioTracks=n.audioTracks,this.subtitleTracks=n.subtitleTracks}onError(t,n){const{errorAction:r}=n;if((r==null?void 0:r.action)===Co.SendAlternateToPenaltyBox&&r.flags===Ku.MoveAllAlternatesMatchingHost){const l=this.levels;let d=this._pathwayPriority,f=this.pathwayId;if(n.context){const{groupId:p,pathwayId:m,type:y}=n.context;p&&l?f=this.getPathwayForGroupId(p,y,f):m&&(f=m)}f in this.penalizedPathways||(this.penalizedPathways[f]=performance.now()),!d&&l&&(d=this.pathways()),d&&d.length>1&&(this.updatePathwayPriority(d),r.resolved=this.pathwayId!==f),r.resolved||this.warn(`Could not resolve ${n.details} ("${n.error.message}") with content-steering for Pathway: ${f} levels: ${l&&l.length} priorities: ${Bs(d)} penalized: ${Bs(this.penalizedPathways)}`)}}filterParsedLevels(t){this.levels=t;let n=this.getLevelsForPathway(this.pathwayId);if(n.length===0){const r=t[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${r}"`),n=this.getLevelsForPathway(r),this.pathwayId=r}return n.length!==t.length&&this.log(`Found ${n.length}/${t.length} levels in Pathway "${this.pathwayId}"`),n}getLevelsForPathway(t){return this.levels===null?[]:this.levels.filter(n=>t===n.pathwayId)}updatePathwayPriority(t){this._pathwayPriority=t;let n;const r=this.penalizedPathways,l=performance.now();Object.keys(r).forEach(d=>{l-r[d]>tG&&delete r[d]});for(let d=0;d<t.length;d++){const f=t[d];if(f in r)continue;if(f===this.pathwayId)return;const p=this.hls.nextLoadLevel,m=this.hls.levels[p];if(n=this.getLevelsForPathway(f),n.length>0){this.log(`Setting Pathway to "${f}"`),this.pathwayId=f,UM(n),this.hls.trigger(He.LEVELS_UPDATED,{levels:n});const y=this.hls.levels[p];m&&y&&this.levels&&(y.attrs["STABLE-VARIANT-ID"]!==m.attrs["STABLE-VARIANT-ID"]&&y.bitrate!==m.bitrate&&this.log(`Unstable Pathways change from bitrate ${m.bitrate} to ${y.bitrate}`),this.hls.nextLoadLevel=p);break}}}getPathwayForGroupId(t,n,r){const l=this.getLevelsForPathway(r).concat(this.levels||[]);for(let d=0;d<l.length;d++)if(n===Fr.AUDIO_TRACK&&l[d].hasAudioGroup(t)||n===Fr.SUBTITLE_TRACK&&l[d].hasSubtitleGroup(t))return l[d].pathwayId;return r}clonePathways(t){const n=this.levels;if(!n)return;const r={},l={};t.forEach(d=>{const{ID:f,"BASE-ID":p,"URI-REPLACEMENT":m}=d;if(n.some(b=>b.pathwayId===f))return;const y=this.getLevelsForPathway(p).map(b=>{const _=new $s(b.attrs);_["PATHWAY-ID"]=f;const A=_.AUDIO&&`${_.AUDIO}_clone_${f}`,w=_.SUBTITLES&&`${_.SUBTITLES}_clone_${f}`;A&&(r[_.AUDIO]=A,_.AUDIO=A),w&&(l[_.SUBTITLES]=w,_.SUBTITLES=w);const T=pN(b.uri,_["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",m),k=new wy({attrs:_,audioCodec:b.audioCodec,bitrate:b.bitrate,height:b.height,name:b.name,url:T,videoCodec:b.videoCodec,width:b.width});if(b.audioGroups)for(let U=1;U<b.audioGroups.length;U++)k.addGroupId("audio",`${b.audioGroups[U]}_clone_${f}`);if(b.subtitleGroups)for(let U=1;U<b.subtitleGroups.length;U++)k.addGroupId("text",`${b.subtitleGroups[U]}_clone_${f}`);return k});n.push(...y),Z2(this.audioTracks,r,m,f),Z2(this.subtitleTracks,l,m,f)})}loadSteeringManifest(t){const n=this.hls.config,r=n.loader;this.loader&&this.loader.destroy(),this.loader=new r(n);let l;try{l=new self.URL(t)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${t}`);return}if(l.protocol!=="data:"){const b=(this.hls.bandwidthEstimate||n.abrEwmaDefaultEstimate)|0;l.searchParams.set("_HLS_pathway",this.pathwayId),l.searchParams.set("_HLS_throughput",""+b)}const d={responseType:"json",url:l.href},f=n.steeringManifestLoadPolicy.default,p=f.errorRetry||f.timeoutRetry||{},m={loadPolicy:f,timeout:f.maxLoadTimeMs,maxRetry:p.maxNumRetry||0,retryDelay:p.retryDelayMs||0,maxRetryDelay:p.maxRetryDelayMs||0},y={onSuccess:(b,_,A,w)=>{this.log(`Loaded steering manifest: "${l}"`);const T=b.data;if((T==null?void 0:T.VERSION)!==1){this.log(`Steering VERSION ${T.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=T.TTL;const{"RELOAD-URI":k,"PATHWAY-CLONES":U,"PATHWAY-PRIORITY":Y}=T;if(k)try{this.uri=new self.URL(k,l).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${k}`);return}this.scheduleRefresh(this.uri||A.url),U&&this.clonePathways(U);const se={steeringManifest:T,url:l.toString()};this.hls.trigger(He.STEERING_MANIFEST_LOADED,se),Y&&this.updatePathwayPriority(Y)},onError:(b,_,A,w)=>{if(this.log(`Error loading steering manifest: ${b.code} ${b.text} (${_.url})`),this.stopLoad(),b.code===410){this.enabled=!1,this.log(`Steering manifest ${_.url} no longer available`);return}let T=this.timeToLoad*1e3;if(b.code===429){const k=this.loader;if(typeof(k==null?void 0:k.getResponseHeader)=="function"){const U=k.getResponseHeader("Retry-After");U&&(T=parseFloat(U)*1e3)}this.log(`Steering manifest ${_.url} rate limited`);return}this.scheduleRefresh(this.uri||_.url,T)},onTimeout:(b,_,A)=>{this.log(`Timeout loading steering manifest (${_.url})`),this.scheduleRefresh(this.uri||_.url)}};this.log(`Requesting steering manifest: ${l}`),this.loader.load(d,m,y)}scheduleRefresh(t,n=this.timeToLoad*1e3){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var r;const l=(r=this.hls)==null?void 0:r.media;if(l&&!l.ended){this.loadSteeringManifest(t);return}this.scheduleRefresh(t,this.timeToLoad*1e3)},n)}};function Z2(u,t,n,r){u&&Object.keys(t).forEach(l=>{const d=u.filter(f=>f.groupId===l).map(f=>{const p=hs({},f);return p.details=void 0,p.attrs=new $s(p.attrs),p.url=p.attrs.URI=pN(f.url,f.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",n),p.groupId=p.attrs["GROUP-ID"]=t[l],p.attrs["PATHWAY-ID"]=r,p});u.push(...d)})}function pN(u,t,n,r){const{HOST:l,PARAMS:d,[n]:f}=r;let p;t&&(p=f==null?void 0:f[t],p&&(u=p));const m=new self.URL(u);return l&&!p&&(m.host=l),d&&Object.keys(d).sort().forEach(y=>{y&&m.searchParams.set(y,d[y])}),m.href}class ag extends Bd{constructor(t){super("eme",t.logger),this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=ag.CDMCleanupPromise?[ag.CDMCleanupPromise]:[],this.onMediaEncrypted=n=>{const{initDataType:r,initData:l}=n,d=`"${n.type}" event: init data type: "${r}"`;if(this.debug(d),l!==null){if(!this.keyFormatPromise){let f=Object.keys(this.keySystemAccessPromises);f.length||(f=yT(this.config));const p=f.map(cx).filter(m=>!!m);this.keyFormatPromise=this.getKeyFormatPromise(p)}this.keyFormatPromise.then(f=>{const p=lx(f);let m,y;if(r==="sinf"){if(p!==os.FAIRPLAY){this.warn(`Ignoring unexpected "${n.type}" event with init data type: "${r}" for selected key-system ${p}`);return}const T=wa(new Uint8Array(l));try{const k=hw(JSON.parse(T).sinf),U=mM(k);if(!U)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");m=new Uint8Array(U.subarray(8,24)),y=os.FAIRPLAY}catch(k){this.warn(`${d} Failed to parse sinf: ${k}`);return}}else{if(p!==os.WIDEVINE&&p!==os.PLAYREADY){this.warn(`Ignoring unexpected "${n.type}" event with init data type: "${r}" for selected key-system ${p}`);return}const T=n6(l),k=T.filter(Y=>!!Y.systemId&&ux(Y.systemId)===p);k.length>1&&this.warn(`${d} Using first of ${k.length} pssh found for selected key-system ${p}`);const U=k[0];if(!U){T.length===0||T.some(Y=>!Y.systemId)?this.warn(`${d} contains incomplete or invalid pssh data`):this.log(`ignoring ${d} for ${T.map(Y=>ux(Y.systemId)).join(",")} pssh data in favor of playlist keys`);return}if(y=ux(U.systemId),U.version===0&&U.data)if(y===os.WIDEVINE){const Y=U.data.length-22;m=new Uint8Array(U.data.subarray(Y,Y+16))}else y===os.PLAYREADY&&(m=RM(U.data))}if(!y||!m)return;const b=Dc.hexDump(m),{keyIdToKeySessionPromise:_,mediaKeySessions:A}=this;let w=_[b];for(let T=0;T<A.length;T++){const k=A[T],U=k.decryptdata;if(!U.keyId)continue;const Y=Dc.hexDump(U.keyId);if(b===Y||U.uri.replace(/-/g,"").indexOf(b)!==-1){if(w=_[Y],U.pssh)break;delete _[Y],U.pssh=new Uint8Array(l),U.keyId=m,w=_[b]=w.then(()=>this.generateRequestWithPreferredKeySession(k,r,l,"encrypted-event-key-match")),w.catch(se=>this.handleError(se));break}}if(!w){if(y!==p){this.log(`Ignoring "${n.type}" event with ${y} init data for selected key-system ${p}`);return}w=_[b]=this.getKeySystemSelectionPromise([y]).then(({keySystem:T,mediaKeys:k})=>{var U;this.throwIfDestroyed();const Y=new Cy("ISO-23001-7",b,(U=cx(T))!=null?U:"");return Y.pssh=new Uint8Array(l),Y.keyId=m,this.attemptSetMediaKeys(T,k).then(()=>{this.throwIfDestroyed();const se=this.createMediaKeySessionContext({decryptdata:Y,keySystem:T,mediaKeys:k});return this.generateRequestWithPreferredKeySession(se,r,l,"encrypted-event-no-match")})}),w.catch(T=>this.handleError(T))}})}},this.onWaitingForKey=n=>{this.log(`"${n.type}" event`)},this.hls=t,this.config=t.config,this.registerListeners()}destroy(){const t=this.media;this.unregisterListeners(),this.onMediaDetached(),this._clear(t);const n=this.config;n.requestMediaKeySystemAccessFunc=null,n.licenseXhrSetup=n.licenseResponseCallback=void 0,n.drmSystems=n.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onMediaEncrypted=this.onWaitingForKey=null}registerListeners(){this.hls.on(He.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(He.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(He.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(He.MANIFEST_LOADED,this.onManifestLoaded,this)}unregisterListeners(){this.hls.off(He.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(He.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(He.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(He.MANIFEST_LOADED,this.onManifestLoaded,this)}getLicenseServerUrl(t){const{drmSystems:n,widevineLicenseUrl:r}=this.config,l=n[t];if(l)return l.licenseUrl;if(t===os.WIDEVINE&&r)return r}getLicenseServerUrlOrThrow(t){const n=this.getLicenseServerUrl(t);if(n===void 0)throw new Error(`no license server URL configured for key-system "${t}"`);return n}getServerCertificateUrl(t){const{drmSystems:n}=this.config,r=n[t];if(r)return r.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${t}"]`)}attemptKeySystemAccess(t){const n=this.hls.levels,r=(f,p,m)=>!!f&&m.indexOf(f)===p,l=n.map(f=>f.audioCodec).filter(r),d=n.map(f=>f.videoCodec).filter(r);return l.length+d.length===0&&d.push("avc1.42e01e"),new Promise((f,p)=>{const m=y=>{const b=y.shift();this.getMediaKeysPromise(b,l,d).then(_=>f({keySystem:b,mediaKeys:_})).catch(_=>{y.length?m(y):_ instanceof yu?p(_):p(new yu({type:Hi.KEY_SYSTEM_ERROR,details:pn.KEY_SYSTEM_NO_ACCESS,error:_,fatal:!0},_.message))})};m(t)})}requestMediaKeySystemAccess(t,n){const{requestMediaKeySystemAccessFunc:r}=this.config;if(typeof r!="function"){let l=`Configured requestMediaKeySystemAccess is not a function ${r}`;return DM===null&&self.location.protocol==="http:"&&(l=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(l))}return r(t,n)}getMediaKeysPromise(t,n,r){const l=K6(t,n,r,this.config.drmSystemOptions),d=this.keySystemAccessPromises[t];let f=d==null?void 0:d.keySystemAccess;if(!f){this.log(`Requesting encrypted media "${t}" key-system access with config: ${Bs(l)}`),f=this.requestMediaKeySystemAccess(t,l);const p=this.keySystemAccessPromises[t]={keySystemAccess:f};return f.catch(m=>{this.log(`Failed to obtain access to key-system "${t}": ${m}`)}),f.then(m=>{this.log(`Access for key-system "${m.keySystem}" obtained`);const y=this.fetchServerCertificate(t);return this.log(`Create media-keys for "${t}"`),p.mediaKeys=m.createMediaKeys().then(b=>(this.log(`Media-keys created for "${t}"`),y.then(_=>_?this.setMediaKeysServerCertificate(b,t,_):b))),p.mediaKeys.catch(b=>{this.error(`Failed to create media-keys for "${t}"}: ${b}`)}),p.mediaKeys})}return f.then(()=>d.mediaKeys)}createMediaKeySessionContext({decryptdata:t,keySystem:n,mediaKeys:r}){this.log(`Creating key-system session "${n}" keyId: ${Dc.hexDump(t.keyId||[])}`);const l=r.createSession(),d={decryptdata:t,keySystem:n,mediaKeys:r,mediaKeysSession:l,keyStatus:"status-pending"};return this.mediaKeySessions.push(d),d}renewKeySession(t){const n=t.decryptdata;if(n.pssh){const r=this.createMediaKeySessionContext(t),l=this.getKeyIdString(n),d="cenc";this.keyIdToKeySessionPromise[l]=this.generateRequestWithPreferredKeySession(r,d,n.pssh.buffer,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(t)}getKeyIdString(t){if(!t)throw new Error("Could not read keyId of undefined decryptdata");if(t.keyId===null)throw new Error("keyId is null");return Dc.hexDump(t.keyId)}updateKeySession(t,n){var r;const l=t.mediaKeysSession;return this.log(`Updating key-session "${l.sessionId}" for keyID ${Dc.hexDump(((r=t.decryptdata)==null?void 0:r.keyId)||[])}
      } (data length: ${n&&n.byteLength})`),l.update(n)}selectKeySystemFormat(t){const n=Object.keys(t.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${t.sn} ${t.type}: ${t.level}) key formats ${n.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(n)),this.keyFormatPromise}getKeyFormatPromise(t){return new Promise((n,r)=>{const l=yT(this.config),d=t.map(lx).filter(f=>!!f&&l.indexOf(f)!==-1);return this.getKeySystemSelectionPromise(d).then(({keySystem:f})=>{const p=cx(f);p?n(p):r(new Error(`Unable to find format for key-system "${f}"`))}).catch(r)})}loadKey(t){const n=t.keyInfo.decryptdata,r=this.getKeyIdString(n),l=`(keyId: ${r} format: "${n.keyFormat}" method: ${n.method} uri: ${n.uri})`;this.log(`Starting session for key ${l}`);let d=this.keyIdToKeySessionPromise[r];return d||(d=this.getKeySystemForKeyPromise(n).then(({keySystem:p,mediaKeys:m})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${t.frag.sn} ${t.frag.type}: ${t.frag.level} using key ${l}`),this.attemptSetMediaKeys(p,m).then(()=>(this.throwIfDestroyed(),this.createMediaKeySessionContext({keySystem:p,mediaKeys:m,decryptdata:n}))))),(this.keyIdToKeySessionPromise[r]=d.then(p=>{const m="cenc",y=n.pssh?n.pssh.buffer:null;return this.generateRequestWithPreferredKeySession(p,m,y,"playlist-key")})).catch(p=>this.handleError(p))),d}throwIfDestroyed(t="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(t){this.hls&&(this.error(t.message),t instanceof yu?this.hls.trigger(He.ERROR,t.data):this.hls.trigger(He.ERROR,{type:Hi.KEY_SYSTEM_ERROR,details:pn.KEY_SYSTEM_NO_KEYS,error:t,fatal:!0}))}getKeySystemForKeyPromise(t){const n=this.getKeyIdString(t),r=this.keyIdToKeySessionPromise[n];if(!r){const l=lx(t.keyFormat),d=l?[l]:yT(this.config);return this.attemptKeySystemAccess(d)}return r}getKeySystemSelectionPromise(t){if(t.length||(t=yT(this.config)),t.length===0)throw new yu({type:Hi.KEY_SYSTEM_ERROR,details:pn.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${Bs({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(t)}attemptSetMediaKeys(t,n){const r=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${t}"`);const l=Promise.all(r).then(()=>{if(!this.media)throw new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(n)});return this.setMediaKeysQueue.push(l),l.then(()=>{this.log(`Media-keys set for "${t}"`),r.push(l),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(d=>r.indexOf(d)===-1)})}generateRequestWithPreferredKeySession(t,n,r,l){var d,f;const p=(d=this.config.drmSystems)==null||(f=d[t.keySystem])==null?void 0:f.generateRequest;if(p)try{const T=p.call(this.hls,n,r,t);if(!T)throw new Error("Invalid response from configured generateRequest filter");n=T.initDataType,r=T.initData?T.initData:null,t.decryptdata.pssh=r?new Uint8Array(r):null}catch(T){var m;if(this.warn(T.message),(m=this.hls)!=null&&m.config.debug)throw T}if(r===null)return this.log(`Skipping key-session request for "${l}" (no initData)`),Promise.resolve(t);const y=this.getKeyIdString(t.decryptdata);this.log(`Generating key-session request for "${l}": ${y} (init data type: ${n} length: ${r?r.byteLength:null})`);const b=new gw,_=t._onmessage=T=>{const k=t.mediaKeysSession;if(!k){b.emit("error",new Error("invalid state"));return}const{messageType:U,message:Y}=T;this.log(`"${U}" message event for session "${k.sessionId}" message size: ${Y.byteLength}`),U==="license-request"||U==="license-renewal"?this.renewLicense(t,Y).catch(se=>{b.eventNames().length?b.emit("error",se):this.handleError(se)}):U==="license-release"?t.keySystem===os.FAIRPLAY&&(this.updateKeySession(t,yA("acknowledged")),this.removeSession(t)):this.warn(`unhandled media key message type "${U}"`)},A=t._onkeystatuseschange=T=>{if(!t.mediaKeysSession){b.emit("error",new Error("invalid state"));return}this.onKeyStatusChange(t);const U=t.keyStatus;b.emit("keyStatus",U),U==="expired"&&(this.warn(`${t.keySystem} expired for key ${y}`),this.renewKeySession(t))};t.mediaKeysSession.addEventListener("message",_),t.mediaKeysSession.addEventListener("keystatuseschange",A);const w=new Promise((T,k)=>{b.on("error",k),b.on("keyStatus",U=>{U.startsWith("usable")?T():U==="output-restricted"?k(new yu({type:Hi.KEY_SYSTEM_ERROR,details:pn.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):U==="internal-error"?k(new yu({type:Hi.KEY_SYSTEM_ERROR,details:pn.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},`key status changed to "${U}"`)):U==="expired"?k(new Error("key expired while generating request")):this.warn(`unhandled key status change "${U}"`)})});return t.mediaKeysSession.generateRequest(n,r).then(()=>{var T;this.log(`Request generated for key-session "${(T=t.mediaKeysSession)==null?void 0:T.sessionId}" keyId: ${y}`)}).catch(T=>{throw new yu({type:Hi.KEY_SYSTEM_ERROR,details:pn.KEY_SYSTEM_NO_SESSION,error:T,fatal:!1},`Error generating key-session request: ${T}`)}).then(()=>w).catch(T=>{throw b.removeAllListeners(),this.removeSession(t),T}).then(()=>(b.removeAllListeners(),t))}onKeyStatusChange(t){t.mediaKeysSession.keyStatuses.forEach((n,r)=>{if(typeof r=="string"&&typeof n=="object"){const l=r;r=n,n=l}this.log(`key status change "${n}" for keyStatuses keyId: ${Dc.hexDump("buffer"in r?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):new Uint8Array(r))} session keyId: ${Dc.hexDump(new Uint8Array(t.decryptdata.keyId||[]))} uri: ${t.decryptdata.uri}`),t.keyStatus=n})}fetchServerCertificate(t){const n=this.config,r=n.loader,l=new r(n),d=this.getServerCertificateUrl(t);return d?(this.log(`Fetching server certificate for "${t}"`),new Promise((f,p)=>{const m={responseType:"arraybuffer",url:d},y=n.certLoadPolicy.default,b={loadPolicy:y,timeout:y.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},_={onSuccess:(A,w,T,k)=>{f(A.data)},onError:(A,w,T,k)=>{p(new yu({type:Hi.KEY_SYSTEM_ERROR,details:pn.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:T,response:as({url:m.url,data:void 0},A)},`"${t}" certificate request failed (${d}). Status: ${A.code} (${A.text})`))},onTimeout:(A,w,T)=>{p(new yu({type:Hi.KEY_SYSTEM_ERROR,details:pn.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:T,response:{url:m.url,data:void 0}},`"${t}" certificate request timed out (${d})`))},onAbort:(A,w,T)=>{p(new Error("aborted"))}};l.load(m,b,_)})):Promise.resolve()}setMediaKeysServerCertificate(t,n,r){return new Promise((l,d)=>{t.setServerCertificate(r).then(f=>{this.log(`setServerCertificate ${f?"success":"not supported by CDM"} (${r==null?void 0:r.byteLength}) on "${n}"`),l(t)}).catch(f=>{d(new yu({type:Hi.KEY_SYSTEM_ERROR,details:pn.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:f,fatal:!0},f.message))})})}renewLicense(t,n){return this.requestLicense(t,new Uint8Array(n)).then(r=>this.updateKeySession(t,new Uint8Array(r)).catch(l=>{throw new yu({type:Hi.KEY_SYSTEM_ERROR,details:pn.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:l,fatal:!0},l.message)}))}unpackPlayReadyKeyMessage(t,n){const r=String.fromCharCode.apply(null,new Uint16Array(n.buffer));if(!r.includes("PlayReadyKeyMessage"))return t.setRequestHeader("Content-Type","text/xml; charset=utf-8"),n;const l=new DOMParser().parseFromString(r,"application/xml"),d=l.querySelectorAll("HttpHeader");if(d.length>0){let b;for(let _=0,A=d.length;_<A;_++){var f,p;b=d[_];const w=(f=b.querySelector("name"))==null?void 0:f.textContent,T=(p=b.querySelector("value"))==null?void 0:p.textContent;w&&T&&t.setRequestHeader(w,T)}}const m=l.querySelector("Challenge"),y=m==null?void 0:m.textContent;if(!y)throw new Error("Cannot find <Challenge> in key message");return yA(atob(y))}setupLicenseXHR(t,n,r,l){const d=this.config.licenseXhrSetup;return d?Promise.resolve().then(()=>{if(!r.decryptdata)throw new Error("Key removed");return d.call(this.hls,t,n,r,l)}).catch(f=>{if(!r.decryptdata)throw f;return t.open("POST",n,!0),d.call(this.hls,t,n,r,l)}).then(f=>(t.readyState||t.open("POST",n,!0),{xhr:t,licenseChallenge:f||l})):(t.open("POST",n,!0),Promise.resolve({xhr:t,licenseChallenge:l}))}requestLicense(t,n){const r=this.config.keyLoadPolicy.default;return new Promise((l,d)=>{const f=this.getLicenseServerUrlOrThrow(t.keySystem);this.log(`Sending license request to URL: ${f}`);const p=new XMLHttpRequest;p.responseType="arraybuffer",p.onreadystatechange=()=>{if(!this.hls||!t.mediaKeysSession)return d(new Error("invalid state"));if(p.readyState===4)if(p.status===200){this._requestLicenseFailureCount=0;let m=p.response;this.log(`License received ${m instanceof ArrayBuffer?m.byteLength:m}`);const y=this.config.licenseResponseCallback;if(y)try{m=y.call(this.hls,p,f,t)}catch(b){this.error(b)}l(m)}else{const m=r.errorRetry,y=m?m.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>y||p.status>=400&&p.status<500)d(new yu({type:Hi.KEY_SYSTEM_ERROR,details:pn.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:p,response:{url:f,data:void 0,code:p.status,text:p.statusText}},`License Request XHR failed (${f}). Status: ${p.status} (${p.statusText})`));else{const b=y-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${b} attempts left`),this.requestLicense(t,n).then(l,d)}}},t.licenseXhr&&t.licenseXhr.readyState!==XMLHttpRequest.DONE&&t.licenseXhr.abort(),t.licenseXhr=p,this.setupLicenseXHR(p,f,t,n).then(({xhr:m,licenseChallenge:y})=>{t.keySystem==os.PLAYREADY&&(y=this.unpackPlayReadyKeyMessage(m,y)),m.send(y)})})}onMediaAttached(t,n){if(!this.config.emeEnabled)return;const r=n.media;this.media=r,r.removeEventListener("encrypted",this.onMediaEncrypted),r.removeEventListener("waitingforkey",this.onWaitingForKey),r.addEventListener("encrypted",this.onMediaEncrypted),r.addEventListener("waitingforkey",this.onWaitingForKey)}onMediaDetached(){const t=this.media;t&&(t.removeEventListener("encrypted",this.onMediaEncrypted),t.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null)}_clear(t){var n;const r=this.mediaKeySessions;this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},Cy.clearKeyUriToKeyIdMap();const l=r.length;ag.CDMCleanupPromise=Promise.all(r.map(d=>this.removeSession(d)).concat(t==null||(n=t.setMediaKeys(null))==null?void 0:n.catch(d=>{var f;this.log(`Could not clear media keys: ${d}`),(f=this.hls)==null||f.trigger(He.ERROR,{type:Hi.OTHER_ERROR,details:pn.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR,fatal:!1,error:new Error(`Could not clear media keys: ${d}`)})}))).then(()=>{l&&(this.log("finished closing key sessions and clearing media keys"),r.length=0)}).catch(d=>{var f;this.log(`Could not close sessions and clear media keys: ${d}`),(f=this.hls)==null||f.trigger(He.ERROR,{type:Hi.OTHER_ERROR,details:pn.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close sessions and clear media keys: ${d}`)})})}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(t,{sessionKeys:n}){if(!(!n||!this.config.emeEnabled)&&!this.keyFormatPromise){const r=n.reduce((l,d)=>(l.indexOf(d.keyFormat)===-1&&l.push(d.keyFormat),l),[]);this.log(`Selecting key-system from session-keys ${r.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(r)}}removeSession(t){const{mediaKeysSession:n,licenseXhr:r}=t;if(n){this.log(`Remove licenses and keys and close session ${n.sessionId}`),t._onmessage&&(n.removeEventListener("message",t._onmessage),t._onmessage=void 0),t._onkeystatuseschange&&(n.removeEventListener("keystatuseschange",t._onkeystatuseschange),t._onkeystatuseschange=void 0),r&&r.readyState!==XMLHttpRequest.DONE&&r.abort(),t.mediaKeysSession=t.decryptdata=t.licenseXhr=void 0;const l=this.mediaKeySessions.indexOf(t);l>-1&&this.mediaKeySessions.splice(l,1);const{drmSystemOptions:d}=this.config;return(W6(d)?new Promise((p,m)=>{self.setTimeout(()=>m(new Error("MediaKeySession.remove() timeout")),8e3),n.remove().then(p)}):Promise.resolve()).catch(p=>{var m;this.log(`Could not remove session: ${p}`),(m=this.hls)==null||m.trigger(He.ERROR,{type:Hi.OTHER_ERROR,details:pn.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR,fatal:!1,error:new Error(`Could not remove session: ${p}`)})}).then(()=>n.close()).catch(p=>{var m;this.log(`Could not close session: ${p}`),(m=this.hls)==null||m.trigger(He.ERROR,{type:Hi.OTHER_ERROR,details:pn.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close session: ${p}`)})})}}}ag.CDMCleanupPromise=void 0;class yu extends Error{constructor(t,n){super(n),this.data=void 0,t.error||(t.error=new Error(n)),this.data=t,t.err=t.error}}class iG{constructor(t){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=t,this.registerListeners()}setStreamController(t){this.streamController=t}registerListeners(){this.hls.on(He.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.on(He.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListeners(){this.hls.off(He.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.off(He.MEDIA_DETACHING,this.onMediaDetaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(t,n){const r=this.hls.config;if(r.capLevelOnFPSDrop){const l=n.media instanceof self.HTMLVideoElement?n.media:null;this.media=l,l&&typeof l.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),r.fpsDroppedMonitoringPeriod)}}onMediaDetaching(){this.media=null}checkFPS(t,n,r){const l=performance.now();if(n){if(this.lastTime){const d=l-this.lastTime,f=r-this.lastDroppedFrames,p=n-this.lastDecodedFrames,m=1e3*f/d,y=this.hls;if(y.trigger(He.FPS_DROP,{currentDropped:f,currentDecoded:p,totalDroppedFrames:r}),m>0&&f>y.config.fpsDroppedMonitoringThreshold*p){let b=y.currentLevel;y.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+b),b>0&&(y.autoLevelCapping===-1||y.autoLevelCapping>=b)&&(b=b-1,y.trigger(He.FPS_DROP_LEVEL_CAPPING,{level:b,droppedLevel:y.currentLevel}),y.autoLevelCapping=b,this.streamController.nextLevelSwitch())}}this.lastTime=l,this.lastDroppedFrames=r,this.lastDecodedFrames=n}}checkFPSInterval(){const t=this.media;if(t)if(this.isVideoPlaybackQualityAvailable){const n=t.getVideoPlaybackQuality();this.checkFPS(t,n.totalVideoFrames,n.droppedVideoFrames)}else this.checkFPS(t,t.webkitDecodedFrameCount,t.webkitDroppedFrameCount)}}function gN(u,t){let n;try{n=new Event("addtrack")}catch{n=document.createEvent("Event"),n.initEvent("addtrack",!1,!1)}n.track=u,t.dispatchEvent(n)}function mN(u,t){const n=u.mode;if(n==="disabled"&&(u.mode="hidden"),u.cues&&!u.cues.getCueById(t.id))try{if(u.addCue(t),!u.cues.getCueById(t.id))throw new Error(`addCue is failed for: ${t}`)}catch(r){Gr.debug(`[texttrack-utils]: ${r}`);try{const l=new self.TextTrackCue(t.startTime,t.endTime,t.text);l.id=t.id,u.addCue(l)}catch(l){Gr.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${l}`)}}n==="disabled"&&(u.mode=n)}function eg(u,t){const n=u.mode;if(n==="disabled"&&(u.mode="hidden"),u.cues)for(let r=u.cues.length;r--;)t&&u.cues[r].removeEventListener("enter",t),u.removeCue(u.cues[r]);n==="disabled"&&(u.mode=n)}function AA(u,t,n,r){const l=u.mode;if(l==="disabled"&&(u.mode="hidden"),u.cues&&u.cues.length>0){const d=sG(u.cues,t,n);for(let f=0;f<d.length;f++)(!r||r(d[f]))&&u.removeCue(d[f])}l==="disabled"&&(u.mode=l)}function rG(u,t){if(t<=u[0].startTime)return 0;const n=u.length-1;if(t>u[n].endTime)return-1;let r=0,l=n,d;for(;r<=l;)if(d=Math.floor((l+r)/2),t<u[d].startTime)l=d-1;else if(t>u[d].startTime&&r<n)r=d+1;else return d;return u[r].startTime-t<t-u[l].startTime?r:l}function sG(u,t,n){const r=[],l=rG(u,t);if(l>-1)for(let d=l,f=u.length;d<f;d++){const p=u[d];if(p.startTime>=t&&p.endTime<=n)r.push(p);else if(p.startTime>n)return r}return r}function zT(u){const t=[];for(let n=0;n<u.length;n++){const r=u[n];(r.kind==="subtitles"||r.kind==="captions")&&r.label&&t.push(u[n])}return t}class aG extends _w{constructor(t){super(t,"subtitle-track-controller"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let n=null;const r=zT(this.media.textTracks);for(let d=0;d<r.length;d++)if(r[d].mode==="hidden")n=r[d];else if(r[d].mode==="showing"){n=r[d];break}const l=this.findTrackForTextTrack(n);this.subtitleTrack!==l&&this.setSubtitleTrack(l)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(t){this._subtitleDisplay=t,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:t}=this;t.on(He.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(He.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(He.MANIFEST_LOADING,this.onManifestLoading,this),t.on(He.MANIFEST_PARSED,this.onManifestParsed,this),t.on(He.LEVEL_LOADING,this.onLevelLoading,this),t.on(He.LEVEL_SWITCHING,this.onLevelSwitching,this),t.on(He.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.on(He.ERROR,this.onError,this)}unregisterListeners(){const{hls:t}=this;t.off(He.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(He.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(He.MANIFEST_LOADING,this.onManifestLoading,this),t.off(He.MANIFEST_PARSED,this.onManifestParsed,this),t.off(He.LEVEL_LOADING,this.onLevelLoading,this),t.off(He.LEVEL_SWITCHING,this.onLevelSwitching,this),t.off(He.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.off(He.ERROR,this.onError,this)}onMediaAttached(t,n){this.media=n.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(t){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,t)}onMediaDetaching(t,n){const r=this.media;if(!r)return;const l=!!n.transferMedia;if(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||r.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),this.subtitleTrack=-1,this.media=null,l)return;zT(r.textTracks).forEach(f=>{eg(f)})}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(t,n){this.tracks=n.subtitleTracks}onSubtitleTrackLoaded(t,n){const{id:r,groupId:l,details:d}=n,f=this.tracksInGroup[r];if(!f||f.groupId!==l){this.warn(`Subtitle track with id:${r} and group:${l} not found in active group ${f==null?void 0:f.groupId}`);return}const p=f.details;f.details=n.details,this.log(`Subtitle track ${r} "${f.name}" lang:${f.lang} group:${l} loaded [${d.startSN}-${d.endSN}]`),r===this.trackId&&this.playlistLoaded(r,n,p)}onLevelLoading(t,n){this.switchLevel(n.level)}onLevelSwitching(t,n){this.switchLevel(n.level)}switchLevel(t){const n=this.hls.levels[t];if(!n)return;const r=n.subtitleGroups||null,l=this.groupIds;let d=this.currentTrack;if(!r||(l==null?void 0:l.length)!==(r==null?void 0:r.length)||r!=null&&r.some(f=>(l==null?void 0:l.indexOf(f))===-1)){this.groupIds=r,this.trackId=-1,this.currentTrack=null;const f=this.tracks.filter(b=>!r||r.indexOf(b.groupId)!==-1);if(f.length)this.selectDefaultTrack&&!f.some(b=>b.default)&&(this.selectDefaultTrack=!1),f.forEach((b,_)=>{b.id=_});else if(!d&&!this.tracksInGroup.length)return;this.tracksInGroup=f;const p=this.hls.config.subtitlePreference;if(!d&&p){this.selectDefaultTrack=!1;const b=Nc(p,f);if(b>-1)d=f[b];else{const _=Nc(p,this.tracks);d=this.tracks[_]}}let m=this.findTrackId(d);m===-1&&d&&(m=this.findTrackId(null));const y={subtitleTracks:f};this.log(`Updating subtitle tracks, ${f.length} track(s) found in "${r==null?void 0:r.join(",")}" group-id`),this.hls.trigger(He.SUBTITLE_TRACKS_UPDATED,y),m!==-1&&this.trackId===-1&&this.setSubtitleTrack(m)}}findTrackId(t){const n=this.tracksInGroup,r=this.selectDefaultTrack;for(let l=0;l<n.length;l++){const d=n[l];if(!(r&&!d.default||!r&&!t)&&(!t||Rh(d,t)))return l}if(t){for(let l=0;l<n.length;l++){const d=n[l];if(Ly(t.attrs,d.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return l}for(let l=0;l<n.length;l++){const d=n[l];if(Ly(t.attrs,d.attrs,["LANGUAGE"]))return l}}return-1}findTrackForTextTrack(t){if(t){const n=this.tracksInGroup;for(let r=0;r<n.length;r++){const l=n[r];if(_A(l,t))return r}}return-1}onError(t,n){n.fatal||!n.context||n.context.type===Fr.SUBTITLE_TRACK&&n.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(n.context.groupId)!==-1)&&this.checkRetry(n)}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(t){this.selectDefaultTrack=!1,this.setSubtitleTrack(t)}setSubtitleOption(t){if(this.hls.config.subtitlePreference=t,t){if(t.id===-1)return this.setSubtitleTrack(-1),null;const n=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,n.length){const r=this.currentTrack;if(r&&Rh(t,r))return r;const l=Nc(t,this.tracksInGroup);if(l>-1){const d=this.tracksInGroup[l];return this.setSubtitleTrack(l),d}else{if(r)return null;{const d=Nc(t,n);if(d>-1)return n[d]}}}}return null}loadPlaylist(t){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentTrack)&&this.scheduleLoading(this.currentTrack,t)}loadingPlaylist(t,n){super.loadingPlaylist(t,n);const r=t.id,l=t.groupId,d=this.getUrlWithDirectives(t.url,n),f=t.details,p=f==null?void 0:f.age;this.log(`Loading subtitle ${r} "${t.name}" lang:${t.lang} group:${l}${(n==null?void 0:n.msn)!==void 0?" at sn "+n.msn+" part "+n.part:""}${p&&f.live?" age "+p.toFixed(1)+(f.type&&" "+f.type||""):""} ${d}`),this.hls.trigger(He.SUBTITLE_TRACK_LOADING,{url:d,id:r,groupId:l,deliveryDirectives:n||null,track:t})}toggleTrackModes(){const{media:t}=this;if(!t)return;const n=zT(t.textTracks),r=this.currentTrack;let l;if(r&&(l=n.filter(d=>_A(r,d))[0],l||this.warn(`Unable to find subtitle TextTrack with name "${r.name}" and language "${r.lang}"`)),[].slice.call(n).forEach(d=>{d.mode!=="disabled"&&d!==l&&(d.mode="disabled")}),l){const d=this.subtitleDisplay?"showing":"hidden";l.mode!==d&&(l.mode=d)}}setSubtitleTrack(t){const n=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=t;return}if(t<-1||t>=n.length||!xi(t)){this.warn(`Invalid subtitle track id: ${t}`);return}this.selectDefaultTrack=!1;const r=this.currentTrack,l=n[t]||null;if(this.trackId=t,this.currentTrack=l,this.toggleTrackModes(),!l){this.hls.trigger(He.SUBTITLE_TRACK_SWITCH,{id:t});return}const d=!!l.details&&!l.details.live;if(t===this.trackId&&l===r&&d)return;this.log(`Switching to subtitle-track ${t}`+(l?` "${l.name}" lang:${l.lang} group:${l.groupId}`:""));const{id:f,groupId:p="",name:m,type:y,url:b}=l;this.hls.trigger(He.SUBTITLE_TRACK_SWITCH,{id:f,groupId:p,name:m,type:y,url:b});const _=this.switchParams(l.url,r==null?void 0:r.details,l.details);this.loadPlaylist(_)}}function my(u){let t=5381,n=u.length;for(;n;)t=t*33^u.charCodeAt(--n);return(t>>>0).toString()}const og=.025;let lE=function(u){return u[u.Point=0]="Point",u[u.Range=1]="Range",u}({});function oG(u,t,n){return`${u.identifier}-${n+1}-${my(t)}`}class lG{constructor(t,n){this.base=void 0,this._duration=null,this._timelineStart=null,this.appendInPlaceDisabled=void 0,this.appendInPlaceStarted=void 0,this.dateRange=void 0,this.hasPlayed=!1,this.cumulativeDuration=0,this.resumeOffset=NaN,this.playoutLimit=NaN,this.restrictions={skip:!1,jump:!1},this.snapOptions={out:!1,in:!1},this.assetList=[],this.assetListLoader=void 0,this.assetListResponse=null,this.resumeAnchor=void 0,this.error=void 0,this.resetOnResume=void 0,this.base=n,this.dateRange=t,this.setDateRange(t)}setDateRange(t){this.dateRange=t,this.resumeOffset=t.attr.optionalFloat("X-RESUME-OFFSET",this.resumeOffset),this.playoutLimit=t.attr.optionalFloat("X-PLAYOUT-LIMIT",this.playoutLimit),this.restrictions=t.attr.enumeratedStringList("X-RESTRICT",this.restrictions),this.snapOptions=t.attr.enumeratedStringList("X-SNAP",this.snapOptions)}reset(){var t;this.appendInPlaceStarted=!1,(t=this.assetListLoader)==null||t.destroy(),this.assetListLoader=void 0,this.supplementsPrimary||(this.assetListResponse=null,this.assetList=[],this._duration=null)}isAssetPastPlayoutLimit(t){if(t>=this.assetList.length)return!0;const n=this.playoutLimit;return t<=0||isNaN(n)?!1:this.assetList[t].startOffset>n}findAssetIndex(t){return this.assetList.indexOf(t)}get identifier(){return this.dateRange.id}get startDate(){return this.dateRange.startDate}get startTime(){const t=this.dateRange.startTime;if(this.snapOptions.out){const n=this.dateRange.tagAnchor;if(n)return Tx(t,n)}return t}get startOffset(){return this.cue.pre?0:this.startTime}get startIsAligned(){if(this.startTime===0||this.snapOptions.out)return!0;const t=this.dateRange.tagAnchor;if(t){const n=this.dateRange.startTime,r=Tx(n,t);return n-r<.1}return!1}get resumptionOffset(){const t=this.resumeOffset,n=xi(t)?t:this.duration;return this.cumulativeDuration+n}get resumeTime(){const t=this.startOffset+this.resumptionOffset;if(this.snapOptions.in){const n=this.resumeAnchor;if(n)return Tx(t,n)}return t}get appendInPlace(){return this.appendInPlaceStarted?!0:this.appendInPlaceDisabled?!1:!!(!this.cue.once&&!this.cue.pre&&this.startIsAligned&&(isNaN(this.playoutLimit)&&isNaN(this.resumeOffset)||this.resumeOffset&&this.duration&&Math.abs(this.resumeOffset-this.duration)<og))}set appendInPlace(t){if(this.appendInPlaceStarted){this.resetOnResume=!t;return}this.appendInPlaceDisabled=!t}get timelineStart(){return this._timelineStart!==null?this._timelineStart:this.startTime}set timelineStart(t){this._timelineStart=t}get duration(){const t=this.playoutLimit;let n;return this._duration!==null?n=this._duration:this.dateRange.duration?n=this.dateRange.duration:n=this.dateRange.plannedDuration||0,!isNaN(t)&&t<n&&(n=t),n}set duration(t){this._duration=t}get cue(){return this.dateRange.cue}get timelineOccupancy(){return this.dateRange.attr["X-TIMELINE-OCCUPIES"]==="RANGE"?lE.Range:lE.Point}get supplementsPrimary(){return this.dateRange.attr["X-TIMELINE-STYLE"]==="PRIMARY"}get contentMayVary(){return this.dateRange.attr["X-CONTENT-MAY-VARY"]!=="NO"}get assetUrl(){return this.dateRange.attr["X-ASSET-URI"]}get assetListUrl(){return this.dateRange.attr["X-ASSET-LIST"]}get baseUrl(){return this.base.url}get assetListLoaded(){return this.assetList.length>0||this.assetListResponse!==null}toString(){return uG(this)}}function Tx(u,t){return u-t.start<t.duration/2&&!(Math.abs(u-(t.start+t.duration))<og)?t.start:t.start+t.duration}function yN(u,t,n){const r=new self.URL(u,n);return r.protocol!=="data:"&&r.searchParams.set("_HLS_primary_id",t),r}function uG(u){return`["${u.identifier}" ${u.cue.pre?"<pre>":u.cue.post?"<post>":""}${u.timelineStart.toFixed(2)}-${u.resumeTime.toFixed(2)}]`}function wA(u){const t=u.timelineStart,n=u.duration||0;return`["${u.identifier}" ${t.toFixed(2)}-${(t+n).toFixed(2)}]`}class cG{constructor(t,n,r,l){this.hls=void 0,this.interstitial=void 0,this.assetItem=void 0,this.tracks=null,this.hasDetails=!1,this.mediaAttached=null,this._currentTime=void 0,this._bufferedEosTime=void 0,this.checkPlayout=()=>{const y=this.interstitial.playoutLimit,b=this.currentTime;this.startOffset+b>=y&&this.hls.trigger(He.PLAYOUT_LIMIT_REACHED,{})};const d=this.hls=new t(n);this.interstitial=r,this.assetItem=l;let f=l.uri;try{f=yN(f,d.sessionId).href}catch{}d.loadSource(f);const p=()=>{this.hasDetails=!0};d.once(He.LEVEL_LOADED,p),d.once(He.AUDIO_TRACK_LOADED,p),d.once(He.SUBTITLE_TRACK_LOADED,p),d.on(He.MEDIA_ATTACHING,(m,{media:y})=>{this.removeMediaListeners(),this.mediaAttached=y,this.interstitial.playoutLimit&&y.addEventListener("timeupdate",this.checkPlayout)})}bufferedInPlaceToEnd(t){var n;if(!this.interstitial.appendInPlace)return!1;if((n=this.hls)!=null&&n.bufferedToEnd)return!0;if(!t||!this._bufferedEosTime)return!1;const r=this.timelineOffset,l=wr.bufferInfo(t,r,0);return this.getAssetTime(l.end)>=this._bufferedEosTime-.02}get destroyed(){var t;return!((t=this.hls)!=null&&t.userConfig)}get assetId(){return this.assetItem.identifier}get interstitialId(){return this.assetItem.parentIdentifier}get media(){var t;return((t=this.hls)==null?void 0:t.media)||null}get bufferedEnd(){const t=this.media||this.mediaAttached;if(!t)return this._bufferedEosTime?this._bufferedEosTime:this.currentTime;const n=wr.bufferInfo(t,t.currentTime,.001);return this.getAssetTime(n.end)}get currentTime(){const t=this.media||this.mediaAttached;return t?this.getAssetTime(t.currentTime):this._currentTime||0}get duration(){const t=this.assetItem.duration;return t||0}get remaining(){const t=this.duration;return t?Math.max(0,t-this.currentTime):0}get startOffset(){return this.assetItem.startOffset}get timelineOffset(){var t;return((t=this.hls)==null?void 0:t.config.timelineOffset)||0}set timelineOffset(t){const n=this.timelineOffset;if(t!==n){const r=t-n;if(Math.abs(r)>1/9e4){if(this.hasDetails)throw new Error("Cannot set timelineOffset after playlists are loaded");this.hls.config.timelineOffset=t}}}getAssetTime(t){const n=this.timelineOffset,r=this.duration;return Math.min(Math.max(0,t-n),r)}removeMediaListeners(){const t=this.mediaAttached;t&&(this._currentTime=t.currentTime,this.bufferSnapShot(),t.removeEventListener("timeupdate",this.checkPlayout))}bufferSnapShot(){if(this.mediaAttached){var t;(t=this.hls)!=null&&t.bufferedToEnd&&(this._bufferedEosTime=this.bufferedEnd)}}destroy(){this.removeMediaListeners(),this.hls.destroy(),this.hls=this.interstitial=null,this.tracks=this.mediaAttached=this.checkPlayout=null}attachMedia(t){this.hls.attachMedia(t)}detachMedia(){this.removeMediaListeners(),this.mediaAttached=null,this.hls.detachMedia()}resumeBuffering(){this.hls.resumeBuffering()}pauseBuffering(){this.hls.pauseBuffering()}transferMedia(){return this.bufferSnapShot(),this.hls.transferMedia()}on(t,n,r){this.hls.on(t,n)}once(t,n,r){this.hls.once(t,n)}off(t,n,r){this.hls.off(t,n)}toString(){var t,n;return`HlsAssetPlayer: ${wA(this.assetItem)} ${(t=this.hls)==null?void 0:t.sessionId} ${(n=this.interstitial)!=null&&n.appendInPlace?"append-in-place":""}`}}const eL=.033;class dG extends Bd{constructor(t,n){super("interstitials-sched",n),this.onScheduleUpdate=void 0,this.eventMap={},this.events=null,this.items=null,this.durations={primary:0,playout:0,integrated:0},this.onScheduleUpdate=t}destroy(){this.reset(),this.onScheduleUpdate=null}reset(){this.eventMap={},this.setDurations(0,0,0),this.events&&this.events.forEach(t=>t.reset()),this.events=this.items=null}resetErrorsInRange(t,n){return this.events?this.events.reduce((r,l)=>t<=l.startOffset&&n>l.startOffset?(delete l.error,r+1):r,0):0}get duration(){const t=this.items;return t?t[t.length-1].end:0}get length(){return this.items?this.items.length:0}getEvent(t){return t&&this.eventMap[t]||null}hasEvent(t){return t in this.eventMap}findItemIndex(t,n){if(t.event)return this.findEventIndex(t.event.identifier);let r=-1;t.nextEvent?r=this.findEventIndex(t.nextEvent.identifier)-1:t.previousEvent&&(r=this.findEventIndex(t.previousEvent.identifier)+1);const l=this.items;if(l)for(l[r]||(n===void 0&&(n=t.start),r=this.findItemIndexAtTime(n));r>=0&&(d=l[r])!=null&&d.event;){var d;r--}return r}findItemIndexAtTime(t,n){const r=this.items;if(r)for(let l=0;l<r.length;l++){let d=r[l];if(n&&n!=="primary"&&(d=d[n]),t===d.start||t>d.start&&t<d.end)return l}return-1}findJumpRestrictedIndex(t,n){const r=this.items;if(r)for(let l=t;l<=n&&r[l];l++){const d=r[l].event;if(d!=null&&d.restrictions.jump&&!d.appendInPlace)return l}return-1}findEventIndex(t){const n=this.items;if(n)for(let l=n.length;l--;){var r;if(((r=n[l].event)==null?void 0:r.identifier)===t)return l}return-1}findAssetIndex(t,n){const r=t.assetList,l=r.length;if(l>1)for(let d=0;d<l;d++){const f=r[d];if(!f.error){const p=f.timelineStart;if(n===p||n>p&&n<p+(f.duration||0))return d}}return 0}get assetIdAtEnd(){var t,n;const r=(t=this.items)==null||(n=t[this.length-1])==null?void 0:n.event;if(r){const l=r.assetList,d=l[l.length-1];if(d)return d.identifier}return null}parseInterstitialDateRanges(t,n){const r=t.main.details,{dateRanges:l}=r,d=this.events,f=this.parseDateRanges(l,{url:r.url},n),p=Object.keys(l),m=d?d.filter(y=>!p.includes(y.identifier)):[];f.length&&f.sort((y,b)=>{const _=y.cue.pre,A=y.cue.post,w=b.cue.pre,T=b.cue.post;if(_&&!w)return-1;if(w&&!_||A&&!T)return 1;if(T&&!A)return-1;if(!_&&!w&&!A&&!T){const k=y.startTime,U=b.startTime;if(k!==U)return k-U}return y.dateRange.tagOrder-b.dateRange.tagOrder}),this.events=f,m.forEach(y=>{this.removeEvent(y)}),this.updateSchedule(t,m)}updateSchedule(t,n=[]){const r=this.events||[];if(r.length||n.length||this.length<2){const l=this.items,d=this.parseSchedule(r,t);(n.length||(l==null?void 0:l.length)!==d.length||d.some((p,m)=>Math.abs(p.playout.start-l[m].playout.start)>.005||Math.abs(p.playout.end-l[m].playout.end)>.005))&&(this.items=d,this.onScheduleUpdate(n,l))}}parseDateRanges(t,n,r){const l=[],d=Object.keys(t);for(let f=0;f<d.length;f++){const p=d[f],m=t[p];if(m.isInterstitial){let y=this.eventMap[p];y?y.setDateRange(m):(y=new lG(m,n),this.eventMap[p]=y,r===!1&&(y.appendInPlace=r)),l.push(y)}}return l}parseSchedule(t,n){const r=[],l=n.main.details,d=l.live?1/0:l.edge;let f=0;if(t=t.filter(m=>!m.error&&!(m.cue.once&&m.hasPlayed)),t.length){this.resolveOffsets(t,n);let m=0,y=0;if(t.forEach((b,_)=>{const A=b.cue.pre,w=b.cue.post,T=t[_-1]||null,k=b.appendInPlace,U=w?d:b.startOffset,Y=b.duration,se=b.timelineOccupancy===lE.Range?Y:0,te=b.resumptionOffset,Re=(T==null?void 0:T.startTime)===U,Be=U+b.cumulativeDuration;let j=k?Be+Y:U+te;if(A||!w&&U<=0){const Z=y;y+=se,b.timelineStart=Be;const K=f;f+=Y,r.push({event:b,start:Be,end:j,playout:{start:K,end:f},integrated:{start:Z,end:y}})}else if(U<=d){if(!Re){const x=U-m;if(x>eL){const ue=m,$e=y;y+=x;const xe=f;f+=x;const lt={previousEvent:t[_-1]||null,nextEvent:b,start:ue,end:ue+x,playout:{start:xe,end:f},integrated:{start:$e,end:y}};r.push(lt)}else x>0&&T&&(T.cumulativeDuration+=x,r[r.length-1].end=U)}w&&(j=Be),b.timelineStart=Be;const Z=y;y+=se;const K=f;f+=Y,r.push({event:b,start:Be,end:j,playout:{start:K,end:f},integrated:{start:Z,end:y}})}else return;const M=b.resumeTime;w||M>d?m=d:m=M}),m<d){var p;const b=m,_=y,A=d-m;y+=A;const w=f;f+=A,r.push({previousEvent:((p=r[r.length-1])==null?void 0:p.event)||null,nextEvent:null,start:m,end:b+A,playout:{start:w,end:f},integrated:{start:_,end:y}})}this.setDurations(d,f,y)}else r.push({previousEvent:null,nextEvent:null,start:0,end:d,playout:{start:0,end:d},integrated:{start:0,end:d}}),this.setDurations(d,d,d);return r}setDurations(t,n,r){this.durations={primary:t,playout:n,integrated:r}}resolveOffsets(t,n){const r=n.main.details,l=r.live?1/0:r.edge;let d=0,f=-1;t.forEach((p,m)=>{const y=p.cue.pre,b=p.cue.post,_=y?0:b?l:p.startTime;this.updateAssetDurations(p),f===_?p.cumulativeDuration=d:(d=0,f=_),!b&&p.snapOptions.in&&(p.resumeAnchor=Fh(null,r.fragments,p.startOffset+p.resumptionOffset,0,0)||void 0),p.appendInPlace&&!p.appendInPlaceStarted&&(this.primaryCanResumeInPlaceAt(p,n)||(p.appendInPlace=!1)),!p.appendInPlace&&m+1<t.length&&t[m+1].startTime-t[m].resumeTime<eL&&(t[m+1].appendInPlace=!1,t[m+1].appendInPlace&&this.warn(`Could not change append strategy for abutting event ${p}`));const w=xi(p.resumeOffset)?p.resumeOffset:p.duration;d+=w})}primaryCanResumeInPlaceAt(t,n){const r=t.resumeTime,l=t.startTime+t.resumptionOffset;return Math.abs(r-l)>og?(this.log(`"${t.identifier}" resumption ${r} not aligned with estimated timeline end ${l}`),!1):n?!Object.keys(n).some(f=>{const p=n[f].details,m=p.edge;if(r>=m)return this.log(`"${t.identifier}" resumption ${r} past ${f} playlist end ${m}`),!1;const y=Fh(null,p.fragments,r);if(!y)return this.log(`"${t.identifier}" resumption ${r} does not align with any fragments in ${f} playlist (${p.fragStart}-${p.fragmentEnd})`),!0;const b=f==="audio"?.175:0;return Math.abs(y.start-r)<og+b||Math.abs(y.end-r)<og+b?!1:(this.log(`"${t.identifier}" resumption ${r} not aligned with ${f} fragment bounds (${y.start}-${y.end} sn: ${y.sn} cc: ${y.cc})`),!0)}):(this.log(`"${t.identifier}" resumption ${r} can not be aligned with media (none selected)`),!1)}updateAssetDurations(t){if(!t.assetListLoaded)return;const n=t.timelineStart;let r=0,l=!1,d=!1;t.assetList.forEach((f,p)=>{const m=n+r;f.startOffset=r,f.timelineStart=m,l||(l=f.duration===null),d||(d=!!f.error);const y=f.error?0:f.duration||0;r+=y}),l&&!d?t.duration=Math.max(r,t.duration):t.duration=r}removeEvent(t){t.reset(),delete this.eventMap[t.identifier]}}function Ef(u){return`[${u.event?'"'+u.event.identifier+'"':"primary"}: ${u.start.toFixed(2)}-${u.end.toFixed(2)}]`}class fG{constructor(t){this.hls=void 0,this.hls=t}destroy(){this.hls=null}loadAssetList(t,n){const r=t.assetListUrl;let l;try{l=yN(r,this.hls.sessionId,t.baseUrl)}catch(A){const w=this.assignAssetListError(t,pn.ASSET_LIST_LOAD_ERROR,A,r);this.hls.trigger(He.ERROR,w);return}n&&l.protocol!=="data:"&&l.searchParams.set("_HLS_start_offset",""+n);const d=this.hls.config,f=d.loader,p=new f(d),m={responseType:"json",url:l.href},y=d.interstitialAssetListLoadPolicy.default,b={loadPolicy:y,timeout:y.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},_={onSuccess:(A,w,T,k)=>{const U=A.data,Y=U==null?void 0:U.ASSETS;if(!Array.isArray(Y)){const se=this.assignAssetListError(t,pn.ASSET_LIST_PARSING_ERROR,new Error("Invalid interstitial asset list"),T.url,w,k);this.hls.trigger(He.ERROR,se);return}t.assetListResponse=U,this.hls.trigger(He.ASSET_LIST_LOADED,{event:t,assetListResponse:U,networkDetails:k})},onError:(A,w,T,k)=>{const U=this.assignAssetListError(t,pn.ASSET_LIST_LOAD_ERROR,new Error(`Error loading X-ASSET-LIST: HTTP status ${A.code} ${A.text} (${w.url})`),w.url,k,T);this.hls.trigger(He.ERROR,U)},onTimeout:(A,w,T)=>{const k=this.assignAssetListError(t,pn.ASSET_LIST_LOAD_TIMEOUT,new Error(`Timeout loading X-ASSET-LIST (${w.url})`),w.url,A,T);this.hls.trigger(He.ERROR,k)}};return p.load(m,b,_),this.hls.trigger(He.ASSET_LIST_LOADING,{event:t}),p}assignAssetListError(t,n,r,l,d,f){return t.error=r,{type:Hi.NETWORK_ERROR,details:n,fatal:!1,interstitial:t,url:l,error:r,networkDetails:f,stats:d}}}function Md(u,t,n){Fc(u,t,n),u.addEventListener(t,n)}function Fc(u,t,n){u.removeEventListener(t,n)}function tL(u){u==null||u.play().catch(()=>{})}class hG extends Bd{constructor(t,n){super("interstitials",t.logger),this.HlsPlayerClass=void 0,this.hls=void 0,this.assetListLoader=void 0,this.mediaSelection=null,this.altSelection=null,this.media=null,this.detachedData=null,this.requiredTracks=null,this.manager=null,this.playerQueue=[],this.bufferedPos=-1,this.timelinePos=-1,this.schedule=void 0,this.playingItem=null,this.bufferingItem=null,this.waitingItem=null,this.endedItem=null,this.playingAsset=null,this.endedAsset=null,this.bufferingAsset=null,this.shouldPlay=!1,this.onPlay=()=>{this.shouldPlay=!0},this.onPause=()=>{this.shouldPlay=!1},this.onSeeking=()=>{const r=this.currentTime;if(r===void 0||this.playbackDisabled)return;const l=r-this.timelinePos;if(Math.abs(l)<1/7056e5)return;const f=l<=-.01;this.timelinePos=r,this.bufferedPos=r;const p=this.playingItem;if(!p){this.checkBuffer();return}if(f&&this.schedule.resetErrorsInRange(r,r-l)&&this.updateSchedule(),this.checkBuffer(),f&&r<p.start||r>=p.end){var m;const A=this.schedule.findItemIndexAtTime(this.timelinePos);if(!this.isInterstitial(p)&&(m=this.media)!=null&&m.paused&&(this.shouldPlay=!1),!f){const w=this.findItemIndex(p);if(A>w){const T=this.schedule.findJumpRestrictedIndex(w+1,A);if(T>w){this.setSchedulePosition(T);return}}}this.setSchedulePosition(A);return}const y=this.playingAsset;if(!y){if(this.playingLastItem&&this.isInterstitial(p)){const A=p.event.assetList[0];A&&(this.endedItem=this.playingItem,this.playingItem=null,this.setScheduleToAssetAtTime(r,A))}return}const b=y.timelineStart,_=y.duration||0;(f&&r<b||r>=b+_)&&this.setScheduleToAssetAtTime(r,y)},this.onTimeupdate=()=>{const r=this.currentTime;if(r===void 0||this.playbackDisabled)return;if(r>this.timelinePos)this.timelinePos=r,r>this.bufferedPos&&this.checkBuffer();else return;const l=this.playingItem;if(!l||this.playingLastItem)return;if(r>=l.end){this.timelinePos=l.end;const p=this.findItemIndex(l);this.setSchedulePosition(p+1)}const d=this.playingAsset;if(!d)return;const f=d.timelineStart+(d.duration||0);r>=f&&this.setScheduleToAssetAtTime(r,d)},this.onScheduleUpdate=(r,l)=>{const d=this.schedule,f=this.playingItem,p=d.events||[],m=d.items||[],y=d.durations,b=r.map(w=>w.identifier),_=!!(p.length||b.length);if(_&&this.log(`INTERSTITIALS_UPDATED (${p.length}): ${p}
Schedule: ${m.map(w=>Ef(w))}`),b.length&&this.log(`Removed events ${b}`),this.playerQueue.forEach(w=>{if(w.interstitial.appendInPlace){const T=w.assetItem.timelineStart,k=w.timelineOffset-T;if(k)try{w.timelineOffset=T}catch(U){Math.abs(k)>og&&this.warn(`${U} ("${w.assetId}" ${w.timelineOffset}->${T})`)}}}),f){const w=this.updateItem(f,this.timelinePos);this.itemsMatch(f,w)&&(this.playingItem=w,this.waitingItem=this.endedItem=null)}else this.waitingItem=this.updateItem(this.waitingItem),this.endedItem=this.updateItem(this.endedItem);const A=this.bufferingItem;if(A){const w=this.updateItem(A,this.bufferedPos);this.itemsMatch(A,w)?this.bufferingItem=w:A.event&&(this.bufferingItem=this.playingItem,this.clearInterstitial(A.event,null))}if(r.forEach(w=>{w.assetList.forEach(T=>{this.clearAssetPlayer(T.identifier,null)})}),_||l){if(this.hls.trigger(He.INTERSTITIALS_UPDATED,{events:p.slice(0),schedule:m.slice(0),durations:y,removedIds:b}),this.isInterstitial(f)&&b.includes(f.event.identifier)){this.warn(`Interstitial "${f.event.identifier}" removed while playing`),this.primaryFallback(f.event);return}this.checkBuffer()}},this.hls=t,this.HlsPlayerClass=n,this.assetListLoader=new fG(t),this.schedule=new dG(this.onScheduleUpdate,t.logger),this.registerListeners()}registerListeners(){const t=this.hls;t.on(He.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(He.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(He.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(He.MANIFEST_LOADING,this.onManifestLoading,this),t.on(He.LEVEL_UPDATED,this.onLevelUpdated,this),t.on(He.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.on(He.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),t.on(He.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),t.on(He.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),t.on(He.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),t.on(He.ASSET_LIST_LOADED,this.onAssetListLoaded,this),t.on(He.BUFFER_APPENDED,this.onBufferAppended,this),t.on(He.BUFFER_FLUSHED,this.onBufferFlushed,this),t.on(He.BUFFERED_TO_END,this.onBufferedToEnd,this),t.on(He.MEDIA_ENDED,this.onMediaEnded,this),t.on(He.ERROR,this.onError,this),t.on(He.DESTROYING,this.onDestroying,this)}unregisterListeners(){const t=this.hls;t&&(t.off(He.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(He.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(He.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(He.MANIFEST_LOADING,this.onManifestLoading,this),t.off(He.LEVEL_UPDATED,this.onLevelUpdated,this),t.off(He.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.off(He.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),t.off(He.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),t.off(He.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),t.off(He.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),t.off(He.ASSET_LIST_LOADED,this.onAssetListLoaded,this),t.off(He.BUFFER_CODECS,this.onBufferCodecs,this),t.off(He.BUFFER_APPENDED,this.onBufferAppended,this),t.off(He.BUFFER_FLUSHED,this.onBufferFlushed,this),t.off(He.BUFFERED_TO_END,this.onBufferedToEnd,this),t.off(He.MEDIA_ENDED,this.onMediaEnded,this),t.off(He.ERROR,this.onError,this),t.off(He.DESTROYING,this.onDestroying,this))}startLoad(){this.resumeBuffering()}stopLoad(){this.pauseBuffering()}resumeBuffering(){var t;(t=this.getBufferingPlayer())==null||t.resumeBuffering()}pauseBuffering(){var t;(t=this.getBufferingPlayer())==null||t.pauseBuffering()}destroy(){this.unregisterListeners(),this.stopLoad(),this.assetListLoader&&this.assetListLoader.destroy(),this.emptyPlayerQueue(),this.clearScheduleState(),this.schedule&&this.schedule.destroy(),this.media=this.detachedData=this.mediaSelection=this.requiredTracks=this.altSelection=this.manager=null,this.hls=this.HlsPlayerClass=this.schedule=this.log=null,this.assetListLoader=null,this.onPlay=this.onPause=this.onSeeking=this.onTimeupdate=null,this.onScheduleUpdate=null}onDestroying(){const t=this.primaryMedia||this.media;t&&this.removeMediaListeners(t)}removeMediaListeners(t){Fc(t,"play",this.onPlay),Fc(t,"pause",this.onPause),Fc(t,"seeking",this.onSeeking),Fc(t,"timeupdate",this.onTimeupdate)}onMediaAttaching(t,n){const r=this.media=n.media;Md(r,"seeking",this.onSeeking),Md(r,"timeupdate",this.onTimeupdate),Md(r,"play",this.onPlay),Md(r,"pause",this.onPause)}onMediaAttached(t,n){const r=this.effectivePlayingItem,l=this.detachedData;if(this.detachedData=null,r===null)this.checkStart();else if(!l){this.clearScheduleState();const d=this.findItemIndex(r);this.setSchedulePosition(d)}}clearScheduleState(){this.playingItem=this.bufferingItem=this.waitingItem=this.endedItem=this.playingAsset=this.endedAsset=this.bufferingAsset=null}onMediaDetaching(t,n){const r=!!n.transferMedia,l=this.media;if(this.media=null,!r&&(l&&this.removeMediaListeners(l),this.detachedData)){const d=this.getBufferingPlayer();d&&(this.playingAsset=this.endedAsset=this.bufferingAsset=this.bufferingItem=this.waitingItem=this.detachedData=null,d.detachMedia()),this.shouldPlay=!1}}get interstitialsManager(){if(!this.manager){if(!this.hls)return null;const t=this,n=()=>t.bufferingItem||t.waitingItem,r=_=>_&&t.getAssetPlayer(_.identifier),l=(_,A,w,T,k)=>{if(_){let U=_[A].start;const Y=_.event;if(Y){if(A==="playout"||Y.timelineOccupancy!==lE.Point){const se=r(w);(se==null?void 0:se.interstitial)===Y&&(U+=se.assetItem.startOffset+se[k])}}else{const se=T==="bufferedPos"?f():t[T];U+=se-_.start}return U}return 0},d=(_,A)=>{if(_!==0&&A!=="primary"&&t.schedule.length){var w;const T=t.schedule.findItemIndexAtTime(_),k=(w=t.schedule.items)==null?void 0:w[T];if(k){const U=k[A].start-k.start;return _+U}}return _},f=()=>{const _=t.bufferedPos;return _===Number.MAX_VALUE?p("primary"):Math.max(_,0)},p=_=>{var A;return(A=t.primaryDetails)!=null&&A.live?t.primaryDetails.edge:t.schedule.durations[_]},m=(_,A)=>{var w,T;const k=t.effectivePlayingItem;if(k!=null&&(w=k.event)!=null&&w.restrictions.skip)return;t.log(`seek to ${_} "${A}"`);const U=t.effectivePlayingItem,Y=t.schedule.findItemIndexAtTime(_,A),se=(T=t.schedule.items)==null?void 0:T[Y],te=t.getBufferingPlayer(),Re=te==null?void 0:te.interstitial,Be=Re==null?void 0:Re.appendInPlace,j=U&&t.itemsMatch(U,se);if(U&&(Be||j)){const Z=r(t.playingAsset),K=(Z==null?void 0:Z.media)||t.primaryMedia;if(K){const x=A==="primary"?K.currentTime:l(U,A,t.playingAsset,"timelinePos","currentTime"),ue=_-x,$e=(Be?x:K.currentTime)+ue;if($e>=0&&(!Z||Be||$e<=Z.duration)){K.currentTime=$e;return}}}if(se){let Z=_;if(A!=="primary"){const x=se[A].start,ue=_-x;Z=se.start+ue}const K=!t.isInterstitial(se);if((!t.isInterstitial(U)||U.event.appendInPlace)&&(K||se.event.appendInPlace)){const x=t.media||(Be?te==null?void 0:te.media:null);x&&(x.currentTime=Z)}else if(U){const x=t.findItemIndex(U);if(Y>x){const $e=t.schedule.findJumpRestrictedIndex(x+1,Y);if($e>x){t.setSchedulePosition($e);return}}let ue=0;if(K)t.timelinePos=Z,t.checkBuffer();else{var M;const $e=se==null||(M=se.event)==null?void 0:M.assetList;if($e){const xe=_-(se[A]||se).start;for(let lt=$e.length;lt--;){const et=$e[lt];if(et.duration&&xe>=et.startOffset&&xe<et.startOffset+et.duration){ue=lt;break}}}}t.setSchedulePosition(Y,ue)}}},y=()=>{const _=t.effectivePlayingItem;if(t.isInterstitial(_))return _;const A=n();return t.isInterstitial(A)?A:null},b={get currentTime(){const _=y(),A=t.effectivePlayingItem;return A&&A===_?l(A,"playout",t.effectivePlayingAsset,"timelinePos","currentTime")-A.playout.start:0},set currentTime(_){const A=y(),w=t.effectivePlayingItem;w&&w===A&&m(_+w.playout.start,"playout")},get duration(){const _=y();return _?_.playout.end-_.playout.start:0},get assetPlayers(){var _;const A=(_=y())==null?void 0:_.event.assetList;return A?A.map(w=>t.getAssetPlayer(w.identifier)):[]},get playingIndex(){var _;const A=(_=y())==null?void 0:_.event;return A&&t.effectivePlayingAsset?A.findAssetIndex(t.effectivePlayingAsset):-1},get scheduleItem(){return y()}};this.manager={get events(){var _,A;return((_=t.schedule)==null||(A=_.events)==null?void 0:A.slice(0))||[]},get schedule(){var _,A;return((_=t.schedule)==null||(A=_.items)==null?void 0:A.slice(0))||[]},get interstitialPlayer(){return y()?b:null},get playerQueue(){return t.playerQueue.slice(0)},get bufferingAsset(){return t.bufferingAsset},get bufferingItem(){return n()},get bufferingIndex(){const _=n();return t.findItemIndex(_)},get playingAsset(){return t.effectivePlayingAsset},get playingItem(){return t.effectivePlayingItem},get playingIndex(){const _=t.effectivePlayingItem;return t.findItemIndex(_)},primary:{get bufferedEnd(){return f()},get currentTime(){const _=t.timelinePos;return _>0?_:0},set currentTime(_){m(_,"primary")},get duration(){return p("primary")},get seekableStart(){var _;return((_=t.primaryDetails)==null?void 0:_.fragmentStart)||0}},integrated:{get bufferedEnd(){return l(n(),"integrated",t.bufferingAsset,"bufferedPos","bufferedEnd")},get currentTime(){return l(t.effectivePlayingItem,"integrated",t.effectivePlayingAsset,"timelinePos","currentTime")},set currentTime(_){m(_,"integrated")},get duration(){return p("integrated")},get seekableStart(){var _;return d(((_=t.primaryDetails)==null?void 0:_.fragmentStart)||0,"integrated")}},skip:()=>{const _=t.effectivePlayingItem,A=_==null?void 0:_.event;if(A&&!A.restrictions.skip){const w=t.findItemIndex(_);if(A.appendInPlace){const T=_.playout.start+_.event.duration;m(T+.001,"playout")}else t.advanceAfterAssetEnded(A,w,1/0)}}}}return this.manager}get effectivePlayingItem(){return this.waitingItem||this.playingItem||this.endedItem}get effectivePlayingAsset(){return this.playingAsset||this.endedAsset}get playingLastItem(){var t;const n=this.playingItem,r=(t=this.schedule)==null?void 0:t.items;return!this.playbackStarted||!n||!r?!1:this.findItemIndex(n)===r.length-1}get playbackStarted(){return this.effectivePlayingItem!==null}get currentTime(){var t,n,r;if(this.mediaSelection===null)return;const l=this.waitingItem||this.playingItem;if(this.isInterstitial(l)&&!l.event.appendInPlace)return;let d=this.media;!d&&(t=this.bufferingItem)!=null&&(n=t.event)!=null&&n.appendInPlace&&(d=this.primaryMedia);const f=(r=d)==null?void 0:r.currentTime;if(!(f===void 0||!xi(f)))return f}get primaryMedia(){var t;return this.media||((t=this.detachedData)==null?void 0:t.media)||null}isInterstitial(t){return!!(t!=null&&t.event)}retreiveMediaSource(t,n){const r=this.getAssetPlayer(t);r&&this.transferMediaFromPlayer(r,n)}transferMediaFromPlayer(t,n){const r=t.interstitial.appendInPlace,l=t.media;if(r&&l===this.primaryMedia){if(this.bufferingAsset=null,(!n||this.isInterstitial(n)&&!n.event.appendInPlace)&&n&&l){this.detachedData={media:l};return}const d=t.transferMedia();this.log(`transfer MediaSource from ${t} ${Bs(d)}`),this.detachedData=d}else n&&l&&(this.shouldPlay||(this.shouldPlay=!l.paused))}transferMediaTo(t,n){var r,l;if(t.media===n)return;let d=null;const f=this.hls,p=t!==f,m=p&&t.interstitial.appendInPlace,y=(r=this.detachedData)==null?void 0:r.mediaSource;let b;if(f.media)m&&(d=f.transferMedia(),this.detachedData=d),b="Primary";else if(y){const w=this.getBufferingPlayer();w?(d=w.transferMedia(),b=`${w}`):b="detached MediaSource"}else b="detached media";if(!d){if(y)d=this.detachedData,this.log(`using detachedData: MediaSource ${Bs(d)}`);else if(!this.detachedData||f.media===n){const w=this.playerQueue;w.length>1&&w.forEach(T=>{if(p&&T.interstitial.appendInPlace!==m){const k=T.interstitial;this.clearInterstitial(T.interstitial,null),k.appendInPlace=!1,k.appendInPlace&&this.warn(`Could not change append strategy for queued assets ${k}`)}}),this.hls.detachMedia(),this.detachedData={media:n}}}const _=d&&"mediaSource"in d&&((l=d.mediaSource)==null?void 0:l.readyState)!=="closed",A=_&&d?d:n;if(this.log(`${_?"transfering MediaSource":"attaching media"} to ${p?t:"Primary"} from ${b}`),A===d){const w=p&&t.assetId===this.schedule.assetIdAtEnd;A.overrides={duration:this.schedule.duration,endOfStream:!p||w,cueRemoval:!p}}t.attachMedia(A)}onInterstitialCueEnter(){this.onTimeupdate()}checkStart(){const t=this.schedule,n=t.events;if(!n||this.playbackDisabled||!this.media)return;this.bufferedPos===-1&&(this.bufferedPos=0);const r=this.timelinePos,l=this.effectivePlayingItem;if(r===-1){const d=this.hls.startPosition;if(this.timelinePos=d,n.length&&n[0].cue.pre){const f=t.findEventIndex(n[0].identifier);this.setSchedulePosition(f)}else if(d>=0||!this.primaryLive){const f=this.timelinePos=d>0?d:0,p=t.findItemIndexAtTime(f);this.setSchedulePosition(p)}}else if(l&&!this.playingItem){const d=t.findItemIndex(l);this.setSchedulePosition(d)}}advanceAfterAssetEnded(t,n,r){const l=r+1;if(!t.isAssetPastPlayoutLimit(l)&&!t.assetList[l].error)this.setSchedulePosition(n,l);else{const d=this.schedule.items;if(d){const f=n+1,p=d.length;if(f>=p){this.setSchedulePosition(-1);return}const m=t.resumeTime;this.timelinePos<m&&(this.timelinePos=m,this.checkBuffer()),this.setSchedulePosition(f)}}}setScheduleToAssetAtTime(t,n){const r=this.schedule,l=n.parentIdentifier,d=r.getEvent(l);if(d){const f=r.findEventIndex(l),p=r.findAssetIndex(d,t);this.setSchedulePosition(f,p)}}setSchedulePosition(t,n){const r=this.schedule.items;if(!r||this.playbackDisabled)return;this.log(`setSchedulePosition ${t}, ${n}`);const l=t>=0?r[t]:null,d=this.playingItem,f=this.playingLastItem;if(this.isInterstitial(d)){var p;const y=d.event,b=this.playingAsset,_=b==null?void 0:b.identifier,A=_?this.getAssetPlayer(_):null;if(A&&_&&(!this.eventItemsMatch(d,l)||n!==void 0&&_!==((p=y.assetList)==null?void 0:p[n].identifier))){var m;const w=y.findAssetIndex(b);this.log(`INTERSTITIAL_ASSET_ENDED ${w+1}/${y.assetList.length} ${wA(b)}`),this.endedAsset=b,this.playingAsset=null,this.hls.trigger(He.INTERSTITIAL_ASSET_ENDED,{asset:b,assetListIndex:w,event:y,schedule:r.slice(0),scheduleIndex:t,player:A}),this.retreiveMediaSource(_,l),A.media&&!((m=this.detachedData)!=null&&m.mediaSource)&&A.detachMedia()}if(!this.eventItemsMatch(d,l)&&(this.endedItem=d,this.playingItem=null,this.log(`INTERSTITIAL_ENDED ${y} ${Ef(d)}`),y.hasPlayed=!0,this.hls.trigger(He.INTERSTITIAL_ENDED,{event:y,schedule:r.slice(0),scheduleIndex:t}),y.cue.once)){this.updateSchedule();const w=this.schedule.items;if(l&&w){const T=this.schedule.findItemIndex(l);this.advanceSchedule(T,w,n,d,f)}return}}this.advanceSchedule(t,r,n,d,f)}advanceSchedule(t,n,r,l,d){const f=t>=0?n[t]:null,p=this.primaryMedia,m=this.playerQueue;if(m.length&&m.forEach(y=>{const b=y.interstitial,_=this.schedule.findEventIndex(b.identifier);(_<t||_>t+1)&&this.clearInterstitial(b,f)}),this.isInterstitial(f)){this.timelinePos=Math.min(Math.max(this.timelinePos,f.start),f.end);const y=f.event;r===void 0&&(r=this.schedule.findAssetIndex(y,this.timelinePos));const b=this.waitingItem;this.assetsBuffered(f,p)||this.setBufferingItem(f);let _=this.preloadAssets(y,r);if(this.eventItemsMatch(f,b||l)||(this.waitingItem=f,this.log(`INTERSTITIAL_STARTED ${Ef(f)} ${y.appendInPlace?"append in place":""}`),this.hls.trigger(He.INTERSTITIAL_STARTED,{event:y,schedule:n.slice(0),scheduleIndex:t})),!y.assetListLoaded){this.log(`Waiting for ASSET-LIST to complete loading ${y}`);return}if(y.assetListLoader&&(y.assetListLoader.destroy(),y.assetListLoader=void 0),!p){this.log(`Waiting for attachMedia to start Interstitial ${y}`);return}this.waitingItem=this.endedItem=null,this.playingItem=f;const A=y.assetList[r];if(!A){const w=n[t+1],T=this.media;w&&T&&!this.isInterstitial(w)&&T.currentTime<w.start&&(T.currentTime=this.timelinePos=w.start),this.advanceAfterAssetEnded(y,t,r||0);return}if(_||(_=this.getAssetPlayer(A.identifier)),_===null||_.destroyed){const w=y.assetList.length;this.warn(`asset ${r+1}/${w} player destroyed ${y}`),_=this.createAssetPlayer(y,A,r)}if(!this.eventItemsMatch(f,this.bufferingItem)&&y.appendInPlace&&this.isAssetBuffered(A))return;this.startAssetPlayer(_,r,n,t,p),this.shouldPlay&&tL(_.media)}else f!==null?(this.resumePrimary(f,t,l),this.shouldPlay&&tL(this.hls.media)):d&&this.isInterstitial(l)&&(this.endedItem=null,this.playingItem=l,l.event.appendInPlace||this.attachPrimary(this.schedule.durations.primary,null))}get playbackDisabled(){return this.hls.config.enableInterstitialPlayback===!1}get primaryDetails(){var t,n;return(t=this.mediaSelection)==null||(n=t.main)==null?void 0:n.details}get primaryLive(){var t;return!!((t=this.primaryDetails)!=null&&t.live)}resumePrimary(t,n,r){var l;if(this.playingItem=t,this.playingAsset=this.endedAsset=null,this.waitingItem=this.endedItem=null,this.bufferedToItem(t),this.log(`resuming ${Ef(t)}`),!((l=this.detachedData)!=null&&l.mediaSource)){let f=this.timelinePos;(f<t.start||f>=t.end)&&(f=this.getPrimaryResumption(t,n),this.timelinePos=f),this.attachPrimary(f,t)}if(!r)return;const d=this.schedule.items;d&&(this.log(`resumed ${Ef(t)}`),this.hls.trigger(He.INTERSTITIALS_PRIMARY_RESUMED,{schedule:d.slice(0),scheduleIndex:n}),this.checkBuffer())}getPrimaryResumption(t,n){const r=t.start;if(this.primaryLive){const l=this.primaryDetails;if(n===0)return this.hls.startPosition;if(l&&(r<l.fragmentStart||r>l.edge))return this.hls.liveSyncPosition||-1}return r}isAssetBuffered(t){const n=this.getAssetPlayer(t.identifier);return n!=null&&n.hls?n.hls.bufferedToEnd:wr.bufferInfo(this.primaryMedia,this.timelinePos,0).end+1>=t.timelineStart+(t.duration||0)}attachPrimary(t,n,r){n?this.setBufferingItem(n):this.bufferingItem=this.playingItem,this.bufferingAsset=null;const l=this.primaryMedia;if(!l)return;const d=this.hls;d.media?this.checkBuffer():(this.transferMediaTo(d,l),r&&this.startLoadingPrimaryAt(t,r)),r||(this.timelinePos=t,this.startLoadingPrimaryAt(t,r))}startLoadingPrimaryAt(t,n){var r;const l=this.hls;!l.loadingEnabled||!l.media||Math.abs((((r=l.mainForwardBufferInfo)==null?void 0:r.start)||l.media.currentTime)-t)>.5?l.startLoad(t,n):l.bufferingEnabled||l.resumeBuffering()}onManifestLoading(){this.stopLoad(),this.schedule.reset(),this.emptyPlayerQueue(),this.clearScheduleState(),this.shouldPlay=!1,this.bufferedPos=this.timelinePos=-1,this.mediaSelection=this.altSelection=this.manager=this.requiredTracks=null,this.hls.off(He.BUFFER_CODECS,this.onBufferCodecs,this),this.hls.on(He.BUFFER_CODECS,this.onBufferCodecs,this)}onLevelUpdated(t,n){if(n.level===-1)return;const r=this.hls.levels[n.level],l=as(as({},this.mediaSelection||this.altSelection),{},{main:r});this.mediaSelection=l,this.schedule.parseInterstitialDateRanges(l,this.hls.config.interstitialAppendInPlace),!this.effectivePlayingItem&&this.schedule.items&&this.checkStart()}onAudioTrackUpdated(t,n){const r=this.hls.audioTracks[n.id],l=this.mediaSelection;if(!l){this.altSelection=as(as({},this.altSelection),{},{audio:r});return}const d=as(as({},l),{},{audio:r});this.mediaSelection=d}onSubtitleTrackUpdated(t,n){const r=this.hls.subtitleTracks[n.id],l=this.mediaSelection;if(!l){this.altSelection=as(as({},this.altSelection),{},{subtitles:r});return}const d=as(as({},l),{},{subtitles:r});this.mediaSelection=d}onAudioTrackSwitching(t,n){const r=h2(n);this.playerQueue.forEach(l=>l.hls.setAudioOption(n)||l.hls.setAudioOption(r))}onSubtitleTrackSwitch(t,n){const r=h2(n);this.playerQueue.forEach(l=>l.hls.setSubtitleOption(n)||n.id!==-1&&l.hls.setSubtitleOption(r))}onBufferCodecs(t,n){const r=n.tracks;r&&(this.requiredTracks=r)}onBufferAppended(t,n){this.checkBuffer()}onBufferFlushed(t,n){const r=this.playingItem;if(r&&!this.itemsMatch(r,this.bufferingItem)&&!this.isInterstitial(r)){const l=this.timelinePos;this.bufferedPos=l,this.checkBuffer()}}onBufferedToEnd(t){const n=this.schedule.events;if(this.bufferedPos<Number.MAX_VALUE&&n){for(let l=0;l<n.length;l++){const d=n[l];if(d.cue.post){var r;const f=this.schedule.findEventIndex(d.identifier),p=(r=this.schedule.items)==null?void 0:r[f];this.isInterstitial(p)&&this.eventItemsMatch(p,this.bufferingItem)&&this.bufferedToItem(p,0);break}}this.bufferedPos=Number.MAX_VALUE}}onMediaEnded(t){const n=this.playingItem;if(!this.playingLastItem&&n){const r=this.findItemIndex(n);this.setSchedulePosition(r+1)}else this.shouldPlay=!1}updateItem(t,n){const r=this.schedule.items;if(t&&r){const l=this.findItemIndex(t,n);return r[l]||null}return null}itemsMatch(t,n){return!!n&&(t===n||t.event&&n.event&&this.eventItemsMatch(t,n)||!t.event&&!n.event&&this.findItemIndex(t)===this.findItemIndex(n))}eventItemsMatch(t,n){var r;return!!n&&(t===n||t.event.identifier===((r=n.event)==null?void 0:r.identifier))}findItemIndex(t,n){return t?this.schedule.findItemIndex(t,n):-1}updateSchedule(){const t=this.mediaSelection;t&&this.schedule.updateSchedule(t,[])}checkBuffer(t){const n=this.schedule.items;if(!n)return;const r=wr.bufferInfo(this.primaryMedia,this.timelinePos,0);t&&(this.bufferedPos=this.timelinePos),t||(t=r.len<1),this.updateBufferedPos(r.end,n,t)}updateBufferedPos(t,n,r){const l=this.schedule,d=this.bufferingItem;if(this.bufferedPos>t)return;if(n.length===1&&this.itemsMatch(n[0],d)){this.bufferedPos=t;return}const f=this.playingItem,p=this.findItemIndex(f);let m=l.findItemIndexAtTime(t);if(this.bufferedPos<t){var y,b;const _=this.findItemIndex(d),A=Math.min(_+1,n.length-1),w=n[A];if((m===-1&&d&&t>=d.end||(y=w.event)!=null&&y.appendInPlace&&t+.01>=w.start)&&(m=A),A-p>1&&(d==null||(b=d.event)==null?void 0:b.appendInPlace)===!1)return;if(this.bufferedPos=t,m>_&&m>p)this.bufferedToItem(w);else{const T=this.primaryDetails;this.primaryLive&&T&&t>T.edge-T.targetduration&&w.start<T.edge+this.hls.config.interstitialLiveLookAhead&&this.isInterstitial(w)&&this.preloadAssets(w.event,0)}}else r&&f&&!this.itemsMatch(f,d)&&(m===p?this.bufferedToItem(f):m===p+1&&this.bufferedToItem(n[m]))}assetsBuffered(t,n){return t.event.assetList.length===0?!1:!t.event.assetList.some(l=>{const d=this.getAssetPlayer(l.identifier);return!(d!=null&&d.bufferedInPlaceToEnd(n))})}setBufferingItem(t){const n=this.bufferingItem,r=this.schedule;if(this.itemsMatch(t,n))this.bufferingItem!==t&&(this.bufferingItem=t);else{const{items:l,events:d}=r;if(!l||!d)return n;const f=this.isInterstitial(t),p=this.getBufferingPlayer();if(this.bufferingItem=t,this.bufferedPos=Math.max(t.start,Math.min(t.end,this.timelinePos)),!this.playbackDisabled){const m=p?p.remaining:n?n.end-this.timelinePos:0;this.log(`buffered to boundary ${Ef(t)}`+(n?` (${m.toFixed(2)} remaining)`:"")),f?t.event.assetList.forEach(y=>{const b=this.getAssetPlayer(y.identifier);b&&b.resumeBuffering()}):(this.hls.resumeBuffering(),this.playerQueue.forEach(y=>y.pauseBuffering()))}this.hls.trigger(He.INTERSTITIALS_BUFFERED_TO_BOUNDARY,{events:d.slice(0),schedule:l.slice(0),bufferingIndex:this.findItemIndex(t),playingIndex:this.findItemIndex(this.playingItem)})}return n}bufferedToItem(t,n=0){const r=this.setBufferingItem(t);if(!this.playbackDisabled){if(this.isInterstitial(t))this.bufferedToEvent(t,n);else if(r!==null){this.bufferingAsset=null;const l=this.detachedData;l?l.mediaSource?this.attachPrimary(t.start,t,!0):this.preloadPrimary(t):this.preloadPrimary(t)}}}preloadPrimary(t){const n=this.findItemIndex(t),r=this.getPrimaryResumption(t,n);this.startLoadingPrimaryAt(r)}bufferedToEvent(t,n){const r=t.event,l=r.assetList.length===0&&!r.assetListLoader,d=r.cue.once;if(l||!d){const f=this.preloadAssets(r,n);if(f!=null&&f.interstitial.appendInPlace){const p=r.assetList[n],m=this.primaryMedia;p&&m&&this.bufferAssetPlayer(f,m)}}}preloadAssets(t,n){const r=t.assetUrl,l=t.assetList.length,d=l===0&&!t.assetListLoader,f=t.cue.once;if(d){const m=t.timelineStart;if(t.appendInPlace){var p;const A=this.playingItem;!this.isInterstitial(A)&&(A==null||(p=A.nextEvent)==null?void 0:p.identifier)===t.identifier&&this.flushFrontBuffer(m+.25)}let y,b=0;if(!this.playingItem&&this.primaryLive&&(b=this.hls.startPosition,b===-1&&(b=this.hls.liveSyncPosition||0)),b&&!(t.cue.pre||t.cue.post)){const A=b-m;A>0&&(y=Math.round(A*1e3)/1e3)}if(this.log(`Load interstitial asset ${n+1}/${r?1:l} ${t}${y?` live-start: ${b} start-offset: ${y}`:""}`),r)return this.createAsset(t,0,0,m,t.duration,r);const _=this.assetListLoader.loadAssetList(t,y);_&&(t.assetListLoader=_)}else if(!f&&l){for(let m=n;m<l;m++){const y=t.assetList[m],b=this.getAssetPlayerQueueIndex(y.identifier);(b===-1||this.playerQueue[b].destroyed)&&!y.error&&this.createAssetPlayer(t,y,m)}return this.getAssetPlayer(t.assetList[n].identifier)}return null}flushFrontBuffer(t){const n=this.requiredTracks;if(!n)return;this.log(`Removing front buffer starting at ${t}`),Object.keys(n).forEach(l=>{this.hls.trigger(He.BUFFER_FLUSHING,{startOffset:t,endOffset:1/0,type:l})})}getAssetPlayerQueueIndex(t){const n=this.playerQueue;for(let r=0;r<n.length;r++)if(t===n[r].assetId)return r;return-1}getAssetPlayer(t){const n=this.getAssetPlayerQueueIndex(t);return this.playerQueue[n]||null}getBufferingPlayer(){const{playerQueue:t,primaryMedia:n}=this;if(n){for(let r=0;r<t.length;r++)if(t[r].media===n)return t[r]}return null}createAsset(t,n,r,l,d,f){const p={parentIdentifier:t.identifier,identifier:oG(t,f,n),duration:d,startOffset:r,timelineStart:l,uri:f};return this.createAssetPlayer(t,p,n)}createAssetPlayer(t,n,r){this.log(`create HLSAssetPlayer for ${wA(n)}`);const l=this.hls,d=l.userConfig;let f=d.videoPreference;const p=l.loadLevelObj||l.levels[l.currentLevel];(f||p)&&(f=hs({},f),p.videoCodec&&(f.videoCodec=p.videoCodec),p.videoRange&&(f.allowedVideoRanges=[p.videoRange]));const m=l.audioTracks[l.audioTrack],y=l.subtitleTracks[l.subtitleTrack];let b=0;if(this.primaryLive||t.appendInPlace){const te=this.timelinePos-n.timelineStart;if(te>1){const Re=n.duration;Re&&te<Re&&(b=te)}}const _=n.identifier,A=as(as({},d),{},{autoStartLoad:!0,startFragPrefetch:!0,primarySessionId:l.sessionId,assetPlayerId:_,abrEwmaDefaultEstimate:l.bandwidthEstimate,interstitialsController:void 0,startPosition:b,liveDurationInfinity:!1,testBandwidth:!1,videoPreference:f,audioPreference:m||d.audioPreference,subtitlePreference:y||d.subtitlePreference});t.appendInPlace&&(t.appendInPlaceStarted=!0,n.timelineStart&&(A.timelineOffset=n.timelineStart));const w=A.cmcd;w!=null&&w.sessionId&&w.contentId&&(A.cmcd=hs({},w,{contentId:my(n.uri)})),this.getAssetPlayer(_)&&this.warn(`Duplicate date range identifier ${t} and asset ${_}`);const T=new cG(this.HlsPlayerClass,A,t,n);this.playerQueue.push(T),t.assetList[r]=n;const k=te=>{if(te.live){const j=new Error(`Interstitials MUST be VOD assets ${t}`),M={fatal:!0,type:Hi.OTHER_ERROR,details:pn.INTERSTITIAL_ASSET_ITEM_ERROR,error:j};this.handleAssetItemError(M,t,this.schedule.findEventIndex(t.identifier),r,j.message);return}const Re=te.edge-te.fragmentStart,Be=n.duration;(Be===null||Re>Be)&&(this.log(`Interstitial asset "${_}" duration change ${Be} > ${Re}`),n.duration=Re,this.updateSchedule())};T.on(He.LEVEL_UPDATED,(te,{details:Re})=>k(Re)),T.on(He.LEVEL_PTS_UPDATED,(te,{details:Re})=>k(Re));const U=(te,Re)=>{const Be=this.getAssetPlayer(_);if(Be&&Re.tracks){Be.off(He.BUFFER_CODECS,U),Be.tracks=Re.tracks;const j=this.primaryMedia;this.bufferingAsset===Be.assetItem&&j&&!Be.media&&this.bufferAssetPlayer(Be,j)}};T.on(He.BUFFER_CODECS,U);const Y=()=>{var te;const Re=this.getAssetPlayer(_);if(this.log(`buffered to end of asset ${Re}`),!Re)return;const Be=this.schedule.findEventIndex(t.identifier),j=t.findAssetIndex(n),M=j+1,Z=(te=this.schedule.items)==null?void 0:te[Be];if(this.isInterstitial(Z))if(j!==-1&&!t.isAssetPastPlayoutLimit(M)&&!t.assetList[M].error)this.bufferedToItem(Z,M);else{var K;const x=(K=this.schedule.items)==null?void 0:K[Be+1];x&&this.bufferedToItem(x)}};T.on(He.BUFFERED_TO_END,Y);const se=te=>()=>{if(!this.getAssetPlayer(_))return;this.shouldPlay=!0;const Be=this.schedule.findEventIndex(t.identifier);this.advanceAfterAssetEnded(t,Be,te)};return T.once(He.MEDIA_ENDED,se(r)),T.once(He.PLAYOUT_LIMIT_REACHED,se(1/0)),T.on(He.ERROR,(te,Re)=>{const Be=this.getAssetPlayer(_);if(Re.details===pn.BUFFER_STALLED_ERROR){if(Be!=null&&Be.media){const j=Be.currentTime,M=Be.duration-j;j&&t.appendInPlace&&M/Be.media.playbackRate<.5?(this.log(`Advancing buffer past end of asset ${_} ${t} at ${Be.media.currentTime}`),Y()):(this.warn(`Stalled at ${j} of ${j+M} in asset ${_} ${t}`),this.onTimeupdate(),this.checkBuffer(!0))}return}this.handleAssetItemError(Re,t,this.schedule.findEventIndex(t.identifier),r,`Asset player error ${Re.error} ${t}`)}),T.on(He.DESTROYING,()=>{if(!this.getAssetPlayer(_))return;const Re=new Error(`Asset player destroyed unexpectedly ${_}`),Be={fatal:!0,type:Hi.OTHER_ERROR,details:pn.INTERSTITIAL_ASSET_ITEM_ERROR,error:Re};this.handleAssetItemError(Be,t,this.schedule.findEventIndex(t.identifier),r,Re.message)}),this.hls.trigger(He.INTERSTITIAL_ASSET_PLAYER_CREATED,{asset:n,assetListIndex:r,event:t,player:T}),T}clearInterstitial(t,n){t.assetList.forEach(r=>{this.clearAssetPlayer(r.identifier,n)}),t.reset()}clearAssetPlayer(t,n){const r=this.getAssetPlayerQueueIndex(t);if(r!==-1){this.log(`clearAssetPlayer "${t}" toSegment: ${n&&Ef(n)}`);const l=this.playerQueue[r];this.transferMediaFromPlayer(l,n),this.playerQueue.splice(r,1),l.destroy()}}emptyPlayerQueue(){let t;for(;t=this.playerQueue.pop();)t.destroy();this.playerQueue=[]}startAssetPlayer(t,n,r,l,d){const{interstitial:f,assetItem:p,assetId:m}=t,y=f.assetList.length,b=this.playingAsset;this.endedAsset=null,this.playingAsset=p,(!b||b.identifier!==m)&&(b&&(this.clearAssetPlayer(b.identifier,r[l]),delete b.error),this.log(`INTERSTITIAL_ASSET_STARTED ${n+1}/${y} ${t}`),this.hls.trigger(He.INTERSTITIAL_ASSET_STARTED,{asset:p,assetListIndex:n,event:f,schedule:r.slice(0),scheduleIndex:l,player:t})),this.bufferAssetPlayer(t,d)}bufferAssetPlayer(t,n){var r,l;const{interstitial:d,assetItem:f,assetId:p}=t,m=this.schedule.findEventIndex(d.identifier),y=(r=this.schedule.items)==null?void 0:r[m];if(!y)return;this.setBufferingItem(y),this.bufferingAsset=f;const b=this.getBufferingPlayer();if(b===t)return;const _=d.appendInPlace;if(_&&(b==null?void 0:b.interstitial.appendInPlace)===!1)return;const A=(b==null?void 0:b.tracks)||((l=this.detachedData)==null?void 0:l.tracks)||this.requiredTracks;if(_&&f!==this.playingAsset){if(!t.tracks)return;if(A&&!uM(A,t.tracks)){const w=new Error(`Asset "${p}" SourceBuffer tracks ('${Object.keys(t.tracks)}') are not compatible with primary content tracks ('${Object.keys(A)}')`),T={fatal:!0,type:Hi.OTHER_ERROR,details:pn.INTERSTITIAL_ASSET_ITEM_ERROR,error:w},k=d.findAssetIndex(f);this.handleAssetItemError(T,d,m,k,w.message);return}}this.transferMediaTo(t,n)}handleAssetItemError(t,n,r,l,d){if(t.details===pn.BUFFER_STALLED_ERROR)return;const f=n.assetList[l]||null;let p=null;if(f){const _=this.getAssetPlayerQueueIndex(f.identifier);p=this.playerQueue[_]||null}const m=this.schedule.items,y=hs({},t,{fatal:!1,errorAction:Iy(!0),asset:f,assetListIndex:l,event:n,schedule:m,scheduleIndex:r,player:p});if(this.warn(`Asset item error: ${t.error}`),this.hls.trigger(He.INTERSTITIAL_ASSET_ERROR,y),!t.fatal)return;const b=new Error(d);f&&(this.playingAsset!==f&&this.clearAssetPlayer(f.identifier,null),f.error=b),n.assetList.some(_=>!_.error)?n.appendInPlace&&(n.error=b):n.error=b,this.primaryFallback(n)}primaryFallback(t){const n=t.timelineStart,r=this.effectivePlayingItem;if(this.updateSchedule(),r){this.log(`Fallback to primary from event "${t.identifier}" start: ${n} pos: ${this.timelinePos} playing: ${r?Ef(r):"<none>"} error: ${t.error}`),t.appendInPlace&&(this.attachPrimary(n,null),this.flushFrontBuffer(n));let l=this.timelinePos;l===-1&&(l=this.hls.startPosition);const d=this.updateItem(r,l);if(this.itemsMatch(r,d))this.clearInterstitial(t,null);else{const f=this.schedule.findItemIndexAtTime(l);this.setSchedulePosition(f)}}else this.checkStart()}onAssetListLoaded(t,n){var r;const l=n.event,d=l.identifier,f=n.assetListResponse.ASSETS;if(!this.schedule.hasEvent(d))return;const p=l.timelineStart,m=l.duration;let y=0;f.forEach((T,k)=>{const U=parseFloat(T.DURATION);this.createAsset(l,k,y,p+y,U,T.URI),y+=U}),l.duration=y,this.log(`Loaded asset-list with duration: ${y} (was: ${m}) ${l}`);const b=this.waitingItem,_=(b==null?void 0:b.event.identifier)===d;this.updateSchedule();const A=(r=this.bufferingItem)==null?void 0:r.event;if(_){var w;const T=this.schedule.findEventIndex(d),k=(w=this.schedule.items)==null?void 0:w[T];if(k){if(!this.playingItem&&this.timelinePos>k.end&&this.schedule.findItemIndexAtTime(this.timelinePos)!==T){l.error=new Error(`Interstitial no longer within playback range ${this.timelinePos} ${l}`),this.primaryFallback(l);return}this.setBufferingItem(k)}this.setSchedulePosition(T)}else if((A==null?void 0:A.identifier)===d&&A.appendInPlace){const T=l.assetList[0],k=this.getAssetPlayer(T.identifier),U=this.primaryMedia;T&&k&&U&&this.bufferAssetPlayer(k,U)}}onError(t,n){switch(n.details){case pn.ASSET_LIST_PARSING_ERROR:case pn.ASSET_LIST_LOAD_ERROR:case pn.ASSET_LIST_LOAD_TIMEOUT:{const r=n.interstitial;r&&this.primaryFallback(r);break}case pn.BUFFER_STALLED_ERROR:{this.onTimeupdate(),this.checkBuffer(!0);break}}}}const nL=500;class pG extends pw{constructor(t,n,r){super(t,n,r,"subtitle-stream-controller",Ui.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}registerListeners(){super.registerListeners();const{hls:t}=this;t.on(He.LEVEL_LOADED,this.onLevelLoaded,this),t.on(He.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.on(He.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),t.on(He.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.on(He.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),t.on(He.BUFFER_FLUSHING,this.onBufferFlushing,this)}unregisterListeners(){super.unregisterListeners();const{hls:t}=this;t.off(He.LEVEL_LOADED,this.onLevelLoaded,this),t.off(He.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.off(He.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),t.off(He.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),t.off(He.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),t.off(He.BUFFER_FLUSHING,this.onBufferFlushing,this)}startLoad(t,n){this.stopLoad(),this.state=Gn.IDLE,this.setInterval(nL),this.nextLoadPosition=this.lastCurrentTime=t+this.timelineOffset,this.startPosition=n?-1:t,this.tick()}onManifestLoading(){super.onManifestLoading(),this.mainDetails=null}onMediaDetaching(t,n){this.tracksBuffered=[],super.onMediaDetaching(t,n)}onLevelLoaded(t,n){this.mainDetails=n.details}onSubtitleFragProcessed(t,n){const{frag:r,success:l}=n;if(Ha(r)&&(this.fragPrevious=r),this.state=Gn.IDLE,!l)return;const d=this.tracksBuffered[this.currentTrackId];if(!d)return;let f;const p=r.start;for(let y=0;y<d.length;y++)if(p>=d[y].start&&p<=d[y].end){f=d[y];break}const m=r.start+r.duration;f?f.end=m:(f={start:p,end:m},d.push(f)),this.fragmentTracker.fragBuffered(r),this.fragBufferedComplete(r,null),this.media&&this.tick()}onBufferFlushing(t,n){const{startOffset:r,endOffset:l}=n;if(r===0&&l!==Number.POSITIVE_INFINITY){const d=l-1;if(d<=0)return;n.endOffsetSubtitles=Math.max(0,d),this.tracksBuffered.forEach(f=>{for(let p=0;p<f.length;){if(f[p].end<=d){f.shift();continue}else if(f[p].start<d)f[p].start=d;else break;p++}}),this.fragmentTracker.removeFragmentsInRange(r,d,Ui.SUBTITLE)}}onError(t,n){const r=n.frag;(r==null?void 0:r.type)===Ui.SUBTITLE&&(n.details===pn.FRAG_GAP&&this.fragmentTracker.fragBuffered(r,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==Gn.STOPPED&&(this.state=Gn.IDLE))}onSubtitleTracksUpdated(t,{subtitleTracks:n}){if(this.levels&&lN(this.levels,n)){this.levels=n.map(r=>new wy(r));return}this.tracksBuffered=[],this.levels=n.map(r=>{const l=new wy(r);return this.tracksBuffered[l.id]=[],l}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,Ui.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(t,n){var r;if(this.currentTrackId=n.id,!((r=this.levels)!=null&&r.length)||this.currentTrackId===-1){this.clearInterval();return}const l=this.levels[this.currentTrackId];l!=null&&l.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,l&&this.state!==Gn.STOPPED&&this.setInterval(nL)}onSubtitleTrackLoaded(t,n){var r;const{currentTrackId:l,levels:d}=this,{details:f,id:p}=n;if(!d){this.warn(`Subtitle tracks were reset while loading level ${p}`);return}const m=d[p];if(p>=d.length||!m)return;this.log(`Subtitle track ${p} loaded [${f.startSN},${f.endSN}]${f.lastPartSn?`[part-${f.lastPartSn}-${f.lastPartIndex}]`:""},duration:${f.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let y=0;if(f.live||(r=m.details)!=null&&r.live){const _=this.mainDetails;if(f.deltaUpdateFailed||!_)return;const A=_.fragments[0];if(!m.details)f.hasProgramDateTime&&_.hasProgramDateTime?(aE(f,_),y=f.fragmentStart):A&&(y=A.start,TA(f,y));else{var b;y=this.alignPlaylists(f,m.details,(b=this.levelLastLoaded)==null?void 0:b.details),y===0&&A&&(y=A.start,TA(f,y))}}m.details=f,this.levelLastLoaded=m,p===l&&(this.hls.trigger(He.SUBTITLE_TRACK_UPDATED,{details:f,id:p,groupId:n.groupId}),this.tick(),f.live&&!this.fragCurrent&&this.media&&this.state===Gn.IDLE&&(Fh(null,f.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),m.details=void 0)))}_handleFragmentLoadComplete(t){const{frag:n,payload:r}=t,l=n.decryptdata,d=this.hls;if(!this.fragContextChanged(n)&&r&&r.byteLength>0&&l!=null&&l.key&&l.iv&&sg(l.method)){const f=performance.now();this.decrypter.decrypt(new Uint8Array(r),l.key.buffer,l.iv.buffer,fw(l.method)).catch(p=>{throw d.trigger(He.ERROR,{type:Hi.MEDIA_ERROR,details:pn.FRAG_DECRYPT_ERROR,fatal:!1,error:p,reason:p.message,frag:n}),p}).then(p=>{const m=performance.now();d.trigger(He.FRAG_DECRYPTED,{frag:n,payload:p,stats:{tstart:f,tdecrypt:m}})}).catch(p=>{this.warn(`${p.name}: ${p.message}`),this.state=Gn.IDLE})}}doTick(){if(!this.media){this.state=Gn.IDLE;return}if(this.state===Gn.IDLE){const{currentTrackId:t,levels:n}=this,r=n==null?void 0:n[t];if(!r||!n.length||!r.details||this.waitForLive(r))return;const{config:l}=this,d=this.getLoadPosition(),f=wr.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],d,l.maxBufferHole),{end:p,len:m}=f,y=r.details,b=this.hls.maxBufferLength+y.levelTargetDuration;if(m>b)return;const _=y.fragments,A=_.length,w=y.edge;let T=null;const k=this.fragPrevious;if(p<w){const se=l.maxFragLookUpTolerance,te=p>w-se?0:se;T=Fh(k,_,Math.max(_[0].start,p),te),!T&&k&&k.start<_[0].start&&(T=_[0])}else T=_[A-1];if(T=this.filterReplacedPrimary(T,r.details),!T)return;const U=T.sn-y.startSN,Y=_[U-1];if(Y&&Y.cc===T.cc&&this.fragmentTracker.getState(Y)===Ca.NOT_LOADED&&(T=Y),this.fragmentTracker.getState(T)===Ca.NOT_LOADED){const se=this.mapToInitFragWhenRequired(T);se&&this.loadFragment(se,r,p)}}}loadFragment(t,n,r){Ha(t)?super.loadFragment(t,n,r):this._loadInitSegment(t,n)}get mediaBufferTimeRanges(){return new gG(this.tracksBuffered[this.currentTrackId]||[])}}class gG{constructor(t){this.buffered=void 0;const n=(r,l,d)=>{if(l=l>>>0,l>d-1)throw new DOMException(`Failed to execute '${r}' on 'TimeRanges': The index provided (${l}) is greater than the maximum bound (${d})`);return t[l][r]};this.buffered={get length(){return t.length},end(r){return n("end",r,t.length)},start(r){return n("start",r,t.length)}}}}const mG={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},vN=u=>String.fromCharCode(mG[u]||u),$u=15,Cd=100,yG={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},vG={17:2,18:4,21:6,22:8,23:10,19:13,20:15},TG={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},EG={25:2,26:4,29:6,30:8,31:10,27:13,28:15},bG=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class _G{constructor(){this.time=null,this.verboseLevel=0}log(t,n){if(this.verboseLevel>=t){const r=typeof n=="function"?n():n;Gr.log(`${this.time} [${t}] ${r}`)}}}const _h=function(t){const n=[];for(let r=0;r<t.length;r++)n.push(t[r].toString(16));return n};class TN{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(t){const n=["foreground","underline","italics","background","flash"];for(let r=0;r<n.length;r++){const l=n[r];t.hasOwnProperty(l)&&(this[l]=t[l])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(t){return this.foreground===t.foreground&&this.underline===t.underline&&this.italics===t.italics&&this.background===t.background&&this.flash===t.flash}copy(t){this.foreground=t.foreground,this.underline=t.underline,this.italics=t.italics,this.background=t.background,this.flash=t.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class SG{constructor(){this.uchar=" ",this.penState=new TN}reset(){this.uchar=" ",this.penState.reset()}setChar(t,n){this.uchar=t,this.penState.copy(n)}setPenState(t){this.penState.copy(t)}equals(t){return this.uchar===t.uchar&&this.penState.equals(t.penState)}copy(t){this.uchar=t.uchar,this.penState.copy(t.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}class xG{constructor(t){this.chars=[],this.pos=0,this.currPenState=new TN,this.cueStartTime=null,this.logger=void 0;for(let n=0;n<Cd;n++)this.chars.push(new SG);this.logger=t}equals(t){for(let n=0;n<Cd;n++)if(!this.chars[n].equals(t.chars[n]))return!1;return!0}copy(t){for(let n=0;n<Cd;n++)this.chars[n].copy(t.chars[n])}isEmpty(){let t=!0;for(let n=0;n<Cd;n++)if(!this.chars[n].isEmpty()){t=!1;break}return t}setCursor(t){this.pos!==t&&(this.pos=t),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>Cd&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=Cd)}moveCursor(t){const n=this.pos+t;if(t>1)for(let r=this.pos+1;r<n+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(n)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(t){t>=144&&this.backSpace();const n=vN(t);if(this.pos>=Cd){this.logger.log(0,()=>"Cannot insert "+t.toString(16)+" ("+n+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(n,this.currPenState),this.moveCursor(1)}clearFromPos(t){let n;for(n=t;n<Cd;n++)this.chars[n].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const t=[];let n=!0;for(let r=0;r<Cd;r++){const l=this.chars[r].uchar;l!==" "&&(n=!1),t.push(l)}return n?"":t.join("")}setPenStyles(t){this.currPenState.setStyles(t),this.chars[this.pos].setPenState(this.currPenState)}}class Ex{constructor(t){this.rows=[],this.currRow=$u-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let n=0;n<$u;n++)this.rows.push(new xG(t));this.logger=t}reset(){for(let t=0;t<$u;t++)this.rows[t].clear();this.currRow=$u-1}equals(t){let n=!0;for(let r=0;r<$u;r++)if(!this.rows[r].equals(t.rows[r])){n=!1;break}return n}copy(t){for(let n=0;n<$u;n++)this.rows[n].copy(t.rows[n])}isEmpty(){let t=!0;for(let n=0;n<$u;n++)if(!this.rows[n].isEmpty()){t=!1;break}return t}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(t){this.rows[this.currRow].insertChar(t)}setPen(t){this.rows[this.currRow].setPenStyles(t)}moveCursor(t){this.rows[this.currRow].moveCursor(t)}setCursor(t){this.logger.log(2,"setCursor: "+t),this.rows[this.currRow].setCursor(t)}setPAC(t){this.logger.log(2,()=>"pacData = "+Bs(t));let n=t.row-1;if(this.nrRollUpRows&&n<this.nrRollUpRows-1&&(n=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==n){for(let p=0;p<$u;p++)this.rows[p].clear();const d=this.currRow+1-this.nrRollUpRows,f=this.lastOutputScreen;if(f){const p=f.rows[d].cueStartTime,m=this.logger.time;if(p!==null&&m!==null&&p<m)for(let y=0;y<this.nrRollUpRows;y++)this.rows[n-this.nrRollUpRows+y+1].copy(f.rows[d+y])}}this.currRow=n;const r=this.rows[this.currRow];if(t.indent!==null){const d=t.indent,f=Math.max(d-1,0);r.setCursor(t.indent),t.color=r.chars[f].penState.foreground}const l={foreground:t.color,underline:t.underline,italics:t.italics,background:"black",flash:!1};this.setPen(l)}setBkgData(t){this.logger.log(2,()=>"bkgData = "+Bs(t)),this.backSpace(),this.setPen(t),this.insertChar(32)}setRollUpRows(t){this.nrRollUpRows=t}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const t=this.currRow+1-this.nrRollUpRows,n=this.rows.splice(t,1)[0];n.clear(),this.rows.splice(this.currRow,0,n),this.logger.log(2,"Rolling up")}getDisplayText(t){t=t||!1;const n=[];let r="",l=-1;for(let d=0;d<$u;d++){const f=this.rows[d].getTextString();f&&(l=d+1,t?n.push("Row "+l+": '"+f+"'"):n.push(f.trim()))}return n.length>0&&(t?r="["+n.join(" | ")+"]":r=n.join(`
`)),r}getTextAndFormat(){return this.rows}}class iL{constructor(t,n,r){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=t,this.outputFilter=n,this.mode=null,this.verbose=0,this.displayedMemory=new Ex(r),this.nonDisplayedMemory=new Ex(r),this.lastOutputScreen=new Ex(r),this.currRollUpRow=this.displayedMemory.rows[$u-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=r}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[$u-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(t){this.outputFilter=t}setPAC(t){this.writeScreen.setPAC(t)}setBkgData(t){this.writeScreen.setBkgData(t)}setMode(t){t!==this.mode&&(this.mode=t,this.logger.log(2,()=>"MODE="+t),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=t)}insertChars(t){for(let r=0;r<t.length;r++)this.writeScreen.insertChar(t[r]);const n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>n+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(t){this.logger.log(2,"RU("+t+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(t)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const t=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=t,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(t){this.logger.log(2,"TO("+t+") - Tab Offset"),this.writeScreen.moveCursor(t)}ccMIDROW(t){const n={flash:!1};if(n.underline=t%2===1,n.italics=t>=46,n.italics)n.foreground="white";else{const r=Math.floor(t/2)-16,l=["white","green","blue","cyan","red","yellow","magenta"];n.foreground=l[r]}this.logger.log(2,"MIDROW: "+Bs(n)),this.writeScreen.setPen(n)}outputDataUpdate(t=!1){const n=this.logger.time;n!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=n:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,n,this.lastOutputScreen),t&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:n),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(t){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,t,this.displayedMemory),this.cueStartTime=t))}}class rL{constructor(t,n,r){this.channels=void 0,this.currentChannel=0,this.cmdHistory=wG(),this.logger=void 0;const l=this.logger=new _G;this.channels=[null,new iL(t,n,l),new iL(t+1,r,l)]}getHandler(t){return this.channels[t].getHandler()}setHandler(t,n){this.channels[t].setHandler(n)}addData(t,n){this.logger.time=t;for(let r=0;r<n.length;r+=2){const l=n[r]&127,d=n[r+1]&127;let f=!1,p=null;if(l===0&&d===0)continue;this.logger.log(3,()=>"["+_h([n[r],n[r+1]])+"] -> ("+_h([l,d])+")");const m=this.cmdHistory;if(l>=16&&l<=31){if(AG(l,d,m)){_T(null,null,m),this.logger.log(3,()=>"Repeated command ("+_h([l,d])+") is dropped");continue}_T(l,d,this.cmdHistory),f=this.parseCmd(l,d),f||(f=this.parseMidrow(l,d)),f||(f=this.parsePAC(l,d)),f||(f=this.parseBackgroundAttributes(l,d))}else _T(null,null,m);if(!f&&(p=this.parseChars(l,d),p)){const b=this.currentChannel;b&&b>0?this.channels[b].insertChars(p):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!f&&!p&&this.logger.log(2,()=>"Couldn't parse cleaned data "+_h([l,d])+" orig: "+_h([n[r],n[r+1]]))}}parseCmd(t,n){const r=(t===20||t===28||t===21||t===29)&&n>=32&&n<=47,l=(t===23||t===31)&&n>=33&&n<=35;if(!(r||l))return!1;const d=t===20||t===21||t===23?1:2,f=this.channels[d];return t===20||t===21||t===28||t===29?n===32?f.ccRCL():n===33?f.ccBS():n===34?f.ccAOF():n===35?f.ccAON():n===36?f.ccDER():n===37?f.ccRU(2):n===38?f.ccRU(3):n===39?f.ccRU(4):n===40?f.ccFON():n===41?f.ccRDC():n===42?f.ccTR():n===43?f.ccRTD():n===44?f.ccEDM():n===45?f.ccCR():n===46?f.ccENM():n===47&&f.ccEOC():f.ccTO(n-32),this.currentChannel=d,!0}parseMidrow(t,n){let r=0;if((t===17||t===25)&&n>=32&&n<=47){if(t===17?r=1:r=2,r!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const l=this.channels[r];return l?(l.ccMIDROW(n),this.logger.log(3,()=>"MIDROW ("+_h([t,n])+")"),!0):!1}return!1}parsePAC(t,n){let r;const l=(t>=17&&t<=23||t>=25&&t<=31)&&n>=64&&n<=127,d=(t===16||t===24)&&n>=64&&n<=95;if(!(l||d))return!1;const f=t<=23?1:2;n>=64&&n<=95?r=f===1?yG[t]:TG[t]:r=f===1?vG[t]:EG[t];const p=this.channels[f];return p?(p.setPAC(this.interpretPAC(r,n)),this.currentChannel=f,!0):!1}interpretPAC(t,n){let r;const l={color:null,italics:!1,indent:null,underline:!1,row:t};return n>95?r=n-96:r=n-64,l.underline=(r&1)===1,r<=13?l.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(l.italics=!0,l.color="white"):l.indent=Math.floor((r-16)/2)*4,l}parseChars(t,n){let r,l=null,d=null;if(t>=25?(r=2,d=t-8):(r=1,d=t),d>=17&&d<=19){let f;d===17?f=n+80:d===18?f=n+112:f=n+144,this.logger.log(2,()=>"Special char '"+vN(f)+"' in channel "+r),l=[f]}else t>=32&&t<=127&&(l=n===0?[t]:[t,n]);return l&&this.logger.log(3,()=>"Char codes =  "+_h(l).join(",")),l}parseBackgroundAttributes(t,n){const r=(t===16||t===24)&&n>=32&&n<=47,l=(t===23||t===31)&&n>=45&&n<=47;if(!(r||l))return!1;let d;const f={};t===16||t===24?(d=Math.floor((n-32)/2),f.background=bG[d],n%2===1&&(f.background=f.background+"_semi")):n===45?f.background="transparent":(f.foreground="black",n===47&&(f.underline=!0));const p=t<=23?1:2;return this.channels[p].setBkgData(f),!0}reset(){for(let t=0;t<Object.keys(this.channels).length;t++){const n=this.channels[t];n&&n.reset()}_T(null,null,this.cmdHistory)}cueSplitAtTime(t){for(let n=0;n<this.channels.length;n++){const r=this.channels[n];r&&r.cueSplitAtTime(t)}}}function _T(u,t,n){n.a=u,n.b=t}function AG(u,t,n){return n.a===u&&n.b===t}function wG(){return{a:null,b:null}}var Aw=function(){if(sE!=null&&sE.VTTCue)return self.VTTCue;const u=["","lr","rl"],t=["start","middle","end","left","right"];function n(p,m){if(typeof m!="string"||!Array.isArray(p))return!1;const y=m.toLowerCase();return~p.indexOf(y)?y:!1}function r(p){return n(u,p)}function l(p){return n(t,p)}function d(p,...m){let y=1;for(;y<arguments.length;y++){const b=arguments[y];for(const _ in b)p[_]=b[_]}return p}function f(p,m,y){const b=this,_={enumerable:!0};b.hasBeenReset=!1;let A="",w=!1,T=p,k=m,U=y,Y=null,se="",te=!0,Re="auto",Be="start",j=50,M="middle",Z=50,K="middle";Object.defineProperty(b,"id",d({},_,{get:function(){return A},set:function(x){A=""+x}})),Object.defineProperty(b,"pauseOnExit",d({},_,{get:function(){return w},set:function(x){w=!!x}})),Object.defineProperty(b,"startTime",d({},_,{get:function(){return T},set:function(x){if(typeof x!="number")throw new TypeError("Start time must be set to a number.");T=x,this.hasBeenReset=!0}})),Object.defineProperty(b,"endTime",d({},_,{get:function(){return k},set:function(x){if(typeof x!="number")throw new TypeError("End time must be set to a number.");k=x,this.hasBeenReset=!0}})),Object.defineProperty(b,"text",d({},_,{get:function(){return U},set:function(x){U=""+x,this.hasBeenReset=!0}})),Object.defineProperty(b,"region",d({},_,{get:function(){return Y},set:function(x){Y=x,this.hasBeenReset=!0}})),Object.defineProperty(b,"vertical",d({},_,{get:function(){return se},set:function(x){const ue=r(x);if(ue===!1)throw new SyntaxError("An invalid or illegal string was specified.");se=ue,this.hasBeenReset=!0}})),Object.defineProperty(b,"snapToLines",d({},_,{get:function(){return te},set:function(x){te=!!x,this.hasBeenReset=!0}})),Object.defineProperty(b,"line",d({},_,{get:function(){return Re},set:function(x){if(typeof x!="number"&&x!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");Re=x,this.hasBeenReset=!0}})),Object.defineProperty(b,"lineAlign",d({},_,{get:function(){return Be},set:function(x){const ue=l(x);if(!ue)throw new SyntaxError("An invalid or illegal string was specified.");Be=ue,this.hasBeenReset=!0}})),Object.defineProperty(b,"position",d({},_,{get:function(){return j},set:function(x){if(x<0||x>100)throw new Error("Position must be between 0 and 100.");j=x,this.hasBeenReset=!0}})),Object.defineProperty(b,"positionAlign",d({},_,{get:function(){return M},set:function(x){const ue=l(x);if(!ue)throw new SyntaxError("An invalid or illegal string was specified.");M=ue,this.hasBeenReset=!0}})),Object.defineProperty(b,"size",d({},_,{get:function(){return Z},set:function(x){if(x<0||x>100)throw new Error("Size must be between 0 and 100.");Z=x,this.hasBeenReset=!0}})),Object.defineProperty(b,"align",d({},_,{get:function(){return K},set:function(x){const ue=l(x);if(!ue)throw new SyntaxError("An invalid or illegal string was specified.");K=ue,this.hasBeenReset=!0}})),b.displayState=void 0}return f.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},f}();class IG{decode(t,n){if(!t)return"";if(typeof t!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}function EN(u){function t(r,l,d,f){return(r|0)*3600+(l|0)*60+(d|0)+parseFloat(f||0)}const n=u.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return n?parseFloat(n[2])>59?t(n[2],n[3],0,n[4]):t(n[1],n[2],n[3],n[4]):null}class CG{constructor(){this.values=Object.create(null)}set(t,n){!this.get(t)&&n!==""&&(this.values[t]=n)}get(t,n,r){return r?this.has(t)?this.values[t]:n[r]:this.has(t)?this.values[t]:n}has(t){return t in this.values}alt(t,n,r){for(let l=0;l<r.length;++l)if(n===r[l]){this.set(t,n);break}}integer(t,n){/^-?\d+$/.test(n)&&this.set(t,parseInt(n,10))}percent(t,n){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(n)){const r=parseFloat(n);if(r>=0&&r<=100)return this.set(t,r),!0}return!1}}function bN(u,t,n,r){const l=r?u.split(r):[u];for(const d in l){if(typeof l[d]!="string")continue;const f=l[d].split(n);if(f.length!==2)continue;const p=f[0],m=f[1];t(p,m)}}const IA=new Aw(0,0,""),ST=IA.align==="middle"?"middle":"center";function kG(u,t,n){const r=u;function l(){const p=EN(u);if(p===null)throw new Error("Malformed timestamp: "+r);return u=u.replace(/^[^\sa-zA-Z-]+/,""),p}function d(p,m){const y=new CG;bN(p,function(A,w){let T;switch(A){case"region":for(let k=n.length-1;k>=0;k--)if(n[k].id===w){y.set(A,n[k].region);break}break;case"vertical":y.alt(A,w,["rl","lr"]);break;case"line":T=w.split(","),y.integer(A,T[0]),y.percent(A,T[0])&&y.set("snapToLines",!1),y.alt(A,T[0],["auto"]),T.length===2&&y.alt("lineAlign",T[1],["start",ST,"end"]);break;case"position":T=w.split(","),y.percent(A,T[0]),T.length===2&&y.alt("positionAlign",T[1],["start",ST,"end","line-left","line-right","auto"]);break;case"size":y.percent(A,w);break;case"align":y.alt(A,w,["start",ST,"end","left","right"]);break}},/:/,/\s/),m.region=y.get("region",null),m.vertical=y.get("vertical","");let b=y.get("line","auto");b==="auto"&&IA.line===-1&&(b=-1),m.line=b,m.lineAlign=y.get("lineAlign","start"),m.snapToLines=y.get("snapToLines",!0),m.size=y.get("size",100),m.align=y.get("align",ST);let _=y.get("position","auto");_==="auto"&&IA.position===50&&(_=m.align==="start"||m.align==="left"?0:m.align==="end"||m.align==="right"?100:50),m.position=_}function f(){u=u.replace(/^\s+/,"")}if(f(),t.startTime=l(),f(),u.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+r);u=u.slice(3),f(),t.endTime=l(),f(),d(u,t)}function _N(u){return u.replace(/<br(?: \/)?>/gi,`
`)}class DG{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new IG,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(t){const n=this;t&&(n.buffer+=n.decoder.decode(t,{stream:!0}));function r(){let d=n.buffer,f=0;for(d=_N(d);f<d.length&&d[f]!=="\r"&&d[f]!==`
`;)++f;const p=d.slice(0,f);return d[f]==="\r"&&++f,d[f]===`
`&&++f,n.buffer=d.slice(f),p}function l(d){bN(d,function(f,p){},/:/)}try{let d="";if(n.state==="INITIAL"){if(!/\r\n|\n/.test(n.buffer))return this;d=r();const p=d.match(/^()?WEBVTT([ \t].*)?$/);if(!(p!=null&&p[0]))throw new Error("Malformed WebVTT signature.");n.state="HEADER"}let f=!1;for(;n.buffer;){if(!/\r\n|\n/.test(n.buffer))return this;switch(f?f=!1:d=r(),n.state){case"HEADER":/:/.test(d)?l(d):d||(n.state="ID");continue;case"NOTE":d||(n.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(d)){n.state="NOTE";break}if(!d)continue;if(n.cue=new Aw(0,0,""),n.state="CUE",d.indexOf("-->")===-1){n.cue.id=d;continue}case"CUE":if(!n.cue){n.state="BADCUE";continue}try{kG(d,n.cue,n.regionList)}catch{n.cue=null,n.state="BADCUE";continue}n.state="CUETEXT";continue;case"CUETEXT":{const p=d.indexOf("-->")!==-1;if(!d||p&&(f=!0)){n.oncue&&n.cue&&n.oncue(n.cue),n.cue=null,n.state="ID";continue}if(n.cue===null)continue;n.cue.text&&(n.cue.text+=`
`),n.cue.text+=d}continue;case"BADCUE":d||(n.state="ID")}}}catch{n.state==="CUETEXT"&&n.cue&&n.oncue&&n.oncue(n.cue),n.cue=null,n.state=n.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const t=this;try{if((t.cue||t.state==="HEADER")&&(t.buffer+=`

`,t.parse()),t.state==="INITIAL"||t.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(n){t.onparsingerror&&t.onparsingerror(n)}return t.onflush&&t.onflush(),this}}const RG=/\r\n|\n\r|\n|\r/g,bx=function(t,n,r=0){return t.slice(r,r+n.length)===n},LG=function(t){let n=parseInt(t.slice(-3));const r=parseInt(t.slice(-6,-4)),l=parseInt(t.slice(-9,-7)),d=t.length>9?parseInt(t.substring(0,t.indexOf(":"))):0;if(!xi(n)||!xi(r)||!xi(l)||!xi(d))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${t}`);return n+=1e3*r,n+=60*1e3*l,n+=60*60*1e3*d,n};function ww(u,t,n){return my(u.toString())+my(t.toString())+my(n)}const PG=function(t,n,r){let l=t[n],d=t[l.prevCC];if(!d||!d.new&&l.new){t.ccOffset=t.presentationOffset=l.start,l.new=!1;return}for(;(f=d)!=null&&f.new;){var f;t.ccOffset+=l.start-d.start,l.new=!1,l=d,d=t[l.prevCC]}t.presentationOffset=r};function MG(u,t,n,r,l,d,f){const p=new DG,m=Zl(new Uint8Array(u)).trim().replace(RG,`
`).split(`
`),y=[],b=t?Jq(t.baseTime,t.timescale):0;let _="00:00.000",A=0,w=0,T,k=!0;p.oncue=function(U){const Y=n[r];let se=n.ccOffset;const te=(A-b)/9e4;if(Y!=null&&Y.new&&(w!==void 0?se=n.ccOffset=Y.start:PG(n,r,te)),te){if(!t){T=new Error("Missing initPTS for VTT MPEGTS");return}se=te-n.presentationOffset}const Re=U.endTime-U.startTime,Be=Tu((U.startTime+se-w)*9e4,l*9e4)/9e4;U.startTime=Math.max(Be,0),U.endTime=Math.max(Be+Re,0);const j=U.text.trim();U.text=decodeURIComponent(encodeURIComponent(j)),U.id||(U.id=ww(U.startTime,U.endTime,j)),U.endTime>0&&y.push(U)},p.onparsingerror=function(U){T=U},p.onflush=function(){if(T){f(T);return}d(y)},m.forEach(U=>{if(k)if(bx(U,"X-TIMESTAMP-MAP=")){k=!1,U.slice(16).split(",").forEach(Y=>{bx(Y,"LOCAL:")?_=Y.slice(6):bx(Y,"MPEGTS:")&&(A=parseInt(Y.slice(7)))});try{w=LG(_)/1e3}catch(Y){T=Y}return}else U===""&&(k=!1);p.parse(U+`
`)}),p.flush()}const _x="stpp.ttml.im1t",SN=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,xN=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,NG={left:"start",center:"center",right:"end",start:"start",end:"end"};function sL(u,t,n,r){const l=vr(new Uint8Array(u),["mdat"]);if(l.length===0){r(new Error("Could not parse IMSC1 mdat"));return}const d=l.map(p=>Zl(p)),f=Qq(t.baseTime,1,t.timescale);try{d.forEach(p=>n(OG(p,f)))}catch(p){r(p)}}function OG(u,t){const l=new DOMParser().parseFromString(u,"text/xml").getElementsByTagName("tt")[0];if(!l)throw new Error("Invalid ttml");const d={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},f=Object.keys(d).reduce((_,A)=>(_[A]=l.getAttribute(`ttp:${A}`)||d[A],_),{}),p=l.getAttribute("xml:space")!=="preserve",m=aL(Sx(l,"styling","style")),y=aL(Sx(l,"layout","region")),b=Sx(l,"body","[begin]");return[].map.call(b,_=>{const A=AN(_,p);if(!A||!_.hasAttribute("begin"))return null;const w=Ax(_.getAttribute("begin"),f),T=Ax(_.getAttribute("dur"),f);let k=Ax(_.getAttribute("end"),f);if(w===null)throw oL(_);if(k===null){if(T===null)throw oL(_);k=w+T}const U=new Aw(w-t,k-t,A);U.id=ww(U.startTime,U.endTime,U.text);const Y=y[_.getAttribute("region")],se=m[_.getAttribute("style")],te=FG(Y,se,m),{textAlign:Re}=te;if(Re){const Be=NG[Re];Be&&(U.lineAlign=Be),U.align=Re}return hs(U,te),U}).filter(_=>_!==null)}function Sx(u,t,n){const r=u.getElementsByTagName(t)[0];return r?[].slice.call(r.querySelectorAll(n)):[]}function aL(u){return u.reduce((t,n)=>{const r=n.getAttribute("xml:id");return r&&(t[r]=n),t},{})}function AN(u,t){return[].slice.call(u.childNodes).reduce((n,r,l)=>{var d;return r.nodeName==="br"&&l?n+`
`:(d=r.childNodes)!=null&&d.length?AN(r,t):t?n+r.textContent.trim().replace(/\s+/g," "):n+r.textContent},"")}function FG(u,t,n){const r="http://www.w3.org/ns/ttml#styling";let l=null;const d=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],f=u!=null&&u.hasAttribute("style")?u.getAttribute("style"):null;return f&&n.hasOwnProperty(f)&&(l=n[f]),d.reduce((p,m)=>{const y=xx(t,r,m)||xx(u,r,m)||xx(l,r,m);return y&&(p[m]=y),p},{})}function xx(u,t,n){return u&&u.hasAttributeNS(t,n)?u.getAttributeNS(t,n):null}function oL(u){return new Error(`Could not parse ttml timestamp ${u}`)}function Ax(u,t){if(!u)return null;let n=EN(u);return n===null&&(SN.test(u)?n=UG(u,t):xN.test(u)&&(n=BG(u,t))),n}function UG(u,t){const n=SN.exec(u),r=(n[4]|0)+(n[5]|0)/t.subFrameRate;return(n[1]|0)*3600+(n[2]|0)*60+(n[3]|0)+r/t.frameRate}function BG(u,t){const n=xN.exec(u),r=Number(n[1]);switch(n[2]){case"h":return r*3600;case"m":return r*60;case"ms":return r*1e3;case"f":return r/t.frameRate;case"t":return r/t.tickRate}return r}class xT{constructor(t,n){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=t,this.trackName=n}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(t,n,r){(this.startTime===null||this.startTime>t)&&(this.startTime=t),this.endTime=n,this.screen=r,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}class zG{constructor(t){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=uL(),this.captionsProperties=void 0,this.hls=t,this.config=t.config,this.Cues=t.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},t.on(He.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(He.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(He.MANIFEST_LOADING,this.onManifestLoading,this),t.on(He.MANIFEST_LOADED,this.onManifestLoaded,this),t.on(He.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.on(He.FRAG_LOADING,this.onFragLoading,this),t.on(He.FRAG_LOADED,this.onFragLoaded,this),t.on(He.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),t.on(He.FRAG_DECRYPTED,this.onFragDecrypted,this),t.on(He.INIT_PTS_FOUND,this.onInitPtsFound,this),t.on(He.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),t.on(He.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:t}=this;t.off(He.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(He.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(He.MANIFEST_LOADING,this.onManifestLoading,this),t.off(He.MANIFEST_LOADED,this.onManifestLoaded,this),t.off(He.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),t.off(He.FRAG_LOADING,this.onFragLoading,this),t.off(He.FRAG_LOADED,this.onFragLoaded,this),t.off(He.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),t.off(He.FRAG_DECRYPTED,this.onFragDecrypted,this),t.off(He.INIT_PTS_FOUND,this.onInitPtsFound,this),t.off(He.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),t.off(He.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.media=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){const t=new xT(this,"textTrack1"),n=new xT(this,"textTrack2"),r=new xT(this,"textTrack3"),l=new xT(this,"textTrack4");this.cea608Parser1=new rL(1,t,n),this.cea608Parser2=new rL(3,r,l)}addCues(t,n,r,l,d){let f=!1;for(let p=d.length;p--;){const m=d[p],y=jG(m[0],m[1],n,r);if(y>=0&&(m[0]=Math.min(m[0],n),m[1]=Math.max(m[1],r),f=!0,y/(r-n)>.5))return}if(f||d.push([n,r]),this.config.renderTextTracksNatively){const p=this.captionsTracks[t];this.Cues.newCue(p,n,r,l)}else{const p=this.Cues.newCue(null,n,r,l);this.hls.trigger(He.CUES_PARSED,{type:"captions",cues:p,track:t})}}onInitPtsFound(t,{frag:n,id:r,initPTS:l,timescale:d}){const{unparsedVttFrags:f}=this;r===Ui.MAIN&&(this.initPTS[n.cc]={baseTime:l,timescale:d}),f.length&&(this.unparsedVttFrags=[],f.forEach(p=>{this.onFragLoaded(He.FRAG_LOADED,p)}))}getExistingTrack(t,n){const{media:r}=this;if(r)for(let l=0;l<r.textTracks.length;l++){const d=r.textTracks[l];if(lL(d,{name:t,lang:n,characteristics:"transcribes-spoken-dialog,describes-music-and-sound"}))return d}return null}createCaptionsTrack(t){this.config.renderTextTracksNatively?this.createNativeTrack(t):this.createNonNativeTrack(t)}createNativeTrack(t){if(this.captionsTracks[t])return;const{captionsProperties:n,captionsTracks:r,media:l}=this,{label:d,languageCode:f}=n[t],p=this.getExistingTrack(d,f);if(p)r[t]=p,eg(r[t]),gN(r[t],l);else{const m=this.createTextTrack("captions",d,f);m&&(m[t]=!0,r[t]=m)}}createNonNativeTrack(t){if(this.nonNativeCaptionsTracks[t])return;const n=this.captionsProperties[t];if(!n)return;const r=n.label,l={_id:t,label:r,kind:"captions",default:n.media?!!n.media.default:!1,closedCaptions:n.media};this.nonNativeCaptionsTracks[t]=l,this.hls.trigger(He.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[l]})}createTextTrack(t,n,r){const l=this.media;if(l)return l.addTextTrack(t,n,r)}onMediaAttaching(t,n){this.media=n.media,n.mediaSource||this._cleanTracks()}onMediaDetaching(t,n){const r=!!n.transferMedia;if(this.media=null,r)return;const{captionsTracks:l}=this;Object.keys(l).forEach(d=>{eg(l[d]),delete l[d]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=uL(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:t}=this;if(!t)return;const n=t.textTracks;if(n)for(let r=0;r<n.length;r++)eg(n[r])}onSubtitleTracksUpdated(t,n){const r=n.subtitleTracks||[],l=r.some(d=>d.textCodec===_x);if(this.config.enableWebVTT||l&&this.config.enableIMSC1){if(lN(this.tracks,r)){this.tracks=r;return}if(this.textTracks=[],this.tracks=r,this.config.renderTextTracksNatively){const f=this.media,p=f?zT(f.textTracks):null;if(this.tracks.forEach((m,y)=>{let b;if(p){let _=null;for(let A=0;A<p.length;A++)if(p[A]&&lL(p[A],m)){_=p[A],p[A]=null;break}_&&(b=_)}if(b)eg(b);else{const _=wN(m);b=this.createTextTrack(_,m.name,m.lang),b&&(b.mode="disabled")}b&&this.textTracks.push(b)}),p!=null&&p.length){const m=p.filter(y=>y!==null).map(y=>y.label);m.length&&this.hls.logger.warn(`Media element contains unused subtitle tracks: ${m.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const f=this.tracks.map(p=>({label:p.name,kind:p.type.toLowerCase(),default:p.default,subtitleTrack:p}));this.hls.trigger(He.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:f})}}}onManifestLoaded(t,n){this.config.enableCEA708Captions&&n.captions&&n.captions.forEach(r=>{const l=/(?:CC|SERVICE)([1-4])/.exec(r.instreamId);if(!l)return;const d=`textTrack${l[1]}`,f=this.captionsProperties[d];f&&(f.label=r.name,r.lang&&(f.languageCode=r.lang),f.media=r)})}closedCaptionsForLevel(t){const n=this.hls.levels[t.level];return n==null?void 0:n.attrs["CLOSED-CAPTIONS"]}onFragLoading(t,n){if(this.enabled&&n.frag.type===Ui.MAIN){var r,l;const{cea608Parser1:d,cea608Parser2:f,lastSn:p}=this,{cc:m,sn:y}=n.frag,b=(r=(l=n.part)==null?void 0:l.index)!=null?r:-1;d&&f&&(y!==p+1||y===p&&b!==this.lastPartIndex+1||m!==this.lastCc)&&(d.reset(),f.reset()),this.lastCc=m,this.lastSn=y,this.lastPartIndex=b}}onFragLoaded(t,n){const{frag:r,payload:l}=n;if(r.type===Ui.SUBTITLE)if(l.byteLength){const d=r.decryptdata,f="stats"in n;if(d==null||!d.encrypted||f){const p=this.tracks[r.level],m=this.vttCCs;m[r.cc]||(m[r.cc]={start:r.start,prevCC:this.prevCC,new:!0},this.prevCC=r.cc),p&&p.textCodec===_x?this._parseIMSC1(r,l):this._parseVTTs(n)}}else this.hls.trigger(He.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:new Error("Empty subtitle payload")})}_parseIMSC1(t,n){const r=this.hls;sL(n,this.initPTS[t.cc],l=>{this._appendCues(l,t.level),r.trigger(He.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:t})},l=>{r.logger.log(`Failed to parse IMSC1: ${l}`),r.trigger(He.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t,error:l})})}_parseVTTs(t){var n;const{frag:r,payload:l}=t,{initPTS:d,unparsedVttFrags:f}=this,p=d.length-1;if(!d[r.cc]&&p===-1){f.push(t);return}const m=this.hls,y=(n=r.initSegment)!=null&&n.data?_u(r.initSegment.data,new Uint8Array(l)).buffer:l;MG(y,this.initPTS[r.cc],this.vttCCs,r.cc,r.start,b=>{this._appendCues(b,r.level),m.trigger(He.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:r})},b=>{const _=b.message==="Missing initPTS for VTT MPEGTS";_?f.push(t):this._fallbackToIMSC1(r,l),m.logger.log(`Failed to parse VTT cue: ${b}`),!(_&&p>r.cc)&&m.trigger(He.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:b})})}_fallbackToIMSC1(t,n){const r=this.tracks[t.level];r.textCodec||sL(n,this.initPTS[t.cc],()=>{r.textCodec=_x,this._parseIMSC1(t,n)},()=>{r.textCodec="wvtt"})}_appendCues(t,n){const r=this.hls;if(this.config.renderTextTracksNatively){const l=this.textTracks[n];if(!l||l.mode==="disabled")return;t.forEach(d=>mN(l,d))}else{const l=this.tracks[n];if(!l)return;const d=l.default?"default":"subtitles"+n;r.trigger(He.CUES_PARSED,{type:"subtitles",cues:t,track:d})}}onFragDecrypted(t,n){const{frag:r}=n;r.type===Ui.SUBTITLE&&this.onFragLoaded(He.FRAG_LOADED,n)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(t,n){if(!this.enabled||!this.config.enableCEA708Captions)return;const{frag:r,samples:l}=n;if(!(r.type===Ui.MAIN&&this.closedCaptionsForLevel(r)==="NONE"))for(let d=0;d<l.length;d++){const f=l[d].bytes;if(f){this.cea608Parser1||this.initCea608Parsers();const p=this.extractCea608Data(f);this.cea608Parser1.addData(l[d].pts,p[0]),this.cea608Parser2.addData(l[d].pts,p[1])}}}onBufferFlushing(t,{startOffset:n,endOffset:r,endOffsetSubtitles:l,type:d}){const{media:f}=this;if(!(!f||f.currentTime<r)){if(!d||d==="video"){const{captionsTracks:p}=this;Object.keys(p).forEach(m=>AA(p[m],n,r))}if(this.config.renderTextTracksNatively&&n===0&&l!==void 0){const{textTracks:p}=this;Object.keys(p).forEach(m=>AA(p[m],n,l))}}}extractCea608Data(t){const n=[[],[]],r=t[0]&31;let l=2;for(let d=0;d<r;d++){const f=t[l++],p=127&t[l++],m=127&t[l++];if(p===0&&m===0)continue;if((4&f)!==0){const b=3&f;(b===0||b===1)&&(n[b].push(p),n[b].push(m))}}return n}}function wN(u){return u.characteristics&&/transcribes-spoken-dialog/gi.test(u.characteristics)&&/describes-music-and-sound/gi.test(u.characteristics)?"captions":"subtitles"}function lL(u,t){return!!u&&u.kind===wN(t)&&_A(t,u)}function jG(u,t,n,r){return Math.min(t,r)-Math.max(u,n)}function uL(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}const qG=/\s/,HG={newCue(u,t,n,r){const l=[];let d,f,p,m,y;const b=self.VTTCue||self.TextTrackCue;for(let A=0;A<r.rows.length;A++)if(d=r.rows[A],p=!0,m=0,y="",!d.isEmpty()){var _;for(let k=0;k<d.chars.length;k++)qG.test(d.chars[k].uchar)&&p?m++:(y+=d.chars[k].uchar,p=!1);d.cueStartTime=t,t===n&&(n+=1e-4),m>=16?m--:m++;const w=_N(y.trim()),T=ww(t,n,w);u!=null&&(_=u.cues)!=null&&_.getCueById(T)||(f=new b(t,n,w),f.id=T,f.line=A+1,f.align="left",f.position=10+Math.min(80,Math.floor(m*8/32)*10),l.push(f))}return u&&l.length&&(l.sort((A,w)=>A.line==="auto"||w.line==="auto"?0:A.line>8&&w.line>8?w.line-A.line:A.line-w.line),l.forEach(A=>mN(u,A))),l}};function GG(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}const VG=/(\d+)-(\d+)\/(\d+)/;class cL{constructor(t){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=t.fetchSetup||WG,this.controller=new self.AbortController,this.stats=new aw}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var t;this.abortInternal(),(t=this.callbacks)!=null&&t.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(t,n,r){const l=this.stats;if(l.loading.start)throw new Error("Loader can only be used once.");l.loading.start=self.performance.now();const d=$G(t,this.controller.signal),f=t.responseType==="arraybuffer",p=f?"byteLength":"length",{maxTimeToFirstByteMs:m,maxLoadTimeMs:y}=n.loadPolicy;this.context=t,this.config=n,this.callbacks=r,this.request=this.fetchSetup(t,d),self.clearTimeout(this.requestTimeout),n.timeout=m&&xi(m)?m:y,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(l,t,this.response))},n.timeout),(Ry(this.request)?this.request.then(self.fetch):self.fetch(this.request)).then(_=>{var A;this.response=this.loader=_;const w=Math.max(self.performance.now(),l.loading.start);if(self.clearTimeout(this.requestTimeout),n.timeout=y,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(l,t,this.response))},y-(w-l.loading.start)),!_.ok){const{status:k,statusText:U}=_;throw new XG(U||"fetch, bad network response",k,_)}l.loading.first=w,l.total=YG(_.headers)||l.total;const T=(A=this.callbacks)==null?void 0:A.onProgress;return T&&xi(n.highWaterMark)?this.loadProgressively(_,l,t,n.highWaterMark,T):f?_.arrayBuffer():t.responseType==="json"?_.json():_.text()}).then(_=>{var A,w;const T=this.response;if(!T)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),l.loading.end=Math.max(self.performance.now(),l.loading.first);const k=_[p];k&&(l.loaded=l.total=k);const U={url:T.url,data:_,code:T.status},Y=(A=this.callbacks)==null?void 0:A.onProgress;Y&&!xi(n.highWaterMark)&&Y(l,t,_,T),(w=this.callbacks)==null||w.onSuccess(U,l,t,T)}).catch(_=>{var A;if(self.clearTimeout(this.requestTimeout),l.aborted)return;const w=_&&_.code||0,T=_?_.message:null;(A=this.callbacks)==null||A.onError({code:w,text:T},t,_?_.details:null,l)})}getCacheAge(){let t=null;if(this.response){const n=this.response.headers.get("age");t=n?parseFloat(n):null}return t}getResponseHeader(t){return this.response?this.response.headers.get(t):null}loadProgressively(t,n,r,l=0,d){const f=new jM,p=t.body.getReader(),m=()=>p.read().then(y=>{if(y.done)return f.dataLength&&d(n,r,f.flush().buffer,t),Promise.resolve(new ArrayBuffer(0));const b=y.value,_=b.length;return n.loaded+=_,_<l||f.dataLength?(f.push(b),f.dataLength>=l&&d(n,r,f.flush().buffer,t)):d(n,r,b.buffer,t),m()}).catch(()=>Promise.reject());return m()}}function $G(u,t){const n={method:"GET",mode:"cors",credentials:"same-origin",signal:t,headers:new self.Headers(hs({},u.headers))};return u.rangeEnd&&n.headers.set("Range","bytes="+u.rangeStart+"-"+String(u.rangeEnd-1)),n}function KG(u){const t=VG.exec(u);if(t)return parseInt(t[2])-parseInt(t[1])+1}function YG(u){const t=u.get("Content-Range");if(t){const r=KG(t);if(xi(r))return r}const n=u.get("Content-Length");if(n)return parseInt(n)}function WG(u,t){return new self.Request(u.url,t)}class XG extends Error{constructor(t,n,r){super(t),this.code=void 0,this.details=void 0,this.code=n,this.details=r}}const QG=/^age:\s*[\d.]+\s*$/im;class IN{constructor(t){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=t&&t.xhrSetup||null,this.stats=new aw,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const t=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),t&&(t.onreadystatechange=null,t.onprogress=null,t.readyState!==4&&(this.stats.aborted=!0,t.abort()))}abort(){var t;this.abortInternal(),(t=this.callbacks)!=null&&t.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(t,n,r){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=t,this.config=n,this.callbacks=r,this.loadInternal()}loadInternal(){const{config:t,context:n}=this;if(!t||!n)return;const r=this.loader=new self.XMLHttpRequest,l=this.stats;l.loading.first=0,l.loaded=0,l.aborted=!1;const d=this.xhrSetup;d?Promise.resolve().then(()=>{if(!(this.loader!==r||this.stats.aborted))return d(r,n.url)}).catch(f=>{if(!(this.loader!==r||this.stats.aborted))return r.open("GET",n.url,!0),d(r,n.url)}).then(()=>{this.loader!==r||this.stats.aborted||this.openAndSendXhr(r,n,t)}).catch(f=>{var p;(p=this.callbacks)==null||p.onError({code:r.status,text:f.message},n,r,l)}):this.openAndSendXhr(r,n,t)}openAndSendXhr(t,n,r){t.readyState||t.open("GET",n.url,!0);const l=n.headers,{maxTimeToFirstByteMs:d,maxLoadTimeMs:f}=r.loadPolicy;if(l)for(const p in l)t.setRequestHeader(p,l[p]);n.rangeEnd&&t.setRequestHeader("Range","bytes="+n.rangeStart+"-"+(n.rangeEnd-1)),t.onreadystatechange=this.readystatechange.bind(this),t.onprogress=this.loadprogress.bind(this),t.responseType=n.responseType,self.clearTimeout(this.requestTimeout),r.timeout=d&&xi(d)?d:f,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),r.timeout),t.send()}readystatechange(){const{context:t,loader:n,stats:r}=this;if(!t||!n)return;const l=n.readyState,d=this.config;if(!r.aborted&&l>=2&&(r.loading.first===0&&(r.loading.first=Math.max(self.performance.now(),r.loading.start),d.timeout!==d.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),d.timeout=d.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),d.loadPolicy.maxLoadTimeMs-(r.loading.first-r.loading.start)))),l===4)){self.clearTimeout(this.requestTimeout),n.onreadystatechange=null,n.onprogress=null;const y=n.status,b=n.responseType==="text"?n.responseText:null;if(y>=200&&y<300){const T=b??n.response;if(T!=null){var f,p;r.loading.end=Math.max(self.performance.now(),r.loading.first);const k=n.responseType==="arraybuffer"?T.byteLength:T.length;r.loaded=r.total=k,r.bwEstimate=r.total*8e3/(r.loading.end-r.loading.first);const U=(f=this.callbacks)==null?void 0:f.onProgress;U&&U(r,t,T,n);const Y={url:n.responseURL,data:T,code:y};(p=this.callbacks)==null||p.onSuccess(Y,r,t,n);return}}const _=d.loadPolicy.errorRetry,A=r.retry,w={url:t.url,data:void 0,code:y};if(rE(_,A,!1,w))this.retry(_);else{var m;Gr.error(`${y} while loading ${t.url}`),(m=this.callbacks)==null||m.onError({code:y,text:n.statusText},t,n,r)}}}loadtimeout(){if(!this.config)return;const t=this.config.loadPolicy.timeoutRetry,n=this.stats.retry;if(rE(t,n,!0))this.retry(t);else{var r;Gr.warn(`timeout while loading ${(r=this.context)==null?void 0:r.url}`);const l=this.callbacks;l&&(this.abortInternal(),l.onTimeout(this.stats,this.context,this.loader))}}retry(t){const{context:n,stats:r}=this;this.retryDelay=uw(t,r.retry),r.retry++,Gr.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${n==null?void 0:n.url}, retrying ${r.retry}/${t.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(t){const n=this.stats;n.loaded=t.loaded,t.lengthComputable&&(n.total=t.total)}getCacheAge(){let t=null;if(this.loader&&QG.test(this.loader.getAllResponseHeaders())){const n=this.loader.getResponseHeader("age");t=n?parseFloat(n):null}return t}getResponseHeader(t){return this.loader&&new RegExp(`^${t}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(t):null}}const JG={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},ZG=as(as({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,maxDevicePixelRatio:Number.POSITIVE_INFINITY,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,maxBufferSize:60*1e3*1e3,maxFragLookUpTolerance:.25,maxBufferHole:.1,detectStallWithCurrentTimeMs:1250,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,nudgeOnVideoHole:!0,liveSyncDurationCount:3,liveSyncOnStallIncrease:1,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,ignorePlaylistParsingErrors:!1,loader:IN,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:b6,bufferController:hH,capLevelController:Sw,errorController:I6,fpsController:iG,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:DM,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableEmsgKLVMetadata:!1,enableID3MetadataCues:!0,enableInterstitialPlayback:!0,interstitialAppendInPlace:!0,interstitialLiveLookAhead:10,useMediaCapabilities:!0,certLoadPolicy:{default:JG},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},interstitialAssetListLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:3e4,timeoutRetry:{maxNumRetry:0,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:0,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},eV()),{},{subtitleStreamController:pG,subtitleTrackController:aG,timelineController:zG,audioStreamController:uH,audioTrackController:cH,emeController:ag,cmcdController:eG,contentSteeringController:nG,interstitialsController:hG});function eV(){return{cueHandler:HG,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function tV(u,t,n){if((t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(t.liveMaxLatencyDurationCount!==void 0&&(t.liveSyncDurationCount===void 0||t.liveMaxLatencyDurationCount<=t.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(t.liveMaxLatencyDuration!==void 0&&(t.liveSyncDuration===void 0||t.liveMaxLatencyDuration<=t.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const r=CA(u),l=["manifest","level","frag"],d=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return l.forEach(f=>{const p=`${f==="level"?"playlist":f}LoadPolicy`,m=t[p]===void 0,y=[];d.forEach(b=>{const _=`${f}Loading${b}`,A=t[_];if(A!==void 0&&m){y.push(_);const w=r[p].default;switch(t[p]={default:w},b){case"TimeOut":w.maxLoadTimeMs=A,w.maxTimeToFirstByteMs=A;break;case"MaxRetry":w.errorRetry.maxNumRetry=A,w.timeoutRetry.maxNumRetry=A;break;case"RetryDelay":w.errorRetry.retryDelayMs=A,w.timeoutRetry.retryDelayMs=A;break;case"MaxRetryTimeout":w.errorRetry.maxRetryDelayMs=A,w.timeoutRetry.maxRetryDelayMs=A;break}}}),y.length&&n.warn(`hls.js config: "${y.join('", "')}" setting(s) are deprecated, use "${p}": ${Bs(t[p])}`)}),as(as({},r),t)}function CA(u){return u&&typeof u=="object"?Array.isArray(u)?u.map(CA):Object.keys(u).reduce((t,n)=>(t[n]=CA(u[n]),t),{}):u}function nV(u,t){const n=u.loader;n!==cL&&n!==IN?(t.log("[config]: Custom loader detected, cannot enable progressive streaming"),u.progressive=!1):GG()&&(u.loader=cL,u.progressive=!0,u.enableSoftwareAES=!0,t.log("[config]: Progressive streaming enabled, using FetchLoader"))}const jT=2,iV=.1,rV=.05,sV=100;class aV extends IM{constructor(t,n){super("gap-controller",t.logger),this.hls=null,this.fragmentTracker=null,this.media=null,this.mediaSource=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.buffered={},this.lastCurrentTime=0,this.ended=0,this.waiting=0,this.onMediaPlaying=()=>{this.ended=0,this.waiting=0},this.onMediaWaiting=()=>{var r;(r=this.media)!=null&&r.seeking||(this.waiting=self.performance.now(),this.tick())},this.onMediaEnded=()=>{if(this.hls){var r;this.ended=((r=this.media)==null?void 0:r.currentTime)||1,this.hls.trigger(He.MEDIA_ENDED,{stalled:!1})}},this.hls=t,this.fragmentTracker=n,this.registerListeners()}registerListeners(){const{hls:t}=this;t&&(t.on(He.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(He.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(He.BUFFER_APPENDED,this.onBufferAppended,this))}unregisterListeners(){const{hls:t}=this;t&&(t.off(He.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(He.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(He.BUFFER_APPENDED,this.onBufferAppended,this))}destroy(){super.destroy(),this.unregisterListeners(),this.media=this.hls=this.fragmentTracker=null,this.mediaSource=void 0}onMediaAttached(t,n){this.setInterval(sV),this.mediaSource=n.mediaSource;const r=this.media=n.media;Md(r,"playing",this.onMediaPlaying),Md(r,"waiting",this.onMediaWaiting),Md(r,"ended",this.onMediaEnded)}onMediaDetaching(t,n){this.clearInterval();const{media:r}=this;r&&(Fc(r,"playing",this.onMediaPlaying),Fc(r,"waiting",this.onMediaWaiting),Fc(r,"ended",this.onMediaEnded),this.media=null),this.mediaSource=void 0}onBufferAppended(t,n){this.buffered=n.timeRanges}get hasBuffered(){return Object.keys(this.buffered).length>0}tick(){var t;if(!((t=this.media)!=null&&t.readyState)||!this.hasBuffered)return;const n=this.media.currentTime;this.poll(n,this.lastCurrentTime),this.lastCurrentTime=n}poll(t,n){var r,l;const d=(r=this.hls)==null?void 0:r.config;if(!d)return;const{media:f,stalled:p}=this;if(!f)return;const{seeking:m}=f,y=this.seeking&&!m,b=!this.seeking&&m,_=f.paused&&!m||f.ended||f.playbackRate===0;if(this.seeking=m,t!==n){n&&(this.ended=0),this.moved=!0,m||(this.nudgeRetry=0,d.nudgeOnVideoHole&&!_&&t>n&&this.nudgeOnVideoHole(t,n)),this.waiting===0&&this.stallResolved(t);return}if(b||y){y&&this.stallResolved(t);return}if(_){this.nudgeRetry=0,this.stallResolved(t),!this.ended&&f.ended&&this.hls&&(this.ended=t||1,this.hls.trigger(He.MEDIA_ENDED,{stalled:!1}));return}if(!wr.getBuffered(f).length){this.nudgeRetry=0;return}const A=wr.bufferInfo(f,t,0),w=A.nextStart||0,T=this.fragmentTracker;if(m&&T&&this.hls){const j=dL(this.hls.inFlightFragments,t),M=A.len>jT,Z=!w||j||w-t>jT&&!T.getPartialFragment(t);if(M||Z)return;this.moved=!1}const k=(l=this.hls)==null?void 0:l.latestLevelDetails;if(!this.moved&&this.stalled!==null&&T){if(!(A.len>0)&&!w)return;const M=Math.max(w,A.start||0)-t,K=!!(k!=null&&k.live)?k.targetduration*2:jT,x=T.getPartialFragment(t);if(M>0&&(M<=K||x)){f.paused||this._trySkipBufferHole(x);return}}const U=d.detectStallWithCurrentTimeMs,Y=self.performance.now(),se=this.waiting;if(p===null){se>0&&Y-se<U?this.stalled=se:this.stalled=Y;return}const te=Y-p;if(!m&&(te>=U||se)&&this.hls){var Re;if(((Re=this.mediaSource)==null?void 0:Re.readyState)==="ended"&&!(k!=null&&k.live)&&Math.abs(t-((k==null?void 0:k.edge)||0))<1){if(this.ended)return;this.ended=t||1,this.hls.trigger(He.MEDIA_ENDED,{stalled:!0});return}if(this._reportStall(A),!this.media||!this.hls)return}const Be=wr.bufferInfo(f,t,d.maxBufferHole);this._tryFixBufferStall(Be,te)}stallResolved(t){const n=this.stalled;if(n&&this.hls&&(this.stalled=null,this.stallReported)){const r=self.performance.now()-n;this.log(`playback not stuck anymore @${t}, after ${Math.round(r)}ms`),this.stallReported=!1,this.waiting=0,this.hls.trigger(He.STALL_RESOLVED,{})}}nudgeOnVideoHole(t,n){var r;const l=this.buffered.video;if(this.hls&&this.media&&this.fragmentTracker&&(r=this.buffered.audio)!=null&&r.length&&l&&l.length>1&&t>l.end(0)){const d=wr.bufferedInfo(wr.timeRangesToArray(this.buffered.audio),t,0);if(d.len>1&&n>=d.start){const f=wr.timeRangesToArray(l),p=wr.bufferedInfo(f,n,0).bufferedIndex;if(p>-1&&p<f.length-1){const m=wr.bufferedInfo(f,t,0).bufferedIndex,y=f[p].end,b=f[p+1].start;if((m===-1||m>p)&&b-y<1&&t-y<2){const _=new Error(`nudging playhead to flush pipeline after video hole. currentTime: ${t} hole: ${y} -> ${b} buffered index: ${m}`);this.warn(_.message),this.media.currentTime+=1e-6;const A=this.fragmentTracker.getPartialFragment(t)||void 0,w=wr.bufferInfo(this.media,t,0);this.hls.trigger(He.ERROR,{type:Hi.MEDIA_ERROR,details:pn.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:_,reason:_.message,frag:A,buffer:w.len,bufferInfo:w})}}}}}_tryFixBufferStall(t,n){var r,l;const{fragmentTracker:d,media:f}=this,p=(r=this.hls)==null?void 0:r.config;if(!f||!d||!p)return;const m=f.currentTime,y=(l=this.hls)==null?void 0:l.latestLevelDetails,b=d.getPartialFragment(m);if((b||y!=null&&y.live&&m<y.fragmentStart)&&(this._trySkipBufferHole(b)||!this.media))return;const _=t.buffered;(_&&_.length>1&&t.len>p.maxBufferHole||t.nextStart&&t.nextStart-m<p.maxBufferHole)&&(n>p.highBufferWatchdogPeriod*1e3||this.waiting)&&(this.warn("Trying to nudge playhead over buffer-hole"),this._tryNudgeBuffer(t))}_reportStall(t){const{hls:n,media:r,stallReported:l,stalled:d}=this;if(!l&&d!==null&&r&&n){this.stallReported=!0;const f=new Error(`Playback stalling at @${r.currentTime} due to low buffer (${Bs(t)})`);this.warn(f.message),n.trigger(He.ERROR,{type:Hi.MEDIA_ERROR,details:pn.BUFFER_STALLED_ERROR,fatal:!1,error:f,buffer:t.len,bufferInfo:t,stalled:{start:d}})}}_trySkipBufferHole(t){var n;const{fragmentTracker:r,media:l}=this,d=(n=this.hls)==null?void 0:n.config;if(!l||!r||!d)return 0;const f=l.currentTime,p=wr.bufferInfo(l,f,0),m=f<p.start?p.start:p.nextStart;if(m&&this.hls){const b=p.len<=d.maxBufferHole,_=p.len>0&&p.len<1&&l.readyState<3,A=m-f;if(A>0&&(b||_)){if(A>d.maxBufferHole){let T=!1;if(f===0){const k=r.getAppendedFrag(0,Ui.MAIN);k&&m<k.end&&(T=!0)}if(!T){const k=t||r.getAppendedFrag(f,Ui.MAIN);if(k){var y;if(!((y=this.hls.loadLevelObj)!=null&&y.details)||dL(this.hls.inFlightFragments,m))return 0;let Y=!1,se=k.end;for(;se<m;){const te=r.getPartialFragment(se);if(te)se+=te.duration;else{Y=!0;break}}if(Y)return 0}}}const w=Math.max(m+rV,f+iV);if(this.warn(`skipping hole, adjusting currentTime from ${f} to ${w}`),this.moved=!0,l.currentTime=w,!(t!=null&&t.gap)){const T=new Error(`fragment loaded with buffer holes, seeking from ${f} to ${w}`);this.hls.trigger(He.ERROR,{type:Hi.MEDIA_ERROR,details:pn.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:T,reason:T.message,frag:t||void 0,buffer:p.len,bufferInfo:p})}return w}}return 0}_tryNudgeBuffer(t){const{hls:n,media:r,nudgeRetry:l}=this,d=n==null?void 0:n.config;if(!r||!d)return 0;const f=r.currentTime;if(this.nudgeRetry++,l<d.nudgeMaxRetry){const p=f+(l+1)*d.nudgeOffset,m=new Error(`Nudging 'currentTime' from ${f} to ${p}`);this.warn(m.message),r.currentTime=p,n.trigger(He.ERROR,{type:Hi.MEDIA_ERROR,details:pn.BUFFER_NUDGE_ON_STALL,error:m,fatal:!1,buffer:t.len,bufferInfo:t})}else{const p=new Error(`Playhead still not moving while enough data buffered @${f} after ${d.nudgeMaxRetry} nudges`);this.error(p.message),n.trigger(He.ERROR,{type:Hi.MEDIA_ERROR,details:pn.BUFFER_STALLED_ERROR,error:p,fatal:!0,buffer:t.len,bufferInfo:t})}}}function dL(u,t){const n=fL(u.main);if(n&&n.start<=t)return n;const r=fL(u.audio);return r&&r.start<=t?r:null}function fL(u){if(!u)return null;switch(u.state){case Gn.IDLE:case Gn.STOPPED:case Gn.ENDED:case Gn.ERROR:return null}return u.frag}const oV=.25;function kA(){if(!(typeof self>"u"))return self.VTTCue||self.TextTrackCue}function hL(u,t,n,r,l){let d=new u(t,n,"");try{d.value=r,l&&(d.type=l)}catch{d=new u(t,n,Bs(l?as({type:l},r):r))}return d}const AT=(()=>{const u=kA();try{u&&new u(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();function lV(u){return Uint8Array.from(u.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}class uV{constructor(t){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.removeCues=!0,this.onEventCueEnter=()=>{this.hls&&this.hls.trigger(He.EVENT_CUE_ENTER,{})},this.hls=t,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=this.onEventCueEnter=null}_registerListeners(){const{hls:t}=this;t.on(He.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(He.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(He.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(He.MANIFEST_LOADING,this.onManifestLoading,this),t.on(He.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),t.on(He.BUFFER_FLUSHING,this.onBufferFlushing,this),t.on(He.LEVEL_UPDATED,this.onLevelUpdated,this),t.on(He.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this)}_unregisterListeners(){const{hls:t}=this;t.off(He.MEDIA_ATTACHING,this.onMediaAttaching,this),t.off(He.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(He.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(He.MANIFEST_LOADING,this.onManifestLoading,this),t.off(He.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),t.off(He.BUFFER_FLUSHING,this.onBufferFlushing,this),t.off(He.LEVEL_UPDATED,this.onLevelUpdated,this),t.off(He.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this)}onMediaAttaching(t,n){var r;this.media=n.media,((r=n.overrides)==null?void 0:r.cueRemoval)===!1&&(this.removeCues=!1)}onMediaAttached(){const t=this.hls.latestLevelDetails;t&&this.updateDateRangeCues(t)}onMediaDetaching(t,n){this.media=null,!n.transferMedia&&(this.id3Track&&(this.removeCues&&eg(this.id3Track,this.onEventCueEnter),this.id3Track=null),this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(t){const n=this.getID3Track(t.textTracks);return n.mode="hidden",n}getID3Track(t){if(this.media){for(let n=0;n<t.length;n++){const r=t[n];if(r.kind==="metadata"&&r.label==="id3")return gN(r,this.media),r}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(t,n){if(!this.media)return;const{hls:{config:{enableEmsgMetadataCues:r,enableID3MetadataCues:l}}}=this;if(!r&&!l)return;const{samples:d}=n;this.id3Track||(this.id3Track=this.createTrack(this.media));const f=kA();if(f)for(let p=0;p<d.length;p++){const m=d[p].type;if(m===Jl.emsg&&!r||!l)continue;const y=WM(d[p].data);if(y){const b=d[p].pts;let _=b+d[p].duration;_>AT&&(_=AT),_-b<=0&&(_=b+oV);for(let w=0;w<y.length;w++){const T=y[w];if(!XM(T)){this.updateId3CueEnds(b,m);const k=hL(f,b,_,T,m);k&&this.id3Track.addCue(k)}}}}}updateId3CueEnds(t,n){var r;const l=(r=this.id3Track)==null?void 0:r.cues;if(l)for(let d=l.length;d--;){const f=l[d];f.type===n&&f.startTime<t&&f.endTime===AT&&(f.endTime=t)}}onBufferFlushing(t,{startOffset:n,endOffset:r,type:l}){const{id3Track:d,hls:f}=this;if(!f)return;const{config:{enableEmsgMetadataCues:p,enableID3MetadataCues:m}}=f;if(d&&(p||m)){let y;l==="audio"?y=b=>b.type===Jl.audioId3&&m:l==="video"?y=b=>b.type===Jl.emsg&&p:y=b=>b.type===Jl.audioId3&&m||b.type===Jl.emsg&&p,AA(d,n,r,y)}}onLevelUpdated(t,{details:n}){this.updateDateRangeCues(n,!0)}onLevelPtsUpdated(t,n){Math.abs(n.drift)>.01&&this.updateDateRangeCues(n.details)}updateDateRangeCues(t,n){if(!this.media||!t.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)return;const{id3Track:r}=this,{dateRanges:l}=t,d=Object.keys(l);let f=this.dateRangeCuesAppended;if(r&&n){var p;if((p=r.cues)!=null&&p.length){const b=Object.keys(f).filter(_=>!d.includes(_));for(let _=b.length;_--;){const A=b[_],w=f[A].cues;delete f[A],Object.keys(w).forEach(T=>{try{const k=w[T];k.removeEventListener("enter",this.onEventCueEnter),r.removeCue(k)}catch{}})}}else f=this.dateRangeCuesAppended={}}const m=t.fragments[t.fragments.length-1];if(d.length===0||!xi(m==null?void 0:m.programDateTime))return;this.id3Track||(this.id3Track=this.createTrack(this.media));const y=kA();for(let b=0;b<d.length;b++){const _=d[b],A=l[_],w=A.startTime,T=f[_],k=(T==null?void 0:T.cues)||{};let U=(T==null?void 0:T.durationKnown)||!1,Y=AT;const{duration:se,endDate:te}=A;if(te&&se!==null)Y=w+se,U=!0;else if(A.endOnNext&&!U){const Be=d.reduce((j,M)=>{if(M!==A.id){const Z=l[M];if(Z.class===A.class&&Z.startDate>A.startDate&&(!j||A.startDate<j.startDate))return Z}return j},null);Be&&(Y=Be.startTime,U=!0)}const Re=Object.keys(A.attr);for(let Be=0;Be<Re.length;Be++){const j=Re[Be];if(!z6(j))continue;const M=k[j];if(M)U&&!T.durationKnown?M.endTime=Y:Math.abs(M.startTime-w)>.01&&(M.startTime=w,M.endTime=Y);else if(y){let Z=A.attr[j];j6(j)&&(Z=lV(Z));const x=hL(y,w,Y,{key:j,data:Z},Jl.dateRange);x&&(x.id=_,this.id3Track.addCue(x),k[j]=x,this.hls.config.interstitialsController&&(j==="X-ASSET-LIST"||j==="X-ASSET-URL")&&x.addEventListener("enter",this.onEventCueEnter))}}f[_]={cues:k,dateRange:A,durationKnown:U}}}}class cV{constructor(t){this.hls=void 0,this.config=void 0,this.media=null,this.currentTime=0,this.stallCount=0,this._latency=null,this._targetLatencyUpdated=!1,this.onTimeupdate=()=>{const{media:n}=this,r=this.levelDetails;if(!n||!r)return;this.currentTime=n.currentTime;const l=this.computeLatency();if(l===null)return;this._latency=l;const{lowLatencyMode:d,maxLiveSyncPlaybackRate:f}=this.config;if(!d||f===1||!r.live)return;const p=this.targetLatency;if(p===null)return;const m=l-p,y=Math.min(this.maxLatency,p+r.targetduration);if(m<y&&m>.05&&this.forwardBufferLength>1){const _=Math.min(2,Math.max(1,f)),A=Math.round(2/(1+Math.exp(-.75*m-this.edgeStalled))*20)/20,w=Math.min(_,Math.max(1,A));this.changeMediaPlaybackRate(n,w)}else n.playbackRate!==1&&n.playbackRate!==0&&this.changeMediaPlaybackRate(n,1)},this.hls=t,this.config=t.config,this.registerListeners()}get levelDetails(){var t;return((t=this.hls)==null?void 0:t.latestLevelDetails)||null}get latency(){return this._latency||0}get maxLatency(){const{config:t}=this;if(t.liveMaxLatencyDuration!==void 0)return t.liveMaxLatencyDuration;const n=this.levelDetails;return n?t.liveMaxLatencyDurationCount*n.targetduration:0}get targetLatency(){const t=this.levelDetails;if(t===null||this.hls===null)return null;const{holdBack:n,partHoldBack:r,targetduration:l}=t,{liveSyncDuration:d,liveSyncDurationCount:f,lowLatencyMode:p}=this.config,m=this.hls.userConfig;let y=p&&r||n;(this._targetLatencyUpdated||m.liveSyncDuration||m.liveSyncDurationCount||y===0)&&(y=d!==void 0?d:f*l);const b=l;return y+Math.min(this.stallCount*this.config.liveSyncOnStallIncrease,b)}set targetLatency(t){this.stallCount=0,this.config.liveSyncDuration=t,this._targetLatencyUpdated=!0}get liveSyncPosition(){const t=this.estimateLiveEdge(),n=this.targetLatency;if(t===null||n===null)return null;const r=this.levelDetails;if(r===null)return null;const l=r.edge,d=t-n-this.edgeStalled,f=l-r.totalduration,p=l-(this.config.lowLatencyMode&&r.partTarget||r.targetduration);return Math.min(Math.max(f,d),p)}get drift(){const t=this.levelDetails;return t===null?1:t.drift}get edgeStalled(){const t=this.levelDetails;if(t===null)return 0;const n=(this.config.lowLatencyMode&&t.partTarget||t.targetduration)*3;return Math.max(t.age-n,0)}get forwardBufferLength(){const{media:t}=this,n=this.levelDetails;if(!t||!n)return 0;const r=t.buffered.length;return(r?t.buffered.end(r-1):n.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.hls=null}registerListeners(){const{hls:t}=this;t&&(t.on(He.MEDIA_ATTACHED,this.onMediaAttached,this),t.on(He.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(He.MANIFEST_LOADING,this.onManifestLoading,this),t.on(He.LEVEL_UPDATED,this.onLevelUpdated,this),t.on(He.ERROR,this.onError,this))}unregisterListeners(){const{hls:t}=this;t&&(t.off(He.MEDIA_ATTACHED,this.onMediaAttached,this),t.off(He.MEDIA_DETACHING,this.onMediaDetaching,this),t.off(He.MANIFEST_LOADING,this.onManifestLoading,this),t.off(He.LEVEL_UPDATED,this.onLevelUpdated,this),t.off(He.ERROR,this.onError,this))}onMediaAttached(t,n){this.media=n.media,this.media.addEventListener("timeupdate",this.onTimeupdate)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.onTimeupdate),this.media=null)}onManifestLoading(){this._latency=null,this.stallCount=0}onLevelUpdated(t,{details:n}){n.advanced&&this.onTimeupdate(),!n.live&&this.media&&this.media.removeEventListener("timeupdate",this.onTimeupdate)}onError(t,n){var r;n.details===pn.BUFFER_STALLED_ERROR&&(this.stallCount++,this.hls&&(r=this.levelDetails)!=null&&r.live&&this.hls.logger.warn("[latency-controller]: Stall detected, adjusting target latency"))}changeMediaPlaybackRate(t,n){var r,l;t.playbackRate!==n&&((r=this.hls)==null||r.logger.debug(`[latency-controller]: latency=${this.latency.toFixed(3)}, targetLatency=${(l=this.targetLatency)==null?void 0:l.toFixed(3)}, forwardBufferLength=${this.forwardBufferLength.toFixed(3)}: adjusting playback rate from ${t.playbackRate} to ${n}`),t.playbackRate=n)}estimateLiveEdge(){const t=this.levelDetails;return t===null?null:t.edge+t.age}computeLatency(){const t=this.estimateLiveEdge();return t===null?null:t-this.currentTime}}class dV extends _w{constructor(t,n){super(t,"level-controller"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=n,this._registerListeners()}_registerListeners(){const{hls:t}=this;t.on(He.MANIFEST_LOADING,this.onManifestLoading,this),t.on(He.MANIFEST_LOADED,this.onManifestLoaded,this),t.on(He.LEVEL_LOADED,this.onLevelLoaded,this),t.on(He.LEVELS_UPDATED,this.onLevelsUpdated,this),t.on(He.FRAG_BUFFERED,this.onFragBuffered,this),t.on(He.ERROR,this.onError,this)}_unregisterListeners(){const{hls:t}=this;t.off(He.MANIFEST_LOADING,this.onManifestLoading,this),t.off(He.MANIFEST_LOADED,this.onManifestLoaded,this),t.off(He.LEVEL_LOADED,this.onLevelLoaded,this),t.off(He.LEVELS_UPDATED,this.onLevelsUpdated,this),t.off(He.FRAG_BUFFERED,this.onFragBuffered,this),t.off(He.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(n=>{n.loadError=0,n.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(t,n){this.resetLevels()}onManifestLoaded(t,n){const r=this.hls.config.preferManagedMediaSource,l=[],d={},f={};let p=!1,m=!1,y=!1;n.levels.forEach(b=>{var _;const A=b.attrs;let{audioCodec:w,videoCodec:T}=b;w&&(b.audioCodec=w=eE(w,r)||void 0),((_=T)==null?void 0:_.indexOf("avc1"))===0&&(T=b.videoCodec=o6(T));const{width:k,height:U,unknownCodecs:Y}=b;let se=Y?Y.length:0;if(Y)for(let ue=se;ue--;){const $e=Y[ue];this.isAudioSupported($e)?(b.audioCodec=w=w?`${w},${$e}`:$e,se--,yg.audio[w.substring(0,4)]=2):this.isVideoSupported($e)&&(b.videoCodec=T=T?`${T},${$e}`:$e,se--,yg.video[T.substring(0,4)]=2)}if(p||(p=!!(k&&U)),m||(m=!!T),y||(y=!!w),se||w&&!this.isAudioSupported(w)||T&&!this.isVideoSupported(T)){this.log(`Some or all CODECS not supported "${A.CODECS}"`);return}const{CODECS:te,"FRAME-RATE":Re,"HDCP-LEVEL":Be,"PATHWAY-ID":j,RESOLUTION:M,"VIDEO-RANGE":Z}=A,x=`${`${j||"."}-`}${b.bitrate}-${M}-${Re}-${te}-${Z}-${Be}`;if(d[x])if(d[x].uri!==b.url&&!b.attrs["PATHWAY-ID"]){const ue=f[x]+=1;b.attrs["PATHWAY-ID"]=new Array(ue+1).join(".");const $e=this.createLevel(b);d[x]=$e,l.push($e)}else d[x].addGroupId("audio",A.AUDIO),d[x].addGroupId("text",A.SUBTITLES);else{const ue=this.createLevel(b);d[x]=ue,f[x]=1,l.push(ue)}}),this.filterAndSortMediaOptions(l,n,p,m,y)}createLevel(t){const n=new wy(t),r=t.supplemental;if(r!=null&&r.videoCodec&&!this.isVideoSupported(r.videoCodec)){const l=new Error(`SUPPLEMENTAL-CODECS not supported "${r.videoCodec}"`);this.log(l.message),n.supportedResult=SM(l,[])}return n}isAudioSupported(t){return pA(t,"audio",this.hls.config.preferManagedMediaSource)}isVideoSupported(t){return pA(t,"video",this.hls.config.preferManagedMediaSource)}filterAndSortMediaOptions(t,n,r,l,d){let f=[],p=[],m=t;if((r||l)&&d&&(m=m.filter(({videoCodec:U,videoRange:Y,width:se,height:te})=>(!!U||!!(se&&te))&&f6(Y))),m.length===0){Promise.resolve().then(()=>{if(this.hls){let U="no level with compatible codecs found in manifest",Y=U;n.levels.length&&(Y=`one or more CODECS in variant not supported: ${Bs(n.levels.map(te=>te.attrs.CODECS).filter((te,Re,Be)=>Be.indexOf(te)===Re))}`,this.warn(Y),U+=` (${Y})`);const se=new Error(U);this.hls.trigger(He.ERROR,{type:Hi.MEDIA_ERROR,details:pn.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:n.url,error:se,reason:Y})}});return}n.audioTracks&&(f=n.audioTracks.filter(U=>!U.audioCodec||this.isAudioSupported(U.audioCodec)),pL(f)),n.subtitles&&(p=n.subtitles,pL(p));const y=m.slice(0);m.sort((U,Y)=>{if(U.attrs["HDCP-LEVEL"]!==Y.attrs["HDCP-LEVEL"])return(U.attrs["HDCP-LEVEL"]||"")>(Y.attrs["HDCP-LEVEL"]||"")?1:-1;if(r&&U.height!==Y.height)return U.height-Y.height;if(U.frameRate!==Y.frameRate)return U.frameRate-Y.frameRate;if(U.videoRange!==Y.videoRange)return tE.indexOf(U.videoRange)-tE.indexOf(Y.videoRange);if(U.videoCodec!==Y.videoCodec){const se=o2(U.videoCodec),te=o2(Y.videoCodec);if(se!==te)return te-se}if(U.uri===Y.uri&&U.codecSet!==Y.codecSet){const se=ZT(U.codecSet),te=ZT(Y.codecSet);if(se!==te)return te-se}return U.averageBitrate!==Y.averageBitrate?U.averageBitrate-Y.averageBitrate:0});let b=y[0];if(this.steering&&(m=this.steering.filterParsedLevels(m),m.length!==y.length)){for(let U=0;U<y.length;U++)if(y[U].pathwayId===m[0].pathwayId){b=y[U];break}}this._levels=m;for(let U=0;U<m.length;U++)if(m[U]===b){var _;this._firstLevel=U;const Y=b.bitrate,se=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${m.length} level(s) found, first bitrate: ${Y}`),((_=this.hls.userConfig)==null?void 0:_.abrEwmaDefaultEstimate)===void 0){const te=Math.min(Y,this.hls.config.abrEwmaDefaultEstimateMax);te>se&&se===this.hls.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=te)}break}const A=d&&!l,w=this.hls.config,T=!!(w.audioStreamController&&w.audioTrackController),k={levels:m,audioTracks:f,subtitleTracks:p,sessionData:n.sessionData,sessionKeys:n.sessionKeys,firstLevel:this._firstLevel,stats:n.stats,audio:d,video:l,altAudio:T&&!A&&f.some(U=>!!U.url)};this.hls.trigger(He.MANIFEST_PARSED,k)}get levels(){return this._levels.length===0?null:this._levels}get loadLevelObj(){return this.currentLevel}get level(){return this.currentLevelIndex}set level(t){const n=this._levels;if(n.length===0)return;if(t<0||t>=n.length){const b=new Error("invalid level idx"),_=t<0;if(this.hls.trigger(He.ERROR,{type:Hi.OTHER_ERROR,details:pn.LEVEL_SWITCH_ERROR,level:t,fatal:_,error:b,reason:b.message}),_)return;t=Math.min(t,n.length-1)}const r=this.currentLevelIndex,l=this.currentLevel,d=l?l.attrs["PATHWAY-ID"]:void 0,f=n[t],p=f.attrs["PATHWAY-ID"];if(this.currentLevelIndex=t,this.currentLevel=f,r===t&&l&&d===p)return;this.log(`Switching to level ${t} (${f.height?f.height+"p ":""}${f.videoRange?f.videoRange+" ":""}${f.codecSet?f.codecSet+" ":""}@${f.bitrate})${p?" with Pathway "+p:""} from level ${r}${d?" with Pathway "+d:""}`);const m={level:t,attrs:f.attrs,details:f.details,bitrate:f.bitrate,averageBitrate:f.averageBitrate,maxBitrate:f.maxBitrate,realBitrate:f.realBitrate,width:f.width,height:f.height,codecSet:f.codecSet,audioCodec:f.audioCodec,videoCodec:f.videoCodec,audioGroups:f.audioGroups,subtitleGroups:f.subtitleGroups,loaded:f.loaded,loadError:f.loadError,fragmentError:f.fragmentError,name:f.name,id:f.id,uri:f.uri,url:f.url,urlId:0,audioGroupIds:f.audioGroupIds,textGroupIds:f.textGroupIds};this.hls.trigger(He.LEVEL_SWITCHING,m);const y=f.details;if(!y||y.live){const b=this.switchParams(f.uri,l==null?void 0:l.details,y);this.loadPlaylist(b)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(t){this.manualLevelIndex=t,this._startLevel===void 0&&(this._startLevel=t),t!==-1&&(this.level=t)}get firstLevel(){return this._firstLevel}set firstLevel(t){this._firstLevel=t}get startLevel(){if(this._startLevel===void 0){const t=this.hls.config.startLevel;return t!==void 0?t:this.hls.firstAutoLevel}return this._startLevel}set startLevel(t){this._startLevel=t}get pathways(){return this.steering?this.steering.pathways():[]}get pathwayPriority(){return this.steering?this.steering.pathwayPriority:null}set pathwayPriority(t){if(this.steering){const n=this.steering.pathways(),r=t.filter(l=>n.indexOf(l)!==-1);if(t.length<1){this.warn(`pathwayPriority ${t} should contain at least one pathway from list: ${n}`);return}this.steering.pathwayPriority=r}}onError(t,n){n.fatal||!n.context||n.context.type===Fr.LEVEL&&n.context.level===this.level&&this.checkRetry(n)}onFragBuffered(t,{frag:n}){if(n!==void 0&&n.type===Ui.MAIN){const r=n.elementaryStreams;if(!Object.keys(r).some(d=>!!r[d]))return;const l=this._levels[n.level];l!=null&&l.loadError&&(this.log(`Resetting level error count of ${l.loadError} on frag buffered`),l.loadError=0)}}onLevelLoaded(t,n){var r;const{level:l,details:d}=n,f=n.levelInfo;if(!f){var p;this.warn(`Invalid level index ${l}`),(p=n.deliveryDirectives)!=null&&p.skip&&(d.deltaUpdateFailed=!0);return}if(f===this.currentLevel||n.withoutMultiVariant){f.fragmentError===0&&(f.loadError=0);let m=f.details;m===n.details&&m.advanced&&(m=void 0),this.playlistLoaded(l,n,m)}else(r=n.deliveryDirectives)!=null&&r.skip&&(d.deltaUpdateFailed=!0)}loadPlaylist(t){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentLevel)&&this.scheduleLoading(this.currentLevel,t)}loadingPlaylist(t,n){super.loadingPlaylist(t,n);const r=this.getUrlWithDirectives(t.uri,n),l=this.currentLevelIndex,d=t.attrs["PATHWAY-ID"],f=t.details,p=f==null?void 0:f.age;this.log(`Loading level index ${l}${(n==null?void 0:n.msn)!==void 0?" at sn "+n.msn+" part "+n.part:""}${d?" Pathway "+d:""}${p&&f.live?" age "+p.toFixed(1)+(f.type&&" "+f.type||""):""} ${r}`),this.hls.trigger(He.LEVEL_LOADING,{url:r,level:l,levelInfo:t,pathwayId:t.attrs["PATHWAY-ID"],id:0,deliveryDirectives:n||null})}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(t){this.level=t,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=t)}removeLevel(t){var n;if(this._levels.length===1)return;const r=this._levels.filter((d,f)=>f!==t?!0:(this.steering&&this.steering.removeLevel(d),d===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,d.details&&d.details.fragments.forEach(p=>p.level=-1)),!1));UM(r),this._levels=r,this.currentLevelIndex>-1&&(n=this.currentLevel)!=null&&n.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.manualLevelIndex>-1&&(this.manualLevelIndex=this.currentLevelIndex);const l=r.length-1;this._firstLevel=Math.min(this._firstLevel,l),this._startLevel&&(this._startLevel=Math.min(this._startLevel,l)),this.hls.trigger(He.LEVELS_UPDATED,{levels:r})}onLevelsUpdated(t,{levels:n}){this._levels=n}checkMaxAutoUpdated(){const{autoLevelCapping:t,maxAutoLevel:n,maxHdcpLevel:r}=this.hls;this._maxAutoLevel!==n&&(this._maxAutoLevel=n,this.hls.trigger(He.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:t,levels:this.levels,maxAutoLevel:n,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:r}))}}function pL(u){const t={};u.forEach(n=>{const r=n.groupId||"";n.id=t[r]=t[r]||0,t[r]++})}function CN(){return self.SourceBuffer||self.WebKitSourceBuffer}function kN(){if(!kf())return!1;const t=CN();return!t||t.prototype&&typeof t.prototype.appendBuffer=="function"&&typeof t.prototype.remove=="function"}function fV(){if(!kN())return!1;const u=kf();return typeof(u==null?void 0:u.isTypeSupported)=="function"&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(t=>u.isTypeSupported(Ay(t,"video")))||["mp4a.40.2","fLaC"].some(t=>u.isTypeSupported(Ay(t,"audio"))))}function hV(){var u;const t=CN();return typeof(t==null||(u=t.prototype)==null?void 0:u.changeType)=="function"}const pV=100;class gV extends pw{constructor(t,n,r){super(t,n,r,"stream-controller",Ui.MAIN),this.audioCodecSwap=!1,this.level=-1,this._forceStartLoad=!1,this._hasEnoughToStart=!1,this.altAudio=0,this.audioOnly=!1,this.fragPlaying=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this.onMediaPlaying=()=>{this.tick()},this.onMediaSeeked=()=>{const l=this.media,d=l?l.currentTime:null;if(d===null||!xi(d)||(this.log(`Media seeked to ${d.toFixed(3)}`),!this.getBufferedFrag(d)))return;const f=this.getFwdBufferInfoAtPos(l,d,Ui.MAIN,0);if(f===null||f.len===0){this.warn(`Main forward buffer length at ${d} on "seeked" event ${f?f.len:"empty"})`);return}this.tick()},this.registerListeners()}registerListeners(){super.registerListeners();const{hls:t}=this;t.on(He.MANIFEST_PARSED,this.onManifestParsed,this),t.on(He.LEVEL_LOADING,this.onLevelLoading,this),t.on(He.LEVEL_LOADED,this.onLevelLoaded,this),t.on(He.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),t.on(He.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.on(He.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.on(He.BUFFER_CREATED,this.onBufferCreated,this),t.on(He.BUFFER_FLUSHED,this.onBufferFlushed,this),t.on(He.LEVELS_UPDATED,this.onLevelsUpdated,this),t.on(He.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){super.unregisterListeners();const{hls:t}=this;t.off(He.MANIFEST_PARSED,this.onManifestParsed,this),t.off(He.LEVEL_LOADED,this.onLevelLoaded,this),t.off(He.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),t.off(He.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),t.off(He.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.off(He.BUFFER_CREATED,this.onBufferCreated,this),t.off(He.BUFFER_FLUSHED,this.onBufferFlushed,this),t.off(He.LEVELS_UPDATED,this.onLevelsUpdated,this),t.off(He.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this.onMediaPlaying=this.onMediaSeeked=null,this.unregisterListeners(),super.onHandlerDestroying()}startLoad(t,n){if(this.levels){const{lastCurrentTime:r,hls:l}=this;if(this.stopLoad(),this.setInterval(pV),this.level=-1,!this.startFragRequested){let d=l.startLevel;d===-1&&(l.config.testBandwidth&&this.levels.length>1?(d=0,this.bitrateTest=!0):d=l.firstAutoLevel),l.nextLoadLevel=d,this.level=l.loadLevel,this._hasEnoughToStart=!!n}r>0&&t===-1&&!n&&(this.log(`Override startPosition with lastCurrentTime @${r.toFixed(3)}`),t=r),this.state=Gn.IDLE,this.nextLoadPosition=this.lastCurrentTime=t+this.timelineOffset,this.startPosition=n?-1:t,this.tick()}else this._forceStartLoad=!0,this.state=Gn.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case Gn.WAITING_LEVEL:{const{levels:n,level:r}=this,l=n==null?void 0:n[r],d=l==null?void 0:l.details;if(d&&(!d.live||this.levelLastLoaded===l&&!this.waitForLive(l))){if(this.waitForCdnTuneIn(d))break;this.state=Gn.IDLE;break}else if(this.hls.nextLoadLevel!==this.level){this.state=Gn.IDLE;break}break}case Gn.FRAG_LOADING_WAITING_RETRY:{var t;const n=self.performance.now(),r=this.retryDate;if(!r||n>=r||(t=this.media)!=null&&t.seeking){const{levels:l,level:d}=this,f=l==null?void 0:l[d];this.resetStartWhenNotLoaded(f||null),this.state=Gn.IDLE}}break}this.state===Gn.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){var t;super.onTickEnd(),(t=this.media)!=null&&t.readyState&&this.media.seeking===!1&&(this.lastCurrentTime=this.media.currentTime),this.checkFragmentChanged()}doTickIdle(){const{hls:t,levelLastLoaded:n,levels:r,media:l}=this;if(n===null||!l&&!this.primaryPrefetch&&(this.startFragRequested||!t.config.startFragPrefetch)||this.altAudio&&this.audioOnly)return;const d=this.buffering?t.nextLoadLevel:t.loadLevel;if(!(r!=null&&r[d]))return;const f=r[d],p=this.getMainFwdBufferInfo();if(p===null)return;const m=this.getLevelDetails();if(m&&this._streamEnded(p,m)){const k={};this.altAudio===2&&(k.type="video"),this.hls.trigger(He.BUFFER_EOS,k),this.state=Gn.ENDED;return}if(!this.buffering)return;t.loadLevel!==d&&t.manualLevel===-1&&this.log(`Adapting to level ${d} from level ${this.level}`),this.level=t.nextLoadLevel=d;const y=f.details;if(!y||this.state===Gn.WAITING_LEVEL||this.waitForLive(f)){this.level=d,this.state=Gn.WAITING_LEVEL,this.startFragRequested=!1;return}const b=p.len,_=this.getMaxBufferLength(f.maxBitrate);if(b>=_)return;this.backtrackFragment&&this.backtrackFragment.start>p.end&&(this.backtrackFragment=null);const A=this.backtrackFragment?this.backtrackFragment.start:p.end;let w=this.getNextFragment(A,y);if(this.couldBacktrack&&!this.fragPrevious&&w&&Ha(w)&&this.fragmentTracker.getState(w)!==Ca.OK){var T;const U=((T=this.backtrackFragment)!=null?T:w).sn-y.startSN,Y=y.fragments[U-1];Y&&w.cc===Y.cc&&(w=Y,this.fragmentTracker.removeFragment(Y))}else this.backtrackFragment&&p.len&&(this.backtrackFragment=null);if(w&&this.isLoopLoading(w,A)){if(!w.gap){const U=this.audioOnly&&!this.altAudio?fs.AUDIO:fs.VIDEO,Y=(U===fs.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;Y&&this.afterBufferFlushed(Y,U,Ui.MAIN)}w=this.getNextFragmentLoopLoading(w,y,p,Ui.MAIN,_)}w&&(w.initSegment&&!w.initSegment.data&&!this.bitrateTest&&(w=w.initSegment),this.loadFragment(w,f,A))}loadFragment(t,n,r){const l=this.fragmentTracker.getState(t);l===Ca.NOT_LOADED||l===Ca.PARTIAL?Ha(t)?this.bitrateTest?(this.log(`Fragment ${t.sn} of level ${t.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(t,n)):super.loadFragment(t,n,r):this._loadInitSegment(t,n):this.clearTrackerIfNeeded(t)}getBufferedFrag(t){return this.fragmentTracker.getBufferedFrag(t,Ui.MAIN)}followingBufferedFrag(t){return t?this.getBufferedFrag(t.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:t,media:n}=this;if(n!=null&&n.readyState){let r;const l=this.getAppendedFrag(n.currentTime);l&&l.start>1&&this.flushMainBuffer(0,l.start-1);const d=this.getLevelDetails();if(d!=null&&d.live){const p=this.getMainFwdBufferInfo();if(!p||p.len<d.targetduration*2)return}if(!n.paused&&t){const p=this.hls.nextLoadLevel,m=t[p],y=this.fragLastKbps;y&&this.fragCurrent?r=this.fragCurrent.duration*m.maxBitrate/(1e3*y)+1:r=0}else r=0;const f=this.getBufferedFrag(n.currentTime+r);if(f){const p=this.followingBufferedFrag(f);if(p){this.abortCurrentFrag();const m=p.maxStartPTS?p.maxStartPTS:p.start,y=p.duration,b=Math.max(f.end,m+Math.min(Math.max(y-this.config.maxFragLookUpTolerance,y*(this.couldBacktrack?.5:.125)),y*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(b,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const t=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,t&&(t.abortRequests(),this.fragmentTracker.removeFragment(t)),this.state){case Gn.KEY_LOADING:case Gn.FRAG_LOADING:case Gn.FRAG_LOADING_WAITING_RETRY:case Gn.PARSING:case Gn.PARSED:this.state=Gn.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(t,n){super.flushMainBuffer(t,n,this.altAudio===2?"video":null)}onMediaAttached(t,n){super.onMediaAttached(t,n);const r=n.media;Md(r,"playing",this.onMediaPlaying),Md(r,"seeked",this.onMediaSeeked)}onMediaDetaching(t,n){const{media:r}=this;r&&(Fc(r,"playing",this.onMediaPlaying),Fc(r,"seeked",this.onMediaSeeked)),this.videoBuffer=null,this.fragPlaying=null,super.onMediaDetaching(t,n),!n.transferMedia&&(this._hasEnoughToStart=!1)}onManifestLoading(){super.onManifestLoading(),this.log("Trigger BUFFER_RESET"),this.hls.trigger(He.BUFFER_RESET,void 0),this.couldBacktrack=!1,this.fragLastKbps=0,this.fragPlaying=this.backtrackFragment=null,this.altAudio=0,this.audioOnly=!1}onManifestParsed(t,n){let r=!1,l=!1;n.levels.forEach(d=>{const f=d.audioCodec;f&&(r=r||f.indexOf("mp4a.40.2")!==-1,l=l||f.indexOf("mp4a.40.5")!==-1)}),this.audioCodecSwitch=r&&l&&!hV(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=n.levels,this.startFragRequested=!1}onLevelLoading(t,n){const{levels:r}=this;if(!r||this.state!==Gn.IDLE)return;const l=n.levelInfo;(!l.details||l.details.live&&(this.levelLastLoaded!==l||l.details.expired)||this.waitForCdnTuneIn(l.details))&&(this.state=Gn.WAITING_LEVEL)}onLevelLoaded(t,n){var r;const{levels:l,startFragRequested:d}=this,f=n.level,p=n.details,m=p.totalduration;if(!l){this.warn(`Levels were reset while loading level ${f}`);return}this.log(`Level ${f} loaded [${p.startSN},${p.endSN}]${p.lastPartSn?`[part-${p.lastPartSn}-${p.lastPartIndex}]`:""}, cc [${p.startCC}, ${p.endCC}] duration:${m}`);const y=n.levelInfo,b=this.fragCurrent;b&&(this.state===Gn.FRAG_LOADING||this.state===Gn.FRAG_LOADING_WAITING_RETRY)&&b.level!==n.level&&b.loader&&this.abortCurrentFrag();let _=0;if(p.live||(r=y.details)!=null&&r.live){var A;if(this.checkLiveUpdate(p),p.deltaUpdateFailed)return;_=this.alignPlaylists(p,y.details,(A=this.levelLastLoaded)==null?void 0:A.details)}if(y.details=p,this.levelLastLoaded=y,d||this.setStartPosition(p,_),this.hls.trigger(He.LEVEL_UPDATED,{details:p,level:f}),this.state===Gn.WAITING_LEVEL){if(this.waitForCdnTuneIn(p))return;this.state=Gn.IDLE}d&&p.live&&this.synchronizeToLiveEdge(p),this.tick()}synchronizeToLiveEdge(t){const{config:n,media:r}=this;if(!r)return;const l=this.hls.liveSyncPosition,d=this.getLoadPosition(),f=t.fragmentStart,p=t.edge,m=d>=f-n.maxFragLookUpTolerance&&d<=p;if(l!==null&&r.duration>l&&(d<l||!m)){const y=n.liveMaxLatencyDuration!==void 0?n.liveMaxLatencyDuration:n.liveMaxLatencyDurationCount*t.targetduration;(!m&&r.readyState<4||d<p-y)&&(this._hasEnoughToStart||(this.nextLoadPosition=l),r.readyState&&(this.warn(`Playback: ${d.toFixed(3)} is located too far from the end of live sliding playlist: ${p}, reset currentTime to : ${l.toFixed(3)}`),r.currentTime=l))}}_handleFragmentLoadProgress(t){var n;const r=t.frag,{part:l,payload:d}=t,{levels:f}=this;if(!f){this.warn(`Levels were reset while fragment load was in progress. Fragment ${r.sn} of level ${r.level} will not be buffered`);return}const p=f[r.level];if(!p){this.warn(`Level ${r.level} not found on progress`);return}const m=p.details;if(!m){this.warn(`Dropping fragment ${r.sn} of level ${r.level} after level details were reset`),this.fragmentTracker.removeFragment(r);return}const y=p.videoCodec,b=m.PTSKnown||!m.live,_=(n=r.initSegment)==null?void 0:n.data,A=this._getAudioCodec(p),w=this.transmuxer=this.transmuxer||new oN(this.hls,Ui.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),T=l?l.index:-1,k=T!==-1,U=new dw(r.level,r.sn,r.stats.chunkCount,d.byteLength,T,k),Y=this.initPTS[r.cc];w.push(d,_,A,y,r,l,m.totalduration,b,U,Y)}onAudioTrackSwitching(t,n){const r=this.hls,l=this.altAudio===2;if(nE(n.url,r))this.altAudio=1;else{if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const f=this.fragCurrent;f&&(this.log("Switching to main audio track, cancel main fragment load"),f.abortRequests(),this.fragmentTracker.removeFragment(f)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();if(l){this.fragmentTracker.removeAllFragments(),r.once(He.BUFFER_FLUSHED,()=>{var f;(f=this.hls)==null||f.trigger(He.AUDIO_TRACK_SWITCHED,n)}),r.trigger(He.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null});return}r.trigger(He.AUDIO_TRACK_SWITCHED,n)}}onAudioTrackSwitched(t,n){const r=nE(n.url,this.hls);if(r){const l=this.videoBuffer;l&&this.mediaBuffer!==l&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=l)}this.altAudio=r?2:0,this.tick()}onBufferCreated(t,n){const r=n.tracks;let l,d,f=!1;for(const p in r){const m=r[p];if(m.id==="main"){if(d=p,l=m,p==="video"){const y=r[p];y&&(this.videoBuffer=y.buffer)}}else f=!0}f&&l?(this.log(`Alternate track found, use ${d}.buffered to schedule main fragment loading`),this.mediaBuffer=l.buffer):this.mediaBuffer=this.media}onFragBuffered(t,n){const{frag:r,part:l}=n,d=r.type===Ui.MAIN;if(d){if(this.fragContextChanged(r)){this.warn(`Fragment ${r.sn}${l?" p: "+l.index:""} of level ${r.level} finished buffering, but was aborted. state: ${this.state}`),this.state===Gn.PARSED&&(this.state=Gn.IDLE);return}const p=l?l.stats:r.stats;this.fragLastKbps=Math.round(8*p.total/(p.buffering.end-p.loading.first)),Ha(r)&&(this.fragPrevious=r),this.fragBufferedComplete(r,l)}const f=this.media;f&&(!this._hasEnoughToStart&&wr.getBuffered(f).length&&(this._hasEnoughToStart=!0,this.seekToStartPos()),d&&this.tick())}get hasEnoughToStart(){return this._hasEnoughToStart}onError(t,n){var r;if(n.fatal){this.state=Gn.ERROR;return}switch(n.details){case pn.FRAG_GAP:case pn.FRAG_PARSING_ERROR:case pn.FRAG_DECRYPT_ERROR:case pn.FRAG_LOAD_ERROR:case pn.FRAG_LOAD_TIMEOUT:case pn.KEY_LOAD_ERROR:case pn.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Ui.MAIN,n);break;case pn.LEVEL_LOAD_ERROR:case pn.LEVEL_LOAD_TIMEOUT:case pn.LEVEL_PARSING_ERROR:!n.levelRetry&&this.state===Gn.WAITING_LEVEL&&((r=n.context)==null?void 0:r.type)===Fr.LEVEL&&(this.state=Gn.IDLE);break;case pn.BUFFER_ADD_CODEC_ERROR:case pn.BUFFER_APPEND_ERROR:if(n.parent!=="main")return;this.resetLoadingState();break;case pn.BUFFER_FULL_ERROR:if(n.parent!=="main")return;this.reduceLengthAndFlushBuffer(n)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case pn.INTERNAL_EXCEPTION:this.recoverWorkerError(n);break}}onFragLoadEmergencyAborted(){this.state=Gn.IDLE,this._hasEnoughToStart||(this.startFragRequested=!1,this.nextLoadPosition=this.lastCurrentTime),this.tickImmediate()}onBufferFlushed(t,{type:n}){if(n!==fs.AUDIO||!this.altAudio){const r=(n===fs.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;r&&(this.afterBufferFlushed(r,n,Ui.MAIN),this.tick())}}onLevelsUpdated(t,n){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level,this.level===-1&&this.resetWhenMissingContext(this.fragCurrent)),this.levels=n.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:t}=this;if(!t)return;const n=t.currentTime;let r=this.startPosition;if(r>=0&&n<r){if(t.seeking){this.log(`could not seek to ${r}, already seeking at ${n}`);return}const l=this.timelineOffset;l&&r&&(r+=l);const d=this.getLevelDetails(),f=wr.getBuffered(t),p=f.length?f.start(0):0,m=p-r,y=Math.max(this.config.maxBufferHole,this.config.maxFragLookUpTolerance);m>0&&(m<y||this.loadingParts&&m<2*((d==null?void 0:d.partTarget)||0))&&(this.log(`adjusting start position by ${m} to match buffer start`),r+=m,this.startPosition=r),n<r&&(this.log(`seek to target start position ${r} from current time ${n} buffer start ${p}`),t.currentTime=r)}}_getAudioCodec(t){let n=this.config.defaultAudioCodec||t.audioCodec;return this.audioCodecSwap&&n&&(this.log("Swapping audio codec"),n.indexOf("mp4a.40.5")!==-1?n="mp4a.40.2":n="mp4a.40.5"),n}_loadBitrateTestFrag(t,n){t.bitrateTest=!0,this._doFragLoad(t,n).then(r=>{const{hls:l}=this,d=r==null?void 0:r.frag;if(!d||this.fragContextChanged(d))return;n.fragmentError=0,this.state=Gn.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const f=d.stats;f.parsing.start=f.parsing.end=f.buffering.start=f.buffering.end=self.performance.now(),l.trigger(He.FRAG_LOADED,r),d.bitrateTest=!1})}_handleTransmuxComplete(t){var n;const r=this.playlistType,{hls:l}=this,{remuxResult:d,chunkMeta:f}=t,p=this.getCurrentContext(f);if(!p){this.resetWhenMissingContext(f);return}const{frag:m,part:y,level:b}=p,{video:_,text:A,id3:w,initSegment:T}=d,{details:k}=b,U=this.altAudio?void 0:d.audio;if(this.fragContextChanged(m)){this.fragmentTracker.removeFragment(m);return}if(this.state=Gn.PARSING,T){if(T!=null&&T.tracks){const te=m.initSegment||m;this._bufferInitSegment(b,T.tracks,te,f),l.trigger(He.FRAG_PARSING_INIT_SEGMENT,{frag:te,id:r,tracks:T.tracks})}const Y=T.initPTS,se=T.timescale;xi(Y)&&(this.initPTS[m.cc]={baseTime:Y,timescale:se},l.trigger(He.INIT_PTS_FOUND,{frag:m,id:r,initPTS:Y,timescale:se}))}if(_&&k){U&&_.type==="audiovideo"&&this.logMuxedErr(m);const Y=k.fragments[m.sn-1-k.startSN],se=m.sn===k.startSN,te=!Y||m.cc>Y.cc;if(d.independent!==!1){const{startPTS:Re,endPTS:Be,startDTS:j,endDTS:M}=_;if(y)y.elementaryStreams[_.type]={startPTS:Re,endPTS:Be,startDTS:j,endDTS:M};else if(_.firstKeyFrame&&_.independent&&f.id===1&&!te&&(this.couldBacktrack=!0),_.dropped&&_.independent){const Z=this.getMainFwdBufferInfo(),K=(Z?Z.end:this.getLoadPosition())+this.config.maxBufferHole,x=_.firstKeyFramePTS?_.firstKeyFramePTS:Re;if(!se&&K<x-this.config.maxBufferHole&&!te){this.backtrack(m);return}else te&&(m.gap=!0);m.setElementaryStreamInfo(_.type,m.start,Be,m.start,M,!0)}else se&&Re-(k.appliedTimelineOffset||0)>jT&&(m.gap=!0);m.setElementaryStreamInfo(_.type,Re,Be,j,M),this.backtrackFragment&&(this.backtrackFragment=m),this.bufferFragmentData(_,m,y,f,se||te)}else if(se||te)m.gap=!0;else{this.backtrack(m);return}}if(U){const{startPTS:Y,endPTS:se,startDTS:te,endDTS:Re}=U;y&&(y.elementaryStreams[fs.AUDIO]={startPTS:Y,endPTS:se,startDTS:te,endDTS:Re}),m.setElementaryStreamInfo(fs.AUDIO,Y,se,te,Re),this.bufferFragmentData(U,m,y,f)}if(k&&w!=null&&(n=w.samples)!=null&&n.length){const Y={id:r,frag:m,details:k,samples:w.samples};l.trigger(He.FRAG_PARSING_METADATA,Y)}if(k&&A){const Y={id:r,frag:m,details:k,samples:A.samples};l.trigger(He.FRAG_PARSING_USERDATA,Y)}}logMuxedErr(t){this.warn(`${Ha(t)?"Media":"Init"} segment with muxed audiovideo where only video expected: ${t.url}`)}_bufferInitSegment(t,n,r,l){if(this.state!==Gn.PARSING)return;this.audioOnly=!!n.audio&&!n.video,this.altAudio&&!this.audioOnly&&(delete n.audio,n.audiovideo&&this.logMuxedErr(r));const{audio:d,video:f,audiovideo:p}=n;if(d){let y=NT(d.codec,t.audioCodec);y==="mp4a"&&(y="mp4a.40.5");const b=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){y&&(y.indexOf("mp4a.40.5")!==-1?y="mp4a.40.2":y="mp4a.40.5");const _=d.metadata;_&&"channelCount"in _&&(_.channelCount||1)!==1&&b.indexOf("firefox")===-1&&(y="mp4a.40.5")}y&&y.indexOf("mp4a.40.5")!==-1&&b.indexOf("android")!==-1&&d.container!=="audio/mpeg"&&(y="mp4a.40.2",this.log(`Android: force audio codec to ${y}`)),t.audioCodec&&t.audioCodec!==y&&this.log(`Swapping manifest audio codec "${t.audioCodec}" for "${y}"`),d.levelCodec=y,d.id=Ui.MAIN,this.log(`Init audio buffer, container:${d.container}, codecs[selected/level/parsed]=[${y||""}/${t.audioCodec||""}/${d.codec}]`),delete n.audiovideo}if(f){f.levelCodec=t.videoCodec,f.id=Ui.MAIN;const y=f.codec;if((y==null?void 0:y.length)===4)switch(y){case"hvc1":case"hev1":f.codec="hvc1.1.6.L120.90";break;case"av01":f.codec="av01.0.04M.08";break;case"avc1":f.codec="avc1.42e01e";break}this.log(`Init video buffer, container:${f.container}, codecs[level/parsed]=[${t.videoCodec||""}/${y}]${f.codec!==y?" parsed-corrected="+f.codec:""}${f.supplemental?" supplemental="+f.supplemental:""}`),delete n.audiovideo}p&&(this.log(`Init audiovideo buffer, container:${p.container}, codecs[level/parsed]=[${t.codecs}/${p.codec}]`),delete n.video,delete n.audio);const m=Object.keys(n);if(m.length){if(this.hls.trigger(He.BUFFER_CODECS,n),!this.hls)return;m.forEach(y=>{const _=n[y].initSegment;_!=null&&_.byteLength&&this.hls.trigger(He.BUFFER_APPENDING,{type:y,data:_,frag:r,part:null,chunkMeta:l,parent:r.type})})}this.tickImmediate()}getMainFwdBufferInfo(){const t=this.mediaBuffer&&this.altAudio===2?this.mediaBuffer:this.media;return this.getFwdBufferInfo(t,Ui.MAIN)}get maxBufferLength(){const{levels:t,level:n}=this,r=t==null?void 0:t[n];return r?this.getMaxBufferLength(r.maxBitrate):this.config.maxBufferLength}backtrack(t){this.couldBacktrack=!0,this.backtrackFragment=t,this.resetTransmuxer(),this.flushBufferGap(t),this.fragmentTracker.removeFragment(t),this.fragPrevious=null,this.nextLoadPosition=t.start,this.state=Gn.IDLE}checkFragmentChanged(){const t=this.media;let n=null;if(t&&t.readyState>1&&t.seeking===!1){const r=t.currentTime;if(wr.isBuffered(t,r)?n=this.getAppendedFrag(r):wr.isBuffered(t,r+.1)&&(n=this.getAppendedFrag(r+.1)),n){this.backtrackFragment=null;const l=this.fragPlaying,d=n.level;(!l||n.sn!==l.sn||l.level!==d)&&(this.fragPlaying=n,this.hls.trigger(He.FRAG_CHANGED,{frag:n}),(!l||l.level!==d)&&this.hls.trigger(He.LEVEL_SWITCHED,{level:d}))}}}get nextLevel(){const t=this.nextBufferedFrag;return t?t.level:-1}get currentFrag(){var t;if(this.fragPlaying)return this.fragPlaying;const n=((t=this.media)==null?void 0:t.currentTime)||this.lastCurrentTime;return xi(n)?this.getAppendedFrag(n):null}get currentProgramDateTime(){var t;const n=((t=this.media)==null?void 0:t.currentTime)||this.lastCurrentTime;if(xi(n)){const r=this.getLevelDetails(),l=this.currentFrag||(r?Fh(null,r.fragments,n):null);if(l){const d=l.programDateTime;if(d!==null){const f=d+(n-l.start)*1e3;return new Date(f)}}}return null}get currentLevel(){const t=this.currentFrag;return t?t.level:-1}get nextBufferedFrag(){const t=this.currentFrag;return t?this.followingBufferedFrag(t):null}get forceStartLoad(){return this._forceStartLoad}}class mV{constructor(t){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=t}abort(t){for(const r in this.keyUriToKeyInfo){const l=this.keyUriToKeyInfo[r].loader;if(l){var n;if(t&&t!==((n=l.context)==null?void 0:n.frag.type))return;l.abort()}}}detach(){for(const t in this.keyUriToKeyInfo){const n=this.keyUriToKeyInfo[t];(n.mediaKeySessionContext||n.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[t]}}destroy(){this.detach();for(const t in this.keyUriToKeyInfo){const n=this.keyUriToKeyInfo[t].loader;n&&n.destroy()}this.keyUriToKeyInfo={}}createKeyLoadError(t,n=pn.KEY_LOAD_ERROR,r,l,d){return new Dd({type:Hi.NETWORK_ERROR,details:n,fatal:!1,frag:t,response:d,error:r,networkDetails:l})}loadClear(t,n){if(this.emeController&&this.config.emeEnabled){const{sn:r,cc:l}=t;for(let d=0;d<n.length;d++){const f=n[d];if(l<=f.cc&&(r==="initSegment"||f.sn==="initSegment"||r<f.sn)){this.emeController.selectKeySystemFormat(f).then(p=>{f.setKeyFormat(p)});break}}}}load(t){return!t.decryptdata&&t.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(t).then(n=>this.loadInternal(t,n)):this.loadInternal(t)}loadInternal(t,n){var r,l;n&&t.setKeyFormat(n);const d=t.decryptdata;if(!d){const y=new Error(n?`Expected frag.decryptdata to be defined after setting format ${n}`:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(t,pn.KEY_LOAD_ERROR,y))}const f=d.uri;if(!f)return Promise.reject(this.createKeyLoadError(t,pn.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${f}"`)));let p=this.keyUriToKeyInfo[f];if((r=p)!=null&&r.decryptdata.key)return d.key=p.decryptdata.key,Promise.resolve({frag:t,keyInfo:p});if((l=p)!=null&&l.keyLoadPromise){var m;switch((m=p.mediaKeySessionContext)==null?void 0:m.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return p.keyLoadPromise.then(y=>(d.key=y.keyInfo.decryptdata.key,{frag:t,keyInfo:p}))}}switch(p=this.keyUriToKeyInfo[f]={decryptdata:d,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},d.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return d.keyFormat==="identity"?this.loadKeyHTTP(p,t):this.loadKeyEME(p,t);case"AES-128":case"AES-256":case"AES-256-CTR":return this.loadKeyHTTP(p,t);default:return Promise.reject(this.createKeyLoadError(t,pn.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${d.method}"`)))}}loadKeyEME(t,n){const r={frag:n,keyInfo:t};if(this.emeController&&this.config.emeEnabled){const l=this.emeController.loadKey(r);if(l)return(t.keyLoadPromise=l.then(d=>(t.mediaKeySessionContext=d,r))).catch(d=>{throw t.keyLoadPromise=null,d})}return Promise.resolve(r)}loadKeyHTTP(t,n){const r=this.config,l=r.loader,d=new l(r);return n.keyLoader=t.loader=d,t.keyLoadPromise=new Promise((f,p)=>{const m={keyInfo:t,frag:n,responseType:"arraybuffer",url:t.decryptdata.uri},y=r.keyLoadPolicy.default,b={loadPolicy:y,timeout:y.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},_={onSuccess:(A,w,T,k)=>{const{frag:U,keyInfo:Y,url:se}=T;if(!U.decryptdata||Y!==this.keyUriToKeyInfo[se])return p(this.createKeyLoadError(U,pn.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),k));Y.decryptdata.key=U.decryptdata.key=new Uint8Array(A.data),U.keyLoader=null,Y.loader=null,f({frag:U,keyInfo:Y})},onError:(A,w,T,k)=>{this.resetLoader(w),p(this.createKeyLoadError(n,pn.KEY_LOAD_ERROR,new Error(`HTTP Error ${A.code} loading key ${A.text}`),T,as({url:m.url,data:void 0},A)))},onTimeout:(A,w,T)=>{this.resetLoader(w),p(this.createKeyLoadError(n,pn.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),T))},onAbort:(A,w,T)=>{this.resetLoader(w),p(this.createKeyLoadError(n,pn.INTERNAL_ABORTED,new Error("key loading aborted"),T))}};d.load(m,b,_)})}resetLoader(t){const{frag:n,keyInfo:r,url:l}=t,d=r.loader;n.keyLoader===d&&(n.keyLoader=null,r.loader=null),delete this.keyUriToKeyInfo[l],d&&d.destroy()}}function gL(u){const{type:t}=u;switch(t){case Fr.AUDIO_TRACK:return Ui.AUDIO;case Fr.SUBTITLE_TRACK:return Ui.SUBTITLE;default:return Ui.MAIN}}function wx(u,t){let n=u.url;return(n===void 0||n.indexOf("data:")===0)&&(n=t.url),n}let yV=class{constructor(t){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.onManifestLoaded=this.checkAutostartLoad,this.hls=t,this.registerListeners()}startLoad(t){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:t}=this;t.on(He.MANIFEST_LOADING,this.onManifestLoading,this),t.on(He.LEVEL_LOADING,this.onLevelLoading,this),t.on(He.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),t.on(He.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),t.on(He.LEVELS_UPDATED,this.onLevelsUpdated,this)}unregisterListeners(){const{hls:t}=this;t.off(He.MANIFEST_LOADING,this.onManifestLoading,this),t.off(He.LEVEL_LOADING,this.onLevelLoading,this),t.off(He.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),t.off(He.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),t.off(He.LEVELS_UPDATED,this.onLevelsUpdated,this)}createInternalLoader(t){const n=this.hls.config,r=n.pLoader,l=n.loader,d=r||l,f=new d(n);return this.loaders[t.type]=f,f}getInternalLoader(t){return this.loaders[t.type]}resetInternalLoader(t){this.loaders[t]&&delete this.loaders[t]}destroyInternalLoaders(){for(const t in this.loaders){const n=this.loaders[t];n&&n.destroy(),this.resetInternalLoader(t)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(t,n){const{url:r}=n;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:Fr.MANIFEST,url:r,deliveryDirectives:null,levelOrTrack:null})}onLevelLoading(t,n){const{id:r,level:l,pathwayId:d,url:f,deliveryDirectives:p,levelInfo:m}=n;this.load({id:r,level:l,pathwayId:d,responseType:"text",type:Fr.LEVEL,url:f,deliveryDirectives:p,levelOrTrack:m})}onAudioTrackLoading(t,n){const{id:r,groupId:l,url:d,deliveryDirectives:f,track:p}=n;this.load({id:r,groupId:l,level:null,responseType:"text",type:Fr.AUDIO_TRACK,url:d,deliveryDirectives:f,levelOrTrack:p})}onSubtitleTrackLoading(t,n){const{id:r,groupId:l,url:d,deliveryDirectives:f,track:p}=n;this.load({id:r,groupId:l,level:null,responseType:"text",type:Fr.SUBTITLE_TRACK,url:d,deliveryDirectives:f,levelOrTrack:p})}onLevelsUpdated(t,n){const r=this.loaders[Fr.LEVEL];if(r){const l=r.context;l&&!n.levels.some(d=>d===l.levelOrTrack)&&(r.abort(),delete this.loaders[Fr.LEVEL])}}load(t){var n;const r=this.hls.config;let l=this.getInternalLoader(t);if(l){const y=this.hls.logger,b=l.context;if(b&&b.levelOrTrack===t.levelOrTrack&&(b.url===t.url||b.deliveryDirectives&&!t.deliveryDirectives)){b.url===t.url?y.log(`[playlist-loader]: ignore ${t.url} ongoing request`):y.log(`[playlist-loader]: ignore ${t.url} in favor of ${b.url}`);return}y.log(`[playlist-loader]: aborting previous loader for type: ${t.type}`),l.abort()}let d;if(t.type===Fr.MANIFEST?d=r.manifestLoadPolicy.default:d=hs({},r.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),l=this.createInternalLoader(t),xi((n=t.deliveryDirectives)==null?void 0:n.part)){let y;if(t.type===Fr.LEVEL&&t.level!==null?y=this.hls.levels[t.level].details:t.type===Fr.AUDIO_TRACK&&t.id!==null?y=this.hls.audioTracks[t.id].details:t.type===Fr.SUBTITLE_TRACK&&t.id!==null&&(y=this.hls.subtitleTracks[t.id].details),y){const b=y.partTarget,_=y.targetduration;if(b&&_){const A=Math.max(b*3,_*.8)*1e3;d=hs({},d,{maxTimeToFirstByteMs:Math.min(A,d.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(A,d.maxTimeToFirstByteMs)})}}}const f=d.errorRetry||d.timeoutRetry||{},p={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:f.maxNumRetry||0,retryDelay:f.retryDelayMs||0,maxRetryDelay:f.maxRetryDelayMs||0},m={onSuccess:(y,b,_,A)=>{const w=this.getInternalLoader(_);this.resetInternalLoader(_.type);const T=y.data;if(T.indexOf("#EXTM3U")!==0){this.handleManifestParsingError(y,_,new Error("no EXTM3U delimiter"),A||null,b);return}b.parsing.start=performance.now(),Oc.isMediaPlaylist(T)||_.type!==Fr.MANIFEST?this.handleTrackOrLevelPlaylist(y,b,_,A||null,w):this.handleMasterPlaylist(y,b,_,A)},onError:(y,b,_,A)=>{this.handleNetworkError(b,_,!1,y,A)},onTimeout:(y,b,_)=>{this.handleNetworkError(b,_,!0,void 0,y)}};l.load(t,p,m)}checkAutostartLoad(){if(!this.hls)return;const{config:{autoStartLoad:t,startPosition:n},forceStartLoad:r}=this.hls;(t||r)&&(this.hls.logger.log(`${t?"auto":"force"} startLoad with configured startPosition ${n}`),this.hls.startLoad(n))}handleMasterPlaylist(t,n,r,l){const d=this.hls,f=t.data,p=wx(t,r),m=Oc.parseMasterPlaylist(f,p);if(m.playlistParsingError){this.handleManifestParsingError(t,r,m.playlistParsingError,l,n);return}const{contentSteering:y,levels:b,sessionData:_,sessionKeys:A,startTimeOffset:w,variableList:T}=m;this.variableList=T;const{AUDIO:k=[],SUBTITLES:U,"CLOSED-CAPTIONS":Y}=Oc.parseMasterPlaylistMedia(f,p,m);k.length&&!k.some(te=>!te.url)&&b[0].audioCodec&&!b[0].attrs.AUDIO&&(this.hls.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),k.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new $s({}),bitrate:0,url:""})),d.trigger(He.MANIFEST_LOADED,{levels:b,audioTracks:k,subtitles:U,captions:Y,contentSteering:y,url:p,stats:n,networkDetails:l,sessionData:_,sessionKeys:A,startTimeOffset:w,variableList:T})}handleTrackOrLevelPlaylist(t,n,r,l,d){const f=this.hls,{id:p,level:m,type:y}=r,b=wx(t,r),_=xi(m)?m:xi(p)?p:0,A=gL(r),w=Oc.parseLevelPlaylist(t.data,b,_,A,0,this.variableList);if(y===Fr.MANIFEST){const T={attrs:new $s({}),bitrate:0,details:w,name:"",url:b};w.requestScheduled=n.loading.start+NM(w,0),f.trigger(He.MANIFEST_LOADED,{levels:[T],audioTracks:[],url:b,stats:n,networkDetails:l,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}n.parsing.end=performance.now(),r.levelDetails=w,this.handlePlaylistLoaded(w,t,n,r,l,d)}handleManifestParsingError(t,n,r,l,d){this.hls.trigger(He.ERROR,{type:Hi.NETWORK_ERROR,details:pn.MANIFEST_PARSING_ERROR,fatal:n.type===Fr.MANIFEST,url:t.url,err:r,error:r,reason:r.message,response:t,context:n,networkDetails:l,stats:d})}handleNetworkError(t,n,r=!1,l,d){let f=`A network ${r?"timeout":"error"+(l?" (status "+l.code+")":"")} occurred while loading ${t.type}`;t.type===Fr.LEVEL?f+=`: ${t.level} id: ${t.id}`:(t.type===Fr.AUDIO_TRACK||t.type===Fr.SUBTITLE_TRACK)&&(f+=` id: ${t.id} group-id: "${t.groupId}"`);const p=new Error(f);this.hls.logger.warn(`[playlist-loader]: ${f}`);let m=pn.UNKNOWN,y=!1;const b=this.getInternalLoader(t);switch(t.type){case Fr.MANIFEST:m=r?pn.MANIFEST_LOAD_TIMEOUT:pn.MANIFEST_LOAD_ERROR,y=!0;break;case Fr.LEVEL:m=r?pn.LEVEL_LOAD_TIMEOUT:pn.LEVEL_LOAD_ERROR,y=!1;break;case Fr.AUDIO_TRACK:m=r?pn.AUDIO_TRACK_LOAD_TIMEOUT:pn.AUDIO_TRACK_LOAD_ERROR,y=!1;break;case Fr.SUBTITLE_TRACK:m=r?pn.SUBTITLE_TRACK_LOAD_TIMEOUT:pn.SUBTITLE_LOAD_ERROR,y=!1;break}b&&this.resetInternalLoader(t.type);const _={type:Hi.NETWORK_ERROR,details:m,fatal:y,url:t.url,loader:b,context:t,error:p,networkDetails:n,stats:d};if(l){const A=(n==null?void 0:n.url)||t.url;_.response=as({url:A,data:void 0},l)}this.hls.trigger(He.ERROR,_)}handlePlaylistLoaded(t,n,r,l,d,f){const p=this.hls,{type:m,level:y,id:b,groupId:_,deliveryDirectives:A}=l,w=wx(n,l),T=gL(l),k=typeof l.level=="number"&&T===Ui.MAIN?y:void 0;if(!t.fragments.length){const Y=t.playlistParsingError=new Error("No Segments found in Playlist");p.trigger(He.ERROR,{type:Hi.NETWORK_ERROR,details:pn.LEVEL_EMPTY_ERROR,fatal:!1,url:w,error:Y,reason:Y.message,response:n,context:l,level:k,parent:T,networkDetails:d,stats:r});return}t.targetduration||(t.playlistParsingError=new Error("Missing Target Duration"));const U=t.playlistParsingError;if(U){if(this.hls.logger.warn(U),!p.config.ignorePlaylistParsingErrors){p.trigger(He.ERROR,{type:Hi.NETWORK_ERROR,details:pn.LEVEL_PARSING_ERROR,fatal:!1,url:w,error:U,reason:U.message,response:n,context:l,level:k,parent:T,networkDetails:d,stats:r});return}t.playlistParsingError=null}switch(t.live&&f&&(f.getCacheAge&&(t.ageHeader=f.getCacheAge()||0),(!f.getCacheAge||isNaN(t.ageHeader))&&(t.ageHeader=0)),m){case Fr.MANIFEST:case Fr.LEVEL:p.trigger(He.LEVEL_LOADED,{details:t,levelInfo:l.levelOrTrack||p.levels[0],level:k||0,id:b||0,stats:r,networkDetails:d,deliveryDirectives:A,withoutMultiVariant:m===Fr.MANIFEST});break;case Fr.AUDIO_TRACK:p.trigger(He.AUDIO_TRACK_LOADED,{details:t,track:l.levelOrTrack,id:b||0,groupId:_||"",stats:r,networkDetails:d,deliveryDirectives:A});break;case Fr.SUBTITLE_TRACK:p.trigger(He.SUBTITLE_TRACK_LOADED,{details:t,track:l.levelOrTrack,id:b||0,groupId:_||"",stats:r,networkDetails:d,deliveryDirectives:A});break}}};class Mc{static get version(){return ky}static isMSESupported(){return kN()}static isSupported(){return fV()}static getMediaSource(){return kf()}static get Events(){return He}static get MetadataSchema(){return Jl}static get ErrorTypes(){return Hi}static get ErrorDetails(){return pn}static get DefaultConfig(){return Mc.defaultConfig?Mc.defaultConfig:ZG}static set DefaultConfig(t){Mc.defaultConfig=t}constructor(t={}){this.config=void 0,this.userConfig=void 0,this.logger=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new gw,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioStreamController=void 0,this.subtititleStreamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.interstitialsController=void 0,this.gapController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this._url=null,this._sessionId=void 0,this.triggeringException=void 0,this.started=!1;const n=this.logger=O5(t.debug||!1,"Hls instance",t.assetPlayerId),r=this.config=tV(Mc.DefaultConfig,t,n);this.userConfig=t,r.progressive&&nV(r,n);const{abrController:l,bufferController:d,capLevelController:f,errorController:p,fpsController:m}=r,y=new p(this),b=this.abrController=new l(this),_=new C6(this),A=r.interstitialsController,w=A?this.interstitialsController=new A(this,Mc):null,T=this.bufferController=new d(this,_),k=this.capLevelController=new f(this),U=new m(this),Y=new yV(this),se=r.contentSteeringController,te=se?new se(this):null,Re=this.levelController=new dV(this,te),Be=new uV(this),j=new mV(this.config),M=this.streamController=new gV(this,_,j),Z=this.gapController=new aV(this,_);k.setStreamController(M),U.setStreamController(M);const K=[Y,Re,M];w&&K.splice(1,0,w),te&&K.splice(1,0,te),this.networkControllers=K;const x=[b,T,Z,k,U,Be,_];this.audioTrackController=this.createController(r.audioTrackController,K);const ue=r.audioStreamController;ue&&K.push(this.audioStreamController=new ue(this,_,j)),this.subtitleTrackController=this.createController(r.subtitleTrackController,K);const $e=r.subtitleStreamController;$e&&K.push(this.subtititleStreamController=new $e(this,_,j)),this.createController(r.timelineController,x),j.emeController=this.emeController=this.createController(r.emeController,x),this.cmcdController=this.createController(r.cmcdController,x),this.latencyController=this.createController(cV,x),this.coreComponents=x,K.push(y);const xe=y.onErrorOut;typeof xe=="function"&&this.on(He.ERROR,xe,y),this.on(He.MANIFEST_LOADED,Y.onManifestLoaded,Y)}createController(t,n){if(t){const r=new t(this);return n&&n.push(r),r}return null}on(t,n,r=this){this._emitter.on(t,n,r)}once(t,n,r=this){this._emitter.once(t,n,r)}removeAllListeners(t){this._emitter.removeAllListeners(t)}off(t,n,r=this,l){this._emitter.off(t,n,r,l)}listeners(t){return this._emitter.listeners(t)}emit(t,n,r){return this._emitter.emit(t,n,r)}trigger(t,n){if(this.config.debug)return this.emit(t,t,n);try{return this.emit(t,t,n)}catch(r){if(this.logger.error("An internal error happened while handling event "+t+'. Error message: "'+r.message+'". Here is a stacktrace:',r),!this.triggeringException){this.triggeringException=!0;const l=t===He.ERROR;this.trigger(He.ERROR,{type:Hi.OTHER_ERROR,details:pn.INTERNAL_EXCEPTION,fatal:l,event:t,error:r}),this.triggeringException=!1}}return!1}listenerCount(t){return this._emitter.listenerCount(t)}destroy(){this.logger.log("destroy"),this.trigger(He.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this._url=null,this.networkControllers.forEach(n=>n.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(n=>n.destroy()),this.coreComponents.length=0;const t=this.config;t.xhrSetup=t.fetchSetup=void 0,this.userConfig=null}attachMedia(t){if(!t||"media"in t&&!t.media){const d=new Error(`attachMedia failed: invalid argument (${t})`);this.trigger(He.ERROR,{type:Hi.OTHER_ERROR,details:pn.ATTACH_MEDIA_ERROR,fatal:!0,error:d});return}this.logger.log("attachMedia"),this._media&&(this.logger.warn("media must be detached before attaching"),this.detachMedia());const n="media"in t,r=n?t.media:t,l=n?t:{media:r};this._media=r,this.trigger(He.MEDIA_ATTACHING,l)}detachMedia(){this.logger.log("detachMedia"),this.trigger(He.MEDIA_DETACHING,{}),this._media=null}transferMedia(){this._media=null;const t=this.bufferController.transferMedia();return this.trigger(He.MEDIA_DETACHING,{transferMedia:t}),t}loadSource(t){this.stopLoad();const n=this.media,r=this._url,l=this._url=sw.buildAbsoluteURL(self.location.href,t,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.logger.log(`loadSource:${l}`),n&&r&&(r!==l||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(n)),this.trigger(He.MANIFEST_LOADING,{url:t})}get url(){return this._url}get hasEnoughToStart(){return this.streamController.hasEnoughToStart}get startPosition(){return this.streamController.startPositionValue}startLoad(t=-1,n){this.logger.log(`startLoad(${t+(n?", <skip seek to start>":"")})`),this.started=!0,this.resumeBuffering();for(let r=0;r<this.networkControllers.length&&(this.networkControllers[r].startLoad(t,n),!(!this.started||!this.networkControllers));r++);}stopLoad(){this.logger.log("stopLoad"),this.started=!1;for(let t=0;t<this.networkControllers.length&&(this.networkControllers[t].stopLoad(),!(this.started||!this.networkControllers));t++);}get loadingEnabled(){return this.started}get bufferingEnabled(){return this.streamController.bufferingEnabled}resumeBuffering(){this.bufferingEnabled||(this.logger.log("resume buffering"),this.networkControllers.forEach(t=>{t.resumeBuffering&&t.resumeBuffering()}))}pauseBuffering(){this.bufferingEnabled&&(this.logger.log("pause buffering"),this.networkControllers.forEach(t=>{t.pauseBuffering&&t.pauseBuffering()}))}get inFlightFragments(){const t={[Ui.MAIN]:this.streamController.inFlightFrag};return this.audioStreamController&&(t[Ui.AUDIO]=this.audioStreamController.inFlightFrag),this.subtititleStreamController&&(t[Ui.SUBTITLE]=this.subtititleStreamController.inFlightFrag),t}swapAudioCodec(){this.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){this.logger.log("recoverMediaError");const t=this._media,n=t==null?void 0:t.currentTime;this.detachMedia(),t&&(this.attachMedia(t),n&&this.startLoad(n))}removeLevel(t){this.levelController.removeLevel(t)}get sessionId(){let t=this._sessionId;return t||(t=this._sessionId=wq()),t}get levels(){const t=this.levelController.levels;return t||[]}get latestLevelDetails(){return this.streamController.getLevelDetails()||null}get loadLevelObj(){return this.levelController.loadLevelObj}get currentLevel(){return this.streamController.currentLevel}set currentLevel(t){this.logger.log(`set currentLevel:${t}`),this.levelController.manualLevel=t,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(t){this.logger.log(`set nextLevel:${t}`),this.levelController.manualLevel=t,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(t){this.logger.log(`set loadLevel:${t}`),this.levelController.manualLevel=t}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(t){this.levelController.nextLoadLevel=t}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(t){this.logger.log(`set firstLevel:${t}`),this.levelController.firstLevel=t}get startLevel(){const t=this.levelController.startLevel;return t===-1&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:t}set startLevel(t){this.logger.log(`set startLevel:${t}`),t!==-1&&(t=Math.max(t,this.minAutoLevel)),this.levelController.startLevel=t}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(t){const n=!!t;n!==this.config.capLevelToPlayerSize&&(n?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=n)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:t}=this.abrController;return t?t.getEstimate():NaN}set bandwidthEstimate(t){this.abrController.resetEstimator(t)}get abrEwmaDefaultEstimate(){const{bwEstimator:t}=this.abrController;return t?t.defaultEstimate:NaN}get ttfbEstimate(){const{bwEstimator:t}=this.abrController;return t?t.getEstimateTTFB():NaN}set autoLevelCapping(t){this._autoLevelCapping!==t&&(this.logger.log(`set autoLevelCapping:${t}`),this._autoLevelCapping=t,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(t){d6(t)&&this._maxHdcpLevel!==t&&(this._maxHdcpLevel=t,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:t,config:{minAutoBitrate:n}}=this;if(!t)return 0;const r=t.length;for(let l=0;l<r;l++)if(t[l].maxBitrate>=n)return l;return 0}get maxAutoLevel(){const{levels:t,autoLevelCapping:n,maxHdcpLevel:r}=this;let l;if(n===-1&&t!=null&&t.length?l=t.length-1:l=n,r)for(let d=l;d--;){const f=t[d].attrs["HDCP-LEVEL"];if(f&&f<=r)return d}return l}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(t){this.abrController.nextAutoLevel=t}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get maxBufferLength(){return this.streamController.maxBufferLength}setAudioOption(t){var n;return((n=this.audioTrackController)==null?void 0:n.setAudioOption(t))||null}setSubtitleOption(t){var n;return((n=this.subtitleTrackController)==null?void 0:n.setSubtitleOption(t))||null}get allAudioTracks(){const t=this.audioTrackController;return t?t.allAudioTracks:[]}get audioTracks(){const t=this.audioTrackController;return t?t.audioTracks:[]}get audioTrack(){const t=this.audioTrackController;return t?t.audioTrack:-1}set audioTrack(t){const n=this.audioTrackController;n&&(n.audioTrack=t)}get allSubtitleTracks(){const t=this.subtitleTrackController;return t?t.allSubtitleTracks:[]}get subtitleTracks(){const t=this.subtitleTrackController;return t?t.subtitleTracks:[]}get subtitleTrack(){const t=this.subtitleTrackController;return t?t.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(t){const n=this.subtitleTrackController;n&&(n.subtitleTrack=t)}get subtitleDisplay(){const t=this.subtitleTrackController;return t?t.subtitleDisplay:!1}set subtitleDisplay(t){const n=this.subtitleTrackController;n&&(n.subtitleDisplay=t)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(t){this.config.lowLatencyMode=t}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}set targetLatency(t){this.latencyController.targetLatency=t}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}get pathways(){return this.levelController.pathways}get pathwayPriority(){return this.levelController.pathwayPriority}set pathwayPriority(t){this.levelController.pathwayPriority=t}get bufferedToEnd(){var t;return!!((t=this.bufferController)!=null&&t.bufferedToEnd)}get interstitialsManager(){var t;return((t=this.interstitialsController)==null?void 0:t.interstitialsManager)||null}getMediaDecodingInfo(t,n=this.allAudioTracks){const r=AM(n);return xM(t,r,navigator.mediaCapabilities)}}Mc.defaultConfig=void 0;var vV=Ka('<div class=player-container><div class="player-label player-name-label">HLS.js</div><div class="player-label player-status-label"></div><div class="player-label player-time-label"></div><video muted width=320 height=240>'),TV=Ka("<div>");const EV={};function bV(u){let t,n;const[r,l]=Va(null);let d=null;const[f,p]=Va([]),m=async()=>{try{t.muted=!0,t.addEventListener("loadeddata",()=>{if(d!==null){const A=((performance.now()-d)/1e3).toFixed(2);p(w=>[` loaded in ${A}s`,...w])}})}catch(_){console.error("Hlsjs: Error creating Hlsjs player:",_)}},y=async(_,A)=>{if(p([]),l("loading"),n==null||n.detachMedia(),n==null||n.destroy(),n=void 0,_==null){l(null);return}try{d=performance.now();const w={...EV};A&&(w.emeEnabled=!0,w.enableWorker=!0,w.drmSystems={"com.widevine.alpha":{licenseUrl:A}}),n=new Mc(w),n.loadSource(_),n.attachMedia(t),n.on(Mc.Events.ERROR,(T,k)=>{const U=k.error;console.error("Hlsjs: Error code",U.code,"object",U),l(`error: ${U.code||"unknown"}`)}),n.on(Mc.Events.MEDIA_ATTACHED,()=>{t.play().catch(T=>{console.error("Hlsjs: Error auto-playing video:",T)})})}catch(w){console.error("Hlsjs: Error loading player:",w)}},b=async()=>{try{n==null||n.detachMedia(),n==null||n.destroy(),n=void 0}catch(_){console.error("Hlsjs: Error destroying Hlsjs player:",_)}};return Mf(()=>m()),zh(()=>y(u.playbackUrl,u.licenseUrl)),jh(()=>b()),(()=>{var _=vV(),A=_.firstChild,w=A.nextSibling,T=w.nextSibling,k=T.nextSibling;A.style.setProperty("background","darkcyan"),ls(w,r),ls(T,xl(Od,{get each(){return f()},children:Y=>(()=>{var se=TV();return ls(se,Y),se})()}));var U=t;return typeof U=="function"?jy(U,k):t=k,_})()}var Py=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Lg(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}function _V(u){if(Object.prototype.hasOwnProperty.call(u,"__esModule"))return u;var t=u.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(u).forEach(function(r){var l=Object.getOwnPropertyDescriptor(u,r);Object.defineProperty(n,r,l.get?l:{enumerable:!0,get:function(){return u[r]}})}),n}var Ix={};/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/var mL;function SV(){return mL||(mL=1,function(u){(function(){var t=typeof window<"u"?window:Py,n={};(function(l,d,f){var p;function m(e){var i=0;return function(){return i<e.length?{done:!1,value:e[i++]}:{done:!0}}}var y=typeof Object.defineProperties=="function"?Object.defineProperty:function(e,i,o){return e==Array.prototype||e==Object.prototype||(e[i]=o.value),e};function b(e){e=[typeof globalThis=="object"&&globalThis,e,typeof l=="object"&&l,typeof self=="object"&&self,typeof d=="object"&&d];for(var i=0;i<e.length;++i){var o=e[i];if(o&&o.Math==Math)return o}throw Error("Cannot find global object")}var _=b(this);function A(e,i){if(i)e:{var o=_;e=e.split(".");for(var c=0;c<e.length-1;c++){var h=e[c];if(!(h in o))break e;o=o[h]}e=e[e.length-1],c=o[e],i=i(c),i!=c&&i!=null&&y(o,e,{configurable:!0,writable:!0,value:i})}}A("Symbol",function(e){function i(g){if(this instanceof i)throw new TypeError("Symbol is not a constructor");return new o(c+(g||"")+"_"+h++,g)}function o(g,v){this.g=g,y(this,"description",{configurable:!0,writable:!0,value:v})}if(e)return e;o.prototype.toString=function(){return this.g};var c="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",h=0;return i}),A("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var i="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),o=0;o<i.length;o++){var c=_[i[o]];typeof c=="function"&&typeof c.prototype[e]!="function"&&y(c.prototype,e,{configurable:!0,writable:!0,value:function(){return w(m(this))}})}return e});function w(e){return e={next:e},e[Symbol.iterator]=function(){return this},e}function T(e){var i=typeof Symbol<"u"&&Symbol.iterator&&e[Symbol.iterator];if(i)return i.call(e);if(typeof e.length=="number")return{next:m(e)};throw Error(String(e)+" is not an iterable or ArrayLike")}function k(e){if(!(e instanceof Array)){e=T(e);for(var i,o=[];!(i=e.next()).done;)o.push(i.value);e=o}return e}var U=typeof Object.create=="function"?Object.create:function(e){function i(){}return i.prototype=e,new i},Y;if(typeof Object.setPrototypeOf=="function")Y=Object.setPrototypeOf;else{var se;e:{var te={a:!0},Re={};try{Re.__proto__=te,se=Re.a;break e}catch{}se=!1}Y=se?function(e,i){if(e.__proto__=i,e.__proto__!==i)throw new TypeError(e+" is not extensible");return e}:null}var Be=Y;function j(e,i){if(e.prototype=U(i.prototype),e.prototype.constructor=e,Be)Be(e,i);else for(var o in i)if(o!="prototype")if(Object.defineProperties){var c=Object.getOwnPropertyDescriptor(i,o);c&&Object.defineProperty(e,o,c)}else e[o]=i[o];e.Tk=i.prototype}function M(){this.o=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.A=this.i=null}function Z(e){if(e.o)throw new TypeError("Generator is already running");e.o=!0}M.prototype.u=function(e){this.h=e};function K(e,i){e.i={Ng:i,Zg:!0},e.g=e.m||e.j}M.prototype.return=function(e){this.i={return:e},this.g=this.j};function x(e,i,o){return e.g=o,{value:i}}M.prototype.s=function(e){this.g=e};function ue(e){e.g=0}function $e(e,i,o){e.m=i,o!=null&&(e.j=o)}function xe(e,i){e.m=0,e.j=i||0}function lt(e,i,o){e.g=i,e.m=o||0}function et(e,i){return e.m=i||0,i=e.i.Ng,e.i=null,i}function Xe(e){e.A=[e.i],e.m=0,e.j=0}function ut(e,i){var o=e.A.splice(0)[0];(o=e.i=e.i||o)?o.Zg?e.g=e.m||e.j:o.s!=null&&e.j<o.s?(e.g=o.s,e.i=null):e.g=e.j:e.g=i}function Dt(e){this.g=new M,this.h=e}function dt(e,i){Z(e.g);var o=e.g.l;return o?Et(e,"return"in o?o.return:function(c){return{value:c,done:!0}},i,e.g.return):(e.g.return(i),Rt(e))}function Et(e,i,o,c){try{var h=i.call(e.g.l,o);if(!(h instanceof Object))throw new TypeError("Iterator result "+h+" is not an object");if(!h.done)return e.g.o=!1,h;var g=h.value}catch(v){return e.g.l=null,K(e.g,v),Rt(e)}return e.g.l=null,c.call(e.g,g),Rt(e)}function Rt(e){for(;e.g.g;)try{var i=e.h(e.g);if(i)return e.g.o=!1,{value:i.value,done:!1}}catch(o){e.g.h=void 0,K(e.g,o)}if(e.g.o=!1,e.g.i){if(i=e.g.i,e.g.i=null,i.Zg)throw i.Ng;return{value:i.return,done:!0}}return{value:void 0,done:!0}}function mn(e){this.next=function(i){return Z(e.g),e.g.l?i=Et(e,e.g.l.next,i,e.g.u):(e.g.u(i),i=Rt(e)),i},this.throw=function(i){return Z(e.g),e.g.l?i=Et(e,e.g.l.throw,i,e.g.u):(K(e.g,i),i=Rt(e)),i},this.return=function(i){return dt(e,i)},this[Symbol.iterator]=function(){return this}}function Tn(e){function i(c){return e.next(c)}function o(c){return e.throw(c)}return new Promise(function(c,h){function g(v){v.done?c(v.value):Promise.resolve(v.value).then(i,o).then(g,h)}g(e.next())})}function Qe(e){return Tn(new mn(new Dt(e)))}function Ze(){for(var e=Number(this),i=[],o=e;o<arguments.length;o++)i[o-e]=arguments[o];return i}A("Promise",function(e){function i(v){this.h=0,this.i=void 0,this.g=[],this.o=!1;var E=this.j();try{v(E.resolve,E.reject)}catch(S){E.reject(S)}}function o(){this.g=null}function c(v){return v instanceof i?v:new i(function(E){E(v)})}if(e)return e;o.prototype.h=function(v){if(this.g==null){this.g=[];var E=this;this.i(function(){E.l()})}this.g.push(v)};var h=_.setTimeout;o.prototype.i=function(v){h(v,0)},o.prototype.l=function(){for(;this.g&&this.g.length;){var v=this.g;this.g=[];for(var E=0;E<v.length;++E){var S=v[E];v[E]=null;try{S()}catch(I){this.j(I)}}}this.g=null},o.prototype.j=function(v){this.i(function(){throw v})},i.prototype.j=function(){function v(I){return function(L){S||(S=!0,I.call(E,L))}}var E=this,S=!1;return{resolve:v(this.F),reject:v(this.l)}},i.prototype.F=function(v){if(v===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(v instanceof i)this.H(v);else{e:switch(typeof v){case"object":var E=v!=null;break e;case"function":E=!0;break e;default:E=!1}E?this.C(v):this.m(v)}},i.prototype.C=function(v){var E=void 0;try{E=v.then}catch(S){this.l(S);return}typeof E=="function"?this.I(E,v):this.m(v)},i.prototype.l=function(v){this.u(2,v)},i.prototype.m=function(v){this.u(1,v)},i.prototype.u=function(v,E){if(this.h!=0)throw Error("Cannot settle("+v+", "+E+"): Promise already settled in state"+this.h);this.h=v,this.i=E,this.h===2&&this.G(),this.A()},i.prototype.G=function(){var v=this;h(function(){if(v.B()){var E=_.console;typeof E<"u"&&E.error(v.i)}},1)},i.prototype.B=function(){if(this.o)return!1;var v=_.CustomEvent,E=_.Event,S=_.dispatchEvent;return typeof S>"u"?!0:(typeof v=="function"?v=new v("unhandledrejection",{cancelable:!0}):typeof E=="function"?v=new E("unhandledrejection",{cancelable:!0}):(v=_.document.createEvent("CustomEvent"),v.initCustomEvent("unhandledrejection",!1,!0,v)),v.promise=this,v.reason=this.i,S(v))},i.prototype.A=function(){if(this.g!=null){for(var v=0;v<this.g.length;++v)g.h(this.g[v]);this.g=null}};var g=new o;return i.prototype.H=function(v){var E=this.j();v.Sd(E.resolve,E.reject)},i.prototype.I=function(v,E){var S=this.j();try{v.call(E,S.resolve,S.reject)}catch(I){S.reject(I)}},i.prototype.then=function(v,E){function S(V,W){return typeof V=="function"?function(pe){try{I(V(pe))}catch(Me){L(Me)}}:W}var I,L,O=new i(function(V,W){I=V,L=W});return this.Sd(S(v,I),S(E,L)),O},i.prototype.catch=function(v){return this.then(void 0,v)},i.prototype.Sd=function(v,E){function S(){switch(I.h){case 1:v(I.i);break;case 2:E(I.i);break;default:throw Error("Unexpected state: "+I.h)}}var I=this;this.g==null?g.h(S):this.g.push(S),this.o=!0},i.resolve=c,i.reject=function(v){return new i(function(E,S){S(v)})},i.race=function(v){return new i(function(E,S){for(var I=T(v),L=I.next();!L.done;L=I.next())c(L.value).Sd(E,S)})},i.all=function(v){var E=T(v),S=E.next();return S.done?c([]):new i(function(I,L){function O(pe){return function(Me){V[pe]=Me,W--,W==0&&I(V)}}var V=[],W=0;do V.push(void 0),W++,c(S.value).Sd(O(V.length-1),L),S=E.next();while(!S.done)})},i});function at(e,i){return Object.prototype.hasOwnProperty.call(e,i)}A("WeakMap",function(e){function i(S){if(this.g=(E+=Math.random()+1).toString(),S){S=T(S);for(var I;!(I=S.next()).done;)I=I.value,this.set(I[0],I[1])}}function o(){}function c(S){var I=typeof S;return I==="object"&&S!==null||I==="function"}function h(S){if(!at(S,v)){var I=new o;y(S,v,{value:I})}}function g(S){var I=Object[S];I&&(Object[S]=function(L){return L instanceof o?L:(Object.isExtensible(L)&&h(L),I(L))})}if(function(){if(!e||!Object.seal)return!1;try{var S=Object.seal({}),I=Object.seal({}),L=new e([[S,2],[I,3]]);return L.get(S)!=2||L.get(I)!=3?!1:(L.delete(S),L.set(I,4),!L.has(S)&&L.get(I)==4)}catch{return!1}}())return e;var v="$jscomp_hidden_"+Math.random();g("freeze"),g("preventExtensions"),g("seal");var E=0;return i.prototype.set=function(S,I){if(!c(S))throw Error("Invalid WeakMap key");if(h(S),!at(S,v))throw Error("WeakMap key fail: "+S);return S[v][this.g]=I,this},i.prototype.get=function(S){return c(S)&&at(S,v)?S[v][this.g]:void 0},i.prototype.has=function(S){return c(S)&&at(S,v)&&at(S[v],this.g)},i.prototype.delete=function(S){return c(S)&&at(S,v)&&at(S[v],this.g)?delete S[v][this.g]:!1},i}),A("Map",function(e){function i(){var E={};return E.Yb=E.next=E.head=E}function o(E,S){var I=E[1];return w(function(){if(I){for(;I.head!=E[1];)I=I.Yb;for(;I.next!=I.head;)return I=I.next,{done:!1,value:S(I)};I=null}return{done:!0,value:void 0}})}function c(E,S){var I=S&&typeof S;I=="object"||I=="function"?g.has(S)?I=g.get(S):(I=""+ ++v,g.set(S,I)):I="p_"+S;var L=E[0][I];if(L&&at(E[0],I))for(E=0;E<L.length;E++){var O=L[E];if(S!==S&&O.key!==O.key||S===O.key)return{id:I,list:L,index:E,entry:O}}return{id:I,list:L,index:-1,entry:void 0}}function h(E){if(this[0]={},this[1]=i(),this.size=0,E){E=T(E);for(var S;!(S=E.next()).done;)S=S.value,this.set(S[0],S[1])}}if(function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var E=Object.seal({x:4}),S=new e(T([[E,"s"]]));if(S.get(E)!="s"||S.size!=1||S.get({x:4})||S.set({x:4},"t")!=S||S.size!=2)return!1;var I=S.entries(),L=I.next();return L.done||L.value[0]!=E||L.value[1]!="s"?!1:(L=I.next(),!(L.done||L.value[0].x!=4||L.value[1]!="t"||!I.next().done))}catch{return!1}}())return e;var g=new WeakMap;h.prototype.set=function(E,S){E=E===0?0:E;var I=c(this,E);return I.list||(I.list=this[0][I.id]=[]),I.entry?I.entry.value=S:(I.entry={next:this[1],Yb:this[1].Yb,head:this[1],key:E,value:S},I.list.push(I.entry),this[1].Yb.next=I.entry,this[1].Yb=I.entry,this.size++),this},h.prototype.delete=function(E){return E=c(this,E),E.entry&&E.list?(E.list.splice(E.index,1),E.list.length||delete this[0][E.id],E.entry.Yb.next=E.entry.next,E.entry.next.Yb=E.entry.Yb,E.entry.head=null,this.size--,!0):!1},h.prototype.clear=function(){this[0]={},this[1]=this[1].Yb=i(),this.size=0},h.prototype.has=function(E){return!!c(this,E).entry},h.prototype.get=function(E){return(E=c(this,E).entry)&&E.value},h.prototype.entries=function(){return o(this,function(E){return[E.key,E.value]})},h.prototype.keys=function(){return o(this,function(E){return E.key})},h.prototype.values=function(){return o(this,function(E){return E.value})},h.prototype.forEach=function(E,S){for(var I=this.entries(),L;!(L=I.next()).done;)L=L.value,E.call(S,L[1],L[0],this)},h.prototype[Symbol.iterator]=h.prototype.entries;var v=0;return h}),A("Set",function(e){function i(o){if(this.g=new Map,o){o=T(o);for(var c;!(c=o.next()).done;)this.add(c.value)}this.size=this.g.size}return function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var o=Object.seal({x:4}),c=new e(T([o]));if(!c.has(o)||c.size!=1||c.add(o)!=c||c.size!=1||c.add({x:4})!=c||c.size!=2)return!1;var h=c.entries(),g=h.next();return g.done||g.value[0]!=o||g.value[1]!=o?!1:(g=h.next(),g.done||g.value[0]==o||g.value[0].x!=4||g.value[1]!=g.value[0]?!1:h.next().done)}catch{return!1}}()?e:(i.prototype.add=function(o){return o=o===0?0:o,this.g.set(o,o),this.size=this.g.size,this},i.prototype.delete=function(o){return o=this.g.delete(o),this.size=this.g.size,o},i.prototype.clear=function(){this.g.clear(),this.size=0},i.prototype.has=function(o){return this.g.has(o)},i.prototype.entries=function(){return this.g.entries()},i.prototype.values=function(){return this.g.values()},i.prototype.keys=i.prototype.values,i.prototype[Symbol.iterator]=i.prototype.values,i.prototype.forEach=function(o,c){var h=this;this.g.forEach(function(g){return o.call(c,g,g,h)})},i)});function nn(e,i){e instanceof String&&(e+="");var o=0,c=!1,h={next:function(){if(!c&&o<e.length){var g=o++;return{value:i(g,e[g]),done:!1}}return c=!0,{done:!0,value:void 0}}};return h[Symbol.iterator]=function(){return h},h}A("Array.prototype.values",function(e){return e||function(){return nn(this,function(i,o){return o})}}),A("Array.from",function(e){return e||function(i,o,c){o=o??function(E){return E};var h=[],g=typeof Symbol<"u"&&Symbol.iterator&&i[Symbol.iterator];if(typeof g=="function"){i=g.call(i);for(var v=0;!(g=i.next()).done;)h.push(o.call(c,g.value,v++))}else for(g=i.length,v=0;v<g;v++)h.push(o.call(c,i[v],v));return h}}),A("Array.prototype.keys",function(e){return e||function(){return nn(this,function(i){return i})}}),A("Object.is",function(e){return e||function(i,o){return i===o?i!==0||1/i===1/o:i!==i&&o!==o}}),A("Array.prototype.includes",function(e){return e||function(i,o){var c=this;c instanceof String&&(c=String(c));var h=c.length;for(o=o||0,0>o&&(o=Math.max(o+h,0));o<h;o++){var g=c[o];if(g===i||Object.is(g,i))return!0}return!1}});function ce(e,i,o){if(e==null)throw new TypeError("The 'this' value for String.prototype."+o+" must not be null or undefined");if(i instanceof RegExp)throw new TypeError("First argument to String.prototype."+o+" must not be a regular expression");return e+""}A("String.prototype.includes",function(e){return e||function(i,o){return ce(this,i,"includes").indexOf(i,o||0)!==-1}}),A("String.fromCodePoint",function(e){return e||function(i){for(var o="",c=0;c<arguments.length;c++){var h=Number(arguments[c]);if(0>h||1114111<h||h!==Math.floor(h))throw new RangeError("invalid_code_point "+h);65535>=h?o+=String.fromCharCode(h):(h-=65536,o+=String.fromCharCode(h>>>10&1023|55296),o+=String.fromCharCode(h&1023|56320))}return o}});function ge(e,i,o){e instanceof String&&(e=String(e));for(var c=e.length,h=0;h<c;h++){var g=e[h];if(i.call(o,g,h,e))return{Xg:h,v:g}}return{Xg:-1,v:void 0}}A("Array.prototype.findIndex",function(e){return e||function(i,o){return ge(this,i,o).Xg}}),A("WeakSet",function(e){function i(o){if(this.g=new WeakMap,o){o=T(o);for(var c;!(c=o.next()).done;)this.add(c.value)}}return function(){if(!e||!Object.seal)return!1;try{var o=Object.seal({}),c=Object.seal({}),h=new e([o]);return!h.has(o)||h.has(c)?!1:(h.delete(o),h.add(c),!h.has(o)&&h.has(c))}catch{return!1}}()?e:(i.prototype.add=function(o){return this.g.set(o,!0),this},i.prototype.has=function(o){return this.g.has(o)},i.prototype.delete=function(o){return this.g.delete(o)},i)}),A("Array.prototype.find",function(e){return e||function(i,o){return ge(this,i,o).v}}),A("String.prototype.startsWith",function(e){return e||function(i,o){var c=ce(this,i,"startsWith"),h=c.length,g=i.length;o=Math.max(0,Math.min(o|0,c.length));for(var v=0;v<g&&o<h;)if(c[o++]!=i[v++])return!1;return v>=g}}),A("Object.entries",function(e){return e||function(i){var o=[],c;for(c in i)at(i,c)&&o.push([c,i[c]]);return o}});var G=typeof Object.assign=="function"?Object.assign:function(e,i){for(var o=1;o<arguments.length;o++){var c=arguments[o];if(c)for(var h in c)at(c,h)&&(e[h]=c[h])}return e};A("Object.assign",function(e){return e||G}),A("Promise.prototype.finally",function(e){return e||function(i){return this.then(function(o){return Promise.resolve(i()).then(function(){return o})},function(o){return Promise.resolve(i()).then(function(){throw o})})}}),A("Array.prototype.entries",function(e){return e||function(){return nn(this,function(i,o){return[i,o]})}}),A("Number.isNaN",function(e){return e||function(i){return typeof i=="number"&&isNaN(i)}}),A("String.prototype.repeat",function(e){return e||function(i){var o=ce(this,null,"repeat");if(0>i||1342177279<i)throw new RangeError("Invalid count value");i|=0;for(var c="";i;)i&1&&(c+=o),(i>>>=1)&&(o+=o);return c}}),A("Number.EPSILON",function(){return Math.pow(2,-52)}),A("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991}),A("Number.isFinite",function(e){return e||function(i){return typeof i!="number"?!1:!isNaN(i)&&i!==1/0&&i!==-1/0}}),A("Object.values",function(e){return e||function(i){var o=[],c;for(c in i)at(i,c)&&o.push(i[c]);return o}}),A("Math.log2",function(e){return e||function(i){return Math.log(i)/Math.LN2}}),A("String.prototype.endsWith",function(e){return e||function(i,o){var c=ce(this,i,"endsWith");o===void 0&&(o=c.length),o=Math.max(0,Math.min(o|0,c.length));for(var h=i.length;0<h&&0<o;)if(c[--o]!=i[--h])return!1;return 0>=h}}),A("Math.trunc",function(e){return e||function(i){if(i=Number(i),isNaN(i)||i===1/0||i===-1/0||i===0)return i;var o=Math.floor(Math.abs(i));return 0>i?-o:o}});var ae=this||self;function _e(e,i){e=e.split(".");var o=ae;e[0]in o||typeof o.execScript>"u"||o.execScript("var "+e[0]);for(var c;e.length&&(c=e.shift());)e.length||i===void 0?o[c]&&o[c]!==Object.prototype[c]?o=o[c]:o=o[c]={}:o[c]=i}function Ae(){}function yt(){}function zt(e){this.g=Math.exp(Math.log(.5)/e),this.i=this.h=0}zt.prototype.sample=function(e,i){var o=Math.pow(this.g,e);i=i*(1-o)+o*this.h,isNaN(i)||(this.h=i,this.i+=e)};function vt(e){return e.h/(1-Math.pow(e.g,e.i))}function Lt(){this.h=new zt(2),this.j=new zt(5),this.g=0,this.i=128e3,this.l=16e3}Lt.prototype.configure=function(e){this.i=e.minTotalBytes,this.l=e.minBytes,this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)},Lt.prototype.sample=function(e,i){if(!(i<this.l)){var o=8e3*i/e;e/=1e3,this.g+=i,this.h.sample(e,o),this.j.sample(e,o)}},Lt.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(vt(this.h),vt(this.j))};function bt(){}function Mt(){}function kt(){}function Bt(e){var i=Ze.apply(1,arguments);Vn.has(e)||(Vn.add(e),kt.apply(bt,k(i)))}function sn(){}function ti(){}function On(){}var Vn=new Set;l.console&&(new Map().set(1,function(){return console.error.apply(console,k(Ze.apply(0,arguments)))}).set(2,function(){return console.warn.apply(console,k(Ze.apply(0,arguments)))}).set(3,function(){return console.info.apply(console,k(Ze.apply(0,arguments)))}).set(4,function(){return console.log.apply(console,k(Ze.apply(0,arguments)))}).set(5,function(){return console.debug.apply(console,k(Ze.apply(0,arguments)))}).set(6,function(){return console.debug.apply(console,k(Ze.apply(0,arguments)))}),kt=function(){return console.warn.apply(console,k(Ze.apply(0,arguments)))},Mt=function(){console.error.apply(console,k(Ze.apply(0,arguments)))});function Sn(){this.g=new Map}p=Sn.prototype,p.push=function(e,i){this.g.has(e)?this.g.get(e).push(i):this.g.set(e,[i])},p.get=function(e){return this.g.has(e)?this.g.get(e).slice():null},p.remove=function(e,i){if(this.g.has(e)){var o=this.g.get(e).filter(function(c){return c!=i});this.g.set(e,o),o.length||this.g.delete(e)}},p.forEach=function(e){this.g.forEach(function(i,o){e(o,i)})},p.size=function(){return this.g.size},p.keys=function(){return Array.from(this.g.keys())};function ni(){this.g=new Sn}p=ni.prototype,p.release=function(){this.Qa(),this.g=null},p.D=function(e,i,o,c){this.g&&(e=new dr(e,i,o,c),this.g.push(i,e))},p.ma=function(e,i,o,c){function h(v){g.Ja(e,i,h),o(v)}var g=this;this.D(e,i,h,c)},p.Ja=function(e,i,o){if(this.g){var c=this.g.get(i)||[];c=T(c);for(var h=c.next();!h.done;h=c.next())h=h.value,h.target!=e||o!=h.listener&&o||(h.Ja(),this.g.remove(i,h))}},p.Qa=function(){if(this.g){for(var e=[],i=T(this.g.g.values()),o=i.next();!o.done;o=i.next())e.push.apply(e,k(o.value));for(e=T(e),i=e.next();!i.done;i=e.next())i.value.Ja();this.g.g.clear()}},_e("shaka.util.EventManager",ni),ni.prototype.removeAll=ni.prototype.Qa,ni.prototype.unlisten=ni.prototype.Ja,ni.prototype.listenOnce=ni.prototype.ma,ni.prototype.listen=ni.prototype.D,ni.prototype.release=ni.prototype.release;function dr(e,i,o,c){this.target=e,this.type=i,this.listener=o,this.g=_r(e,c),this.target.addEventListener(i,o,this.g)}dr.prototype.Ja=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};function _r(e,i){if(i==null)return!1;if(typeof i=="boolean")return i;var o=new Set(["passive","capture"]);return Object.keys(i).filter(function(c){return!o.has(c)}),bs(e)?i:i.capture||!1}function bs(e){var i=Zr;if(i==null){i=!1;try{var o={},c={get:function(){return i=!0,!1}};Object.defineProperty(o,"passive",c),Object.defineProperty(o,"capture",c),c=function(){},e.addEventListener("test",c,o),e.removeEventListener("test",c,o)}catch{i=!1}Zr=i}return i||!1}var Zr=void 0;_e("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3});function Zi(e,i){this.g=e,this.h=i}Zi.prototype.toString=function(){return"v"+this.g+"."+this.h};function dn(e,i){var o=new Zi(5,0),c=on,h=c.g,g=o.h-h.h;(0<(o.g-h.g||g)?c.i:c.h)(c.g,o,e,i)}function Mn(e,i,o,c){kt([o,"has been deprecated and will be removed in",i,". We are currently at version",e,". Additional information:",c].join(" "))}function An(e,i,o,c){Mt([o,"has been deprecated and has been removed in",i,". We are now at version",e,". Additional information:",c].join(" "))}var on=null;/*
 @license
 Copyright 2008 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/var Un=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");/*
 @license
 Copyright 2006 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/function vn(e){var i;e instanceof vn?(Hn(this,e.Kb),this.Hc=e.Hc,ei(this,e.nb),wn(this,e.$c),this.ab=e.ab,Ne(this,e.g.clone()),this.qc=e.qc):e&&(i=String(e).match(Un))?(Hn(this,i[1]||"",!0),this.Hc=Ke(i[2]||""),ei(this,i[3]||"",!0),wn(this,i[4]),this.ab=Ke(i[5]||"",!0),Ne(this,i[6]||"",!0),this.qc=Ke(i[7]||"")):this.g=new si(null)}p=vn.prototype,p.Kb="",p.Hc="",p.nb="",p.$c=null,p.ab="",p.qc="",p.toString=function(){var e=[],i=this.Kb;if(i&&e.push(ft(i,un,!0),":"),i=this.nb){e.push("//");var o=this.Hc;o&&e.push(ft(o,un,!0),"@"),e.push(encodeURIComponent(i).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i=this.$c,i!=null&&e.push(":",String(i))}return(i=this.ab)&&(this.nb&&i.charAt(0)!="/"&&e.push("/"),e.push(ft(i,i.charAt(0)=="/"?ai:Qn,!0))),(i=this.g.toString())&&e.push("?",i),(i=this.qc)&&e.push("#",ft(i,Xi)),e.join("")},p.resolve=function(e){var i=this.clone();i.Kb==="data"&&(i=new vn);var o=!!e.Kb;o?Hn(i,e.Kb):o=!!e.Hc,o?i.Hc=e.Hc:o=!!e.nb,o?ei(i,e.nb):o=e.$c!=null;var c=e.ab;if(o)wn(i,e.$c);else if(o=!!e.ab){if(c.charAt(0)!="/")if(this.nb&&!this.ab)c="/"+c;else{var h=i.ab.lastIndexOf("/");h!=-1&&(c=i.ab.substr(0,h+1)+c)}if(c==".."||c==".")c="";else if(c.indexOf("./")!=-1||c.indexOf("/.")!=-1){h=c.lastIndexOf("/",0)==0,c=c.split("/");for(var g=[],v=0;v<c.length;){var E=c[v++];E=="."?h&&v==c.length&&g.push(""):E==".."?((1<g.length||g.length==1&&g[0]!="")&&g.pop(),h&&v==c.length&&g.push("")):(g.push(E),h=!0)}c=g.join("/")}}return o?i.ab=c:o=e.g.toString()!=="",o?Ne(i,e.g.clone()):o=!!e.qc,o&&(i.qc=e.qc),i},p.clone=function(){return new vn(this)};function Hn(e,i,o){e.Kb=o?Ke(i,!0):i,e.Kb&&(e.Kb=e.Kb.replace(/:$/,""))}function ei(e,i,o){e.nb=o?Ke(i,!0):i}function wn(e,i){if(i){if(i=Number(i),isNaN(i)||0>i)throw Error("Bad port number "+i);e.$c=i}else e.$c=null}function Ne(e,i,o){i instanceof si?e.g=i:(o||(i=ft(i,vi)),e.g=new si(i))}function Ke(e,i){return e?i?decodeURI(e):decodeURIComponent(e):""}function ft(e,i,o){return e!=null?(e=encodeURI(e).replace(i,At),o&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function At(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var un=/[#\/\?@]/g,Qn=/[#\?:]/g,ai=/[#\?]/g,vi=/[#\?@]/g,Xi=/#/g;function si(e){this.g=e||null}function cn(e){if(!e.Va&&(e.Va=new Map,e.kd=0,e.g))for(var i=e.g.split("&"),o=0;o<i.length;o++){var c=i[o].indexOf("="),h=null;if(0<=c){var g=i[o].substring(0,c);h=i[o].substring(c+1)}else g=i[o];g=decodeURIComponent(g.replace(/\+/g," ")),h=h||"",e.add(g,decodeURIComponent(h.replace(/\+/g," ")))}}p=si.prototype,p.Va=null,p.kd=null;function Wt(e){return cn(e),e.kd}p.add=function(e,i){cn(this),this.g=null;var o=this.Va.has(e)?this.Va.get(e):null;return o||this.Va.set(e,o=[]),o.push(i),this.kd++,this},p.set=function(e,i){return cn(this),this.g=null,this.Va.has(e)?this.Va.set(e,[i]):this.add(e,i),this},p.get=function(e){return cn(this),this.Va.get(e)||[]},p.toString=function(){if(this.g)return this.g;if(!this.Va||!this.Va.size)return"";for(var e=[],i=T(this.Va.keys()),o=i.next();!o.done;o=i.next()){var c=o.value;o=encodeURIComponent(c),c=this.Va.get(c);for(var h=0;h<c.length;h++){var g=o;c[h]!==""&&(g+="="+encodeURIComponent(c[h])),e.push(g)}}return this.g=e.join("&")},p.clone=function(){var e=new si;if(e.g=this.g,this.Va){for(var i=new Map,o=T(this.Va),c=o.next();!c.done;c=o.next()){var h=T(c.value);c=h.next().value,h=h.next().value,i.set(c,h.concat())}e.Va=i,e.kd=this.kd}return e};function Ln(){}function Nn(e,i){if(!e&&!i)return!0;if(!e||!i||e.byteLength!=i.byteLength)return!1;if((ArrayBuffer.isView(e)?e.buffer:e)==(ArrayBuffer.isView(i)?i.buffer:i)&&(e.byteOffset||0)==(i.byteOffset||0))return!0;var o=jn(e);i=jn(i);for(var c=0;c<e.byteLength;c++)if(o[c]!=i[c])return!1;return!0}function fi(e){return ArrayBuffer.isView(e)?e.byteOffset==0&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer:e}function jn(e,i,o){return o=o===void 0?1/0:o,Ir(e,i===void 0?0:i,o,Uint8Array)}function cr(e,i,o){return o=o===void 0?1/0:o,Ir(e,i===void 0?0:i,o,Uint16Array)}function Ni(e,i,o){return o=o===void 0?1/0:o,Ir(e,i===void 0?0:i,o,DataView)}function Ir(e,i,o,c){var h=ArrayBuffer.isView(e)?e.buffer:e,g=1;"BYTES_PER_ELEMENT"in c&&(g=c.BYTES_PER_ELEMENT);var v=((e.byteOffset||0)+e.byteLength)/g;return e=Math.floor(Math.max(0,Math.min(((e.byteOffset||0)+i)/g,v))),new c(h,e,Math.floor(Math.min(e+Math.max(o,0),v))-e)}_e("shaka.util.BufferUtils",Ln),Ln.toDataView=Ni,Ln.toUint16=cr,Ln.toUint8=jn,Ln.toArrayBuffer=fi,Ln.equal=Nn;function it(e,i,o){var c=Ze.apply(3,arguments);this.severity=e,this.category=i,this.code=o,this.data=c,this.handled=!1,this.message="Shaka Error "+this.code;try{throw Error(this.message||"Shaka Error")}catch(h){this.stack=h.stack}}it.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},_e("shaka.util.Error",it),it.Severity={RECOVERABLE:1,CRITICAL:2},it.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},it.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,CHAPTERS_TRACK_FAILED:2015,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,MSS_MISSING_DATA_FOR_TRANSMUXING:3020,MSS_TRANSMUXING_FAILED:3022,TRANSMUXING_NO_VIDEO_DATA:3023,STREAMING_NOT_ALLOWED:3024,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,MSS_INVALID_XML:4046,MSS_LIVE_CONTENT_NOT_SUPPORTED:4047,AES_128_INVALID_IV_LENGTH:4048,AES_128_INVALID_KEY_LENGTH:4049,DASH_CONFLICTING_AES_128:4050,DASH_UNSUPPORTED_AES_128:4051,DASH_INVALID_PATCH:4052,HLS_EMPTY_MEDIA_PLAYLIST:4053,DASH_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4054,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,MIN_HDCP_VERSION_NOT_MATCH:6018,ERROR_CHECKING_HDCP_VERSION:6019,MISSING_EME_SUPPORT:6020,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,SRC_EQUALS_PRELOAD_NOT_SUPPORTED:7005,PRELOAD_DESTROYED:7006,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004,MT_AD_MANAGER_NOT_INITIALIZED:10005,INTERSTITIAL_AD_MANAGER_NOT_INITIALIZED:10006,VAST_INVALID_XML:10007};function Br(e){this.h=e,this.g=void 0}Br.prototype.value=function(){return this.g===void 0&&(this.g=this.h()),this.g};function Ws(e,i){return e.length&&i.length&&e!==i?0<Xs(e,i).length:!0}function Xs(e,i){if(!e.length)return i;if(!i.length)return e;var o=[];e=T(e);for(var c=e.next();!c.done;c=e.next()){c=c.value;for(var h=T(i),g=h.next();!g.done;g=h.next())if(g=g.value,c.keySystem==g.keySystem){h=new Map;for(var v=T((c.initData||[]).concat(g.initData||[])),E=v.next();!E.done;E=v.next())E=E.value,h.set(E.keyId,E);h=Array.from(h.values()),v=c.keyIds&&g.keyIds?new Set([].concat(k(c.keyIds),k(g.keyIds))):c.keyIds||g.keyIds,o.push({keySystem:c.keySystem,licenseServerUri:c.licenseServerUri||g.licenseServerUri,distinctiveIdentifierRequired:c.distinctiveIdentifierRequired||g.distinctiveIdentifierRequired,persistentStateRequired:c.persistentStateRequired||g.persistentStateRequired,videoRobustness:c.videoRobustness||g.videoRobustness,audioRobustness:c.audioRobustness||g.audioRobustness,serverCertificate:c.serverCertificate||g.serverCertificate,serverCertificateUri:c.serverCertificateUri||g.serverCertificateUri,initData:h,keyIds:v});break}}return o}function Po(e){return e?!!e.match(/^com\.(microsoft|chromecast)\.playready/):!1}function es(e){return e?!!e.match(/^com\.apple\.fps/):!1}var Tr=new Br(function(){return fi(new Uint8Array([0]))}),ia=new Map;function Da(e){this.h=e,this.g=null}Da.prototype.da=function(e){var i=this;this.stop();var o=!0,c=null;return this.g=function(){l.clearTimeout(c),o=!1},c=l.setTimeout(function(){o&&i.h()},1e3*e),this},Da.prototype.stop=function(){this.g&&(this.g(),this.g=null)};function Li(e){this.h=e,this.g=null}Li.prototype.sb=function(){return this.stop(),this.h(),this},Li.prototype.da=function(e){var i=this;return this.stop(),this.g=new Da(function(){i.h()}).da(e),this},Li.prototype.ua=function(e){var i=this;return this.stop(),this.g=new Da(function(){i.g.da(e),i.h()}).da(e),this},Li.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},_e("shaka.util.Timer",Li),Li.prototype.stop=Li.prototype.stop,Li.prototype.tickEvery=Li.prototype.ua,Li.prototype.tickAfter=Li.prototype.da,Li.prototype.tickNow=Li.prototype.sb;function Ya(){var e=l.ManagedMediaSource||l.MediaSource;return!!(e&&e.isTypeSupported)}function nu(e){return Zu().canPlayType(e)!=""}function el(){return!!navigator.userAgent.match(/Edge?\//)}function ca(){return Cr("Xbox One")}function In(){return Cr("Tizen")}function ii(){return Cr("Tizen 3")}function Si(){return Cr("Web0S")}function hr(){return Si()&&ms()===38}function Bi(){return Cr("CrKey")&&!Cr("VIZIO SmartCast")}function ms(){if(!Cr("Chrome")||navigator.userAgent.match(/Edge\//))return null;var e=navigator.userAgent.match(/Chrome\/(\d+)/);return e?parseInt(e[1],10):null}function er(){return Ra()&&((navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase()=="macos":navigator.platform?navigator.platform.toLowerCase().includes("mac"):!1)||(/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)?!0:Ra()&&1<navigator.maxTouchPoints))}function sr(){return Cr("PlayStation 5")}function Qi(){return Cr("PlayStation 4")}function ur(){return Cr("Hisense")||Cr("VIDAA")}function Ur(){if(!er()&&(!Ra()||er()))return null;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}function fo(){return navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase()=="windows":navigator.platform?navigator.platform.toLowerCase().includes("win32"):!1}function Ms(){return navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase()=="android":Cr("Android")}function Mo(){return navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase()=="fuchsia":Cr("Fuchsia")}function Qs(){return!!(In()||Si()||ca()||Qi()||sr()||Bi()||ur()||Cr("VIZIO SmartCast")||Ra()&&!er())}function Cr(e){return(navigator.userAgent||"").includes(e)}function Ra(){return(navigator.vendor||"").includes("Apple")}function Zu(){return Ns||(tc||(tc=new Li(function(){Ns=null})),(Ns=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(Ns=document.createElement("video")),tc.da(1),Ns)}function ec(){if(ii()||Cr("Tizen 2")||hr()||Qi()||sr())return!1;var e=Ur();return!(Ra()&&!er()&&e!=null&&15>e)}function La(){var e,i,o,c,h,g,v,E,S,I,L,O,V,W,pe,Me,De;return Qe(function(Fe){switch(Fe.g){case 1:if(e={width:1/0,height:1/0},Bi()){if(W=l.cast&&cast.__platform__&&cast.__platform__.canDisplayType,e.width=1280,e.height=720,$e(Fe,14),!(pe=W)){Fe.s(16);break}return x(Fe,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160'),17)}if(In()){i=l.devicePixelRatio,e.width=1920<l.screen.width*i?3840:1920,e.height=1080<l.screen.height*i?2160:1080;try{webapis.systeminfo&&webapis.systeminfo.getMaxVideoResolution?(o=webapis.systeminfo.getMaxVideoResolution(),e.width=o.width,e.height=o.height):webapis.productinfo.is8KPanelSupported&&webapis.productinfo.is8KPanelSupported()?(e.width=7680,e.height=4320):webapis.productinfo.isUdPanelSupported&&webapis.productinfo.isUdPanelSupported()&&(e.width=3840,e.height=2160)}catch{kt("Tizen: Error detecting screen size, default screen size 1920x1080.")}Fe.s(3);break}if(Si()){try{c=JSON.parse(l.PalmSystem.deviceInfo),e.width=Math.max(1920,c.screenWidth),e.height=Math.max(1080,c.screenHeight)}catch{kt("WebOS: Error detecting screen size, default screen size 1920x1080."),e.width=1920,e.height=1080}Fe.s(3);break}if(ur()){if(h=null,l.Hisense_Get4KSupportState)try{h=l.Hisense_Get4KSupportState()}catch{}h==null&&(h=Cr("UHD")),h?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080),Fe.s(3);break}if(!Qi()&&!sr()){g=void 0;try{g=typeof Windows<"u"?Windows:chrome.webview.hostObjects.sync.Windows}catch{}if(g){e.width=1920,e.height=1080;try{v=new g.Media.Protection.ProtectionCapabilities,E=g.Media.Protection.ProtectionCapabilityResult,S=null;do S=v.isTypeSupported('video/mp4;codecs="hvc1,mp4a";features="decode-res-x=3840,decode-res-y=2160,decode-bitrate=20000,decode-fps=30,decode-bpc=10,display-res-x=3840,display-res-y=2160,display-bpc=8"',"com.microsoft.playready.recommendation");while(S===E.maybe);S===E.probably&&(e.width=3840,e.height=2160)}catch{kt("Xbox: Error detecting screen size, default screen size 1920x1080.")}}else ca()&&(e.width=1920,e.height=1080,kt("Xbox: Error detecting screen size, default screen size 1920x1080."));Fe.s(3);break}return I=!1,$e(Fe,8),x(Fe,l.msdk.device.getDisplayInfo(),10);case 10:L=Fe.h,I=L.resolution==="4K",lt(Fe,9);break;case 8:return et(Fe),$e(Fe,11),x(Fe,l.msdk.device.getDisplayInfoImmediate(),13);case 13:O=Fe.h,I=O.resolution==="4K",lt(Fe,9);break;case 11:V=et(Fe),kt("PlayStation: Failed to get the display info:",V);case 9:I?(e.width=3840,e.height=2160):(e.width=1920,e.height=1080),Fe.s(3);break;case 17:pe=Fe.h;case 16:if(pe){e.width=3840,e.height=2160,Fe.s(18);break}if(!(Me=W)){Fe.s(19);break}return x(Fe,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=1920; height=1080'),20);case 20:Me=Fe.h;case 19:Me&&(e.width=1920,e.height=1080);case 18:lt(Fe,3);break;case 14:De=et(Fe),Mt("Failed to check canDisplayType:",De);case 3:return Fe.return(e)}})}function Js(e){return l.matchMedia!==void 0&&l.matchMedia("(color-gamut: p3)").matches?e?"HLG":"PQ":"SDR"}var tc=null,Ns=null;function Pa(){}function Er(e){if(!e)return"";if(e=jn(e),e[0]==239&&e[1]==187&&e[2]==191&&(e=e.subarray(3)),l.TextDecoder&&!Qi())return e=new TextDecoder().decode(e),e.includes("")&&Mt('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),e;for(var i="",o=0;o<e.length;++o){var c=65533;if((e[o]&128)==0?c=e[o]:e.length>=o+2&&(e[o]&224)==192&&(e[o+1]&192)==128?(c=(e[o]&31)<<6|e[o+1]&63,o+=1):e.length>=o+3&&(e[o]&240)==224&&(e[o+1]&192)==128&&(e[o+2]&192)==128?(c=(e[o]&15)<<12|(e[o+1]&63)<<6|e[o+2]&63,o+=2):e.length>=o+4&&(e[o]&241)==240&&(e[o+1]&192)==128&&(e[o+2]&192)==128&&(e[o+3]&192)==128&&(c=(e[o]&7)<<18|(e[o+1]&63)<<12|(e[o+2]&63)<<6|e[o+3]&63,o+=3),65535>=c)i+=String.fromCharCode(c);else{c-=65536;var h=c&1023;i+=String.fromCharCode(55296+(c>>10)),i+=String.fromCharCode(56320+h)}}return i}function ra(e,i,o){if(!e)return"";if(!o&&e.byteLength%2!=0)throw new it(2,2,2004);o=Math.floor(e.byteLength/2);var c=new Uint16Array(o);e=Ni(e);for(var h=0;h<o;h++)c[h]=e.getUint16(2*h,i);return jr(c)}function da(e){function i(c){return o.byteLength<=c||9<=o[c]&&126>=o[c]}if(!e)return"";var o=jn(e);if(o[0]==239&&o[1]==187&&o[2]==191)return Er(o);if(o[0]==254&&o[1]==255)return ra(o.subarray(2),!1);if(o[0]==255&&o[1]==254)return ra(o.subarray(2),!0);if(o[0]==0&&o[2]==0)return ra(e,!1);if(o[1]==0&&o[3]==0)return ra(e,!0);if(i(0)&&i(1)&&i(2)&&i(3))return Er(e);throw new it(2,2,2003)}function sa(e){if(l.TextEncoder&&!Qi()){var i=new TextEncoder;return fi(i.encode(e))}e=encodeURIComponent(e),e=unescape(e),i=new Uint8Array(e.length);for(var o=0;o<e.length;o++)i[o]=e[o].charCodeAt(0);return fi(i)}function iu(e,i){for(var o=new ArrayBuffer(2*e.length),c=new DataView(o),h=0;h<e.length;++h)c.setUint16(2*h,e.charCodeAt(h),i);return o}function jr(e){return ru.value()(e)}function ys(e){var i={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'","&nbsp;":"","&lrm;":"","&rlm;":""},o=/&(?:amp|lt|gt|quot|apos|nbsp|lrm|rlm|#[xX]?[0-9a-fA-F]+);/g,c=RegExp(o.source);return e&&c.test(e)?e.replace(o,function(h){return h[1]=="#"?(h=h[2]=="x"||h[2]=="X"?parseInt(h.substring(3),16):parseInt(h.substring(2),10),0<=h&&1114111>=h?String.fromCodePoint(h):""):i[h]||"'"}):e||""}_e("shaka.util.StringUtils",Pa),Pa.resetFromCharCode=function(){ru.g=void 0},Pa.toUTF16=iu,Pa.toUTF8=sa,Pa.fromBytesAutoDetect=da,Pa.fromUTF16=ra,Pa.fromUTF8=Er;var ru=new Br(function(){function e(o){try{var c=new Uint8Array(o);return 0<String.fromCharCode.apply(null,c).length}catch{return!1}}for(var i={jc:65536};0<i.jc;i={jc:i.jc},i.jc/=2)if(e(i.jc))return function(o){return function(c){for(var h="",g=0;g<c.length;g+=o.jc)h+=String.fromCharCode.apply(null,c.subarray(g,g+o.jc));return h}}(i);return null});function Wr(){}function ho(e){return e=jr(jn(e)),btoa(e)}function _s(e,i){return i=i??!0,e=ho(e).replace(/\+/g,"-").replace(/\//g,"_"),i?e:e.replace(/[=]*$/,"")}function aa(e){e=l.atob(e.replace(/-/g,"+").replace(/_/g,"/"));for(var i=new Uint8Array(e.length),o=0;o<e.length;++o)i[o]=e.charCodeAt(o);return i}function oa(e){for(var i=e.length/2,o=new Uint8Array(i),c=0;c<i;c++)o[c]=l.parseInt(e.substr(2*c,2),16);return o}function No(e){var i=jn(e);e="",i=T(i);for(var o=i.next();!o.done;o=i.next())o=o.value,o=o.toString(16),o.length==1&&(o="0"+o),e+=o;return e}function qr(){for(var e=Ze.apply(0,arguments),i=0,o=0;o<e.length;++o)i+=e[o].byteLength;i=new Uint8Array(i);for(var c=o=0;c<e.length;++c){var h=e[c];ArrayBuffer.isView(h)&&h.BYTES_PER_ELEMENT===1?i.set(h,o):i.set(jn(h),o),o+=h.byteLength}return i}_e("shaka.util.Uint8ArrayUtils",Wr),Wr.concat=qr,Wr.toHex=No,Wr.fromHex=oa,Wr.fromBase64=aa,Wr.toBase64=_s,Wr.toStandardBase64=ho;function ts(e,i,o){if(o=o===void 0?"":o,i.length==0)return e;if(e.length==1&&i.length==1){var c=new vn(e[0]);return i=new vn(i[0]),i=c.resolve(i),o&&Ne(i,o),[i.toString()]}i=i.map(function(E){return new vn(E)}),c=[],e=T(e);for(var h=e.next();!h.done;h=e.next()){h=new vn(h.value);for(var g=T(i),v=g.next();!v.done;v=g.next())v=h.resolve(v.value),o&&Ne(v,o),c.push(v.toString())}return c}function Wa(e,i,o,c){return e={keySystem:e,encryptionScheme:i,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:o||[],keyIds:new Set},c&&(e.keySystemUris=new Set([c])),e}function $c(e,i){i=i===void 0?"cenc":i;var o=[],c=[],h=[];e.forEach(function(v,E){var S=E;S.length!=22&&(S=_s(oa(E),!1));var I=v;I.length!=22&&(I=_s(oa(v),!1)),v={kty:"oct",kid:S,k:I},o.push(v),c.push(v.kid),h.push(E)}),e=JSON.stringify({keys:o});var g=JSON.stringify({kids:c});return g=[{initData:jn(sa(g)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",encryptionScheme:i,licenseServerUri:"data:application/json;base64,"+l.btoa(e),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:g,keyIds:new Set(h)}}function wu(e,i){if(i.length==1)return i[0];if(e=zs(e,i),e!=null)return e;throw new it(2,4,4025,i)}function zs(e,i){var o=zd.get(e);o=T(o);for(var c=o.next();!c.done;c=o.next()){c=c.value;for(var h=T(i),g=h.next();!g.done;g=h.next())if(g=g.value,c.test(g.trim()))return g.trim()}return e==zi?"":null}function Iu(e,i){var o=[];e=zd.get(e),e=T(e);for(var c=e.next();!c.done;c=e.next()){c=c.value;for(var h=T(i),g=h.next();!g.done;g=h.next())g=g.value,c.test(g.trim())&&o.push(g.trim())}return o}var zi="text",ds={la:"video",V:"audio",za:zi,$e:"image",Mj:"application"},qh=1/15,zd=new Map().set("audio",[/^vorbis$/,/^Opus$/,/^opus$/,/^fLaC$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4/,/^dts[cex]$/,/^iamf/,/^mhm[12]/,/^ac3$/,/^eac3$/]).set("video",[/^avc/,/^hev/,/^hvc/,/^vvc/,/^vvi/,/^vp0?[89]/,/^av01/,/^dvh/,/^dva/,/^dav/]).set("text",[/^vtt$/,/^wvtt/,/^stpp/]);function nc(e,i,o,c){this.g=null,this.l=e,this.i=i,this.m=o,this.o=c,this.j=!1;e:{if(typeof libDPIModule>"u"&&kt("Could not find LCEVC Library dependencies on this page"),typeof LCEVCdec<"u")this.h=LCEVCdec;else if(typeof LcevcDil<"u")this.h=LcevcDil,this.j=!0,dn("LcevcDil","lcevc_dil.js is deprecated, please use lcevc_dec.js instead");else{kt("Could not find LCEVC Library on this page"),e=!1;break e}typeof this.h.SupportObject>"u"?(kt("Could not find LCEVC Library on this page"),e=!1):(this.h.SupportObject.SupportStatus||kt(this.h.SupportObject.SupportError),e=typeof this.h<"u"&&typeof libDPIModule<"u"&&this.i instanceof HTMLCanvasElement&&this.h.SupportObject.SupportStatus)}e&&!this.g&&this.h.SupportObject.webGLSupport(this.i)&&(this.i.classList.remove("shaka-hidden"),this.g=this.j?new this.h.LcevcDil(this.l,this.i,this.m):new this.h.LCEVCdec(this.l,this.i,this.m))}function Of(e,i,o,c){c.type!=="video"||e.o&&!c.baseOriginalId||e.g&&e.g.appendBuffer(i,"video",c.id,-o,!e.o)}function Hh(e){e.g&&e.i.classList.add("shaka-hidden")}nc.prototype.release=function(){this.g&&(this.g.close(),this.g=null)};function Ff(e){return e&&typeof LCEVCdec<"u"?e.codecs=="lvc1":!1}_e("shaka.lcevc.Dec",nc),nc.prototype.release=nc.prototype.release;function Ss(e){if(Kc.has(e))return Kc.get(e);var i=l.ManagedMediaSource||l.MediaSource;return i?(i=i.isTypeSupported(e),Kc.set(e,i),i):!1}function tl(){var e=l.ManagedSourceBuffer||l.SourceBuffer;return!!e&&!!e.prototype&&!!e.prototype.changeType}function ic(){var e=l.ManagedMediaSource||l.MediaSource;return e&&e.prototype?!!e.prototype.setLiveSeekableRange&&!!e.prototype.clearLiveSeekableRange:!1}var Kc=new Map;function Oo(){}Oo.prototype.extract=function(){},Oo.prototype.decode=function(){return[]},Oo.prototype.clear=function(){},Oo.prototype.getStreams=function(){return[]};function Kr(){}Kr.prototype.init=function(){},Kr.prototype.parse=function(){return[]};function su(){}su.prototype.init=function(){},su.prototype.i=function(){},su.prototype.g=function(){},su.prototype.j=function(){},_e("shaka.media.IClosedCaptionParser",su);function Yr(e){this.l=new Kr,(e=Uf(e.toLowerCase()))&&(this.l=e()),this.h=new Oo,(e=Fo)&&(this.h=e())}Yr.prototype.init=function(e,i){i!==void 0&&i||this.g(),this.l.init(e)},Yr.prototype.i=function(e){e=this.l.parse(e),e=T(e);for(var i=e.next();!i.done;i=e.next()){i=i.value;var o=jn(i.packet);0<o.length&&this.h.extract(o,i.pts)}return this.h.decode()},Yr.prototype.g=function(){this.h.clear()},Yr.prototype.j=function(){return this.h.getStreams()};function Yc(e,i){Cu.set(e,i)}function Uf(e){return Cu.get(e)}_e("shaka.media.ClosedCaptionParser",Yr),Yr.findDecoder=function(){return Fo},Yr.unregisterDecoder=function(){Fo=null},Yr.registerDecoder=function(e){Fo=e},Yr.findParser=Uf,Yr.unregisterParser=function(e){Cu.delete(e)},Yr.registerParser=Yc;var Cu=new Map,Fo=null;function po(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=js,this.scroll=Ma}_e("shaka.text.CueRegion",po);var js=1;po.units={PX:0,PERCENTAGE:js,LINES:2};var Ma="";po.scrollMode={NONE:Ma,UP:"up"};function Uo(e,i){return typeof e=="number"&&typeof i=="number"&&isNaN(e)&&isNaN(i)?!0:e===i}function fa(e,i){i=e.indexOf(i),-1<i&&e.splice(i,1)}function jd(e,i,o){if(o||(o=Uo),e.length!=i.length)return!1;i=i.slice(),e=T(e);for(var c=e.next(),h={};!c.done;h={ah:void 0},c=e.next()){if(h.ah=c.value,c=i.findIndex(function(g){return function(v){return o(g.ah,v)}}(h)),c==-1)return!1;i[c]=i[i.length-1],i.pop()}return i.length==0}function rc(e,i,o){if(e===i)return!0;if(!e||!i)return e==i;if(o||(o=Uo),e.length!=i.length)return!1;for(var c=0;c<e.length;c++)if(!o(e[c],i[c]))return!1;return!0}function sc(e){this.h=e||"",this.g=0}function au(e){ku(e,/[ \t]+/gm)}function ku(e,i){return i.lastIndex=e.g,i=i.exec(e.h),i=i==null?null:{position:i.index,length:i[0].length,results:i},e.g==e.h.length||i==null||i.position!=e.g?null:(e.g+=i.length,i.results)}function Il(e){return e.g==e.h.length?null:(e=ku(e,/[^ \t\n]*/gm))?e[0]:null}function Du(e){if(e=ku(e,ac),e==null)return null;var i=Number(e[2]),o=Number(e[3]);return 59<i||59<o?null:(Number(e[6])||0)/1e3+o+60*i+3600*(Number(e[1])||0)}function nl(e){return e?Du(new sc(e)):null}var ac=/(?:(\d{1,}):)?(\d{2}):(\d{2})((\.(\d{1,3})))?/g;function Na(e){function i(c){switch(typeof c){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return c;default:if(!c||ArrayBuffer.isView(c))return c;if(o.has(c))return null;var h=c.constructor==Array;if(c.constructor!=Object&&!h)return null;o.add(c);var g=h?[]:{},v;for(v in c)g[v]=i(c[v]);return h&&(g.length=c.length),g}}var o=new WeakSet;return i(e)}function Oa(e){var i={},o;for(o in e)i[o]=e[o];return i}function qd(e){if(Array.isArray(e)){for(var i=[],o=0;o<e.length;o++){var c=o.toString(),h=e[o];h!==void 0&&(h=qd(h))&&i.push(c+":"+h)}e="["+i.join(",")+"]"}else if(typeof e=="function")e="";else if(e instanceof Object){for(o=Object.keys(e),o.sort(),i=[],o=T(o),c=o.next();!c.done;c=o.next())h=c.value,c=JSON.stringify(h),h=e[h],h!==void 0&&(h=qd(h))&&i.push(c+":"+h);e="{"+i.join(",")+"}"}else e=JSON.stringify(e);return e}function Ru(e,i){var o=o===void 0?!1:o;return e=da(e),Cl(e,i,o)}function Cl(e,i,o){return e=Bf(e,o===void 0?!1:o),!i&&e.length?e[0]:(e=e.find(function(c){return i.split(",").includes(c.tagName)}))?e:null}function oc(e){return qf.has(e)?qf.get(e):""}function Bf(e,i){function o(g,v){v=v===void 0?!1:v;for(var E=[];e[h];)if(e.charCodeAt(h)==60){if(e.charCodeAt(h+1)===47){v=h+2,h=e.indexOf(">",h),v=e.substring(v,h);var S=v.indexOf(g);if(S==-1){var I=g.indexOf(".");0<I&&(S=v.indexOf(g.substring(0,I)))}if(S==-1)throw g=e.substring(0,h).split(`
`),Error(`Unexpected close tag
Line: `+(g.length-1)+`
Column: `+(g[g.length-1].length+1)+`
Char: `+e[h]);h+1&&(h+=1);break}else if(e.charCodeAt(h+1)===33){if(e.charCodeAt(h+2)==45){for(;h!==-1&&(e.charCodeAt(h)!==62||e.charCodeAt(h-1)!=45||e.charCodeAt(h-2)!=45||h==-1);)h=e.indexOf(">",h+1);h===-1&&(h=e.length)}else if(e.charCodeAt(h+2)===91&&e.charCodeAt(h+8)===91&&e.substr(h+3,5).toLowerCase()==="cdata"){S=e.indexOf("]]>",h),S==-1?(E.push(e.substr(h+9)),h=e.length):(E.push(e.substring(h+9,S)),h=S+3);continue}h++;continue}e:{I=v,h++;var L=c(),O={};for(S=[];e.charCodeAt(h)!==62&&e[h];){var V=e.charCodeAt(h);if(64<V&&91>V||96<V&&123>V){V=c();for(var W=e.charCodeAt(h);W&&W!==39&&W!==34&&!(64<W&&91>W||96<W&&123>W)&&W!==62;)h++,W=e.charCodeAt(h);var pe=h+1;if(h=e.indexOf(e[h],pe),pe=e.slice(pe,h),W===39||W===34){if(h===-1){if(I={tagName:L,attributes:O,children:S,parent:null},i)for(L=0;L<S.length;L++)typeof S[L]!="string"&&(S[L].parent=I);S=I;break e}}else pe=null,h--;if(V.startsWith("xmlns:")){W=pe;var Me=V.split(":")[1];qf.set(W,Me),Hd.set(Me,W)}L==="tt"&&V==="xml:space"&&pe==="preserve"&&(I=!0),O[V]=pe}h++}for(e.charCodeAt(h-1)!==47?(h++,S=o(L,I)):h++,I={tagName:L,attributes:O,children:S,parent:null},L=S.length,O=0;O<L;O++)V=S[O],typeof V!="string"?i&&(V.parent=I):O==L-1&&V==`
`&&S.pop();S=I}if(E.push(S),typeof S=="string")break;S.tagName[0]==="?"&&S.children&&(E.push.apply(E,k(S.children)),S.children=[])}else S=h,h=e.indexOf("<",h)-1,h===-2&&(h=e.length),S=e.slice(S,h+1),v?0<S.length&&E.push(S):(E.length&&S.length==1&&S[0]==`
`||0<S.trim().length)&&E.push(S),h++;return E}function c(){for(var g=h;`\r
	>/= `.indexOf(e[h])===-1&&e[h];)h++;return e.slice(g,h)}var h=0;return o("")}function Wc(e){return typeof e=="string"}function Gh(e){var i=[];if(!e.children)return[];e=T(e.children);for(var o=e.next();!o.done;o=e.next())o=o.value,typeof o!="string"&&i.push(o);return i}function or(e,i){var o=[];if(!e.children)return[];e=T(e.children);for(var c=e.next();!c.done;c=e.next())c=c.value,c.tagName===i&&o.push(c);return o}function ns(e){return typeof e=="string"?ys(e):(e=e.children.reduce(function(i,o){return typeof o=="string"?i+o:i},""),e===""?null:ys(e))}function ha(e){return Array.from(e.children).every(function(i){return typeof i=="string"})?((e=ns(e))&&(e=e.trim()),e):null}function pa(e,i,o){if(o=o===void 0?[]:o,e.tagName===i&&o.push(e),e.children){e=T(e.children);for(var c=e.next();!c.done;c=e.next())pa(c.value,i,o)}return o}function is(e,i){return e=or(e,i),e.length!=1?null:e[0]}function Fa(e,i,o){return e=Vh(e,i,o),e.length!=1?null:e[0]}function Ri(e,i,o,c){c=c===void 0?null:c;var h=null;return e=e.attributes[i],e!=null&&(h=o(e)),h??c}function il(e,i,o){return i=oc(i),e.attributes[i+":"+o]||null}function Vh(e,i,o){var c=oc(i);if(i=[],e.children)for(o=c?c+":"+o:o,e=T(e.children),c=e.next();!c.done;c=e.next())(c=c.value)&&c.tagName===o&&i.push(c);return i}function rl(e,i,o){i=T(i);for(var c=i.next();!c.done;c=i.next())if(c=il(e,c.value,o))return c;return null}function sl(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:e/1e3):null}function go(e){return!e||(e=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$","i").exec(e),!e)?null:(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null)}function Xc(e){var i=/([0-9]+)-([0-9]+)/.exec(e);return!i||(e=Number(i[1]),!isFinite(e))?null:(i=Number(i[2]),isFinite(i)?{start:e,end:i}:null)}function Zs(e){return e=Number(e),e%1===0?e:null}function kl(e){return e=Number(e),e%1===0&&0<e?e:null}function vs(e){return e=Number(e),e%1===0&&0<=e?e:null}function Lu(e){return e=Number(e),isNaN(e)?null:e}function lc(e){return e?e.toLowerCase()==="true":!1}function Qc(e){var i,o=(i=e.match(/^(\d+)\/(\d+)$/))?Number(i[1])/Number(i[2]):Number(e);return isNaN(o)?null:o}function uc(e){var i=[];e=ys(e).split(/\/+(?=(?:[^'"]*['"][^'"]*['"])*[^'"]*$)/),e=T(e);for(var o=e.next();!o.done;o=e.next()){o=o.value;var c=o.match(/^([\w]+)/);if(c){var h=o.match(/(@id='(.*?)')/),g=o.match(/(@t='(\d+)')/),v=o.match(/(@n='(\d+)')/),E=o.match(/\[(\d+)\]/);i.push({name:c[0],id:h?h[0].match(/'(.*?)'/)[0].replace(/'/gm,""):null,t:g?Number(g[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,n:v?Number(v[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,position:E?Number(E[1])-1:null,ac:o.split("/@")[1]||null})}else o.startsWith("@")&&i.length&&(i[i.length-1].ac=o.slice(1))}return i}function $h(e,i){var o=uc(i.attributes.sel||"");if(o.length){var c=o[o.length-1],h=i.attributes.pos||null;o=c.position,o==null&&(c.t!==null&&(o=zf(e,"t",c.t)),c.n!==null&&(o=zf(e,"n",c.n))),o===null?o=h==="prepend"?0:e.length:h==="prepend"?--o:h==="after"&&++o,h=i.tagName,(c=c.ac)&&e[o]?Jc(e[o],h,c,ha(i)||""):(h!=="remove"&&h!=="replace"||e.splice(o,1),h!=="add"&&h!=="replace"||e.splice.apply(e,[o,0].concat(k(i.children))))}}function zf(e,i,o){var c=0;e=T(e);for(var h=e.next();!h.done;h=e.next()){if(Number(h.value.attributes[i])===o)return c;c++}return null}function Jc(e,i,o,c){i==="remove"?delete e.attributes[o]:(i==="add"||i==="replace")&&(e.attributes[o]=c)}function jf(e){var i="",o=e.tagName.split(":");0<o.length&&(i=o[0],i=Hd.has(i)?Hd.get(i):""),i=document.createElementNS(i,e.tagName);for(var c in e.attributes)i.setAttribute(c,e.attributes[c]);for(e=T(e.children),c=e.next();!c.done;c=e.next())c=c.value,o=void 0,typeof c=="string"?o=new Text(c):o=jf(c),i.appendChild(o);return i}function Zc(e){if(!e)return null;var i={tagName:e.tagName,attributes:Oa(e.attributes),children:[],parent:null};e=T(e.children);for(var o=e.next();!o.done;o=e.next())o=o.value,typeof o=="string"||(o=Zc(o),o.parent=i),i.children.push(o);return i}var qf=new Map,Hd=new Map;function kr(e,i,o){this.startTime=e,this.endTime=i,this.payload=o,this.region=new po,this.position=null,this.positionAlign=Mu,this.size=0,this.textAlign=mo,this.direction=fc,this.writingMode=Dl,this.lineInterpretation=hc,this.line=null,this.lineHeight="",this.lineAlign=Xa,this.displayAlign=td,this.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=rd,this.fontStyle=Ou,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textCombineUpright="",this.textDecoration=[],this.textStrokeWidth=this.textStrokeColor=this.textShadow="",this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.rubyTag=null,this.cellResolution={oc:32,rows:15}}function Kh(e,i){return e=new kr(e,i,""),e.lineBreak=!0,e}kr.prototype.clone=function(){var e=new kr(0,0,""),i;for(i in this)e[i]=this[i],e[i]&&e[i].constructor==Array&&(e[i]=e[i].slice());return e};function ou(e,i){if(e.payload!=i.payload||!(.001>Math.abs(e.startTime-i.startTime)&&.001>Math.abs(e.endTime-i.endTime)))return!1;for(var o in e)if(o!="startTime"&&o!="endTime"&&o!="payload"){if(o=="nestedCues"){if(!rc(e.nestedCues,i.nestedCues,ou))return!1}else if(o=="region"||o=="cellResolution"){for(var c in e[o])if(e[o][c]!=i[o][c])return!1}else if(Array.isArray(e[o])){if(!rc(e[o],i[o]))return!1}else if(e[o]!=i[o])return!1}return!0}function cc(e,i){i=i===void 0?new Map:i;var o=e.payload;if(o.includes("<")){i.size===0&&Pu(i);var c=o;o=[];for(var h=-1,g=0;g<c.length;g++)c[g]==="<"?h=g+1:c[g]===">"&&0<h&&(h=c.substr(h,g-h),h.match(Yh)&&o.push(h),h=-1);for(o=T(o),g=o.next();!g.done;g=o.next())g=g.value,c=c.replace("<"+g+">",'<div time="'+g+'">'),c+="</div>";e:{g=c,h=[];var v=-1;o="",c=!1;for(var E=0;E<g.length;E++)if(g[E]==="/"){var S=g.indexOf(">",E);if(S===-1){o=g;break e}if((S=g.substring(E+1,S))&&S=="v"){c=!0;var I=null;if(h.length&&(I=h[h.length-1]),I){if(I===S)o+="/"+S+">";else{if(!I.startsWith("v")){o+=g[E];continue}o+="/"+I+">"}E+=S.length+1}else o+=g[E]}else o+=g[E]}else g[E]==="<"?(v=E+1,g[v]!="v"&&(v=-1)):g[E]===">"&&0<v&&(h.push(g.substr(v,E-v)),v=-1),o+=g[E];for(g=T(h),h=g.next();!h.done;h=g.next())h=h.value,v=h.replace(" ",".voice-"),o=o.replace("<"+h+">","<"+v+">"),o=o.replace("</"+h+">","</"+v+">"),c||(o+="</"+v+">")}o=dc(o),e.payload="";try{var L=Cl("<span>"+o+"</span>","span")}catch{}if(L)if(L=L.children,L.length!=1||L[0].tagName)for(L=T(L),o=L.next();!o.done;o=L.next())xs(o.value,e,i);else e.payload=ys(o);else e.payload=ys(o)}else e.payload=ys(o)}function Pu(e){for(var i=T(Object.entries(id)),o=i.next();!o.done;o=i.next()){var c=T(o.value);o=c.next().value,c=c.next().value;var h=new kr(0,0,"");h.color=c,e.set("."+o,h)}for(i=T(Object.entries(Gd)),o=i.next();!o.done;o=i.next())c=T(o.value),o=c.next().value,c=c.next().value,h=new kr(0,0,""),h.backgroundColor=c,e.set("."+o,h)}function dc(e){var i={"< ":""," >":" &gt;"},o=/(< +>|<\s|\s>)/g,c=RegExp(o.source);return e&&c.test(e)?e.replace(o,function(h){return i[h]||""}):e||""}function xs(e,i,o){var c=i.clone();if(c.nestedCues=[],c.payload="",c.rubyTag="",c.line=null,c.region=new po,c.position=null,c.size=0,c.textAlign=mo,e.tagName)for(var h=T(e.tagName.split(/(?=[ .])+/g)),g=h.next();!g.done;g=h.next()){var v=g=g.value;if(v.startsWith(".voice-")){var E=v.split("-").pop();v='v[voice="'+E+'"]',o.has(v)||(v="v[voice="+E+"]")}switch(o.has(v)&&(E=c,v=o.get(v))&&(E.backgroundColor=Bo(v.backgroundColor,E.backgroundColor),E.color=Bo(v.color,E.color),E.fontFamily=Bo(v.fontFamily,E.fontFamily),E.fontSize=Bo(v.fontSize,E.fontSize),E.textShadow=Bo(v.textShadow,E.textShadow),E.fontWeight=v.fontWeight,E.fontStyle=v.fontStyle,E.opacity=v.opacity,E.rubyTag=v.rubyTag,E.textCombineUpright=v.textCombineUpright,E.wrapLine=v.wrapLine),g){case"br":c=Kh(c.startTime,c.endTime),i.nestedCues.push(c);return;case"b":c.fontWeight=Nu;break;case"i":c.fontStyle=Fu;break;case"u":c.textDecoration.push(al);break;case"font":(g=e.attributes.color)&&(c.color=g);break;case"div":if(g=e.attributes.time,!g)break;(g=nl(g))&&(c.startTime=g);break;case"ruby":case"rp":case"rt":c.rubyTag=g}}if(h=e.children,Wc(e)||h.length==1&&Wc(h[0]))for(o=ns(e).split(`
`),e=!0,o=T(o),h=o.next();!h.done;h=o.next())h=h.value,e||(e=Kh(c.startTime,c.endTime),i.nestedCues.push(e)),0<h.length&&(e=c.clone(),e.payload=ys(h),i.nestedCues.push(e)),e=!1;else for(i.nestedCues.push(c),i=T(h),e=i.next();!e.done;e=i.next())xs(e.value,c,o)}function Bo(e,i){return e&&0<e.length?e:i}_e("shaka.text.Cue",kr),kr.parseCuePayload=cc,kr.equal=ou,kr.prototype.clone=kr.prototype.clone;var Mu="auto";kr.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:Mu};var mo="center",ed={LEFT:"left",RIGHT:"right",CENTER:mo,START:"start",END:"end"};kr.textAlign=ed;var td="after",Hf={BEFORE:"before",CENTER:"center",AFTER:td};kr.displayAlign=Hf;var fc="ltr";kr.direction={HORIZONTAL_LEFT_TO_RIGHT:fc,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var Dl="horizontal-tb";kr.writingMode={HORIZONTAL_TOP_TO_BOTTOM:Dl,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var hc=0;kr.lineInterpretation={LINE_NUMBER:hc,PERCENTAGE:1};var Xa="start",nd={CENTER:"center",START:Xa,END:"end"};kr.lineAlign=nd;var id={white:"white",lime:"lime",cyan:"cyan",red:"red",yellow:"yellow",magenta:"magenta",blue:"blue",black:"black"};kr.defaultTextColor=id;var Gd={bg_white:"white",bg_lime:"lime",bg_cyan:"cyan",bg_red:"red",bg_yellow:"yellow",bg_magenta:"magenta",bg_blue:"blue",bg_black:"black"};kr.defaultTextBackgroundColor=Gd;var rd=400,Nu=700;kr.fontWeight={NORMAL:rd,BOLD:Nu};var Ou="normal",Fu="italic",Gf={NORMAL:Ou,ITALIC:Fu,OBLIQUE:"oblique"};kr.fontStyle=Gf;var al="underline";kr.textDecoration={UNDERLINE:al,LINE_THROUGH:"lineThrough",OVERLINE:"overline"};var Yh=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;function Rl(){}Rl.prototype.destroy=function(){};function zo(e,i,o){Ll.set(e.toLowerCase().split(";")[0]+"-"+o,{priority:o,se:i})}function lu(e,i){for(var o=e.toLowerCase().split(";")[0],c=T([Wh,ol,uu,Ts]),h=c.next();!h.done;h=c.next())if(h=Ll.get(o+"-"+h.value)){var g=h.se(),v=g.isSupported(e,i);if(g.destroy(),v)return h.se}return null}_e("shaka.transmuxer.TransmuxerEngine",Rl),Rl.findTransmuxer=lu,Rl.unregisterTransmuxer=function(e,i){Ll.delete(e.toLowerCase().split(";")[0]+"-"+i)},Rl.registerTransmuxer=zo,Rl.prototype.destroy=Rl.prototype.destroy;var Ll=new Map,Ts=1,uu=2,ol=3,Wh=4;Rl.PluginPriority={FALLBACK:Ts,PREFERRED_SECONDARY:uu,PREFERRED:ol,APPLICATION:Wh};function Vd(){}function Xr(e,i){var o=e;return i&&!ll.includes(e)&&(o+='; codecs="'+i+'"'),o}function Qa(e,i){return i&&(e+='; codecs="'+i+'"'),e}function Vf(e,i,o){var c=Xr(e,i);return i=Qa(e,i),lu(i)?(e=lu(i))?(e=e(),o=e.convertCodecs(o,i),e.destroy()):o=i:o=e!="video/mp2t"&&o=="audio"?c.replace("video","audio"):c,o}function $f(e,i,o){var c=[i];return Kf.forEach(function(h,g){var v=e[g];g=="codecs"?ll.includes(e.mimeType)||c.push('codecs="'+o+'"'):v&&c.push(h+'="'+v+'"')}),e.hdr=="PQ"&&c.push('eotf="smpte2084"'),c.join(";")}function sd(e){return e.split(";")[0].split("/")[1]}function Ds(e){var i=ad(e);switch(e=i[0].toLowerCase(),i=i[1].toLowerCase(),!0){case(e==="mp4a"&&i==="69"):case(e==="mp4a"&&i==="6b"):case(e==="mp4a"&&i==="40.34"):return"mp3";case(e==="mp4a"&&i==="66"):case(e==="mp4a"&&i==="67"):case(e==="mp4a"&&i==="68"):case(e==="mp4a"&&i==="40.2"):case(e==="mp4a"&&i==="40.02"):case(e==="mp4a"&&i==="40.5"):case(e==="mp4a"&&i==="40.05"):case(e==="mp4a"&&i==="40.29"):case(e==="mp4a"&&i==="40.42"):return"aac";case(e==="mp4a"&&i==="a5"):case e==="ac3":case e==="ac-3":return"ac-3";case(e==="mp4a"&&i==="a6"):case e==="eac3":case e==="ec-3":return"ec-3";case e==="ac-4":return"ac-4";case(e==="mp4a"&&i==="b2"):return"dtsx";case(e==="mp4a"&&i==="a9"):return"dtsc";case e==="vp09":case e==="vp9":return"vp9";case e==="avc1":case e==="avc3":return"avc";case e==="hvc1":case e==="hev1":return"hevc";case e==="vvc1":case e==="vvi1":return"vvc";case e==="dvh1":case e==="dvhe":return i&&i.startsWith("05")?"dovi-p5":"dovi-hevc";case e==="dvav":case e==="dva1":return"dovi-avc";case e==="dav1":return"dovi-av1";case e==="dvc1":case e==="dvi1":return"dovi-vvc"}return e}function yo(e){var i=[];e=T(e.split(","));for(var o=e.next();!o.done;o=e.next())o=ad(o.value),i.push(o[0]);return i.sort().join(",")}function ps(e){return e.split(";")[0]}function ea(e){return e=e.split(/ *; */),e.shift(),(e=e.find(function(i){return i.startsWith("codecs=")}))?e.split("=")[1].replace(/^"|"$/g,""):""}function pc(e){return e==="application/x-mpegurl"||e==="application/vnd.apple.mpegurl"}function ad(e){e=e.split(".");var i=e[0];return e.shift(),[i,e.join(".")]}_e("shaka.util.MimeUtils",Vd),Vd.getFullTypeWithAllCodecs=Qa,Vd.getFullType=Xr;var Kf=new Map().set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels"),ll=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function vo(e){this.i=null,this.j=e,this.B=!1,this.l=this.u=0,this.m=1/0,this.h=this.g=null,this.C="",this.A=function(){},this.o=new Map}function As(e,i){ul.set(e,i)}function Uu(e){return ul.get(e)}function Pl(e){return ul.has(e)?!0:e=="application/cea-608"||e=="application/cea-708"?!!Fo:!1}vo.prototype.destroy=function(){return this.j=this.i=null,this.o.clear(),Promise.resolve()};function Xh(e,i,o,c,h){var g,v,E,S,I,L,O;return Qe(function(V){if(V.g==1)return x(V,Promise.resolve(),2);if(!e.i||!e.j)return V.return();if(o==null||c==null)return e.i.parseInit(jn(i)),V.return();for(g=e.B?o:e.u,v={periodStart:e.u,segmentStart:o,segmentEnd:c,vttOffset:g},E=e.i.parseMedia(jn(i),v,h,[]),S=T(E),I=S.next();!I.done;I=S.next())L=I.value,e.A(L,h||null,v);O=E.filter(function(W){return W.startTime>=e.l&&W.startTime<e.m}),e.j.append(O),e.g==null&&(e.g=Math.max(o,e.l)),e.h=Math.min(c,e.m),ue(V)})}vo.prototype.remove=function(e,i){var o=this;return Qe(function(c){if(c.g==1)return x(c,Promise.resolve(),2);!o.j||!o.j.remove(e,i)||o.g==null||i<=o.g||e>=o.h||(e<=o.g&&i>=o.h?o.g=o.h=null:e<=o.g&&i<o.h?o.g=i:e>o.g&&i>=o.h&&(o.h=e)),ue(c)})};function Yf(e,i,o){e.l=i,e.m=o}function $d(e,i,o){if(e.C=i,i=e.o.get(i))for(var c=T(i.keys()),h=c.next();!h.done;h=c.next())(h=i.get(h.value).filter(function(g){return g.endTime<=o}))&&e.j.append(h)}function Wf(e,i,o){i.startTime+=o,i.endTime+=o,i=T(i.nestedCues);for(var c=i.next();!c.done;c=i.next())Wf(e,c.value,o)}function zg(e,i,o,c,h){var g=o+" "+c,v=new Map;i=T(i);for(var E=i.next();!E.done;E=i.next()){var S=E.value;E=S.stream,S=S.cue,v.has(E)||v.set(E,new Map),v.get(E).has(g)||v.get(E).set(g,[]),Wf(e,S,h),S.startTime>=e.l&&S.startTime<e.m&&(v.get(E).get(g).push(S),E==e.C&&e.j.append([S]))}for(h=T(v.keys()),g=h.next();!g.done;g=h.next())for(g=g.value,e.o.has(g)||e.o.set(g,new Map),i=T(v.get(g).keys()),E=i.next();!E.done;E=i.next())E=E.value,S=v.get(g).get(E),e.o.get(g).set(E,S);e.g=e.g==null?Math.max(o,e.l):Math.min(e.g,Math.max(o,e.l)),e.h=Math.max(e.h,Math.min(c,e.m))}_e("shaka.text.TextEngine",vo),vo.prototype.destroy=vo.prototype.destroy,vo.findParser=Uu,vo.unregisterParser=function(e){ul.delete(e)},vo.registerParser=As;var ul=new Map;function Qh(e,i){return e.concat(i)}function Jh(){}function Ml(e){return e!=null}function jo(e,i){return Promise.race([i,new Promise(function(o,c){new Li(c).da(e)})])}function gr(){}function Ja(e,i){return e=Sr(e),i=Sr(i),e.split("-")[0]==i.split("-")[0]}function qs(e,i){return e=Sr(e),i=Sr(i),e=e.split("-"),i=i.split("-"),e[0]==i[0]&&e.length==1&&i.length==2}function Za(e,i){return e=Sr(e),i=Sr(i),e=e.split("-"),i=i.split("-"),e.length==2&&i.length==2&&e[0]==i[0]}function Sr(e){e=T(e.split("-x-"));var i=e.next().value;i=i===void 0?"":i,e=e.next().value,e=e===void 0?"":e;var o=T(i.split("-"));return i=o.next().value,i=i===void 0?"":i,o=o.next().value,o=o===void 0?"":o,e=e?"x-"+e:"",i=i.toLowerCase(),i=Qf.get(i)||i,o=o.toUpperCase(),(o?i+"-"+o:i)+(e?"-"+e:"")}function Nl(e,i){return e=Sr(e),i=Sr(i),i==e?4:qs(i,e)?3:Za(i,e)?2:qs(e,i)?1:0}function Xf(e){var i=e.indexOf("-");return e=0<=i?e.substring(0,i):e,e=e.toLowerCase(),e=Qf.get(e)||e}function Kd(e){return e.language?Sr(e.language):e.audio&&e.audio.language?Sr(e.audio.language):e.video&&e.video.language?Sr(e.video.language):"und"}function Yd(e,i){e=Sr(e);var o=new Set;i=T(i);for(var c=i.next();!c.done;c=i.next())o.add(Sr(c.value));for(i=T(o),c=i.next();!c.done;c=i.next())if(c=c.value,c==e)return c;for(i=T(o),c=i.next();!c.done;c=i.next())if(c=c.value,qs(c,e))return c;for(i=T(o),c=i.next();!c.done;c=i.next())if(c=c.value,Za(c,e))return c;for(o=T(o),i=o.next();!i.done;i=o.next())if(i=i.value,qs(e,i))return i;return null}_e("shaka.util.LanguageUtils",gr),gr.findClosestLocale=Yd,gr.getLocaleForVariant=Kd,gr.getLocaleForText=function(e){return Sr(e.language||"und")},gr.getBase=Xf,gr.relatedness=Nl,gr.areSiblings=function(e,i){var o=Xf(e),c=Xf(i);return e!=o&&i!=c&&o==c},gr.normalize=Sr,gr.isSiblingOf=Za,gr.isParentOf=qs,gr.areLanguageCompatible=Ja,gr.areLocaleCompatible=function(e,i){return e=Sr(e),i=Sr(i),e==i};var Qf=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function Jf(){}function Zh(e,i,o,c,h){function g(Fe){var We=String(Fe.width||"")+String(Fe.height||"")+String(Math.round(Fe.frameRate||0))+(Fe.hdr||"")+Fe.fastSwitching;return Fe.dependencyStream&&(We+=Fe.dependencyStream.baseOriginalId||""),We}function v(Fe){var We=Fe.language+(Fe.channelsCount||0)+(Fe.audioSamplingRate||0)+Fe.roles.join(",")+Fe.label+Fe.groupId+Fe.fastSwitching;return Fe.dependencyStream&&(We+=Fe.dependencyStream.baseOriginalId||""),We}if(h.length){var E=e.textStreams;h=T(h);for(var S=h.next(),I={};!S.done;I={sg:void 0},S=h.next())if(I.sg=S.value,S=E.filter(function(Fe){return function(We){return!!(We.codecs.startsWith(Fe.sg)||We.mimeType.startsWith(Fe.sg))}}(I)),S.length){E=S;break}e.textStreams=E}if(E=e.variants,(i.length||o.length)&&(E=gc(E,i,o)),c.length){for(i=new Sn,o=T(E),E=o.next();!E.done;E=o.next())E=E.value,i.push(String(E.video.width||0),E);var L=[];i.forEach(function(Fe,We){Fe=0;var gt=[];We=T(We);for(var ht=We.next(),It={};!ht.done;It={Pe:void 0},ht=We.next())It.Pe=ht.value,ht=c.filter(function(ot){return function(st){return ot.Pe.decodingInfos[0][st]}}(It)).length,ht>Fe?(Fe=ht,gt=[It.Pe]):ht==Fe&&gt.push(It.Pe);L.push.apply(L,k(gt))}),E=L}for(o=new Set,i=new Set,E=T(E),h=E.next();!h.done;h=E.next())h=h.value,h.audio&&o.add(h.audio),h.video&&i.add(h.video);E=Array.from(o).sort(function(Fe,We){return Fe.bandwidth-We.bandwidth});var O=[];for(o=new Map,E=T(E),h=E.next();!h.done;h=E.next()){if(h=h.value,S=v(h),I=o.get(S)||[],I.length){var V=I[I.length-1],W=Ds(V.codecs),pe=Ds(h.codecs);W!=pe||h.bandwidth&&V.bandwidth&&!(h.bandwidth>V.bandwidth)||(I.push(h),O.push(h.id))}else I.push(h),O.push(h.id);o.set(S,I)}var Me={vp8:1,avc:1,"dovi-avc":.95,vp9:.9,vp09:.9,hevc:.85,"dovi-hevc":.8,"dovi-p5":.75,av01:.7,"dovi-av1":.65,vvc:.6};E=Array.from(i).sort(function(Fe,We){if(!Fe.bandwidth||!We.bandwidth||Fe.bandwidth==We.bandwidth){if(Fe.codecs&&We.codecs&&Fe.codecs!=We.codecs&&Fe.width==We.width){var gt=Ds(Fe.codecs),ht=Ds(We.codecs);if(gt!=ht)return(Me[gt]||1)-(Me[ht]||1)}return Fe.width-We.width}return Fe.bandwidth-We.bandwidth}),i=tl();var De=[];for(o=new Map,E=T(E),h=E.next();!h.done;h=E.next()){if(h=h.value,S=g(h),I=o.get(S)||[],I.length){if(V=I[I.length-1],!i&&(W=Ds(V.codecs),pe=Ds(h.codecs),W!==pe))continue;W=Ds(V.codecs),pe=Ds(h.codecs),W!=pe||h.bandwidth&&V.bandwidth&&!(h.bandwidth>V.bandwidth)||(I.push(h),De.push(h.id))}else I.push(h),De.push(h.id);o.set(S,I)}e.variants=e.variants.filter(function(Fe){var We=Fe.audio;return Fe=Fe.video,!(We&&!O.includes(We.id)||Fe&&!De.includes(Fe.id))})}function gc(e,i,o){i=T(i);for(var c=i.next(),h={};!c.done;h={Lh:void 0},c=i.next())if(h.Lh=c.value,c=e.filter(function(g){return function(v){return v.video&&v.video.codecs.startsWith(g.Lh)}}(h)),c.length){e=c;break}for(o=T(o),i=o.next(),c={};!i.done;c={Cg:void 0},i=o.next())if(c.Cg=i.value,i=e.filter(function(g){return function(v){return v.audio&&v.audio.codecs.startsWith(g.Cg)}}(c)),i.length){e=i;break}return e}function Zf(e,i,o){e.variants=e.variants.filter(function(c){return N(c,i,o)})}function N(e,i,o){function c(E,S,I){return E>=S&&E<=I}var h=e.video;if(h&&h.width&&h.height){var g=h.width,v=h.height;if(v>g&&(v=T([v,g]),g=v.next().value,v=v.next().value),!c(g,i.minWidth,Math.min(i.maxWidth,o.width))||!c(v,i.minHeight,Math.min(i.maxHeight,o.height))||!c(h.width*h.height,i.minPixels,i.maxPixels))return!1}return!(e&&e.video&&e.video.frameRate&&!c(e.video.frameRate,i.minFrameRate,i.maxFrameRate)||e&&e.audio&&e.audio.channelsCount&&!c(e.audio.channelsCount,i.minChannelsCount,i.maxChannelsCount)||!c(e.bandwidth,i.minBandwidth,i.maxBandwidth))}function H(e,i,o,c){return o=o===void 0?[]:o,c=c===void 0?{}:c,Qe(function(h){return h.g==1?x(h,ee(e,i,0<i.offlineSessionIds.length,o,c),2):(xn(i),x(h,hi(i),0))})}function ee(e,i,o,c,h){var g,v;return Qe(function(E){if(E.g==1)return ca()&&J(i.variants),x(E,pt(i.variants,o,!1,c),2);g=null,e&&(v=e.h)&&(g=v.keySystem),i.variants=i.variants.filter(function(S){var I=be(S,g,h);if(!I){var L=[];S.audio&&L.push(eo(S.audio)),S.video&&L.push(eo(S.video))}return I}),ue(E)})}function J(e){var i=new Map().set("dvav","avc3").set("dva1","avc1").set("dvhe","hev1").set("dvh1","hvc1").set("dvc1","vvc1").set("dvi1","vvi1"),o=new Set;e=T(e);for(var c=e.next();!c.done;c=e.next())c=c.value,c.video&&o.add(c.video);for(o=T(o),e=o.next();!e.done;e=o.next()){e=e.value,c=T(i);for(var h=c.next();!h.done;h=c.next()){var g=T(h.value);if(h=g.next().value,g=g.next().value,e.codecs.includes(h)){e.codecs=e.codecs.replace(h,g);break}}}}function be(e,i,o){if(!e.decodingInfos.some(function(S){return!(!S.supported||i&&(S=S.keySystemAccess)&&(o[S.keySystem]||S.keySystem)!=i)}))return!1;var c=ca(),h=Cr("Firefox")&&Ms(),g=e.video,v=g&&g.width||0,E=g&&g.height||0;return c&&g&&(1920<v||1080<E)&&(g.codecs.includes("avc1.")||g.codecs.includes("avc3."))||(c=g&&g.dependencyStream)&&!Ff(c)?!1:(e=e.audio,!(h&&e&&e.encrypted&&e.codecs.toLowerCase().includes("opus")||e&&e.dependencyStream))}function Oe(e,i){var o,c,h,g,v,E,S;return Qe(function(I){if(I.g==1){for(o=function(L,O){if(L){var V=Oa(L);return V.supported=L.supported&&O.supported,V.powerEfficient=L.powerEfficient&&O.powerEfficient,V.smooth=L.smooth&&O.smooth,O.keySystemAccess&&!V.keySystemAccess&&(V.keySystemAccess=O.keySystemAccess),V}return O},c=null,h=[],g=T(i),v=g.next(),E={};!v.done;E={cache:void 0,Rd:void 0},v=g.next())S=v.value,E.Rd=qd(S),E.cache=eh,E.cache.has(E.Rd)?c=o(c,E.cache.get(E.Rd)):h.push(ct(S).then(function(L){return function(O){var V=null;O=T(O||[]);for(var W=O.next();!W.done;W=O.next())V=o(V,W.value);V&&(L.cache.set(L.Rd,V),c=o(c,V))}}(E)));return x(I,Promise.all(h),2)}c&&e.decodingInfos.push(c),ue(I)})}function ct(e){var i=[""];e.video&&(i=ea(e.video.contentType).split(","));var o=[""];e.audio&&(o=ea(e.audio.contentType).split(","));var c=[];i=T(i);for(var h=i.next();!h.done;h=i.next()){h=h.value;for(var g=T(o),v=g.next(),E={};!v.done;E={pc:void 0},v=g.next())v=v.value,E.pc=Na(e),e.video&&(E.pc.video.contentType=Xr(ps(E.pc.video.contentType),h)),e.audio&&(E.pc.audio.contentType=Xr(ps(E.pc.audio.contentType),v)),c.push(new Promise(function(S){return function(I,L){(Ms()?jo(5,navigator.mediaCapabilities.decodingInfo(S.pc)):navigator.mediaCapabilities.decodingInfo(S.pc)).then(function(O){I(O)}).catch(L)}}(E)))}return Promise.all(c).catch(function(){return JSON.stringify(e),null})}function pt(e,i,o,c){var h,g,v,E,S,I,L,O,V,W,pe,Me,De,Fe,We,gt,ht,It;return Qe(function(ot){switch(ot.g){case 1:if(e.some(function(st){return st.decodingInfos.length}))return ot.return();h=T(c),g=h.next(),v={};case 2:if(g.done){ot.s(4);break}v.mh=g.value,E=!1,S=T(e),I=S.next();case 5:if(I.done){ot.s(7);break}L=I.value,O=wt(L,i,o).filter(function(st){return function(_t){return _t=_t[0],(_t.keySystemConfiguration&&_t.keySystemConfiguration.keySystem)===st.mh}}(v)),V=T(O),W=V.next();case 8:if(W.done){ot.s(10);break}return pe=W.value,x(ot,Oe(L,pe),9);case 9:W=V.next(),ot.s(8);break;case 10:L.decodingInfos.length&&(E=!0),I=S.next(),ot.s(5);break;case 7:if(E)return ot.return();v={mh:void 0},g=h.next(),ot.s(2);break;case 4:Me=T(e),De=Me.next();case 12:if(De.done){ot.s(0);break}Fe=De.value,We=wt(Fe,i,o).filter(function(st){return st=st[0],st=st.keySystemConfiguration&&st.keySystemConfiguration.keySystem,!st||!c.includes(st)}),gt=T(We),ht=gt.next();case 15:if(ht.done){De=Me.next(),ot.s(12);break}return It=ht.value,x(ot,Oe(Fe,It),16);case 16:ht=gt.next(),ot.s(15)}})}function wt(e,i,o){var c=e.audio,h=e.video,g=[],v=[];if(h)for(var E=T(h.fullMimeTypes),S=E.next();!S.done;S=E.next()){S=S.value;var I=ea(S);if(I.includes(",")&&!c){var L=I.split(","),O=ps(S);I=wu("video",L),L=wu("audio",L),L=Ct(L,O),O=Vf(O,L,"audio"),v.push({contentType:O,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1})}if(I=$t(I),S={contentType:Vf(ps(S),I,"video"),width:h.width||64,height:h.height||64,bitrate:h.bandwidth||e.bandwidth||1,framerate:h.frameRate||1},h.hdr)switch(h.hdr){case"SDR":S.transferFunction="srgb";break;case"PQ":S.transferFunction="pq";break;case"HLG":S.transferFunction="hlg"}h.colorGamut&&(S.colorGamut=h.colorGamut),g.push(S)}if(c)for(E=T(c.fullMimeTypes),S=E.next();!S.done;S=E.next())I=S.value,S=ps(I),I=Ct(ea(I),S),S=Vf(S,I,"audio"),v.push({contentType:S,channels:c.channelsCount||2,bitrate:c.bandwidth||e.bandwidth||1,samplerate:c.audioSamplingRate||1,spatialRendering:c.spatialAudio});for(E=[],g.length==0&&g.push(null),v.length==0&&v.push(null),g=T(g),S=g.next();!S.done;S=g.next())for(S=S.value,I=T(v),O=I.next();!O.done;O=I.next())O=O.value,L={type:o?"file":"media-source"},S&&(L.video=S),O&&(L.audio=O),E.push(L);if(v=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]),!v.length)return[E];for(e=[],o=new Map,v=T(v),g=v.next();!g.done;g=v.next())g=g.value,o.get(g.keySystem)||o.set(g.keySystem,[]),o.get(g.keySystem).push(g);for(v=i?"required":"optional",i=i?["persistent-license"]:["temporary"],g=T(o.keys()),S=g.next();!S.done;S=g.next()){for(S=S.value,O=o.get(S),I=new Map,O=T(O),L=O.next();!L.done;L=O.next()){L=L.value;var V=L.videoRobustness+","+L.audioRobustness;I.get(V)||I.set(V,[]),I.get(V).push(L)}for(I=T(I.values()),O=I.next();!O.done;O=I.next()){O=O.value,L=[],V=T(E);for(var W=V.next();!W.done;W=V.next()){W=Object.assign({},W.value);for(var pe={keySystem:S,initDataType:"cenc",persistentState:v,distinctiveIdentifier:"optional",sessionTypes:i},Me=T(O),De=Me.next();!De.done;De=Me.next()){if(De=De.value,De.initData&&De.initData.length){for(var Fe=new Set,We=T(De.initData),gt=We.next();!gt.done;gt=We.next())Fe.add(gt.value.initDataType);pe.initDataType=De.initData[0].initDataType}De.distinctiveIdentifierRequired&&(pe.distinctiveIdentifier="required"),De.persistentStateRequired&&(pe.persistentState="required"),De.sessionType&&(pe.sessionTypes=[De.sessionType]),c&&(pe.audio?(De.encryptionScheme&&(pe.audio.encryptionScheme=pe.audio.encryptionScheme||De.encryptionScheme),pe.audio.robustness=pe.audio.robustness||De.audioRobustness):(pe.audio={robustness:De.audioRobustness},De.encryptionScheme&&(pe.audio.encryptionScheme=De.encryptionScheme)),pe.audio.robustness==""&&delete pe.audio.robustness),h&&(pe.video?(De.encryptionScheme&&(pe.video.encryptionScheme=pe.video.encryptionScheme||De.encryptionScheme),pe.video.robustness=pe.video.robustness||De.videoRobustness):(pe.video={robustness:De.videoRobustness},De.encryptionScheme&&(pe.video.encryptionScheme=De.encryptionScheme)),pe.video.robustness==""&&delete pe.video.robustness)}W.keySystemConfiguration=pe,L.push(W)}e.push(L)}}return e}function Ct(e,i){return e.toLowerCase()=="flac"?er()?"fLaC":"flac":e.toLowerCase()==="opus"?er()&&sd(i)=="mp4"?"Opus":"opus":e.toLowerCase()=="ac-3"&&ii()?"ec-3":e}function $t(e){if(e.includes("avc1")){var i=e.split(".");if(i.length==3)return e=i.shift()+".",e+=parseInt(i.shift(),10).toString(16),e+=("000"+parseInt(i.shift(),10).toString(16)).slice(-4)}else if(e=="vp9")return"vp09.00.41.08";return e}function xn(e){e.textStreams=e.textStreams.filter(function(i){return i=Xr(i.mimeType,i.codecs),Pl(i)})}function hi(e){var i,o,c,h,g,v,E;return Qe(function(S){switch(S.g){case 1:i=[],o=T(e.imageStreams),c=o.next();case 2:if(c.done){S.s(4);break}if(h=c.value,g=h.mimeType,g=="application/mp4"&&h.codecs=="mjpg"&&(g="image/jpg"),ep.has(g)){S.s(5);break}if(v=tb.get(g),!v){ep.set(g,!1),S.s(5);break}return x(S,Pn(v),7);case 7:E=S.h,ep.set(g,E);case 5:ep.get(g)&&i.push(h),c=o.next(),S.s(2);break;case 4:e.imageStreams=i,ue(S)}})}function Pn(e){return new Promise(function(i){var o=new Image;o.src=e,"decode"in o?o.decode().then(function(){i(!0)}).catch(function(){i(!1)}):o.onload=o.onerror=function(){i(o.height===2)}})}function Oi(e){var i=e.audio,o=e.video,c=i?i.mimeType:null,h=o?o.mimeType:null,g=i?i.codecs:null,v=o?o.codecs:null,E=i?i.groupId:null,S=[];o&&S.push(o.mimeType),i&&S.push(i.mimeType),S=S[0]||null;var I=[];i&&I.push(i.kind),o&&I.push(o.kind),I=I[0]||null;var L=new Set;if(i)for(var O=T(i.roles),V=O.next();!V.done;V=O.next())L.add(V.value);if(o)for(O=T(o.roles),V=O.next();!V.done;V=O.next())L.add(V.value);if(e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:I,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:S,audioMimeType:c,videoMimeType:h,codecs:"",audioCodec:g,videoCodec:v,primary:e.primary,roles:Array.from(L),audioRoles:null,forced:!1,videoId:null,audioId:null,audioGroupId:E,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:null},o&&(e.videoId=o.id,e.originalVideoId=o.originalId,e.width=o.width||null,e.height=o.height||null,e.frameRate=o.frameRate||null,e.pixelAspectRatio=o.pixelAspectRatio||null,e.videoBandwidth=o.bandwidth||null,e.hdr=o.hdr||null,e.colorGamut=o.colorGamut||null,e.videoLayout=o.videoLayout||null,(c=o.dependencyStream)&&(e.width=c.width||e.width,e.height=c.height||e.height,e.videoCodec=c.codecs||e.videoCodec),v.includes(","))){e.channelsCount=o.channelsCount,e.audioSamplingRate=o.audioSamplingRate,e.spatialAudio=o.spatialAudio,e.originalLanguage=o.originalLanguage,e.audioMimeType=h,o=v.split(",");try{e.videoCodec=wu("video",o),e.audioCodec=wu("audio",o)}catch{}}return i&&(e.audioId=i.id,e.originalAudioId=i.originalId,e.channelsCount=i.channelsCount,e.audioSamplingRate=i.audioSamplingRate,e.audioBandwidth=i.bandwidth||null,e.spatialAudio=i.spatialAudio,e.label=i.label,e.audioRoles=i.roles,e.accessibilityPurpose=i.accessibilityPurpose,e.originalLanguage=i.originalLanguage,i=i.dependencyStream)&&(e.audioCodec=i.codecs||e.audioCodec),i=[],e.videoCodec&&i.push(e.videoCodec),e.audioCodec&&i.push(e.audioCodec),e.codecs=i.join(", "),e}function lr(e){return{id:e.id,active:!1,type:zi,bandwidth:0,language:e.language,label:e.label,kind:e.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:e.primary,roles:e.roles,audioRoles:null,forced:e.forced,videoId:null,audioId:null,audioGroupId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:e.originalId,originalImageId:null,accessibilityPurpose:e.accessibilityPurpose,originalLanguage:e.originalLanguage}}function Rs(e){var i=e.width||null,o=e.height||null,c=null;e.segmentIndex&&(c=Hu(e.segmentIndex));var h=e.tilesLayout;return c&&(h=c.tilesLayout||h),h&&i!=null&&(i/=Number(h.split("x")[0])),h&&o!=null&&(o/=Number(h.split("x")[1])),{id:e.id,active:!1,type:"image",bandwidth:e.bandwidth||0,language:"",label:null,kind:null,width:i,height:o,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:e.mimeType,audioMimeType:null,videoMimeType:null,codecs:e.codecs||null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,forced:!1,videoId:null,audioId:null,audioGroupId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:h||null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:e.originalId,accessibilityPurpose:null,originalLanguage:null}}function ga(e){return e.__shaka_id||(e.__shaka_id=Wy++),e.__shaka_id}function Ol(e){var i=Bu(e);return i.active=e.mode!="disabled",i.type="text",i.originalTextId=e.id,e.kind=="captions"&&(i.mimeType="unknown"),e.kind=="subtitles"&&(i.mimeType="text/vtt"),e.kind&&(i.roles=[e.kind]),e.kind=="forced"&&(i.forced=!0),i}function cu(e){var i=Bu(e);return i.active=e.enabled,i.type="variant",i.originalAudioId=e.id,e.kind=="main"&&(i.primary=!0),e.kind&&(i.roles=[e.kind],i.audioRoles=[e.kind],i.label=e.label),i}function Bu(e){var i=e.language;return{id:ga(e),active:!1,type:"",bandwidth:0,language:Sr(i||"und"),label:e.label,kind:e.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,audioGroupId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:i}}function Fl(e){return e.allowedByApplication&&e.allowedByKeySystem&&e.disabledUntilTime==0}function Ul(e){return e.filter(function(i){return Fl(i)})}function Bl(e,i,o,c){var h=e,g=e.filter(function(S){return S.primary});g.length&&(h=g);var v=h.length?h[0].language:"";if(h=h.filter(function(S){return S.language==v}),i){var E=Yd(Sr(i),e.map(function(S){return S.language}));E&&(h=e.filter(function(S){return Sr(S.language)==E}))}if(h=h.filter(function(S){return S.forced==c}),o){if(e=Qr(h,o),e.length)return e}else if(e=h.filter(function(S){return S.roles.length==0}),e.length)return e;return e=h.map(function(S){return S.roles}).reduce(Qh,[]),e.length?Qr(h,e[0]):h}function Qr(e,i){return e.filter(function(o){return o.roles.includes(i)})}function mc(e,i){i.length&&(i=i.filter(function(o){return Ds(e.codecs)==Ds(o.codecs)}).sort(function(o,c){return o.bandwidth&&c.bandwidth&&o.bandwidth!=c.bandwidth?o.bandwidth-c.bandwidth:(o.width||0)-(c.width||0)}),e.trickModeVideo=i[0],1<i.length&&(i=i.find(function(o){return e.width==o.width&&e.height==o.height})))&&(e.trickModeVideo=i)}function eo(e){return e.type=="audio"?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:e.type=="video"?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}function Yy(e,i,o){if(o.autoShowText==0)return!1;if(o.autoShowText==1)return!0;var c=Sr(o.preferredTextLanguage);return i=Sr(i.language),o.autoShowText==2?Ja(i,c):o.autoShowText==3?e?(e=Sr(e.language),Ja(i,c)&&!Ja(e,i)):!1:(kt("Invalid autoShowText setting!"),!1)}_e("shaka.util.StreamUtils",Jf),Jf.meetsRestrictions=N;var eh=new Map,Wy=0,ep=new Map().set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),tb=new Map().set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function Vr(){var e=this;this.G=null,this.o=!1,this.m=new Lt,this.j=new ni,navigator.connection&&navigator.connection.addEventListener&&this.j.D(navigator.connection,"change",function(){if(e.o&&e.g.useNetworkInformation){e.m=new Lt,e.g&&e.m.configure(e.g.advanced);var i=e.chooseVariant();i&&navigator.onLine&&e.G(i,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.F=[],this.H=1,this.I=!1,this.h=this.l=this.g=this.u=null,this.A=new Li(function(){if(e.o&&(e.g.restrictToElementSize||e.g.restrictToScreenSize)){var i=e.chooseVariant();i&&e.G(i,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.B=l,"documentPictureInPicture"in l&&this.j.D(l.documentPictureInPicture,"enter",function(){e.B=l.documentPictureInPicture.window,e.A&&e.A.sb(),e.j.ma(e.B,"pagehide",function(){e.B=l,e.A&&e.A.sb()})}),this.C=this.i=null}p=Vr.prototype,p.stop=function(){this.G=null,this.o=!1,this.F=[],this.H=1,this.l=this.u=null,this.h&&(this.h.disconnect(),this.h=null),this.A.stop(),this.C=this.i=null},p.release=function(){this.j.release(),this.A=null},p.init=function(e){this.G=e},p.chooseVariant=function(){var e=1/0,i=1/0;if(this.g.restrictToScreenSize){var o=this.g.ignoreDevicePixelRatio?1:this.B.devicePixelRatio;e=this.B.screen.height*o,i=this.B.screen.width*o}if(this.h&&this.g.restrictToElementSize){o=this.g.ignoreDevicePixelRatio?1:this.B.devicePixelRatio;var c=this.l.clientHeight,h=this.l.clientWidth;this.i&&document.pictureInPictureElement&&document.pictureInPictureElement==this.l&&(c=this.i.height,h=this.i.width),e=Math.min(e,c*o),i=Math.min(i,h*o)}if(o=this.F.filter(function(I){return I&&!(I.audio&&I.audio.fastSwitching||I.video&&I.video.fastSwitching)}),o.length||(o=this.F),c=o,o.length!=this.F.length&&(c=this.F.filter(function(I){return I&&!!(I.audio&&I.audio.fastSwitching||I.video&&I.video.fastSwitching)})),o=tp(this,this.g.restrictions,c,1/0,1/0),e!=1/0||i!=1/0){for(o=nb(o),o=T(o),h=o.next();!h.done;h=o.next())if(h=h.value,h.height>=e&&h.width>=i){e=h.height,i=h.width;break}o=tp(this,this.g.restrictions,c,e,i)}for(e=this.getBandwidthEstimate(),c.length&&!o.length&&(o=tp(this,null,c,1/0,1/0),o=[o[0]]),i=o[0]||null,c=0;c<o.length;c++){h=o[c];for(var g=isNaN(this.H)?1:Math.abs(this.H),v=g*h.bandwidth/this.g.bandwidthDowngradeTarget,E={bandwidth:1/0},S=c+1;S<o.length;S++)if(h.bandwidth!=o[S].bandwidth){E=o[S];break}g=g*E.bandwidth/this.g.bandwidthUpgradeTarget,e>=v&&e<=g&&(i.bandwidth!=h.bandwidth||i.bandwidth==h.bandwidth&&i.video&&h.video&&(i.video.width<h.video.width||i.video.height<h.video.height))&&(i=h)}return this.u=Date.now(),i},p.enable=function(){this.o=!0},p.disable=function(){this.o=!1},p.segmentDownloaded=function(e,i,o){e<this.g.cacheLoadThreshold||(this.m.sample(e,i),o&&this.u!=null&&this.o&&Xy(this))},p.trySuggestStreams=function(){this.u!=null&&this.o&&Xy(this)},p.getBandwidthEstimate=function(){var e=this.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&(e=1e6*navigator.connection.downlink),navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&this.g.preferNetworkInformationBandwidth?e:(e=this.m.getBandwidthEstimate(e),this.C?this.C.getBandwidthEstimate(e):e)},p.setVariants=function(e){this.F=e},p.playbackRateChanged=function(e){this.H=e},p.setMediaElement=function(e){function i(){o.A.da(Qy)}var o=this;this.l=e,this.h&&(this.h.disconnect(),this.h=null),this.l&&"ResizeObserver"in l&&(this.h=new ResizeObserver(i),this.h.observe(this.l)),this.j.D(e,"enterpictureinpicture",function(c){c.pictureInPictureWindow&&(o.i=c.pictureInPictureWindow,o.j.D(o.i,"resize",i))}),this.j.D(e,"leavepictureinpicture",function(){o.i&&o.j.Ja(o.i,"resize",i),o.i=null})},p.setCmsdManager=function(e){this.C=e},p.configure=function(e){this.g=e,this.m&&this.g&&this.m.configure(this.g.advanced)};function Xy(e){if(!e.I){var i=e.m;if(!(i.g>=i.i))return;e.I=!0,e.u-=1e3*(e.g.switchInterval-e.g.minTimeToSwitch)}Date.now()-e.u<1e3*e.g.switchInterval||(i=e.chooseVariant(),e.getBandwidthEstimate(),i&&e.G(i,e.g.clearBufferSwitch,e.g.safeMarginSwitch))}function tp(e,i,o,c,h){if(e.C){var g=e.C.Ug();g&&(o=o.filter(function(v){return v.bandwidth&&g?v.bandwidth<=g:!0}))}return i&&(o=o.filter(function(v){return N(v,i,{width:h,height:c})})),o.sort(function(v,E){return v.bandwidth-E.bandwidth})}function nb(e){var i=[];e=T(e);for(var o=e.next();!o.done;o=e.next())(o=o.value.video)&&o.height&&o.width&&i.push({height:o.height,width:o.width});return i.sort(function(c,h){return c.width-h.width})}_e("shaka.abr.SimpleAbrManager",Vr),Vr.prototype.configure=Vr.prototype.configure,Vr.prototype.setCmsdManager=Vr.prototype.setCmsdManager,Vr.prototype.setMediaElement=Vr.prototype.setMediaElement,Vr.prototype.playbackRateChanged=Vr.prototype.playbackRateChanged,Vr.prototype.setVariants=Vr.prototype.setVariants,Vr.prototype.getBandwidthEstimate=Vr.prototype.getBandwidthEstimate,Vr.prototype.trySuggestStreams=Vr.prototype.trySuggestStreams,Vr.prototype.segmentDownloaded=Vr.prototype.segmentDownloaded,Vr.prototype.disable=Vr.prototype.disable,Vr.prototype.enable=Vr.prototype.enable,Vr.prototype.chooseVariant=Vr.prototype.chooseVariant,Vr.prototype.init=Vr.prototype.init,Vr.prototype.release=Vr.prototype.release,Vr.prototype.stop=Vr.prototype.stop;var Qy=1;_e("shaka.config.CrossBoundaryStrategy",{KEEP:"keep",RESET:"reset",RESET_TO_ENCRYPTED:"reset_to_encrypted",RESET_ON_ENCRYPTION_CHANGE:"RESET_ON_ENCRYPTION_CHANGE"});function Jy(e,i){var o=qo();this.l=e.maxAttempts==null?o.maxAttempts:e.maxAttempts,this.j=e.baseDelay==null?o.baseDelay:e.baseDelay,this.o=e.fuzzFactor==null?o.fuzzFactor:e.fuzzFactor,this.m=e.backoffFactor==null?o.backoffFactor:e.backoffFactor,this.g=0,this.h=this.j,(this.i=i===void 0?!1:i)&&(this.g=1)}function Wd(e){var i,o;return Qe(function(c){if(c.g==1){if(e.g>=e.l)if(e.i)e.g=1,e.h=e.j;else throw new it(2,7,1010);return i=e.g,e.g++,i==0?c.return():(o=e.h*(1+(2*Math.random()-1)*e.o),x(c,new Promise(function(h){new Li(h).da(o/1e3)}),2))}e.h*=e.m,ue(c)})}function qo(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}}function mr(){var e,i,o=new Promise(function(c,h){e=c,i=h});return o.resolve=e,o.reject=i,o}mr.prototype.resolve=function(){},mr.prototype.reject=function(){};function Fi(e,i){this.promise=e,this.i=i,this.g=null}function yc(e){return new Fi(Promise.reject(e),function(){return Promise.resolve()})}function np(){var e=Promise.reject(new it(2,7,7001));return e.catch(function(){}),new Fi(e,function(){return Promise.resolve()})}function od(e){return new Fi(Promise.resolve(e),function(){return Promise.resolve()})}function Zy(e){return new Fi(e,function(){return e.catch(function(){})})}Fi.prototype.abort=function(){return this.g||(this.g=this.i()),this.g};function jg(e){return new Fi(Promise.all(e.map(function(i){return i.promise})),function(){return Promise.all(e.map(function(i){return i.abort()}))})}Fi.prototype.finally=function(e){return this.promise.then(function(){return e(!0)},function(){return e(!1)}),this},Fi.prototype.Ha=function(e,i){function o(E){return function(S){if(h.g&&E)g.reject(v);else{var I=E?e:i;I?c=ib(I,S,g):(E?g.resolve:g.reject)(S)}}}function c(){return g.reject(v),h.abort()}var h=this,g=new mr;g.catch(function(){});var v=new it(2,7,7001);return this.promise.then(o(!0),o(!1)),new Fi(g,function(){return c()})};function ib(e,i,o){try{var c=e(i);return c&&c.promise&&c.abort?(o.resolve(c.promise),function(){return c.abort()}):(o.resolve(c),function(){return Promise.resolve(c).then(function(){},function(){})})}catch(h){return o.reject(h),function(){return Promise.resolve()}}}_.Object.defineProperties(Fi.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return this.g!==null}}}),_e("shaka.util.AbortableOperation",Fi),Fi.prototype.chain=Fi.prototype.Ha,Fi.prototype.finally=Fi.prototype.finally,Fi.all=jg,Fi.prototype.abort=Fi.prototype.abort,Fi.notAbortable=Zy,Fi.completed=od,Fi.aborted=np,Fi.failed=yc;function Jn(e,i){if(i)if(i instanceof Map)for(var o=T(i.keys()),c=o.next();!c.done;c=o.next())c=c.value,Object.defineProperty(this,c,{value:i.get(c),writable:!0,enumerable:!0});else for(o in i)Object.defineProperty(this,o,{value:i[o],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=l.performance&&l.performance.now?l.performance.now():Date.now(),this.type=e,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function e0(e){var i=new Jn(e.type),o;for(o in e)Object.defineProperty(i,o,{value:e[o],writable:!0,enumerable:!0});return i}Jn.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},Jn.prototype.stopImmediatePropagation=function(){this.g=!0},Jn.prototype.stopPropagation=function(){},_e("shaka.util.FakeEvent",Jn);var th={Oj:"abrstatuschanged",Pj:"adaptation",Qj:"audiotrackchanged",Rj:"audiotrackschanged",Sj:"boundarycrossed",Tj:"buffering",Uj:"complete",Vj:"downloadcompleted",Wj:"downloadfailed",Xj:"downloadheadersreceived",Yj:"drmsessionupdate",$j:"emsg",uk:"prft",Error:"error",ak:"expirationupdated",bk:"firstquartile",ck:"gapjumped",fk:"keystatuschanged",jk:"loaded",kk:"loading",mk:"manifestparsed",nk:"manifestupdated",pk:"mediaqualitychanged",qk:"mediasourcerecovered",Metadata:"metadata",rk:"midpoint",sk:"nospatialvideoinfo",tk:"onstatechange",vk:"ratechange",xk:"segmentappended",yk:"sessiondata",zk:"spatialvideoinfo",Ak:"stalldetected",Bk:"started",Ck:"statechanged",Dk:"streaming",Ek:"textchanged",Fk:"texttrackvisibility",Gk:"thirdquartile",Hk:"timelineregionadded",Ik:"timelineregionenter",Jk:"timelineregionexit",Kk:"trackschanged",Mk:"unloading",Ok:"variantchanged"};function xr(){this.Ea=new Sn,this.Ge=this}xr.prototype.addEventListener=function(e,i){this.Ea&&this.Ea.push(e,i)},xr.prototype.removeEventListener=function(e,i){this.Ea&&this.Ea.remove(e,i)},xr.prototype.dispatchEvent=function(e){if(!this.Ea)return!0;var i=this.Ea.get(e.type)||[],o=this.Ea.get("All");for(o&&(i=i.concat(o)),i=T(i),o=i.next();!o.done;o=i.next()){o=o.value,e.target=this.Ge,e.currentTarget=this.Ge;try{o.handleEvent?o.handleEvent(e):o.call(this,e)}catch{}if(e.g)break}return e.defaultPrevented},xr.prototype.release=function(){this.Ea=null};function Ho(){this.g=[]}function du(e,i){e.g.push(i.finally(function(){fa(e.g,i)}))}Ho.prototype.destroy=function(){for(var e=[],i=T(this.g),o=i.next();!o.done;o=i.next())o=o.value,o.promise.catch(function(){}),e.push(o.abort());return this.g=[],Promise.all(e)};function Dr(e,i,o,c,h,g,v){xr.call(this),this.i=!1,this.u=new Ho,this.g=new Set,this.h=new Set,this.m=e||null,this.l=i||null,this.C=o||null,this.F=c||null,this.G=h||null,this.I=g||null,this.H=v||null,this.A=this.B=!1,this.o=16e3,this.j=new Map}j(Dr,xr),p=Dr.prototype,p.kg=function(e){this.B=e},p.lg=function(e){this.A=e};function To(e,i,o,c){c=c===void 0?!1:c,o=o||n0;var h=sp.get(e);(!h||o>=h.priority)&&sp.set(e,{priority:o,se:i,ij:c})}function qg(e,i){for(var o=T(e.g),c=o.next();!c.done;c=o.next())i.g.add(c.value);for(e=T(e.h),o=e.next();!o.done;o=e.next())i.h.add(o.value)}p.lj=function(e){this.g.add(e)},p.Hj=function(e){this.g.delete(e)},p.$h=function(){this.g.clear()},p.mj=function(e){this.h.add(e)},p.Ij=function(e){this.h.delete(e)},p.ai=function(){this.h.clear()},p.Hg=function(){this.j.clear()};function ws(e,i,o){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:i,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:o===void 0?null:o}}p.destroy=function(){return this.i=!0,this.g.clear(),this.h.clear(),this.j.clear(),xr.prototype.release.call(this),this.u.destroy()},p.request=function(e,i,o){var c=this,h=new Hg;if(this.i){var g=Promise.reject(new it(2,7,7001));return g.catch(function(){}),new rp(g,function(){return Promise.resolve()},h)}i.method=i.method||"GET",i.headers=i.headers||{},i.retryParameters=i.retryParameters?Na(i.retryParameters):qo(),i.uris=Na(i.uris),g=ip(this,e,i,o);var v=g.Ha(function(){return nh(c,e,i,o,new Jy(i.retryParameters,!1),0,null,h)}),E=v.Ha(function(V){return t0(c,e,V,o)}),S=Date.now(),I=0;g.promise.then(function(){I=Date.now()-S},function(){});var L=0;v.promise.then(function(){L=Date.now()},function(){});var O=E.Ha(function(V){var W=Date.now()-L,pe=V.response;return pe.timeMs+=I,pe.timeMs+=W,V.Oi||!c.m||pe.fromCache||i.method=="HEAD"||e!=Go||c.m(pe.timeMs,pe.data.byteLength,ih(o)),c.H&&c.H(e,pe,o),pe},function(V){throw V&&(V.severity=2),V});return g=new rp(O.promise,function(){return O.abort()},h),du(this.u,g),g};function ip(e,i,o,c){function h(E){g=g.Ha(function(){return o.body&&(o.body=fi(o.body)),E(i,o,c)})}var g=od(void 0);e.G&&h(e.G),e=T(e.g);for(var v=e.next();!v.done;v=e.next())h(v.value);return g.Ha(void 0,function(E){throw E instanceof it&&E.code==7001?E:new it(2,1,1006,E)})}function nh(e,i,o,c,h,g,v,E){e.B&&(o.uris[g]=o.uris[g].replace("https://","http://")),e.A&&(o.uris[g]=o.uris[g].replace("http://","https://")),0<g&&e.I&&e.I(i,c,o.uris[g],o.uris[g-1]);var S=new vn(o.uris[g]),I=S.Kb,L=!1;I||(I=location.protocol,I=I.slice(0,-1),Hn(S,I),o.uris[g]=S.toString()),I=I.toLowerCase();var O=(I=sp.get(I))?I.se:null;if(!O)return yc(new it(2,1,1e3,S));var V=I.ij;(S=e.j.get(S.nb))&&(o.headers["common-access-token"]=S);var W=null,pe=null,Me=!1,De=!1,Fe;return Zy(Wd(h)).Ha(function(){if(e.i)return np();Fe=Date.now();var We=0;o.requestStartTime=Date.now();var gt=O(o.uris[g],o,i,function(ot,st,_t){W&&W.stop(),pe&&pe.da(It/1e3),e.m&&i==Go&&(We++,o.packetNumber=We,e.m(ot,st,ih(c),o),L=!0,E.g=_t)},function(ot){De=!0,o.timeToFirstByte=Date.now()-o.requestStartTime,e.l&&e.l(ot,o,i)},{minBytesForProgressEvents:e.o});if(!V)return gt;var ht=o.retryParameters.connectionTimeout;ht&&(W=new Li(function(){Me=!0,gt.abort()}),W.da(ht/1e3));var It=o.retryParameters.stallTimeout;return It&&(pe=new Li(function(){Me=!0,gt.abort()})),gt}).Ha(function(We){W&&W.stop(),pe&&pe.stop(),We.timeMs==null&&(We.timeMs=Date.now()-Fe);var gt=We.headers["common-access-token"];if(gt){var ht=new vn(We.uri);e.j.set(ht.nb,gt)}return gt={response:We,Oi:L},!De&&e.l&&e.l(We.headers,o,i),e.C&&e.C(o,We),gt},function(We){if(W&&W.stop(),pe&&pe.stop(),e.F){var gt=null,ht=0;We instanceof it&&(gt=We,We.code==1001&&(ht=We.data[1])),e.F(o,gt,ht,Me)}if(e.i)return np();if(Me&&(We=new it(1,1,1003,o.uris[g],i)),We instanceof it){if(We.code==7001)throw We;if(We.code==1010)throw v;if(We.severity==1){if(gt=new Map().set("error",We),gt=new Jn("retry",gt),gt.cancelable=!0,e.dispatchEvent(gt),gt.defaultPrevented)throw We;return g=(g+1)%o.uris.length,nh(e,i,o,c,h,g,We,E)}}throw We})}function t0(e,i,o,c){var h=od(void 0);e=T(e.h);for(var g=e.next(),v={};!g.done;v={ph:void 0},g=e.next())v.ph=g.value,h=h.Ha(function(E){return function(){var S=o.response;return S.data&&(S.data=fi(S.data)),(0,E.ph)(i,S,c)}}(v));return h.Ha(function(){return o},function(E){var S=2;if(E instanceof it){if(E.code==7001)throw E;S=E.severity}throw new it(S,1,1007,E)})}function ih(e){if(e){var i=e.segment;if(e=e.stream,i&&e&&e.fastSwitching&&i.o)return!1}return!0}_e("shaka.net.NetworkingEngine",Dr),Dr.prototype.request=Dr.prototype.request,Dr.prototype.destroy=Dr.prototype.destroy,Dr.makeRequest=ws,Dr.defaultRetryParameters=function(){return qo()},Dr.prototype.clearCommonAccessTokenMap=Dr.prototype.Hg,Dr.prototype.clearAllResponseFilters=Dr.prototype.ai,Dr.prototype.unregisterResponseFilter=Dr.prototype.Ij,Dr.prototype.registerResponseFilter=Dr.prototype.mj,Dr.prototype.clearAllRequestFilters=Dr.prototype.$h,Dr.prototype.unregisterRequestFilter=Dr.prototype.Hj,Dr.prototype.registerRequestFilter=Dr.prototype.lj,Dr.unregisterScheme=function(e){sp.delete(e)},Dr.registerScheme=To,Dr.prototype.setForceHTTPS=Dr.prototype.lg,Dr.prototype.setForceHTTP=Dr.prototype.kg;function Hg(){this.g=0}Dr.NumBytesRemainingClass=Hg;function rp(e,i,o){Fi.call(this,e,i),this.h=o}j(rp,Fi),Dr.PendingRequest=rp;var Go=1;Dr.RequestType={MANIFEST:0,SEGMENT:Go,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6,ADS:7,CONTENT_STEERING:8},Dr.AdvancedRequestType={INIT_SEGMENT:0,MEDIA_SEGMENT:1,MEDIA_PLAYLIST:2,MASTER_PLAYLIST:3,MPD:4,MSS:5,MPD_PATCH:6,MEDIATAILOR_SESSION_INFO:7,MEDIATAILOR_TRACKING_INFO:8,MEDIATAILOR_STATIC_RESOURCE:9,MEDIATAILOR_TRACKING_EVENT:10,INTERSTITIAL_ASSET_LIST:11,INTERSTITIAL_AD_URL:12};var n0=3;Dr.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:n0};var sp=new Map;function ld(e){this.g=!1,this.h=new mr,this.i=e}ld.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then(function(){e.h.resolve()},function(){e.h.resolve()}))};function Lr(e,i){if(e.g)throw i instanceof it&&i.code==7003?i:new it(2,7,7003,i)}function ap(e,i){var o=[];e=T(e);for(var c=e.next();!c.done;c=e.next())o.push(i(c.value));return o}function rb(e,i){e=T(e);for(var o=e.next();!o.done;o=e.next())if(!i(o.value))return!1;return!0}function vc(e){for(var i=new Map,o=T(Object.keys(e)),c=o.next();!c.done;c=o.next())c=c.value,i.set(c,e[c]);return i}function Gg(e){var i={};return e.forEach(function(o,c){i[c]=o}),i}function Pr(e,i){this.h=Ni(e),this.i=i==i0,this.g=0}p=Pr.prototype,p.ta=function(){return this.g<this.h.byteLength},p.Ba=function(){return this.g},p.getLength=function(){return this.h.byteLength},p.X=function(){try{var e=this.h.getUint8(this.g);return this.g+=1,e}catch{throw fu()}},p.na=function(){try{var e=this.h.getUint16(this.g,this.i);return this.g+=2,e}catch{throw fu()}},p.S=function(){try{var e=this.h.getUint32(this.g,this.i);return this.g+=4,e}catch{throw fu()}},p.$f=function(){try{var e=this.h.getInt32(this.g,this.i);return this.g+=4,e}catch{throw fu()}},p.bd=function(){try{if(this.i)var e=this.h.getUint32(this.g,!0),i=this.h.getUint32(this.g+4,!0);else i=this.h.getUint32(this.g,!1),e=this.h.getUint32(this.g+4,!1)}catch{throw fu()}if(2097151<i)throw new it(2,3,3001);return this.g+=8,i*Math.pow(2,32)+e},p.Cb=function(e){if(this.g+e>this.h.byteLength)throw fu();var i=jn(this.h,this.g,e);return this.g+=e,i},p.skip=function(e){if(this.g+e>this.h.byteLength)throw fu();this.g+=e},p.qh=function(e){if(this.g<e)throw fu();this.g-=e},p.seek=function(e){if(0>e||e>this.h.byteLength)throw fu();this.g=e},p.Cc=function(){for(var e=this.g;this.ta()&&this.h.getUint8(this.g)!=0;)this.g+=1;return e=jn(this.h,e,this.g-e),this.g+=1,Er(e)};function fu(){return new it(2,3,3e3)}_e("shaka.util.DataViewReader",Pr),Pr.prototype.readTerminatedString=Pr.prototype.Cc,Pr.prototype.seek=Pr.prototype.seek,Pr.prototype.rewind=Pr.prototype.qh,Pr.prototype.skip=Pr.prototype.skip,Pr.prototype.readBytes=Pr.prototype.Cb,Pr.prototype.readUint64=Pr.prototype.bd,Pr.prototype.readInt32=Pr.prototype.$f,Pr.prototype.readUint32=Pr.prototype.S,Pr.prototype.readUint16=Pr.prototype.na,Pr.prototype.readUint8=Pr.prototype.X,Pr.prototype.getLength=Pr.prototype.getLength,Pr.prototype.getPosition=Pr.prototype.Ba,Pr.prototype.hasMoreData=Pr.prototype.ta;var i0=1;Pr.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:i0};function Ar(){this.i=new Map,this.h=new Map,this.g=!1}p=Ar.prototype,p.box=function(e,i){return e=lp(e),this.i.set(e,sb),this.h.set(e,i),this},p.R=function(e,i){return e=lp(e),this.i.set(e,Vg),this.h.set(e,i),this},p.stop=function(){this.g=!0},p.parse=function(e,i,o){for(e=new Pr(e,0),this.g=!1;e.ta()&&!this.g;)this.Yc(0,e,i,o)},p.Yc=function(e,i,o,c){var h=i.Ba();if(c&&h+8>i.getLength())this.g=!0;else{var g=i.S(),v=i.S(),E=rh(v),S=!1;switch(g){case 0:g=i.getLength()-h;break;case 1:if(c&&i.Ba()+8>i.getLength()){this.g=!0;return}g=i.bd(),S=!0}var I=this.h.get(v);if(I){var L=null,O=null;if(this.i.get(v)==Vg){if(c&&i.Ba()+4>i.getLength()){this.g=!0;return}O=i.S(),L=O>>>24,O&=16777215}v=h+g,o&&v>i.getLength()&&(v=i.getLength()),c&&v>i.getLength()?this.g=!0:(c=v-i.Ba(),i=0<c?i.Cb(c):new Uint8Array(0),i=new Pr(i,0),I({name:E,parser:this,partialOkay:o||!1,version:L,flags:O,reader:i,size:g,start:h+e,has64BitSize:S}))}else i.skip(Math.min(h+g-i.Ba(),i.getLength()-i.Ba()))}};function $i(e){for(var i=ju(e);e.reader.ta()&&!e.parser.g;)e.parser.Yc(e.start+i,e.reader,e.partialOkay)}function zu(e){for(var i=ju(e),o=e.reader.S(),c=0;c<o&&(e.parser.Yc(e.start+i,e.reader,e.partialOkay),!e.parser.g);c++);}function to(e){var i=ju(e);for(e.reader.skip(78);e.reader.ta()&&!e.parser.g;)e.parser.Yc(e.start+i,e.reader,e.partialOkay)}function op(e){var i=ju(e);e.reader.skip(8);var o=e.reader.na();for(e.reader.skip(6),o==2?e.reader.skip(48):e.reader.skip(12),o==1&&e.reader.skip(16);e.reader.ta()&&!e.parser.g;)e.parser.Yc(e.start+i,e.reader,e.partialOkay)}function Xd(e){return function(i){e(i.reader.Cb(i.reader.getLength()-i.reader.Ba()))}}function lp(e){var i=0;e=T(e);for(var o=e.next();!o.done;o=e.next())i=i<<8|o.value.charCodeAt(0);return i}function rh(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,e&255)}function ju(e){return 8+(e.has64BitSize?8:0)+(e.flags!=null?4:0)}_e("shaka.util.Mp4Parser",Ar),Ar.headerSize=ju,Ar.typeToString=rh,Ar.allData=Xd,Ar.audioSampleEntry=op,Ar.visualSampleEntry=to,Ar.sampleDescription=zu,Ar.children=$i,Ar.prototype.parseNext=Ar.prototype.Yc,Ar.prototype.parse=Ar.prototype.parse,Ar.prototype.stop=Ar.prototype.stop,Ar.prototype.fullBox=Ar.prototype.R,Ar.prototype.box=Ar.prototype.box;var sb=0,Vg=1;function $g(e){var i=this;this.g=[],this.h=[],this.data=[],new Ar().box("moov",$i).box("moof",$i).R("pssh",function(o){if(!(1<o.version)){var c=jn(o.reader.h,-12,o.size);if(i.data.push(c),i.g.push(No(o.reader.Cb(16))),0<o.version){c=o.reader.S();for(var h=0;h<c;h++){var g=No(o.reader.Cb(16));i.h.push(g)}}}}).parse(e)}function up(e,i,o,c){var h=e.length,g=i.length+16+h;0<c&&(g+=4+16*o.size);var v=new Uint8Array(g),E=Ni(v),S=0;if(E.setUint32(S,g),S+=4,E.setUint32(S,1886614376),S+=4,1>c?E.setUint32(S,0):E.setUint32(S,16777216),S+=4,v.set(i,S),S+=i.length,0<c)for(E.setUint32(S,o.size),S+=4,i=T(o),o=i.next();!o.done;o=i.next())o=oa(o.value),v.set(o,S),S+=o.length;return E.setUint32(S,h),v.set(e,S+4),v}function sh(e){var i=this;this.C=e,this.j=this.A=null,this.ka=this.ea=!1,this.H=0,this.h=null,this.o=new ni,this.i=new Map,this.T=[],this.B=new Map,this.K=!1,this.m=new mr,this.g=null,this.u=function(o){o.severity==2&&i.m.reject(o),e.onError(o)},this.Z=new Map,this.fa=new Map,this.L=new Li(function(){return hu(i)}),this.O=!1,this.M=[],this.W=!1,this.I=new Li(function(){db(i)}),this.m.catch(function(){}),this.l=new ld(function(){return r0(i)}),this.$=!1,this.F=this.G=null,this.P=function(){return!1}}p=sh.prototype,p.destroy=function(){return this.l.destroy()};function r0(e){return Qe(function(i){switch(i.g){case 1:return e.o.release(),e.o=null,e.m.reject(),e.I.stop(),e.I=null,e.L.stop(),e.L=null,x(i,Zd(e),2);case 2:if(!e.j){i.s(3);break}return $e(i,4),x(i,e.j.setMediaKeys(null),6);case 6:lt(i,5);break;case 4:et(i);case 5:e.j=null;case 3:e.h=null,e.A=null,e.B=new Map,e.g=null,e.u=function(){},e.C=null,e.$=!1,e.G=null,ue(i)}})}p.configure=function(e,i){this.g=e,i&&(this.P=i),this.I&&this.I.ua(this.g.updateExpirationTime)};function Qd(e,i,o){return e.ka=!0,e.B=new Map,e.O=o,Yg(e,i,!1)}function Kg(e,i,o,c){c=c===void 0?!0:c,e.B=new Map,o=T(o);for(var h=o.next();!h.done;h=o.next())e.B.set(h.value,{initData:null,initDataType:null});for(o=T(e.g.persistentSessionsMetadata),h=o.next();!h.done;h=o.next())h=h.value,e.B.set(h.sessionId,{initData:h.initData,initDataType:h.initDataType});return e.O=0<e.B.size,Yg(e,i,c)}function s0(e,i,o,c,h,g){var v=new Map;return h={audioCapabilities:h,videoCapabilities:g,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:i},h.drmInfos=[{keySystem:i,licenseServerUri:o,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:c,serverCertificateUri:"",initData:null,keyIds:null}],v.set(i,h),l0(e,v,[])}function Yg(e,i,o){var c,h,g,v,E,S,I,L,O,V,W,pe,Me,De,Fe,We,gt,ht,It,ot;return Qe(function(st){if(st.g==1){for(m0(e.g.clearKeys,i),c=i.some(function(_t){return!!(_t.video&&_t.video.drmInfos.length||_t.audio&&_t.audio.drmInfos.length)}),!c&&o&&(h=vc(e.g.servers),fb(i,h)),g=new Set,v=T(i),E=v.next();!E.done;E=v.next())for(S=E.value,I=h0(S),L=T(I),O=L.next();!O.done;O=L.next())V=O.value,g.add(V);for(W=T(g),pe=W.next();!pe.done;pe=W.next())Me=pe.value,hb(Me,vc(e.g.servers),vc(e.g.advanced||{}),e.g.keySystemsMapping);for(De=function(_t,xt){var Ht=[];_t=T(_t);for(var Pt=_t.next();!Pt.done;Pt=_t.next()){Pt=Pt.value;var jt=Pt[xt]||e.g.advanced&&e.g.advanced[Pt.keySystem]&&e.g.advanced[Pt.keySystem][xt]||"",Gt;if((Gt=jt=="")&&(Gt=(Gt=Pt.keySystem)?!!Gt.match(/^com\.widevine\.alpha/):!1),Gt&&(xt=="audioRobustness"?jt=[e.g.defaultAudioRobustnessForWidevine]:xt=="videoRobustness"&&(jt=[e.g.defaultVideoRobustnessForWidevine])),typeof jt=="string")Ht.push(Pt);else if(Array.isArray(jt))for(jt.length===0&&(jt=[""]),jt=T(jt),Gt=jt.next();!Gt.done;Gt=jt.next()){var Yt={};Ht.push(Object.assign({},Pt,(Yt[xt]=Gt.value,Yt)))}}return Ht},Fe=new Set,We=T(i),gt=We.next();!gt.done;gt=We.next())ht=gt.value,ht.video&&!Fe.has(ht.video)&&(ht.video.drmInfos=De(ht.video.drmInfos,"videoRobustness"),ht.video.drmInfos=De(ht.video.drmInfos,"audioRobustness"),Fe.add(ht.video)),ht.audio&&!Fe.has(ht.audio)&&(ht.audio.drmInfos=De(ht.audio.drmInfos,"videoRobustness"),ht.audio.drmInfos=De(ht.audio.drmInfos,"audioRobustness"),Fe.add(ht.audio));return Fe.clear(),x(st,pt(i,e.O,e.$,e.g.preferredKeySystems),2)}return Lr(e.l),It=c||Object.keys(e.g.servers).length,It?(ot=l0(e,void 0,i),st.return(c?ot:ot.catch(function(){}))):(e.ea=!0,st.return(Promise.resolve()))})}function a0(e){var i;return Qe(function(o){switch(o.g){case 1:if(e.j.mediaKeys)return o.return();if(!e.G){o.s(2);break}return x(o,e.G,3);case 3:return Lr(e.l),o.return();case 2:return $e(o,4),e.G=e.j.setMediaKeys(e.A),x(o,e.G,6);case 6:lt(o,5);break;case 4:i=et(o),e.u(new it(2,6,6003,i.message));case 5:Lr(e.l),ue(o)}})}function ab(e,i){return Qe(function(o){if(o.g==1)return x(o,a0(e),2);Jd(e,i.initDataType,jn(i.initData)),ue(o)})}p.Lb=function(e){var i=this;return Qe(function(o){if(o.g==1)return i.j===e?o.return():i.A?(i.j=e,i.o.ma(i.j,"play",function(){for(var c=T(i.M),h=c.next();!h.done;h=c.next())cp(i,h.value);i.W=!0,i.M=[]}),i.j.remote?(i.o.D(i.j.remote,"connect",function(){return Zd(i)}),i.o.D(i.j.remote,"connecting",function(){return Zd(i)}),i.o.D(i.j.remote,"disconnect",function(){return Zd(i)})):"webkitCurrentPlaybackTargetIsWireless"in i.j&&i.o.D(i.j,"webkitcurrentplaybacktargetiswirelesschanged",function(){return Zd(i)}),i.F=i.h&&i.h.initData.find(function(c){return 0<c.initData.length})||null,i.F||i.h.keySystem!=="com.apple.fps"||i.B.size?x(o,a0(i),2):o.s(2)):(i.o.ma(e,"encrypted",function(){i.u(new it(2,6,6010))}),o.return());Wg(i).catch(function(){}),i.F||i.B.size||i.g.parseInbandPsshEnabled||i.o.D(i.j,"encrypted",function(c){return ab(i,c)}),ue(o)})};function o0(e){var i,o,c,h,g;return Qe(function(v){switch(v.g){case 1:if(!e.A||!e.h)return v.return();if(!e.h.serverCertificateUri||e.h.serverCertificate&&e.h.serverCertificate.length){v.s(2);break}return i=ws([e.h.serverCertificateUri],e.g.retryParameters),$e(v,3),o=e.C.Xb.request(5,i,{isPreload:e.P()}),x(v,o.promise,5);case 5:c=v.h,e.h.serverCertificate=jn(c.data),lt(v,4);break;case 3:throw h=et(v),new it(2,6,6017,h);case 4:if(e.l.g)return v.return();case 2:return!e.h.serverCertificate||!e.h.serverCertificate.length?v.return():($e(v,6),x(v,e.A.setServerCertificate(e.h.serverCertificate),8));case 8:lt(v,0);break;case 6:throw g=et(v),new it(2,6,6004,g.message)}})}function ob(e,i){var o,c,h;return Qe(function(g){if(g.g==1)return x(g,c0(e,i,{initData:null,initDataType:null}),2);if(g.g!=3)return o=g.h,o?(c=[],(h=e.i.get(o))&&(h.ub=new mr,c.push(h.ub)),c.push(o.remove()),x(g,Promise.all(c),3)):g.return();e.i.delete(o),ue(g)})}function Wg(e){var i,o,c,h,g;return Qe(function(v){if(v.g==1)return e.B.size?(e.B.forEach(function(E,S){c0(e,S,E)}),x(v,e.m,3)):v.s(2);if(v.g!=2){if(i=e.h&&e.h.keyIds||new Set([]),0<i.size&&p0(e))return v.return(e.m);e.K=!1,e.m=new mr,e.m.catch(function(){})}for(o=(e.h?e.h.initData:[])||[],c=T(o),h=c.next();!h.done;h=c.next())g=h.value,Jd(e,g.initDataType,g.initData);return oh(e)&&e.m.resolve(),v.return(e.m)})}function Jd(e,i,o){if(o.length){if(e.g.ignoreDuplicateInitData){var c=e.i.values();c=T(c);for(var h=c.next();!h.done;h=c.next())if(Nn(o,h.value.initData))return;var g=!1;if(e.B.forEach(function(v){!g&&Nn(o,v.initData)&&(g=!0)}),g)return}e.K=!0,0<e.i.size&&oh(e)&&(e.m.resolve(),e.K=!1,e.m=new mr,e.m.catch(function(){})),ub(e,i,o,e.h.sessionType)}}function Xg(e){return e=e.i.keys(),e=ap(e,function(i){return i.sessionId}),Array.from(e)}p.Gf=function(){var e=this,i=this.i.keys();return i=ap(i,function(o){var c=e.i.get(o);return{sessionId:o.sessionId,sessionType:c.type,initData:c.initData,initDataType:c.initDataType}}),Array.from(i)},p.pd=function(){var e=1/0,i=this.i.keys();i=T(i);for(var o=i.next();!o.done;o=i.next())o=o.value,isNaN(o.expiration)||(e=Math.min(e,o.expiration));return e},p.Yd=function(){return Gg(this.fa)};function l0(e,i,o){var c,h,g,v,E,S,I,L;return Qe(function(O){switch(O.g){case 1:if(c=new Map,o.length){h=u0(e,o,c),O.s(2);break}return x(O,lb(e,i),3);case 3:h=O.h;case 2:if(g=h,!g)throw navigator.requestMediaKeySystemAccess?new it(2,6,6001):new it(2,6,6020);if(Lr(e.l),$e(O,4),g.getConfiguration(),v=e.g.keySystemsMapping[g.keySystem]||g.keySystem,o.length){var V=v,W=c.get(v),pe=[],Me=[],De=[],Fe=[],We=[],gt=new Set,ht=new Set;g0(W,pe,Me,Fe,De,We,gt,ht);var It=e.O?"persistent-license":"temporary";for(V={keySystem:V,encryptionScheme:pe[0],licenseServerUri:Me[0],distinctiveIdentifierRequired:W[0].distinctiveIdentifierRequired,persistentStateRequired:W[0].persistentStateRequired,sessionType:W[0].sessionType||It,audioRobustness:W[0].audioRobustness||"",videoRobustness:W[0].videoRobustness||"",serverCertificate:Fe[0],serverCertificateUri:De[0],initData:We,keyIds:gt},0<ht.size&&(V.keySystemUris=ht),W=T(W),ht=W.next();!ht.done;ht=W.next())ht=ht.value,ht.distinctiveIdentifierRequired&&(V.distinctiveIdentifierRequired=ht.distinctiveIdentifierRequired),ht.persistentStateRequired&&(V.persistentStateRequired=ht.persistentStateRequired);W=V}else W=v,ht=i.get(v),V=[],pe=[],Me=[],De=[],Fe=[],We=new Set,g0(ht.drmInfos,V,pe,De,Me,Fe,We),W={keySystem:W,encryptionScheme:V[0],licenseServerUri:pe[0],distinctiveIdentifierRequired:ht.distinctiveIdentifier=="required",persistentStateRequired:ht.persistentState=="required",sessionType:ht.sessionTypes[0]||"temporary",audioRobustness:(ht.audioCapabilities?ht.audioCapabilities[0].robustness:"")||"",videoRobustness:(ht.videoCapabilities?ht.videoCapabilities[0].robustness:"")||"",serverCertificate:De[0],serverCertificateUri:Me[0],initData:Fe,keyIds:We};if(e.h=W,!e.h.licenseServerUri)throw new it(2,6,6012,e.h.keySystem);return x(O,g.createMediaKeys(),6);case 6:if(E=O.h,Lr(e.l),e.A=E,!(e.g.minHdcpVersion!=""&&"getStatusForPolicy"in e.A)){O.s(7);break}return $e(O,8),x(O,e.A.getStatusForPolicy({minHdcpVersion:e.g.minHdcpVersion}),10);case 10:if(S=O.h,S!="usable")throw new it(2,6,6018);Lr(e.l),lt(O,7,4);break;case 8:throw I=et(O,4),I instanceof it?I:new it(2,6,6019,I.message);case 7:return e.ea=!0,x(O,o0(e),11);case 11:Lr(e.l),lt(O,0);break;case 4:throw L=et(O),Lr(e.l,L),e.h=null,L instanceof it?L:new it(2,6,6002,L.message)}})}function u0(e,i,o){for(var c=T(i),h=c.next();!h.done;h=c.next()){h=T(h0(h.value));for(var g=h.next();!g.done;g=h.next())g=g.value,o.has(g.keySystem)||o.set(g.keySystem,[]),o.get(g.keySystem).push(g)}if(o.size==1&&o.has(""))throw new it(2,6,6e3);c=e.g.preferredKeySystems,c.length||(h=vc(e.g.servers),h.size==1&&(c=Array.from(h.keys()))),h=T(c);var v=h.next();for(g={};!v.done;g={nh:void 0},v=h.next()){g.nh=v.value,v=T(i);for(var E=v.next();!E.done;E=v.next())if(E=E.value.decodingInfos.find(function(O){return function(V){return V.supported&&V.keySystemAccess!=null&&V.keySystemAccess.keySystem==O.nh}}(g)))return E.keySystemAccess}for(h=T([!0,!1]),g=h.next();!g.done;g=h.next())for(g=g.value,v=T(i),E=v.next();!E.done;E=v.next()){E=T(E.value.decodingInfos);for(var S=E.next();!S.done;S=E.next())if(S=S.value,S.supported&&S.keySystemAccess){var I=S.keySystemAccess.keySystem;if(!c.includes(I)){var L=o.get(I);for(!L&&e.g.keySystemsMapping[I]&&(L=o.get(e.g.keySystemsMapping[I])),I=T(L),L=I.next();!L.done;L=I.next())if(!!L.value.licenseServerUri==g)return S.keySystemAccess}}}return null}function lb(e,i){var o,c,h,g,v,E,S,I,L,O,V,W,pe,Me,De,Fe;return Qe(function(We){switch(We.g){case 1:if(i.size==1&&i.has(""))throw new it(2,6,6e3);for(c=T(i.values()),h=c.next();!h.done;h=c.next())g=h.value,g.audioCapabilities.length==0&&delete g.audioCapabilities,g.videoCapabilities.length==0&&delete g.videoCapabilities;v=T(e.g.preferredKeySystems),E=v.next();case 2:if(E.done){We.s(4);break}if(S=E.value,!i.has(S)){We.s(3);break}return I=i.get(S),$e(We,6),x(We,navigator.requestMediaKeySystemAccess(S,[I]),8);case 8:return o=We.h,We.return(o);case 6:et(We);case 7:Lr(e.l);case 3:E=v.next(),We.s(2);break;case 4:L=T([!0,!1]),O=L.next();case 9:if(O.done){We.s(11);break}V=O.value,W=T(i.keys()),pe=W.next();case 12:if(pe.done){O=L.next(),We.s(9);break}if(Me=pe.value,De=i.get(Me),Fe=De.drmInfos.some(function(gt){return!!gt.licenseServerUri}),Fe!=V){We.s(13);break}return $e(We,15),x(We,navigator.requestMediaKeySystemAccess(Me,[De]),17);case 17:return o=We.h,We.return(o);case 15:et(We);case 16:Lr(e.l);case 13:pe=W.next(),We.s(12);break;case 11:return We.return(o)}})}function ah(e){oh(e)&&e.m.resolve()}function Qg(e,i){new Li(function(){i.loaded=!0,ah(e)}).da(gb)}function c0(e,i,o){var c,h,g,v,E,S,I;return Qe(function(L){switch(L.g){case 1:try{c=e.A.createSession("persistent-license")}catch(O){return h=new it(2,6,6005,O.message),e.u(h),L.return(Promise.reject(h))}return e.o.D(c,"message",function(O){e.j&&e.g.delayLicenseRequestUntilPlayed&&e.j.paused&&!e.W?e.M.push(O):cp(e,O)}),e.o.D(c,"keystatuseschange",function(O){return d0(e,O)}),g={initData:o.initData,initDataType:o.initDataType,loaded:!1,Vf:1/0,ub:null,type:"persistent-license"},e.i.set(c,g),$e(L,2),x(L,c.load(i),4);case 4:return v=L.h,Lr(e.l),v||(e.i.delete(c),E=e.g.persistentSessionOnlinePlayback?1:2,e.u(new it(E,6,6013)),g.loaded=!0),Qg(e,g),ah(e),L.return(c);case 2:S=et(L),Lr(e.l,S),e.i.delete(c),I=e.g.persistentSessionOnlinePlayback?1:2,e.u(new it(I,6,6005,S.message)),g.loaded=!0,ah(e);case 3:return L.return(Promise.resolve())}})}function ub(e,i,o,c){try{var h=e.A.createSession(c)}catch(g){e.u(new it(2,6,6005,g.message));return}e.o.D(h,"message",function(g){e.j&&e.g.delayLicenseRequestUntilPlayed&&e.j.paused&&!e.W?e.M.push(g):cp(e,g)}),e.o.D(h,"keystatuseschange",function(g){return d0(e,g)}),e.i.set(h,{initData:o,initDataType:i,loaded:!1,Vf:1/0,ub:null,type:c});try{o=e.g.initDataTransform(o,i,e.h)}catch(g){i=g,g instanceof it||(i=new it(2,6,6016,g)),e.u(i);return}e.g.logLicenseExchange&&_s(o),h.generateRequest(i,o).catch(function(g){if(!e.l.g){e.i.delete(h);var v=g.errorCode;if(v&&v.systemCode){var E=v.systemCode;0>E&&(E+=Math.pow(2,32)),E="0x"+E.toString(16)}e.u(new it(2,6,6006,g.message,g,E))}})}function cb(e){return Qe(function(i){return i.g==1?e.K?x(i,e.m,3):i.s(0):x(i,Promise.all(e.T.map(function(o){return o.promise})),0)})}function cp(e,i){var o,c,h,g,v,E,S,I,L,O,V,W,pe,Me;Qe(function(De){switch(De.g){case 1:if(o=i.target,e.g.logLicenseExchange&&_s(i.message),c=e.i.get(o),h=e.h.licenseServerUri,g=e.g.advanced[e.h.keySystem],i.messageType=="individualization-request"&&g&&g.individualizationServer&&(h=g.individualizationServer),v=ws([h],e.g.retryParameters),v.body=i.message,v.method="POST",v.licenseRequestType=i.messageType,v.sessionId=o.sessionId,v.drmInfo=e.h,c&&(v.initData=c.initData,v.initDataType=c.initDataType),g&&g.headers)for(E in g.headers)v.headers[E]=g.headers[E];if(e.h.keySystem==="org.w3.clearkey"){var Fe=v,We=e.h;try{var gt=da(Fe.body);if(gt){var ht=JSON.parse(gt);ht.type||(ht.type=We.sessionType,Fe.body=sa(JSON.stringify(ht)))}}catch{}}if(Po(e.h.keySystem))if(Fe=ra(v.body,!0,!0),Fe.includes("PlayReadyKeyMessage")){for(Fe=Cl(Fe,"PlayReadyKeyMessage"),We=pa(Fe,"HttpHeader"),We=T(We),gt=We.next();!gt.done;gt=We.next())ht=gt.value,gt=pa(ht,"name")[0],ht=pa(ht,"value")[0],v.headers[ns(gt)]=ns(ht);Fe=pa(Fe,"Challenge")[0],v.body=aa(ns(Fe))}else v.headers["Content-Type"]="text/xml; charset=utf-8";return S=Date.now(),$e(De,2),L=e.C.Xb.request(2,v,{isPreload:e.P()}),e.T.push(L),x(De,L.promise,4);case 4:I=De.h,fa(e.T,L),lt(De,3);break;case 2:return O=et(De),e.l.g||(V=new it(2,6,6007,O),e.i.size==1?(e.u(V),c&&c.ub&&c.ub.reject(V)):(c&&c.ub&&c.ub.reject(V),e.i.delete(o),oh(e)&&(e.m.resolve(),e.L.da(.1)))),De.return();case 3:return e.l.g?De.return():(e.H+=(Date.now()-S)/1e3,e.g.logLicenseExchange&&_s(I.data),$e(De,5),x(De,o.update(I.data),7));case 7:lt(De,6);break;case 5:return W=et(De),pe=new it(2,6,6008,W.message),e.u(pe),c&&c.ub&&c.ub.reject(pe),De.return();case 6:if(e.l.g)return De.return();Me=new Jn("drmsessionupdate"),e.C.onEvent(Me),c&&(c.ub&&c.ub.resolve(),Qg(e,c)),ue(De)}})}function d0(e,i){i=i.target;var o=e.i.get(i),c=!1;i.keyStatuses.forEach(function(g,v){if(typeof v=="string"){var E=v;v=g,g=E}if(Po(e.h.keySystem)&&v.byteLength==16&&(el()||Qi())){E=Ni(v);var S=E.getUint32(0,!0),I=E.getUint16(4,!0),L=E.getUint16(6,!0);E.setUint32(0,S,!1),E.setUint16(4,I,!1),E.setUint16(6,L,!1)}g!="status-pending"&&(o.loaded=!0),g=="expired"&&(c=!0),v=No(v).slice(0,32),e.Z.set(v,g)});var h=i.expiration-Date.now();(0>h||c&&1e3>h)&&o&&!o.ub&&(e.i.delete(i),f0(i)),oh(e)&&(e.m.resolve(),e.L.da(mb))}function hu(e){var i=e.Z,o=e.fa;o.clear(),i.forEach(function(c,h){return o.set(h,c)}),i=Array.from(o.values()),i.length&&i.every(function(c){return c=="expired"})&&e.u(new it(2,6,6014)),e.C.pe(Gg(o))}function Jg(){var e,i,o,c,h,g,v,E,S,I,L,O,V,W,pe,Me,De,Fe,We,gt,ht,It,ot,st,_t,xt,Ht,Pt,jt,Gt,Yt,Zt,Xt,En;return Qe(function(Wn){if(Wn.g==1){if(e="org.w3.clearkey com.widevine.alpha com.widevine.alpha.experiment com.microsoft.playready com.microsoft.playready.hardware com.microsoft.playready.recommendation com.chromecast.playready com.apple.fps.1_0 com.apple.fps com.huawei.wiseplay".split(" "),!(l.MediaKeys&&l.navigator&&l.navigator.requestMediaKeySystemAccess&&l.MediaKeySystemAccess&&l.MediaKeySystemAccess.prototype.getConfiguration)){for(i={},o=T(e),c=o.next();!c.done;c=o.next())h=c.value,i[h]=null;return Wn.return(i)}for(g="1.0 1.1 1.2 1.3 1.4 2.0 2.1 2.2 2.3".split(" "),v=["SW_SECURE_CRYPTO","SW_SECURE_DECODE","HW_SECURE_CRYPTO","HW_SECURE_DECODE","HW_SECURE_ALL"],E=["150","2000","3000"],S={"com.widevine.alpha":v,"com.widevine.alpha.experiment":v,"com.microsoft.playready.recommendation":E},I=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],L=[{contentType:'audio/mp4; codecs="mp4a.40.2"'},{contentType:'audio/webm; codecs="opus"'}],O={videoCapabilities:I,audioCapabilities:L,initDataTypes:["cenc","sinf","skd","keyids"]},V=[null,"cenc","cbcs","cbcs-1-9"],W=new Map,pe=function(Di,yi){var yr,Ji,Vi,Wi,fr,ji,nr,Pi,qi,Or,Vs,Jr,ss;return Qe(function(Ps){switch(Ps.g){case 1:return $e(Ps,2),x(Ps,yi.createMediaKeys(),5);case 5:yr=Ps.h;case 4:lt(Ps,3);break;case 2:return et(Ps),Ps.return();case 3:if(Vi=(Ji=yi.getConfiguration().sessionTypes)?Ji.includes("persistent-license"):!1,ii()&&(Vi=!1),Wi=yi.getConfiguration().videoCapabilities,fr=yi.getConfiguration().audioCapabilities,ji={persistentState:Vi,encryptionSchemes:[],videoRobustnessLevels:[],audioRobustnessLevels:[],minHdcpVersions:[]},W.has(Di)&&W.get(Di)?ji=W.get(Di):W.set(Di,ji),(nr=Wi[0].encryptionScheme)&&!ji.encryptionSchemes.includes(nr)&&ji.encryptionSchemes.push(nr),(Pi=Wi[0].robustness)&&!ji.videoRobustnessLevels.includes(Pi)&&ji.videoRobustnessLevels.push(Pi),(qi=fr[0].robustness)&&!ji.audioRobustnessLevels.includes(qi)&&ji.audioRobustnessLevels.push(qi),"getStatusForPolicy"in yr){for(Or=[],Vs=T(g),Jr=Vs.next(),ss={};!Jr.done;ss={td:void 0},Jr=Vs.next())ss.td=Jr.value,ji.minHdcpVersions.includes(ss.td)||Or.push(yr.getStatusForPolicy({minHdcpVersion:ss.td}).then(function(ta){return function(Eh){Eh!="usable"||ji.minHdcpVersions.includes(ta.td)||ji.minHdcpVersions.push(ta.td)}}(ss)));return x(Ps,Promise.all(Or),0)}Ps.s(0)}})},Me=function(Di,yi,yr,Ji){var Vi,Wi,fr,ji,nr,Pi,qi,Or,Vs,Jr;return Qe(function(ss){switch(ss.g){case 1:for($e(ss,2),Vi=Na(O),Wi=T(Vi.videoCapabilities),fr=Wi.next();!fr.done;fr=Wi.next())ji=fr.value,ji.encryptionScheme=yi,ji.robustness=yr;for(nr=T(Vi.audioCapabilities),Pi=nr.next();!Pi.done;Pi=nr.next())qi=Pi.value,qi.encryptionScheme=yi,qi.robustness=Ji;return Or=Na(Vi),Or.persistentState="required",Or.sessionTypes=["persistent-license"],Vs=[Or,Vi],Ms()?x(ss,jo(5,navigator.requestMediaKeySystemAccess(Di,Vs)),7):x(ss,navigator.requestMediaKeySystemAccess(Di,Vs),6);case 6:Jr=ss.h,ss.s(5);break;case 7:Jr=ss.h;case 5:return x(ss,pe(Di,Jr),8);case 8:lt(ss,0);break;case 2:et(ss),ue(ss)}})},De=function(Di,yi,yr,Ji){var Vi,Wi,fr;return Qe(function(ji){switch(ji.g){case 1:return $e(ji,2),Vi={type:"media-source",video:{contentType:I[0].contentType,width:640,height:480,bitrate:1,framerate:1},audio:{contentType:L[0].contentType,channels:2,bitrate:1,samplerate:1},keySystemConfiguration:{keySystem:Di,video:{encryptionScheme:yi,robustness:yr},audio:{encryptionScheme:yi,robustness:Ji}}},Ms()?x(ji,jo(5,navigator.mediaCapabilities.decodingInfo(Vi)),7):x(ji,navigator.mediaCapabilities.decodingInfo(Vi),6);case 6:Wi=ji.h,ji.s(5);break;case 7:Wi=ji.h;case 5:return fr=Wi.keySystemAccess,x(ji,pe(Di,fr),8);case 8:lt(ji,0);break;case 2:et(ji),ue(ji)}})},Fe=T(e),We=Fe.next();!We.done;We=Fe.next())gt=We.value,W.set(gt,null);for(ht=function(Di){return!(Di==="org.w3.clearkey"&&er())},It=[],ot=T(V),st=ot.next();!st.done;st=ot.next())for(_t=st.value,xt=T(e),Ht=xt.next();!Ht.done;Ht=xt.next())Pt=Ht.value,ht(Pt)&&(It.push(Me(Pt,_t,"","")),It.push(De(Pt,_t,"","")));for(jt=T(e),Gt=jt.next();!Gt.done;Gt=jt.next())for(Yt=Gt.value,Zt=T(S[Yt]||[]),Xt=Zt.next();!Xt.done;Xt=Zt.next())En=Xt.value,ht(Yt)&&(It.push(Me(Yt,null,En,"")),It.push(Me(Yt,null,"",En)),It.push(De(Yt,null,En,"")),It.push(De(Yt,null,"",En)));return x(Wn,Promise.all(It),2)}return Wn.return(Gg(W))})}function f0(e){return Qe(function(i){if(i.g==1)return $e(i,2),x(i,jo(pb,Promise.all([e.close().catch(function(){}),e.closed])),4);if(i.g!=2)return lt(i,0);et(i),ue(i)})}function Zd(e){var i;return Qe(function(o){return i=Array.from(e.i.entries()),e.i.clear(),x(o,Promise.all(i.map(function(c){c=T(c);var h=c.next().value,g=c.next().value;return Qe(function(v){if(v.g==1)return $e(v,2),e.ka||e.B.has(h.sessionId)||g.type!=="persistent-license"||e.g.persistentSessionOnlinePlayback?x(v,f0(h),5):x(v,h.remove(),5);if(v.g!=2)return lt(v,0);et(v),ue(v)})})),0)})}function h0(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function db(e){e.i.forEach(function(i,o){var c=i.Vf,h=o.expiration;isNaN(h)&&(h=1/0),h!=c&&(e.C.onExpirationUpdated(o.sessionId,h),i.Vf=h)})}function oh(e){return e=e.i.values(),rb(e,function(i){return i.loaded})}function p0(e){for(var i=T(e.h&&e.h.keyIds||new Set([])),o=i.next();!o.done;o=i.next())if(e.Z.get(o.value)!=="usable")return!1;return!0}function fb(e,i){var o=[];for(i.forEach(function(c,h){o.push({keySystem:h,licenseServerUri:c,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}),e=T(e),i=e.next();!i.done;i=e.next())i=i.value,i.video&&(i.video.drmInfos=o),i.audio&&(i.audio.drmInfos=o)}function g0(e,i,o,c,h,g,v,E){var S=[];e=T(e);for(var I=e.next(),L={};!I.done;L={va:void 0},I=e.next()){if(L.va=I.value,i.includes(L.va.encryptionScheme)||i.push(L.va.encryptionScheme),L.va.keySystem=="org.w3.clearkey"&&L.va.licenseServerUri.startsWith("data:application/json;base64,")?S.includes(L.va.licenseServerUri)||S.push(L.va.licenseServerUri):o.includes(L.va.licenseServerUri)||o.push(L.va.licenseServerUri),h.includes(L.va.serverCertificateUri)||h.push(L.va.serverCertificateUri),L.va.serverCertificate&&(c.some(function(W){return function(pe){return Nn(pe,W.va.serverCertificate)}}(L))||c.push(L.va.serverCertificate)),L.va.initData){I=T(L.va.initData);for(var O=I.next(),V={};!O.done;V={Mf:void 0},O=I.next())V.Mf=O.value,g.some(function(W){return function(pe){var Me=W.Mf;return pe.keyId&&pe.keyId==Me.keyId?!0:pe.initDataType==Me.initDataType&&Nn(pe.initData,Me.initData)}}(V))||g.push(V.Mf)}if(L.va.keyIds)for(I=T(L.va.keyIds),O=I.next();!O.done;O=I.next())v.add(O.value);if(L.va.keySystemUris&&E)for(L=T(L.va.keySystemUris),I=L.next();!I.done;I=L.next())E.add(I.value)}if(S.length==1)o.push(S[0]);else if(0<S.length){for(i=[],S=T(S),c=S.next();!c.done;c=S.next())c=l.atob(c.value.split("data:application/json;base64,").pop()),c=JSON.parse(c),i.push.apply(i,k(c.keys));S=JSON.stringify({keys:i}),o.push("data:application/json;base64,"+l.btoa(S))}}function hb(e,i,o,c){var h=e.keySystem;h&&(h!="org.w3.clearkey"||!e.licenseServerUri)&&(i.size&&i.get(h)&&(i=i.get(h),e.licenseServerUri=i),e.keyIds||(e.keyIds=new Set),(o=o.get(h))&&(e.distinctiveIdentifierRequired||(e.distinctiveIdentifierRequired=o.distinctiveIdentifierRequired),e.persistentStateRequired||(e.persistentStateRequired=o.persistentStateRequired),e.serverCertificate||(e.serverCertificate=o.serverCertificate),o.sessionType&&(e.sessionType=o.sessionType),e.serverCertificateUri||(e.serverCertificateUri=o.serverCertificateUri)),c[h]&&(e.keySystem=c[h]),l.cast&&l.cast.__platform__&&h=="com.microsoft.playready"&&(e.keySystem="com.chromecast.playready"))}function m0(e,i){if(e=vc(e),e.size!=0){e=$c(e),i=T(i);for(var o=i.next();!o.done;o=i.next())o=o.value,o.video&&(o.video.drmInfos=[e]),o.audio&&(o.audio.drmInfos=[e])}}var pb=1,gb=5,mb=.5;function dp(e,i,o){for(o=o===void 0?!0:o,this.h=e,this.g=new Set([e]),i=i||[],e=T(i),i=e.next();!i.done;i=e.next())this.add(i.value,o)}dp.prototype.add=function(e,i){var o=this.h;i=i===void 0?!0:i;var c;if(!(c=!!o.audio!=!!e.audio||!!o.video!=!!e.video||o.language!=e.language)&&(c=o.audio&&e.audio)){c=o.audio;var h=e.audio;c=!(!((!c.channelsCount||!h.channelsCount||2<c.channelsCount||2<h.channelsCount)&&c.channelsCount!=h.channelsCount||c.spatialAudio!==h.spatialAudio||i&&!y0(c,h))&&v0(c.roles,h.roles)&&c.groupId===h.groupId)}return!c&&(c=o.video&&e.video)&&(o=o.video,c=e.video,c=!((!i||y0(o,c))&&v0(o.roles,c.roles))),c?!1:(this.g.add(e),!0)},dp.prototype.values=function(){return this.g.values()};function y0(e,i){if(e.mimeType!=i.mimeType||(e=e.codecs.split(",").map(function(c){return yo(c)}),i=i.codecs.split(",").map(function(c){return yo(c)}),e.length!=i.length))return!1;e.sort(),i.sort();for(var o=0;o<e.length;o++)if(e[o]!=i[o])return!1;return!0}function v0(e,i){if(e=new Set(e),i=new Set(i),e.delete("main"),i.delete("main"),e.size!=i.size)return!1;e=T(e);for(var o=e.next();!o.done;o=e.next())if(!i.has(o.value))return!1;return!0}_e("shaka.media.AdaptationSet",dp),_e("shaka.config.CodecSwitchingStrategy",{RELOAD:"reload",SMOOTH:"smooth"});function Zg(){}Zg.prototype.create=function(){},Zg.prototype.configure=function(){},_e("shaka.media.AdaptationSetCriteria",Zg);function yb(){this.g=tf,this.i=new Map().set(tf,2).set(ef,1),this.h=0}var ef=0,tf=1;/*
 @license
 Shaka Player
 Copyright 2023 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function em(e,i,o){this.g=e,this.i=i,this.h=o}function tm(e,i){return Qe(function(o){if(o.g==1)return x(o,H(e.h,i,e.g.drm.preferredKeySystems,e.g.drm.keySystemsMapping),2);if(e.g.streaming.dontChooseCodecs||Zh(i,e.g.preferredVideoCodecs,e.g.preferredAudioCodecs,e.g.preferredDecodingAttributes,e.g.preferredTextFormats),!i.variants.some(Fl))throw new it(2,4,4032);return o.return(nm(e,i))})}function T0(e,i){var o=e.g.restrictions;e=e.i;var c=!1;i=T(i.variants);for(var h=i.next();!h.done;h=i.next()){h=h.value;var g=h.allowedByApplication;h.allowedByApplication=N(h,o,e),g!=h.allowedByApplication&&(c=!0)}return c}function nm(e,i){var o=T0(e,i);if(i){var c=e.h?e.h.h:null;if(c&&e.h.A)for(var h=T(i.variants),g=h.next();!g.done;g=h.next())g=g.value,Vo(e,c.keySystem,g.video),Vo(e,c.keySystem,g.audio);fp(e,i)}return o}function Vo(e,i,o){if(o){o=T(o.drmInfos);for(var c=o.next();!c.done;c=o.next())if(c=c.value,c.keySystem==i){c=T(c.initData||[]);for(var h=c.next();!h.done;h=c.next())h=h.value,Jd(e.h,h.initDataType,h.initData)}}}function fp(e,i){e=e.h?e.h.Yd():{};var o=Object.keys(e);o=o.length&&o[0]=="00";var c=!1,h=!1,g=new Set,v=new Set;i=T(i.variants);for(var E=i.next();!E.done;E=i.next()){E=E.value;var S=[];E.audio&&S.push(E.audio),E.video&&S.push(E.video),S=T(S);for(var I=S.next();!I.done;I=S.next())if(I=I.value,I.keyIds.size){I=T(I.keyIds);for(var L=I.next();!L.done;L=I.next()){L=L.value;var O=e[o?"00":L];O?ud.includes(O)&&v.add(O):g.add(L)}}E.allowedByApplication?E.allowedByKeySystem&&(c=!0):h=!0}if(!c)throw e={hasAppRestrictions:h,missingKeys:Array.from(g),restrictedKeyStatuses:Array.from(v)},new it(2,4,4012,e)}var ud=["output-restricted","internal-error"];function Tc(){}function qu(e,i){nf.set(e,i)}function vb(){var e={};if(Ya())for(var i=T(nf.keys()),o=i.next();!o.done;o=i.next())e[o.value]=!0;for(i=T(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"]),o=i.next();!o.done;o=i.next())o=o.value,e[o]=Ya()?nf.has(o):nu(o);return e}function E0(e,i){if(i){var o=nf.get(i.toLowerCase());if(o)return o}throw new it(2,4,4e3,e,i)}_e("shaka.media.ManifestParser",Tc),Tc.unregisterParserByMime=function(e){nf.delete(e)},Tc.registerParserByMime=qu,Tc.registerParserByExtension=function(){dn("ManifestParser.registerParserByExtension","Please use an ManifestParser with registerParserByMime function.")},Tc.AccessibilityPurpose={Nk:"visually impaired",dk:"hard of hearing"};var nf=new Map;function $o(e,i){var o=null,c=null,h=null,g=null,v=e.S();return i&1&&(h=e.bd()),i&2&&(g=e.S()),i&8&&(o=e.S()),i&16&&(c=e.S()),{trackId:v,ld:o,md:c,Wh:h,rh:g}}function rf(e,i){return i==1?(i=e.S(),e=e.S(),{baseMediaDecodeTime:i*Math.pow(2,32)+e}):{baseMediaDecodeTime:e.S()}}function hp(e,i){return i==1?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),i=e.S(),e.skip(4),e=e.na(),{timescale:i,language:String.fromCharCode((e>>10)+96)+String.fromCharCode(((e&960)>>5)+96)+String.fromCharCode((e&31)+96)}}function pp(e,i,o){var c=e.S(),h=[],g=null;o&1&&(g=e.$f()),o&4&&e.skip(4);for(var v=0;v<c;v++){var E={gg:null,sampleSize:null,ye:null};o&256&&(E.gg=e.S()),o&512&&(E.sampleSize=e.S()),o&1024&&e.skip(4),o&2048&&(E.ye=i==0?e.S():e.$f()),h.push(E)}return{Sk:c,fg:h,nf:g}}function im(e){e.skip(6),e.skip(2),e.skip(8);var i=e.na();return e.skip(2),e.skip(2),e.skip(2),e=e.na()+e.na()/65536,{channelCount:i,sampleRate:e}}function b0(e){return e=e.S(),{codec:rh(e)}}function Tb(e){var i=null,o=null,c=e.Cb(4),h=String.fromCharCode(c[0]);if(h+=String.fromCharCode(c[1]),h+=String.fromCharCode(c[2]),h+=String.fromCharCode(c[3]),h==="nclx"){switch(e.na()){case 1:case 5:case 6:case 7:i="srgb";break;case 9:i="rec2020";break;case 11:case 12:i="p3"}switch(c=e.na(),e.na(),c){case 1:case 6:case 13:case 14:case 15:o="SDR";break;case 16:o="PQ";break;case 18:o="HLG"}}return{colorGamut:i,Nd:o}}function lh(e,i){return i=i===void 0?!1:i,e=e.toString(16).toUpperCase(),i?e:("0"+e).slice(-2)}function no(e){return(10>e?"0":"")+e}function cd(e){if(!am){am=!0;var i=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),c=new Uint8Array([0,0,0,1]);mp=tr("ftyp",i,c,i,o),i=tr("dref",D),C=tr("dinf",i)}this.g=e}function sf(e){for(var i=[],o=T(e.g),c=o.next();!c.done;c=o.next()){var h=i,g=h.push,v=c.value;c=tr;var E=v.id+1,S=v.stream.width||0,I=v.stream.height||0;v.type=="audio"&&(I=S=0);var L=v.duration*v.timescale,O=Math.floor(L/(Ec+1));switch(L=Math.floor(L%(Ec+1)),E=new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(k(Hr(E,4)),[0,0,0,0],k(Hr(O,4)),k(Hr(L,4)),[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0],k(Hr(S,2)),[0,0],k(Hr(I,2)),[0,0])),E=tr("tkhd",E),S=tr,O=v.duration*v.timescale,I=Math.floor(O/(Ec+1)),O=Math.floor(O%(Ec+1)),L=v.stream.language,L=L.charCodeAt(0)-96<<10|L.charCodeAt(1)-96<<5|L.charCodeAt(2)-96,I=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(k(Hr(v.timescale,4)),k(Hr(I,4)),k(Hr(O,4)),k(Hr(L,2)),[0,0])),I=tr("mdhd",I),O=v,L=new Uint8Array([]),O.type){case"video":L=bb;break;case"audio":L=x0}O=tr("hdlr",L);e:{switch(v.type){case"video":v=tr("minf",tr("vmhd",xb),C,rm(v));break e;case"audio":v=tr("minf",tr("smhd",lm),C,rm(v));break e}v=new Uint8Array([])}v=S("mdia",I,O,v),c=c("trak",E,v),g.call(h,c)}for(i=qr.apply(Wr,k(i)),g=e.g[0],o=tr,c=g.duration*g.timescale,h=Math.floor(c/(Ec+1)),c=Math.floor(c%(Ec+1)),h=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(k(Hr(g.timescale,4)),k(Hr(h,4)),k(Hr(c,4)),[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255])),h=tr("mvhd",h),c=[],e=T(e.g),S=e.next();!S.done;S=e.next())v=c,E=v.push,S=new Uint8Array([0,0,0,0].concat(k(Hr(S.value.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),S=tr("trex",S),E.call(v,S);if(e=qr.apply(Wr,k(c)),e=tr("mvex",e),c=[],g.encrypted){for(g=T(g.stream.drmInfos),v=g.next();!v.done;v=g.next())if(v=v.value,v.initData)for(v=T(v.initData),E=v.next();!E.done;E=v.next())c.push(E.value.initData);g=qr.apply(Wr,k(c))}else g=new Uint8Array([]);return e=o("moov",h,i,e,g),i=new Uint8Array(mp.byteLength+e.byteLength),i.set(mp),i.set(e,mp.byteLength),i}function rm(e){var i=tr,o="aac";e.codecs.includes("mp3")?o="mp3":e.codecs.includes("ac-3")?o=ii()?"ec-3":"ac-3":e.codecs.includes("ec-3")?o="ec-3":e.codecs.includes("opus")&&(o="opus");var c=new Uint8Array([]);switch(e.type){case"video":if(e.codecs.includes("avc1")){if(o=e.stream.width||0,c=e.stream.height||0,0<e.Ca.byteLength)var h=tr("avcC",e.Ca);else{h=tr;for(var g=7,v=[],E=[],S=0,I=0,L=0,O=0;O<e.lb.length;O++){var V=S0(e.lb[O]);switch(V[0]&31){case 7:v.push(V),g+=V.length+2;break;case 8:E.push(V),g+=V.length+2}}for(0<v.length&&(S=v[0][1],L=v[0][2],I=v[0][3]),g=new Uint8Array(g),O=0,g[O++]=1,g[O++]=S,g[O++]=L,g[O++]=I,g[O++]=255,g[O++]=224|v.length,S=0;S<v.length;S++)g[O++]=(v[S].length&65280)>>8,g[O++]=v[S].length&255,g.set(v[S],O),O+=v[S].length;for(g[O++]=E.length,v=0;v<E.length;v++)g[O++]=(E[v].length&65280)>>8,g[O++]=E[v].length&255,g.set(E[v],O),O+=E[v].length;h=h("avcC",g)}o=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(k(Hr(o,2)),k(Hr(c,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),c="avc1",E=_0(e),v=new Uint8Array([]),e.encrypted&&(v=fd(0,e.stream,e.codecs),c="encv"),c=tr(c,o,h,E,v)}else e.codecs.includes("hvc1")&&(c=e.stream.width||0,h=e.stream.height||0,o=new Uint8Array([]),0<e.Ca.byteLength&&(o=tr("hvcC",e.Ca)),c=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(k(Hr(c,2)),k(Hr(h,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),h="hvc1",E=_0(e),v=new Uint8Array([]),e.encrypted&&(v=fd(0,e.stream,e.codecs),h="encv"),c=tr(h,c,o,E,v));break;case"audio":o=="mp3"?e=tr(".mp3",dd(e)):o=="ac-3"?(o=tr("dac3",e.ra),c="ac-3",h=new Uint8Array([]),e.encrypted&&(h=fd(0,e.stream,e.codecs),c="enca"),e=tr(c,dd(e),o,h)):o=="ec-3"?(o=tr("dec3",e.ra),c="ec-3",h=new Uint8Array([]),e.encrypted&&(h=fd(0,e.stream,e.codecs),c="enca"),e=tr(c,dd(e),o,h)):o=="opus"?(o=tr("dOps",e.ra),c="Opus",h=new Uint8Array([]),e.encrypted&&(h=fd(0,e.stream,e.codecs),c="enca"),e=tr(c,dd(e),o,h)):(0<e.ra.byteLength?o=tr("esds",e.ra):(o=tr,c=e.id+1,h=e.stream.channelsCount||2,v=e.stream.audioSamplingRate||44100,S=wu("audio",e.codecs.split(",")),I={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},E=I[v],(S==="mp4a.40.5"||S==="mp4a.40.29")&&(E=I[2*v]),v=parseInt(S.split(".").pop(),10),c=new Uint8Array([0,0,0,0,3,25].concat(k(Hr(c,2)),[0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,v<<3|E>>>1,E<<7|h<<3,6,1,2])),o=o("esds",c)),c="mp4a",h=new Uint8Array([]),e.encrypted&&(h=fd(0,e.stream,e.codecs),c="enca"),e=tr(c,dd(e),o,h)),c=e}return e=tr("stsd",gp,c),i("stbl",e,tr("stts",_b),tr("stsc",A0),tr("stsz",w0),tr("stco",Sb))}function _0(e){if(!e.Ia&&!e.Ka)return new Uint8Array([]);var i=e.Ka;return e=new Uint8Array([].concat(k(Hr(e.Ia,4)),k(Hr(i,4)))),tr("pasp",e)}function dd(e){return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.stream.channelsCount||2,0,16,0,0,0,0].concat(k(Hr(e.stream.audioSamplingRate||44100,2)),[0,0]))}function fd(e,i,o){e=tr,o=new Uint8Array([].concat(k(Hr(sm(o.split(".")[0]),4)))),o=tr("frma",o);var c="cenc",h=i.drmInfos[0];h&&h.encryptionScheme&&(c=h.encryptionScheme),c=new Uint8Array([0,0,0,0].concat(k(Hr(sm(c),4)),[0,1,0,0])),c=tr("schm",c),h=tr;var g=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);i=T(i.drmInfos);for(var v=i.next();!v.done;v=i.next())if((v=v.value)&&v.keyIds&&v.keyIds.size){v=T(v.keyIds);for(var E=v.next();!E.done;E=v.next())g=S0(E.value)}return i=new Uint8Array([0,0,0,0,0,0,1,8]),i=tr("tenc",i,g),e("sinf",o,c,h("schi",i))}function af(e){var i=[];e=T(e.g);for(var o=e.next();!o.done;o=e.next()){o=o.value;var c=i.push,h=c.apply,g=tr,v=new Uint8Array([0,0,0,0].concat(k(Hr(o.data?o.data.Db:0,4))));v=tr("mfhd",v);var E,S=o.data?o.data.jb:[],I=new Uint8Array(4+S.length);for(E=0;E<S.length;E++){var L=S[E].flags;I[E+4]=L.Ya<<4|L.$a<<2|L.Za}S=tr("sdtp",I);var O=S.length+92;I=tr,E=new Uint8Array([0,0,0,58].concat(k(Hr(o.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),E=tr("tfhd",E),L=o.data?o.data.baseMediaDecodeTime:0;var V=Math.floor(L%(Ec+1));L=new Uint8Array([1,0,0,0].concat(k(Hr(Math.floor(L/(Ec+1)),4)),k(Hr(V,4)))),L=tr("tfdt",L);var W=O;O=o.data?o.data.jb:[],V=O.length;var pe=12+16*V,Me=new Uint8Array(pe);for(W+=8+pe,Me.set([o.type==="video"?1:0,0,15,1].concat(k(Hr(V,4)),k(Hr(W,4))),0),W=0;W<V;W++){var De=O[W];pe=Hr(De.duration,4);var Fe=Hr(De.size,4),We=De.flags;De=Hr(De.eb,4),Me.set([].concat(k(pe),k(Fe),[We.hb<<2|We.Ya,We.$a<<6|We.Za<<4|We.ib,We.Xa&61440,We.Xa&15],k(De)),12+16*W)}O=tr("trun",Me),S=I("traf",E,L,O,S),g=g("moof",v,S),h.call(c,i,[g,Eb(o)])}return qr.apply(Wr,k(i))}function Eb(e){return e=(e.data?e.data.jb:[]).map(function(i){return i.data}),e=qr.apply(Wr,k(e)),tr("mdat",e)}function Hr(e,i){var o=[];for(--i;0<=i;i--)o.push(e>>8*i&255);return o}function S0(e){for(var i=new Uint8Array(e.length/2),o=0;o<e.length/2;o+=1)i[o]=parseInt(String(e[2*o]+e[2*o+1]),16);return i}function sm(e){for(var i=0,o=0;o<e.length;o+=1)i|=e.charCodeAt(o)<<8*(e.length-o-1);return i}function tr(e){var i=Ze.apply(1,arguments),o=om.get(e);o||(o=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)],om.set(e,o));for(var c=8,h=i.length-1;0<=h;h--)c+=i[h].byteLength;for(h=new Uint8Array(c),h[0]=c>>24&255,h[1]=c>>16&255,h[2]=c>>8&255,h[3]=c&255,h.set(o,4),o=0,c=8;o<i.length;o++)h.set(i[o],c),c+=i[o].byteLength;return h}var am=!1,Ec=Math.pow(2,32)-1,om=new Map,bb=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),x0=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),_b=new Uint8Array([0,0,0,0,0,0,0,0]),A0=new Uint8Array([0,0,0,0,0,0,0,0]),Sb=new Uint8Array([0,0,0,0,0,0,0,0]),w0=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),xb=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),lm=new Uint8Array([0,0,0,0,0,0,0,0]),gp=new Uint8Array([0,0,0,0,0,0,0,1]),mp=new Uint8Array([]),D=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),C=new Uint8Array([]);function R(e,i,o){function c(W){O.push({box:W,hh:1701733217})}function h(W){O.push({box:W,hh:1701733238})}function g(W){S=!0,W.parser.stop()}function v(W){L.push(W),$i(W)}var E=i=jn(i),S=!1,I,L=[],O=[];if(new Ar().box("moov",v).box("trak",v).box("mdia",v).box("minf",v).box("stbl",v).R("stsd",function(W){I=W,L.push(W),zu(W)}).R("encv",g).R("enca",g).R("dvav",h).R("dva1",h).R("dvh1",h).R("dvhe",h).R("dvc1",h).R("dvi1",h).R("hev1",h).R("hvc1",h).R("avc1",h).R("avc3",h).R("ac-3",c).R("ec-3",c).R("ac-4",c).R("Opus",c).R("fLaC",c).R("mp4a",c).parse(i),S)return i;if(O.length==0||!I)throw No(i),new it(2,3,3019,o);O.reverse(),o=T(O);for(var V=o.next();!V.done;V=o.next())V=V.value,E=z(e,E,I,V.box,L,V.hh);return el()&&fo()&&!ca()?(e=new Uint8Array(i.byteLength+E.byteLength),e.set(E),e.set(i,E.byteLength),e):E}function P(e){e=jn(e);var i=[];new Ar().box("mdat",function(v){i.push(v)}).parse(e);for(var o=[],c=0;c<i.length;c++){var h=i[c-1],g=i[c];o.push(F(e.subarray(h?h.start+h.size:0,g.start+g.size)))}return qr.apply(Wr,k(o))}function F(e){function i(O){v.push(O),$i(O)}var o,c,h,g,v=[];if(new Ar().box("moof",i).box("traf",i).R("tfhd",function(O){o=O,h=$o(O.reader,O.flags)}).R("trun",function(O){c=O,g=pp(O.reader,O.version,O.flags)}).parse(e),h&&h.rh!==2){var E=o.start+ju(o)+4+(h.Wh!==null?8:0),S=Ni(e);if(h.rh!==null)S.setUint32(E,2);else{Q(e,o.start,o.size+4);var I=S.getUint32(o.start+8);S.setUint32(o.start+8,I|2),g&&g.nf!==null&&S.setInt32(c.start+ju(c)+4,g.nf+4),I=e.subarray(0,E),S=e.subarray(E),e=new Uint8Array(e.byteLength+4),e.set(I),I=[];for(var L=3;0<=L;L--)I.push(2>>8*L&255);for(e.set(new Uint8Array(I),E),e.set(S,E+4),E=T(v),S=E.next();!S.done;S=E.next())S=S.value,Q(e,S.start,S.size+4)}}return e}function z(e,i,o,c,h,g){var v=fd(new cd([]),e,c.name),E=i.subarray(c.start,c.start+c.size);for(e=new Uint8Array(c.size+v.byteLength),e.set(E,0),Ni(e).setUint32(4,g),e.set(v,c.size),Q(e,0,e.byteLength),g=new Uint8Array(i.byteLength+e.byteLength),c=er()||ca()||el()?c.start:c.start+c.size,v=i.subarray(c),g.set(i.subarray(0,c)),g.set(e,c),g.set(v,c+e.byteLength),i=T(h),h=i.next();!h.done;h=i.next())h=h.value,Q(g,h.start,h.size+e.byteLength);return e=Ni(g,o.start),o=ju(o),i=e.getUint32(o),e.setUint32(o,i+1),g}function Q(e,i,o){e=Ni(e,i),i=e.getUint32(0),i!=0&&(i==1?(e.setUint32(8,o>>32),e.setUint32(12,o&4294967295)):e.setUint32(0,o))}function ne(e){function i(h){c.push({start:h.start,size:h.size}),$i(h)}var o=jn(e),c=[];return new Ar().box("moov",i).box("trak",i).box("mdia",i).box("minf",i).box("stbl",i).box("stsd",function(h){c.push({start:h.start,size:h.size});for(var g=Ni(o,h.start),v=0;v<h.size-3;v++){var E=g.getUint32(v);E==1633889587?g.setUint32(v,1700998451):E==1684103987&&g.setUint32(v,1684366131)}}).parse(o),o}function B(e,i,o,c,h,g,v,E){this.N=e,this.Sa=i,this.wa=o,this.Wc=c===void 0?null:c,this.timescale=h===void 0?null:h,this.h=g===void 0?null:g,this.aesKey=v===void 0?null:v,this.g=this.mimeType=this.codecs=null,this.encrypted=E===void 0?!1:E}B.prototype.uc=function(){return this.Sa},B.prototype.tc=function(){return this.wa},B.prototype.Kd=function(e){this.h=e},B.prototype.Ib=function(){return this.h};function oe(e,i){return e===i?!0:e&&i?e.uc()==i.uc()&&e.tc()==i.tc()&&rc(e.N().sort(),i.N().sort())&&Nn(e.Ib(),i.Ib()):e==i}_e("shaka.media.InitSegmentReference",B),B.prototype.getEndByte=B.prototype.tc,B.prototype.getStartByte=B.prototype.uc;function X(e,i,o,c,h,g,v,E,S,I,L,O,V,W,pe,Me){for(I=I===void 0?[]:I,W=W===void 0?$:W,this.startTime=e,this.j=this.endTime=i,this.C=o,this.Sa=c,this.wa=h,this.Y=g,this.timestampOffset=v,this.appendWindowStart=E,this.appendWindowEnd=S,this.g=I,this.tilesLayout=L===void 0?"":L,this.B=O===void 0?null:O,this.h=V===void 0?null:V,this.status=W,this.preload=!1,this.l=!0,this.m=!1,this.aesKey=pe===void 0?null:pe,this.thumbnailSprite=null,this.i=-1,this.A=Me===void 0?!1:Me,this.F=this.o=!1,e=T(this.g),i=e.next();!i.done;i=e.next())i.value.fh();this.A&&this.g.length&&this.g[this.g.length-1].eh(),this.u=this.bandwidth=this.mimeType=this.codecs=null,this.G=!1}p=X.prototype,p.N=function(){return this.C()},p.getStartTime=function(){return this.startTime},p.mi=function(){return this.endTime},p.uc=function(){return this.Sa},p.tc=function(){return this.wa},p.Ji=function(){return this.tilesLayout},p.Ii=function(){return this.B},p.dc=function(){return this.status},p.aj=function(){this.status=re},p.Sf=function(){this.preload=!0},p.isPreload=function(){return this.preload},p.Vc=function(){this.l=!1},p.Ti=function(){return this.l},p.fh=function(){this.o=!0},p.Vi=function(){return this.o},p.eh=function(){this.F=!0},p.Ui=function(){return this.F},p.dh=function(){this.m=!0},p.Pi=function(){return this.m},p.De=function(e){this.thumbnailSprite=e},p.Gi=function(){return this.thumbnailSprite},p.offset=function(e){this.startTime+=e,this.endTime+=e,this.j+=e;for(var i=T(this.g),o=i.next();!o.done;o=i.next())o=o.value,o.startTime+=e,o.endTime+=e,o.j+=e},p.qg=function(e){this.h==null?Mt("Sync attempted without sync time!"):(e=this.h-e-this.startTime,.001<=Math.abs(e)&&this.offset(e))},p.Kd=function(e,i){this.u=e,this.G=i===void 0?!1:i},p.Ib=function(e){var i=this.u;return(e===void 0||e)&&this.G&&(this.u=null),i};function q(e,i){e.Y=i,e=T(e.g);for(var o=e.next();!o.done;o=e.next())q(o.value,i)}_e("shaka.media.SegmentReference",X),X.prototype.getSegmentData=X.prototype.Ib,X.prototype.setSegmentData=X.prototype.Kd,X.prototype.syncAgainst=X.prototype.qg,X.prototype.offset=X.prototype.offset,X.prototype.getThumbnailSprite=X.prototype.Gi,X.prototype.setThumbnailSprite=X.prototype.De,X.prototype.hasByterangeOptimization=X.prototype.Pi,X.prototype.markAsByterangeOptimization=X.prototype.dh,X.prototype.isLastPartial=X.prototype.Ui,X.prototype.markAsLastPartial=X.prototype.eh,X.prototype.isPartial=X.prototype.Vi,X.prototype.markAsPartial=X.prototype.fh,X.prototype.isIndependent=X.prototype.Ti,X.prototype.markAsNonIndependent=X.prototype.Vc,X.prototype.isPreload=X.prototype.isPreload,X.prototype.markAsPreload=X.prototype.Sf,X.prototype.markAsUnavailable=X.prototype.aj,X.prototype.getStatus=X.prototype.dc,X.prototype.getTileDuration=X.prototype.Ii,X.prototype.getTilesLayout=X.prototype.Ji,X.prototype.getEndByte=X.prototype.tc,X.prototype.getStartByte=X.prototype.uc,X.prototype.getEndTime=X.prototype.mi,X.prototype.getStartTime=X.prototype.getStartTime,X.prototype.getUris=X.prototype.N;var $=0,re=1;X.Status={Nj:$,Lk:re,lk:2};function ve(e){return e.length==1&&1e-4>e.end(0)-e.start(0)}function Se(e){return!e||ve(e)?null:e.length?e.end(e.length-1):null}function ke(e,i){return!e||!e.length||ve(e)||i>e.end(e.length-1)?!1:i>=e.start(0)}function Ie(e,i){if(!e||!e.length||ve(e))return 0;var o=0;e=T(Le(e));for(var c=e.next();!c.done;c=e.next()){var h=c.value;c=h.start,h=h.end,h>i&&(o+=h-Math.max(c,i))}return o}function Ce(e,i,o){return!e||!e.length||ve(e)?null:(e=Le(e).findIndex(function(c,h,g){return c.start>i&&(h==0||g[h-1].end-i<=o)}),0<=e?e:null)}function Le(e){if(!e)return[];for(var i=[],o=0;o<e.length;o++)i.push({start:e.start(o),end:e.end(o)});return i}function Ye(){}function Te(e,i){var o=document.createElement("source");return o.src=e,o.type=i===void 0?"":i,o}function ie(e){for(;e.firstChild;)e.removeChild(e.firstChild)}_e("shaka.util.Dom",Ye),Ye.removeAllChildren=ie;/*
 @license
 Shaka Player
 Copyright 2022 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function le(){}function he(e,i){return i+10<=e.length&&e[i]===73&&e[i+1]===68&&e[i+2]===51&&255>e[i+3]&&255>e[i+4]&&128>e[i+6]&&128>e[i+7]&&128>e[i+8]&&128>e[i+9]}function Pe(e,i){return i+10<=e.length&&e[i]===51&&e[i+1]===68&&e[i+2]===73&&255>e[i+3]&&255>e[i+4]&&128>e[i+6]&&128>e[i+7]&&128>e[i+8]&&128>e[i+9]}function Ge(e,i){var o=(e[i]&127)<<21;return o|=(e[i+1]&127)<<14,o|=(e[i+2]&127)<<7,o|=e[i+3]&127}function ze(e){var i={key:e.type,description:"",data:"",mimeType:null,pictureType:null};if(e.type==="APIC"){if(2>e.size||e.data[0]!==3)return null;var o=e.data.subarray(1).indexOf(0);if(o===-1)return null;var c=Er(jn(e.data,1,o)),h=e.data[2+o],g=e.data.subarray(3+o).indexOf(0);if(g===-1)return null;var v=Er(jn(e.data,3+o,g)),E;return c==="-->"?E=Er(jn(e.data,4+o+g)):E=fi(e.data.subarray(4+o+g)),i.mimeType=c,i.pictureType=h,i.description=v,i.data=E,i}return e.type==="TXXX"?2>e.size||e.data[0]!==3||(c=e.data.subarray(1).indexOf(0),c===-1)?null:(o=Er(jn(e.data,1,c)),e=Er(jn(e.data,2+c)).replace(/\0*$/,""),i.description=o,i.data=e,i):e.type==="WXXX"?2>e.size||e.data[0]!==3||(c=e.data.subarray(1).indexOf(0),c===-1)?null:(o=Er(jn(e.data,1,c)),e=Er(jn(e.data,2+c)).replace(/\0*$/,""),i.description=o,i.data=e,i):e.type==="PRIV"?2>e.size||(o=e.data.indexOf(0),o===-1)?null:(o=Er(jn(e.data,0,o)),i.description=o,o=="com.apple.streaming.transportStreamTimestamp"?(o=e.data.subarray(o.length+1),e=o[3]&1,o=(o[4]<<23)+(o[5]<<15)+(o[6]<<7)+o[7],o/=45,e&&(o+=4772185884e-2),i.data=o):(e=fi(e.data.subarray(o.length+1)),i.data=e),i):e.type[0]==="T"?2>e.size||e.data[0]!==3?null:(e=Er(e.data.subarray(1)).replace(/\0*$/,""),i.data=e,i):e.type[0]==="W"?(e=Er(e.data).replace(/\0*$/,""),i.data=e,i):e.data?(i.data=fi(e.data),i):null}function Ve(e){for(var i=0,o=[];he(e,i);){var c=Ge(e,i+6);for(e[i+5]>>6&1&&(i+=10),i+=10,c=i+c;i+10<c;){var h=e.subarray(i),g=Ge(h,4);h={type:String.fromCharCode(h[0],h[1],h[2],h[3]),size:g,data:h.subarray(10,10+g)},(g=ze(h))&&o.push(g),i+=h.size+10}Pe(e,i)&&(i+=10)}return o}function nt(e,i){for(var o=i=i===void 0?0:i,c=0;he(e,i);)e[i+5]>>6&1&&(c+=10),c+=10,c+=Ge(e,i+6),Pe(e,i+10)&&(c+=10),i+=c;return 0<c?e.subarray(o,o+c):new Uint8Array([])}_e("shaka.util.Id3Utils",le),le.getID3Data=nt,le.getID3Frames=Ve;function rt(e,i){if(this.j=e,i!==void 0&&i){i=new Uint8Array(e.byteLength);for(var o=0,c=0;c<e.byteLength;c++)2<=c&&e[c]==3&&e[c-1]==0&&e[c-2]==0||(i[o]=e[c],o++);this.j=jn(i,0,o)}this.i=this.j.byteLength,this.g=this.h=0}function fe(e){var i=e.j.byteLength-e.i,o=new Uint8Array(4),c=Math.min(4,e.i);c!==0&&(o.set(e.j.subarray(i,i+c)),e.h=new Pr(o,0).S(),e.g=8*c,e.i-=c)}function me(e,i){if(e.g<=i){i-=e.g;var o=Math.floor(i/8);i-=8*o,e.g-=o,fe(e)}e.h<<=i,e.g-=i}function Ue(e,i){var o=Math.min(e.g,i),c=e.h>>>32-o;return e.g-=o,0<e.g?e.h<<=o:0<e.i&&fe(e),o=i-o,0<o?c<<o|Ue(e,o):c}function je(e){var i;for(i=0;i<e.g;++i)if((e.h&2147483648>>>i)!==0)return e.h<<=i,e.g-=i,i;return fe(e),i+je(e)}function Ee(e){me(e,1+je(e))}function ye(e){var i=je(e);return Ue(e,i+1)-1}function de(e){return e=ye(e),1&e?1+e>>>1:-1*(e>>>1)}function we(e){return Ue(e,1)===1}function qe(e){return Ue(e,8)}function tt(e,i){for(var o=8,c=8,h=0;h<i;h++)c!==0&&(c=de(e),c=(o+c+256)%256),o=c===0?o:c}function mt(e){return qe(e),ye(e),ye(e)}_e("shaka.util.ExpGolomb",rt);function Tt(){this.G=null,this.H=!1,this.m=this.I=null,this.j=[],this.g=[],this.A=this.B=null,this.i=[],this.h=[],this.C=null,this.l=[],this.F=this.o=this.u=null}p=Tt.prototype,p.clearData=function(){this.j=[],this.g=[],this.i=[],this.h=[],this.l=[]},p.parse=function(e){if(564>e.length)return this;for(var i=Math.max(0,gi(e)),o=e.length-(e.length+i)%188,c=!1,h=i;h<o;h+=188)if(e[h]==71){var g=!!(e[h+1]&64),v=((e[h+1]&31)<<8)+e[h+2];if(1<(e[h+3]&48)>>4){var E=h+5+e[h+4];if(E==h+188)continue}else E=h+4;switch(v){case 0:g&&(E+=e[E]+1),this.G=(e[E+10]&31)<<8|e[E+11];break;case 17:case 8191:break;case this.G:g&&(E+=e[E]+1),g=e,v={audio:-1,video:-1,ce:-1,audioCodec:"",videoCodec:""};var S=E+3+((g[E+1]&15)<<8|g[E+2])-4;for(E+=12+((g[E+10]&15)<<8|g[E+11]);E<S;){var I=(g[E+1]&31)<<8|g[E+2],L=(g[E+3]&15)<<8|g[E+4];switch(g[E]){case 6:if(0<L)for(var O=E+5,V=L;2<V;){var W=g[O+1]+2;switch(g[O]){case 5:var pe=jr(g.subarray(O+2,O+W));v.audio==-1&&pe==="Opus"?(v.audio=I,v.audioCodec="opus"):v.video==-1&&pe==="AV01"&&(v.video=I,v.videoCodec="av1");break;case 106:v.audio==-1&&(v.audio=I,v.audioCodec="ac3");break;case 122:v.audio==-1&&(v.audio=I,v.audioCodec="ec3");break;case 124:v.audio==-1&&(v.audio=I,v.audioCodec="aac");break;case 127:v.audioCodec=="opus"&&(pe=null,g[O+2]===128&&(pe=g[O+3]),pe!=null&&(this.F={channelCount:(pe&15)===0?2:pe&15,Zh:pe,sampleRate:48e3}))}O+=W,V-=W}break;case 15:v.audio==-1&&(v.audio=I,v.audioCodec="aac");break;case 17:v.audio==-1&&(v.audio=I,v.audioCodec="aac-loas");break;case 21:v.ce==-1&&(v.ce=I);break;case 27:v.video==-1&&(v.video=I,v.videoCodec="avc");break;case 3:case 4:v.audio==-1&&(v.audio=I,v.audioCodec="mp3");break;case 36:v.video==-1&&(v.video=I,v.videoCodec="hvc");break;case 129:v.audio==-1&&(v.audio=I,v.audioCodec="ac3");break;case 132:case 135:v.audio==-1&&(v.audio=I,v.audioCodec="ec3")}E+=L+5}g=v,g.video!=-1&&(this.I=g.video,this.m=g.videoCodec),g.audio!=-1&&(this.B=g.audio,this.A=g.audioCodec),g.ce!=-1&&(this.C=g.ce),c&&!this.H&&(c=!1,h=i-188),this.H=!0;break;case this.I:E=e.subarray(E,h+188),g?this.j.push([E]):this.j.length&&this.j[this.j.length-1]&&this.j[this.j.length-1].push(E);break;case this.B:E=e.subarray(E,h+188),g?this.i.push([E]):this.i.length&&this.i[this.i.length-1]&&this.i[this.i.length-1].push(E);break;case this.C:E=e.subarray(E,h+188),g?this.l.push([E]):this.l.length&&this.l[this.l.length-1]&&this.l[this.l.length-1].push(E);break;default:c=!0}}return this};function Vt(e,i){if((i[0]<<16|i[1]<<8|i[2])!==1)return null;var o={data:new Uint8Array(0),packetLength:i[4]<<8|i[5],pts:null,dts:null,nalus:[]};if(o.packetLength&&o.packetLength>i.byteLength-6)return null;var c=i[7];if(c&192){var h=536870912*(i[9]&14)+4194304*(i[10]&255)+16384*(i[11]&254)+128*(i[12]&255)+(i[13]&254)/2;e.u==null&&(e.u=h),o.pts=Kn(h,e.u),e.u=o.pts,o.dts=o.pts,c&64&&(c=536870912*(i[14]&14)+4194304*(i[15]&255)+16384*(i[16]&254)+128*(i[17]&255)+(i[18]&254)/2,e.o==null&&(e.o=c),o.dts=Kn(c,e.o)),e.o=o.dts}return e=i[8]+9,i.byteLength<=e?null:(o.data=i.subarray(e),o)}p.hj=function(e){return dn("TsParser.parseAvcNalus","Please use parseNalus function instead."),this.Xf(e,{Dd:null,state:null})},p.Xf=function(e,i){var o=e.pts?e.pts/9e4:null;e=e.data;var c=e.byteLength,h=1;this.m=="hvc"&&(h=2);var g=i.state||0,v=g,E=0,S=[],I=-1,L=0;for(g==-1&&(I=0,L=this.m=="hvc"?e[0]>>1&63:e[0]&31,g=0,E=1);E<c;){var O=e[E++];g?g===1?g=O?0:2:O?O==1?(O=E-g-1,0<=I?S.push({data:e.subarray(I+h,O),fullData:e.subarray(I,O),type:L,time:o,state:null}):(g=S.length?S[S.length-1]:i.Dd)&&(v&&E<=4-v&&g.state&&(g.data=g.data.subarray(0,g.data.byteLength-v),g.fullData=g.fullData.subarray(0,g.fullData.byteLength-v)),0<O&&(O=e.subarray(0,O),g.data=qr(g.data,O),g.fullData=qr(g.fullData,O),g.state=0)),E<c?(L=this.m=="hvc"?e[E]>>1&63:e[E]&31,I=E,g=0):g=-1):g=0:g=3:g=O?0:1}return 0<=I&&0<=g&&S.push({data:e.subarray(I+h,c),fullData:e.subarray(I,c),type:L,time:o,state:g}),!S.length&&i.Dd&&(o=S.length?S[S.length-1]:i.Dd)&&(o.data=qr(o.data,e),o.fullData=qr(o.fullData,e)),i.state=g,S},p.getMetadata=function(){for(var e=[],i=T(this.l),o=i.next();!o.done;o=i.next())o=qr.apply(Wr,k(o.value)),(o=Vt(this,o))&&e.push({cueTime:o.pts?o.pts/9e4:null,data:o.data,frames:Ve(o.data),dts:o.dts,pts:o.pts});return e},p.fb=function(){if(this.i.length&&!this.h.length){for(var e=!1,i=T(this.i),o=i.next();!o.done;o=i.next()){var c=qr.apply(Wr,k(o.value)),h=Vt(this,c);o=this.h.length?this.h[this.h.length-1]:null,h&&h.pts!=null&&h.dts!=null&&(!o||o.pts!=h.pts&&o.dts!=h.dts)?(this.h.length&&h.dts<(o.dts||0)&&(e=!0),this.h.push(h)):this.h.length&&(c=h?h.data:c)&&(o=this.h.pop(),o.data=qr(o.data,c),this.h.push(o))}e&&(this.h=this.h.sort(function(g,v){var E=(g.pts||0)-(v.pts||0);return(g.dts||0)-(v.dts||0)||E}))}return this.h},p.wc=function(e){if(e=e===void 0?!0:e,this.j.length&&!this.g.length){for(var i=!1,o=T(this.j),c=o.next();!c.done;c=o.next()){var h=qr.apply(Wr,k(c.value)),g=Vt(this,h);c=this.g.length?this.g[this.g.length-1]:null,g&&g.pts!=null&&g.dts!=null&&(!c||c.pts!=g.pts&&c.dts!=g.dts)?(this.g.length&&g.dts<(c.dts||0)&&(i=!0),this.g.push(g)):this.g.length&&(h=g?g.data:h)&&(c=this.g.pop(),c.data=qr(c.data,h),this.g.push(c))}if(e){for(o={Dd:null,state:null},c=[],h=T(this.g),g=h.next();!g.done;g=h.next())g=g.value,g.nalus=this.Xf(g,o),g.nalus.length&&(c.push(g),o.Dd=g.nalus[g.nalus.length-1]);this.g=c}i&&(this.g=this.g.sort(function(v,E){var S=(v.pts||0)-(E.pts||0);return(v.dts||0)-(E.dts||0)||S}))}return e?this.g:(e=this.g,this.g=[],e)},p.getStartTime=function(e){if(e=="audio"){e=null;var i=this.fb();return i.length&&(e=i[0],e=Math.min(e.dts,e.pts)/9e4),e}return e=="video"?(e=null,i=this.wc(!1),i.length&&(e=i[0],e=Math.min(e.dts,e.pts)/9e4),e):null},p.od=function(){return{audio:this.A,video:this.m}},p.be=function(){for(var e=[],i=T(this.wc()),o=i.next();!o.done;o=i.next())e.push.apply(e,k(o.value.nalus));return e},p.Mi=function(){dn("TsParser.getVideoResolution","Please use getVideoInfo function instead.");var e=this.Kf();return{height:e.height,width:e.width}},p.Kf=function(){return this.m=="hvc"?Cn(this):yn(this)};function Jt(e){var i=e.wc();return 1<i.length&&(e=i[0].pts,i=i[1].pts,!isNaN(i-e))?String(1/(i-e)*9e4):null}function yn(e){var i={height:null,width:null,codec:null,frameRate:null},o=e.be();if(!o.length||(o=o.find(function(W){return W.type==7}),!o))return i;o=new rt(o.data);var c=qe(o),h=qe(o),g=qe(o);if(Ee(o),_n.includes(c)){var v=ye(o);if(v===3&&me(o,1),Ee(o),Ee(o),me(o,1),we(o)){v=v!==3?8:12;for(var E=0;E<v;E++)we(o)&&(6>E?tt(o,16):tt(o,64))}}if(Ee(o),v=ye(o),v===0)ye(o);else if(v===1)for(me(o,1),Ee(o),Ee(o),v=ye(o),E=0;E<v;E++)Ee(o);Ee(o),me(o,1),v=ye(o),E=ye(o);var S=Ue(o,1);S===0&&me(o,1),me(o,1);var I=0,L=0,O=0,V=0;return we(o)&&(I=ye(o),L=ye(o),O=ye(o),V=ye(o)),i.height=String((2-S)*(E+1)*16-2*O-2*V),i.width=String(16*(v+1)-2*I-2*L),i.codec="avc1."+("0"+c.toString(16).toUpperCase()).slice(-2)+("0"+h.toString(16).toUpperCase()).slice(-2)+("0"+g.toString(16).toUpperCase()).slice(-2),i.frameRate=Jt(e),i}function Cn(e){var i={height:null,width:null,codec:null,frameRate:null},o=e.be();if(!o.length||(o=o.find(function(It){return It.type==33}),!o))return i;var c=new rt(o.fullData,!0);qe(c),qe(c),Ue(c,4);var h=Ue(c,3);we(c);var g=Ue(c,2),v=Ue(c,1),E=Ue(c,5),S=Ue(c,32);o=qe(c);for(var I=qe(c),L=qe(c),O=qe(c),V=qe(c),W=qe(c),pe=qe(c),Me=[],De=[],Fe=0;Fe<h;Fe++)Me.push(we(c)),De.push(we(c));if(0<h)for(Fe=h;8>Fe;Fe++)Ue(c,2);for(Fe=0;Fe<h;Fe++)Me[Fe]&&Ue(c,88),De[Fe]&&qe(c);ye(c),h=ye(c),h==3&&Ue(c,1),Me=ye(c),De=ye(c);var We=Fe=0,gt=0,ht=0;return we(c)&&(Fe+=ye(c),We+=ye(c),gt+=ye(c),ht+=ye(c)),i.width=String(Me-(Fe+We)*(h===1||h===2?2:1)),i.height=String(De-(gt+ht)*(h===1?2:1)),c=function(It){for(var ot=0,st=0;32>st;st++)ot|=(It>>st&1)<<31-st;return ot>>>0}(S),v=v==1?"H":"L",g="hvc1"+("."+["","A","B","C"][g]+E),g+="."+c.toString(16).toUpperCase(),g+="."+v+pe,W&&(g+="."+W.toString(16).toUpperCase()),V&&(g+="."+V.toString(16).toUpperCase()),O&&(g+="."+O.toString(16).toUpperCase()),L&&(g+="."+L.toString(16).toUpperCase()),I&&(g+="."+I.toString(16).toUpperCase()),o&&(g+="."+o.toString(16).toUpperCase()),i.codec=g,i.frameRate=Jt(e),i}function Kn(e,i){var o=1;for(e>i&&(o=-1);4294967296<Math.abs(i-e);)e+=8589934592*o;return e}function Zn(e){return!(0>gi(e))}function gi(e){for(var i=Math.min(1e3,e.length-564),o=0;o<i;){if(e[o]==71&&e[o+188]==71&&e[o+376]==71)return o;o++}return-1}_e("shaka.util.TsParser",Tt),Tt.syncOffset=gi,Tt.probe=Zn,Tt.prototype.getVideoInfo=Tt.prototype.Kf,Tt.prototype.getVideoResolution=Tt.prototype.Mi,Tt.prototype.getVideoNalus=Tt.prototype.be,Tt.prototype.getCodecs=Tt.prototype.od,Tt.prototype.getStartTime=Tt.prototype.getStartTime,Tt.prototype.getVideoData=Tt.prototype.wc,Tt.prototype.getAudioData=Tt.prototype.fb,Tt.prototype.getMetadata=Tt.prototype.getMetadata,Tt.prototype.parseNalus=Tt.prototype.Xf,Tt.prototype.parseAvcNalus=Tt.prototype.hj,Tt.prototype.parse=Tt.prototype.parse,Tt.prototype.clearData=Tt.prototype.clearData,Tt.Timescale=9e4;var _n=[100,110,122,244,44,83,86,118,128,138,139,134];function ri(e,i,o,c){var h=this;this.g=e,this.K=o,this.A=null,this.ea=i,this.l=new Map,this.B=new Map,this.Aa=new Map,this.h=null,this.Ea=!1,this.I=c||null,this.u=new Map,this.o=new ni,this.j=new Map,this.L=null,this.G=new mr,this.Ga="",this.Na=!1,this.sa=!0,this.$=!1,this.C=this.M=null,this.i=pi(this,this.G),this.ya=this.H=!1,this.O=new ld(function(){return Nt(h)}),this.F=!1,this.P="UNKNOWN",this.La=this.Ma=!1,this.Fa=new mr,this.m=!1,this.pa=null,this.Z=new Map,this.ka=this.T=this.oa=this.W=null,this.fa=new mr,this.g.remote&&(this.$=this.g.remote.state!="disconnected",this.o.D(this.g.remote,"connect",function(){h.$=h.g.remote.state!="disconnected"}),this.o.D(this.g.remote,"connecting",function(){h.$=h.g.remote.state!="disconnected"}),this.o.D(this.g.remote,"disconnect",function(){h.$=h.g.remote.state!="disconnected"}))}function pi(e,i){if(e.sa=!0,l.ManagedMediaSource){e.C||(e.g.disableRemotePlayback=!0);var o=new ManagedMediaSource;e.o.D(o,"startstreaming",function(){e.sa=!0}),e.o.D(o,"endstreaming",function(){e.sa=!1})}else o=new MediaSource;return e.o.ma(o,"sourceopen",function(){URL.revokeObjectURL(e.Ga),i.resolve()}),e.o.ma(e.g,"playing",function(){e.Na=!0}),e.Ga=bo(o),e.g.removeAttribute("src"),e.M&&e.g.removeChild(e.M),e.C&&e.g.removeChild(e.C),e.M=Te(e.Ga),e.g.appendChild(e.M),e.C&&e.g.appendChild(e.C),e.g.load(),o}function Gi(e,i,o){e.g&&l.ManagedMediaSource&&e.i&&(e.C&&e.g.removeChild(e.C),e.C=Te(i,o),e.g.appendChild(e.C),e.g.disableRemotePlayback=!1)}function Ki(e,i){var o,c,h,g,v,E,S,I,L,O,V;return Qe(function(W){if(W.g==1)return e.createSegmentIndex?x(W,e.createSegmentIndex(),2):W.s(2);if(!e.segmentIndex)return W.return(!1);if(e.segmentIndex.getNumReferences()==0)return W.return(!0);for(o=ds,c=new Set,h=T(e.segmentIndex),g=h.next();!g.done;g=h.next())if(v=g.value,E=v.mimeType||e.mimeType||"",S=v.codecs||e.codecs||"",(E!=e.mimeType||S!=e.codecs)&&(I=E+":"+S,!c.has(I))){if(c.add(I),i==o.za){if(L=Xr(E,S),!Pl(L))return W.return(!1)}else if(i==o.la?S=$t(S):i==o.V&&(S=Ct(S,E)),O=$f(e,E,S),V=Qa(E,S),!Ss(O)&&!lu(V))return W.return(!1)}return W.return(!0)})}function bi(){var e='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",video/mp4; codecs="dvh1.05.01",video/mp4; codecs="dvh1.20.01",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="ac-4.02.01.01",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(k(ll)),i={};e=T(e);for(var o=e.next();!o.done;o=e.next()){o=o.value,Pl(o)?i[o]=!0:i[o]=Ya()?Ss(o)||!!lu(o):nu(o);var c=o.split(";")[0];i[c]=i[c]||i[o]}return i}p=ri.prototype,p.destroy=function(){return this.O.destroy()};function Nt(e){var i,o,c,h,g,v,E,S,I,L,O,V,W,pe,Me;return Qe(function(De){if(De.g==1){for(i=[],o=T(e.u),c=o.next();!c.done;c=o.next())for(h=c.value,g=T(h),v=g.next().value,E=g.next().value,S=E[0],I=v,e.u.set(I,E.slice(0,1)),S&&i.push(S.p.catch(Jh)),L=T(E.slice(1)),O=L.next();!O.done;O=L.next())V=O.value,V.p.reject(new it(2,7,7003,void 0));return e.h&&i.push(e.h.destroy()),x(De,Promise.all(i),2)}for(W=T(e.j.values()),pe=W.next();!pe.done;pe=W.next())Me=pe.value,Me.destroy();e.o&&(e.o.release(),e.o=null),e.g&&e.C&&e.g.removeChild(e.C),e.g&&e.M&&(e.g.removeChild(e.M),e.g.load(),e.g.disableRemotePlayback=!1),e.g=null,e.M=null,e.C=null,e.A=null,e.i=null,e.h=null,e.ea=null,e.l.clear(),e.Aa.clear(),e.j.clear(),e.L=null,e.u.clear(),e.I=null,e.Z.clear(),e.K=null,ue(De)})}p.init=function(e,i,o,c){i=i===void 0?!1:i,o=o===void 0?"UNKNOWN":o,c=c===void 0?!1:c;var h=this,g,v,E,S,I,L;return Qe(function(O){switch(O.g){case 1:return g=ds,x(O,h.G,2);case 2:if(!qn(h)&&!Kt(h)){O.s(3);break}return Mt("Expected MediaSource to be open during init(); reopening the media source."),h.G=new mr,h.i=pi(h,h.G),x(O,h.G,3);case 3:h.F=i,h.P=o,h.Ma=c,h.La=!h.F&&h.P=="HLS"&&!h.Ma,h.Z.clear(),h.W=null,h.oa=null,h.T=null,h.ka=null,h.fa=new mr,v=T(e.keys()),E=v.next();case 5:if(E.done){O.s(7);break}return S=E.value,I=e.get(S),x(O,rn(h,S,I,I.codecs),8);case 8:h.m?(h.u.set(g.V,[]),h.u.set(g.la,[])):h.u.set(S,[]),E=v.next(),O.s(5);break;case 7:(L=e.get(g.V))&&L.isAudioMuxedInVideo&&(h.m=!0),ue(O)}})};function rn(e,i,o,c){var h,g,v,E,S,I,L,O,V,W,pe,Me;return Qe(function(De){switch(De.g){case 1:return h=ds,g=Ae,v=yt,x(De,Ki(o,i),2);case 2:if(v.call(g,De.h,"Type negotiation should happen before MediaSourceEngine.init!"),i==h.V&&c&&(c=Ct(c,o.mimeType)),E=Xr(o.mimeType,c),i==h.za){gn(e,E,e.F,o.external),De.s(0);break}if(S=e.A.forceTransmux,(!Ss(E)||!e.F&&ll.includes(E))&&(S=!0),I=Qa(o.mimeType,c),!S){De.s(4);break}if(L=zs(h.V,(c||"").split(",")),O=zs(h.la,(c||"").split(",")),!L||!O){De.s(5);break}return e.m=!0,x(De,rn(e,h.V,o,L),6);case 6:return x(De,rn(e,h.la,o,O),7);case 7:return De.return();case 5:(V=lu(I))&&(W=V(),e.j.set(i,W),E=W.convertCodecs(i,I));case 4:pe=E+e.A.addExtraFeaturesToSourceBuffer(E),Lr(e.O);try{Me=e.i.addSourceBuffer(pe)}catch(Fe){throw new it(2,3,3015,Fe,"The mediaSource_ status was "+e.i.readyState+" expected 'open'",null)}e.F&&(Me.mode=Sc),e.o.D(Me,"error",function(){var Fe=e.u.get(i)[0];Fe.p.reject(new it(2,3,3014,e.g.error?e.g.error.code:0,Fe.uri))}),e.o.D(Me,"updateend",function(){return _i(e,i)}),e.l.set(i,Me),e.B.set(i,E),e.Aa.set(i,!!o.drmInfos.length),ue(De)}})}p.configure=function(e){this.A=e,this.h&&(this.h.A=e.modifyCueCallback)};function en(e){return e.sa&&!e.$&&!e.H}function gn(e,i,o,c){e.h||(e.h=new vo(e.ea),e.h&&(e.h.A=e.A.modifyCueCallback));var h=e.h;c=c||e.Ea,e=e.P,i=="application/cea-608"||i=="application/cea-708"?h.i=null:(h.i=ul.get(i)(),h.i.setSequenceMode?h.i.setSequenceMode(o):dn("Text parsers w/ setSequenceMode",'Text parsers should have a "setSequenceMode" method!'),h.i.setManifestType?h.i.setManifestType(e):dn("Text parsers w/ setManifestType",'Text parsers should have a "setManifestType" method!'),h.B=c)}function qn(e){return e.H?!1:e.i?e.i.readyState=="ended":!0}function Kt(e){return e.H?!1:e.i?e.i.readyState=="closed":!0}function kn(e,i){return e.l.size?i==zi?e=e.h.g:(e=zn(e,i),e=!e||ve(e)?null:e.length==1&&0>e.start(0)?0:e.length?e.start(0):null):e=null,e}function Bn(e,i){return e.l.size?i==zi?e.h.h:Se(zn(e,i)):null}function Xn(e,i,o){return i==zi?(e=e.h,e.h==null||e.h<o?0:e.h-Math.max(o,e.g)):(e=zn(e,i),Ie(e,o))}p.Fb=function(){var e={total:this.H?[]:Le(this.g.buffered),audio:Le(zn(this,"audio")),video:Le(zn(this,"video")),text:[]};if(this.h){var i=this.h.g,o=this.h.h;i!=null&&o!=null&&e.text.push({start:i,end:o})}return e};function zn(e,i){if(e.H||e.$)return null;try{return e.l.get(i).buffered}catch{return e.l.has(i),null}}function Ut(e,i,o,c,h,g){var v=null,E=[],S=jn(o);if(ll.includes(g))i=Ve(S),i.length&&c&&((o=i.find(function(W){return W.description==="com.apple.streaming.transportStreamTimestamp"}))&&(v=Math.round(o.data)/1e3),e.K.onMetadata([{cueTime:c.startTime,data:S,frames:i,dts:c.startTime,pts:c.startTime}],0,c.endTime));else if(g.includes("/mp4")&&c&&c.Y&&c.Y.timescale){var I=c.Y.timescale;if(!isNaN(I)){var L=h.emsgSchemeIdUris!=null&&0<h.emsgSchemeIdUris.length||e.A.dispatchAllEmsgBoxes,O=0,V=!1;S=new Ar,L&&S.R("emsg",function(W){var pe=h.emsgSchemeIdUris;if(W.version===0)var Me=W.reader.Cc(),De=W.reader.Cc(),Fe=W.reader.S(),We=W.reader.S(),gt=W.reader.S(),ht=W.reader.S(),It=c.startTime+We/Fe;else Fe=W.reader.S(),It=W.reader.bd()/Fe+c.timestampOffset,We=It-c.startTime,gt=W.reader.S(),ht=W.reader.S(),Me=W.reader.Cc(),De=W.reader.Cc();W=W.reader.Cb(W.reader.getLength()-W.reader.Ba()),(pe&&pe.includes(Me)||e.A.dispatchAllEmsgBoxes)&&(Me=="urn:mpeg:dash:event:2012"?e.K.gj():(pe=It+gt/Fe,Fe={startTime:It,endTime:pe,schemeIdUri:Me,value:De,timescale:Fe,presentationTimeDelta:We,eventDuration:gt,id:ht,messageData:W},ht=new Map().set("detail",Fe),new Jn("emsg",ht).cancelable=!0,e.K.ej(Fe),(Me=="https://aomedia.org/emsg/ID3"||Me=="https://developer.apple.com/streaming/emsg-id3")&&(Me=Ve(W),Me.length&&e.K.onMetadata([{cueTime:It,data:W,frames:Me,dts:It,pts:It}],0,pe))))}),S.R("prft",function(W){var pe=W.reader,Me=W.version;pe.S(),W=pe.S();var De=pe.S();W=1e3*W+De/Math.pow(2,32)*1e3,Me===0?pe=pe.S():(Me=pe.S(),pe=pe.S(),pe=Me*Math.pow(2,32)+pe),W=new Date(new Date(Date.UTC(1900,0,1,0,0,0)).getTime()+W).getTime(),pe=new Map().set("detail",{wallClockTime:W,programStartDate:new Date(W-pe/I*1e3)}),pe=new Jn("prft",pe),e.K.onEvent(pe)}).box("moof",$i).box("traf",$i).R("tfdt",function(W){V||(O=rf(W.reader,W.version).baseMediaDecodeTime/I,V=!0,L||W.parser.stop())}).parse(o,!0),V&&c.timestampOffset==0&&(v=O)}}else g.includes("/mp4")||g.includes("/webm")||!Zn(S)||(e.Z.has(i)?e.Z.get(i).clearData():e.Z.set(i,new Tt),E=e.Z.get(i).parse(S),S=E.getStartTime(i),S!=null&&(v=S),E=E.getMetadata());return{timestamp:v,metadata:E}}function hn(e,i,o,c,h,g,v,E,S,I){v=v===void 0?!1:v,E=E===void 0?!1:E,S=S===void 0?!1:S,I=I===void 0?!1:I;var L,O,V,W,pe,Me,De,Fe,We,gt,ht,It,ot,st,_t,xt,Ht;return Qe(function(Pt){switch(Pt.g){case 1:if(L=ds,i!=L.za){Pt.s(2);break}if(e.P!="HLS"){Pt.s(3);break}return x(Pt,e.Fa,4);case 4:O=Pt.h,e.h.u=O;case 3:return x(Pt,Xh(e.h,o,c?c.startTime:null,c?c.endTime:null,c?c.N()[0]:null),5);case 5:return Pt.return();case 2:if(I||!e.m){Pt.s(6);break}return x(Pt,hn(e,L.V,o,c,h,g,v,E,S,!0),7);case 7:return x(Pt,hn(e,L.la,o,c,h,g,v,E,S,!0),8);case 8:return Pt.return();case 6:if(!e.l.has(i))return Pt.return();if(V=e.l.get(i).timestampOffset,W=e.B.get(i),e.j.has(i)&&(W=e.j.get(i).getOriginalMimeType()),c&&(pe=Ut(e,i,o,c,h,W),Me=pe.timestamp,De=pe.metadata,Me!=null&&(e.W==null&&i==L.la&&(e.W=Me,e.oa=c.startTime,e.T!=null&&(Fe=0,e.oa==e.ka&&(Fe=e.W-e.T),e.fa.resolve(Fe))),e.T==null&&i==L.V&&(e.T=Me,e.ka=c.startTime,e.W!=null&&(We=0,e.oa==e.ka&&(We=e.W-e.T),e.fa.resolve(We))),gt=Me,ht=ll,!e.F&&ht.includes(e.B.get(i))&&(gt=0),It=c.startTime-gt,ot=Math.abs(V-It),(.001<=ot||v||E)&&(!S||0<It||!V)&&(V=It,e.La&&(ui(e,i,function(){return Fn(e,i)},null),ui(e,i,function(){return ci(e,i,V)},null))),(i==L.la||!e.l.has(L.la))&&e.Fa.resolve(V)),De.length)&&e.K.onMetadata(De,V,c?c.endTime:null),g&&i==L.la&&(e.h||gn(e,"application/cea-608",e.F,!1),e.L||(st=W.split(";",1)[0],e.L=new Yr(st)),c?(_t=e.L.i(o),_t.length&&zg(e.h,_t,c.startTime,c.endTime,V)):e.L.init(o,E)),!e.j.has(i)){Pt.s(9);break}return x(Pt,e.j.get(i).transmux(o,h,c,e.i.duration,i),10);case 10:o=Pt.h;case 9:if(o=Ta(e,h,o,c,i),!c||!e.F||i==L.za){Pt.s(11);break}if(!v&&!E){Pt.s(11);break}if(xt=c.startTime,e.P!="HLS"||e.m||i!=L.V||!e.l.has(L.la)){Pt.s(13);break}return x(Pt,e.fa,14);case 14:Ht=Pt.h,.15<Math.abs(Ht)&&(xt-=Ht);case 13:ui(e,i,function(){return Fn(e,i)},null),ui(e,i,function(){return ci(e,i,xt)},null);case 11:return x(Pt,ui(e,i,function(){var jt=o;e.I&&Of(e.I,jt,V,h),e.l.get(i).appendBuffer(jt)},c?c.N()[0]:null),15);case 15:ue(Pt)}})}function $n(e,i){var o=Bn(e,"video")||0;$d(e.h,i,o)}function Yn(e){e.h&&$d(e.h,"",0)}p.remove=function(e,i,o){var c=this,h;return Qe(function(g){return g.g==1?(h=ds,e==h.za?x(g,c.h.remove(i,o),0):o>i?x(g,ui(c,e,function(){return bn(c,e,i,o)},null),5):g.s(0)):c.m?x(g,ui(c,h.V,function(){return bn(c,h.V,i,o)},null),0):g.s(0)})};function tn(e,i){var o;return Qe(function(c){return c.g==1?(o=ds,i==o.za?e.h?x(c,e.h.remove(0,1/0),0):c.return():x(c,ui(e,i,function(){return bn(e,i,0,e.i.duration)},null),4)):e.m?x(c,ui(e,o.V,function(){return bn(e,o.V,0,e.i.duration)},null),0):c.s(0)})}p.flush=function(e){var i=this,o;return Qe(function(c){return c.g==1?(o=ds,e==o.za?c.return():x(c,ui(i,e,function(){i.g.currentTime-=.001,_i(i,e)},null),2)):i.m?x(c,ui(i,o.V,function(){var h=o.V;i.g.currentTime-=.001,_i(i,h)},null),0):c.s(0)})};function Je(e,i,o,c,h,g,v,E,S){var I,L,O;return Qe(function(V){return V.g==1?(I=ds,i==I.za?(g||(e.h.u=o),Yf(e.h,c,h),V.return()):(L=[],x(V,_c(e,i,v,E,S),2))):(O=V.h,O||(L.push(ui(e,i,function(){return Fn(e,i)},null)),e.m&&L.push(ui(e,I.V,function(){return Fn(e,I.V)},null))),g||(L.push(ui(e,i,function(){return ci(e,i,o)},null)),e.m&&L.push(ui(e,I.V,function(){return ci(e,I.V,o)},null))),(c!=0||h!=1/0)&&(L.push(ui(e,i,function(){var W=e.l.get(i);W.appendWindowStart=0,W.appendWindowEnd=h,W.appendWindowStart=c,_i(e,i)},null)),e.m&&L.push(ui(e,I.V,function(){var W=I.V,pe=e.l.get(W);pe.appendWindowStart=0,pe.appendWindowEnd=h,pe.appendWindowStart=c,_i(e,W)},null))),L.length?x(V,Promise.all(L),0):V.s(0))})}function Ot(e,i,o){var c,h;return Qe(function(g){return g.g==1?(c=ds,i==c.za||(i==c.la&&(e.Fa=new mr),!e.F||(h=Bn(e,i))&&.1>Math.abs(h-o))?g.return():(ui(e,i,function(){return Fn(e,i)},null),e.m&&ui(e,c.V,function(){return Fn(e,c.V)},null),x(g,ui(e,i,function(){return ci(e,i,o)},null),2))):e.m?x(g,ui(e,c.V,function(){return ci(e,c.V,o)},null),0):g.s(0)})}p.endOfStream=function(e){var i=this;return Qe(function(o){return x(o,Nr(i,function(){qn(i)||Kt(i)||(e?i.i.endOfStream(e):i.i.endOfStream())}),0)})},p.bb=function(e){var i=this;return Qe(function(o){return x(o,Nr(i,function(){if(e<i.i.duration)for(var c=T(i.l.keys()),h=c.next();!h.done;h=c.next()){h=h.value;var g={start:function(){},p:new mr,uri:null};i.u.get(h).unshift(g)}i.i.duration=e,i.pa=e}),0)})},p.getDuration=function(){return this.i.duration};function an(e,i,o){Qe(function(c){return qn(e)||Kt(e)?c.return():x(c,Nr(e,function(){qn(e)||Kt(e)||e.i.setLiveSeekableRange(i,o)}),0)})}function Ft(e){Qe(function(i){return qn(e)||Kt(e)?i.return():x(i,Nr(e,function(){qn(e)||Kt(e)||e.i.clearLiveSeekableRange()}),0)})}function bn(e,i,o,c){c<=o?_i(e,i):e.l.get(i).remove(o,c)}function Fn(e,i){var o=e.l.get(i),c=o.appendWindowStart,h=o.appendWindowEnd;o.abort(),o.appendWindowStart=c,o.appendWindowEnd=h,_i(e,i)}function ci(e,i,o){0>o&&(o+=.001);var c=!0;e.P=="HLS"&&(c=Bn(e,i),c=!c||.15<Math.abs(c-o)),c&&(e.l.get(i).timestampOffset=o),_i(e,i)}function _i(e,i){if(!e.H){var o=e.u.get(i)[0];o&&(o.p.resolve(),Is(e,i))}}function ui(e,i,o,c){return Lr(e.O),o={start:o,p:new mr,uri:c},e.u.get(i).push(o),e.u.get(i).length==1&&Ko(e,i),o.p}function Nr(e,i){var o,c,h,g,v,E,S,I,L,O,V,W,pe;return Qe(function(Me){switch(Me.g){case 1:for(Lr(e.O),o=[],c=Array.from(e.l.keys()),h=T(c),g=h.next(),v={};!g.done;v={ready:void 0},g=h.next())E=g.value,v.ready=new mr,S={start:function(De){return function(){return De.ready.resolve()}}(v),p:v.ready,uri:null},I=e.u.get(E),I.push(S),o.push(v.ready),I.length==1&&S.start();return $e(Me,2),x(Me,Promise.all(o),4);case 4:lt(Me,3);break;case 2:throw L=et(Me),L;case 3:return $e(Me,5,6),x(Me,i(),6);case 6:for(Xe(Me),O=T(c),V=O.next();!V.done;V=O.next())W=V.value,Is(e,W);ut(Me,0);break;case 5:throw pe=et(Me),new it(2,3,3015,pe,e.g.error||"No error in the media element",null)}})}function Is(e,i){e.u.get(i).shift(),Ko(e,i)}function Ko(e,i){var o=e.u.get(i)[0];if(o)try{o.start()}catch(c){c.name=="QuotaExceededError"?o.p.reject(new it(2,3,3017,i)):en(e)?o.p.reject(new it(2,3,3015,c,e.g.error||"No error in the media element",o.uri)):o.p.reject(new it(2,3,3024,i)),Is(e,i)}}function Ta(e,i,o,c,h){if(sd(e.B.get(h))!="mp4")return o;var g=c===null,v=e.Aa.get(h),E=e.K.si(),S=!1;return c&&c.Y&&(S=c.Y.encrypted),c=c?c.N()[0]:null,(e=e.A.insertFakeEncryptionInInit&&v)&&(E=Po(E),e=er()&&h==="audio"||In()||ca()||Cr("SOPOpenBrowser")||el()&&fo()&&E),e&&(g?o=R(i,o,c):((i=!S)&&(i=er()&&h==="audio"),i&&(o=P(o)))),g&&ii()&&(o=ne(o)),o}function bc(e,i,o,c){return ui(e,i,function(){if(i!==zi){if(e.B.get(i),tl()){e.j.has(i)&&(e.j.get(i).destroy(),e.j.delete(i)),c&&e.j.set(i,c);var h=o+e.A.addExtraFeaturesToSourceBuffer(o);e.l.get(i).changeType(h),e.B.set(i,o)}_i(e,i)}},null)}function hd(e,i){var o,c,h,g,v,E,S,I,L,O,V,W,pe,Me,De,Fe,We,gt,ht,It;return Qe(function(ot){switch(ot.g){case 1:if(e.H)return ot.return();for(o=ds,e.H=!0,e.m=!1,c=e.g.currentTime,h=e.g.autoplay,e.g.paused||(e.ya=!0),e.Na&&(e.g.autoplay=!1),xe(ot,2),e.o.Qa(),g=T(e.j.values()),v=g.next();!v.done;v=g.next())E=v.value,E.destroy();for(S=T(e.l.values()),I=S.next();!I.done;I=S.next()){L=I.value;try{e.i.removeSourceBuffer(L)}catch{}}return e.j.clear(),e.l.clear(),O=e.i.duration,e.G=new mr,e.i=pi(e,e.G),x(ot,e.G,4);case 4:!isNaN(O)&&O?e.i.duration=O:!isNaN(e.pa)&&e.pa&&(e.i.duration=e.pa),V=new mr,W=e.i.sourceBuffers,pe=i.size,Me=0,De=function(){Me++,Me===pe&&(V.resolve(),e.o.Ja(W,"addsourcebuffer",De))},e.o.D(W,"addsourcebuffer",De),Fe=T(i.keys()),We=Fe.next();case 5:return We.done?((It=i.get(o.V))&&It.isAudioMuxedInVideo&&(e.m=!0),e.m&&!e.u.has(o.V)&&e.u.set(o.V,[]),e.g.currentTime=c,x(ot,V,2)):(gt=We.value,ht=i.get(gt),x(ot,rn(e,gt,ht,ht.codecs),6));case 6:We=Fe.next(),ot.s(5);break;case 2:Xe(ot),e.H=!1,Lr(e.O),e.o.ma(e.g,"canplaythrough",function(){e.O.g||(e.g.autoplay=h,e.ya&&(e.ya=!1,e.g.play()))}),ut(ot,0)}})}function pd(e,i){return Nr(e,function(){return hd(e,i)})}function cl(e,i,o,c){var h=!1,g=zs("audio",(c||"").split(",")),v=zs("video",(c||"").split(",")),E=v;i=="audio"&&(E=g),E||(E=c),c=Xr(o,E);var S=e.A.forceTransmux;if((!Ss(c)||!e.F&&ll.includes(c))&&(S=!0),S&&(e=Qa(o,E),o=lu(e))){var I=o();g&&v&&(h=!0),c=I.convertCodecs(i,e)}return i=Ds(ea(c)),{ug:I,Fj:h,Eg:ps(c),codec:i,mimeType:c}}function _c(e,i,o,c,h){var g,v,E,S,I,L,O,V,W,pe,Me,De,Fe,We;return Qe(function(gt){return gt.g==1?(g=ds,i==g.za?gt.return(!1):(v=Ds(ea(e.B.get(i))),E=ps(e.B.get(i)),S=cl(e,i,o,c),I=S.ug,L=S.Fj,O=S.Eg,V=S.codec,W=S.mimeType,pe=!0,L&&e.B.has(g.V)&&(Me=cl(e,g.V,o,c),De=Ds(ea(e.B.get(g.V))),Fe=ps(e.B.get(g.V)),pe=De==Me.codec&&Fe==Me.Eg,Me.ug&&Me.ug.destroy()),v===V&&E===O&&pe?(e.j.has(i)&&!I?(e.j.get(i).destroy(),e.j.delete(i)):!e.j.has(i)&&I?e.j.set(i,I):I&&(e.j.has(i)&&e.j.get(i).transmux!=I.transmux?(e.j.get(i).destroy(),e.j.delete(i),e.j.set(i,I)):I.destroy()),gt.return(!1)):(We=!0,(e.m||L&&I&&!e.j.has(i))&&(We=!1),We&&e.A.codecSwitchingStrategy==="smooth"&&tl()?x(gt,bc(e,i,W,I),3):(I&&I.destroy(),x(gt,pd(e,h),3))))):gt.return(!0)})}function Eo(e,i,o,c){if(i==zi)var h=!1;else{h=Ds(ea(e.B.get(i)));var g=ps(e.B.get(i)),v=Xr(o,c),E=e.A.forceTransmux;(!Ss(v)||!e.F&&ll.includes(v))&&(E=!0),o=Qa(o,c),E&&(E=lu(o))&&(E=E(),v=E.convertCodecs(i,o),E.destroy()),i=Ds(ea(v)),v=ps(v),h=h!==i||g!==v}return h?e.A.codecSwitchingStrategy!=="smooth"||!tl()||e.m:!1}var bo=l.URL.createObjectURL,Sc="sequence";function Ei(e,i,o){this.i=e,this.C=i,this.o=this.l=1/0,this.h=1,this.g=this.j=null,this.A=0,this.B=!0,this.I=!1,this.H=0,this.F=o===void 0?!0:o,this.G=0,this.u=!1,this.m=e}p=Ei.prototype,p.getDuration=function(){return this.l},p.vi=function(){return this.h},p.yh=function(e){this.i=e},p.bb=function(e){this.l=e},p.Bi=function(){return this.i},p.wh=function(e){this.A=e},p.Gc=function(e){e&&!this.B&&(this.I=!0),this.B=e},p.Ce=function(e){this.o=e},p.ae=function(){return this.o},p.jg=function(e){this.C=e},p.li=function(){return this.C},p.kh=function(e,i){if(e.length!=0){var o=(Date.now()+this.A)/1e3;if(e=e.filter(function(h){return h.start+i<o}),e.length!=0){var c=e[e.length-1].end+i;this.ne(e[0].start+i),this.h=e.reduce(function(h,g){return Math.max(h,g.end-g.start)},this.h),this.g=Math.max(this.g,c),this.i!=null&&this.F&&!this.u&&(this.i=o-this.g-this.h)}}},p.Ed=function(e){if(e.length!=0){var i=e[0].startTime,o=e[0].endTime,c=(Date.now()+this.A)/1e3;e=T(e);for(var h=e.next();!h.done;h=e.next())h=h.value,c<h.startTime||(i=Math.min(i,h.startTime),o=Math.max(o,h.endTime),this.h=Math.max(this.h,h.endTime-h.startTime));this.ne(i),this.g=Math.max(this.g,o),this.i!=null&&this.F&&!this.u&&(this.i=c-this.g-this.h)}},p.jh=function(e,i){this.ne(e),i==1/0||this.U()||(this.g=Math.max(this.g,i))},p.wi=function(){return this.g},p.ie=function(){this.u=!0},p.Wi=function(){return this.u},p.xh=function(e){this.m=e},p.ri=function(){return this.m},p.ne=function(e){this.j==null?this.j=e:this.I||(this.j=Math.min(this.j,e))},p.Tf=function(e){this.h=Math.max(this.h,e)},p.offset=function(e){this.j!=null&&(this.j+=e),this.g!=null&&(this.g+=e)},p.U=function(){return this.l==1/0&&!this.B},p.yc=function(){return this.l!=1/0&&!this.B},p.pb=function(){return Math.max(this.H,this.cc()-this.o)},p.Bh=function(e){this.H=e},p.cc=function(){return this.U()||this.yc()?Math.min(Math.max(0,(Date.now()+this.A)/1e3-this.h-this.i)+this.G,this.l):this.g?Math.min(this.g,this.l):this.l},p.qd=function(e){var i=Math.max(this.j,this.H);return this.o==1/0?Math.ceil(1e3*i)/1e3:Math.max(i,Math.min(this.cc()-this.o+e,this.ob()))},p.Hb=function(){return this.qd(0)},p.ob=function(){return Math.max(0,this.cc()-(this.U()||this.yc()?this.C:0))},p.Kh=function(){return!(this.i==null||this.g!=null&&this.F)},p.vh=function(e){this.G=e},p.ii=function(){return this.G},_e("shaka.media.PresentationTimeline",Ei),Ei.prototype.getAvailabilityTimeOffset=Ei.prototype.ii,Ei.prototype.setAvailabilityTimeOffset=Ei.prototype.vh,Ei.prototype.usingPresentationStartTime=Ei.prototype.Kh,Ei.prototype.getSeekRangeEnd=Ei.prototype.ob,Ei.prototype.getSeekRangeStart=Ei.prototype.Hb,Ei.prototype.getSafeSeekRangeStart=Ei.prototype.qd,Ei.prototype.getSegmentAvailabilityEnd=Ei.prototype.cc,Ei.prototype.setUserSeekStart=Ei.prototype.Bh,Ei.prototype.getSegmentAvailabilityStart=Ei.prototype.pb,Ei.prototype.isInProgress=Ei.prototype.yc,Ei.prototype.isLive=Ei.prototype.U,Ei.prototype.offset=Ei.prototype.offset,Ei.prototype.notifyMaxSegmentDuration=Ei.prototype.Tf,Ei.prototype.notifyMinSegmentStartTime=Ei.prototype.ne,Ei.prototype.getInitialProgramDateTime=Ei.prototype.ri,Ei.prototype.setInitialProgramDateTime=Ei.prototype.xh,Ei.prototype.isStartTimeLocked=Ei.prototype.Wi,Ei.prototype.lockStartTime=Ei.prototype.ie,Ei.prototype.getMaxSegmentEndTime=Ei.prototype.wi,Ei.prototype.notifyPeriodDuration=Ei.prototype.jh,Ei.prototype.notifySegments=Ei.prototype.Ed,Ei.prototype.notifyTimeRange=Ei.prototype.kh,Ei.prototype.getDelay=Ei.prototype.li,Ei.prototype.setDelay=Ei.prototype.jg,Ei.prototype.getSegmentAvailabilityDuration=Ei.prototype.ae,Ei.prototype.setSegmentAvailabilityDuration=Ei.prototype.Ce,Ei.prototype.setStatic=Ei.prototype.Gc,Ei.prototype.setClockOffset=Ei.prototype.wh,Ei.prototype.getPresentationStartTime=Ei.prototype.Bi,Ei.prototype.setDuration=Ei.prototype.bb,Ei.prototype.setPresentationStartTime=Ei.prototype.yh,Ei.prototype.getMaxSegmentDuration=Ei.prototype.vi,Ei.prototype.getDuration=Ei.prototype.getDuration;function of(e,i,o,c){var h=this;this.u=c,this.g=e,this.B=i,this.h=o,this.o=new ni,this.l=!1,this.F=e.readyState,this.G=this.C=this.j=0,this.m=_o(this),this.A=!1,this.o.D(e,"waiting",function(){return dl(h)}),this.i=new Li(function(){dl(h)}).ua(this.h.gapJumpTimerTime)}of.prototype.release=function(){this.o&&(this.o.release(),this.o=null),this.i!=null&&(this.i.stop(),this.i=null),this.m&&(this.m.release(),this.m=null),this.g=this.B=this.u=null},of.prototype.qe=function(){this.A=!0,this.i&&this.i.ua(this.h.gapJumpTimerTime),dl(this)};function dl(e){if(e.g.readyState!=0){if(e.g.seeking){if(!e.l)return}else e.l=!1;if(!e.g.paused||e.g.currentTime==e.j&&(e.g.autoplay||e.g.currentTime!=e.j)){e.g.readyState!=e.F&&(e.F=e.g.readyState);var i;if(!(i=!e.m)){i=e.m;var o=i.j,c=ch(o),h=o.g.currentTime,g=Date.now()/1e3;(i.g!=h||i.m!=c)&&(i.l=g,i.g=h,i.m=c,i.h=!1),h=g-i.l,(c=h>=i.o&&c&&!i.h)&&(i.i&&i.i(i.g,h),i.h=!0,i.g=o.g.currentTime),i=!c}i&&(i=e.g.currentTime,o=e.g.buffered,c=Ce(o,i,e.h.gapDetectionThreshold),c==null||c==0&&!e.A||(h=o.start(c),(g=e.h.gapPadding)&&(h=Math.ceil(100*(h+g))/100),h>=e.B.ob()||.001>h-i||(c!=0&&o.end(c-1),e.g.currentTime=h,i==e.j&&(e.j=h),e.C++,e.u(new Jn("gapjumped")))))}}}function _o(e){if(!e.h.stallEnabled)return null;var i=e.h.stallSkip;return new gd(new uh(e.g),e.h.stallThreshold,function(){var o;return Qe(function(c){if(c.g==1)return o=Le(e.g.buffered),o.length?i?(e.g.currentTime+=i,c.s(2)):x(c,e.g.play(),3):c.return();if(c.g!=2){if(!e.g)return c.return();e.g.pause(),e.g.play()}e.G++,e.u(new Jn("stalldetected")),ue(c)})})}function gd(e,i,o){this.j=e,this.m=ch(e),this.g=e.g.currentTime,this.l=Date.now()/1e3,this.h=!1,this.o=i,this.i=o}gd.prototype.release=function(){this.i=this.j=null};function uh(e){this.g=e}function ch(e){if(e.g.paused||e.g.playbackRate==0||e.g.buffered.length==0)var i=!1;else e:{i=e.g.currentTime,e=T(Le(e.g.buffered));for(var o=e.next();!o.done;o=e.next())if(o=o.value,!(i<o.start-.1||i>o.end-.5)){i=!0;break e}i=!1}return i}function md(e,i,o,c){i==HTMLMediaElement.HAVE_NOTHING||e.readyState>=i?c():(i=yp.value().get(i),o.ma(e,i,c))}var yp=new Br(function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])});function qt(e,i,o,c){var h=this;this.g=e,this.m=i,this.u=o,this.l=null,this.j=function(){return h.l==null&&(h.l=c()),h.l},this.o=!1,this.h=new ni,this.i=new br(e),md(this.g,HTMLMediaElement.HAVE_METADATA,this.h,function(){mi(h,h.j())})}qt.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.i!=null&&(this.i.release(),this.i=null),this.m=function(){},this.g=null};function Dn(e){return e.o?e.g.currentTime:e.j()}function oi(e,i){0<e.g.readyState?Cs(e.i,i):md(e.g,HTMLMediaElement.HAVE_METADATA,e.h,function(){mi(e,e.j())})}function mi(e,i){.001>Math.abs(e.g.currentTime-i)?Yi(e):(e.h.ma(e.g,"seeking",function(){Yi(e)}),Cs(e.i,e.g.currentTime&&e.g.currentTime!=0?e.g.currentTime:i))}function Yi(e){e.o=!0,e.h.D(e.g,"seeking",function(){return e.m()}),e.u(e.g.currentTime)}function br(e){var i=this;this.g=e,this.m=10,this.j=this.l=this.i=0,this.h=new Li(function(){0>=i.i||i.g.currentTime!=i.l||i.g.currentTime===i.j?i.h.stop():(i.g.currentTime=i.j,i.i--)})}br.prototype.release=function(){this.h&&(this.h.stop(),this.h=null),this.g=null};function Cs(e,i){e.l=e.g.currentTime,e.j=i,e.i=e.m,e.g.currentTime=i,e.h.ua(.1)}function io(e){this.h=e,this.j=!1,this.g=null,this.i=new ni}p=io.prototype,p.ready=function(){function e(){if(i.g==null||i.g==0&&i.h.duration!=1/0)i.j=!0;else{var o=i.h.currentTime,c=i.g;0>i.g&&(c=Math.max(0,o+i.g)),o!=c?(i.i.ma(i.h,"seeking",function(){i.j=!0}),i.h.currentTime=c):i.j=!0}}var i=this;md(this.h,HTMLMediaElement.HAVE_CURRENT_DATA,this.i,function(){e()})},p.release=function(){this.i&&(this.i.release(),this.i=null),this.h=null},p.af=function(e){this.g=this.j?this.g:e},p.Od=function(){return(this.j?this.h.currentTime:this.g)||0},p.Ag=function(){return 0},p.zg=function(){return 0},p.ih=function(){};function um(e,i,o,c,h,g){var v=this;this.i=e,this.g=i.presentationTimeline,this.l=o,this.u=h,this.o=null,this.j=new of(e,i.presentationTimeline,o,g),this.h=new qt(e,function(){e:{var E=v.j;E.l=!0,E.A=!1,E.i&&E.i.ua(E.h.gapJumpTimerTime),dl(E);var S=Dn(v.h);if(E=g1(v,S),!ic()&&.001<Math.abs(E-S)){if(S=!1,!Bi()||Bi()&&Ms())S=!0;else{var I=Date.now()/1e3,L=Bi()&&Mo()?3:1;(!v.o||v.o<I-L)&&(v.o=I,S=!0)}if(S){oi(v.h,E),E=void 0;break e}}v.u(),E=void 0}return E},function(E){var S=v.j;S.g.seeking&&!S.l&&(S.l=!0,S.j=E),S.i&&S.i.ua(S.h.gapJumpTimerTime),dl(S)},function(){var E=c;return E==null?E=1/0>v.g.getDuration()?v.g.Hb():v.g.ob():0>E&&(E=v.g.ob()+E),vp(v,m1(v,E))}),this.m=new Li(function(){if(v.i.readyState!=0&&!v.i.paused){var E=Dn(v.h),S=v.g.Hb(),I=v.g.ob();3>I-S&&(S=I-3),E<S&&(E=g1(v,E),v.i.currentTime=E)}})}p=um.prototype,p.ready=function(){this.m.ua(.25)},p.release=function(){this.h&&(this.h.release(),this.h=null),this.j&&(this.j.release(),this.j=null),this.m&&(this.m.stop(),this.m=null),this.i=this.h=this.g=this.l=null,this.u=function(){}},p.af=function(e){oi(this.h,e)},p.Od=function(){var e=Dn(this.h);return 0<this.i.readyState&&!this.i.paused?m1(this,e):e},p.Ag=function(){return this.j.G},p.zg=function(){return this.j.C},p.ih=function(){this.j.qe()};function vp(e,i){var o=e.g.getDuration();return i>=o?o-e.l.durationBackoff:i}function g1(e,i){var o=e.l.rebufferingGoal,c=e.l.safeSeekOffset,h=e.g.Hb(),g=e.g.ob(),v=e.g.getDuration();3>g-h&&(h=g-3);var E=e.g.qd(o),S=e.g.qd(c);return o=e.g.qd(o+c),i>=v?vp(e,i):i>g?g-e.l.safeSeekEndOffset:i<h?ke(e.i.buffered,S)?S:o:i>=E||ke(e.i.buffered,i)?i:o}function m1(e,i){var o=e.g.Hb();return i<o?o:(e=e.g.ob(),i>e?e:i)}function pr(e){this.g=e,this.m=null,this.i=0,this.o=!1}p=pr.prototype,p.getNumReferences=function(){return this.g.length},p.getNumEvicted=function(){return this.i},p.release=function(){this.o||(this.g=[],this.m&&this.m.stop(),this.m=null)},p.bj=function(){this.o=!0},p.Eb=function(e){for(var i=T(this.g),o=i.next();!o.done;o=i.next())e(o.value)};function Hu(e){return e.g[0]||null}p.find=function(e){for(var i=this.g.length-1,o=i;0<=o;--o){var c=this.g[o],h=o<i?this.g[o+1].startTime:c.endTime;if(e>=c.startTime&&e<h)return o+this.i}return this.g.length&&e<this.g[0].startTime?this.i:null},p.get=function(e){return this.g.length==0?null:(e-=this.i,0>e||e>=this.g.length?null:this.g[e])},p.offset=function(e){if(!this.o)for(var i=T(this.g),o=i.next();!o.done;o=i.next())o.value.offset(e)},p.ke=function(e){if(!this.o&&e.length){var i=Math.round(1e3*e[0].startTime)/1e3;this.g=this.g.filter(function(o){return Math.round(1e3*o.startTime)/1e3<i}),this.g.push.apply(this.g,k(e))}},p.Bd=function(e,i){var o=this;e=e.filter(function(c){return c.endTime>i&&(o.g.length==0||c.endTime>o.g[0].startTime)}),this.ke(e),this.Oa(i)},p.Oa=function(e){if(!this.o){var i=this.g.length;this.g=this.g.filter(function(o){return o.endTime>e}),this.i+=i-this.g.length}},p.Oc=function(e,i,o){if(o=o===void 0?!1:o,!this.o){for(;this.g.length&&this.g[this.g.length-1].startTime>=i;)this.g.pop();for(;this.g.length&&this.g[0].endTime<=e;)this.g.shift(),o||this.i++;this.g.length!=0&&(e=this.g[this.g.length-1],i=new X(e.startTime,i,e.C,e.Sa,e.wa,e.Y,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.g,e.tilesLayout,e.B,e.h,e.status,e.aesKey),i.mimeType=e.mimeType,i.codecs=e.codecs,i.i=e.i,this.g[this.g.length-1]=i)}},p.Ie=function(e,i){var o=this;this.o||(this.m&&this.m.stop(),this.m=new Li(function(){var c=i();c?o.g.push.apply(o.g,k(c)):(o.m.stop(),o.m=null)}),this.m.ua(e))},pr.prototype[Symbol.iterator]=function(){return this.Gb(0)},pr.prototype.Gb=function(e,i,o){i=i===void 0?!1:i,o=o===void 0?!1:o;var c=this.find(e);if(c==null)return null;var h=this.get(c);o?c++:c--;var g=-1;if(h&&0<h.g.length)for(var v=h.g.length-1;0<=v;--v){var E=h.g[v];if(e>=E.startTime&&e<E.endTime){if(!i){for(;v&&!E.l;)v--,E=h.g[v];if(!E.l)return Mt("No independent partial segment found!"),null}o?c--:c++,g=v-1;break}}return new zl(this,c,g,o)};function I0(e,i,o){return e=new X(e,e+i,function(){return o},0,null,null,e,e,e+i),new pr([e])}_e("shaka.media.SegmentIndex",pr),pr.forSingleSegment=I0,pr.prototype.getIteratorForTime=pr.prototype.Gb,pr.prototype.updateEvery=pr.prototype.Ie,pr.prototype.fit=pr.prototype.Oc,pr.prototype.evict=pr.prototype.Oa,pr.prototype.mergeAndEvict=pr.prototype.Bd,pr.prototype.offset=pr.prototype.offset,pr.prototype.get=pr.prototype.get,pr.prototype.find=pr.prototype.find,pr.prototype.markImmutable=pr.prototype.bj,pr.prototype.release=pr.prototype.release,pr.prototype.getNumEvicted=pr.prototype.getNumEvicted,pr.prototype.getNumReferences=pr.prototype.getNumReferences;function zl(e,i,o,c){this.i=e,this.h=i,this.g=o,this.reverse=c}p=zl.prototype,p.ed=function(e){this.reverse=e},p.di=function(){return this.h},p.current=function(){var e=this.i.get(this.h);return e&&0<e.g.length&&e.A&&this.g>=e.g.length&&(this.h++,this.g=0,e=this.i.get(this.h)),e&&0<e.g.length?e.g[this.g]:e},p.next=function(){var e=this.i.get(this.h);return this.reverse?e&&0<e.g.length?(this.g--,0>this.g&&(this.h--,this.g=(e=this.i.get(this.h))&&0<e.g.length?e.g.length-1:0)):(this.h--,this.g=0):e&&0<e.g.length?(this.g++,e.A&&this.g==e.g.length&&(this.h++,this.g=0)):(this.h++,this.g=0),e=this.current(),{value:e,done:!e}},p.dg=function(){var e=this.current();if(e.o&&!e.l&&(e=this.i.get(this.h))&&0<e.g.length)for(var i=e.g[this.g];i.l&&!(0>=this.g);)this.g--,i=e.g[this.g]},_e("shaka.media.SegmentIterator",zl),zl.prototype.resetToLastIndependent=zl.prototype.dg,zl.prototype.next=zl.prototype.next,zl.prototype.current=zl.prototype.current,zl.prototype.currentPosition=zl.prototype.di,zl.prototype.setReverse=zl.prototype.ed;function rs(){pr.call(this,[]),this.h=[]}j(rs,pr),p=rs.prototype,p.clone=function(){var e=new rs;return e.h=this.h.slice(),e.i=this.i,e},p.release=function(){for(var e=T(this.h),i=e.next();!i.done;i=e.next())i.value.release();this.h=[]},p.Eb=function(e){for(var i=T(this.h),o=i.next();!o.done;o=i.next())o.value.Eb(e)},p.find=function(e){for(var i=this.i,o=T(this.h),c=o.next();!c.done;c=o.next()){c=c.value;var h=c.find(e);if(h!=null)return h+i;i+=c.getNumEvicted()+c.getNumReferences()}return null},p.get=function(e){for(var i=this.i,o=T(this.h),c=o.next();!c.done;c=o.next()){c=c.value;var h=c.get(e-i);if(h)return h;h=c.getNumReferences(),i+=c.getNumEvicted()+h}return null},p.offset=function(){},p.ke=function(){},p.Oa=function(e){for(var i=T(this.h),o=i.next();!o.done;o=i.next())o.value.Oa(e);for(;1<this.h.length&&this.h[0].getNumReferences()==0;)e=this.h.shift(),this.i+=e.getNumEvicted(),e.release()},p.Bd=function(){},p.Oc=function(){},p.Ie=function(){},_e("shaka.media.MetaSegmentIndex",rs),rs.prototype.updateEvery=rs.prototype.Ie,rs.prototype.fit=rs.prototype.Oc,rs.prototype.mergeAndEvict=rs.prototype.Bd,rs.prototype.evict=rs.prototype.Oa,rs.prototype.merge=rs.prototype.ke,rs.prototype.offset=rs.prototype.offset,rs.prototype.get=rs.prototype.get,rs.prototype.find=rs.prototype.find,rs.prototype.forEachTopLevelReference=rs.prototype.Eb,rs.prototype.release=rs.prototype.release;function cm(e){var i=this;this.g=e,this.j=!1,this.i=this.g.$d(),this.h=new Li(function(){i.g.gh(.25*i.i)})}cm.prototype.release=function(){this.set(this.sc()),this.h&&(this.h.stop(),this.h=null),this.g=null},cm.prototype.set=function(e){this.i=e,Ab(this)},cm.prototype.sc=function(){return this.g.sc()};function Ab(e){e.h.stop();var i=e.j?0:e.i;if(0<=i)try{e.g.$d()!=i&&e.g.mg(i);return}catch{}e.h.ua(.25),e.g.$d()!=0&&e.g.mg(0)}function wb(e){var i=this;this.j=e,this.h=new ni,this.g=new Set,this.i=new Li(function(){y1(i,!1)}).sb(),e.paused||this.i.ua(.25),this.h.D(e,"playing",function(){i.i.sb().ua(.25)}),this.h.D(e,"pause",function(){i.i.stop()})}wb.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.i.stop();for(var e=T(this.g),i=e.next();!i.done;i=e.next())i.value.release();this.g.clear()};function y1(e,i){var o=e.j.currentTime;e=T(e.g);for(var c=e.next();!c.done;c=e.next())c.value.j(o,i)}function C0(e){xr.call(this),this.g=new Map,this.h=e}j(C0,xr),C0.prototype.release=function(){this.g.clear(),xr.prototype.release.call(this)};function SU(e,i){var o=e.g.get(i);return o||(o={Jd:[],mf:null,contentType:i},e.g.set(i,o)),o}function xU(e,i,o){var c=SU(e,i.contentType);AU(e,c),e={Wc:i,position:o},c=c.Jd,i=c.findIndex(function(h){return h.position>=o}),0<=i?c.splice(i,c[i].position==o?1:0,e):c.push(e)}C0.prototype.j=function(e){for(var i=T(this.g.values()),o=i.next();!o.done;o=i.next()){o=o.value;var c=o.mf;e:{for(var h=o.Jd,g=h.length-1;0<=g;g--){var v=h[g];if(v.position<=e){h=v.Wc;break e}}h=null}g=h&&!(c===h||c&&h&&c.bandwidth==h.bandwidth&&c.audioSamplingRate==h.audioSamplingRate&&c.codecs==h.codecs&&c.contentType==h.contentType&&c.frameRate==h.frameRate&&c.height==h.height&&c.mimeType==h.mimeType&&c.channelsCount==h.channelsCount&&c.pixelAspectRatio==h.pixelAspectRatio&&c.width==h.width),v=h&&c&&h.label&&c.label&&c.label!==h.label;var E=h&&c&&h.language&&c.language&&c.language!==h.language;c=h&&c&&h.roles&&c.roles&&!rc(c.roles,h.roles),(v||E||c)&&v1(this,e,h.contentType)&&(o.mf=h,c=new Jn("audiotrackchange",new Map([["quality",h],["position",e]])),this.dispatchEvent(c)),g&&v1(this,e,h.contentType)&&(o.mf=h,JSON.stringify(h),o=new Jn("qualitychange",new Map([["quality",h],["position",e]])),this.dispatchEvent(o))}};function v1(e,i,o){return!!((e=e.h()[o])&&0<e.length&&(o=e[e.length-1].end,i>=e[0].start&&i<o))}function AU(e,i){if((e=e.h()[i.contentType])&&0<e.length){var o=e[0].start,c=e[e.length-1].end,h=i.Jd;i.Jd=h.filter(function(g,v){return!(g.position<=o&&v+1<h.length&&h[v+1].position<=o||g.position>=c)})}else i.Jd=[]}function k0(e){var i={bandwidth:e.bandwidth||0,audioSamplingRate:null,codecs:e.codecs,contentType:e.type,frameRate:null,height:null,mimeType:e.mimeType,channelsCount:null,pixelAspectRatio:null,width:null,label:null,roles:e.roles,language:null};return e.type=="video"&&(i.frameRate=e.frameRate||null,i.height=e.height||null,i.pixelAspectRatio=e.pixelAspectRatio||null,i.width=e.width||null),e.type=="audio"&&(i.audioSamplingRate=e.audioSamplingRate,i.channelsCount=e.channelsCount,i.label=e.label||null,i.language=e.language),i}function dm(e){xr.call(this),this.h=new Map,this.i=e,this.g=null}j(dm,xr),dm.prototype.release=function(){this.h.clear(),this.g&&(this.g.stop(),this.g=null),xr.prototype.release.call(this)};function Ib(e,i){var o=i.schemeIdUri+"_"+i.id+"_"+(i.startTime.toFixed(1)+"_"+i.endTime.toFixed(1));e.h.has(o)||(e.h.set(o,i),i=new Jn("regionadd",new Map([["region",i]])),e.dispatchEvent(i),wU(e))}function wU(e){e.g||(e.g=new Li(function(){for(var i=e.i(),o=T(e.h),c=o.next();!c.done;c=o.next()){var h=T(c.value);c=h.next().value,h=h.next().value,h.endTime<i.start&&(e.h.delete(c),c=new Jn("regionremove",new Map([["region",h]])),e.dispatchEvent(c))}!e.h.size&&e.g&&(e.g.stop(),e.g=null)}).ua(2))}function D0(e,i,o,c){this.m=e,this.i=i,this.l=o,this.h=new Map,this.j=new Map,this.g=null,this.o=c}function IU(e,i){e.l=i,e=T(e.h.values());for(var o=e.next();!o.done;o=e.next())o.value.g=i}function fm(e,i,o){if(o=o===void 0?!1:o,!e.i.segmentIndex||(e.g||(e.g=e.i.segmentIndex.Gb(i,!0,e.o)),!e.g))return Promise.resolve();for(o&&e.g.next(),i=[];e.h.size<e.m&&(o=e.g.next().value,!!o);){var c=!0;o.isPreload()&&o.wa!=null&&(c=!1),o.dc()==2&&(c=!1),o.Ib(!1)&&(c=!1),c&&o.Y&&i.push(T1(e,o.Y)),c&&!e.h.has(o)&&(c=new kb(e.l),i.push(_1(c,o,e.i)),e.h.set(o,c))}return Cb(e),Promise.all(i)}function T1(e,i){if(!e.i.segmentIndex||i.Ib()||Array.from(e.j.keys()).some(function(h){return oe(h,i)}))return Promise.resolve();var o=new kb(e.l),c=_1(o,i,e.i);return e.j.set(i,o),c}function E1(e,i){i=T(i.keys());for(var o=i.next();!o.done;o=i.next())(o=o.value)&&hm(e,o)}function Gu(e){E1(e,e.h),E1(e,e.j),e.g=null}D0.prototype.Oa=function(e,i){i=i===void 0?!1:i;for(var o=T(this.h.keys()),c=o.next();!c.done;c=o.next())c=c.value,e>c.endTime&&hm(this,c);i&&Cb(this)},D0.prototype.ed=function(e){this.o=e,this.g&&this.g.ed(e)};function Cb(e){for(var i=Array.from(e.h.keys()),o=T(e.j.keys()),c=o.next(),h={};!c.done;h={Nf:void 0},c=o.next())h.Nf=c.value,i.some(function(g){return function(v){return oe(v.Y,g.Nf)}}(h))||hm(e,h.Nf)}function b1(e,i){e.m=i;for(var o=Array.from(e.h.keys());o.length>i;){var c=o.pop();c&&hm(e,c)}Cb(e)}function CU(e,i){i&&i!==e.i&&(Gu(e),e.i=i)}function hm(e,i){var o=e.h;i instanceof B&&(o=e.j),e=o.get(i),o.delete(i),e&&e.abort()}function kb(e){this.g=e,this.Gd=this.pg=null}function _1(e,i,o){var c=new Uint8Array(0);return e.Gd=e.g(i,o,function(h){return Qe(function(g){if(g.g==1)return 0<c.byteLength?c=qr(c,h):c=h,e.pg?x(g,e.pg(c),3):g.s(0);c=new Uint8Array(0),ue(g)})}),e.Gd.promise.catch(function(h){return h instanceof it&&h.code==7001?Promise.resolve():Promise.reject(h)})}kb.prototype.abort=function(){this.Gd&&this.Gd.abort()};function Db(e){var i=ps(e),o=i.split("/")[0];return e=ea(e),{type:o,mimeType:i,codecs:e,language:null,height:null,width:null,channelCount:null,sampleRate:null,closedCaptions:new Map,Nd:null,colorGamut:null,frameRate:null}}function kU(e,i,o){function c(st){Fe=st.name;var _t=st.reader;_t.skip(24);var xt=_t.na(),Ht=_t.na();_t.skip(50),V=String(xt),O=String(Ht),st.reader.ta()&&$i(st)}function h(st){var _t=im(st.reader);W=_t.channelCount,pe=_t.sampleRate,g(st.name)}function g(st){switch(st=st.toLowerCase(),st){case"avc1":case"avc3":E.push(st+".42E01E"),I=!0;break;case"hev1":case"hvc1":E.push(st+".1.6.L93.90"),I=!0;break;case"dvh1":case"dvhe":E.push(st+".05.04"),I=!0;break;case"vp09":E.push(st+".00.10.08"),I=!0;break;case"av01":E.push(st+".0.01M.08"),I=!0;break;case"mp4a":v.push("mp4a.40.2"),S=!0;break;case"ac-3":case"ec-3":case"ac-4":case"opus":case"flac":v.push(st),S=!0}}var v=[],E=[],S=!1,I=!1,L=null,O=null,V=null,W=null,pe=null,Me=null,De=null,Fe;if(new Ar().box("moov",$i).box("trak",$i).box("mdia",$i).R("mdhd",function(st){L=hp(st.reader,st.version).language}).box("minf",$i).box("stbl",$i).R("stsd",zu).box("mp4a",function(st){var _t=im(st.reader);W=_t.channelCount,pe=_t.sampleRate,st.reader.ta()?$i(st):g(st.name)}).box("esds",function(st){st=st.reader;for(var _t="mp4a",xt,Ht;st.ta();){xt=st.X();for(var Pt=st.X();Pt&128;)Pt=st.X();if(xt==3)st.na(),Pt=st.X(),Pt&128&&st.na(),Pt&64&&st.skip(st.X()),Pt&32&&st.na();else if(xt==4)Ht=st.X(),st.skip(12);else if(xt==5)break}Ht&&(_t+="."+lh(Ht),xt==5&&st.ta()&&(xt=st.X(),Ht=(xt&248)>>3,Ht===31&&st.ta()&&(Ht=32+((xt&7)<<3)+((st.X()&224)>>5)),_t+="."+Ht)),v.push(_t),S=!0}).box("ac-3",h).box("ec-3",h).box("ac-4",h).box("Opus",h).box("fLaC",h).box("avc1",c).box("avc3",c).box("hev1",c).box("hvc1",c).box("dva1",c).box("dvav",c).box("dvh1",c).box("dvhe",c).box("vp09",c).box("av01",c).box("avcC",function(st){var _t=Fe||"";switch(Fe){case"dvav":_t="avc3";break;case"dva1":_t="avc1"}st=st.reader,st.skip(1),st=_t+"."+lh(st.X())+lh(st.X())+lh(st.X()),E.push(st),I=!0}).box("hvcC",function(st){var _t=Fe||"";switch(Fe){case"dvh1":_t="hvc1";break;case"dvhe":_t="hev1"}var xt=st.reader;xt.skip(1),st=xt.X();var Ht=["","A","B","C"][st>>6],Pt=st&31,jt=xt.S(),Gt=(st&32)>>5?"H":"L";st=[xt.X(),xt.X(),xt.X(),xt.X(),xt.X(),xt.X()],xt=xt.X();for(var Yt=0,Zt=0;32>Zt&&(Yt|=jt&1,Zt!=31);Zt++)Yt<<=1,jt>>=1;for(_t=_t+("."+Ht+Pt)+("."+lh(Yt,!0)),_t+="."+Gt+xt,Ht="",Pt=st.length;Pt--;)((Gt=st[Pt])||Ht)&&(Ht="."+Gt.toString(16).toUpperCase()+Ht);_t+=Ht,E.push(_t),I=!0}).box("dvcC",function(st){var _t=Fe||"";switch(Fe){case"hvc1":_t="dvh1";break;case"hev1":_t="dvhe";break;case"avc1":_t="dva1";break;case"avc3":_t="dvav";break;case"av01":_t="dav1"}var xt=st.reader;xt.skip(2),st=xt.X(),xt=xt.X(),E.push(_t+"."+no(st>>1&127)+"."+no(st<<5&32|xt>>3&31)),I=!0}).box("dvvC",function(st){var _t=Fe||"";switch(Fe){case"hvc1":_t="dvh1";break;case"hev1":_t="dvhe";break;case"avc1":_t="dva1";break;case"avc3":_t="dvav";break;case"av01":_t="dav1"}var xt=st.reader;xt.skip(2),st=xt.X(),xt=xt.X(),E.push(_t+"."+no(st>>1&127)+"."+no(st<<5&32|xt>>3&31)),I=!0}).R("vpcC",function(st){var _t=Fe||"",xt=st.reader;st=xt.X();var Ht=xt.X();xt=xt.X()>>4&15,E.push(_t+"."+no(st)+"."+no(Ht)+"."+no(xt)),I=!0}).box("av1C",function(st){var _t=Fe||"";switch(Fe){case"dav1":_t="av01"}var xt=st.reader;xt.skip(1),st=xt.X(),xt=xt.X();var Ht=st>>>5,Pt=(xt&64)>>6;E.push(_t+"."+Ht+"."+no(st&31)+(xt>>>7?"H":"M")+"."+no(Ht===2&&Pt?(xt&32)>>5?12:10:Pt?10:8)+"."+((xt&16)>>4)+"."+((xt&8)>>3)+((xt&4)>>2)+(xt&3)+"."+no(1)+"."+no(1)+"."+no(1)+".0"),I=!0}).box("enca",op).box("encv",to).box("sinf",$i).box("frma",function(st){st=b0(st.reader).codec,g(st)}).box("colr",function(st){E=E.map(function(Ht){if(Ht.startsWith("av01.")){var Pt=st.reader,jt=Pt.Ba(),Gt=Pt.Cb(4),Yt=String.fromCharCode(Gt[0]);if(Yt+=String.fromCharCode(Gt[1]),Yt+=String.fromCharCode(Gt[2]),Yt+=String.fromCharCode(Gt[3]),Yt==="nclx"){Gt=Pt.na(),Yt=Pt.na();var Zt=Pt.na(),Xt=Pt.X()>>7,En=Ht.split(".");En.length==10&&(En[6]=no(Gt),En[7]=no(Yt),En[8]=no(Zt),En[9]=String(Xt),Ht=En.join("."))}Pt.seek(jt)}return Ht});var _t=Tb(st.reader),xt=_t.colorGamut;Me=_t.Nd,De=xt}).parse(e||i,!0),!v.length&&!E.length)return null;var We=S&&!I,gt=new Map;if(I&&!o){o=new Yr("video/mp4"),e&&o.init(e);try{o.i(i);for(var ht=T(o.j()),It=ht.next();!It.done;It=ht.next()){var ot=It.value;gt.set(ot,ot)}}catch{}o.g()}return{type:We?"audio":"video",mimeType:We?"audio/mp4":"video/mp4",codecs:Rb(v.concat(E)).join(", "),language:L,height:O,width:V,channelCount:W,sampleRate:pe,closedCaptions:gt,Nd:Me,colorGamut:De,frameRate:null}}function Rb(e){var i=new Set,o=[];e=T(e);for(var c=e.next();!c.done;c=e.next()){c=c.value;var h=yo(c);i.has(h)||(o.push(c),i.add(h))}return i=Iu("audio",o),c=Iu("video",o),e=Iu(zi,o),c=DU(c),i=i.concat(c).concat(e),o.length&&!i.length?o:i}function DU(e){if(1>=e.length)return e;var i=e.find(function(o){return o.startsWith("dvav.")||o.startsWith("dva1.")||o.startsWith("dvh1.")||o.startsWith("dvhe.")||o.startsWith("dav1.")||o.startsWith("dvc1.")||o.startsWith("dvi1.")});return i?Ss('video/mp4; codecs="'+i+'"')?[i]:e.filter(function(o){return o!=i}):e}function RU(e){var i=null;return new Ar().box("moov",$i).box("trak",$i).box("mdia",$i).box("minf",$i).box("stbl",$i).R("stsd",zu).box("encv",to).box("enca",op).box("sinf",$i).box("schi",$i).R("tenc",function(o){o=o.reader,o.X(),o.X(),o.X(),o.X(),i=No(o.Cb(16))}).parse(e,!0),i}function Lb(e,i,o){var c,h,g,v,E;return Qe(function(S){if(S.g==1)return c=i,c.cryptoKey?S.s(2):x(S,c.fetchKey(),3);if(h=c.iv,!h)for(h=jn(new ArrayBuffer(16)),g=c.firstMediaSequenceNumber+o,v=h.byteLength-1;0<=v;v--)h[v]=g&255,g>>=8;return i.blockCipherMode=="CBC"?E={name:"AES-CBC",iv:h}:E={name:"AES-CTR",counter:h,length:64},S.return(l.crypto.subtle.decrypt(E,c.cryptoKey,e))})}function pm(e,i,o,c,h){return e=ws(e,c,h),(i!=0||o!=null)&&(e.headers.Range=o?"bytes="+i+"-"+o:"bytes="+i+"-"),e}function S1(e,i){var o=this;this.g=i,this.j=e,this.h=null,this.K=new Map,this.C=1,this.u=this.l=null,this.O=0,this.i=new Map,this.I=!1,this.P=null,this.B=!1,this.m=new ld(function(){return LU(o)}),this.L=Date.now()/1e3,this.o=new Map,this.M={projection:null,hfov:null},this.W=0,this.T=1/0,this.F=null,this.A=new Li(function(){if(o.j&&o.g)if(o.j.presentationTimeline.U()){var c=o.j.presentationTimeline.Hb(),h=o.j.presentationTimeline.ob();1<h-c?an(o.g.aa,c,h):Ft(o.g.aa)}else Ft(o.g.aa),o.A&&o.A.stop()}),this.G=null,this.H=new Li(function(){var c=o.g.video;!c.ended&&o.G&&(c.currentTime=o.G,o.G=null)})}p=S1.prototype,p.destroy=function(){return this.m.destroy()};function LU(e){var i,o,c,h,g,v,E;return Qe(function(S){if(S.g==1){for(i=[],o=T(e.i.values()),c=o.next();!c.done;c=o.next())h=c.value,Ep(h),i.push(mm(h)),h.ba&&(Gu(h.ba),h.ba=null);for(g=T(e.o.values()),v=g.next();!v.done;v=g.next())E=v.value,Gu(E);return x(S,Promise.all(i),2)}e.i.clear(),e.o.clear(),e.g=null,e.j=null,e.h=null,e.A&&e.A.stop(),e.A=null,e.H&&e.H.stop(),e.H=null,e.G=null,ue(S)})}p.configure=function(e){if(this.h=e,this.P=new Jy({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor},!0),e.disableAudioPrefetch){var i=this.i.get("audio");i&&i.ba&&(Gu(i.ba),i.ba=null),i=T(this.o.keys());for(var o=i.next();!o.done;o=i.next())o=o.value,Gu(this.o.get(o)),this.o.delete(o)}for(e.disableTextPrefetch&&(i=this.i.get(zi))&&i.ba&&(Gu(i.ba),i.ba=null),e.disableVideoPrefetch&&(i=this.i.get("video"))&&i.ba&&(Gu(i.ba),i.ba=null),i=T(this.i.keys()),o=i.next();!o.done;o=i.next())o=this.i.get(o.value),o.ba?(b1(o.ba,e.segmentPrefetchLimit),0<e.segmentPrefetchLimit||(Gu(o.ba),o.ba=null)):0<e.segmentPrefetchLimit&&(o.ba=Mb(this,o.stream));e.disableAudioPrefetch||BU(this)};function PU(e,i,o){e.j.presentationTimeline.U()||(e.W=i,e.T=o)}p.start=function(e){var i=this;return Qe(function(o){if(o.g==1)return x(o,UU(i,e||new Map),2);Lr(i.m),i.I=!0,ue(o)})};function MU(e,i){var o,c,h,g,v,E;Qe(function(S){switch(S.g){case 1:return o=ds,e.O++,c=e.O,$e(S,2),x(S,tn(e.g.aa,o.za),4);case 4:lt(S,3);break;case 2:h=et(S),e.g&&e.g.onError(h);case 3:g=Xr(i.mimeType,i.codecs),gn(e.g.aa,g,e.j.sequenceMode,i.external),v=e.g.aa.ea,(v.isTextVisible()||e.h.alwaysStreamText)&&e.O==c&&(E=P0(e,i),e.i.set(o.za,E),ro(e,E,0)),ue(S)}})}function NU(e){var i=e.i.get(zi);i&&(Ep(i),mm(i).catch(function(){}),e.F=e.i.get(zi),e.i.delete(zi)),e.u=null}function Pb(e,i){for(var o=0>e.g.gb(),c=T(e.i.values()),h=c.next();!h.done;h=c.next())h=h.value,h.ja&&h.ja.ed(o),h.ba&&h.ba.ed(o);for(c=T(e.o.values()),h=c.next();!h.done;h=c.next())h.value.ed(o);(o=e.i.get("video"))&&(c=o.stream)&&(i?(i=c.trickModeVideo)&&!o.fc&&(Tp(e,i,!1,0,!1),o.fc=c):(i=o.fc)&&(o.fc=null,Tp(e,i,!0,0,!1)))}function x1(e,i,o,c,h,g){o=o===void 0?!1:o,c=c===void 0?0:c,h=h===void 0?!1:h,g=g===void 0?!1:g,e.l=i,e.I&&(i.video&&Tp(e,i.video,o,c,h,g),i.audio&&Tp(e,i.audio,o,c,h,g))}function R0(e,i){Qe(function(o){if(o.g==1)return e.F=null,e.u=i,e.I?i.segmentIndex?o.s(2):x(o,i.createSegmentIndex(),2):o.return();Tp(e,i,!0,0,!1),ue(o)})}function OU(e,i){for(var o=T(e.K.entries()),c=o.next();!c.done;c=o.next()){var h=T(c.value);c=h.next().value,h=h.next().value,c.includes(i.type)&&(h(),e.K.delete(c))}}function Tp(e,i,o,c,h,g){var v=e.i.get(i.type);v||i.type!=zi?v&&(v.fc&&(i.trickModeVideo?(v.fc=i,i=i.trickModeVideo):v.fc=null),v.stream!=i||h)&&(e.o.has(i)?v.ba=e.o.get(i):v.ba&&CU(v.ba,i),i.type==zi&&(h=Xr(i.mimeType,i.codecs),gn(e.g.aa,h,e.j.sequenceMode,i.external)),!e.o.has(v.stream)&&v.stream.closeSegmentIndex&&(v.Da?(h="("+v.type+":"+v.stream.id+")",e.K.has(h)||e.K.set(h,v.stream.closeSegmentIndex)):v.stream.closeSegmentIndex()),h=v.stream.isAudioMuxedInVideo!=i.isAudioMuxedInVideo,v.stream=i,v.ja=null,v.bf=!!g,i.dependencyStream?v.nd=P0(e,i.dependencyStream):v.nd=null,h?N0(e,!0,!1):(o?v.nc?v.Re=!0:v.Da?(v.lc=!0,v.Vd=c,v.Re=!0):(Ep(v),Ub(e,v,!0,c).catch(function(E){e.g&&e.g.onError(E)})):v.Da||v.kb||ro(e,v,0),FU(e,v).catch(function(E){e.g&&e.g.onError(E)}))):MU(e,i)}function FU(e,i){var o,c;return Qe(function(h){if(h.g==1)return i.rb?(o=i.stream,c=i.rb,o.segmentIndex?h.s(2):x(h,o.createSegmentIndex(),2)):h.return();if(i.rb!=c||i.stream!=o)return h.return();var g=e.g.Rc(),v=Bn(e.g.aa,i.type),E=i.stream.segmentIndex.find(i.xa?i.xa.endTime:g),S=E==null?null:i.stream.segmentIndex.get(E);E=S&&S.wa?S.wa-S.Sa:null,S&&!E&&(E=(S.endTime-S.getStartTime())*(i.stream.bandwidth||0)/8),E?((S=S.Y)&&(E+=(S.wa?S.wa-S.Sa:null)||0),S=e.g.getBandwidthEstimate(),g=8*E/S<(v||0)-g-e.h.rebufferingGoal||i.rb.h.g>E):g=!1,g&&i.rb.abort(),ue(h)})}p.Fc=function(){if(this.g){for(var e=this.g.Rc(),i=T(this.i.keys()),o=i.next();!o.done;o=i.next()){var c=o.value;o=this.i.get(c);var h=this.g.aa;if(c==zi?(h=h.h,h=h.g==null||h.h==null?!1:e>=h.g&&e<h.h):(h=zn(h,c),h=ke(h,e)),!h){if(this.L=0,o.ba&&(o.ba.g=null),o.type==="audio"){h=T(this.o.values());for(var g=h.next();!g.done;g=h.next())g.value.g=null}o.ja=null,(Bn(this.g.aa,c)!=null||o.Da)&&L0(this,o),o.rb&&(o.rb.abort(),o.rb=null),c===zi&&(c=this.g.aa,c.L&&c.L.g()),o.Fc=!0}}this.h.crossBoundaryStrategy!=="keep"&&zb(this)}};function L0(e,i){i.nc||i.lc||(i.Da?(i.lc=!0,i.Vd=0):kn(e.g.aa,i.type)==null?i.kb==null&&ro(e,i,0):(Ep(i),Ub(e,i,!1,0).catch(function(o){e.g&&e.g.onError(o)})))}function UU(e,i){var o,c,h,g,v,E,S,I,L,O;return Qe(function(V){if(V.g==1){if(o=ds,!e.l)throw new it(2,5,5006);return c=new Map,h=new Set,e.l.audio&&(c.set(o.V,e.l.audio),h.add(e.l.audio)),e.l.video&&(c.set(o.la,e.l.video),h.add(e.l.video)),e.u&&(c.set(o.za,e.u),h.add(e.u)),g=e.g.aa,x(V,g.init(c,e.j.sequenceMode,e.j.type,e.j.ignoreManifestTimestampsInSegmentsMode),2)}for(Lr(e.m),e.updateDuration(),v=T(c.keys()),E=v.next();!E.done;E=v.next())S=E.value,I=c.get(S),e.i.has(S)||(L=P0(e,I),i.has(I.id)&&(O=i.get(I.id),IU(O,function(W,pe,Me){return M0(W,pe,Me||null,e.h.retryParameters,e.g.Xb)}),L.ba=O),e.i.set(S,L),ro(e,L,0));ue(V)})}function P0(e,i){var o={stream:i,type:i.type,ja:null,ba:Mb(e,i),xa:null,yb:null,he:null,Ac:null,zc:null,fe:null,ge:null,fc:null,endOfStream:!1,Da:!1,kb:null,lc:!1,Vd:0,Re:!1,nc:!1,Fc:!0,bf:!1,bg:!1,sd:!1,rb:null,nd:null};return i.dependencyStream&&(o.nd=P0(e,i.dependencyStream)),o}function Mb(e,i){if(i.type==="video"&&e.h.disableVideoPrefetch||i.type==="audio"&&e.h.disableAudioPrefetch||i.type===zi&&(i.mimeType=="application/cea-608"||i.mimeType=="application/cea-708")||i.type===zi&&e.h.disableTextPrefetch)return null;if(e.o.has(i))return e.o.get(i);var o=e.i.get(i.type);return(o=o&&o.ba)&&i===o.i?o:0<e.h.segmentPrefetchLimit?new D0(e.h.segmentPrefetchLimit,i,function(c,h,g){return M0(c,h,g||null,e.h.retryParameters,e.g.Xb)},0>e.g.gb()):null}function BU(e){for(var i=e.h.segmentPrefetchLimit,o=e.h.prefetchAudioLanguages,c=T(e.j.variants),h=c.next(),g={};!h.done;g={wb:void 0},h=c.next())if(g.wb=h.value,g.wb.audio)if(e.o.has(g.wb.audio)){if(h=e.o.get(g.wb.audio),b1(h,i),!(0<i&&o.some(function(E){return function(S){return Ja(E.wb.audio.language,S)}}(g)))){var v=e.i.get(g.wb.audio.type);h!==(v&&v.ba)&&Gu(h),e.o.delete(g.wb.audio)}}else 0>=i||!o.some(function(E){return function(S){return Ja(E.wb.audio.language,S)}}(g))||!(h=Mb(e,g.wb.audio))||(g.wb.audio.segmentIndex||g.wb.audio.createSegmentIndex(),e.o.set(g.wb.audio,h))}p.updateDuration=function(){var e=ic(),i=this.j.presentationTimeline.getDuration();1/0>i?(e&&(this.A&&this.A.stop(),Ft(this.g.aa)),this.g.aa.bb(i)):e?(this.A&&this.A.ua(.5),this.g.aa.bb(1/0)):this.g.aa.bb(Math.pow(2,32))};function zU(e,i){var o,c,h,g,v,E;return Qe(function(S){switch(S.g){case 1:if(Lr(e.m),i.Da||i.kb==null||i.nc)return S.return();if(i.kb=null,!i.lc){S.s(2);break}return x(S,Ub(e,i,i.Re,i.Vd),3);case 3:return S.return();case 2:if(OU(e,i),i.stream.segmentIndex){S.s(4);break}return o=i.stream,$e(S,5),x(S,i.stream.createSegmentIndex(),7);case 7:lt(S,6);break;case 5:return c=et(S),x(S,Bb(e,i,c),8);case 8:return S.return();case 6:if(o!=i.stream)return o.closeSegmentIndex&&o.closeSegmentIndex(),i.Da||i.kb||ro(e,i,0),S.return();case 4:$e(S,9),h=jU(e,i),h!=null&&(ro(e,i,h),i.sd=!1),lt(S,10);break;case 9:return g=et(S),x(S,Bb(e,i,g),11);case 11:return S.return();case 10:if(v=Array.from(e.i.values()),!e.I||!v.every(function(I){return I.endOfStream})){S.s(0);break}return x(S,e.g.aa.endOfStream(),13);case 13:Lr(e.m),E=e.g.aa.getDuration(),E!=0&&E<e.j.presentationTimeline.getDuration()&&e.j.presentationTimeline.bb(E),ue(S)}})}function jU(e,i){if(Fb(i))return $n(e.g.aa,i.stream.originalId||""),null;if(i.type==zi&&Yn(e.g.aa),i.stream.isAudioMuxedInVideo)return null;var o=e.h.updateIntervalSeconds/Math.max(1,Math.abs(e.g.gb()));if(!en(e.g.aa)&&i.type!=zi)return o/2;var c=e.g.Rc();if(i.type==="audio")for(var h=T(e.o.keys()),g=h.next();!g.done;g=h.next())g=e.o.get(g.value),g.Oa(c,!0),fm(g,c);h=i.xa?i.xa.endTime:c;var v=Xn(e.g.aa,i.type,c),E=Math.max(1,Math.max(e.h.rebufferingGoal,e.h.bufferingGoal)*e.C),S=e.j.presentationTimeline.getDuration()-h;if(g=Bn(e.g.aa,i.type),1e-6>S&&g)return i.endOfStream=!0,i.type=="video"&&(e=e.i.get(zi))&&Fb(e)&&(e.endOfStream=!0),null;if(i.endOfStream=!1,v>=E)return o/2;if(E=!i.ja,g=qU(e,i,c,g),!g)return o;v=!1,E&&i.bf&&(v=!0,i.bf=!1),E=1/0,S=Array.from(e.i.values()),S=T(S);for(var I=S.next();!I.done;I=S.next())I=I.value,Fb(I)||I.ja&&!I.ja.current()||(E=Math.min(E,I.xa?I.xa.endTime:c));return h>=E+e.j.presentationTimeline.h?o:(e.h.crossBoundaryStrategy!=="keep"&&WU(e,i,g)||(i.ba&&i.ja&&!e.o.has(i.stream)&&(i.ba.Oa(g.startTime+.001),fm(i.ba,g.startTime).catch(function(){})),HU(e,i,c,g,v).catch(function(){}),i.nd&&GU(e,i.nd,c)),null)}function qU(e,i,o,c){if(i.ja)return(o=i.ja.current())&&i.xa&&.001>Math.abs(i.xa.startTime-o.startTime)&&(o=i.ja.next().value),o;if(i.xa||c)return o=i.xa?i.xa.endTime:c,e=0>e.g.gb(),i.stream.segmentIndex&&(i.ja=i.stream.segmentIndex.Gb(o,!1,e)),i.ja&&i.ja.next().value;c=e.j.sequenceMode?0:e.h.inaccurateManifestTolerance;var h=Math.max(o-c,0);e=0>e.g.gb();var g=null;return c&&(i.stream.segmentIndex&&(i.ja=i.stream.segmentIndex.Gb(h,!1,e)),g=i.ja&&i.ja.next().value),g||(i.stream.segmentIndex&&(i.ja=i.stream.segmentIndex.Gb(o,!1,e)),g=i.ja&&i.ja.next().value),g}function HU(e,i,o,c,h){var g,v,E,S,I,L,O,V,W,pe,Me,De,Fe,We,gt,ht,It;return Qe(function(ot){switch(ot.g){case 1:if(g=ds,v=i.stream,E=i.ja,i.Da=!0,$e(ot,2),c.dc()==2)throw new it(1,1,1011);return x(ot,KU(e,i,c,h),4);case 4:return Lr(e.m),e.B?ot.return():(S=v.mimeType=="video/mp4"||v.mimeType=="audio/mp4",I=l.ReadableStream,e.h.lowLatencyMode&&e.j.isLowLatency&&I&&S&&(e.j.type!="HLS"||c.m)?(V=new Uint8Array(0),pe=W=!1,De=function(st){var _t,xt,Ht;return Qe(function(Pt){switch(Pt.g){case 1:if(W||(pe=!0,Lr(e.m),e.B))return Pt.return();if($e(Pt,2),V=VU(V,st),_t=!1,xt=0,new Ar().box("mdat",function(jt){xt=jt.size+jt.start,_t=!0}).parse(V,!1,!0),!_t){Pt.s(4);break}return Ht=V.subarray(0,xt),V=V.subarray(xt),x(Pt,Nb(e,i,o,v,c,Ht,!0,h),5);case 5:i.ba&&i.ja&&fm(i.ba,c.startTime,!0);case 4:lt(Pt,0);break;case 2:Me=et(Pt),ue(Pt)}})},x(ot,gm(e,i,c,De),9)):(L=gm(e,i,c),x(ot,L,7)));case 7:return O=ot.h,Lr(e.m),e.B?ot.return():(Lr(e.m),i.lc?(i.Da=!1,ro(e,i,0),ot.return()):x(ot,Nb(e,i,o,v,c,O,!1,h),6));case 9:if(Fe=ot.h,Me)throw Me;if(pe){ot.s(10);break}return W=!0,Lr(e.m),e.B?ot.return():i.lc?(i.Da=!1,ro(e,i,0),ot.return()):x(ot,Nb(e,i,o,v,c,Fe,!1,h),10);case 10:i.ba&&i.ja&&fm(i.ba,c.startTime,!0);case 6:if(Lr(e.m),e.B)return ot.return();i.xa=c,E.next(),i.Da=!1,i.bg=!1,We=e.g.aa.Fb(),gt=We[i.type],JSON.stringify(gt),i.lc||(ht=null,i.type===g.la?ht=e.i.get(g.V):i.type===g.V&&(ht=e.i.get(g.la)),ht&&ht.type==g.V?e.g.qe(c,i.stream,ht.stream.isAudioMuxedInVideo):e.g.qe(c,i.stream,i.stream.codecs.includes(","))),ro(e,i,0),lt(ot,0);break;case 2:if(It=et(ot),Lr(e.m,It),e.B)return ot.return();if(i.Da=!1,It.code==7001)i.Da=!1,Ep(i),ro(e,i,0),ot.s(0);else if(i.type==g.za&&e.h.ignoreTextStreamFailures)e.i.delete(g.za),ot.s(0);else return It.code==3017?x(ot,$U(e,i,It),0):(i.sd=!0,It.category==1&&i.ba&&hm(i.ba,c),It.severity=2,x(ot,Bb(e,i,It),0))}})}function GU(e,i,o){var c,h,g,v,E,S,I,L;Qe(function(O){switch(O.g){case 1:if(c=i.stream,g=(h=c.segmentIndex.Gb(o))&&h.next().value,!g){O.s(0);break}if(v=g.Y,!v||oe(v,i.yb)){O.s(3);break}return i.yb=v,$e(O,4),x(O,gm(e,i,v),6);case 6:E=O.h;var V=e.g.aa;V.I&&Of(V.I,E,0,c),lt(O,3);break;case 4:throw S=et(O),i.yb=null,S;case 3:if(i.xa&&i.xa==g){O.s(0);break}return i.xa=g,$e(O,8),x(O,gm(e,i,g),10);case 10:I=O.h,V=e.g.aa,V.I&&Of(V.I,I,0,c),lt(O,0);break;case 8:throw L=et(O),i.xa=null,L}})}function VU(e,i){var o=new Uint8Array(e.length+i.length);return o.set(e),o.set(i,e.length),o}function $U(e,i,o){var c,h,g,v;return Qe(function(E){if(E.g==1){if(c=Array.from(e.i.values()),c.some(function(S){return S!=i&&S.bg}))return E.s(2);if(h=e.h.maxDisabledTime===0&&o.code==1011?1:e.h.maxDisabledTime,e.g.disableStream(i.stream,h))return E.return();if(e.h.avoidEvictionOnQuotaExceededError)return ro(e,i,4),E.return();if(g=Math.round(100*e.C),20<g)e.C-=.2;else if(4<g)e.C-=.04;else return i.sd=!0,e.B=!0,e.g.onError(o),E.return();return i.bg=!0,v=e.g.Rc(),x(E,Ob(e,i,v),2)}ro(e,i,4),ue(E)})}function KU(e,i,o,c){var h,g,v,E,S,I,L,O,V,W,pe,Me,De,Fe,We,gt;return Qe(function(ht){switch(ht.g){case 1:if(h=ds,g=i.xa==null,v=[],E=Math.max(0,Math.max(o.appendWindowStart,e.W)-.1),S=Math.min(o.appendWindowEnd,e.T)+.01,I=o.codecs||i.stream.codecs,L=yo(I),O=ps(o.mimeType||i.stream.mimeType),V=o.timestampOffset,V==i.he&&E==i.Ac&&S==i.zc&&L==i.fe&&O==i.ge){ht.s(2);break}if(W=i.fe&&i.ge&&Eo(e.g.aa,i.type,O,I),!W){ht.s(3);break}if(pe=null,i.type===h.la?pe=e.i.get(h.V):i.type===h.V&&(pe=e.i.get(h.la)),!pe){ht.s(3);break}return x(ht,mm(pe).catch(function(){}),5);case 5:pe.yb=null,pe.Ac=null,pe.zc=null,L0(e,pe);case 3:return x(ht,A1(e,i,V,E,S,o,L,O),2);case 2:return oe(o.Y,i.yb)||(i.yb=o.Y,o.l&&o.Y&&(Me=gm(e,i,o.Y),De=function(){var It,ot,st,_t,xt,Ht,Pt;return Qe(function(jt){switch(jt.g){case 1:return $e(jt,2),x(jt,Me,4);case 4:return It=jt.h,Lr(e.m),ot=null,st=new Map,_t={projection:null,hfov:null},xt=new Ar,xt.box("moov",$i).box("trak",$i).box("mdia",$i).R("mdhd",function(Gt){ot=hp(Gt.reader,Gt.version).timescale}).box("hdlr",function(Gt){switch(Gt=Gt.reader,Gt.skip(8),Gt.Cc()){case"soun":st.set(h.V,ot);break;case"vide":st.set(h.la,ot)}ot=null}).box("minf",$i).box("stbl",$i).R("stsd",zu).box("encv",to).box("avc1",to).box("avc3",to).box("hev1",to).box("hvc1",to).box("dvav",to).box("dva1",to).box("dvh1",to).box("dvhe",to).box("dvc1",to).box("dvi1",to).box("vexu",$i).box("proj",$i).R("prji",function(Gt){Gt=Gt.reader.Cc(),_t.projection=Gt}).box("hfov",function(Gt){Gt=Gt.reader.S()/1e3,_t.hfov=Gt}).parse(It),i.type===h.la&&YU(e,_t),st.has(i.type)?o.Y.timescale=st.get(i.type):ot!=null&&(o.Y.timescale=ot),Ht=i.stream.closedCaptions&&0<i.stream.closedCaptions.size,x(jt,e.g.Fg(i.type,It),5);case 5:return x(jt,hn(e.g.aa,i.type,It,null,i.stream,Ht,i.Fc,c),6);case 6:lt(jt,0);break;case 2:throw Pt=et(jt),i.yb=null,Pt}})},Fe=o.startTime,g&&(We=Bn(e.g.aa,i.type),We!=null&&(Fe=We)),e.g.fj(Fe,o.Y),v.push(De()))),gt=i.xa?i.xa.i:null,o.i!=gt&&v.push(Ot(e.g.aa,i.type,o.startTime)),x(ht,Promise.all(v),0)}})}function A1(e,i,o,c,h,g,v,E){var S,I,L,O;return Qe(function(V){if(V.g==1)return S=ds,I=new Map,e.l.audio&&I.set(S.V,e.l.audio),e.l.video&&I.set(S.la,e.l.video),$e(V,2),i.Ac=c,i.zc=h,v&&(i.fe=v),E&&(i.ge=E),i.he=o,L=e.j.sequenceMode||e.j.type=="HLS",x(V,Je(e.g.aa,i.type,o,c,h,L,g.mimeType||i.stream.mimeType,g.codecs||i.stream.codecs,I),4);if(V.g!=2)return lt(V,0);throw O=et(V),i.Ac=null,i.zc=null,i.fe=null,i.ge=null,i.he=null,O})}function Nb(e,i,o,c,h,g,v,E){v=v===void 0?!1:v,E=E===void 0?!1:E;var S,I,L,O,V,W;return Qe(function(pe){switch(pe.g){case 1:return S=c.closedCaptions&&0<c.closedCaptions.size,e.h.shouldFixTimestampOffset&&(L=c.mimeType=="video/mp4"||c.mimeType=="audio/mp4",O=null,h.Y&&(O=h.Y.timescale),(V=L&&O&&c.type==="video"&&e.j.type=="DASH")&&(I=new Ar),V&&I.box("moof",$i).box("traf",$i).R("tfdt",function(Me){var De,Fe,We,gt,ht,It;return Qe(function(ot){return De=rf(Me.reader,Me.version),Fe=De.baseMediaDecodeTime,Fe?(We=-Fe/O,gt=Number(i.he)||0,gt<We?(ht=i.Ac,It=i.zc,x(ot,A1(e,i,We,ht,It,h),0)):ot.s(0)):ot.return()})}),V&&I.parse(g,!1,v)),x(pe,Ob(e,i,o),2);case 2:return Lr(e.m),W=i.Fc,i.Fc=!1,x(pe,e.g.Fg(i.type,g),3);case 3:return x(pe,hn(e.g.aa,i.type,g,h,c,S,W,E,v),4);case 4:Lr(e.m),ue(pe)}})}function Ob(e,i,o){var c,h,g,v,E,S,I,L;return Qe(function(O){if(O.g==1)return c=i.stream.segmentIndex,c instanceof rs&&c.Oa(e.j.presentationTimeline.pb()),h=Math.max(e.h.bufferBehind*e.C,e.j.presentationTimeline.h),g=kn(e.g.aa,i.type),g==null?(e.F==i&&(e.F=null),O.return()):(v=o-g,E=e.h.evictionGoal,S=e.j.presentationTimeline.Hb(),I=e.j.presentationTimeline.ob(),L=v-h,I-S>E&&(L=Math.max(v-h,S-E-g)),L<=E?O.return():x(O,e.g.aa.remove(i.type,g,g+L),2));if(O.g!=4)return Lr(e.m),e.F?x(O,Ob(e,e.F,o),4):O.s(0);Lr(e.m),ue(O)})}function Fb(e){return e&&e.type==zi&&(e.stream.mimeType=="application/cea-608"||e.stream.mimeType=="application/cea-708")}function gm(e,i,o,c){var h,g,v,E,S;return Qe(function(I){switch(I.g){case 1:if(h=o.Ib())return I.return(h);if(g=null,i.ba){var L=i.ba,O=L.h;o instanceof B&&(O=L.j),O.has(o)?(L=O.get(o),c&&(L.pg=c),g=L.Gd):g=null}return g||(g=M0(o,i.stream,c||null,e.h.retryParameters,e.g.Xb)),v=0,i.ja&&(v=i.ja.h),i.rb=g,x(I,g.promise,2);case 2:if(E=I.h,i.rb=null,S=E.data,!o.aesKey){I.s(3);break}return x(I,Lb(S,o.aesKey,v),4);case 4:S=I.h;case 3:return I.return(S)}})}function M0(e,i,o,c,h,g){g=g===void 0?!1:g;var v=e instanceof X?e:void 0,E=v?1:0;return e=pm(e.N(),e.Sa,e.wa,c,o),e.contentType=i.type,h.request(Go,e,{type:E,stream:i,segment:v,isPreload:g})}function Ub(e,i,o,c){var h,g;return Qe(function(v){if(v.g==1)return i.lc=!1,i.Re=!1,i.Vd=0,i.nc=!0,i.xa=null,i.ja=null,i.ba&&!e.o.has(i.stream)&&Gu(i.ba),c?(h=e.g.Rc(),g=e.g.aa.getDuration(),x(v,e.g.aa.remove(i.type,h+c,g),3)):x(v,tn(e.g.aa,i.type),4);if(v.g!=3)return Lr(e.m),o?x(v,e.g.aa.flush(i.type),3):v.s(3);Lr(e.m),i.nc=!1,i.endOfStream=!1,i.Da||i.kb||ro(e,i,0),ue(v)})}function ro(e,i,o){var c=i.type;(c!=zi||e.i.has(c))&&(i.kb=new Da(function(){var h;return Qe(function(g){if(g.g==1)return $e(g,2),x(g,zU(e,i),4);if(g.g!=2)return lt(g,0);h=et(g),e.g&&e.g.onError(h),ue(g)})}).da(o))}function Ep(e){e.kb!=null&&(e.kb.stop(),e.kb=null)}function mm(e){return Qe(function(i){return e.rb?x(i,e.rb.abort(),0):i.s(0)})}function Bb(e,i,o){var c;return Qe(function(h){if(h.g==1)return o.code==3024?(i.Da=!1,Ep(i),ro(e,i,0),h.return()):x(h,Wd(e.P),2);if(Lr(e.m),o.category===1&&o.code!=1003){if(i.fc)return Pb(e,!1),h.return();c=e.h.maxDisabledTime===0&&o.code==1011?1:e.h.maxDisabledTime,o.handled=e.g.disableStream(i.stream,c),o.handled&&(o.severity=1)}(!o.handled||o.code!=1011)&&e.g.onError(o),o.handled||e.h.failureCallback(o),ue(h)})}function N0(e,i,o){i=i===void 0?!1:i,o=o===void 0?!0:o;var c,h,g,v,E,S;return Qe(function(I){if(I.g==1){if(c=Date.now()/1e3,h=e.h.minTimeBetweenRecoveries,!i){if(!e.h.allowMediaSourceRecoveries||c-e.L<h)return I.return(!1);e.L=c}return g=ds,(v=e.i.get(g.V))&&(v.yb=null,v.Ac=null,v.zc=null,o&&L0(e,v),mm(v).catch(function(){}),v.ja&&v.ja.dg()),(E=e.i.get(g.la))&&(E.yb=null,E.Ac=null,E.zc=null,o&&L0(e,E),mm(E).catch(function(){}),E.ja&&E.ja.dg()),S=new Map,e.l.audio&&S.set(g.V,e.l.audio),e.l.video&&S.set(g.la,e.l.video),x(I,pd(e.g.aa,S),2)}return!E||E.nc||E.Da||E.kb||ro(e,E,0),!v||v.nc||v.Da||v.kb||ro(e,v,0),I.return(!0)})}function YU(e,i){if(e.M.projection!=i.projection||e.M.hfov!=i.hfov){if(i.projection!=null||i.hfov!=null){var o=new Map().set("detail",i);o=new Jn("spatialvideoinfo",o)}else o=new Jn("nospatialvideoinfo");o.cancelable=!0,e.g.onEvent(o),e.M=i}}function zb(e){if(e.h.crossBoundaryStrategy!=="keep"){e.H.stop();var i=e.g.Rc(),o=e.i.get("video")||e.i.get("audio");o&&(o=o.yb)&&o.g!==null&&(i=o.g-i,0>i||1<i||(e.G=o.g+.01,e.H.da(i)))}}function WU(e,i,o){if(i.type===zi)return!1;var c=i.yb;if(!c)return!1;o=o.Y;var h=c.g!==o.g;if(e.h.crossBoundaryStrategy==="reset_to_encrypted"&&(c.encrypted||o.encrypted||(h=!1),c.encrypted&&(e.h.crossBoundaryStrategy="keep")),e.h.crossBoundaryStrategy==="RESET_ON_ENCRYPTION_CHANGE"&&c.encrypted==o.encrypted&&(h=!1),h&&i.Fc){var g=e.g.video,v=g.paused;N0(e,!0).then(function(){e.g.onEvent(new Jn("boundarycrossed")),v||g.play()})}return h}function O0(){}function jb(e,i,o,c,h){var g=h in c,v=g?o.constructor==Object&&Object.keys(c).length==0:o.constructor==Object&&Object.keys(o).length==0,E=g||v,S=!0,I;for(I in i){var L=h+"."+I,O=g?c[h]:o[I];E||I in o?i[I]===void 0?O===void 0||E?delete e[I]:e[I]=Na(O):v?e[I]=i[I]:O.constructor==Object&&i[I]&&i[I].constructor==Object?(e[I]||(e[I]=Na(O)),L=jb(e[I],i[I],O,c,L),S=S&&L):typeof i[I]!=typeof O||i[I]==null||typeof i[I]!="function"&&i[I].constructor!=O.constructor?(Mt("Invalid config, wrong type for "+L),S=!1):(typeof o[I]=="function"&&o[I].length!=i[I].length&&kt("Unexpected number of arguments for "+L),e[I]=i[I]):(Mt("Invalid config, unrecognized key "+L),S=!1)}return S}function F0(e,i){for(var o={},c=o,h=0,g=0;h=e.indexOf(".",h),!(0>h);)(h==0||e[h-1]!="\\")&&(g=e.substring(g,h).replace(/\\\./g,"."),c[g]={},c=c[g],g=h+1),h+=1;return c[e.substring(g).replace(/\\\./g,".")]=i,o}function bp(e,i){return e&&i}function w1(e,i){function o(g){for(var v=T(Object.keys(g)),E=v.next();!E.done;E=v.next())if(E=E.value,!(g[E]instanceof HTMLElement))if(h(g[E])&&Object.keys(g[E]).length===0)delete g[E];else{var S=g[E];Array.isArray(S)&&S.length===0||typeof g[E]=="function"?delete g[E]:h(g[E])&&(o(g[E]),Object.keys(g[E]).length===0&&delete g[E])}}function c(g,v){return Object.keys(g).reduce(function(E,S){var I=g[S];return v.hasOwnProperty(S)?I instanceof HTMLElement&&v[S]instanceof HTMLElement?I.isEqualNode(v[S])||(E[S]=I):h(I)&&h(v[S])?(I=c(I,v[S]),(0<Object.keys(I).length||!h(I))&&(E[S]=I)):Array.isArray(I)&&Array.isArray(v[S])?jd(I,v[S])||(E[S]=I):Number.isNaN(I)&&Number.isNaN(v[S])||I!==v[S]&&(E[S]=I):E[S]=I,E},{})}function h(g){return g&&typeof g=="object"&&!Array.isArray(g)}return e=c(e,i),o(e),e}_e("shaka.util.ConfigUtils",O0),O0.getDifferenceFromConfigObjects=w1,O0.convertToConfigObject=F0,O0.mergeConfigObjects=jb;function So(){}function I1(e){return e=da(e),new vn(e).nb}function ym(e,i,o){function c(E){Ni(g).setUint32(v,E.byteLength,!0),v+=4,g.set(jn(E),v),v+=E.byteLength}if(!o||!o.byteLength)throw new it(2,6,6015);var h;typeof i=="string"?h=iu(i,!0):h=i,e=da(e),e=iu(e,!0);var g=new Uint8Array(12+e.byteLength+h.byteLength+o.byteLength),v=0;return c(e),c(h),c(o),g}function qb(e,i,o){return i!=="skd"?e:(i=o.serverCertificate,o=da(e).split("skd://").pop(),ym(e,o,i))}function U0(e,i){e===2&&(e=i.drmInfo)&&es(e.keySystem)&&(i.headers["Content-Type"]="application/octet-stream")}_e("shaka.drm.FairPlay",So),So.commonFairPlayResponse=function(e,i){if(e===2&&(e=i.originalRequest.drmInfo)&&es(e.keySystem)){try{var o=Er(i.data)}catch{return}if(e=!1,o=o.trim(),o.substr(0,5)==="<ckc>"&&o.substr(-6)==="</ckc>"&&(o=o.slice(5,-6),e=!0),!e)try{var c=JSON.parse(o);c.ckc&&(o=c.ckc,e=!0),c.CkcMessage&&(o=c.CkcMessage,e=!0),c.License&&(o=c.License,e=!0)}catch{}e&&(i.data=fi(aa(o)))}},So.muxFairPlayRequest=function(e,i){U0(e,i)},So.expressplayFairPlayRequest=function(e,i){if(e===2){var o=i.drmInfo;o&&es(o.keySystem)&&U0(e,i)}},So.conaxFairPlayRequest=function(e,i){U0(e,i)},So.ezdrmFairPlayRequest=function(e,i){U0(e,i)},So.verimatrixFairPlayRequest=function(e,i){e===2&&(e=i.drmInfo)&&es(e.keySystem)&&(e=jn(i.body),e=_s(e),i.headers["Content-Type"]="application/x-www-form-urlencoded",i.body=sa("spc="+e))},So.muxInitDataTransform=function(e,i,o){return qb(e,i,o)},So.expressplayInitDataTransform=function(e,i,o){return qb(e,i,o)},So.conaxInitDataTransform=function(e,i,o){if(i!=="skd")return e;i=o.serverCertificate,o=da(e).split("skd://").pop().split("?").shift(),o=l.atob(o);var c=new ArrayBuffer(2*o.length);c=cr(c);for(var h=0,g=o.length;h<g;h++)c[h]=o.charCodeAt(h);return ym(e,c,i)},So.ezdrmInitDataTransform=function(e,i,o){return i!=="skd"?e:(i=o.serverCertificate,o=da(e).split(";").pop(),ym(e,o,i))},So.verimatrixInitDataTransform=function(e,i,o){return qb(e,i,o)},So.initDataTransform=ym,So.defaultGetContentId=I1,So.isFairPlaySupported=function(){var e;return Qe(function(i){return i.g==1?(e={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},$e(i,2),x(i,navigator.requestMediaKeySystemAccess("com.apple.fps",[e]),4)):i.g!=2?i.return(!0):(et(i),i.return(!1))})};function Hb(){this.g=null}Hb.prototype.configure=function(e){this.g=e},Hb.prototype.create=function(e){var i;if(this.g.language){var o=XU(e,this.g.language);o.length&&(i=o)}return i||(i=e.filter(function(c){return c.primary}),i=i.length?i:e),e=QU(i,this.g.role),e.length&&(i=e),this.g.videoLayout&&(e=n3(i,this.g.videoLayout),e.length&&(i=e)),this.g.Sc&&(e=t3(i,this.g.Sc),e.length&&(i=e)),this.g.channelCount&&(e=e3(i,this.g.channelCount),e.length&&(i=e)),this.g.Kc&&(e=JU(i,this.g.Kc),e.length&&(i=e)),this.g.fd&&(e=ZU(i,this.g.fd),e.length&&(i=e)),e=i3(i,this.g.spatialAudio),e.length&&(i=e),this.g.audioCodec&&(e=r3(i,this.g.audioCodec),e.length&&(i=e)),new dp(i[0],i,!(this.g.codecSwitchingStrategy=="smooth"&&tl()))};function XU(e,i){i=Sr(i);var o=Yd(i,e.map(function(c){return Kd(c)}));return o?e.filter(function(c){return o==Kd(c)}):[]}function QU(e,i){return e.filter(function(o){return o.audio?i?o.audio.roles.includes(i):o.audio.roles.length==0:!1})}function JU(e,i){return e.filter(function(o){return o.audio&&o.audio.label?o.audio.label.toLowerCase()==i.toLowerCase():!1})}function ZU(e,i){return e.filter(function(o){return o.video&&o.video.label?o.video.label.toLowerCase()==i.toLowerCase():!1})}function e3(e,i){return e.filter(function(o){return!(o.audio&&o.audio.channelsCount&&o.audio.channelsCount>i)}).sort(function(o,c){return o.audio||c.audio?o.audio?c.audio?(c.audio.channelsCount||0)-(o.audio.channelsCount||0):1:-1:0})}function t3(e,i){if(i=="AUTO"){var o=e.some(function(c){return!!(c.video&&c.video.hdr&&c.video.hdr=="HLG")});i=Js(o)}return e.filter(function(c){return!(c.video&&c.video.hdr&&c.video.hdr!=i)})}function n3(e,i){return e.filter(function(o){return!(o.video&&o.video.videoLayout&&o.video.videoLayout!=i)})}function i3(e,i){return e.filter(function(o){return!(o.audio&&o.audio.spatialAudio!=i)})}function r3(e,i){return e.filter(function(o){return!(o.audio&&o.audio.codecs!=i)})}function B0(){}function _p(){var e=1/0;navigator.connection&&navigator.connection.saveData&&(e=360);var i={retryParameters:qo(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,persistentSessionOnlinePlayback:!1,persistentSessionsMetadata:[],initDataTransform:function(L,O,V){return l.shakaMediaKeysPolyfill==="apple"&&O=="skd"&&(O=V.serverCertificate,V=I1(L),L=ym(L,V,O)),L},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:ca(),minHdcpVersion:"",ignoreDuplicateInitData:!Cr("Tizen 2"),defaultAudioRobustnessForWidevine:"SW_SECURE_CRYPTO",defaultVideoRobustnessForWidevine:"SW_SECURE_DECODE"};(ca()||Qi())&&i.preferredKeySystems.push("com.microsoft.playready");var o="reload",c=!1;!tl()||In()||Qi()||sr()||Si()&&ms()===79||Bi()&&!Ms()&&!Mo()||fo()&&el()||(o="smooth",c=!0),c={retryParameters:qo(),availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,disableIFrames:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,raiseFatalErrorOnManifestUpdateRequestFailure:!1,continueLoadingWhenPaused:!0,ignoreSupplementalCodecs:!1,updatePeriod:-1,ignoreDrmInfo:!1,dash:{clockSyncUri:"",disableXlinkProcessing:!0,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:94ce86fb-07ff-4f43-adb8-93d2fa968ca2":"com.apple.fps","urn:uuid:3d5e6d35-9b9a-41e8-b843-dd3c6e72c42c":"com.huawei.wiseplay"},manifestPreprocessor:z0,manifestPreprocessorTXml:j0,sequenceMode:!1,multiTypeVariantsAllowed:c,useStreamOnceInPeriodFlattening:!1,enableFastSwitching:!0},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,ignoreManifestProgramDateTimeForTypes:[],mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',liveSegmentsDelay:3,sequenceMode:ec(),ignoreManifestTimestampsInSegmentsMode:!1,disableCodecGuessing:!1,disableClosedCaptionsDetection:!1,allowLowLatencyByteRangeOptimization:!0,allowRangeRequestsToGuessMimeType:!1},mss:{manifestPreprocessor:z0,manifestPreprocessorTXml:j0,sequenceMode:!1,keySystemsBySystemId:{"9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"}}};var h={retryParameters:qo(),failureCallback:function(L){return bp([L])},rebufferingGoal:0,bufferingGoal:10,bufferBehind:30,evictionGoal:1,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,gapPadding:0,gapJumpTimerTime:.25,durationBackoff:1,safeSeekOffset:5,safeSeekEndOffset:0,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsForFairPlay:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,forceHTTP:!1,forceHTTPS:!1,minBytesForProgressEvents:16e3,preferNativeDash:!1,preferNativeHls:!1,updateIntervalSeconds:1,observeQualityChanges:!1,maxDisabledTime:30,segmentPrefetchLimit:1,prefetchAudioLanguages:[],disableAudioPrefetch:!1,disableTextPrefetch:!1,disableVideoPrefetch:!1,liveSync:{enabled:!1,targetLatency:.5,targetLatencyTolerance:.5,maxPlaybackRate:1.1,minPlaybackRate:.95,panicMode:!1,panicThreshold:60,dynamicTargetLatency:{enabled:!1,stabilityThreshold:60,rebufferIncrement:.5,maxAttempts:10,maxLatency:4,minLatency:1}},allowMediaSourceRecoveries:!0,minTimeBetweenRecoveries:5,vodDynamicPlaybackRate:!1,vodDynamicPlaybackRateLowBufferRate:.95,vodDynamicPlaybackRateBufferRatio:.5,preloadNextUrlWindow:30,loadTimeout:30,clearDecodingCache:Qi()||sr(),dontChooseCodecs:!1,shouldFixTimestampOffset:Si()||In(),avoidEvictionOnQuotaExceededError:!1,crossBoundaryStrategy:"keep"};(Si()||In()||Bi()||ur())&&(h.stallSkip=0),(navigator.userAgent.match(/Edge\//)||ca())&&(h.gapPadding=.01),In()&&(h.gapPadding=2),hr()&&(h.crossBoundaryStrategy="reset"),ii()&&(h.crossBoundaryStrategy="reset_to_encrypted");var g={trackSelectionCallback:function(L){return Qe(function(O){return O.return(L)})},downloadSizeCallback:function(L){var O;return Qe(function(V){return V.g==1?navigator.storage&&navigator.storage.estimate?x(V,navigator.storage.estimate(),3):V.return(!0):(O=V.h,V.return(O.usage+L<.95*O.quota))})},progressCallback:function(L,O){return bp([L,O])},usePersistentLicense:!0,numberOfParallelDownloads:5};e={enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:e,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1,clearBufferSwitch:!1,safeMarginSwitch:0,cacheLoadThreshold:20,minTimeToSwitch:er()?.5:0,preferNetworkInformationBandwidth:!1},o={codecSwitchingStrategy:o,addExtraFeaturesToSourceBuffer:function(L){return bp([L],"")},forceTransmux:!1,insertFakeEncryptionInInit:!0,modifyCueCallback:function(L,O){return bp([L,O])},dispatchAllEmsgBoxes:!1};var v=!1,E=!1,S=!0;Qs()&&(E=v=!0,S=!1);var I={drm:i,manifest:c,streaming:h,mediaSource:o,offline:g,abrFactory:function(){return new Vr},adaptationSetCriteriaFactory:function(){return new(Function.prototype.bind.apply(Hb,[null].concat(k(Ze.apply(0,arguments)))))},abr:e,autoShowText:3,preferredAudioLanguage:"",preferredAudioLabel:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoHdrLevel:"AUTO",preferredVideoLayout:"",preferredVideoLabel:"",preferredVideoCodecs:[],preferredAudioCodecs:[],preferredTextFormats:[],preferForcedSubs:!1,preferSpatialAudio:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayer:{captionsUpdatePeriod:.25,fontScaleFactor:1},textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",rtpSafetyFactor:5,useHeaders:!1,includeKeys:[],version:1},cmsd:{enabled:!0,applyMaximumSuggestedBitrate:!0,estimatedThroughputWeightRatio:.5},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1,poster:!0},ads:{customPlayheadTracker:v,skipPlayDetection:E,supportsMultipleMediaElements:S,disableHLSInterstitial:!1,disableDASHInterstitial:!1,allowPreloadOnDomElements:!0},ignoreHardwareResolution:!1};return g.trackSelectionCallback=function(L){return Qe(function(O){return O.return(s3(L,I.preferredAudioLanguage,I.preferredVideoHdrLevel))})},I}function C1(){return{streaming:{inaccurateManifestTolerance:0,segmentPrefetchLimit:2,updateIntervalSeconds:.1,maxDisabledTime:1,retryParameters:{baseDelay:100}},manifest:{dash:{autoCorrectDrift:!1},retryParameters:{baseDelay:100}},drm:{retryParameters:{baseDelay:100}}}}function lf(e,i,o){var c={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:[],audioRobustness:[],sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:"",headers:{}}};return jb(e,i,o||_p(),c,"")}function s3(e,i,o){var c=o;c=="AUTO"&&(o=e.some(function(E){return!!(E.hdr&&E.hdr=="HLG")}),c=Js(o));var h=e.filter(function(E){return!(E.type!="variant"||E.hdr&&E.hdr!=c)});o=[];var g=Yd(i,h.map(function(E){return E.language}));g&&(o=h.filter(function(E){return Sr(E.language)==g})),o.length==0&&(o=h.filter(function(E){return E.primary})),o.length==0&&(h.map(function(E){return E.language}),o=h);var v=o.filter(function(E){return E.height&&480>=E.height});for(v.length&&(v.sort(function(E,S){return S.height-E.height}),o=v.filter(function(E){return E.height==v[0].height})),i=[],o.length&&(h=Math.floor(o.length/2),o.sort(function(E,S){return E.bandwidth-S.bandwidth}),i.push(o[h])),e=T(e),o=e.next();!o.done;o=e.next())o=o.value,o.type!=zi&&o.type!="image"||i.push(o);return i}function z0(e){return bp([e],e)}function j0(e){return bp([e],e)}_e("shaka.util.PlayerConfiguration",B0),B0.mergeConfigObjects=lf,B0.createDefaultForLL=C1,B0.createDefault=_p;function a3(){this.g=null,this.h=[]}function Gb(e,i){var o=0;e.g&&e.g.state==i&&(o+=e.g.duration),e=T(e.h);for(var c=e.next();!c.done;c=e.next())c=c.value,o+=c.state==i?c.duration:0;return o}function o3(e){function i(g){return{timestamp:g.timestamp,state:g.state,duration:g.duration}}for(var o=[],c=T(e.h),h=c.next();!h.done;h=c.next())o.push(i(h.value));return e.g&&o.push(i(e.g)),o}function l3(){this.i=this.h=null,this.g=[]}function Vb(e,i,o){e.i!=i&&(e.i=i,e.g.push({timestamp:Date.now()/1e3,id:i.id,type:"text",fromAdaptation:o,bandwidth:null}))}function q0(){this.mc=this.bh=this.u=this.A=this.I=this.B=this.o=this.j=this.H=this.C=this.i=this.P=this.T=this.L=this.M=this.O=this.l=this.m=NaN,this.K=0,this.F=this.G=NaN,this.g=new a3,this.h=new l3}function jl(e,i,o,c){xr.call(this),this.O=e,this.Z=i,this.Fa=c.networkingEngine,this.B=o,this.o=null,this.ya=0,this.Ma=c.Lc,this.F=c.Zi,this.Na=c.$i,this.g=c.config,this.l=this.G=this.h=null,this.pa=!1,this.H=c.kj,this.sa=!1,this.i=null,this.ka=!1,this.j=this.C=null,this.ea=!1,this.M=new Map,this.Aa=!1,this.Ga=c.jj,this.$=new q0,this.oa=new mr,this.m=new mr,this.P=null,this.u=!1,this.fa=c.Uh,this.W=this.K=null,this.La=c.Th,this.T=!1,this.L=[],this.I=[],this.A=!0}j(jl,xr);function vm(e,i,o){(e=i?e.I:e.L)?e.push(o):o()}function u3(e){if(e.I)for(var i=T(e.I),o=i.next();!o.done;o=i.next())o=o.value,o();e.I=null}function k1(e,i){if(e.P=i,e.T=!0,e.L){i=T(e.L);for(var o=i.next();!o.done;o=i.next())o=o.value,o()}e.L=null}p=jl.prototype,p.getStartTime=function(){return this.B},p.Qc=function(){return this.O},p.Hf=function(){return this.h};function c3(e){return e.ea=!0,e.j}function d3(e){return e.sa=!0,e.H}p.getStats=function(){return this.$};function f3(e){return e.ka=!0,e.i}p.Ai=function(){return this.K?Oi(this.K):null},p.zi=function(){return this.W?lr(this.W):null};function h3(e){return e.Aa=!0,e.M}p.start=function(){var e=this;(function(){var i;return Qe(function(o){switch(o.g){case 1:return x(o,Promise.resolve(),2);case 2:return $e(o,3),x(o,p3(e),5);case 5:if(dh(e),l.shakaMediaKeysPolyfill==="webkit"){o.s(6);break}return x(o,D1(e),7);case 7:dh(e);case 6:return x(o,g3(e),8);case 8:if(dh(e),!e.fa||!e.i){o.s(9);break}return x(o,cb(e.i),10);case 10:dh(e);case 9:e.m.resolve(),lt(o,0);break;case 3:i=et(o),i instanceof it&&(i.code==7001||i.code==7003)||e.m.reject(i),ue(o)}})})()},p.dispatchEvent=function(e){return this.P?this.P.dispatchEvent(e):xr.prototype.dispatchEvent.call(this,e)},p.onError=function(e){e.severity===2&&(this.m.reject(e),this.destroy());var i=new Map().set("detail",e);i=new Jn("error",i),this.dispatchEvent(i),i.defaultPrevented&&(e.handled=!0)};function dh(e){if(e.u)throw new it(2,7,7003)}function $b(e,i){e.dispatchEvent(new Jn("onstatechange",new Map().set("state",i)))}function p3(e){var i,o,c,h,g,v,E,S,I;return Qe(function(L){switch(L.g){case 1:if($b(e,"manifest-parser"),e.l||(e.G=E0(e.O,e.Z),e.l=e.G(),e.l.configure(e.g.manifest,function(){return e.A})),i=Date.now()/1e3,$b(e,"manifest"),e.h){L.s(2);break}return x(L,e.l.start(e.O,e.Na),3);case 3:if(e.h=L.h,e.h.variants.length!=1){L.s(2);break}for(o=[],c=e.h.variants[0],h=T([c.video,c.audio]),g=h.next();!g.done;g=h.next())(v=g.value)&&!v.segmentIndex&&o.push(v.createSegmentIndex());if(!(0<o.length)){L.s(2);break}return x(L,Promise.all(o),2);case 2:return e.oa.resolve(),E=new Jn("manifestparsed",void 0),x(L,Promise.resolve(),7);case 7:if(e.dispatchEvent(E),e.h.variants.length==0)throw new it(2,4,4036);m3(e.h),S=Date.now()/1e3,I=S-i,e.$.H=I,ue(L)}})}function D1(e,i){var o,c,h,g,v,E;return Qe(function(S){switch(S.g){case 1:if(!e.h||e.i)return S.return();if($b(e,"drm-engine"),e.ya=Date.now()/1e3,e.i=e.Ma(),e.F.h=e.i,e.i.configure(e.g.drm,function(){return e.A}),o=T0(e.F,e.h),!o){S.s(2);break}return c=new Jn("trackschanged",void 0),x(S,Promise.resolve(),3);case 3:dh(e),e.dispatchEvent(c);case 2:return h=Ul(e.h.variants),g=!0,e.h&&e.h.presentationTimeline&&e.h.type!="HLS"&&(g=e.h.presentationTimeline.U()),x(S,Kg(e.i,h,e.h.offlineSessionIds,g),4);case 4:if(dh(e),!i){S.s(5);break}return x(S,e.i.Lb(i),6);case 6:dh(e);case 5:return x(S,tm(e.F,e.h),7);case 7:if(v=S.h,!v){S.s(0);break}return E=new Jn("trackschanged",void 0),x(S,Promise.resolve(),9);case 9:e.dispatchEvent(E),ue(S)}})}p.configure=function(e,i){e=F0(e,i),lf(this.g,e)},p.getConfiguration=function(){return Na(this.g)};function g3(e){var i,o,c,h,g,v,E;return Qe(function(S){return e.o||(e.o=e.g.adaptationSetCriteriaFactory(),e.o.configure({language:e.g.preferredAudioLanguage,role:e.g.preferredVariantRole,channelCount:e.g.preferredAudioChannelCount,Sc:e.g.preferredVideoHdrLevel,spatialAudio:e.g.preferSpatialAudio,videoLayout:e.g.preferredVideoLayout,Kc:e.g.preferredAudioLabel,fd:e.g.preferredVideoLabel,codecSwitchingStrategy:e.g.mediaSource.codecSwitchingStrategy,audioCodec:""})),e.La&&(i=e.g.abrFactory,e.C=i,e.j=i(),e.j.configure(e.g.abr)),!e.fa||(o=e.h.presentationTimeline.U(),c=Ul(e.h.variants),h=e.o.create(c),e.j.configure(e.g.abr),e.j.setVariants(Array.from(h.values())),g=e.j.chooseVariant(),!g)?S.s(0):(v=[],e.K=g,g.video&&v.push(Kb(e,g.video,o)),g.audio&&v.push(Kb(e,g.audio,o)),(E=Bl(e.h.textStreams,e.g.preferredTextLanguage,e.g.preferredTextRole,e.g.preferForcedSubs)[0]||null)&&Yy(g.audio,E,e.g)&&(v.push(Kb(e,E,o)),e.W=E),x(S,Promise.all(v),0))})}function Kb(e,i,o){var c,h,g,v,E;return Qe(function(S){return S.g==1?(c=e.g.streaming.segmentPrefetchLimit||2,h=new D0(c,i,function(I,L,O){return M0(I,L,O||null,e.g.streaming.retryParameters,e.Fa,e.A)},!1),e.M.set(i.id,h),i.segmentIndex?S.s(2):x(S,i.createSegmentIndex(),2)):(g=e.B||0,v=i.segmentIndex.Gb(g),E=null,v&&(E=v.current(),E||(E=v.next().value)),E||(E=Hu(i.segmentIndex)),E?o?E.Y?x(S,T1(h,E.Y),0):S.s(0):x(S,fm(h,E.startTime),0):S.s(0))})}p.Lj=function(){return this.m},p.destroy=function(){var e=this,i,o,c;return Qe(function(h){switch(h.g){case 1:if(e.u=!0,!e.l||e.pa){h.s(2);break}return x(h,e.l.stop(),2);case 2:if(!e.j||e.ea){h.s(4);break}return x(h,e.j.stop(),4);case 4:if(e.H&&!e.sa&&e.H.release(),!e.i||e.ka){h.s(6);break}return x(h,e.i.destroy(),6);case 6:if(0<e.M.size&&!e.Aa)for(i=T(e.M.values()),o=i.next();!o.done;o=i.next())c=o.value,Gu(c);ue(h)}})};function m3(e){function i(o){return o.video&&o.audio||o.video&&o.video.codecs.includes(",")}e.variants.some(i)&&(e.variants=e.variants.filter(i))}_e("shaka.media.PreloadManager",jl),jl.prototype.destroy=jl.prototype.destroy,jl.prototype.waitForFinish=jl.prototype.Lj,jl.prototype.getPrefetchedTextTrack=jl.prototype.zi,jl.prototype.getPrefetchedVariantTrack=jl.prototype.Ai;function fh(e,i){xr.call(this);var o=this;this.i=e,this.l=i,this.g=new Map,this.m=[{Jc:null,Ic:Sp,xc:function(c,h){return yd(o,"enter",c,h)}},{Jc:Tm,Ic:Sp,xc:function(c,h){return yd(o,"enter",c,h)}},{Jc:Em,Ic:Sp,xc:function(c,h){return yd(o,"enter",c,h)}},{Jc:Sp,Ic:Tm,xc:function(c,h){return yd(o,"exit",c,h)}},{Jc:Sp,Ic:Em,xc:function(c,h){return yd(o,"exit",c,h)}},{Jc:Tm,Ic:Em,xc:function(c,h){h?yd(o,"skip",c,h):(yd(o,"enter",c,h),yd(o,"exit",c,h))}},{Jc:Em,Ic:Tm,xc:function(c,h){return yd(o,"skip",c,h)}}],this.h=new ni,this.h.D(this.i,"regionremove",function(c){o.g.delete(c.region)})}j(fh,xr),fh.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,xr.prototype.release.call(this)},fh.prototype.j=function(e,i){if(!this.l||e!=0){this.l=!1;for(var o=T(this.i.h.values()),c=o.next();!c.done;c=o.next()){c=c.value;var h=this.g.get(c),g=e<c.startTime?Tm:e>c.endTime?Em:Sp;this.g.set(c,g);for(var v=T(this.m),E=v.next();!E.done;E=v.next())E=E.value,E.Jc==h&&E.Ic==g&&E.xc(c,i)}}};function yd(e,i,o,c){i=new Jn(i,new Map([["region",o],["seeking",c]])),e.dispatchEvent(i)}var Tm=1,Sp=2,Em=3;function hh(e,i,o){var c,h,g,v,E,S,I;return Qe(function(L){switch(L.g){case 1:var O=new vn(e).ab.split("/").pop().split(".");return c=O.length==1?"":O.pop().toLowerCase(),(h=y3.get(c))?L.return(h):(g=0,v=ws([e],o),$e(L,2),v.method="HEAD",x(L,i.request(g,v).promise,4));case 4:E=L.h,h=E.headers["content-type"],lt(L,3);break;case 2:if(S=et(L),!S||S.code!=1002&&S.code!=1001){L.s(3);break}return v.method="GET",x(L,i.request(g,v).promise,6);case 6:I=L.h,h=I.headers["content-type"];case 3:return L.return(h?h.toLowerCase().split(";").shift():"")}})}var y3=new Map().set("mp4","video/mp4").set("m4v","video/mp4").set("m4a","audio/mp4").set("webm","video/webm").set("weba","audio/webm").set("mkv","video/webm").set("ts","video/mp2t").set("ogv","video/ogg").set("ogg","audio/ogg").set("mpg","video/mpeg").set("mpeg","video/mpeg").set("mov","video/quicktime").set("m3u8","application/x-mpegurl").set("mpd","application/dash+xml").set("ism","application/vnd.ms-sstr+xml").set("mp3","audio/mpeg").set("aac","audio/aac").set("flac","audio/flac").set("wav","audio/wav").set("sbv","text/x-subviewer").set("srt","text/srt").set("vtt","text/vtt").set("webvtt","text/vtt").set("ttml","application/ttml+xml").set("lrc","application/x-subtitle-lrc").set("ssa","text/x-ssa").set("ass","text/x-ssa").set("jpeg","image/jpeg").set("jpg","image/jpeg").set("png","image/png").set("svg","image/svg+xml").set("webp","image/webp").set("avif","image/avif").set("html","text/html").set("htm","text/html");function R1(e,i){if(e.lineBreak)return`
`;if(e.nestedCues.length)return e.nestedCues.map(function(v){return R1(v,e)}).join("");if(!e.payload)return e.payload;var o=[],c=e.fontWeight>=Nu,h=e.fontStyle==Fu,g=e.textDecoration.includes(al);return c&&o.push(["b"]),h&&o.push(["i"]),g&&o.push(["u"]),h=e.color,h==""&&i&&(h=i.color),c="",(h=L1(h))&&(c+="."+h),h=e.backgroundColor,h==""&&i&&(h=i.backgroundColor),(i=L1(h))&&(c+=".bg_"+i),c&&o.push(["c",c]),o.reduceRight(function(v,E){var S=T(E);return E=S.next().value,S=S.next().value,"<"+E+(S===void 0?"":S)+">"+v+"</"+E+">"},e.payload)}function L1(e){e=e.toLowerCase();var i=e.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);switch(i?e="#"+(parseInt(i[1],10)|256).toString(16).slice(1)+(parseInt(i[2],10)|256).toString(16).slice(1)+(parseInt(i[3],10)|256).toString(16).slice(1):e.startsWith("#")&&7<e.length&&(e=e.slice(0,7)),e){case"white":case"#fff":case"#ffffff":return"white";case"lime":case"#0f0":case"#00ff00":return"lime";case"cyan":case"#0ff":case"#00ffff":return"cyan";case"red":case"#f00":case"#ff0000":return"red";case"yellow":case"#ff0":case"#ffff00":return"yellow";case"magenta":case"#f0f":case"#ff00ff":return"magenta";case"blue":case"#00f":case"#0000ff":return"blue";case"black":case"#000":case"#000000":return"black"}return null}function Yb(e,i){var o=[];e=T(P1(e));for(var c=e.next();!c.done;c=e.next())if(c=c.value,c.isContainer)o.push.apply(o,k(Yb(c.nestedCues,c)));else{var h=c.clone();h.nestedCues=[],h.payload=R1(c,i),o.push(h)}return o}function P1(e){var i=[];e=T(e);for(var o=e.next(),c={};!o.done;c={jf:void 0},o=e.next())c.jf=o.value,i.some(function(h){return function(g){return ou(h.jf,g)}}(c))||i.push(c.jf);return i}function v3(e){function i(c){for(var h=5381,g=c.length;g;)h=33*h^c.charCodeAt(--g);return(h>>>0).toString()}if(e.startTime>=e.endTime)return null;var o=new VTTCue(e.startTime,e.endTime,e.payload);o.id=i(e.startTime.toString())+i(e.endTime.toString())+i(e.payload),o.lineAlign=e.lineAlign,o.positionAlign=e.positionAlign,e.size&&(o.size=e.size);try{o.align=e.textAlign}catch{}return e.textAlign=="center"&&o.align!="center"&&(o.align="middle"),e.writingMode=="vertical-lr"?o.vertical="lr":e.writingMode=="vertical-rl"&&(o.vertical="rl"),e.lineInterpretation==1&&(o.snapToLines=!1),e.line!=null&&(o.line=e.line),e.position!=null&&(o.position=e.position),o}function Ea(e,i){for(this.h=e,this.i=i,this.g=null,e=T(Array.from(this.h.textTracks)),i=e.next();!i.done;i=e.next())i=i.value,i.kind!=="metadata"&&i.kind!=="chapters"&&(i.mode="disabled",i.label==this.i&&(this.g=i));this.g&&(this.g.mode="hidden")}p=Ea.prototype,p.configure=function(){},p.remove=function(e,i){return this.g?(N1(this.g,function(o){return o.startTime<i&&o.endTime>e}),!0):!1},p.append=function(e){if(this.g){var i=Yb(e),o=[];e=this.g.cues?Array.from(this.g.cues):[],i=T(i);for(var c=i.next(),h={};!c.done;h={Tc:void 0},c=i.next())h.Tc=c.value,!e.some(function(g){return function(v){return v.startTime==g.Tc.startTime&&v.endTime==g.Tc.endTime&&v.text==g.Tc.payload}}(h))&&h.Tc.payload&&(c=v3(h.Tc))&&o.push(c);for(e=o.slice().sort(function(g,v){return g.startTime!=v.startTime?g.startTime-v.startTime:g.endTime!=v.endTime?g.endTime-v.startTime:"line"in VTTCue.prototype?o.indexOf(v)-o.indexOf(g):o.indexOf(g)-o.indexOf(v)}),e=T(e),i=e.next();!i.done;i=e.next())this.g.addCue(i.value)}},p.destroy=function(){return this.g&&(N1(this.g,function(){return!0}),this.g.mode="disabled"),this.g=this.h=null,Promise.resolve()},p.isTextVisible=function(){return this.g?this.g.mode=="showing":!1},p.setTextVisibility=function(e){e&&!this.g&&M1(this),this.g&&(this.g.mode=e?"showing":"hidden")},p.setTextLanguage=function(){},p.enableTextDisplayer=function(){M1(this)};function M1(e){e.h&&!e.g&&(e.g=e.h.addTextTrack("subtitles",e.i),e.g.mode="hidden")}function N1(e,i){var o=e.mode;e.mode=o=="showing"?"showing":"hidden";for(var c=T(Array.from(e.cues)),h=c.next();!h.done;h=c.next())(h=h.value)&&i(h)&&e.removeCue(h);e.mode=o}_e("shaka.text.SimpleTextDisplayer",Ea),Ea.prototype.enableTextDisplayer=Ea.prototype.enableTextDisplayer,Ea.prototype.setTextLanguage=Ea.prototype.setTextLanguage,Ea.prototype.setTextVisibility=Ea.prototype.setTextVisibility,Ea.prototype.isTextVisible=Ea.prototype.isTextVisible,Ea.prototype.destroy=Ea.prototype.destroy,Ea.prototype.append=Ea.prototype.append,Ea.prototype.remove=Ea.prototype.remove,Ea.prototype.configure=Ea.prototype.configure;function ba(){}p=ba.prototype,p.configure=function(){},p.remove=function(){},p.append=function(){},p.destroy=function(){},p.isTextVisible=function(){return!1},p.setTextVisibility=function(){},p.setTextLanguage=function(){},p.enableTextDisplayer=function(){},_e("shaka.text.StubTextDisplayer",ba),ba.prototype.enableTextDisplayer=ba.prototype.enableTextDisplayer,ba.prototype.setTextLanguage=ba.prototype.setTextLanguage,ba.prototype.setTextVisibility=ba.prototype.setTextVisibility,ba.prototype.isTextVisible=ba.prototype.isTextVisible,ba.prototype.destroy=ba.prototype.destroy,ba.prototype.append=ba.prototype.append,ba.prototype.remove=ba.prototype.remove,ba.prototype.configure=ba.prototype.configure;function _a(e,i){var o=this;document.fullscreenEnabled||kt("Using UITextDisplayer in a browser without Fullscreen API support causes subtitles to not be rendered in fullscreen"),this.A=!1,this.h=[],this.j=e,this.C=i,this.u=this.m=null,this.g=document.createElement("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.C.appendChild(this.g),this.o=new Li(function(){o.j.paused||uf(o)}),bm(this),this.l=new Map,this.i=new ni,this.i.D(document,"fullscreenchange",function(){uf(o,!0)}),this.i.D(this.j,"seeking",function(){uf(o,!0)}),this.i.D(this.j,"ratechange",function(){bm(o)}),this.i.D(this.j,"resize",function(){var c=o.j,h=c.videoWidth;c=c.videoHeight,h&&c?o.m=h/c:o.m=null}),this.B=null,"ResizeObserver"in l&&(this.B=new ResizeObserver(function(){uf(o,!0)}),this.B.observe(this.g)),this.F=new Map}p=_a.prototype,p.configure=function(e){this.u=e,bm(this),uf(this,!0)},p.append=function(e){var i=[].concat(k(this.h));e=T(P1(e));for(var o=e.next(),c={};!o.done;c={kf:void 0},o=e.next())c.kf=o.value,i.some(function(h){return function(g){return ou(g,h.kf)}}(c))||this.h.push(c.kf);this.h.length&&bm(this),uf(this)},p.destroy=function(){return this.g&&(this.C.removeChild(this.g),this.g=null,this.A=!1,this.h=[],this.o&&(this.o.stop(),this.o=null),this.l.clear(),this.i&&(this.i.release(),this.i=null),this.B&&(this.B.disconnect(),this.B=null)),Promise.resolve()},p.remove=function(e,i){if(!this.g)return!1;var o=this.h.length;return this.h=this.h.filter(function(c){return c.startTime<e||c.endTime>=i}),uf(this,o>this.h.length),this.h.length||bm(this),!0},p.isTextVisible=function(){return this.A},p.setTextVisibility=function(e){this.A=e,uf(this,!0)},p.setTextLanguage=function(e){e&&e!="und"?this.g.setAttribute("lang",e):this.g.setAttribute("lang","")},p.enableTextDisplayer=function(){};function bm(e){e.o&&(e.h.length?e.o.ua((e.u?e.u.captionsUpdatePeriod:.25)/Math.max(1,Math.abs(e.j.playbackRate))):e.o.stop())}function T3(e,i){for(;i!=null;){if(i==e.g)return!0;i=i.parentElement}return!1}function O1(e,i,o,c,h){var g=!1,v=[],E=[];i=T(i);for(var S=i.next();!S.done;S=i.next()){S=S.value,h.push(S);var I=e.l.get(S),L=S.startTime<=c&&S.endTime>c,O=I?I.Nh:null;I&&(v.push(I.lf),I.Ec&&v.push(I.Ec),L||(g=!0,e.l.delete(S),I=null)),L&&(E.push(S),I?T3(e,O)||(g=!0):(E3(e,S,h),I=e.l.get(S),O=I.Nh,g=!0)),0<S.nestedCues.length&&O&&O1(e,S.nestedCues,O,c,h),h.pop()}if(g){for(c=T(v),h=c.next();!h.done;h=c.next())h=h.value,h.parentElement&&h.parentElement.removeChild(h);for(E.sort(function(V,W){return V.startTime!=W.startTime?V.startTime-W.startTime:V.endTime-W.endTime}),E=T(E),c=E.next();!c.done;c=E.next())c=e.l.get(c.value),c.Ec?(c.Ec.contains(o)&&c.Ec.removeChild(o),o.appendChild(c.Ec),c.Ec.appendChild(c.lf)):o.appendChild(c.lf)}}function uf(e,i){if(e.g){var o=e.j.currentTime;if(!e.A||i!==void 0&&i){i=T(e.F.values());for(var c=i.next();!c.done;c=i.next())ie(c.value);ie(e.g),e.l.clear(),e.F.clear()}e.A&&O1(e,e.h,e.g,o,[])}}function E3(e,i,o){var c=1<o.length,h=c?"span":"div";i.lineBreak&&(h="br"),i.rubyTag&&(h=i.rubyTag),c=!c&&0<i.nestedCues.length;var g=document.createElement(h);if(h!="br"&&_3(e,g,i,o,c),o=null,i.region&&i.region.id){var v=i.region,E=e.m===4/3?2.5:1.9;if(o=v.id+"_"+v.width+"x"+v.height+(v.heightUnits==js?"%":"px")+"-"+v.viewportAnchorX+"x"+v.viewportAnchorY+(v.viewportAnchorUnits==js?"%":"px"),e.F.has(o))o=e.F.get(o);else{h=document.createElement("span");var S=v.heightUnits==js?"%":"px",I=v.widthUnits==js?"%":"px",L=v.viewportAnchorUnits==js?"%":"px";h.id="shaka-text-region---"+o,h.classList.add("shaka-text-region"),h.style.position="absolute";var O=v.height,V=v.width;v.heightUnits===2&&(O=5.33*v.height,S="%"),v.widthUnits===2&&(V=v.width*E,I="%"),h.style.height=O+S,h.style.width=V+I,v.viewportAnchorUnits===2?(E=v.viewportAnchorY/75*100,S=v.viewportAnchorX/(e.m===4/3?160:210)*100,E-=v.regionAnchorY*O/100,S-=v.regionAnchorX*V/100,h.style.top=E+"%",h.style.left=S+"%"):(h.style.top=v.viewportAnchorY-v.regionAnchorY*O/100+L,h.style.left=v.viewportAnchorX-v.regionAnchorX*V/100+L),v.heightUnits!==0&&v.widthUnits!==0&&v.viewportAnchorUnits!==0&&(v=Math.max(0,Math.min(100-(parseInt(h.style.width.slice(0,-1),10)||0),parseInt(h.style.left.slice(0,-1),10)||0)),h.style.top=Math.max(0,Math.min(100-(parseInt(h.style.height.slice(0,-1),10)||0),parseInt(h.style.top.slice(0,-1),10)||0))+"%",h.style.left=v+"%"),h.style.display="flex",h.style.flexDirection="column",h.style.alignItems="center",h.style.justifyContent=i.displayAlign=="before"?"flex-start":i.displayAlign=="center"?"center":"flex-end",e.F.set(o,h),o=h}}h=g,c&&(h=document.createElement("span"),h.classList.add("shaka-text-wrapper"),h.style.backgroundColor=i.backgroundColor,h.style.lineHeight="normal",g.appendChild(h)),e.l.set(i,{lf:g,Nh:h,Ec:o})}function b3(e){var i=e.direction,o=e.positionAlign;return e=e.textAlign,o!==Mu?o:e==="left"||e==="start"&&i===fc||e==="end"&&i==="rtl"?"line-left":e==="right"||e==="start"&&i==="rtl"||e==="end"&&i===fc?"line-right":"center"}function _3(e,i,o,c,h){var g=i.style,v=o.nestedCues.length==0,E=1<c.length;g.whiteSpace="pre-wrap";var S=o.payload.replace(/\s+$/g,function(L){return"".repeat(L.length)});if(g.webkitTextStrokeColor=o.textStrokeColor,g.webkitTextStrokeWidth=o.textStrokeWidth,g.color=o.color,g.direction=o.direction,g.opacity=o.opacity,g.paddingLeft=Wb(o.linePadding,o,e.C),g.paddingRight=Wb(o.linePadding,o,e.C),g.textCombineUpright=o.textCombineUpright,g.textShadow=o.textShadow,o.backgroundImage)g.backgroundImage="url('"+o.backgroundImage+"')",g.backgroundRepeat="no-repeat",g.backgroundSize="contain",g.backgroundPosition="center",o.backgroundColor&&(g.backgroundColor=o.backgroundColor),g.width="100%",g.height="100%";else{if(o.nestedCues.length)var I=i;else I=document.createElement("span"),i.appendChild(I);o.border&&(I.style.border=o.border),h||((i=S3(c,function(L){return L.backgroundColor}))?I.style.backgroundColor=i:S&&(I.style.backgroundColor="rgba(0, 0, 0, 0.8)")),S&&(I.textContent=S)}E&&!c[c.length-1].isContainer?g.display="inline":(g.display="flex",g.flexDirection="column",g.alignItems="center",o.textAlign=="left"||o.textAlign=="start"?(g.width="100%",g.alignItems="start"):(o.textAlign=="right"||o.textAlign=="end")&&(g.width="100%",g.alignItems="end"),g.justifyContent=o.displayAlign=="before"?"flex-start":o.displayAlign=="center"?"center":"flex-end"),v||(g.margin="0"),g.fontFamily=o.fontFamily,g.fontWeight=o.fontWeight.toString(),g.fontStyle=o.fontStyle,g.letterSpacing=o.letterSpacing,g.fontSize=Wb(o.fontSize,o,e.C,e.u?e.u.fontScaleFactor:1),c=o.line,c!=null&&(v=o.lineInterpretation,v==hc&&(v=1,E=16,e.m&&1>e.m&&(E=32),c=0>c?100+c/E*100:c/E*100),v==1&&(g.position="absolute",o.writingMode==Dl?(g.width="100%",o.lineAlign==Xa?g.top=c+"%":o.lineAlign=="end"&&(g.bottom=100-c+"%")):o.writingMode=="vertical-lr"?(g.height="100%",o.lineAlign==Xa?g.left=c+"%":o.lineAlign=="end"&&(g.right=100-c+"%")):(g.height="100%",o.lineAlign==Xa?g.right=c+"%":o.lineAlign=="end"&&(g.left=100-c+"%")))),g.lineHeight=o.lineHeight,e=b3(o),e=="line-left"?(g.cssFloat="left",o.position!==null&&(g.position="absolute",o.writingMode==Dl?(g.left=o.position+"%",g.width="auto"):g.top=o.position+"%")):e=="line-right"?(g.cssFloat="right",o.position!==null&&(g.position="absolute",o.writingMode==Dl?(g.right=100-o.position+"%",g.width="auto"):g.bottom=o.position+"%")):o.position!==null&&o.position!=50&&(g.position="absolute",o.writingMode==Dl?(g.left=o.position+"%",g.width="auto"):g.top=o.position+"%"),g.textAlign=o.textAlign,g.textDecoration=o.textDecoration.join(" "),g.writingMode=o.writingMode,"writingMode"in document.documentElement.style&&g.writingMode==o.writingMode||(g.webkitWritingMode=o.writingMode),o.size&&(o.writingMode==Dl?g.width=o.size+"%":g.height=o.size+"%")}function Wb(e,i,o,c){c=c===void 0?1:c;var h=(h=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(h[1]),unit:h[2]}:null;if(!h)return e;switch(e=h.unit,c*=h.value,e){case"%":return c/100*o.clientHeight/i.cellResolution.rows+"px";case"c":return o.clientHeight*c/i.cellResolution.rows+"px";default:return c+e}}function S3(e,i){for(var o=e.length-1;0<=o;o--){var c=i(e[o]);if(c||c===0)return c}return null}_e("shaka.text.UITextDisplayer",_a),_a.prototype.enableTextDisplayer=_a.prototype.enableTextDisplayer,_a.prototype.setTextLanguage=_a.prototype.setTextLanguage,_a.prototype.setTextVisibility=_a.prototype.setTextVisibility,_a.prototype.isTextVisible=_a.prototype.isTextVisible,_a.prototype.remove=_a.prototype.remove,_a.prototype.destroy=_a.prototype.destroy,_a.prototype.append=_a.prototype.append,_a.prototype.configure=_a.prototype.configure;function x3(e,i){function o(g){for(var v=g,E=T(i),S=E.next();!S.done;S=E.next())S=S.value,S.end&&S.start<g&&(v+=S.end-S.start);return g=Math.floor(v/3600),E=Math.floor(v/60%60),S=Math.floor(v%60),v=Math.floor(1e3*v%1e3),(10>g?"0":"")+g+":"+(10>E?"0":"")+E+":"+(10>S?"0":"")+S+"."+(100>v?10>v?"00":"0":"")+v}var c=Yb(e);e=`WEBVTT

`,c=T(c);for(var h=c.next();!h.done;h=c.next())h=h.value,e+=o(h.startTime)+" --> "+o(h.endTime)+function(g){var v=[];switch(g.textAlign){case"left":v.push("align:left");break;case"right":v.push("align:right");break;case mo:v.push("align:middle");break;case"start":v.push("align:start");break;case"end":v.push("align:end")}switch(g.writingMode){case"vertical-lr":v.push("vertical:lr");break;case"vertical-rl":v.push("vertical:rl")}return v.length?" "+v.join(" "):""}(h)+`
`,e+=h.payload+`

`;return e}_e("shaka.text.WebVttGenerator",function(){});function Xb(e,i){this.h=e,this.g=i,this.i=void 0,this.u=!1,this.F=!0,this.l=this.B=!1,this.o=this.m=void 0,this.A=0,this.G=!1,this.C=new ni,this.j=null}Xb.prototype.setMediaElement=function(e){this.j=e,k3(this)},Xb.prototype.configure=function(e){this.g=e};function A3(e){e.u=!1,e.F=!0,e.B=!1,e.l=!1,e.m=0,e.o=0,e.A=0,e.G=!1,e.j=null,e.C.Qa()}function w3(e,i){e.l=i,e.l?e.i==Y0?e.i=W0:e.i==X0&&(e.i=Q0):e.i==W0?e.i=Y0:e.i==Q0&&(e.i=X0)}function I3(e,i){if(e.g&&e.g.enabled&&e.g.version==B1&&e.j&&e.j.autoplay){var o=e.j.play();o&&o.then(function(){e.A=i}).catch(function(){e.A=0})}}function C3(e,i,o){try{if(!e.g.enabled)return i;var c=Qb(e);e:{switch(o.toLowerCase()){case"audio/mp4":case"audio/webm":case"audio/ogg":case"audio/mpeg":case"audio/aac":case"audio/flac":case"audio/wav":var h=G0;break e;case"video/webm":case"video/mp4":case"video/mpeg":case"video/mp2t":h=$0;break e;case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"application/dash+xml":case"video/vnd.mpeg.dash.mpd":case"application/vnd.ms-sstr+xml":h=U1;break e}h=void 0}c.ot=h,c.su=!0;var g=H0(c);return Jb(i,g)}catch(v){return Bt("CMCD_SRC_ERROR","Could not generate src CMCD data.",v),i}}function k3(e){e.C.ma(e.j,"play",function(){e.m||(e.m=Date.now())}),e.C.ma(e.j,"playing",function(){e.o||(e.o=Date.now())})}function Qb(e){return e.g.sessionId||(e.g.sessionId=l.crypto.randomUUID()),{v:e.g.version,sf:e.i,sid:e.g.sessionId,cid:e.g.contentId,mtp:e.h.getBandwidthEstimate()/1e3}}function xp(e,i,o){o=o===void 0?{}:o;var c=c===void 0?e.g.useHeaders:c;if(e.g.enabled){Object.assign(o,Qb(e)),o.pr=e.h.gb();var h=o.ot===V0||o.ot===$0;if(e.B&&h&&(o.bs=!0,o.su=!0,e.B=!1),o.su==null&&(o.su=e.F),o.v===B1&&(e.h.U()&&(o.ltc=e.h.Zd()),h=!e.G&&e.o&&e.m?e.o-(e.A||e.m):void 0,h!=null&&(o.msd=h,e.G=!0)),e=D3(e,o),c)c=M3(e),Object.keys(c).length&&Object.assign(i.headers,c);else{var g=H0(e);g&&(i.uris=i.uris.map(function(v){return Jb(v,g)}))}}}function D3(e,i){var o=e.g.includeKeys;return o.length?Object.keys(i).reduce(function(c,h){return o.includes(h)&&(c[h]=i[h]),c},{}):i}function R3(e){if(e.type===0)return N3;if(e=e.stream){var i=e.type;if(i=="video")return e.codecs&&e.codecs.includes(",")?$0:V0;if(i=="audio")return G0;if(i=="text")return e.mimeType==="application/mp4"?K0:Zb}}function L3(e,i){if(i=e.h.Fb()[i],!i.length)return NaN;var o=e.h.getCurrentTime();return(e=i.find(function(c){return c.start<=o&&c.end>=o}))?1e3*(e.end-o):NaN}function F1(e,i){if(i=e.h.Fb()[i],!i.length)return 0;var o=e.h.getCurrentTime();return(e=i.find(function(c){return c.start<=o&&c.end>=o}))?1e3*(e.end-o):0}function P3(e,i){var o=e.h.Rb();if(!o.length)return NaN;e=o[0],o=T(o);for(var c=o.next();!c.done;c=o.next())c=c.value,c.type==="variant"&&c.bandwidth>e.bandwidth&&(e=c);switch(i){case V0:return e.videoBandwidth||NaN;case G0:return e.audioBandwidth||NaN;default:return e.bandwidth}}function H0(e){function i(O){return 100*o(O/100)}function o(O){return Math.round(O)}function c(O){return!Number.isNaN(O)&&O!=null&&O!==""&&O!==!1}var h=[],g={br:o,d:o,bl:i,dl:i,mtp:i,nor:function(O){return encodeURIComponent(O)},rtp:i,tb:o},v=Object.keys(e||{}).sort();v=T(v);for(var E=v.next();!E.done;E=v.next()){E=E.value;var S=e[E];if(c(S)&&(E!=="v"||S!==1)&&(E!="pr"||S!==1)){var I=g[E];I&&(S=I(S)),I=typeof S;var L=void 0;L=I==="string"&&E!=="ot"&&E!=="sf"&&E!=="st"?E+"="+JSON.stringify(S):I==="boolean"?E:I==="symbol"?E+"="+S.description:E+"="+S,h.push(L)}}return h.join(",")}function M3(e){var i=Object.keys(e),o={},c=["Object","Request","Session","Status"],h=[{},{},{},{}],g={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,ltc:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,msd:2,bs:3,rtp:3};i=T(i);for(var v=i.next();!v.done;v=i.next())v=v.value,h[g[v]!=null?g[v]:1][v]=e[v];for(e=0;e<h.length;e++)(g=H0(h[e]))&&(o["CMCD-"+c[e]]=g);return o}function Jb(e,i){return!i||e.includes("offline:")?e:(e=new vn(e),e.g.set("CMCD",i),e.toString())}var U1="m",G0="a",V0="v",$0="av",N3="i",Zb="c",K0="tt",B1=2,Y0="d",W0="ld",X0="h",Q0="lh";_e("shaka.util.CmcdManager.StreamingFormat",{DASH:Y0,hk:W0,HLS:X0,ik:Q0,wk:"s",OTHER:"o"});function ql(e){this.h=e,this.g=null}p=ql.prototype,p.configure=function(e){this.h=e},p.Ug=function(){return this.h.enabled&&this.h.applyMaximumSuggestedBitrate&&this.g&&this.g.has(q1)?1e3*this.g.get(q1):null},p.Sg=function(){return this.h.enabled&&this.g&&this.g.has(j1)?1e3*this.g.get(j1):null},p.Ci=function(){return this.h.enabled&&this.g&&this.g.has(H1)?this.g.get(H1):null},p.Di=function(){return this.h.enabled&&this.g&&this.g.has(G1)?this.g.get(G1):null},p.getBandwidthEstimate=function(e){var i=this.Sg();if(!i)return e;var o=this.h.estimatedThroughputWeightRatio;return 0<o&&1>=o?e*(1-o)+i*o:e};function z1(e){return e?e.toLowerCase()==="false"?!1:/^[-0-9]/.test(e)?parseInt(e,10):e.replace(/["]+/g,""):!0}_e("shaka.util.CmsdManager",ql),ql.prototype.getBandwidthEstimate=ql.prototype.getBandwidthEstimate,ql.prototype.getRoundTripTime=ql.prototype.Di,ql.prototype.getResponseDelay=ql.prototype.Ci,ql.prototype.getEstimatedThroughput=ql.prototype.Sg,ql.prototype.getMaxBitrate=ql.prototype.Ug;var j1="etp",q1="mb",H1="rd",G1="rtt";function V1(){this.g=null,this.h=[]}function e_(e,i){return Qe(function(o){if(o.g==1)return e.g?x(o,new Promise(function(c){return e.h.push(c)}),2):o.s(2);e.g=i,ue(o)})}V1.prototype.release=function(){0<this.h.length?this.h.shift()():this.g=null};function fn(e,i,o){i=i===void 0?null:i,xr.call(this);var c=this;this.m=tv,this.h=null,this.ue=i,this.oa=!1,this.Qe=new ni,this.zd=new ni,this.l=new ni,this.Na=new ni,this.Sb=new ni,this.G=this.I=this.C=this.F=null,this.Te=0,this.$=new V1,this.Z=this.Pb=this.T=this.i=this.Qb=this.H=this.j=this.xd=this.O=this.yg=this.fa=this.L=this.Ga=this.Aa=this.yd=this.M=this.pa=this.K=this.La=null,this.sa=!1,this.Fa=this.o=null,this.We=1e9,this.Oe=[],this.Ve=-1,this.g=vd(this),this.Xe=C1(),this.P=null,this.Ue=-1,this.Ma=null,this.ka={width:1/0,height:1/0},this.te=new em(this.g,this.ka,null),this.Ee=[],this.B=null,this.W=this.g.adaptationSetCriteriaFactory(),this.W.configure({language:this.g.preferredAudioLanguage,role:this.g.preferredVariantRole,channelCount:this.g.preferredAudioChannelCount,Sc:this.g.preferredVideoHdrLevel,spatialAudio:this.g.preferSpatialAudio,videoLayout:this.g.preferredVideoLayout,Kc:this.g.preferredAudioLabel,fd:this.g.preferredVideoLabel,codecSwitchingStrategy:this.g.mediaSource.codecSwitchingStrategy,audioCodec:""}),this.Tb=this.g.preferredTextLanguage,this.Hd=this.g.preferredTextRole,this.Fd=this.g.preferForcedSubs,this.Cd=[],o&&o(this),this.L=X3(this),this.fa=new ql(this.g.cmsd),this.F=eI(this),this.F.kg(this.g.streaming.forceHTTP),this.F.lg(this.g.streaming.forceHTTPS),this.F.o=this.g.streaming.minBytesForProgressEvents,this.Ub=this.ea=this.A=null,this.Ze=!1,this.Ye=new Li(function(){return Qe(function(h){if(h.g==1)return c.ea?x(h,c.Lb(c.Ub,!0),3):h.s(0);if(h.g!=4)return x(h,c.load(c.ea),4);c.Ze?c.Ub.pause():c.Ub.play(),c.ea=null,c.Ze=!1,ue(h)})}),nv&&(this.A=nv(),this.A.configure(this.g.ads),this.Sb.D(this.A,"ad-content-pause-requested",function(h){var g;return Qe(function(v){if(v.g==1)return c.Ye.stop(),c.ea?v.s(0):(c.Ub=c.h,c.Ze=c.Uc(),g=h.saveLivePosition||!1,x(v,c.Lg(!0,g),3));c.ea=v.h,ue(v)})}),this.Sb.D(this.A,"ad-content-resume-requested",function(h){if(h=h.offset||0,c.ea){var g=c.ea;g.B&&h&&(g.B+=h)}c.Ye.da(.1)}),this.Sb.D(this.A,"ad-content-attach-requested",function(){return Qe(function(h){return c.h||!c.Ub?h.s(0):x(h,c.Lb(c.Ub,!0),0)})})),this.Qe.D(l,"online",function(){l_(c),c.eg()}),this.xe=new Li(function(){for(var h=Date.now()/1e3,g=!1,v=!0,E=T(c.i.variants),S=E.next();!S.done;S=E.next())S=S.value,0<S.disabledUntilTime&&S.disabledUntilTime<=h&&(S.disabledUntilTime=0,g=!0),0<S.disabledUntilTime&&(v=!1);v&&c.xe.stop(),g&&wp(c,!1,void 0,!1,!1)}),this.ya=null,e&&(dn("Player w/ mediaElement","Please migrate from initializing Player with a mediaElement; use the attach method instead."),this.Lb(e,!0)),this.u=null}j(fn,xr);function J0(e){e.O!=null&&(Hh(e.O),e.O.release(),e.O=null)}function O3(e,i,o){o||i.lcevc.enabled?(J0(e),e.O==null&&(e.O=new nc(e.h,e.yg,i.lcevc,o),e.I&&(e.I.I=e.O))):J0(e)}function zr(e,i){return new Jn(e,i)}p=fn.prototype,p.destroy=function(){var e=this,i;return Qe(function(o){switch(o.g){case 1:return e.m==pu?o.return():(J0(e),i=e.detach(),e.m=pu,x(o,i,2));case 2:return x(o,e.pf(),3);case 3:if(e.Qe&&(e.Qe.release(),e.Qe=null),e.zd&&(e.zd.release(),e.zd=null),e.l&&(e.l.release(),e.l=null),e.Na&&(e.Na.release(),e.Na=null),e.Sb&&(e.Sb.release(),e.Sb=null),e.Fa=null,e.g=null,e.B=null,e.ue=null,e.L=null,e.fa=null,!e.F){o.s(4);break}return x(o,e.F.destroy(),5);case 5:e.F=null;case 4:e.o&&(e.o.release(),e.o=null),xr.prototype.release.call(e),ue(o)}})};function $1(e,i){xI.set(e,i)}function Ap(e,i){e.dispatchEvent(zr("onstatechange",new Map().set("state",i)))}p.Lb=function(e,i){i=i===void 0?!0:i;var o=this,c,h,g;return Qe(function(v){switch(v.g){case 1:if(o.m==pu)throw new it(2,7,7e3);if(c=o.h&&o.h==e,!o.h||o.h==e){v.s(2);break}return x(v,o.detach(),2);case 2:return x(v,t_(o,"attach"),4);case 4:if(v.h)return v.return();if($e(v,5,6),c||(Ap(o,"attach"),h=function(){var E=u_(o,!1);E&&Ip(o,E)},o.zd.D(e,"error",h),o.h=e,o.L&&o.L.setMediaElement(e)),!i||!Ya()||o.I){v.s(6);break}return x(v,n_(o),6);case 6:Xe(v),o.$.release(),ut(v,0);break;case 5:return g=et(v),x(v,o.detach(),10);case 10:throw g}})},p.Vh=function(e){this.yg=e},p.detach=function(e){e=e===void 0?!1:e;var i=this;return Qe(function(o){if(o.g==1){if(i.m==pu)throw new it(2,7,7e3);return x(o,i.kc(!1,e),2)}if(o.g!=3)return x(o,t_(i,"detach"),3);if(o.h)return o.return();try{i.h&&(i.zd.Qa(),i.h=null),Ap(i,"detach"),i.A&&!e&&i.A.release()}finally{i.$.release()}ue(o)})};function t_(e,i){var o;return Qe(function(c){return c.g==1?(o=++e.Te,x(c,e_(e.$,i),2)):o!=e.Te?(e.$.release(),c.return(!0)):c.return(!1)})}p.kc=function(e,i){e=e===void 0?!0:e,i=i===void 0?!1:i;var o=this,c,h,g,v,E,S,I,L,O,V;return Qe(function(W){switch(W.g){case 1:return o.m!=pu&&(o.m=tv),x(W,t_(o,"unload"),2);case 2:return W.h?W.return():(xe(W,3),o.sa=!1,Ap(o,"unload"),J0(o),c=o.Cd.map(function(pe){return pe()}),o.Cd=[],x(W,Promise.all(c),5));case 5:if(o.dispatchEvent(zr("unloading")),o.yd&&(o.yd.release(),o.yd=null),o.Aa&&(o.Aa.release(),o.Aa=null),o.Ga&&(o.Ga.release(),o.Ga=null),o.h&&(o.l.Qa(),o.Na.Qa()),o.xe.stop(),o.La&&(o.La.release(),o.La=null),o.pa&&(o.pa.stop(),o.pa=null),!o.H){W.s(6);break}return x(W,o.H.stop(),7);case 7:o.H=null,o.Qb=null;case 6:if(!o.o){W.s(8);break}return x(W,o.o.stop(),8);case 8:if(!o.j){W.s(10);break}return x(W,o.j.destroy(),11);case 11:o.j=null;case 10:if(o.K&&(o.K.release(),o.K=null),o.G&&(o.G.release(),o.G=null),l.shakaMediaKeysPolyfill!=="webkit"||!o.C){W.s(12);break}return x(W,o.C.destroy(),13);case 13:o.C=null;case 12:if(!o.I){W.s(14);break}return x(W,o.I.destroy(),15);case 15:o.I=null;case 14:if(o.A&&!i&&o.A.onAssetUnload(),o.ea&&!i&&(o.ea.destroy(),o.ea=null),i||o.Ye.stop(),o.L&&A3(o.L),o.fa&&(o.fa.g=null),!o.u){W.s(16);break}return x(W,o.u.destroy(),17);case 17:o.u=null;case 16:if(o.h&&(ie(o.h),o.h.src&&(o.h.removeAttribute("src"),o.h.load())),!o.C){W.s(18);break}return x(W,o.C.destroy(),19);case 19:o.C=null;case 18:if(o.ya&&o.T!=o.ya.Qc()&&(o.ya.u||o.ya.destroy(),o.ya=null),o.T=null,o.Pb=null,o.M=null,o.i){for(h=T(o.i.variants),g=h.next();!g.done;g=h.next())for(v=g.value,E=T([v.audio,v.video]),S=E.next();!S.done;S=E.next())(I=S.value)&&I.segmentIndex&&I.segmentIndex.release();for(L=T(o.i.textStreams),O=L.next();!O.done;O=L.next())V=O.value,V.segmentIndex&&V.segmentIndex.release()}o.g&&o.g.streaming.clearDecodingCache&&(eh.clear(),ia.clear()),o.i=null,o.B=new q0,o.Se=null,o.Ma=null,o.P=null,o.Ue=-1,o.Oe=[],o.Ve=-1,o.F&&o.F.Hg(),a_(o);case 3:Xe(W),o.$.release(),ut(W,4);break;case 4:if(e&&Ya()&&!o.I&&o.h)return x(W,n_(o),0);W.s(0)}})},p.Kj=function(e){this.Z=e},p.load=function(e,i,o){i=i===void 0?null:i;var c=this,h,g,v,E,S,I,L,O,V,W,pe,Me,De;return Qe(function(Fe){switch(Fe.g){case 1:if(c.m==pu)throw new it(2,7,7e3);if(h=null,g="",e instanceof jl){if(e.u)throw new it(2,7,7006);h=e,g=h.Qc()||""}else g=e||"";return x(Fe,e_(c.$,"load"),2);case 2:if(c.$.release(),!c.h)throw new it(2,7,7002);if(!c.T){Fe.s(3);break}return c.T=g,x(Fe,c.kc(!1),3);case 3:if(v=++c.Te,E=function(){return Qe(function(We){if(We.g==1)return c.Te==v?We.s(0):h?x(We,h.destroy(),3):We.s(3);throw new it(2,7,7e3)})},S=function(We,gt){return Qe(function(ht){switch(ht.g){case 1:return xe(ht,2),x(ht,e_(c.$,gt),4);case 4:return x(ht,E(),5);case 5:return x(ht,We(),6);case 6:return x(ht,E(),7);case 7:h&&c.g&&(h.g=c.g);case 2:Xe(ht),c.$.release(),ut(ht,0)}})},$e(Fe,5,6),i==null&&h&&(i=h.getStartTime()),c.Z=i,c.sa=!1,c.dispatchEvent(zr("loading")),h){o=h.Z,Fe.s(8);break}if(o){Fe.s(8);break}return x(Fe,S(function(){return Qe(function(We){if(We.g==1)return x(We,X1(c,g),2);o=We.h,ue(We)})},"guessMimeType_"),8);case 8:if(I=!!h,h){k1(h,c),c.B=h.getStats(),Fe.s(11);break}return x(Fe,Y1(c,g,i,o,!0),12);case 12:(h=Fe.h)?(h.A=!1,k1(h,c),c.B=h.getStats(),h.start(),h.m.catch(function(){})):c.B=new q0;case 11:return L=!h,O=Date.now()/1e3,c.B=h?h.getStats():new q0,c.T=g,c.Pb=o||null,c.Aa=new dm(function(){return c.Ra()}),L?x(Fe,S(function(){return Qe(function(We){return x(We,z3(c,o),0)})},"initializeSrcEqualsDrmInner_"),23):(c.Ga=new dm(function(){return c.Ra()}),x(Fe,S(function(){return Qe(function(We){if(We.g==1)return x(We,Promise.race([h.oa,h.m]),2);c.Qb=h.G;var gt=h;gt.pa=!0,c.H=gt.l,c.i=h.Hf(),ue(We)})},"waitForFinish"),15));case 15:if(c.I){Fe.s(16);break}return x(Fe,S(function(){return Qe(function(We){return x(We,n_(c),0)})},"initializeMediaSourceEngineInner_"),16);case 16:return c.i&&c.i.textStreams.length&&(c.u.enableTextDisplayer?c.u.enableTextDisplayer():dn("Text displayer w/ enableTextDisplayer",'Text displayer should have a "enableTextDisplayer" method!')),x(Fe,S(function(){return Qe(function(We){return x(We,h.m,0)})},"waitForFinish"),18);case 18:if(c.g=h.getConfiguration(),c.te=h.F,c.H&&c.H.setMediaElement&&c.h&&c.H.setMediaElement(c.h),c.yd=d3(h),c.xd=h.Ga,(V=h.o)&&(c.W=V),I&&c.h&&c.h.nodeName==="AUDIO"&&(F3(c),c.configure("manifest.disableVideo",!0)),h.i){Fe.s(19);break}return x(Fe,S(function(){return Qe(function(We){return x(We,D1(h,c.h),0)})},"drmEngine_.init"),19);case 19:return c.C=f3(h),x(Fe,S(function(){return Qe(function(We){return x(We,c.C.Lb(c.h),0)})},"drmEngine_.attach"),21);case 21:return!(W=h.C)||c.Fa&&c.Fa==W||(c.o=c3(h),c.Fa=h.C,typeof c.o.setMediaElement!="function"&&(dn("AbrManager w/o setMediaElement","Please use an AbrManager with setMediaElement function."),c.o.setMediaElement=function(){}),typeof c.o.setCmsdManager!="function"&&(dn("AbrManager w/o setCmsdManager","Please use an AbrManager with setCmsdManager function."),c.o.setCmsdManager=function(){}),typeof c.o.trySuggestStreams!="function"&&(dn("AbrManager w/o trySuggestStreams","Please use an AbrManager with trySuggestStreams function."),c.o.trySuggestStreams=function(){})),pe=h3(h),Me=h.K,x(Fe,S(function(){return Qe(function(We){return x(We,B3(c,O,Me,pe),0)})},"loadInner_"),22);case 22:u3(h),c.Pb&&er()&&pc(c.Pb)&&Gi(c.I,c.T,c.Pb),Fe.s(14);break;case 23:return x(Fe,S(function(){return Qe(function(We){return x(We,j3(c,O,o),0)})},"srcEqualsInner_"),14);case 14:c.dispatchEvent(zr("loaded"));case 6:if(Xe(Fe),!h){Fe.s(25);break}return x(Fe,h.destroy(),25);case 25:c.ya=null,ut(Fe,0);break;case 5:if(De=et(Fe),!De||De.code==7e3){Fe.s(27);break}return x(Fe,c.kc(!1),27);case 27:throw De}})};function F3(e){for(var i=T(e.i.variants),o=i.next();!o.done;o=i.next())o=o.value,o.video&&(o.video.closeSegmentIndex(),o.video=null),o.bandwidth=o.audio&&o.audio.bandwidth?o.audio.bandwidth:0;e.i.variants=e.i.variants.filter(function(c){return c.audio})}p.Gj=function(e,i){e=e===void 0?!0:e,i=i===void 0?!1:i;var o=this,c;return Qe(function(h){return h.g==1?x(h,K1(o),2):h.g!=3?(c=h.h,x(h,o.kc(e,i),3)):h.return(c)})},p.Lg=function(e,i){e=e===void 0?!1:e,i=i===void 0?!1:i;var o=this,c;return Qe(function(h){return h.g==1?x(h,K1(o,i),2):h.g!=3?(c=h.h,x(h,o.detach(e),3)):h.return(c)})};function K1(e,i){i=i===void 0?!1:i;var o,c;return Qe(function(h){if(h.g==1)return o=null,e.i&&e.H&&e.Qb&&e.T?(c=e.h.currentTime,e.U()&&!i&&(c=null),x(h,W1(e,e.T,c,e.Pb,!0,!1,!1),3)):h.s(2);if(h.g!=2){o=h.h,e.Ee.push(o),e.H&&e.H.setMediaElement&&e.H.setMediaElement(null);var g=o,v=e.H,E=e.Qb;g.h=e.i,g.l=v,g.G=E,g=o,v=e.Fa,g.j=e.o,g.C=v,o.o=e.W,o.start(),e.i=null,e.H=null,e.Qb=null,e.o=null,e.Fa=null}return h.return(o)})}p.preload=function(e,i,o){i=i===void 0?null:i;var c=this,h;return Qe(function(g){return g.g==1?x(g,Y1(c,e,i,o),2):((h=g.h)?h.start():Ip(c,new it(2,7,7005)),g.return(h))})},p.pf=function(){var e=this,i,o,c,h;return Qe(function(g){for(i=[],o=T(e.Ee),c=o.next();!c.done;c=o.next())h=c.value,h.u||i.push(h.destroy());return e.Ee=[],x(g,Promise.all(i),0)})};function Y1(e,i,o,c,h){h=h===void 0?!1:h;var g,v,E;return Qe(function(S){return S.g==1?c?S.s(2):x(S,X1(e,i),3):(S.g!=2&&(c=S.h),U3(e,c)?S.return(null):(g=!1,v=!0,h&&(e.o&&e.Fa==e.g.abrFactory&&(v=!1),e.h&&e.h.nodeName==="AUDIO"&&(g=!0)),E=W1(e,i,o,c||null,!h,g,v),E=h?E.then(function(I){return I.A=!1,I}):E.then(function(I){return e.Ee.push(I),I}),S.return(E)))})}function W1(e,i,o,c,h,g,v){h=h===void 0?!0:h,g=g===void 0?!1:g,v=v===void 0?!0:v;var E,S,I,L,O,V,W,pe,Me,De,Fe,We,gt,ht;return Qe(function(It){return It.g==1?(E=null,S=Na(e.g),g&&(S.manifest.disableVideo=!0),I=function(){return E.T&&E.u?null:E},L=function(){return I()?I().getConfiguration():e.g},e.ka.width!=1/0||e.ka.height!=1/0||e.g.ignoreHardwareResolution?It.s(2):x(It,La(),3)):(It.g!=2&&(O=It.h,e.ka.width=O.width,e.ka.height=O.height),V=new em(S,e.ka,null),W={networkingEngine:e.F,filter:function(ot){var st,_t;return Qe(function(xt){if(xt.g==1)return x(xt,tm(V,ot),2);if(xt.g!=4)return st=xt.h,st?(_t=zr("trackschanged"),x(xt,Promise.resolve(),4)):xt.s(0);E.dispatchEvent(_t),ue(xt)})},makeTextStreamsForClosedCaptions:function(ot){return Z3(e,ot)},onTimelineRegionAdded:function(ot){Ib(E.H,ot)},onEvent:function(ot){return E.dispatchEvent(ot)},onError:function(ot){return E.onError(ot)},isLowLatencyMode:function(){return L().streaming.lowLatencyMode},updateDuration:function(){e.j&&E.T&&e.j.updateDuration()},newDrmInfo:function(ot){var st=E.i,_t=st?st.h:null;_t&&st.A&&Vo(V,_t.keySystem,ot)},onManifestUpdated:function(){var ot=new Map().set("isLive",e.U());E.dispatchEvent(zr("manifestupdated",ot)),vm(E,!1,function(){e.A&&e.A.onManifestUpdated(e.U())})},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()},onMetadata:function(ot,st,_t,xt){var Ht=ot;ot=="com.apple.hls.interstitial"&&(Ht="com.apple.quicktime.HLS",ot={startTime:st,endTime:_t,values:xt},e.A)&&e.A.onHLSInterstitialMetadata(e,e.h,ot),xt=T(xt),ot=xt.next();for(var Pt={};!ot.done;Pt={Zf:void 0},ot=xt.next())Pt.Zf=ot.value,Pt.Zf.name!="ID"&&vm(E,!1,function(jt){return function(){i_(e,st,_t,Ht,jt.Zf)}}(Pt))},disableStream:function(ot){return e.disableStream(ot,e.g.streaming.maxDisabledTime)},addFont:function(ot,st){return e.addFont(ot,st)}},pe=new dm(function(){return e.Ra()}),pe.addEventListener("regionadd",function(ot){var st=ot.region;Am(e,"timelineregionadded",st,E),vm(E,!1,function(){e.A&&(e.A.onDashTimedMetadata(st),e.A.onDASHInterstitialMetadata(e,e.h,st))})}),Me=null,S.streaming.observeQualityChanges&&(Me=new C0(function(){return e.Fb()}),Me.addEventListener("qualitychange",function(ot){EI(e,ot.quality,ot.position)}),Me.addEventListener("audiotrackchange",function(ot){EI(e,ot.quality,ot.position,!0)})),De=!0,Fe={Xb:e.F,onError:function(ot){return E.onError(ot)},pe:function(ot){vm(E,!0,function(){e:{var st=ot,_t=zr("keystatuschanged");e.dispatchEvent(_t);var xt=Object.keys(st);xt.length==1&&xt[0]==""&&(xt=["00"],st={"00":st[""]}),_t=xt.length==1&&xt[0]=="00";var Ht=!1;if(xt.length){xt=e.keySystem();for(var Pt=vc(e.g.drm.clearKeys),jt=T(e.i.variants),Gt=jt.next();!Gt.done;Gt=jt.next()){Gt=Gt.value;var Yt=[];Gt.audio&&Yt.push(Gt.audio),Gt.video&&Yt.push(Gt.video),Yt=T(Yt);for(var Zt=Yt.next();!Zt.done;Zt=Yt.next()){var Xt=Zt.value;if(Zt=Gt.allowedByKeySystem,Xt.keyIds.size)if(Xt.drmInfos.length&&!Pt.size){Xt=T(Xt.drmInfos);for(var En=Xt.next();!En.done;En=Xt.next())if(En=En.value,En.keyIds.size&&En.keySystem==xt){Gt.allowedByKeySystem=!0,En=T(En.keyIds);for(var Wn=En.next();!Wn.done;Wn=En.next())Wn=Wn.value,((Wn=st[_t?"00":Wn])||e.C.F)&&(Gt.allowedByKeySystem=Gt.allowedByKeySystem&&!!Wn&&!ud.includes(Wn))}}else for(Gt.allowedByKeySystem=!0,Xt=T(Xt.keyIds),En=Xt.next();!En.done;En=Xt.next())En=En.value,((En=st[_t?"00":En])||e.C.F)&&(Gt.allowedByKeySystem=Gt.allowedByKeySystem&&!!En&&!ud.includes(En));Zt!=Gt.allowedByKeySystem&&(Ht=!0)}}}if(Ht&&(xo(e),!ph(e)))break e;(st=e.j.l)&&!st.allowedByKeySystem&&wp(e)}})},onExpirationUpdated:function(ot,st){var _t=zr("expirationupdated");E.dispatchEvent(_t),(_t=E.l)&&_t.onExpirationUpdated&&_t.onExpirationUpdated(ot,st)},onEvent:function(ot){E.dispatchEvent(ot),ot.type=="drmsessionupdate"&&De&&(De=!1,ot=Date.now()/1e3-E.ya,(e.B||E.getStats()).j=ot,e.O&&Hh(e.O))}},We=eI(e,I),qg(e.F,We),gt=function(){return e.Lc(Fe)},ht={config:S,$i:W,kj:pe,jj:Me,Lc:gt,Zi:V,networkingEngine:We,Uh:h,Th:v},E=new jl(i,c,o,ht),It.return(E))})}function X1(e,i){var o,c;return Qe(function(h){return h.g==1?(o=e.g.manifest.retryParameters,x(h,hh(i,e.F,o),2)):(c=h.h,c=="application/x-mpegurl"&&er()&&(c="application/vnd.apple.mpegurl"),h.return(c))})}function U3(e,i){if(!Ya())return!0;if(i){if((e.h||Zu()).canPlayType(i)=="")return!1;if(!Ya()||!nf.has(i))return!0;if(pc(i))return er()&&(e.g.drm.servers["com.apple.fps"]||e.g.drm.servers["com.apple.fps.1_0"])?e.g.streaming.useNativeHlsForFairPlay:e.g.streaming.preferNativeHls;if(i==="application/dash+xml"||i==="video/vnd.mpeg.dash.mpd")return e.g.streaming.preferNativeDash}return!1}function Q1(e){var i=e.g.textDisplayFactory;i!==e.Se&&(e.u=i(),e.u.configure?e.u.configure(e.g.textDisplayer):dn("Text displayer w/ configure",'Text displayer should have a "configure" method!'),e.Se=i,e.u.setTextVisibility(e.oa))}function n_(e){var i,o,c;return Qe(function(h){if(h.g==1)return Ap(e,"media-source"),e.h.removeAttribute("src"),ie(e.h),Q1(e),i=W3(e.h,e.u,{si:function(){return e.keySystem()},onMetadata:function(g,v,E){g=T(g);for(var S=g.next();!S.done;S=g.next())if(S=S.value,S.data&&typeof S.cueTime=="number"&&S.frames){var I=S.cueTime+v,L=E;L&&I>L&&(L=I);for(var O=T(S.frames),V=O.next();!V.done;V=O.next())i_(e,I,L,"org.id3",V.value);e.A&&e.A.onHlsTimedMetadata(S,I)}},ej:function(g){e.Ga&&Ib(e.Ga,{schemeIdUri:g.schemeIdUri,startTime:g.startTime,endTime:g.endTime,id:String(g.id),emsg:g})},onEvent:function(g){return e.dispatchEvent(g)},gj:function(){e.H&&e.H.update&&e.H.update()}},e.O),i.configure(e.g.mediaSource),o=e.g.manifest,c=o.segmentRelativeVttTiming,i.Ea=c,x(h,i.G,2);e.I=i,ue(h)})}function J1(e,i,o){function c(){return o_(e)}e.l.D(i,"playing",c),e.l.D(i,"pause",c),e.l.D(i,"ended",c),e.l.D(i,"ratechange",function(){var h=e.h.playbackRate;h!=0&&(e.K&&(e.K.set(h),e.m==Ua&&e.o.playbackRateChanged(h),fI(e,h)),h=zr("ratechange"),e.dispatchEvent(h))}),i.remote&&(e.l.D(i.remote,"connect",function(){return xo(e)}),e.l.D(i.remote,"connecting",function(){return xo(e)}),e.l.D(i.remote,"disconnect",function(){return Qe(function(h){if(h.g==1)return e.j&&i.remote.state=="disconnected"?x(h,N0(e.j),2):h.s(2);xo(e),ue(h)})})),i.audioTracks&&(e.l.D(i.audioTracks,"addtrack",function(){return xo(e)}),e.l.D(i.audioTracks,"removetrack",function(){return xo(e)}),e.l.D(i.audioTracks,"change",function(){return xo(e)})),i.textTracks&&(e.l.D(i.textTracks,"addtrack",function(h){if(h.track)switch(h=h.track,h.kind){case"metadata":G3(e,h);break;case"chapters":V3(e,h);break;default:xo(e)}}),e.l.D(i.textTracks,"removetrack",function(){return xo(e)}),e.l.D(i.textTracks,"change",function(){return xo(e)}),e.g.streaming.crossBoundaryStrategy!=="keep"&&(e.l.D(i,"waiting",function(){e.j&&zb(e.j)}),e.l.D(i,"timeupdate",function(){e.j&&zb(e.j)}))),i.preload!="none"&&e.l.ma(i,"loadedmetadata",function(){e.B.C=Date.now()/1e3-o})}function B3(e,i,o,c){var h,g,v,E,S,I,L,O,V,W,pe,Me,De,Fe,We,gt,ht,It,ot,st,_t,xt,Ht,Pt,jt,Gt;return Qe(function(Yt){switch(Yt.g){case 1:for(Ap(e,"load"),h=e.h,e.K=new cm({$d:function(){return h.playbackRate},sc:function(){return h.defaultPlaybackRate},mg:function(Zt){h.playbackRate=Zt},gh:function(Zt){h.currentTime+=Zt}}),J1(e,h,i),g=!1,v=T(e.i.variants),E=v.next();!E.done;E=v.next())S=E.value,(I=S.video&&S.video.dependencyStream)&&(g=Ff(I));O3(e,e.g,g),e.Tb=e.g.preferredTextLanguage,e.Hd=e.g.preferredTextRole,e.Fd=e.g.preferForcedSubs,c_(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.o.init(function(Zt,Xt,En){e.i&&e.j&&Zt!=e.j.l&&Sm(e,Zt,!0,Xt===void 0?!1:Xt,En===void 0?0:En)}),e.o.setMediaElement(h),e.o.setCmsdManager(e.fa),e.j=Q3(e),e.j.configure(e.g.streaming),e.m=Ua,e.dispatchEvent(zr("streaming")),L=o;case 2:for((V=e.j.l)||L||(L=ph(e)?e.o.chooseVariant():null),W=[],O=V||L,pe=T([O.video,O.audio]),Me=pe.next();!Me.done;Me=pe.next())(De=Me.value)&&!De.segmentIndex&&(W.push(De.createSegmentIndex()),De.dependencyStream&&W.push(De.dependencyStream.createSegmentIndex()));if(!(0<W.length)){Yt.s(4);break}return x(Yt,Promise.all(W),4);case 4:if(!O||O.disabledUntilTime!=0){Yt.s(2);break}if(e.H&&e.H.onInitialVariantChosen&&e.H.onInitialVariantChosen(O),e.i.isLowLatency&&(e.g.streaming.lowLatencyMode?e.configure(e.Xe):kt("Low-latency live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.")),e.L&&(w3(e.L,e.i.isLowLatency&&e.g.streaming.lowLatencyMode),I3(e.L,1e3*i)),c_(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),PU(e.j,e.g.playRangeStart,e.g.playRangeEnd),Fe=function(Zt){e.G=$3(e,Zt),e.La=K3(e,Zt),tI(e,h,!1)},e.g.streaming.startAtSegmentBoundary||(We=e.Z,We==null&&e.i.startTime&&(We=e.i.startTime),Fe(We)),V){Yt.s(7);break}if(!e.g.streaming.startAtSegmentBoundary){Yt.s(8);break}return gt=e.i.presentationTimeline,ht=e.Z||e.h.currentTime,e.Z==null&&e.i.startTime&&(ht=e.i.startTime),It=gt.Hb(),ot=gt.ob(),ht<It?ht=It:ht>ot&&(ht=ot),x(Yt,eB(L,ht),9);case 9:st=Yt.h,Fe(st);case 8:Sm(e,L,!0,!1,0);case 7:return e.G.ready(),_t=e.vc().find(function(Zt){return Zt.active}),_t||((xt=Bl(e.i.textStreams,e.Tb,e.Hd,e.Fd)[0]||null)&&Vb(e.B.h,xt,!0),L&&(xt?(Yy(L.audio,xt,e.g)&&(e.oa=!0),e.oa&&e.u.setTextVisibility(!0),vI(e)):e.oa=!1),xt&&(e.g.streaming.alwaysStreamText||e.Pf())&&(R0(e.j,xt),xm(e))),x(Yt,e.j.start(c),10);case 10:e.g.abr.enabled&&(e.o.enable(),TI(e)),xo(e),ph(e),e.i.variants.some(function(Zt){return Zt.primary}),((Ht=e.U())&&(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled||e.i.serviceDescription||e.g.streaming.liveSync.panicMode)||e.g.streaming.vodDynamicPlaybackRate)&&(Pt=function(){return hI(e)},e.l.D(h,"timeupdate",Pt)),Ht||(jt=function(){return Z0(e)},e.l.D(h,"timeupdate",jt),Z0(e),e.i.nextUrl&&(0<e.g.streaming.preloadNextUrlWindow&&(Gt=function(){var Zt;return Qe(function(Xt){if(Xt.g==1)return Zt=e.Ra().end-e.h.currentTime,isNaN(Zt)||!(Zt<=e.g.streaming.preloadNextUrlWindow)?Xt.s(0):(e.l.Ja(h,"timeupdate",Gt),x(Xt,e.preload(e.i.nextUrl),4));e.ya=Xt.h,ue(Xt)})},e.l.D(h,"timeupdate",Gt)),e.l.D(h,"ended",function(){e.load(e.ya||e.i.nextUrl)}))),e.A&&e.A.onManifestUpdated(Ht),e.sa=!0,ue(Yt)}})}function z3(e,i){var o,c,h,g,v;return Qe(function(E){return E.g==1?(o=ds,c=Date.now()/1e3,h=!0,e.C=e.Lc({Xb:e.F,onError:function(S){Ip(e,S)},pe:function(){},onExpirationUpdated:function(){var S=zr("expirationupdated");e.dispatchEvent(S)},onEvent:function(S){e.dispatchEvent(S),S.type=="drmsessionupdate"&&h&&(h=!1,e.B.j=Date.now()/1e3-c)}}),e.C.configure(e.g.drm),g={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},v={id:0,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:i?ps(i):"",codecs:i?ea(i):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:o.la,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null},v.fullMimeTypes.add(Xr(v.mimeType,v.codecs)),i.startsWith("audio/")?(v.type=o.V,g.audio=v):g.video=v,e.C.$=!0,x(E,Kg(e.C,[g],[]),2)):x(E,e.C.Lb(e.h),0)})}function j3(e,i,o){var c,h,g,v,E,S,I,L,O,V,W,pe;return Qe(function(Me){switch(Me.g){case 1:if(Ap(e,"src-equals"),c=e.h,e.G=new io(c),h=!1,e.Cd.push(function(){h=!0}),e.Z!=null&&e.G.af(e.Z),e.La=Y3(e,e.Z||0),e.K=new cm({$d:function(){return c.playbackRate},sc:function(){return c.defaultPlaybackRate},mg:function(De){c.playbackRate=De},gh:function(De){c.currentTime+=De}}),tI(e,c,!0),c.textTracks&&(Q1(e),g=function(){var De=_m(e).find(function(Fe){return Fe.mode!=="disabled"});De&&(De.mode="showing"),(De=lI(e))&&(De.mode="hidden")},v=function(){var De=_m(e).find(function(We){return We.mode!=="disabled"});De&&(De.mode="hidden"),De=lI(e);var Fe=e.u.isTextVisible();De&&Fe&&(De.mode="showing")},e.l.D(c,"enterpictureinpicture",function(){return g()}),e.l.D(c,"leavepictureinpicture",function(){return v()}),c.remote?(e.l.D(c.remote,"connect",function(){return v()}),e.l.D(c.remote,"connecting",function(){return v()}),e.l.D(c.remote,"disconnect",function(){return v()})):"webkitCurrentPlaybackTargetIsWireless"in c&&e.l.D(c,"webkitcurrentplaybacktargetiswirelesschanged",function(){return v()}),E=c,E.webkitSupportsFullscreen&&e.l.D(E,"webkitpresentationmodechanged",function(){E.webkitPresentationMode!="inline"?g():v()})),J1(e,c,i),S=C3(e.L,e.T,o),!S.includes("#t=")&&(0<e.g.playRangeStart||isFinite(e.g.playRangeEnd))&&(S+="#t=",0<e.g.playRangeStart&&(S+=e.g.playRangeStart),isFinite(e.g.playRangeEnd)&&(S+=","+e.g.playRangeEnd)),!e.I){Me.s(2);break}return x(Me,e.I.destroy(),3);case 3:e.I=null;case 2:return ie(c),c.src=S,(In()||Si())&&c.load(),c.preload!="none"&&!c.autoplay&&pc(o)&&er()&&c.load(),e.m=fl,e.dispatchEvent(zr("streaming")),I=new mr,md(c,HTMLMediaElement.HAVE_METADATA,e.l,function(){e.G.ready(),I.resolve()}),L=function(){return new Promise(function(De){var Fe=new Li(De);e.l.D(c.textTracks,"change",function(){return Fe.da(.5)}),Fe.da(.5)})},md(c,HTMLMediaElement.HAVE_CURRENT_DATA,e.l,function(){var De,Fe,We,gt,ht;return Qe(function(It){if(It.g==1)return x(It,L(),2);if(h)return It.return();for(q3(e),De=_m(e),De.some(function(ot){return ot.mode==="showing"})&&(e.oa=!0,e.u.setTextVisibility(!0)),De.length&&(e.u.enableTextDisplayer?e.u.enableTextDisplayer():dn("Text displayer w/ enableTextDisplayer",'Text displayer should have a "enableTextDisplayer" method!')),Fe=!1,We=T(De),gt=We.next();!gt.done;gt=We.next())ht=gt.value,ht.mode!=="disabled"&&(Fe?(ht.mode="disabled",kt("Found more than one enabled text track, disabling it",ht)):(oI(e,ht),Fe=!0));H3(e),ue(It)})}),c.error?I.reject(u_(e)):c.preload=="none"&&(kt('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),I.resolve()),e.l.ma(c,"error",function(){I.reject(u_(e))}),x(Me,jo(e.g.streaming.loadTimeout,I),4);case 4:((O=e.U())&&(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled||e.g.streaming.liveSync.panicMode)||e.g.streaming.vodDynamicPlaybackRate)&&(V=function(){return hI(e)},e.l.D(c,"timeupdate",V)),O||(W=function(){return Z0(e)},e.l.D(c,"timeupdate",W),Z0(e)),e.A&&(e.A.onManifestUpdated(O),O&&(pe=e.Ra().end,e.l.D(c,"progress",function(){var De=e.Ra().end;pe!=De&&(e.A.onManifestUpdated(e.U()),pe=De)}))),e.sa=!0,ue(Me)}})}function q3(e){var i=e.g.preferredAudioLanguage;i!=""&&e.sh(i,e.g.preferredVariantRole)}function H3(e){var i=e.g.preferredTextLanguage;i!=""&&e.hg(i,e.g.preferredTextRole,e.g.preferForcedSubs)}function G3(e,i){if(i.kind=="metadata"){i.mode="hidden",e.l.D(i,"cuechange",function(){if(i.activeCues)for(var c=T(i.activeCues),h=c.next();!h.done;h=c.next())h=h.value,i_(e,h.startTime,h.endTime,h.type,h.value),e.A&&e.A.onCueMetadataChange(h.value);if(i.cues){c=[],h=T(i.cues);for(var g=h.next(),v={};!g.done;v={bc:void 0},g=h.next())v.bc=g.value,v.bc.type=="com.apple.quicktime.HLS"&&v.bc.startTime!=null&&(g=c.find(function(E){return function(S){return S.startTime==E.bc.startTime&&S.endTime==E.bc.endTime}}(v)),g||(g={startTime:v.bc.startTime,endTime:v.bc.endTime,values:[]},c.push(g)),g.values.push(v.bc.value));for(c=T(c),h=c.next();!h.done;h=c.next())h=h.value,h.values.some(function(E){return E.key=="X-ASSET-URI"||E.key=="X-ASSET-LIST"})&&e.A&&(h.values.push({key:"CUE",description:"",data:h.startTime!=0||e.U()?"ONCE":"ONCE,PRE",mimeType:null,pictureType:null}),e.A.onHLSInterstitialMetadata(e,e.h,h))}});var o=new Li(function(){var c=J3(e);c=T(c);for(var h=c.next();!h.done;h=c.next())h.value.mode="hidden"}).sb().da(.5);e.Cd.push(function(){o.stop()})}}function Z1(e,i){i=new Map().set("startTime",i.startTime).set("endTime",i.endTime).set("metadataType",i.schemeIdUri).set("payload",i.payload),e.dispatchEvent(zr("metadata",i))}function i_(e,i,o,c,h){e.Aa&&(i={schemeIdUri:c,startTime:i,endTime:o||1/0,id:"",payload:h},i.id=JSON.stringify(i),Ib(e.Aa,i))}function V3(e,i){if(i&&i.kind=="chapters"){i.mode="hidden";var o=new Li(function(){i.mode="hidden"}).sb().da(.5);e.Cd.push(function(){o.stop()})}}p.oj=function(){for(var e=this.$;e.g;)e.release()},p.Lc=function(e){return new sh(e)};function eI(e,i){function o(h){i()?i().dispatchEvent(h):e.dispatchEvent(h)}function c(h){i()?vm(i(),!0,h):h()}return i||(i=function(){return null}),new Dr(function(h,g,v,E){var S=i()?i().j:e.o;S&&S.segmentDownloaded(h,g,v,E)},function(h,g,v){g=new Map().set("headers",h).set("request",g).set("requestType",v),o(zr("downloadheadersreceived",g)),c(function(){if(e.fa){var E=e.fa;if(E.h.enabled){var S=h["cmsd-static"];if(S)try{var I=new Map,L=S.split(",");for(S=0;S<L.length;S++){var O=L[S].split("=");I.set(O[0],z1(O[1]))}}catch{}if(I=h["cmsd-dynamic"]){try{var V=new Map,W=I.split(";");for(I=1;I<W.length;I++){var pe=W[I].split("=");V.set(pe[0],z1(pe[1]))}var Me=V}catch{Me=null}Me&&(E.g=Me)}}}})},function(h,g){h=new Map().set("request",h).set("response",g),o(zr("downloadcompleted",h))},function(h,g,v,E){h=new Map().set("request",h).set("error",g).set("httpResponseCode",v).set("aborted",E),o(zr("downloadfailed",h))},function(h,g,v){c(function(){var E=e.L,S=v;if(S=S===void 0?{}:S,E.g.enabled)if(g.method==="HEAD")xp(E,g);else switch(h){case 0:try{if(E.g.enabled){if(S.type){e:{switch(S.type){case 4:var I=E.l?W0:Y0;break e;case 3:case 2:I=E.l?Q0:X0;break e;case 5:I="s";break e}I=void 0}E.i=I}xp(E,g,{ot:U1,su:!E.u})}}catch(Yt){Bt("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",Yt)}break;case Go:try{if(E.g.enabled){var L=S.segment;I=0,L&&(I=L.endTime-L.startTime);var O={d:1e3*I,st:E.h.U()?"l":"v"};O.ot=R3(S);var V=O.ot===V0||O.ot===G0||O.ot===$0||O.ot===K0,W=S.stream;if(W){var pe=E.h.gb();if(V&&(O.bl=L3(E,W.type),O.ot!==K0)){var Me=F1(E,W.type);O.dl=pe?Me/Math.abs(pe):Me}if(W.bandwidth&&(O.br=W.bandwidth/1e3),W.segmentIndex&&L){var De=W.segmentIndex.Gb(L.endTime,!0,0>pe);if(De){var Fe=De.next().value;if(Fe&&Fe!=L){if(!rc(L.N(),Fe.N())){var We=Fe.N()[0],gt=g.uris[0],ht=new URL(We),It=new URL(gt);if(ht.origin!==It.origin)var ot=We;else{for(var st=ht.pathname.split("/").slice(1),_t=It.pathname.split("/").slice(1,-1);st[0]===_t[0];)st.shift(),_t.shift();for(;_t.length;)_t.shift(),st.unshift("..");ot=st.join("/")}O.nor=ot}if((Fe.Sa||Fe.wa)&&(L.Sa!=Fe.Sa||L.wa!=Fe.wa)){var xt=Fe.Sa+"-";Fe.wa&&(xt+=Fe.wa),O.nrr=xt}}}var Ht=E.h.gb()||1,Pt=F1(E,W.type)||500,jt=W.bandwidth,Gt=jt?jt*(L.endTime-L.startTime)/1e3/(Pt/Ht/1e3)*E.g.rtpSafetyFactor:NaN;isNaN(Gt)||(O.rtp=Gt)}}V&&O.ot!==K0&&(O.tb=P3(E,O.ot)/1e3),xp(E,g,O)}}catch(Yt){Bt("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",Yt)}break;case 2:case 5:case 6:xp(E,g,{ot:"k"});break;case 4:xp(E,g,{ot:"o"})}})},function(h,g,v,E){(h=i()?i().l:e.H)&&h.banLocation&&h.banLocation(E)},function(h,g){if(g.data){g=g.data.byteLength;var v=i()?i().getStats():e.B;v&&(v.mc=isNaN(v.mc)?g:v.mc+g,h===0&&(v.bh=g))}})}function $3(e,i){return new um(e.h,e.i,e.g.streaming,i,function(){e.La&&y1(e.La,!0),e.j&&e.j.Fc(),e.M&&xc(e)},function(o){return e.dispatchEvent(o)})}function K3(e,i){var o=e.U()||0<i;i=new fh(e.yd,o),i.addEventListener("enter",function(g){Am(e,"timelineregionenter",g.region)}),i.addEventListener("exit",function(g){Am(e,"timelineregionexit",g.region)}),i.addEventListener("skip",function(g){var v=g.region;g.seeking||(Am(e,"timelineregionenter",v),Am(e,"timelineregionexit",v))});var c=new fh(e.Aa,o);c.addEventListener("enter",function(g){Z1(e,g.region)}),o=new fh(e.Ga,o),o.addEventListener("enter",function(g){g=new Map().set("detail",g.region.emsg),e.dispatchEvent(zr("emsg",g))});var h=new wb(e.h);return h.g.add(i),h.g.add(c),h.g.add(o),e.xd&&h.g.add(e.xd),h}function Y3(e,i){i=new fh(e.Aa,0<i),i.addEventListener("enter",function(c){Z1(e,c.region)});var o=new wb(e.h);return o.g.add(i),o}function tI(e,i,o){e.M=new yb,e.M.g=ef,nI(e),a_(e),e.pa=new Li(function(){xc(e)}),e.g.streaming.rebufferingGoal&&e.pa.ua(.25),e.l.D(i,"waiting",function(){return xc(e)}),e.l.D(i,"canplaythrough",function(){return xc(e)}),e.l.D(i,"playing",function(){return xc(e)}),e.l.D(i,"seeked",function(){return xc(e)}),o&&(e.l.D(i,"stalled",function(){return xc(e)}),e.l.D(i,"progress",function(){return xc(e)}),e.l.D(i,"timeupdate",function(){return xc(e)}))}function nI(e){var i=e.g.streaming.rebufferingGoal;e.M.i.set(tf,Math.min(.5,i/2)).set(ef,i)}function xc(e){switch(e.m){case fl:if(e.Uc())var i=!0;else{var o=Se(e.h.buffered);i=o!=null&&o>=e.h.duration-1}break;case Ua:e:if(e.Uc()||qn(e.I))i=!0;else{if(e.i.presentationTimeline.U()){o=e.i.presentationTimeline.cc();var c=Se(e.h.buffered);if(c!=null&&c>=o){i=!0;break e}}i=!1}break;default:i=!1}c=Ie(e.h.buffered,e.h.currentTime),o=e.M;var h=i,g=o.i.get(o.g);i=o.g,c=h||c>=g&&0<c?tf:ef,o.g=c,(i=i!=c)&&c===tf&&(o.h=Date.now()),i&&a_(e)}function W3(e,i,o,c){return new ri(e,i,o,c)}function X3(e){return new Xb({getBandwidthEstimate:function(){return e.o?e.o.getBandwidthEstimate():NaN},Fb:function(){return e.Fb()},getCurrentTime:function(){return e.h?e.h.currentTime:0},gb:function(){return e.gb()},xb:function(){return e.xb()},Rb:function(){return e.Rb()},U:function(){return e.U()},Zd:function(){return e.Zd()}},e.g.cmcd)}function Q3(e){return new S1(e.i,{Rc:function(){return e.G?e.G.Od():0},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()},gb:function(){return e.gb()},video:e.h,aa:e.I,Xb:e.F,onError:function(i){return Ip(e,i)},onEvent:function(i){return e.dispatchEvent(i)},qe:function(i,o,c){var h=i.startTime;if(i=i.endTime,o=o.type,o!=zi){if(e.G){e.G.ih();var g=kn(e.I,o);!e.U()&&e.h.paused&&!e.h.seeking&&g!=null&&0<g&&e.G.Od()<g&&e.G.af(g)}xc(e)}c=new Map().set("start",h).set("end",i).set("contentType",o).set("isMuxed",c),e.dispatchEvent(zr("segmentappended",c))},fj:function(i,o){(o=o.Wc)&&e.xd&&xU(e.xd,o,i)},Fg:function(i,o){var c=e.C;if(c.g.parseInbandPsshEnabled&&!c.F&&["audio","video"].includes(i)){i=new $g(jn(o)),o=0;for(var h=T(i.data),g=h.next();!g.done;g=h.next())o+=g.value.length;if(o==0)c=Promise.resolve();else{for(o=new Uint8Array(o),h=0,i=T(i.data),g=i.next();!g.done;g=i.next())g=g.value,o.set(g,h),h+=g.length;Jd(c,"cenc",o),c=c.m}}else c=Promise.resolve();return c},disableStream:function(i,o){return e.disableStream(i,o)}})}p.configure=function(e,i){if(arguments.length==2&&typeof e=="string"&&(e=F0(e,i)),e.streaming&&"forceTransmuxTS"in e.streaming&&(dn("streaming.forceTransmuxTS configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmuxTS,delete e.streaming.forceTransmuxTS),e.streaming&&"forceTransmux"in e.streaming&&(dn("streaming.forceTransmux configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource.mediaSource=e.streaming.forceTransmux,delete e.streaming.forceTransmux),e.streaming&&"useNativeHlsOnSafari"in e.streaming&&(dn("streaming.useNativeHlsOnSafari configuration","Please Use streaming.useNativeHlsForFairPlay or streaming.preferNativeHls instead."),e.streaming.preferNativeHls=e.streaming.useNativeHlsOnSafari&&er(),delete e.streaming.useNativeHlsOnSafari),e.streaming&&typeof e.streaming.liveSync=="boolean"){dn("streaming.liveSync","Please Use streaming.liveSync.enabled instead.");var o=e.streaming.liveSync;e.streaming.liveSync={},e.streaming.liveSync.enabled=o}if(e.streaming&&!(e.streaming.liveSync&&"targetLatency"in e.streaming.liveSync)&&("liveSyncMinLatency"in e.streaming||"liveSyncMaxLatency"in e.streaming)){o=e.streaming.liveSyncMinLatency||0;var c=Math.abs((e.streaming.liveSyncMaxLatency||1)-o)/2;e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=o+c,e.streaming.liveSync.targetLatencyTolerance=c}if(e.streaming&&"liveSyncMaxLatency"in e.streaming&&(dn("streaming.liveSyncMaxLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMaxLatency),e.streaming&&"liveSyncMinLatency"in e.streaming&&(dn("streaming.liveSyncMinLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMinLatency),e.streaming&&"liveSyncTargetLatency"in e.streaming&&(dn("streaming.liveSyncTargetLatency","Please Use streaming.liveSync.targetLatency instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=e.streaming.liveSyncTargetLatency,delete e.streaming.liveSyncTargetLatency),e.streaming&&"liveSyncTargetLatencyTolerance"in e.streaming&&(dn("streaming.liveSyncTargetLatencyTolerance","Please Use streaming.liveSync.targetLatencyTolerance instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatencyTolerance=e.streaming.liveSyncTargetLatencyTolerance,delete e.streaming.liveSyncTargetLatencyTolerance),e.streaming&&"liveSyncPlaybackRate"in e.streaming&&(dn("streaming.liveSyncPlaybackRate","Please Use streaming.liveSync.maxPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.maxPlaybackRate=e.streaming.liveSyncPlaybackRate,delete e.streaming.liveSyncPlaybackRate),e.streaming&&"liveSyncMinPlaybackRate"in e.streaming&&(dn("streaming.liveSyncMinPlaybackRate","Please Use streaming.liveSync.minPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.minPlaybackRate=e.streaming.liveSyncMinPlaybackRate,delete e.streaming.liveSyncMinPlaybackRate),e.streaming&&"liveSyncPanicMode"in e.streaming&&(dn("streaming.liveSyncPanicMode","Please Use streaming.liveSync.panicMode instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicMode=e.streaming.liveSyncPanicMode,delete e.streaming.liveSyncPanicMode),e.streaming&&"liveSyncPanicThreshold"in e.streaming&&(dn("streaming.liveSyncPanicThreshold","Please Use streaming.liveSync.panicThreshold instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicThreshold=e.streaming.liveSyncPanicThreshold,delete e.streaming.liveSyncPanicThreshold),e.mediaSource&&"sourceBufferExtraFeatures"in e.mediaSource){dn("mediaSource.sourceBufferExtraFeatures configuration","Please Use mediaSource.addExtraFeaturesToSourceBuffer() instead.");var h=e.mediaSource.sourceBufferExtraFeatures;e.mediaSource.addExtraFeaturesToSourceBuffer=function(){return h},delete e.mediaSource.sourceBufferExtraFeatures}if(e.manifest&&e.manifest.hls&&"useSafariBehaviorForLive"in e.manifest.hls&&(dn("manifest.hls.useSafariBehaviorForLive configuration","Please Use liveSync config to keep on live Edge instead."),delete e.manifest.hls.useSafariBehaviorForLive),e.streaming&&"parsePrftBox"in e.streaming&&(dn("streaming.parsePrftBox configuration","Now fired without needing a configuration."),delete e.streaming.parsePrftBox),e.manifest&&e.manifest.dash&&"enableAudioGroups"in e.manifest.dash&&(dn("manifest.dash.enableAudioGroups configuration","It is now enabled by default and cannot be disabled."),delete e.manifest.dash.enableAudioGroups),e.streaming&&"dispatchAllEmsgBoxes"in e.streaming&&(dn("streaming.dispatchAllEmsgBoxes configuration","Please Use mediaSource.dispatchAllEmsgBoxes instead."),e.mediaSource.dispatchAllEmsgBoxes=e.streaming.dispatchAllEmsgBoxes,delete e.streaming.dispatchAllEmsgBoxes),e.streaming&&"autoLowLatencyMode"in e.streaming&&(dn("streaming.autoLowLatencyMode configuration","Please Use streaming.lowLatencyMode instead."),e.streaming.lowLatencyMode=e.streaming.autoLowLatencyMode,delete e.streaming.autoLowLatencyMode),e.manifest&&e.manifest.dash&&"ignoreSupplementalCodecs"in e.manifest.dash&&(dn("manifest.dash.ignoreSupplementalCodecs configuration","Please Use manifest.ignoreSupplementalCodecs instead."),e.manifest.ignoreSupplementalCodecs=e.manifest.dash.ignoreSupplementalCodecs,delete e.manifest.dash.ignoreSupplementalCodecs),e.manifest&&e.manifest.hls&&"ignoreSupplementalCodecs"in e.manifest.hls&&(dn("manifest.hls.ignoreSupplementalCodecs configuration","Please Use manifest.ignoreSupplementalCodecs instead."),e.manifest.ignoreSupplementalCodecs=e.manifest.hls.ignoreSupplementalCodecs,delete e.manifest.hls.ignoreSupplementalCodecs),e.manifest&&e.manifest.dash&&"updatePeriod"in e.manifest.dash&&(dn("manifest.dash.updatePeriod configuration","Please Use manifest.updatePeriod instead."),e.manifest.updatePeriod=e.manifest.dash.updatePeriod,delete e.manifest.dash.updatePeriod),e.manifest&&e.manifest.hls&&"updatePeriod"in e.manifest.hls&&(dn("manifest.hls.updatePeriod configuration","Please Use manifest.updatePeriod instead."),e.manifest.updatePeriod=e.manifest.hls.updatePeriod,delete e.manifest.hls.updatePeriod),e.manifest&&e.manifest.dash&&"ignoreDrmInfo"in e.manifest.dash&&(dn("manifest.dash.ignoreDrmInfo configuration","Please Use manifest.ignoreDrmInfo instead."),e.manifest.ignoreDrmInfo=e.manifest.dash.ignoreDrmInfo,delete e.manifest.dash.ignoreDrmInfo),e.drm&&e.drm.advanced){o=!1;for(var g in e.drm.advanced){var v=e.drm.advanced[g];c=v.videoRobustness,v=v.audioRobustness,"videoRobustness"in e.drm.advanced[g]&&!Array.isArray(e.drm.advanced[g].videoRobustness)&&(e.drm.advanced[g].videoRobustness=[c],o=!0),"audioRobustness"in e.drm.advanced[g]&&!Array.isArray(e.drm.advanced[g].audioRobustness)&&(e.drm.advanced[g].audioRobustness=[v],o=!0)}o&&dn("AdvancedDrmConfiguration's videoRobustness and audioRobustness","These properties are no longer strings but array of strings, please update your usage of these properties.")}return e.streaming&&"crossBoundaryStrategy"in e.streaming&&e.streaming.crossBoundaryStrategy!="keep"&&(e.streaming.inaccurateManifestTolerance=0),g=lf(this.g,e,vd(this)),iI(this),g},p.ci=function(e){this.Xe=e};function iI(e){if(e.te=new em(e.g,e.ka,e.C),e.H){var i=Na(e.g.manifest);e.h&&e.h.nodeName==="AUDIO"&&(i.disableVideo=!0),e.H.configure(i)}if(e.C&&e.C.configure(e.g.drm),e.j){e.j.configure(e.g.streaming);try{e.m!=pu&&nm(e.te,e.i)&&xo(e)}catch(h){Ip(e,h)}e.o&&ph(e),i=e.j.l,!i||i.allowedByApplication&&i.allowedByKeySystem||wp(e)}if(e.F&&(e.F.kg(e.g.streaming.forceHTTP),e.F.lg(e.g.streaming.forceHTTPS),e.F.o=e.g.streaming.minBytesForProgressEvents),e.I&&(e.I.configure(e.g.mediaSource),e.I.Ea=e.g.manifest.segmentRelativeVttTiming),e.u)if(i=e.g.textDisplayFactory,e.Se!=i){var o=e.u;if(e.u=i(),e.u.configure?e.u.configure(e.g.textDisplayer):dn("Text displayer w/ configure",'Text displayer should have a "configure" method!'),e.u.setTextLanguage||dn("Text displayer w/ setTextLanguage",'Text displayer should have a "setTextLanguage" method!'),e.u.setTextVisibility(o.isTextVisible()),o.destroy(),e.I){o=e.I;var c=e.u;o.ea=c,o.h&&(o.h.j=c)}e.Se=i,e.j&&(i=e.j,(o=i.i.get(zi))&&Tp(i,o.stream,!0,0,!0))}else e.u.configure&&e.u.configure(e.g.textDisplayer);e.o&&(e.o.configure(e.g.abr),e.g.abr.enabled?e.o.enable():e.o.disable(),TI(e)),e.M&&nI(e),e.pa&&(e.g.streaming.rebufferingGoal?e.pa.ua(.25):e.pa.stop()),e.i&&c_(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.A&&e.A.configure(e.g.ads),e.L&&e.L.configure(e.g.cmcd),e.fa&&e.fa.configure(e.g.cmsd)}p.getConfiguration=function(){var e=vd(this);return lf(e,this.g,vd(this)),e},p.ki=function(){return this.Xe},p.Vg=function(){var e=vd(this);return lf(e,this.g,vd(this)),w1(this.g,vd(this))},p.Qg=function(){if(this.h){var e=this.h.buffered.length;e=e?this.h.buffered.end(e-1):0;var i=this.getConfiguration().streaming.bufferingGoal;if(i=Math.min(this.h.currentTime+i,this.Ra().end),e>=i)return 1;if(!(e<=this.h.currentTime)&&e<i)return(e-this.h.currentTime)/(i-this.h.currentTime)}return 0},p.sj=function(){for(var e in this.g)delete this.g[e];lf(this.g,vd(this),vd(this)),iI(this)},p.ti=function(){return this.m},p.Tg=function(){return this.i?this.i.type:null},p.xi=function(){return this.h},p.xb=function(){return this.F},p.Qc=function(){return this.T},p.Pg=function(){return this.A?this.A:null},p.U=function(){return this.i&&!this.Pa()?this.i.presentationTimeline.U():this.h&&this.h.src?this.h.duration==1/0:!1},p.yc=function(){return this.i?this.i.presentationTimeline.yc():!1},p.Qi=function(){if(this.i&&!this.Pa()){var e=this.i.variants;return e.length?!e[0].video:!1}return this.h&&this.h.src?this.h.videoTracks?this.h.videoTracks.length==0:this.h.videoHeight==0:!1},p.Ra=function(){if(this.i&&!this.Pa()){if(!this.sa&&this.i.type=="HLS")return{start:0,end:0};var e=this.i.presentationTimeline;return{start:e.Hb(),end:e.ob()}}if(this.h&&this.h.src&&(e=this.h.seekable)&&e.length){var i=this.g?this.g.playRangeStart:0;i=Math.max(e.start(0),i);var o=this.g?this.g.playRangeEnd:1/0;return e=Math.min(e.end(e.length-1),o),{start:i,end:e}}return{start:0,end:0}},p.Ni=function(){this.U()&&(this.h.currentTime=this.Ra().end)},p.Ri=function(){return this.sa},p.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},p.drmInfo=function(){return this.C?this.C.h:null},p.pd=function(){return this.C?this.C.pd():1/0},p.Gf=function(){return this.C?this.C.Gf():[]},p.Yd=function(){return this.C?this.C.Yd():{}},p.Of=function(){return this.M?this.M.g==ef:!1},p.gb=function(){return this.h?this.K?this.K.i:1:0},p.Md=function(e,i){i=i===void 0?!0:i,e==0?kt("A trick play rate of 0 is unsupported!"):(this.K.set(e),this.m==Ua&&(this.o.playbackRateChanged(e),Pb(this.j,i&&1<Math.abs(e))),fI(this,e))},p.gd=function(){var e=this.K.sc();this.m==fl&&this.K.set(e),this.m==Ua&&(this.K.set(e),this.o.playbackRateChanged(e),Pb(this.j,!1)),this.Na.Qa()},p.Rb=function(){if(this.i&&!this.Pa()){for(var e=this.j?this.j.l:null,i=[],o=0,c=T(this.i.variants),h=c.next();!h.done;h=c.next())if(h=h.value,Fl(h)){var g=Oi(h);g.active=h==e,g.active||o==1||e==null||h.video!=e.video||h.audio!=e.audio||(g.active=!0),g.active&&o++,i.push(g)}return i}return this.h&&this.h.audioTracks?Array.from(this.h.audioTracks).map(function(v){return cu(v)}):[]},p.vc=function(){if(this.i&&!this.Pa()){for(var e=this.j?this.j.u:null,i=[],o=T(this.i.textStreams),c=o.next();!c.done;c=o.next()){c=c.value;var h=lr(c);h.active=c==e,i.push(h)}return i}return this.h&&this.h.src&&this.h.textTracks?_m(this).map(function(g){return Ol(g)}):[]},p.pi=function(){var e=this.Oe;return this.i&&(e=this.i.imageStreams),e.map(function(i){return Rs(i)})},p.fi=function(e){var i=this,o,c;return Qe(function(h){return h.g==1?x(h,sI(i,e),2):(o=h.h,o?(c=[],o.segmentIndex.Eb(function(g){var v=rI(g.tilesLayout||o.tilesLayout);if(v){v=v.rows*v.oc;for(var E=g.j-g.startTime,S=0;S<v;S++){var I=aI(o,g.startTime+E*S/v);I&&c.push(I)}}}),o.closeSegmentIndex&&o.closeSegmentIndex(),h.return(c)):h.return(null))})};function rI(e){return e&&(e=/(\d+)x(\d+)/.exec(e))?{oc:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}p.Hi=function(e,i){var o=this,c;return Qe(function(h){return h.g==1?x(h,sI(o,e),2):(c=h.h)?h.return(aI(c,i)):h.return(null)})};function sI(e,i){var o,c;return Qe(function(h){return h.g==1?e.m!=Ua&&e.m!=fl||(o=e.Oe,e.i&&(o=e.i.imageStreams),c=o[0],!c)?h.return(null):(i!=null&&(c=o.find(function(g){return g.id==i})),c?c.segmentIndex?h.s(2):x(h,c.createSegmentIndex(),2):h.return(null)):h.return(c)})}function aI(e,i){var o=e.segmentIndex.find(i);if(o==null)return null;o=e.segmentIndex.get(o);var c=rI(o.tilesLayout||e.tilesLayout);if(!c)return null;var h=e.width||0,g=e.height||0,v=h/c.oc,E=g/c.rows,S=c.oc*c.rows,I=o.j-o.startTime;I=o.B||I/S;var L=o.startTime,O=0,V=0;return 1<S&&(i=Math.floor((i-o.startTime)/I),L=o.startTime+i*I,O=i%c.oc*v,V=Math.floor(i/c.oc)*E),i=!1,(c=o.thumbnailSprite)&&(i=!0,E=c.height,O=c.positionX,V=c.positionY,v=c.width),{segment:o,imageHeight:g,imageWidth:h,height:E,positionX:O,positionY:V,startTime:L,duration:I,uris:o.N(),width:v,sprite:i,mimeType:o.mimeType||e.mimeType,codecs:o.codecs||e.codecs}}p.th=function(e){function i(){var c=o.i.textStreams.find(function(h){return h.id==e.id});c&&c!=o.j.u&&(Vb(o.B.h,c,!1),R0(o.j,c),ev(o),xm(o),o.Tb=c.language)}var o=this;this.i&&this.G&&(i(),!this.Pa())||function(){if(o.h&&o.h.textTracks){var c=_m(o),h=c.find(function(g){return g.mode!=="disabled"});(c=c.find(function(g){return ga(g)===e.id}))&&(h!==c&&(h&&(h.mode="disabled",o.l.Ja(h,"cuechange"),o.u.remove(0,1/0)),c&&oI(o,c)),ev(o),xm(o))}}()};function oI(e,i){e.l.D(i,"cuechange",function(){e.u.remove(0,Math.max(0,e.h.currentTime-e.g.streaming.bufferBehind));var o={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},c=[],h=Array.from(i.activeCues||[]);h=T(h);for(var g=h.next();!g.done;g=h.next()){if(g=g.value,g.endTime===1/0||g.endTime<g.startTime)g=null;else{var v=new kr(g.startTime,g.endTime,g.text);v.line=typeof g.line=="number"?g.line:null,g.lineAlign&&(v.lineAlign=g.lineAlign),v.lineInterpretation=g.snapToLines?hc:1,v.position=typeof g.position=="number"?g.position:null,g.positionAlign&&(v.positionAlign=g.positionAlign),v.size=g.size,v.textAlign=g.align,g.vertical==="lr"?v.writingMode="vertical-lr":g.vertical==="rl"&&(v.writingMode="vertical-rl"),g.region&&(v.region.id=g.region.id,v.region.height=g.region.lines,v.region.heightUnits=2,v.region.regionAnchorX=g.region.regionAnchorX,v.region.regionAnchorY=g.region.regionAnchorY,v.region.scroll=g.region.scroll,v.region.viewportAnchorX=g.region.viewportAnchorX,v.region.viewportAnchorY=g.region.viewportAnchorY,v.region.viewportAnchorUnits=js,v.region.width=g.region.width,v.region.widthUnits=js),cc(v),g=v}g&&((v=e.g.mediaSource.modifyCueCallback)&&v(g,null,o),c.push(g))}e.u.append(c)}),i.mode=document.pictureInPictureElement?"showing":"hidden"}p.Be=function(e,i,o){function c(){var g=h.i.variants.find(function(E){return E.id==e.id});if(g&&Fl(g)){var v=h.j.l;h.g.abr.enabled&&(v.video!=g.video||v.audio&&g.audio&&v.audio.language==g.audio.language&&v.audio.channelsCount==g.audio.channelsCount&&v.audio.label==g.audio.label)&&kt("Changing tracks while abr manager is enabled will likely result in the selected track being overridden. Consider disabling abr before calling selectVariantTrack()."),h.Pa()?Sm(h,g,!1,!1,0):Sm(h,g,!1,i||!1,o||0),h.W.configure({language:g.language,role:g.audio&&g.audio.roles&&g.audio.roles[0]||"",channelCount:g.audio&&g.audio.channelsCount?g.audio.channelsCount:0,Sc:g.video&&g.video.hdr?g.video.hdr:"",spatialAudio:g.audio&&g.audio.spatialAudio?g.audio.spatialAudio:!1,videoLayout:g.video&&g.video.videoLayout?g.video.videoLayout:"",Kc:g.audio&&g.audio.label?g.audio.label:"",fd:"",codecSwitchingStrategy:h.g.mediaSource.codecSwitchingStrategy,audioCodec:g.audio&&g.audio.codecs?g.audio.codecs:""}),ph(h)}}var h=this;i=i===void 0?!1:i,o=o===void 0?0:o,!(this.i&&this.G&&(c(),!this.Pa()))&&function(){if(h.h&&h.h.audioTracks){var g=Array.from(h.h.audioTracks);g=T(g);for(var v=g.next();!v.done;v=g.next())if(v=v.value,ga(v)==e.id){pI(h,v);break}}}()},p.xj=function(e,i){i=i===void 0?0:i;var o=this.Rb();if(o.length){var c=o.find(function(h){return h.active});c&&(o=o.find(function(h){return h.videoId===c.videoId&&h.language==e.language&&h.label==e.label&&h.audioMimeType==e.mimeType&&h.audioCodec==e.codecs&&h.primary==e.primary&&rc(h.audioRoles,e.roles)&&h.accessibilityPurpose==e.accessibilityPurpose&&h.channelsCount==e.channelsCount&&h.audioSamplingRate==e.audioSamplingRate&&h.spatialAudio==e.spatialAudio}))&&!o.active&&this.Be(o,!0,i)}},p.getAudioTracks=function(){var e=this.Rb();if(!e.length)return[];var i=e.find(function(g){return g.active});if(!i)return[];var o=e;if(this.m==Ua&&(o=e.filter(function(g){return g.originalVideoId===i.originalVideoId&&g.audioCodec})),!o.length)return[];e=new Map,o=T(o);for(var c=o.next();!c.done;c=o.next()){c=c.value;var h=c.originalAudioId;h||c.audioId==null||(h=String(c.audioId)),h&&e.set(h,{active:c.active,language:c.language,label:c.label,mimeType:c.audioMimeType,codecs:c.audioCodec,primary:c.primary,roles:c.audioRoles||[],accessibilityPurpose:c.accessibilityPurpose,channelsCount:c.channelsCount,audioSamplingRate:c.audioSamplingRate,spatialAudio:c.spatialAudio,originalLanguage:c.originalLanguage})}return Array.from(e.values())},p.hi=function(){return _I(this.Rb())},p.Fi=function(){return _I(this.vc())},p.gi=function(){return Array.from(bI(this.Rb()))},p.Ei=function(){return Array.from(bI(this.vc()))},p.sh=function(e,i,o,c,h,g,v){function E(){function I(pe,Me){return pe.video||Me.video?pe.video&&Me.video?Math.abs((pe.video.height||0)-(Me.video.height||0))+Math.abs((pe.video.width||0)-(Me.video.width||0)):1/0:0}S.W=S.g.adaptationSetCriteriaFactory(),S.W.configure({language:e,role:i||"",channelCount:o||0,Sc:"",spatialAudio:g||!1,videoLayout:"",Kc:v||"",fd:"",codecSwitchingStrategy:S.g.mediaSource.codecSwitchingStrategy,audioCodec:h||""});var L=S.j.l,O=S.W.create(S.i.variants),V=null;O=T(O.values());for(var W=O.next();!W.done;W=O.next())W=W.value,Fl(W)&&(!V||I(V,L)>I(W,L))&&(V=W);V!=L&&(V?(L=Oi(V),S.Be(L,!0,c||0)):wp(S))}var S=this;o=o===void 0?0:o,c=c===void 0?0:c,h=h===void 0?"":h,g=g===void 0?!1:g,v=v===void 0?"":v,!(this.i&&this.G&&(E(),!this.Pa()))&&function(){if(S.h&&S.h.audioTracks){var I=Bl(S.Rb(),e,i||"",!1)[0];I&&S.Be(I)}}()},p.hg=function(e,i,o){function c(){h.Tb=e,h.Hd=i||"",h.Fd=o||!1;var g=Bl(h.i.textStreams,h.Tb,h.Hd,h.Fd)[0]||null;g&&g!=h.j.u&&(Vb(h.B.h,g,!1),h.g.streaming.alwaysStreamText||h.Pf())&&(R0(h.j,g),ev(h),xm(h))}var h=this;o=o===void 0?!1:o,!(this.i&&this.G&&(c(),!this.Pa()))&&function(){var g=Bl(h.vc(),e,i||"",o||!1)[0];g&&h.th(g)}()},p.yj=function(e,i,o){function c(){for(var g=null,v=T(h.i.variants),E=v.next();!E.done;E=v.next())if(E=E.value,E.audio.label==e){g=E;break}g!=null&&(h.W=h.g.adaptationSetCriteriaFactory(),h.W.configure({language:g.language,role:"",channelCount:0,Sc:"",spatialAudio:!1,videoLayout:"",fd:"",Kc:e,codecSwitchingStrategy:h.g.mediaSource.codecSwitchingStrategy,audioCodec:""}),wp(h,i,o))}var h=this;i=i===void 0?!0:i,o=o===void 0?0:o,!(this.i&&this.G&&(c(),!this.Pa()))&&function(){if(h.h&&h.h.audioTracks){var g=Array.from(h.h.audioTracks),v=null;g=T(g);for(var E=g.next();!E.done;E=g.next())E=E.value,E.label==e&&(v=E);v&&pI(h,v)}}()},p.Pf=function(){var e=this.oa;return this.u?this.u.isTextVisible():e},p.Rg=function(){return this.h&&this.h.currentSrc&&this.h.textTracks?uI(this).map(function(e){return Ol(e)}):[]},p.ji=function(e){if(!this.h||!this.h.currentSrc||!this.h.textTracks)return[];var i=Sr(e),o=uI(this).filter(function(E){return Sr(E.language)==i});if(!o||!o.length)return[];e=[];var c=new Set;o=T(o);for(var h=o.next();!h.done;h=o.next())if((h=h.value)&&h.cues){h=T(h.cues);for(var g=h.next();!g.done;g=h.next()){var v=g.value;(g=v.id)&&g!=""||(g=v.startTime+"-"+v.endTime+"-"+v.text),v={id:g,title:v.text,startTime:v.startTime,endTime:v.endTime},c.has(g)||(e.push(v),c.add(g))}}return e};function _m(e){return Array.from(e.h.textTracks).filter(function(i){return i.kind!="metadata"&&i.kind!="chapters"&&i.label!="Shaka Player TextTrack"})}function lI(e){return Array.from(e.h.textTracks).find(function(i){return i.label=="Shaka Player TextTrack"})}function J3(e){return Array.from(e.h.textTracks).filter(function(i){return i.kind=="metadata"})}function uI(e){return Array.from(e.h.textTracks).filter(function(i){return i.kind=="chapters"})}p.zh=function(e){e=!!e,this.oa!=e&&(this.oa=e,this.m==Ua?(this.u.setTextVisibility(e),this.g.streaming.alwaysStreamText||(e?this.j.u||(e=Bl(this.i.textStreams,this.Tb,this.Hd,this.Fd),0<e.length&&(R0(this.j,e[0]),ev(this),xm(this))):NU(this.j))):this.h&&this.h.src&&this.h.textTracks&&this.u.setTextVisibility(e),vI(this))},p.yi=function(){if(this.G)var e=this.G.Od();else{if(this.Z==null)return new Date;e=this.Z}if(this.i&&!this.Pa()){var i=this.i.presentationTimeline;return new Date(1e3*((i.m||i.i)+e))}return this.h&&this.h.getStartDate?(i=this.h.getStartDate(),isNaN(i.getTime())?null:new Date(i.getTime()+1e3*e)):null},p.Wg=function(){if(this.i&&!this.Pa()){var e=this.i.presentationTimeline;return new Date(1e3*(e.m||e.i))}return this.h&&this.h.getStartDate?(e=this.h.getStartDate(),isNaN(e.getTime())?null:e):null},p.ae=function(){return this.U()&&this.i?this.i.presentationTimeline.ae():null},p.Fb=function(){if(this.m==Ua)return this.I.Fb();var e={total:[],audio:[],video:[],text:[]};return this.m==fl&&(e.total=Le(this.h.buffered)),e},p.Zd=function(){if(!this.h||!this.h.currentTime)return null;var e=this.Wg().getTime()+1e3*this.h.currentTime;return Math.floor(Date.now()-e)},p.getStats=function(){if(this.m!=Ua&&this.m!=fl)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,manifestSizeBytes:NaN,bytesDownloaded:NaN,nonFatalErrorCount:NaN,manifestPeriodCount:NaN,manifestGapCount:NaN,switchHistory:[],stateHistory:[]};o_(this);var e=this.h,i=e.currentTime/e.duration;if(!isNaN(i)&&!this.U()){var o=this.B;i=Math.round(100*i),o.i=isNaN(o.i)?i:Math.max(o.i,i)}if(this.G&&(this.B.P=this.G.zg(),this.B.T=this.G.Ag()),e.getVideoPlaybackQuality){o=e.getVideoPlaybackQuality(),i=this.B;var c=Number(o.totalVideoFrames);i.O=Number(o.droppedVideoFrames),i.M=c,this.B.L=Number(o.corruptedVideoFrames)}if(this.C?(o=this.C,o=o.H?o.H:NaN):o=NaN,this.B.o=o,this.m==Ua){if(o=this.j.l,i=this.j.u,o){c=this.K?this.K.i:1;var h=c*o.bandwidth;i&&i.bandwidth&&(h+=c*i.bandwidth),this.B.A=h}o&&o.video&&(i=this.B,c=o.video.height||NaN,i.m=o.video.width||NaN,i.l=c),this.U()&&(o=this.Zd()||0,this.B.B=o/1e3),this.i&&(this.B.G=this.i.periodCount,this.B.F=this.i.gapCount,this.i.presentationTimeline&&(this.B.I=this.i.presentationTimeline.h)),o=this.o.getBandwidthEstimate(),this.B.u=o}this.m==fl&&(o=this.B,o.mc=isNaN(o.mc)?NaN:o.mc+NaN,o=this.B,i=e.videoHeight||NaN,o.m=e.videoWidth||NaN,o.l=i);var g=this.B;e=g.m,o=g.l,i=g.A,c=g.M,h=g.O;var v=g.L,E=g.T,S=g.P,I=g.u,L=g.i,O=g.C,V=g.H,W=g.j,pe=Gb(g.g,"playing"),Me=Gb(g.g,"paused"),De=Gb(g.g,"buffering"),Fe=g.o,We=g.B,gt=g.I,ht=g.bh,It=g.mc,ot=g.K,st=g.G,_t=g.F,xt=o3(g.g),Ht=[];g=T(g.h.g);for(var Pt=g.next();!Pt.done;Pt=g.next())Pt=Pt.value,Ht.push({timestamp:Pt.timestamp,id:Pt.id,type:Pt.type,fromAdaptation:Pt.fromAdaptation,bandwidth:Pt.bandwidth});return{width:e,height:o,streamBandwidth:i,decodedFrames:c,droppedFrames:h,corruptedFrames:v,stallsDetected:E,gapsJumped:S,estimatedBandwidth:I,completionPercent:L,loadLatency:O,manifestTimeSeconds:V,drmTimeSeconds:W,playTime:pe,pauseTime:Me,bufferingTime:De,licenseTime:Fe,liveLatency:We,maxSegmentDuration:gt,manifestSizeBytes:ht,bytesDownloaded:It,nonFatalErrorCount:ot,manifestPeriodCount:st,manifestGapCount:_t,stateHistory:xt,switchHistory:Ht}},p.Rh=function(e,i,o,c,h,g,v){v=v===void 0?!1:v;var E=this,S,I,L,O,V,W,pe,Me,De,Fe,We,gt,ht;return Qe(function(It){switch(It.g){case 1:if(E.m!=Ua&&E.m!=fl)throw new it(1,7,7004);if(o!="subtitles"&&o!="captions"&&kt("Using a kind value different of `subtitles` or `captions` can cause unwanted issues."),c){It.s(2);break}return x(It,r_(E,e),3);case 3:c=It.h;case 2:if(S=[],E.A&&(S=E.A.getCuePoints()),E.m!=fl){It.s(4);break}return v&&(o="forced"),x(It,cI(E,e,i,o,c,g||"",S),5);case 5:if(I=Sr(i),L=E.vc(),O=L.find(function(ot){return Sr(ot.language)==I&&ot.label==(g||"")&&ot.kind==o}))return xo(E),It.return(O);throw new it(1,2,2012);case 4:if(V=ds,W=E.Ra(),pe=W.end-W.start,E.i&&(pe=E.i.presentationTimeline.getDuration()),pe==1/0)throw new it(1,4,4033);if(!S.length){It.s(6);break}return x(It,s_(E,e,E.F,E.g.streaming.retryParameters),7);case 7:Me=It.h,De=dI(E,Me,c,S),Fe=new Blob([De],{type:"text/vtt"}),e=bo(Fe),c="text/vtt";case 6:if(We={id:E.We++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:I0(0,pe,[e]),mimeType:c||"",codecs:h||"",kind:o,encrypted:!1,drmInfos:[],keyIds:new Set,language:i,originalLanguage:i,label:g||null,type:V.za,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!!v,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Xr(c||"",h||"")]),isAudioMuxedInVideo:!1,baseOriginalId:null},gt=Xr(We.mimeType,We.codecs),ht=Pl(gt),!ht)throw new it(2,2,2014,c);return E.i.textStreams.push(We),xo(E),It.return(lr(We))}})},p.Sh=function(e,i){var o=this,c,h,g,v,E,S,I,L,O,V,W,pe,Me,De,Fe,We,gt,ht;return Qe(function(It){switch(It.g){case 1:if(o.m!=Ua&&o.m!=fl)throw new it(1,7,7004);if(i){It.s(2);break}return x(It,r_(o,e),3);case 3:i=It.h;case 2:if(i!="text/vtt")throw new it(1,2,2017,e);if(c=ds,h=o.Ra(),g=h.end-h.start,o.i&&(g=o.i.presentationTimeline.getDuration()),g==1/0)throw new it(1,4,4045);return x(It,s_(o,e,o.F,o.g.streaming.retryParameters),4);case 4:if(v=It.h,E=Uu(i),!E)throw new it(2,2,2014,i);for(S=E(),I={periodStart:0,segmentStart:0,segmentEnd:g,vttOffset:0},L=jn(v),O=S.parseMedia(L,I,e,[]),V=[],W=T(O),pe=W.next(),Me={};!pe.done;Me={Ne:void 0,Mc:void 0},pe=W.next())Me.Mc=pe.value,Me.Ne=null,De=function(ot){return function(){return ot.Ne==null&&(ot.Ne=ts([e],[ot.Mc.payload])),ot.Ne||[]}}(Me),Fe=new X(Me.Mc.startTime,Me.Mc.endTime,De,0,null,null,0,0,1/0),Me.Mc.payload.includes("#xywh")&&(We=Me.Mc.payload.split("#xywh=")[1].split(","),We.length===4&&Fe.De({height:parseInt(We[3],10),positionX:parseInt(We[0],10),positionY:parseInt(We[1],10),width:parseInt(We[2],10)})),V.push(Fe);if(gt=i,!V.length){It.s(5);break}return x(It,hh(V[0].N()[0],o.F,o.g.manifest.retryParameters),6);case 6:gt=It.h;case 5:return ht={id:o.We++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new pr(V),mimeType:gt||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:c.$e,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Xr(gt||"","")]),isAudioMuxedInVideo:!1,baseOriginalId:null},o.m==fl?o.Oe.push(ht):o.i.imageStreams.push(ht),xo(o),It.return(Rs(ht))}})},p.Qh=function(e,i,o){var c=this,h,g,v,E;return Qe(function(S){switch(S.g){case 1:if(c.m!=Ua&&c.m!=fl)throw new it(1,7,7004);if(o){S.s(2);break}return x(S,r_(c,e),3);case 3:o=S.h;case 2:return h=[],c.A&&(h=c.A.getCuePoints()),x(S,cI(c,e,i,"chapters",o,"",h),4);case 4:if(g=S.h,v=c.Rg(),E=v.find(function(I){return I.language==i}),!E){S.s(5);break}return x(S,new Promise(function(I,L){c.l.ma(g,"load",I),c.l.ma(g,"error",function(){L(new it(1,2,2015))})}),6);case 6:return xo(c),S.return(E);case 5:throw new it(1,2,2012)}})};function r_(e,i){var o;return Qe(function(c){switch(c.g){case 1:return $e(c,2),x(c,hh(i,e.F,e.g.streaming.retryParameters),4);case 4:o=c.h,lt(c,3);break;case 2:et(c);case 3:if(o)return c.return(o);throw new it(1,2,2011,i)}})}function cI(e,i,o,c,h,g,v){var E,S,I,L;return Qe(function(O){if(O.g==1)return h!="text/vtt"||v.length?x(O,s_(e,i,e.F,e.g.streaming.retryParameters),3):O.s(2);O.g!=2&&(E=O.h,S=dI(e,E,h,v),I=new Blob([S],{type:"text/vtt"}),i=bo(I),h="text/vtt"),L=document.createElement("track");var V=e.L,W=i;try{if(V.g.enabled){var pe=Qb(V);pe.ot=Zb,pe.su=!0;var Me=H0(pe),De=Jb(W,Me)}else De=W}catch(Fe){Bt("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",Fe),De=W}return L.src=De,L.label=g,L.kind=c,L.srclang=o,e.h.getAttribute("crossorigin")||e.h.setAttribute("crossorigin","anonymous"),e.h.appendChild(L),O.return(L)})}function s_(e,i,o,c){var h,g,v;return Qe(function(E){if(E.g==1){h=Go,g=ws([i],c),g.method="GET";var S=e.L;try{S.g.enabled&&xp(S,g,{ot:Zb,su:!0})}catch(I){Bt("CMCD_TEXT_ERROR","Could not generate text CMCD data.",I)}return x(E,o.request(h,g).promise,2)}return v=E.h,E.return(v.data)})}function dI(e,i,o,c){var h=Uu(o);if(h)return o=h(),e={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},i=jn(i),i=o.parseMedia(i,e,null,[]),x3(i,c);throw new it(2,2,2014,o)}p.Dj=function(e,i){this.ka.width=e,this.ka.height=i},p.eg=function(e){if(this.m==Ua){var i=this.j;if(e=e===void 0?.1:e,i.m.g)i=!1;else if(i.B)i=!1;else{for(var o=T(i.i.values()),c=o.next();!c.done;c=o.next())c=c.value,!c.sd||c.Da||c.kb||(c.sd=!1,ro(i,c,e));i=!0}}else i=!1;return i},p.Hf=function(){return kt("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},p.ui=function(){return this.Qb},p.ni=function(){var e={video:null,audio:null,text:null};if(this.m!=Ua)return e;var i=this.j.l,o=this.h.currentTime;i=T([i.video,i.audio,this.j.u]);for(var c=i.next();!c.done;c=i.next())if((c=c.value)&&c.segmentIndex){var h=c.segmentIndex.find(o);h=c.segmentIndex.get(h),h={codecs:h.codecs||c.codecs,mimeType:h.mimeType||c.mimeType,bandwidth:h.bandwidth||c.bandwidth},c.type=="video"?(h.width=c.width,h.height=c.height,e.video=h):c.type=="audio"?e.audio=h:c.type==zi&&(e.text=h)}return e};function vd(e){var i=_p();return i.streaming.failureCallback=function(o){if(e.U()){var c=null;o.code==1001||o.code==1002?(c=1,e.g.streaming.lowLatencyMode&&(c=.1)):o.code==1003&&(c=.1),c!=null&&(o.severity=1,e.eg(c))}},i.textDisplayFactory=function(){return!e.ue||er()&&!document.fullscreenEnabled?"addTextTrack"in e.h?new Ea(e.h,"Shaka Player TextTrack"):new ba:new _a(e.h,e.ue)},i}p.Ch=function(e){this.ue=e};function Z3(e,i){for(var o=new Set,c=T(i.textStreams),h=c.next();!h.done;h=c.next())h=h.value,h.mimeType!="application/cea-608"&&h.mimeType!="application/cea-708"||o.add(h.originalId);for(c=T(i.variants),h=c.next();!h.done;h=c.next())if((h=h.value.video)&&h.closedCaptions){for(var g=T(h.closedCaptions.keys()),v=g.next();!v.done;v=g.next())if(v=v.value,!o.has(v)){var E=v.startsWith("CC")?"application/cea-608":"application/cea-708",S=new rs,I=h.closedCaptions.get(v);E={id:e.We++,originalId:v,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:S,mimeType:E,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:I,originalLanguage:I,label:null,type:zi,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:h.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set([Xr(E,"")]),isAudioMuxedInVideo:!1,baseOriginalId:null},i.textStreams.push(E),o.add(v)}}}function eB(e,i){var o,c,h,g,v;return Qe(function(E){return E.g==1?(o=e.audio,c=e.video,h=function(S,I){var L,O,V;return Qe(function(W){return W.g==1?S?S.segmentIndex?W.s(2):x(W,S.createSegmentIndex(),2):W.return(null):(O=(L=S.segmentIndex.Gb(I))?L.next().value:null,O?(V=O.startTime,W.return(V)):W.return(null))})},x(E,h(o,i),2)):E.g!=3?(g=E.h,x(E,h(c,i),3)):(v=E.h,v!=null&&g!=null?E.return(Math.max(v,g)):v!=null?E.return(v):g!=null?E.return(g):E.return(i))})}function a_(e){var i=e.Of();if(e.B&&e.M&&e.G){if(e.g.streaming.rebufferingGoal==0){var o=e.K;o.j=!1,Ab(o)}else o=e.K,o.j=i,Ab(o);if(e.L&&(o=e.L,i||o.u||(o.u=!0),o.u&&i&&(o.B=!0),o.F=i),o_(e),o=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts,e.g.streaming.liveSync.dynamicTargetLatency.enabled&&i&&e.Ue<o){o=e.g.streaming.liveSync.dynamicTargetLatency.maxLatency;var c=e.g.streaming.liveSync.targetLatencyTolerance,h=e.g.streaming.liveSync.dynamicTargetLatency.rebufferIncrement;e.P&&(e.P=Math.min(e.P+ ++e.Ue*h,o-c))}}i=new Map().set("buffering",i),e.dispatchEvent(zr("buffering",i))}function fI(e,i){e.Na.Qa(),e.Na.D(e.h,"timeupdate",function(){var o=e.h.currentTime,c=e.Ra(),h=e.U()?e.g.streaming.safeSeekOffset:0;0<i?Math.floor(o)>=Math.floor(c.end)&&e.gd():Math.floor(o)<=Math.floor(c.start+h)&&e.gd()})}function o_(e){if(e.B&&e.M){var i=e.B.g,o="playing";e.M.g==ef?o="buffering":e.Uc()?o="ended":e.h.paused&&(o="paused");var c=o;if(i.g==null)i.g={timestamp:Date.now()/1e3,state:c,duration:0},i=!0;else{var h=Date.now()/1e3;i.g.duration=h-i.g.timestamp,i.g.state==c?i=!1:(i.h.push(i.g),i.g={timestamp:h,state:c,duration:0},i=!0)}i&&(o=new Map().set("newstate",o),e.dispatchEvent(zr("statechanged",o)))}}function hI(e){var i=e.h.playbackRate,o=e.U();if(e.g.streaming.vodDynamicPlaybackRate&&!o){var c=e.g.streaming.vodDynamicPlaybackRateLowBufferRate,h=e.Qg();h<=e.g.streaming.vodDynamicPlaybackRateBufferRatio?i!=c&&e.Md(c,!1):h==1&&i!==e.K.sc()&&e.gd()}if(o&&(o=e.Ra(),Number.isFinite(o.end)&&!(e.h.currentTime<o.start||e.h.paused))){c=e.g.streaming.liveSync.targetLatencyTolerance,h=e.g.streaming.liveSync.dynamicTargetLatency.enabled;var g=e.g.streaming.liveSync.dynamicTargetLatency.stabilityThreshold;if(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled)var v=e.g.streaming.liveSync.targetLatency,E=v+c,S=Math.max(0,v-c),I=e.g.streaming.liveSync.maxPlaybackRate,L=e.g.streaming.liveSync.minPlaybackRate;else e.i&&e.i.serviceDescription&&(v=e.i.serviceDescription.targetLatency,e.i.serviceDescription.targetLatency!=null?E=e.i.serviceDescription.targetLatency+c:e.i.serviceDescription.maxLatency!=null&&(E=e.i.serviceDescription.maxLatency),e.i.serviceDescription.targetLatency!=null?S=Math.max(0,e.i.serviceDescription.targetLatency-c):e.i.serviceDescription.minLatency!=null&&(S=e.i.serviceDescription.minLatency),I=e.i.serviceDescription.maxPlaybackRate||e.g.streaming.liveSync.maxPlaybackRate,L=e.i.serviceDescription.minPlaybackRate||e.g.streaming.liveSync.minPlaybackRate);e.P||typeof v!="number"||(e.P=v);var O=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts;h&&e.Ma&&e.P!==null&&typeof v=="number"&&e.Ue<O&&Date.now()-e.Ma>1e3*g&&(g=e.g.streaming.liveSync.dynamicTargetLatency.minLatency,e.P=Math.max(e.P-(v-g)/2,g+c),e.Ma=Date.now()),h&&e.P!==null&&(E=e.P+c,S=e.P-c),v=o.end-e.h.currentTime,c=0,e.m==fl&&(h=e.h.buffered,0<h.length&&(c=h.end(h.length-1),c=Math.max(I,c-o.end))),o=e.g.streaming.liveSync.panicMode,h=1e3*e.g.streaming.liveSync.panicThreshold,g=Date.now()-e.M.h,o&&!L&&(L=e.g.streaming.liveSync.minPlaybackRate),o&&L&&g<=h?i!=L&&e.Md(L,!1):E!=null&&I&&v-c>E?(i!=I&&e.Md(I,!1),e.Ma=null):S!=null&&L&&v-c<S?(i!=L&&e.Md(L,!1),e.Ma=null):i!==e.K.sc()&&(e.gd(),e.Ma=Date.now())}}function Z0(e){if(e.h){var i=function(h,g){var v=v===void 0?Number.EPSILON:v;if(h===g)v=!0;else{var E=Math.abs(h-g);v=E<=v?!0:v!==Number.EPSILON?Math.abs(E-v)<=Number.EPSILON:!1}return(v||g>h)&&e.Ve<h?(e.Ve=h,!0):!1},o=e.Ra();if(o=o.end-o.start,o=0<o?e.h.currentTime/o:0,!isNaN(o)){if(o*=100,i(0,o))var c=zr("started");else i(25,o)?c=zr("firstquartile"):i(50,o)?c=zr("midpoint"):i(75,o)?c=zr("thirdquartile"):(i(100,o)&&(c=zr("complete")),e.g&&e.g.playRangeEnd!=1/0&&e.Uc()&&e.h.pause());c&&e.dispatchEvent(c)}}}function ph(e){try{fp(e.te,e.i)}catch(o){return Ip(e,o),!1}var i=Ul(e.i.variants);return i=e.W.create(i),e.o.setVariants(Array.from(i.values())),!0}function wp(e,i,o,c,h){i=i===void 0?!0:i,o=o===void 0?0:o,c=c===void 0?!1:c,h=h===void 0?!0:h;var g;(g=ph(e)?e.o.chooseVariant():null)&&Sm(e,g,h,i,o,c)}function Sm(e,i,o,c,h,g){g=g===void 0?!1:g;var v=e.j.l;if(i==v)c&&x1(e.j,i,c,h,!0);else{var E=e.B.h;if(E.h!=i&&(E.h=i,E.g.push({timestamp:Date.now()/1e3,id:i.id,type:"variant",fromAdaptation:o,bandwidth:i.bandwidth})),x1(e.j,i,c,h,g,o),c=null,v&&(c=Oi(v)),v=Oi(i),v.active=!0,e.O&&(h=e.O,i=i.video)){switch(i.dependencyStream&&(i=i.dependencyStream),g=0,E=-1,i.mimeType){case"video/webm":g=1;break;case"video/mp4":g=2}switch(e.Tg()){case"DASH":E=1;break;case"HLS":E=0}h.g&&(h.g.setLevelSwitching(i.id,!0),h.g.setContainerFormat(g),h.j||h.g.setStreamingFormat(E))}o?(o=new Map().set("oldTrack",c).set("newTrack",v),o=zr("adaptation",o),gh(e,o)):gI(e,c,v),mI(e,c,v)}}function pI(e,i){var o=Array.from(e.h.audioTracks).find(function(c){return c.enabled});i.enabled=!0,o&&(i.id!==o.id&&(o.enabled=!1),o=cu(o),i=cu(i),gI(e,o,i),mI(e,o,i))}function xo(e){var i=zr("trackschanged");gh(e,i),yI(e)}function gI(e,i,o){i=new Map().set("oldTrack",i).set("newTrack",o),i=zr("variantchanged",i),gh(e,i)}function mI(e,i,o){var c=!1;i&&i.audioId==o.audioId&&i.audioGroupId==o.audioGroupId||(c=!0),c&&yI(e)}function yI(e){var i=zr("audiotrackschanged");gh(e,i)}function ev(e){var i=zr("textchanged");gh(e,i)}function vI(e){var i=zr("texttrackvisibility");gh(e,i)}function TI(e){e.g.abr.enabled||l_(e);var i=new Map().set("newStatus",e.g.abr.enabled);gh(e,zr("abrstatuschanged",i))}function xm(e){var i=e.vc().find(function(o){return o.active});i&&e.u&&e.u.setTextLanguage&&e.u.setTextLanguage(i.language)}function l_(e,i){if(i=i===void 0?!0:i,e.m==Ua){e.xe.stop();for(var o=T(e.i.variants),c=o.next();!c.done;c=o.next())c.value.disabledUntilTime=0;i&&ph(e)}}p.disableStream=function(e,i){if(!this.g.abr.enabled||this.m===pu||!navigator.onLine||i==0||!this.i)return!1;if(this.i.variants.some(function(E){var S=E[e.type];return S&&S.id!==e.id&&!E.disabledUntilTime?e.type=="audio"?e.language===S.language:!0:!1})){for(var o=!1,c=!1,h=T(this.i.variants),g=h.next();!g.done;g=h.next()){g=g.value;var v=g[e.type];v&&(v.id===e.id?(g.disabledUntilTime=Date.now()/1e3+i,o=!0):v.trickModeVideo&&v.trickModeVideo.id==e.id&&(c=!0))}return!o&&c?!1:(this.xe.ua(1),i=this.Fb().video.reduce(function(E,S){return E+S.end-S.start},0),wp(this,!1,i,!0,!1),!0)}return!1};function Ip(e,i){var o,c,h,g;return Qe(function(v){switch(v.g){case 1:if(e.m==pu)return v.return();if(i.severity===1&&e.B.K++,o=!0,!(e.sa&&e.i&&e.j)||i.code!=3016&&i.code!=3014&&i.code!=3015&&i.code!=3018){v.s(2);break}return er()&&i.code==3016?v.return():($e(v,3),x(v,N0(e.j),5));case 5:c=v.h,o=!c,c&&(h=zr("mediasourcerecovered"),e.dispatchEvent(h)),lt(v,2);break;case 3:et(v),o=!0;case 2:if(!o)return v.return();i.severity===2&&l_(e,!1),g=zr("error",new Map().set("detail",i)),e.dispatchEvent(g),g.defaultPrevented&&(i.handled=!0),ue(v)}})}p.addFont=function(e,i){var o,c,h,g,v;return Qe(function(E){if(E.g==1)return"fonts"in document&&"FontFace"in l?x(E,document.fonts.ready,3):E.s(0);if(!("entries"in document.fonts))return E.return();for(o=function(S){S=S.entries();for(var I=[],L=S.next();L.done===!1;)I.push(L.value),L=S.next();return I},c=T(o(document.fonts)),h=c.next();!h.done;h=c.next())if(g=h.value,g.family==e&&g.display=="swap")return E.return();v=new FontFace(e,"url("+i+")",{display:"swap"}),document.fonts.add(v),ue(E)})};function Am(e,i,o,c){c=c===void 0?e:c,e=new Map().set("detail",{schemeIdUri:o.schemeIdUri,value:o.value,startTime:o.startTime,endTime:o.endTime,id:o.id,timescale:o.timescale,eventElement:o.eventElement,eventNode:o.eventNode}),c.dispatchEvent(zr(i,e))}function EI(e,i,o,c){c=c===void 0?!1:c,i=new Map().set("mediaQuality",{bandwidth:i.bandwidth,audioSamplingRate:i.audioSamplingRate,codecs:i.codecs,contentType:i.contentType,frameRate:i.frameRate,height:i.height,mimeType:i.mimeType,channelsCount:i.channelsCount,pixelAspectRatio:i.pixelAspectRatio,width:i.width,label:i.label,roles:i.roles,language:i.language}).set("position",o),e.dispatchEvent(zr(c?"audiotrackchanged":"mediaqualitychanged",i))}function u_(e,i){if(i=i===void 0?!0:i,!e.h.error)return i?new it(2,3,3016):null;var o=e.h.error.code;return!i&&o==1?null:((i=e.h.error.msExtendedCode)&&(0>i&&(i+=Math.pow(2,32)),i=i.toString(16)),new it(2,3,3016,o,i,e.h.error.message))}function c_(e,i,o){0<i&&(e.U()||e.Bh(i)),i=e.getDuration(),o<i&&(e.U()||e.bb(o))}function gh(e,i){Qe(function(o){if(o.g==1)return x(o,Promise.resolve(),2);e.m!=pu&&e.dispatchEvent(i),ue(o)})}function bI(e){var i=new Set;e=T(e);for(var o=e.next();!o.done;o=e.next())o=o.value,o.language?i.add(Sr(o.language)):i.add("und");return i}function _I(e){var i=new Map,o=new Map;e=T(e);for(var c=e.next();!c.done;c=e.next()){c=c.value;var h="und",g=[];c.language&&(h=Sr(c.language)),c.type=="variant"?g=c.audioRoles:g=c.roles,g&&g.length||(g=[""]),i.has(h)||i.set(h,new Set),g=T(g);for(var v=g.next();!v.done;v=g.next())v=v.value,i.get(h).add(v),c.label&&(o.has(h)||o.set(h,new Map),o.get(h).set(v,c.label))}var E=[];return i.forEach(function(S,I){S=T(S);for(var L=S.next();!L.done;L=S.next()){L=L.value;var O=null;o.has(I)&&o.get(I).has(L)&&(O=o.get(I).get(L)),E.push({language:I,role:L,label:O})}}),E}p.Pa=function(){return this.h&&this.h.remote?this.h.remote.state!="disconnected":!1},p.Uc=function(){return!this.h||this.h.ended?!0:this.sa&&!this.U()&&this.h.currentTime>=this.Ra().end},_e("shaka.Player",fn),fn.prototype.isEnded=fn.prototype.Uc,fn.prototype.isRemotePlayback=fn.prototype.Pa,fn.prototype.addFont=fn.prototype.addFont,fn.prototype.setVideoContainer=fn.prototype.Ch,fn.prototype.getFetchedPlaybackInfo=fn.prototype.ni,fn.prototype.getManifestParserFactory=fn.prototype.ui,fn.prototype.getManifest=fn.prototype.Hf,fn.prototype.retryStreaming=fn.prototype.eg,fn.prototype.setMaxHardwareResolution=fn.prototype.Dj,fn.prototype.addChaptersTrack=fn.prototype.Qh,fn.prototype.addThumbnailsTrack=fn.prototype.Sh,fn.prototype.addTextTrackAsync=fn.prototype.Rh,fn.prototype.getStats=fn.prototype.getStats,fn.prototype.getBufferedInfo=fn.prototype.Fb,fn.prototype.getSegmentAvailabilityDuration=fn.prototype.ae,fn.prototype.getPresentationStartTimeAsDate=fn.prototype.Wg,fn.prototype.getPlayheadTimeAsDate=fn.prototype.yi,fn.prototype.setTextTrackVisibility=fn.prototype.zh,fn.prototype.getChapters=fn.prototype.ji,fn.prototype.getChaptersTracks=fn.prototype.Rg,fn.prototype.isTextTrackVisible=fn.prototype.Pf,fn.prototype.selectVariantsByLabel=fn.prototype.yj,fn.prototype.selectTextLanguage=fn.prototype.hg,fn.prototype.selectAudioLanguage=fn.prototype.sh,fn.prototype.getTextLanguages=fn.prototype.Ei,fn.prototype.getAudioLanguages=fn.prototype.gi,fn.prototype.getTextLanguagesAndRoles=fn.prototype.Fi,fn.prototype.getAudioLanguagesAndRoles=fn.prototype.hi,fn.prototype.getAudioTracks=fn.prototype.getAudioTracks,fn.prototype.selectAudioTrack=fn.prototype.xj,fn.prototype.selectVariantTrack=fn.prototype.Be,fn.prototype.selectTextTrack=fn.prototype.th,fn.prototype.getThumbnails=fn.prototype.Hi,fn.prototype.getAllThumbnails=fn.prototype.fi,fn.prototype.getImageTracks=fn.prototype.pi,fn.prototype.getTextTracks=fn.prototype.vc,fn.prototype.getVariantTracks=fn.prototype.Rb,fn.prototype.cancelTrickPlay=fn.prototype.gd,fn.prototype.trickPlay=fn.prototype.Md,fn.prototype.getPlaybackRate=fn.prototype.gb,fn.prototype.isBuffering=fn.prototype.Of,fn.prototype.getKeyStatuses=fn.prototype.Yd,fn.prototype.getActiveSessionsMetadata=fn.prototype.Gf,fn.prototype.getExpiration=fn.prototype.pd,fn.prototype.drmInfo=fn.prototype.drmInfo,fn.prototype.keySystem=fn.prototype.keySystem,fn.prototype.isFullyLoaded=fn.prototype.Ri,fn.prototype.goToLive=fn.prototype.Ni,fn.prototype.seekRange=fn.prototype.Ra,fn.prototype.isAudioOnly=fn.prototype.Qi,fn.prototype.isInProgress=fn.prototype.yc,fn.prototype.isLive=fn.prototype.U,fn.prototype.getAdManager=fn.prototype.Pg,fn.prototype.getAssetUri=fn.prototype.Qc,fn.prototype.getNetworkingEngine=fn.prototype.xb,fn.prototype.getMediaElement=fn.prototype.xi,fn.prototype.getManifestType=fn.prototype.Tg,fn.prototype.getLoadMode=fn.prototype.ti,fn.prototype.resetConfiguration=fn.prototype.sj,fn.prototype.getBufferFullness=fn.prototype.Qg,fn.prototype.getNonDefaultConfiguration=fn.prototype.Vg,fn.prototype.getConfigurationForLowLatency=fn.prototype.ki,fn.prototype.getConfiguration=fn.prototype.getConfiguration,fn.prototype.configurationForLowLatency=fn.prototype.ci,fn.prototype.configure=fn.prototype.configure,fn.prototype.releaseAllMutexes=fn.prototype.oj,fn.prototype.destroyAllPreloads=fn.prototype.pf,fn.prototype.preload=fn.prototype.preload,fn.prototype.detachAndSavePreload=fn.prototype.Lg,fn.prototype.unloadAndSavePreload=fn.prototype.Gj,fn.prototype.load=fn.prototype.load,fn.prototype.updateStartTime=fn.prototype.Kj,fn.prototype.unload=fn.prototype.kc,fn.prototype.detach=fn.prototype.detach,fn.prototype.attachCanvas=fn.prototype.Vh,fn.prototype.attach=fn.prototype.Lb,fn.probeSupport=function(e){e=e===void 0?!0:e;var i,o,c,h,g,v;return Qe(function(E){switch(E.g){case 1:if(i={},!e){E.s(2);break}return x(E,Jg(),3);case 3:i=E.h;case 2:return o=vb(),c=bi(),x(E,La(),4);case 4:return h=E.h,g={manifest:o,media:c,drm:i,hardwareResolution:h},v=xI,v.forEach(function(S,I){g[I]=S()}),E.return(g)}})},fn.isBrowserSupported=function(){return l.Promise||kt("A Promise implementation or polyfill is required"),l.Promise&&l.Uint8Array&&Array.prototype.forEach&&!Cr("Trident/")?Ya()?!0:nu("application/x-mpegurl"):!1},fn.setAdManagerFactory=function(e){nv=e},fn.registerSupportPlugin=$1,fn.prototype.destroy=fn.prototype.destroy;var pu=0,tv=1,Ua=2,fl=3;fn.LoadMode={DESTROYED:pu,NOT_LOADED:tv,MEDIA_SOURCE:Ua,SRC_EQUALS:fl},fn.version="v4.14.9";var SI=["4","14"];on=new function(e){this.g=e,this.i=Mn,this.h=An}(new Zi(Number(SI[0]),Number(SI[1])));var xI=new Map,nv=null;function AI(){this.g=[],this.i=this.m=this.l=this.j=this.h=0}function tB(e){return e.g.length?e.g.reduce(function(i,o){return i+o},0)/e.g.length:0}function wi(e,i,o){var c=this;this.g=e,this.h=i,this.j=o,this.i=!1,this.l=this.h.getVolume(),this.m=new ni,this.m.D(this.h,google.ima.AdEvent.Type.PAUSED,function(){c.i=!0}),this.m.D(this.h,google.ima.AdEvent.Type.RESUMED,function(){c.i=!1})}p=wi.prototype,p.needsSkipUI=function(){return!1},p.isClientRendering=function(){return!0},p.hasCustomClick=function(){return!0},p.isUsingAnotherMediaElement=function(){return!0},p.getDuration=function(){return this.g.getDuration()},p.getMinSuggestedDuration=function(){return this.g.getMinSuggestedDuration()},p.getRemainingTime=function(){return this.h.getRemainingTime()},p.isPaused=function(){return this.i},p.isSkippable=function(){return 0<=this.g.getSkipTimeOffset()},p.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},p.canSkipNow=function(){return this.h.getAdSkippableState()},p.skip=function(){return this.h.skip()},p.pause=function(){return this.h.pause()},p.play=function(){return this.h.resume()},p.getVolume=function(){return this.h.getVolume()},p.setVolume=function(e){return this.j.volume=e,this.h.setVolume(e)},p.isMuted=function(){return this.h.getVolume()==0},p.isLinear=function(){return this.g.isLinear()},p.resize=function(e,i){var o=!1,c=this.j;document.fullscreenEnabled?o=!!document.fullscreenElement:c.webkitSupportsFullscreen&&(o=c.webkitDisplayingFullscreen),this.h.resize(e,i,o?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)},p.setMuted=function(e){(this.j.muted=e)?(this.l=this.getVolume(),this.h.setVolume(0)):this.h.setVolume(this.l)},p.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},p.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},p.getTitle=function(){return this.g.getTitle()},p.getDescription=function(){return this.g.getDescription()},p.getVastMediaBitrate=function(){return this.g.getVastMediaBitrate()},p.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},p.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},p.getAdId=function(){return this.g.getAdId()},p.getCreativeAdId=function(){return this.g.getCreativeAdId()},p.getAdvertiserName=function(){return this.g.getAdvertiserName()},p.getMediaUrl=function(){return this.g.getMediaUrl()},p.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},p.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},p.release=function(){this.h=this.g=null},_e("shaka.ads.ClientSideAd",wi),wi.prototype.release=wi.prototype.release,wi.prototype.getPodIndex=wi.prototype.getPodIndex,wi.prototype.getTimeOffset=wi.prototype.getTimeOffset,wi.prototype.getMediaUrl=wi.prototype.getMediaUrl,wi.prototype.getAdvertiserName=wi.prototype.getAdvertiserName,wi.prototype.getCreativeAdId=wi.prototype.getCreativeAdId,wi.prototype.getAdId=wi.prototype.getAdId,wi.prototype.getVastMediaWidth=wi.prototype.getVastMediaWidth,wi.prototype.getVastMediaHeight=wi.prototype.getVastMediaHeight,wi.prototype.getVastMediaBitrate=wi.prototype.getVastMediaBitrate,wi.prototype.getDescription=wi.prototype.getDescription,wi.prototype.getTitle=wi.prototype.getTitle,wi.prototype.getPositionInSequence=wi.prototype.getPositionInSequence,wi.prototype.getSequenceLength=wi.prototype.getSequenceLength,wi.prototype.setMuted=wi.prototype.setMuted,wi.prototype.resize=wi.prototype.resize,wi.prototype.isLinear=wi.prototype.isLinear,wi.prototype.isMuted=wi.prototype.isMuted,wi.prototype.setVolume=wi.prototype.setVolume,wi.prototype.getVolume=wi.prototype.getVolume,wi.prototype.play=wi.prototype.play,wi.prototype.pause=wi.prototype.pause,wi.prototype.skip=wi.prototype.skip,wi.prototype.canSkipNow=wi.prototype.canSkipNow,wi.prototype.getTimeUntilSkippable=wi.prototype.getTimeUntilSkippable,wi.prototype.isSkippable=wi.prototype.isSkippable,wi.prototype.isPaused=wi.prototype.isPaused,wi.prototype.getRemainingTime=wi.prototype.getRemainingTime,wi.prototype.getMinSuggestedDuration=wi.prototype.getMinSuggestedDuration,wi.prototype.getDuration=wi.prototype.getDuration,wi.prototype.isUsingAnotherMediaElement=wi.prototype.isUsingAnotherMediaElement,wi.prototype.hasCustomClick=wi.prototype.hasCustomClick,wi.prototype.isClientRendering=wi.prototype.isClientRendering,wi.prototype.needsSkipUI=wi.prototype.needsSkipUI;function $r(){}function wI(e,i){var o=[];e=T(or(e,"Ad"));for(var c=e.next();!c.done;c=e.next())if((c=is(c.value,"InLine"))&&(c=is(c,"Creatives"))){c=T(or(c,"Creative"));for(var h=c.next();!h.done;h=c.next()){h=h.value;var g=is(h,"Linear");if(g&&nB(o,i,g),h=is(h,"NonLinearAds")){h=or(h,"NonLinear"),h=T(h);for(var v=h.next();!v.done;v=h.next())e:{g=o;var E=i,S=v.value,I=is(S,"StaticResource");if(I)v=I.attributes.creativeType;else{if(I=is(S,"HTMLResource"),!I)break e;v="text/html"}if(I=ha(I)){v==="text/html"&&(I="data:text/html;charset=UTF-8,"+encodeURIComponent(I));var L=Ri(S,"width",Zs)||Ri(S,"expandedWidth",Zs),O=Ri(S,"height",Zs)||Ri(S,"expandedHeight",Zs);if(L||O){var V=null;(S=S.attributes.minSuggestedDuration)&&(V=nl(S)),S=0,E!=null&&(S=E),g.push({id:null,groupId:null,startTime:S,endTime:null,uri:I,mimeType:v,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!1,resumeOffset:0,playoutLimit:V,once:!0,pre:E==null,post:E==1/0,timelineRange:!1,loop:!1,overlay:{viewport:{x:0,y:0},topLeft:{x:0,y:0},size:{x:L||0,y:O||0}},displayOnBackground:!1,currentVideo:null,background:null})}}}}}}return o}function nB(e,i,o){var c=0;i!=null&&(c=i);var h=null;if(o.attributes.skipoffset&&(h=nl(o.attributes.skipoffset),isNaN(h)&&(h=null)),o=is(o,"MediaFiles")){var g=or(o,"MediaFile");for(o=g,g=g.filter(function(E){return E.attributes.delivery=="streaming"}),g.length&&(o=g),o=o.sort(function(E,S){return(parseInt(S.attributes.height,10)||0)-(parseInt(E.attributes.height,10)||0)}),o=T(o),g=o.next();!g.done;g=o.next())if(g=g.value,!g.attributes.apiFramework){var v=ha(g);if(v){e.push({id:null,groupId:null,startTime:c,endTime:null,uri:v,mimeType:g.attributes.type||null,isSkippable:h!=null,skipOffset:h,skipFor:null,canJump:!1,resumeOffset:0,playoutLimit:null,once:!0,pre:i==null,post:i==1/0,timelineRange:!1,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null});break}}}}_e("shaka.ads.Utils",$r),$r.ADS_LOADED="ads-loaded",$r.AD_STARTED="ad-started",$r.AD_FIRST_QUARTILE="ad-first-quartile",$r.AD_MIDPOINT="ad-midpoint",$r.AD_THIRD_QUARTILE="ad-third-quartile",$r.AD_COMPLETE="ad-complete",$r.AD_STOPPED="ad-stopped",$r.AD_SKIPPED="ad-skipped",$r.AD_VOLUME_CHANGED="ad-volume-changed",$r.AD_MUTED="ad-muted",$r.AD_PAUSED="ad-paused",$r.AD_RESUMED="ad-resumed",$r.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",$r.CUEPOINTS_CHANGED="ad-cue-points-changed",$r.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",$r.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",$r.AD_CLICKED="ad-clicked",$r.AD_PROGRESS="ad-progress",$r.AD_BUFFERING="ad-buffering",$r.AD_IMPRESSION="ad-impression",$r.AD_DURATION_CHANGED="ad-duration-changed",$r.AD_CLOSED="ad-closed",$r.AD_LOADED="ad-loaded",$r.ALL_ADS_COMPLETED="all-ads-completed",$r.AD_LINEAR_CHANGED="ad-linear-changed",$r.AD_METADATA="ad-metadata",$r.AD_RECOVERABLE_ERROR="ad-recoverable-error",$r.AD_ERROR="ad-error",$r.AD_BREAK_READY="ad-break-ready",$r.AD_INTERACTION="ad-interaction",$r.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",$r.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",$r.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested";function iv(e,i,o,c,h){var g=this;this.u=e,this.i=i,this.F=!1,this.A=this.o=null,this.G=NaN,this.l=h,this.j=null,this.h=new ni,google.ima.settings.setLocale(o),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),this.C=new google.ima.AdDisplayContainer(this.u,this.i),this.C.initialize(),this.m=new google.ima.AdsLoader(this.C),this.m.getSettings().setPlayerType("shaka-player"),this.m.getSettings().setPlayerVersion("v4.14.9"),this.g=null,this.B=c||new google.ima.AdsRenderingSettings,this.h.D(this.m,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(v){iB(g,v)}),this.h.D(this.m,google.ima.AdErrorEvent.Type.AD_ERROR,function(v){II(g,v)}),this.h.D(this.i,"ended",function(){g.m.contentComplete()}),this.h.ma(this.i,"play",function(){g.F=!0})}iv.prototype.configure=function(e){this.o=e},iv.prototype.stop=function(){this.g&&this.g.stop(),this.u&&ie(this.u)},iv.prototype.release=function(){this.stop(),this.A&&this.A.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.m.destroy(),this.C.destroy()};function II(e,i){i.getError(),i=new Map().set("originalEvent",i),e.l(new Jn("ad-error",i)),sv(e,null),e.l(new Jn("ad-cue-points-changed",new Map().set("cuepoints",[])))}function iB(e,i){if(e.l(new Jn("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.G))),e.o.customPlayheadTracker){var o={currentTime:e.i.currentTime};e.g=i.getAdsManager(o,e.B),e.i.muted?e.g.setVolume(0):e.g.setVolume(e.i.volume),e.h.D(e.i,"timeupdate",function(){e.i.duration&&(o.currentTime=e.i.currentTime)}),e.h.D(e.i,"volumechange",function(){e.j&&(e.j.setVolume(e.i.volume),e.i.muted&&e.j.setMuted(!0))})}else e.g=i.getAdsManager(e.i,e.B);e.l(new Jn("ima-ad-manager-loaded",new Map().set("imaAdManager",e.g)));var c=e.g.getCuePoints();if(c.length){i=[],c=T(c);for(var h=c.next();!h.done;h=c.next())i.push({start:h.value,end:null});e.l(new Jn("ad-cue-points-changed",new Map().set("cuepoints",i)))}rB(e);try{e.g.init(e.i.offsetWidth,e.i.offsetHeight,rv(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),e.h.D(e.i,"loadeddata",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,rv(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),"ResizeObserver"in l?(e.A=new ResizeObserver(function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,rv(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),e.A.observe(e.i)):e.h.D(document,"fullscreenchange",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight,rv(e)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),e.F||e.o.skipPlayDetection?e.g.start():e.h.ma(e.i,"play",function(){e.F=!0,e.g.start()})}catch{sv(e,null)}}function rv(e){return document.fullscreenEnabled?!!document.fullscreenElement:(e=e.i,e.webkitSupportsFullscreen?e.webkitDisplayingFullscreen:!1)}function rB(e){function i(o,c){o=new Map().set("originalEvent",o),e.l(new Jn(c,o))}e.h.D(e.g,google.ima.AdErrorEvent.Type.AD_ERROR,function(o){II(e,o)}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(o){CI(e,o)}),e.h.D(e.g,google.ima.AdEvent.Type.STARTED,function(o){CI(e,o)}),e.h.D(e.g,google.ima.AdEvent.Type.FIRST_QUARTILE,function(o){i(o,"ad-first-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.MIDPOINT,function(o){i(o,"ad-midpoint")}),e.h.D(e.g,google.ima.AdEvent.Type.THIRD_QUARTILE,function(o){i(o,"ad-third-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.COMPLETE,function(o){i(o,"ad-complete")}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(o){sv(e,o)}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(o){sv(e,o)}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPED,function(o){i(o,"ad-skipped")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_CHANGED,function(o){i(o,"ad-volume-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_MUTED,function(o){i(o,"ad-muted")}),e.h.D(e.g,google.ima.AdEvent.Type.PAUSED,function(o){e.j&&(e.j.i=!0,i(o,"ad-paused"))}),e.h.D(e.g,google.ima.AdEvent.Type.RESUMED,function(o){e.j&&(e.j.i=!1,i(o,"ad-resumed"))}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(o){e.j&&i(o,"ad-skip-state-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.CLICK,function(o){i(o,"ad-clicked")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_PROGRESS,function(o){i(o,"ad-progress")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BUFFERING,function(o){i(o,"ad-buffering")}),e.h.D(e.g,google.ima.AdEvent.Type.IMPRESSION,function(o){i(o,"ad-impression")}),e.h.D(e.g,google.ima.AdEvent.Type.DURATION_CHANGE,function(o){i(o,"ad-duration-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.USER_CLOSE,function(o){i(o,"ad-closed")}),e.h.D(e.g,google.ima.AdEvent.Type.LOADED,function(o){i(o,"ad-loaded")}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(o){i(o,"all-ads-completed")}),e.h.D(e.g,google.ima.AdEvent.Type.LINEAR_CHANGED,function(o){i(o,"ad-linear-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_METADATA,function(o){i(o,"ad-metadata")}),e.h.D(e.g,google.ima.AdEvent.Type.LOG,function(o){i(o,"ad-recoverable-error")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BREAK_READY,function(o){i(o,"ad-break-ready")}),e.h.D(e.g,google.ima.AdEvent.Type.INTERACTION,function(o){i(o,"ad-interaction")})}function CI(e,i){var o=i.getAd();o?(e.j=new wi(o,e.g,e.i),i.type!=google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED||e.o.supportsMultipleMediaElements||e.l(new Jn("ad-content-pause-requested")),i=new Map().set("ad",e.j).set("sdkAdObject",o).set("originalEvent",i),e.l(new Jn("ad-started",i)),e.j.isLinear()&&(e.u.setAttribute("ad-active","true"),e.o.customPlayheadTracker||e.i.pause(),e.i.muted?(i=e.j,i.l=e.i.volume,i.h.setVolume(0)):e.j.setVolume(e.i.volume))):kt("The IMA SDK fired a "+i.type+" event with no associated ad. Unable to play ad!")}function sv(e,i){i&&i.type==google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED&&!e.o.supportsMultipleMediaElements&&e.l(new Jn("ad-content-resume-requested")),e.l(new Jn("ad-stopped",new Map().set("originalEvent",i))),e.j&&e.j.isLinear()&&(e.u.removeAttribute("ad-active"),e.o.customPlayheadTracker||e.i.ended||e.i.play())}function Ii(e,i,o,c,h,g){this.g=e,this.i=i,this.j=(this.h=i.isSkippable)?i.skipOffset||0:i.skipOffset,this.l=i.skipFor,this.A=o,this.o=c,this.m=h,this.u=g,this.B=i.overlay}p=Ii.prototype,p.needsSkipUI=function(){return!0},p.isClientRendering=function(){return!0},p.hasCustomClick=function(){return!1},p.isUsingAnotherMediaElement=function(){return this.u},p.getDuration=function(){var e=this.g.duration;return isNaN(e)?-1:e},p.getMinSuggestedDuration=function(){return this.getDuration()},p.getRemainingTime=function(){var e=this.g.duration;return isNaN(e)?-1:e-this.g.currentTime},p.isPaused=function(){return this.g.paused},p.isSkippable=function(){return this.h&&this.l!=null?this.getDuration()-this.getRemainingTime()<this.j+this.l:this.h},p.getTimeUntilSkippable=function(){if(this.isSkippable()){var e=this.getRemainingTime()+this.j-this.getDuration();return Math.max(e,0)}return Math.max(this.getRemainingTime(),0)},p.canSkipNow=function(){return this.h&&this.getTimeUntilSkippable()==0},p.skip=function(){this.canSkipNow()&&this.A()},p.pause=function(){return this.g.pause()},p.play=function(){return this.g.play()},p.getVolume=function(){return this.g.volume},p.setVolume=function(e){this.g.volume=e},p.isMuted=function(){return this.g.muted},p.isLinear=function(){return this.B==null},p.resize=function(){},p.setMuted=function(e){this.g.muted=e},p.getSequenceLength=function(){return this.o},p.getPositionInSequence=function(){return this.m},p.getTitle=function(){return""},p.getDescription=function(){return""},p.getVastMediaBitrate=function(){return 0},p.getVastMediaHeight=function(){return 0},p.getVastMediaWidth=function(){return 0},p.getAdId=function(){return this.i.id||""},p.getCreativeAdId=function(){return""},p.getAdvertiserName=function(){return""},p.getMediaUrl=function(){return this.i.uri},p.getTimeOffset=function(){return 0},p.getPodIndex=function(){return 0},p.release=function(){this.g=null},_e("shaka.ads.InterstitialAd",Ii),Ii.prototype.release=Ii.prototype.release,Ii.prototype.getPodIndex=Ii.prototype.getPodIndex,Ii.prototype.getTimeOffset=Ii.prototype.getTimeOffset,Ii.prototype.getMediaUrl=Ii.prototype.getMediaUrl,Ii.prototype.getAdvertiserName=Ii.prototype.getAdvertiserName,Ii.prototype.getCreativeAdId=Ii.prototype.getCreativeAdId,Ii.prototype.getAdId=Ii.prototype.getAdId,Ii.prototype.getVastMediaWidth=Ii.prototype.getVastMediaWidth,Ii.prototype.getVastMediaHeight=Ii.prototype.getVastMediaHeight,Ii.prototype.getVastMediaBitrate=Ii.prototype.getVastMediaBitrate,Ii.prototype.getDescription=Ii.prototype.getDescription,Ii.prototype.getTitle=Ii.prototype.getTitle,Ii.prototype.getPositionInSequence=Ii.prototype.getPositionInSequence,Ii.prototype.getSequenceLength=Ii.prototype.getSequenceLength,Ii.prototype.setMuted=Ii.prototype.setMuted,Ii.prototype.resize=Ii.prototype.resize,Ii.prototype.isLinear=Ii.prototype.isLinear,Ii.prototype.isMuted=Ii.prototype.isMuted,Ii.prototype.setVolume=Ii.prototype.setVolume,Ii.prototype.getVolume=Ii.prototype.getVolume,Ii.prototype.play=Ii.prototype.play,Ii.prototype.pause=Ii.prototype.pause,Ii.prototype.skip=Ii.prototype.skip,Ii.prototype.canSkipNow=Ii.prototype.canSkipNow,Ii.prototype.getTimeUntilSkippable=Ii.prototype.getTimeUntilSkippable,Ii.prototype.isSkippable=Ii.prototype.isSkippable,Ii.prototype.isPaused=Ii.prototype.isPaused,Ii.prototype.getRemainingTime=Ii.prototype.getRemainingTime,Ii.prototype.getMinSuggestedDuration=Ii.prototype.getMinSuggestedDuration,Ii.prototype.getDuration=Ii.prototype.getDuration,Ii.prototype.isUsingAnotherMediaElement=Ii.prototype.isUsingAnotherMediaElement,Ii.prototype.hasCustomClick=Ii.prototype.hasCustomClick,Ii.prototype.isClientRendering=Ii.prototype.isClientRendering,Ii.prototype.needsSkipUI=Ii.prototype.needsSkipUI;function Ci(e,i,o){this.g=e,this.j=i,this.h=o,this.i=e.overlay==null}p=Ci.prototype,p.needsSkipUI=function(){return!0},p.isClientRendering=function(){return!0},p.hasCustomClick=function(){return!1},p.isUsingAnotherMediaElement=function(){return!1},p.getDuration=function(){return-1},p.getMinSuggestedDuration=function(){return this.getDuration()},p.getRemainingTime=function(){return-1},p.isPaused=function(){return!1},p.isSkippable=function(){return!1},p.getTimeUntilSkippable=function(){return 0},p.canSkipNow=function(){return!1},p.skip=function(){},p.pause=function(){},p.play=function(){},p.getVolume=function(){return 1},p.setVolume=function(){},p.isMuted=function(){return!1},p.isLinear=function(){return this.i},p.resize=function(){},p.setMuted=function(){},p.getSequenceLength=function(){return this.j},p.getPositionInSequence=function(){return this.h},p.getTitle=function(){return""},p.getDescription=function(){return""},p.getVastMediaBitrate=function(){return 0},p.getVastMediaHeight=function(){return 0},p.getVastMediaWidth=function(){return 0},p.getAdId=function(){return this.g.id||""},p.getCreativeAdId=function(){return""},p.getAdvertiserName=function(){return""},p.getMediaUrl=function(){return this.g.uri},p.getTimeOffset=function(){return 0},p.getPodIndex=function(){return 0},p.release=function(){},_e("shaka.ads.InterstitialStaticAd",Ci),Ci.prototype.release=Ci.prototype.release,Ci.prototype.getPodIndex=Ci.prototype.getPodIndex,Ci.prototype.getTimeOffset=Ci.prototype.getTimeOffset,Ci.prototype.getMediaUrl=Ci.prototype.getMediaUrl,Ci.prototype.getAdvertiserName=Ci.prototype.getAdvertiserName,Ci.prototype.getCreativeAdId=Ci.prototype.getCreativeAdId,Ci.prototype.getAdId=Ci.prototype.getAdId,Ci.prototype.getVastMediaWidth=Ci.prototype.getVastMediaWidth,Ci.prototype.getVastMediaHeight=Ci.prototype.getVastMediaHeight,Ci.prototype.getVastMediaBitrate=Ci.prototype.getVastMediaBitrate,Ci.prototype.getDescription=Ci.prototype.getDescription,Ci.prototype.getTitle=Ci.prototype.getTitle,Ci.prototype.getPositionInSequence=Ci.prototype.getPositionInSequence,Ci.prototype.getSequenceLength=Ci.prototype.getSequenceLength,Ci.prototype.setMuted=Ci.prototype.setMuted,Ci.prototype.resize=Ci.prototype.resize,Ci.prototype.isLinear=Ci.prototype.isLinear,Ci.prototype.isMuted=Ci.prototype.isMuted,Ci.prototype.setVolume=Ci.prototype.setVolume,Ci.prototype.getVolume=Ci.prototype.getVolume,Ci.prototype.play=Ci.prototype.play,Ci.prototype.pause=Ci.prototype.pause,Ci.prototype.skip=Ci.prototype.skip,Ci.prototype.canSkipNow=Ci.prototype.canSkipNow,Ci.prototype.getTimeUntilSkippable=Ci.prototype.getTimeUntilSkippable,Ci.prototype.isSkippable=Ci.prototype.isSkippable,Ci.prototype.isPaused=Ci.prototype.isPaused,Ci.prototype.getRemainingTime=Ci.prototype.getRemainingTime,Ci.prototype.getMinSuggestedDuration=Ci.prototype.getMinSuggestedDuration,Ci.prototype.getDuration=Ci.prototype.getDuration,Ci.prototype.isUsingAnotherMediaElement=Ci.prototype.isUsingAnotherMediaElement,Ci.prototype.hasCustomClick=Ci.prototype.hasCustomClick,Ci.prototype.isClientRendering=Ci.prototype.isClientRendering,Ci.prototype.needsSkipUI=Ci.prototype.needsSkipUI;function kI(e,i,o,c){var h=this;this.T=null,this.A=e,this.H=i,this.g=o,this.F=null,this.B=!0,this.h=this.g,this.i=c,this.W=new Set,this.G=new Set,this.C=new Map,this.L=new Map,this.j=new fn,p_(this),this.I=new ni,this.l=new ni,this.K=!1,this.ea=this.m=this.u=this.o=null,this.fa=!1,this.O=-1,this.$=function(){if(!h.K&&h.o&&!h.H.Pa()){h.o=h.g.currentTime,h.u&&!h.u.pre&&!h.u.post&&h.o<h.u.startTime&&(h.u=null);var g=Im(h);g&&av(h,g,1,1,Date.now())}},this.Z=function(){if(!(h.K||h.o||h.H.Pa())){h.o=h.g.currentTime;var g=Im(h,!0);g&&av(h,g,1,1,Date.now())}},this.P=new Li(this.$),this.M=new Li(function(){var g,v,E,S,I,L,O,V,W,pe,Me;return Qe(function(De){switch(De.g){case 1:if(!h.G.size||h.o==null){De.s(0);break}if(g=h.H.m,g==pu||g==tv)return De.return();v=!1,E=Array.from(h.G),S=h.H.Ra(),I=T(E),L=I.next();case 3:if(L.done){De.s(5);break}if(O=L.value,O==h.u){De.s(4);break}if(V=O.endTime||O.startTime,!(1<=S.start-V)){W=O.startTime-h.o,0<W&&10>=W&&(!h.C.has(O)&&RI(O)&&h.C.set(O,h.j.preload(O.uri,null,O.mimeType||void 0)),LI(h,O)),De.s(4);break}if(!h.C.has(O)){De.s(7);break}return x(De,h.C.get(O),8);case 8:(pe=De.h)&&pe.destroy(),h.C.delete(O);case 7:PI(h,O),Me=JSON.stringify(O),h.W.has(Me)&&h.W.delete(Me),h.G.delete(O),d_(h),O.overlay||(v=!0);case 4:L=I.next(),De.s(3);break;case 5:v&&ov(h),ue(De)}})})}p=kI.prototype,p.configure=function(e){this.T=e,f_(this)};function sB(e){if(!e.fa&&e.G.size){if(e.I.D(e.g,"playing",e.Z),e.I.D(e.g,"timeupdate",e.Z),e.I.D(e.g,"ended",e.$),"requestVideoFrameCallback"in e.g&&!Qs()){var i=e.g,o=function(){e.O!=-1&&(e.$(),e.O!=-1&&(e.O=i.requestVideoFrameCallback(o)))};e.O=i.requestVideoFrameCallback(o)}else e.P.ua(.025);e.M&&e.M.ua(1),e.fa=!0}}function d_(e){e.fa&&!e.G.size&&(e.I.Ja(e.g,"playing",e.Z),e.I.Ja(e.g,"timeupdate",e.Z),e.I.Ja(e.g,"ended",e.$),e.O!=-1&&(e.g.cancelVideoFrameCallback(e.O),e.O=-1),e.P&&e.P.stop(),e.M&&e.M.stop(),e.fa=!1)}function f_(e){if(e.A&&e.T&&!e.K){var i=e.T.supportsMultipleMediaElements,o=e.g;o.webkitSupportsFullscreen&&o.webkitDisplayingFullscreen&&(i=!1),e.B==i&&(e.B=!i,e.B?(e.h=e.g,e.F&&(e.F.parentElement&&e.A.removeChild(e.F),e.F=null)):(e.F||(i=document.createElement(e.g.tagName),i.autoplay=!0,i.style.position="absolute",i.style.top="0",i.style.left="0",i.style.width="100%",i.style.height="100%",i.style.display="none",i.setAttribute("playsinline",""),e.F=i),e.h=e.F))}}p.stop=function(){if(this.l&&this.l.Qa(),this.W.clear(),this.G.clear(),this.j.pf(),this.C.size){var e=Array.from(this.C.values());e=T(e);for(var i=e.next();!i.done;i=e.next())(i=i.value)&&i.then(function(o){o&&o.destroy()})}if(this.C.clear(),this.L.size)for(e=Array.from(this.L.keys()),e=T(e),i=e.next();!i.done;i=e.next())PI(this,i.value);this.L.clear(),this.j.detach(),this.K=!1,this.u=this.o=null,this.B=!0,this.h=this.g,this.F=null,h_(this),d_(this),this.A&&ie(this.A),this.m&&(this.m.stop(),this.m=null)},p.release=function(){this.stop(),this.I&&this.I.release(),this.l&&this.l.release(),this.P&&(this.P.stop(),this.P=null),this.M&&(this.M.stop(),this.M=null),this.j.destroy()},p.If=function(){return this.j};function aB(e,i){var o;Qe(function(c){if(c.g==1)return p_(e),x(c,cB(e,i),2);o=c.h,o.length?wm(e,o):kt("Unsupported HLS interstitial",i),ue(c)})}function oB(e,i){var o=is(i.eventNode,"OverlayEvent"),c=o.attributes.uri,h=o.attributes.mimeType,g=o.attributes.loop=="true",v=Ri(o,"z",Zs);if(c&&v!=0){var E={viewport:{x:1920,y:1080},topLeft:{x:0,y:0},size:{x:1920,y:1080}},S=is(o,"Viewport"),I=is(o,"TopLeft"),L=is(o,"Size");if(S&&I&&L){if(E=Ri(S,"x",Zs),E==null||(S=Ri(S,"y",Zs),S==null))return;var O=Ri(I,"x",Zs);if(O==null||(I=Ri(I,"y",Zs),I==null))return;var V=Ri(L,"x",Zs);if(V==null||(L=Ri(L,"y",Zs),L==null))return;E={viewport:{x:E,y:S},topLeft:{x:O,y:I},size:{x:V,y:L}}}L=is(o,"SqueezeCurrent"),o=null,L&&(L=Ri(L,"percentage",Lu))&&(o={viewport:{x:1920,y:1080},topLeft:{x:0,y:0},size:{x:1920*L,y:1080*L}}),wm(e,[{id:i.id,groupId:null,startTime:i.startTime,endTime:i.endTime,uri:c,mimeType:h,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!0,resumeOffset:null,playoutLimit:null,once:!1,pre:!1,post:!1,timelineRange:!0,loop:g,overlay:E,displayOnBackground:v==-1,currentVideo:o,background:null}])}}p.addAdUrlInterstitial=function(e){var i=this,o,c,h,g,v,E,S,I,L;return Qe(function(O){switch(O.g){case 1:return o={type:12},x(O,g_(i,e,o),2);case 2:if(c=O.h,h=Ru(c,"VAST,vmap:VMAP"),!h)throw new it(2,10,10007);if(g=[],h.tagName=="VAST"){g=wI(h,i.o),O.s(3);break}if(h.tagName!="vmap:VMAP"){O.s(3);break}for(var V=[],W=T(or(h,"vmap:AdBreak")),pe=W.next();!pe.done;pe=W.next()){var Me=pe.value,De=Me.attributes.timeOffset;De&&(pe=null,De=="start"?pe=0:De=="end"?pe=1/0:pe=nl(De),(Me=is(Me,"vmap:AdSource"))&&(Me=is(Me,"vmap:AdTagURI"))&&(Me=ns(Me))&&V.push({time:pe,uri:Me}))}v=T(V),E=v.next();case 5:if(E.done){O.s(3);break}return S=E.value,x(O,g_(i,S.uri,o),8);case 8:if(I=O.h,L=Ru(I,"VAST"),!L)throw new it(2,10,10007);g.push.apply(g,k(wI(L,S.time))),E=v.next(),O.s(5);break;case 3:wm(i,g),ue(O)}})};function wm(e,i){var o,c,h,g,v,E,S,I;Qe(function(L){switch(L.g){case 1:o=!1,c=T(i),h=c.next();case 2:if(h.done){L.s(4);break}if(g=h.value,!g.uri){kt("Missing URL in interstitial",g),L.s(3);break}if(g.mimeType){L.s(5);break}return $e(L,6),v=e.j.xb(),x(L,hh(g.uri,v,e.H.getConfiguration().streaming.retryParameters),8);case 8:g.mimeType=L.h,lt(L,5);break;case 6:et(L);case 5:if(E=g.id||JSON.stringify(g),e.W.has(E)){L.s(3);break}g.loop&&!g.overlay&&kt("Loop is only supported in overlay interstitials",g),g.overlay||(o=!0),e.W.add(E),e.G.add(g),S=!1,g.pre&&e.o==null?S=!0:g.startTime!=0||g.canJump?e.o!=null&&(I=g.startTime-e.o,0<I&&10>=I&&(S=!0)):S=!0,S&&(!e.C.has(g)&&RI(g)&&e.C.set(g,e.j.preload(g.uri,null,g.mimeType||void 0)),LI(e,g));case 3:h=c.next(),L.s(2);break;case 4:o&&ov(e),sB(e),ue(L)}})}function Im(e,i,o){i=i===void 0?!1:i,o=o===void 0?null:o;var c=0,h=null;if(e.G.size&&e.o!=null){var g=e.g.ended,v=Array.from(e.G).sort(function(L,O){return O.startTime-L.startTime}),E=v;for(E=i?v.filter(function(L){return L.pre}):g?v.filter(function(L){return L.post}):v.filter(function(L){return!L.pre&&!L.post}),v=T(E),E=v.next();!E.done;E=v.next()){E=E.value;var S=!1;if(i)S=E.pre;else if(g)S=E.post;else if(!E.pre&&!E.post){var I=e.o-Math.round(1e3*E.startTime)/1e3;0<I&&(1>=I||!E.canJump)&&(S=!(o==null&&e.u&&!e.u.pre&&!e.u.post&&e.u.startTime>=E.startTime))}S&&(!e.u||E.startTime>=e.u.startTime)&&(c==(o||0)?h=E:h&&!E.canJump&&.001<Math.round(1e3*E.startTime)/1e3-Math.round(1e3*h.startTime)/1e3&&(h=E,c=0),c++)}}return h}function av(e,i,o,c,h,g){g=g===void 0?0:g,e.u=i,f_(e),!e.h.parentElement&&e.A&&e.A.appendChild(e.h),c==1&&o==1&&(o=Array.from(e.G).filter(function(v){return i.pre?v.pre==i.pre:i.post?v.post==i.post:.001>Math.abs(v.startTime-i.startTime)}).length),i.once&&(g++,e.G.delete(i),d_(e),i.overlay||ov(e)),i.mimeType&&(i.mimeType.startsWith("image/")||i.mimeType==="text/html")?i.overlay?lB(e,i,o,c,g):kt("Unsupported interstitial",i):e.B&&i.overlay?kt("Unsupported interstitial",i):uB(e,i,o,c,h,g)}function lB(e,i,o,c,h){function g(){e.m&&(e.m.stop(),e.m=null),e.A.removeChild(S),h_(e,i),e.i(new Jn("ad-stopped"));var V=Im(e,i.pre,c-h);V?(e.l.Qa(),av(e,V,o,++c,Date.now(),h)):e.K=!1}var v=i.overlay,E=i.mimeType=="text/html"?"iframe":"img",S=document.createElement(E);S.style.objectFit="contain",S.style.position="absolute",S.style.border="none",DI(e,i),e.i(new Jn("ad-started",new Map().set("ad",new Ci(i,o,c)))),E=="iframe"?S.src=i.uri:(S.src=i.uri,S.onerror=function(V){e.i(new Jn("ad-error",new Map().set("originalEvent",V))),g()});var I=v.viewport,L=v.topLeft;v=v.size,I.x==0&&I.y==0?(S.width=i.overlay.size.x,S.height=i.overlay.size.y,S.style.bottom="10%",S.style.left="0",S.style.right="0",S.style.width="100%",i.overlay.size.y||E!="iframe"||(S.style.height="auto")):(S.style.height=v.y/I.y*100+"%",S.style.left=L.x/I.x*100+"%",S.style.top=L.y/I.y*100+"%",S.style.width=v.x/I.x*100+"%"),e.A.appendChild(S);var O=Date.now();e.m&&e.m.stop(),e.m=new Li(function(){i.playoutLimit&&(Date.now()-O)/1e3>i.playoutLimit?(e.i(new Jn("ad-complete")),g()):i.endTime&&e.g.currentTime>i.endTime?(e.i(new Jn("ad-complete")),g()):e.g.currentTime<i.startTime&&(e.i(new Jn("ad-skipped")),g())}),i.playoutLimit&&!i.endTime?e.m.da(i.playoutLimit):i.endTime&&e.m.ua(.025),e.l.D(e.g,"seeked",function(){var V=e.g.currentTime;(V<i.startTime||i.endTime&&V>i.endTime)&&(e.m&&e.m.stop(),e.i(new Jn("ad-skipped")),g())})}function uB(e,i,o,c,h,g){var v,E,S,I,L,O,V,W,pe,Me,De,Fe,We,gt,ht,It,ot;Qe(function(st){switch(st.g){case 1:if(v=Date.now(),e.K=!0,!e.B||c!=1){st.s(2);break}return e.i(new Jn("ad-content-pause-requested",new Map().set("saveLivePosition",!0))),E=new mr,S=function(_t){return Qe(function(xt){if(xt.g==1)return _t.state!="detach"?xt.s(0):Qs()?x(xt,new Promise(function(Ht){return new Li(Ht).da(.1)}),3):xt.s(3);E.resolve(),e.l.Ja(e.H,"onstatechange",S),ue(xt)})},e.l.D(e.H,"onstatechange",S),x(st,E,2);case 2:return DI(e,i),e.B||(e.h.style.display="",i.overlay?(e.h.loop=i.loop,I=i.overlay.viewport,L=i.overlay.topLeft,O=i.overlay.size,e.h.style.height=O.y/I.y*100+"%",e.h.style.left=L.x/I.x*100+"%",e.h.style.top=L.y/I.y*100+"%",e.h.style.width=O.x/I.x*100+"%"):(e.g.pause(),i.resumeOffset!=null&&i.resumeOffset!=0&&(e.g.currentTime+=i.resumeOffset),e.h.loop=!1,e.h.style.height="100%",e.h.style.left="0",e.h.style.top="0",e.h.style.width="100%")),V=!1,W=function(){if(!e.B&&!i.overlay&&i.resumeOffset==null)if(i.timelineRange&&i.endTime&&i.endTime!=1/0)e.g.currentTime!=i.endTime&&(e.g.currentTime=i.endTime);else{var _t=Date.now();e.g.currentTime+=(_t-h)/1e3,h=_t}},pe=function(_t){var xt,Ht;return Qe(function(Pt){if(Pt.g==1){if(W(),xt=Im(e,i.pre,c-g),_t&&i.groupId)for(;xt&&xt.groupId==i.groupId;)c++,xt=Im(e,i.pre,c-g);return e.m&&(!i.groupId||xt&&xt.groupId!=i.groupId)&&(e.m.stop(),e.m=null),h_(e,i),xt&&!xt.overlay?Pt.s(2):(i.post&&(e.o=null,e.u=null),e.B?x(Pt,e.j.detach(),4):x(Pt,e.j.kc(),4))}Pt.g!=2&&(e.B&&(Ht=i.resumeOffset,Ht==null&&(Ht=i.timelineRange&&i.endTime&&i.endTime!=1/0?i.endTime-(e.o||0):(Date.now()-h)/1e3),e.i(new Jn("ad-content-resume-requested",new Map().set("offset",Ht)))),e.i(new Jn("ad-stopped")),e.l.Qa(),e.K=!1,e.B?ov(e):(e.h.style.display="none",W(),e.g.ended||e.g.play())),f_(e),xt&&(e.i(new Jn("ad-stopped")),e.l.Qa(),av(e,xt,o,++c,h,g)),ue(Pt)})},Me=function(_t){return Qe(function(xt){return V?xt.return():(V=!0,e.i(new Jn("ad-error",new Map().set("originalEvent",_t))),x(xt,pe(!1),0))})},De=function(){return Qe(function(_t){if(_t.g==1)return V?_t.return():(V=!0,x(_t,pe(!1),2));e.i(new Jn("ad-complete")),ue(_t)})},e.ea=function(){return Qe(function(_t){return V?_t.return():(V=!0,e.i(new Jn("ad-skipped")),x(_t,pe(!0),0))})},Fe=new Ii(e.h,i,e.ea,o,c,!e.B),e.B||(Fe.setMuted(e.g.muted),Fe.setVolume(e.g.volume)),e.i(new Jn("ad-started",new Map().set("ad",Fe))),(We=Fe.canSkipNow())&&e.i(new Jn("ad-skip-state-changed")),e.l.ma(e.j,"error",Me),e.l.D(e.h,"timeupdate",function(){if(e.h.duration){var _t=Fe.canSkipNow();We!=_t&&0<Fe.getRemainingTime()&&0<Fe.getDuration()&&e.i(new Jn("ad-skip-state-changed")),We=_t}}),e.l.ma(e.j,"firstquartile",function(){W(),e.i(new Jn("ad-first-quartile"))}),e.l.ma(e.j,"midpoint",function(){W(),e.i(new Jn("ad-midpoint"))}),e.l.ma(e.j,"thirdquartile",function(){W(),e.i(new Jn("ad-third-quartile"))}),e.l.ma(e.j,"complete",De),e.l.D(e.h,"play",function(){e.i(new Jn("ad-resumed"))}),e.l.D(e.h,"pause",function(){var _t=e.j.getConfiguration();e.h.currentTime>=_t.playRangeEnd?De():e.i(new Jn("ad-paused"))}),e.l.D(e.h,"volumechange",function(){e.h.muted?e.i(new Jn("ad-muted")):e.i(new Jn("ad-volume-changed"))}),$e(st,4),p_(e),i.startTime&&i.endTime&&i.endTime!=1/0&&i.startTime!=i.endTime&&(gt=i.endTime-i.startTime,0<gt&&e.j.configure("playRangeEnd",gt)),i.playoutLimit&&!e.m&&(e.m=new Li(function(){e.ea()}).da(i.playoutLimit),e.j.configure("playRangeEnd",i.playoutLimit)),x(st,e.j.Lb(e.h),6);case 6:return e.C.has(i)?x(st,e.C.get(i),10):x(st,e.j.load(i.uri,null,i.mimeType||void 0),8);case 10:return ht=st.h,e.C.delete(i),ht?x(st,e.j.load(ht),8):x(st,e.j.load(i.uri,null,i.mimeType||void 0),8);case 8:e.h.play(),It=(Date.now()-v)/1e3,e.i(new Jn("ads-loaded",new Map().set("loadTime",It))),e.B&&e.g.play(),i.overlay&&(e.l.D(e.g,"seeking",function(){var _t=e.g.currentTime-i.startTime;.1<Math.abs(_t-e.h.currentTime)&&(e.h.currentTime=_t)}),e.l.D(e.g,"seeked",function(){var _t=e.g.currentTime;(_t<i.startTime||i.endTime&&_t>i.endTime)&&e.ea()})),lt(st,0);break;case 4:if(ot=et(st),!e.K)return st.return();Me(ot),ue(st)}})}function DI(e,i){if(i.displayOnBackground&&(e.g.style.zIndex="1"),i.currentVideo!=null){var o=i.currentVideo;e.g.style.transformOrigin="top left";var c=!0,h=[],g=o.topLeft.x/o.viewport.x*100;0<g&&100>=g&&(h.push("translateX("+g+"%)"),c=!1),g=o.topLeft.y/o.viewport.y*100,0<g&&100>=g&&(h.push("translateY("+g+"%)"),c=!1),g=o.size.x/o.viewport.x,1>g&&h.push("scaleX("+g+")"),o=o.size.y/o.viewport.y,1>g&&h.push("scaleY("+o+")"),h.length&&(e.g.style.transform=h.join(" ")),c&&(e.g.style.transition="transform 250ms")}e.A&&(e.A.style.pointerEvents="none",i.background&&(e.A.style.background=i.background)),e.F&&(e.F.style.background=i.overlay?"":"rgb(0, 0, 0)")}function h_(e,i){(!i||i.displayOnBackground)&&(e.g.style.zIndex=""),i&&i.currentVideo==null||(e.g.style.transformOrigin="",e.g.style.transition="",e.g.style.transform=""),e.A&&(e.A.style.pointerEvents="",!i||i.background)&&(e.A.style.background=""),e.F&&(e.F.style.background="")}function cB(e,i){var o,c,h,g,v,E,S,I,L,O,V,W,pe,Me,De,Fe,We,gt,ht,It,ot,st,_t,xt,Ht,Pt,jt,Gt,Yt,Zt,Xt,En,Wn,Di,yi,yr,Ji,Vi,Wi,fr,ji,nr;return Qe(function(Pi){switch(Pi.g){case 1:if(o=[],!i||(c=i.values.find(function(qi){return qi.key=="X-ASSET-URI"}),h=i.values.find(function(qi){return qi.key=="X-ASSET-LIST"}),!c&&!h))return Pi.return(o);if(g=null,(v=i.values.find(function(qi){return qi.key=="ID"}))&&(g=v.data),E=g==null?Math.floor(10*i.startTime)/10:i.startTime,(S=i.endTime)&&i.endTime!=1/0&&typeof i.endTime=="number"&&(S=g==null?Math.floor(10*i.endTime)/10:i.endTime),I=i.values.find(function(qi){return qi.key=="X-RESTRICT"}),O=L=!0,I&&I.data&&(V=I.data,L=!V.includes("SKIP"),O=!V.includes("JUMP")),W=L?0:null,(pe=i.values.find(function(qi){return qi.key=="X-ENABLE-SKIP-AFTER"}))&&(Me=pe.data,W=parseFloat(Me),isNaN(W)&&(W=L?0:null)),De=null,(Fe=i.values.find(function(qi){return qi.key=="X-ENABLE-SKIP-FOR"}))&&(We=Fe.data,De=parseFloat(We),isNaN(W)&&(De=null)),gt=null,(ht=i.values.find(function(qi){return qi.key=="X-RESUME-OFFSET"}))&&(It=ht.data,gt=parseFloat(It),isNaN(gt)&&(gt=null)),ot=null,(st=i.values.find(function(qi){return qi.key=="X-PLAYOUT-LIMIT"}))&&(_t=st.data,ot=parseFloat(_t),isNaN(ot)&&(ot=null)),Pt=Ht=xt=!1,(jt=i.values.find(function(qi){return qi.key=="CUE"}))&&(Gt=jt.data,xt=Gt.includes("ONCE"),Ht=Gt.includes("PRE"),Pt=Gt.includes("POST")),Yt=!1,(Zt=i.values.find(function(qi){return qi.key=="X-TIMELINE-OCCUPIES"}))?(Xt=Zt.data,Yt=Xt.includes("RANGE")):!ht&&e.H.U()&&(Yt=!Ht&&!Pt),c){if(En=c.data,!En)return Pi.return(o);o.push({id:g,groupId:null,startTime:E,endTime:S,uri:En,mimeType:null,isSkippable:L,skipOffset:W,skipFor:De,canJump:O,resumeOffset:gt,playoutLimit:ot,once:xt,pre:Ht,post:Pt,timelineRange:Yt,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null}),Pi.s(2);break}if(!h){Pi.s(2);break}return Wn=h.data,Wn?($e(Pi,4),Di={type:11},x(Pi,g_(e,Wn,Di),6)):Pi.return(o);case 6:for(yi=Pi.h,yr=Er(yi),Ji=JSON.parse(yr),(Vi=Ji["SKIP-CONTROL"])&&(Wi=Vi["ENABLE-SKIP-AFTER"],typeof Wi=="number"&&(W=parseFloat(Wi),isNaN(Wi)&&(W=L?0:null)),fr=Vi["ENABLE-SKIP-FOR"],typeof fr=="number"&&(De=parseFloat(fr),isNaN(fr)&&(De=null))),ji=0;ji<Ji.ASSETS.length;ji++)nr=Ji.ASSETS[ji],nr.URI&&o.push({id:g+"_shaka_asset_"+ji,groupId:g,startTime:E,endTime:S,uri:nr.URI,mimeType:null,isSkippable:L,skipOffset:W,skipFor:De,canJump:O,resumeOffset:gt,playoutLimit:ot,once:xt,pre:Ht,post:Pt,timelineRange:Yt,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null});lt(Pi,2);break;case 4:et(Pi);case 2:return Pi.return(o)}})}function ov(e){for(var i=[],o=T(e.G),c=o.next(),h={};!c.done;h={$b:void 0},c=o.next())c=c.value,c.overlay||(h.$b={start:c.startTime,end:null},c.pre?(h.$b.start=0,h.$b.end=null):c.post?(h.$b.start=-1,h.$b.end=null):c.timelineRange&&(h.$b.end=c.endTime),i.find(function(g){return function(v){return g.$b.start==v.start&&g.$b.end==v.end}}(h))||i.push(h.$b));e.i(new Jn("ad-cue-points-changed",new Map().set("cuepoints",i)))}function p_(e){e.j.configure(e.H.Vg()),e.j.configure("ads.disableHLSInterstitial",!0),e.j.configure("ads.disableDASHInterstitial",!0),e.j.configure("playRangeEnd",1/0),qg(e.H.xb(),e.j.xb())}function g_(e,i,o){var c,h,g;return Qe(function(v){return v.g==1?(c=ws([i],qo()),h=e.H.xb().request(7,c,o),x(v,h.promise,2)):(g=v.h,v.return(g.data))})}function RI(e){return(e=e.mimeType)?!e.startsWith("image/")&&e!=="text/html":!0}function LI(e,i){if(!(e.L.has(i)||e.T&&!e.T.allowPreloadOnDomElements)){var o=function(g){var v=document.createElement("link");return v.rel="preload",v.href=g,v.as="image",document.head.appendChild(v),v},c=[];if(i.background){var h=i.background.match(/url\(('|")?([^'"()]+)('|")\)?/);h&&c.push(o(h[2]))}i.mimeType.startsWith("image/")&&c.push(o(i.uri)),e.L.set(i,c)}}function PI(e,i){if(e.L.has(i)){var o=e.L.get(i);o=T(o);for(var c=o.next();!c.done;c=o.next())c=c.value,c.parentNode.removeChild(c);e.L.delete(i)}}function Ai(e,i,o,c,h){this.h=e,this.j=nl(this.h.skipOffset),this.g=h,this.i=i,this.l=o,this.o=c,this.m=!1}p=Ai.prototype,p.needsSkipUI=function(){return!0},p.isClientRendering=function(){return!1},p.hasCustomClick=function(){return!1},p.isUsingAnotherMediaElement=function(){return!1},p.getDuration=function(){return this.h.durationInSeconds},p.getMinSuggestedDuration=function(){return this.getDuration()},p.getRemainingTime=function(){return this.h.startTimeInSeconds+this.h.durationInSeconds-this.g.currentTime},p.isPaused=function(){return this.g.paused},p.isSkippable=function(){return typeof this.j=="number"},p.getTimeUntilSkippable=function(){if(typeof this.j!="number")return this.getRemainingTime();var e=this.getRemainingTime()+this.j-this.getDuration();return Math.max(e,0)},p.canSkipNow=function(){return this.getTimeUntilSkippable()==0},p.skip=function(){this.m=!0,this.g.currentTime+=this.getRemainingTime()},p.pause=function(){return this.g.pause()},p.play=function(){return this.g.play()},p.getVolume=function(){return this.g.volume},p.setVolume=function(e){this.g.volume=e},p.isMuted=function(){return this.g.muted},p.isLinear=function(){return this.o},p.resize=function(){},p.setMuted=function(e){this.g.muted=e},p.getSequenceLength=function(){return this.l?this.l:1},p.getPositionInSequence=function(){return this.i?this.i:1},p.getTitle=function(){return this.h.adTitle},p.getDescription=function(){return""},p.getVastMediaBitrate=function(){return 0},p.getVastMediaHeight=function(){return 0},p.getVastMediaWidth=function(){return 0},p.getAdId=function(){return this.h.adId},p.getCreativeAdId=function(){return this.h.creativeId},p.getAdvertiserName=function(){return""},p.getMediaUrl=function(){return null},p.getTimeOffset=function(){return 0},p.getPodIndex=function(){return 0},p.release=function(){this.l=this.i=this.g=this.h=null},_e("shaka.ads.MediaTailorAd",Ai),Ai.prototype.release=Ai.prototype.release,Ai.prototype.getPodIndex=Ai.prototype.getPodIndex,Ai.prototype.getTimeOffset=Ai.prototype.getTimeOffset,Ai.prototype.getMediaUrl=Ai.prototype.getMediaUrl,Ai.prototype.getAdvertiserName=Ai.prototype.getAdvertiserName,Ai.prototype.getCreativeAdId=Ai.prototype.getCreativeAdId,Ai.prototype.getAdId=Ai.prototype.getAdId,Ai.prototype.getVastMediaWidth=Ai.prototype.getVastMediaWidth,Ai.prototype.getVastMediaHeight=Ai.prototype.getVastMediaHeight,Ai.prototype.getVastMediaBitrate=Ai.prototype.getVastMediaBitrate,Ai.prototype.getDescription=Ai.prototype.getDescription,Ai.prototype.getTitle=Ai.prototype.getTitle,Ai.prototype.getPositionInSequence=Ai.prototype.getPositionInSequence,Ai.prototype.getSequenceLength=Ai.prototype.getSequenceLength,Ai.prototype.setMuted=Ai.prototype.setMuted,Ai.prototype.resize=Ai.prototype.resize,Ai.prototype.isLinear=Ai.prototype.isLinear,Ai.prototype.isMuted=Ai.prototype.isMuted,Ai.prototype.setVolume=Ai.prototype.setVolume,Ai.prototype.getVolume=Ai.prototype.getVolume,Ai.prototype.play=Ai.prototype.play,Ai.prototype.pause=Ai.prototype.pause,Ai.prototype.skip=Ai.prototype.skip,Ai.prototype.canSkipNow=Ai.prototype.canSkipNow,Ai.prototype.getTimeUntilSkippable=Ai.prototype.getTimeUntilSkippable,Ai.prototype.isSkippable=Ai.prototype.isSkippable,Ai.prototype.isPaused=Ai.prototype.isPaused,Ai.prototype.getRemainingTime=Ai.prototype.getRemainingTime,Ai.prototype.getMinSuggestedDuration=Ai.prototype.getMinSuggestedDuration,Ai.prototype.getDuration=Ai.prototype.getDuration,Ai.prototype.isUsingAnotherMediaElement=Ai.prototype.isUsingAnotherMediaElement,Ai.prototype.hasCustomClick=Ai.prototype.hasCustomClick,Ai.prototype.isClientRendering=Ai.prototype.isClientRendering,Ai.prototype.needsSkipUI=Ai.prototype.needsSkipUI;function Cm(e,i,o,c){this.B=e,this.K=i,this.h=o,this.l=null,this.P=NaN,this.i=c,this.I=!1,this.A=null,this.j=[],this.M=[],this.L=this.C=this.g=null,this.F=new Map,this.m=[],this.u=[],this.G="",this.O=!0,this.H="",this.o=new ni}Cm.prototype.stop=function(){for(var e=T(this.m),i=e.next();!i.done;i=e.next())i=i.value,this.o.Ja(i.target,i.type,i.listener);Cp(this),this.m=[],this.u=[],this.G="",this.O=!0,this.H="",this.A=null,this.j=[],this.M=[],this.F.clear()},Cm.prototype.release=function(){this.stop(),this.o&&this.o.release()},Cm.prototype.onManifestUpdated=function(e){this.I=e,this.G!=""&&(fB(this,this.G,this.O),this.O=!1)},Cm.prototype.getCuePoints=function(){for(var e=[],i=T(this.j),o=i.next();!o.done;o=i.next()){o=T(o.value.ads);for(var c=o.next();!c.done;c=o.next())c=c.value,e.push({start:c.startTimeInSeconds,end:c.startTimeInSeconds+c.durationInSeconds})}return e};function dB(e,i,o){var c,h,g,v,E,S,I,L,O,V,W,pe;Qe(function(Me){if(Me.g==1)return c={type:7},h=ws([i],qo()),h.method="POST",o&&(g=JSON.stringify(o),h.body=sa(g)),v=e.K.request(7,h,c),$e(Me,2),x(Me,v.promise,4);if(Me.g!=2){if(E=Me.h,S=Er(E.data),I=JSON.parse(S),I.manifestUrl&&I.trackingUrl)L=new vn(i),O=new vn(I.trackingUrl),e.G=L.resolve(O).toString(),V=Date.now()/1e3,W=V-e.P,e.i(new Jn("ads-loaded",new Map().set("loadTime",W))),pe=new vn(I.manifestUrl),e.l.resolve(L.resolve(pe).toString()),e.l=null;else throw Error("Insufficient data from MediaTailor.");return lt(Me,0)}if(et(Me),!e.H.length)return e.l.reject("MediaTailor request returned an error and there was no backup asset uri provided."),e.l=null,Me.return();e.l.resolve(e.H),e.l=null,ue(Me)})}function fB(e,i,o){var c,h,g,v,E,S,I,L,O,V,W,pe,Me,De,Fe,We;Qe(function(gt){if(gt.g==1)return c={type:8},h=ws([i],qo()),g=e.K.request(7,h,c),$e(gt,2),x(gt,g.promise,4);if(gt.g!=2){if(v=gt.h,E=[],S=Er(v.data),I=JSON.parse(S),0<I.avails.length){if(JSON.stringify(e.j)!=JSON.stringify(I.avails)){for(e.j=I.avails,L=T(e.j),O=L.next();!O.done;O=L.next())for(V=O.value,W=T(V.nonLinearAdsList),pe=W.next();!pe.done;pe=W.next())for(Me=pe.value,De=T(Me.nonLinearAdList),Fe=De.next();!Fe.done;Fe=De.next())We=Fe.value,hB(e,We);E=e.getCuePoints(),e.i(new Jn("ad-cue-points-changed",new Map().set("cuepoints",E)))}}else e.j.length&&e.i(new Jn("ad-cue-points-changed",new Map().set("cuepoints",E))),Cp(e),e.j=[];return o&&(e.I||0<E.length)&&pB(e),lt(gt,0)}et(gt),ue(gt)})}function hB(e,i){var o,c,h,g,v,E,S,I;Qe(function(L){if(L.g==1)return!i.staticResource||(o=MI(i),e.F.get(o))?L.return():(c={type:9},h=ws([i.staticResource],qo()),g=e.K.request(7,h,c),$e(L,2),e.F.set(o,[]),x(L,g.promise,4));if(L.g!=2)return v=L.h,E=Er(v.data),S=JSON.parse(E),I=S.apps,e.F.set(o,I),lt(L,0);et(L),e.F.delete(o),ue(L)})}function MI(e){return[e.adId,e.adParameters,e.adSystem,e.adTitle,e.creativeAdId,e.creativeId,e.creativeSequence,e.height,e.width,e.staticResource].join("")}function pB(e){OI(e),e.I||(NI(e),e.o.D(e.h,"seeked",function(){NI(e)}),e.o.D(e.h,"ended",function(){Cp(e)})),e.o.D(e.h,"timeupdate",function(){OI(e)})}function NI(e){var i=e.h.currentTime;if(i!=0&&e.A==null){for(var o,c,h=T(e.j),g=h.next();!g.done;g=h.next()){g=g.value;for(var v=T(g.ads),E=v.next();!E.done;E=v.next())if(E=E.value,!c)E.startTimeInSeconds<i&&(c=E,o=g);else if(E.startTimeInSeconds<i&&E.startTimeInSeconds>c.startTimeInSeconds+c.durationInSeconds){c=E,o=g;break}}o&&c&&!e.M.includes(c.adId)&&(e.A=i,e.h.currentTime=o.startTimeInSeconds)}}function OI(e){if(e.h.duration&&(e.g||e.j.length)){var i=e.h.currentTime,o=!1;if(e.g){o=!0;var c=e.C,h=c.startTimeInSeconds+.5*c.durationInSeconds,g=c.startTimeInSeconds+.75*c.durationInSeconds;i>=c.startTimeInSeconds+.25*c.durationInSeconds&&!e.u.includes("firstQuartile")?(e.u.push("firstQuartile"),so(e,"firstQuartile")):i>=h&&!e.u.includes("midpoint")?(e.u.push("midpoint"),so(e,"midpoint")):i>=g&&!e.u.includes("thirdQuartile")&&(e.u.push("thirdQuartile"),so(e,"thirdQuartile")),c=e.g.getRemainingTime(),h=e.g.getDuration(),e.g.canSkipNow()&&0<c&&0<h&&so(e,"skipStateChanged"),0<h&&(0>=c||c>h)&&Cp(e)}if(!e.g||!e.g.isLinear()){e:for(c=T(e.j),h=c.next();!h.done&&(h=h.value,!(e.g&&e.g.isLinear()));h=c.next())for(g=0;g<h.ads.length;g++){var v=h.ads[g],E=v.startTimeInSeconds+v.durationInSeconds;if(v.startTimeInSeconds<=i&&E>i){if(e.M.includes(v.adId)){if(e.h.ended)continue;e.h.currentTime=E;break e}Cp(e),e.L=h,e.g=new Ai(v,g+1,h.ads.length,!0,e.h),e.C=v,g===0&&so(e,"breakStart"),FI(e);break}}if(!e.g){for(c=T(e.j),h=c.next();!h.done&&(h=h.value,!e.g);h=c.next())for(g=0;g<h.nonLinearAdsList.length;g++)if(v=h.nonLinearAdsList[g],v.nonLinearAdList.length){E=h.startTimeInSeconds;var S=e.F.get(MI(v.nonLinearAdList[0]));if(E<=i&&S&&S.length){Cp(e),E=e,S=T(S);for(var I=S.next();!I.done;I=S.next())if(I=I.value,I.data.source.length){var L=document.createElement("img");L.src=I.data.source[0].url,L.style.top=(I.placeholder.top||0)+"%",L.style.height=100-(I.placeholder.top||0)+"%",L.style.left=(I.placeholder.left||0)+"%",L.style.maxWidth=100-(I.placeholder.left||0)+"%",L.style.objectFit="contain",L.style.position="absolute",E.B.appendChild(L)}e.L=h,e.g=new Ai(v,g+1,h.ads.length,!1,e.h),e.C=v,g===0&&so(e,"breakStart"),FI(e);break}}}o&&!e.g&&(i=e.h.currentTime,e.A&&e.A>i&&(e.h.currentTime=e.A),e.A=null)}}}function Cp(e){if(e.g){for(;e.B.lastChild;)e.B.removeChild(e.B.firstChild);e.I||e.M.push(e.C.adId);var i=e.g.m;i!==void 0&&i?so(e,"skip"):so(e,"complete"),i=T(e.m);for(var o=i.next();!o.done;o=i.next())o=o.value,e.o.Ja(o.target,o.type,o.listener);e.m=[],e.u=[],i=e.g.getPositionInSequence(),o=e.g.getSequenceLength(),i===o&&so(e,"breakEnd"),e.g=null,e.C=null,e.L=null}}function FI(e){var i=!1;e.h.paused?i=!0:(so(e,"impression"),so(e,"start")),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted&&so(e,"mute")}}),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted||so(e,"unmute")}}),e.m.push({target:e.h,type:"play",listener:function(){i?(so(e,"impression"),so(e,"start"),i=!1):so(e,"resume")}}),e.m.push({target:e.h,type:"pause",listener:function(){so(e,"pause")}});for(var o=T(e.m),c=o.next();!c.done;c=o.next())c=c.value,e.o.D(c.target,c.type,c.listener)}function so(e,i){var o=e.C.trackingEvents.find(function(g){return g.eventType==i});if(o||(o=e.L.adBreakTrackingEvents.find(function(g){return g.eventType==i})),o){var c={type:10};o=T(o.beaconUrls);for(var h=o.next();!h.done;h=o.next())(h=h.value)&&h!=""&&(h=ws([h],qo()),h.method="POST",e.K.request(7,h,c))}switch(i){case"impression":e.i(new Jn("ad-impression"));break;case"start":e.i(new Jn("ad-started",new Map().set("ad",e.g)));break;case"mute":e.i(new Jn("ad-muted"));break;case"unmute":e.i(new Jn("ad-volume-changed"));break;case"resume":e.i(new Jn("ad-resumed"));break;case"pause":e.i(new Jn("ad-paused"));break;case"firstQuartile":e.i(new Jn("ad-first-quartile"));break;case"midpoint":e.i(new Jn("ad-midpoint"));break;case"thirdQuartile":e.i(new Jn("ad-third-quartile"));break;case"complete":e.i(new Jn("ad-complete")),e.i(new Jn("ad-stopped"));break;case"skip":e.i(new Jn("ad-skipped")),e.i(new Jn("ad-stopped"));break;case"breakStart":e.B.setAttribute("ad-active","true");break;case"breakEnd":e.B.removeAttribute("ad-active");break;case"skipStateChanged":e.i(new Jn("ad-skip-state-changed"))}}function ki(e,i){this.g=e,this.i=null,this.h=i}p=ki.prototype,p.needsSkipUI=function(){return!0},p.isClientRendering=function(){return!1},p.hasCustomClick=function(){return!0},p.isUsingAnotherMediaElement=function(){return!1},p.getDuration=function(){return this.i?this.i.duration:-1},p.getMinSuggestedDuration=function(){return this.getDuration()},p.getRemainingTime=function(){return this.i?this.i.duration-this.i.currentTime:-1},p.isPaused=function(){return this.h.paused},p.isSkippable=function(){return this.g.isSkippable()},p.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},p.canSkipNow=function(){return this.getTimeUntilSkippable()==0},p.skip=function(){this.h.currentTime+=this.getRemainingTime()},p.pause=function(){return this.h.pause()},p.play=function(){return this.h.play()},p.getVolume=function(){return this.h.volume},p.setVolume=function(e){this.h.volume=e},p.isMuted=function(){return this.h.muted},p.isLinear=function(){return!0},p.resize=function(){},p.setMuted=function(e){this.h.muted=e},p.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},p.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},p.getTitle=function(){return this.g.getTitle()},p.getDescription=function(){return this.g.getDescription()},p.getVastMediaBitrate=function(){return 0},p.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},p.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},p.getAdId=function(){return this.g.getAdId()},p.getCreativeAdId=function(){return this.g.getCreativeAdId()},p.getAdvertiserName=function(){return this.g.getAdvertiserName()},p.getMediaUrl=function(){return null},p.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},p.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},p.release=function(){this.h=this.i=this.g=null},_e("shaka.ads.ServerSideAd",ki),ki.prototype.release=ki.prototype.release,ki.prototype.getPodIndex=ki.prototype.getPodIndex,ki.prototype.getTimeOffset=ki.prototype.getTimeOffset,ki.prototype.getMediaUrl=ki.prototype.getMediaUrl,ki.prototype.getAdvertiserName=ki.prototype.getAdvertiserName,ki.prototype.getCreativeAdId=ki.prototype.getCreativeAdId,ki.prototype.getAdId=ki.prototype.getAdId,ki.prototype.getVastMediaWidth=ki.prototype.getVastMediaWidth,ki.prototype.getVastMediaHeight=ki.prototype.getVastMediaHeight,ki.prototype.getVastMediaBitrate=ki.prototype.getVastMediaBitrate,ki.prototype.getDescription=ki.prototype.getDescription,ki.prototype.getTitle=ki.prototype.getTitle,ki.prototype.getPositionInSequence=ki.prototype.getPositionInSequence,ki.prototype.getSequenceLength=ki.prototype.getSequenceLength,ki.prototype.setMuted=ki.prototype.setMuted,ki.prototype.resize=ki.prototype.resize,ki.prototype.isLinear=ki.prototype.isLinear,ki.prototype.isMuted=ki.prototype.isMuted,ki.prototype.setVolume=ki.prototype.setVolume,ki.prototype.getVolume=ki.prototype.getVolume,ki.prototype.play=ki.prototype.play,ki.prototype.pause=ki.prototype.pause,ki.prototype.skip=ki.prototype.skip,ki.prototype.canSkipNow=ki.prototype.canSkipNow,ki.prototype.getTimeUntilSkippable=ki.prototype.getTimeUntilSkippable,ki.prototype.isSkippable=ki.prototype.isSkippable,ki.prototype.isPaused=ki.prototype.isPaused,ki.prototype.getRemainingTime=ki.prototype.getRemainingTime,ki.prototype.getMinSuggestedDuration=ki.prototype.getMinSuggestedDuration,ki.prototype.getDuration=ki.prototype.getDuration,ki.prototype.isUsingAnotherMediaElement=ki.prototype.isUsingAnotherMediaElement,ki.prototype.hasCustomClick=ki.prototype.hasCustomClick,ki.prototype.isClientRendering=ki.prototype.isClientRendering,ki.prototype.needsSkipUI=ki.prototype.needsSkipUI;function UI(e,i,o,c){var h=this;this.u=e,this.l=i,this.j=null,this.F=NaN,this.i=c,this.G=!1,this.A=this.m=this.o=null,this.B="",this.C=[],this.h=new ni,e=new google.ima.dai.api.UiSettings,e.setLocale(o),this.g=new google.ima.dai.api.StreamManager(this.l,this.u,e),this.i(new Jn("ima-stream-manager-loaded",new Map().set("imaStreamManager",this.g))),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,function(g){gB(h,g)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,function(){h.B.length?h.j.resolve(h.B):h.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),h.j=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,function(){}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,function(g){g=g.getAd(),h.m=new ki(g,h.l),h.A&&(h.m.i=h.A),h.i(new Jn("ad-started",new Map().set("ad",h.m))),h.u.setAttribute("ad-active","true")}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,function(){h.u.removeAttribute("ad-active");var g=h.l.currentTime;h.o&&h.o>g&&(h.l.currentTime=h.o,h.o=null)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,function(g){h.A=g.getStreamData().adProgressData,h.m&&(h.m.i=h.A)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,function(){h.i(new Jn("ad-first-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,function(){h.i(new Jn("ad-midpoint"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,function(){h.i(new Jn("ad-third-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,function(){h.i(new Jn("ad-complete")),h.i(new Jn("ad-stopped")),h.u.removeAttribute("ad-active"),h.m=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,function(){h.i(new Jn("ad-skipped")),h.i(new Jn("ad-stopped"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,function(g){var v=g.getStreamData();g=[],v=T(v.cuepoints);for(var E=v.next();!E.done;E=v.next())E=E.value,g.push({start:E.start,end:E.end});h.C=g,h.i(new Jn("ad-cue-points-changed",new Map().set("cuepoints",g)))})}p=UI.prototype,p.configure=function(){},p.stop=function(){this.B="",this.o=null,this.C=[]},p.release=function(){this.stop(),this.h&&this.h.release()},p.onCueMetadataChange=function(e){if(e.key&&e.data){var i={};i[e.key]=e.data,this.g.onTimedMetadata(i)}},p.getCuePoints=function(){return this.C};function gB(e,i){e.i(new Jn("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.F))),i=i.getStreamData().url,e.j.resolve(i),e.j=null,e.G||e.h.D(e.l,"seeked",function(){var o=e.l.currentTime;if(o!=0){e.g.streamTimeForContentTime(o);var c=e.g.previousCuePointForStreamTime(o);c&&!c.played&&(e.o=o,e.l.currentTime=c.start)}})}function di(){xr.call(this),this.h=this.i=this.j=this.g=null,this.m=new AI,this.o=navigator.language,this.l=null}j(di,xr),p=di.prototype,p.setLocale=function(e){this.o=e},p.configure=function(e){this.l=e,this.g&&this.g.configure(this.l),this.j&&this.j.configure(this.l),this.h&&this.h.configure(this.l)},p.initInterstitial=function(e,i,o){var c=this;this.g&&this.g.release(),this.g=new kI(e,i,o,function(h){return lv(c,h)}),this.g.configure(this.l)},p.initClientSide=function(e,i,o){var c=this;if(!l.google||!google.ima||!google.ima.AdsLoader)throw new it(2,10,1e4);this.j&&this.j.release(),this.j=new iv(e,i,this.o,o,function(h){return lv(c,h)}),this.j.configure(this.l)},p.release=function(){this.g&&(this.g.release(),this.g=null),this.j&&(this.j.release(),this.j=null),this.i&&(this.i.release(),this.i=null),this.h&&(this.h.release(),this.h=null),xr.prototype.release.call(this)},p.onAssetUnload=function(){this.g&&this.g.stop(),this.j&&this.j.stop(),this.i&&this.i.stop(),this.h&&this.h.stop(),this.dispatchEvent(new Jn("ad-stopped")),this.dispatchEvent(new Jn("ad-content-attach-requested")),this.m=new AI},p.requestClientSideAds=function(e){if(!this.j)throw new it(1,10,10001);var i=this.j;i.g&&i.g.destroy(),i.m&&i.m.contentComplete(),i.G=Date.now()/1e3,i.m.requestAds(e)},p.updateClientSideAdsRenderingSettings=function(e){if(!this.j)throw new it(1,10,10001);var i=this.j;i.B=e,i.g&&i.g.updateAdsRenderingSettings(i.B)},p.initMediaTailor=function(e,i,o){var c=this;this.i&&this.i.release(),this.i=new Cm(e,i,o,function(h){return lv(c,h)})},p.requestMediaTailorStream=function(e,i,o){if(!this.i)throw new it(1,10,10005);var c=this.i;return o=o===void 0?"":o,c.l?e=Promise.reject(new it(1,10,10004)):(c.l=new mr,dB(c,e,i),c.H=o||"",c.P=Date.now()/1e3,e=c.l),e},p.addMediaTailorTrackingUrl=function(e){if(!this.i)throw new it(1,10,10005);var i=this.i;i.G=e,i.i(new Jn("ads-loaded",new Map().set("loadTime",0)))},p.initServerSide=function(e,i){var o=this;if(!l.google||!google.ima||!google.ima.dai)throw new it(2,10,10002);this.h&&this.h.release(),this.h=new UI(e,i,this.o,function(c){return lv(o,c)}),this.h.configure(this.l)},p.requestServerSideStream=function(e,i){if(i=i===void 0?"":i,!this.h)throw new it(1,10,10003);e.adTagParameters||(e.adTagParameters={});var o=e.adTagParameters;return(o.mpt||o.mpv)&&kt('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overridden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="v4.14.9",o=this.h,o.j?e=Promise.reject(new it(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(o.G=!0),o.j=new mr,o.g.requestStream(e),o.B=i||"",o.F=Date.now()/1e3,e=o.j),e},p.replaceServerSideAdTagParameters=function(e){if(!this.h)throw new it(1,10,10003);(e.mpt||e.mpv)&&kt('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overridden.'),e.mpt="Shaka Player",e.mpv="v4.14.9",this.h.g.replaceAdTagParameters(e)},p.getServerSideCuePoints=function(){return dn("AdManager.getServerSideCuePoints","Please use getCuePoints function."),this.getCuePoints()},p.getCuePoints=function(){var e=[];return this.h&&(e=e.concat(this.h.getCuePoints())),this.i&&(e=e.concat(this.i.getCuePoints())),e},p.getStats=function(){var e=this.m;return{loadTimes:e.g,averageLoadTime:tB(e),started:e.h,overlayAds:e.j,playedCompletely:e.l,skipped:e.m,errors:e.i}},p.onManifestUpdated=function(e){this.i&&this.i.onManifestUpdated(e)},p.onDashTimedMetadata=function(e){this.h&&e.schemeIdUri=="urn:google:dai:2018"&&this.h.g.processMetadata(e.schemeIdUri,e.eventNode?e.eventNode.attributes.messageData:null,e.startTime)},p.onHlsTimedMetadata=function(e,i){this.h&&this.h.g.processMetadata("ID3",e.data,i)},p.onCueMetadataChange=function(e){this.h&&this.h.onCueMetadataChange(e)},p.onHLSInterstitialMetadata=function(e,i,o){this.l&&this.l.disableHLSInterstitial||(this.g||this.initInterstitial(null,e,i),this.g&&aB(this.g,o))},p.onDASHInterstitialMetadata=function(e,i,o){if(!this.l||!this.l.disableDASHInterstitial){var c=o.schemeIdUri;if(c=="urn:mpeg:dash:event:alternativeMPD:insert:2025"||c=="urn:mpeg:dash:event:alternativeMPD:replace:2025"){if(this.g||this.initInterstitial(null,e,i),this.g&&(e=this.g,i=o.schemeIdUri=="urn:mpeg:dash:event:alternativeMPD:replace:2025",c=o.schemeIdUri=="urn:mpeg:dash:event:alternativeMPD:insert:2025",i||c)){for(var h=o.startTime,g=o.endTime,v=null,E=0,S,I=T(o.eventNode.children),L=I.next();!L.done;L=I.next())if(L=L.value,L.tagName=="AlternativeMPD"){if(L=L.attributes.uri){S=L;break}}else if(L.tagName=="InsertPresentation"||L.tagName=="ReplacePresentation"){var O=L.attributes.url;if(O){S=O,(I=Ri(L,"maxDuration",Zs))&&(v=I/o.timescale),(I=Ri(L,"returnOffset",Zs))&&(E=I/o.timescale),i&&E&&(g=h+E);break}}S&&wm(e,[{id:o.id,groupId:null,startTime:h,endTime:g,uri:S,mimeType:null,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!0,resumeOffset:c?E:null,playoutLimit:v,once:!1,pre:!1,post:!1,timelineRange:i&&!c,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null}])}}else(c=="urn:mpeg:dash:event:2012"||c=="urn:scte:dash:scte214-events")&&o.eventNode&&is(o.eventNode,"OverlayEvent")&&(this.g||this.initInterstitial(null,e,i),this.g&&oB(this.g,o))}},p.addCustomInterstitial=function(e){if(!this.g)throw new it(1,10,10006);wm(this.g,[e])},p.addAdUrlInterstitial=function(e){if(!this.g)throw new it(1,10,10006);return this.g.addAdUrlInterstitial(e)},p.getInterstitialPlayer=function(){if(!this.g)throw new it(1,10,10006);return this.g.If()};function lv(e,i){if(i&&i.type)switch(i.type){case"ads-loaded":e.m.g.push(i.loadTime);break;case"ad-started":e.m.h++;var o=i.ad;o&&!o.isLinear()&&e.m.j++;break;case"ad-complete":e.m.l++;break;case"ad-skipped":e.m.m++;break;case"ad-error":e.m.i++}e.dispatchEvent(i)}_e("shaka.ads.AdManager",di),di.prototype.getInterstitialPlayer=di.prototype.getInterstitialPlayer,di.prototype.addAdUrlInterstitial=di.prototype.addAdUrlInterstitial,di.prototype.addCustomInterstitial=di.prototype.addCustomInterstitial,di.prototype.onDASHInterstitialMetadata=di.prototype.onDASHInterstitialMetadata,di.prototype.onHLSInterstitialMetadata=di.prototype.onHLSInterstitialMetadata,di.prototype.onCueMetadataChange=di.prototype.onCueMetadataChange,di.prototype.onHlsTimedMetadata=di.prototype.onHlsTimedMetadata,di.prototype.onDashTimedMetadata=di.prototype.onDashTimedMetadata,di.prototype.onManifestUpdated=di.prototype.onManifestUpdated,di.prototype.getStats=di.prototype.getStats,di.prototype.getCuePoints=di.prototype.getCuePoints,di.prototype.getServerSideCuePoints=di.prototype.getServerSideCuePoints,di.prototype.replaceServerSideAdTagParameters=di.prototype.replaceServerSideAdTagParameters,di.prototype.requestServerSideStream=di.prototype.requestServerSideStream,di.prototype.initServerSide=di.prototype.initServerSide,di.prototype.addMediaTailorTrackingUrl=di.prototype.addMediaTailorTrackingUrl,di.prototype.requestMediaTailorStream=di.prototype.requestMediaTailorStream,di.prototype.initMediaTailor=di.prototype.initMediaTailor,di.prototype.updateClientSideAdsRenderingSettings=di.prototype.updateClientSideAdsRenderingSettings,di.prototype.requestClientSideAds=di.prototype.requestClientSideAds,di.prototype.onAssetUnload=di.prototype.onAssetUnload,di.prototype.release=di.prototype.release,di.prototype.initClientSide=di.prototype.initClientSide,di.prototype.initInterstitial=di.prototype.initInterstitial,di.prototype.configure=di.prototype.configure,di.prototype.setLocale=di.prototype.setLocale,di.ADS_LOADED="ads-loaded",di.AD_STARTED="ad-started",di.AD_FIRST_QUARTILE="ad-first-quartile",di.AD_MIDPOINT="ad-midpoint",di.AD_THIRD_QUARTILE="ad-third-quartile",di.AD_COMPLETE="ad-complete",di.AD_STOPPED="ad-stopped",di.AD_SKIPPED="ad-skipped",di.AD_VOLUME_CHANGED="ad-volume-changed",di.AD_MUTED="ad-muted",di.AD_PAUSED="ad-paused",di.AD_RESUMED="ad-resumed",di.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",di.CUEPOINTS_CHANGED="ad-cue-points-changed",di.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",di.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",di.AD_CLICKED="ad-clicked",di.AD_PROGRESS="ad-progress",di.AD_BUFFERING="ad-buffering",di.AD_IMPRESSION="ad-impression",di.AD_DURATION_CHANGED="ad-duration-changed",di.AD_CLOSED="ad-closed",di.AD_LOADED="ad-loaded",di.ALL_ADS_COMPLETED="all-ads-completed",di.AD_LINEAR_CHANGED="ad-linear-changed",di.AD_METADATA="ad-metadata",di.AD_RECOVERABLE_ERROR="ad-recoverable-error",di.AD_ERROR="ad-error",di.AD_BREAK_READY="ad-break-ready",di.AD_INTERACTION="ad-interaction",di.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",di.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",di.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested",nv=function(){return new di};function BI(e){return JSON.stringify(e,function(i,o){if(typeof o!="function"){if(o instanceof Event||o instanceof Jn){var c={};for(h in o)(i=o[h])&&typeof i=="object"?h=="detail"&&(c[h]=i):h in Event||(c[h]=i);return c}if(o instanceof Error){var h=new Set(["name","message","stack"]);for(c in o)h.add(c);for(c=T(Object.getOwnPropertyNames(o)),i=c.next();!i.done;i=c.next())h.add(i.value);for(c={},h=T(h),i=h.next();!i.done;i=h.next())i=i.value,c[i]=o[i];o={__type__:"Error",contents:c}}else if(o instanceof TimeRanges){for(h={__type__:"TimeRanges",length:o.length,start:[],end:[]},o=T(Le(o)),c=o.next();!c.done;c=o.next())c=c.value,i=c.end,h.start.push(c.start),h.end.push(i);o=h}else o=ArrayBuffer.isView(o)&&o.BYTES_PER_ELEMENT===1?{__type__:"Uint8Array",entries:Array.from(o)}:typeof o=="number"?isNaN(o)?"NaN":isFinite(o)?o:0>o?"-Infinity":"Infinity":o;return o}})}function m_(e){return JSON.parse(e,function(i,o){if(o=="NaN")var c=NaN;else if(o=="-Infinity")c=-1/0;else if(o=="Infinity")c=1/0;else if(o&&typeof o=="object"&&o.__type__=="TimeRanges")c=mB(o);else if(o&&typeof o=="object"&&o.__type__=="Uint8Array")c=new Uint8Array(o.entries);else if(o&&typeof o=="object"&&o.__type__=="Error"){i=o.contents,o=Error(i.message);for(c in i)o[c]=i[c];c=o}else c=o;return c})}function mB(e){return{length:e.length,start:function(i){return e.start[i]},end:function(i){return e.end[i]}}}var zI="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),yB="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),y_=["loop","playbackRate"],vB=["pause","play"],v_=new Map().set("getAssetUri",2).set("getAudioLanguages",4).set("getAudioLanguagesAndRoles",4).set("getBufferFullness",1).set("getBufferedInfo",2).set("getExpiration",2).set("getKeyStatuses",2).set("getPlaybackRate",2).set("getTextLanguages",4).set("getTextLanguagesAndRoles",4).set("getImageTracks",2).set("getThumbnails",2).set("isAudioOnly",10).set("isBuffering",1).set("isInProgress",1).set("isLive",10).set("isTextTrackVisible",1).set("keySystem",10).set("seekRange",1).set("getLoadMode",10).set("getManifestType",10).set("isFullyLoaded",1).set("isEnded",1),T_=new Map().set("getConfiguration",4).set("getConfigurationForLowLatency",4).set("getStats",5).set("getAudioTracks",2).set("getTextTracks",2).set("getVariantTracks",2),jI=new Map().set("getPlayheadTimeAsDate",1).set("getPresentationStartTimeAsDate",20).set("getSegmentAvailabilityDuration",20),qI=[["getConfiguration","configure","getConfigurationForLowLatency","configurationForLowLatency"]],HI=[["isTextTrackVisible","setTextTrackVisibility"]],TB="addChaptersTrack addTextTrackAsync addThumbnailsTrack cancelTrickPlay configure configurationForLowLatency getChapters getChaptersTracks resetConfiguration retryStreaming selectAudioLanguage selectAudioTrack selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay updateStartTime goToLive".split(" "),EB=["attach","attachCanvas","detach","load","unload"];function E_(e,i,o,c,h,g,v){var E=this;this.G=e,this.K=v,this.l=new Li(i),this.L=o,this.u=!1,this.A=c,this.F=h,this.M=g,this.i=this.m=!1,this.I="",this.o=null,this.B=function(){return b_(E)},this.C=function(S,I){switch(S=m_(I),S.type){case"event":var L=S.targetName,O=e0(S.event);E.A(L,O);break;case"update":L=S.update;for(O in L){S=E.g[O]||{};for(var V in L[O])S[V]=L[O][V]}E.u&&(E.L(),E.u=!1);break;case"asyncComplete":if(O=S.id,V=S.error,S=E.h.get(O),E.h.delete(O),S)if(V){O=new it(V.severity,V.category,V.code);for(L in V)O[L]=V[L];S.reject(O)}else S.resolve()}},this.g={video:{},player:{}},this.H=0,this.h=new Map,this.j=null,Dm.add(this)}p=E_.prototype,p.destroy=function(){return Dm.delete(this),__(this),gu&&VI(this),this.l&&(this.l.stop(),this.l=null),this.F=this.A=null,this.i=this.m=!1,this.C=this.B=this.j=this.h=this.g=this.o=null,Promise.resolve()},p.qb=function(){return this.i},p.ag=function(){return this.I},p.init=function(){if(this.G.length)if(l.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.l.sb();var e=new chrome.cast.SessionRequest(this.G,[],null,this.K,null);e=new chrome.cast.ApiConfig(e,function(i){for(var o=T(Dm),c=o.next();!c.done;c=o.next()){c=c.value;var h=i;c.j=new mr,c.u=!0,uv(c,h)}},function(i){for(var o=T(Dm),c=o.next();!c.done;c=o.next())c=c.value,cv=i=="available",c.l.sb()},"origin_scoped"),chrome.cast.initialize(e,function(){},function(){}),cv&&this.l.da(_B),(e=gu)&&e.status!=chrome.cast.SessionStatus.STOPPED?(this.j=new mr,this.u=!0,uv(this,e)):gu=null}else l.__onGCastApiAvailable!==$I&&(dv=l.__onGCastApiAvailable||null,l.__onGCastApiAvailable=$I)},p.ig=function(e){this.o=e,this.i&&km(this,{type:"appData",appData:this.o})},p.cast=function(){var e=this;return Qe(function(i){if(!e.m)throw new it(1,8,8e3);if(!cv)throw new it(1,8,8001);if(e.i)throw new it(1,8,8002);return e.j=new mr,chrome.cast.requestSession(function(o){return uv(e,o)},function(o){return GI(e,o)}),x(i,e.j,0)})};function bB(e){e.i&&chrome.cast.requestSession(function(i){return uv(e,i)},function(i){return GI(e,i)})}p.Pc=function(){if(this.i){if(__(this),gu){VI(this);try{gu.stop(function(){},function(){})}catch{}gu=null}b_(this)}},p.get=function(e,i){var o=this;if(e=="video"){if(vB.includes(i))return function(){return o.oh.apply(o,[e,i].concat(k(Ze.apply(0,arguments))))}}else if(e=="player"){if(jI.has(i)&&!this.get("player","isLive")())return function(){};if(TB.includes(i))return function(){return o.oh.apply(o,[e,i].concat(k(Ze.apply(0,arguments))))};if(EB.includes(i))return function(){return o.pj.apply(o,[e,i].concat(k(Ze.apply(0,arguments))))};if(v_.has(i)||T_.has(i))return function(){return o.g[e][i]}}return this.g[e][i]},p.set=function(e,i,o){this.g[e][i]=o,km(this,{type:"set",targetName:e,property:i,value:o})};function uv(e,i){var o=e.M();gu=i,i.addUpdateListener(e.B),i.addMessageListener("urn:x-cast:com.google.shaka.v2",e.C),b_(e),km(e,{type:"init",initState:o,appData:e.o}),e.j.resolve()}function GI(e,i){var o=8003;switch(i.code){case"cancel":o=8004;break;case"timeout":o=8005;break;case"receiver_unavailable":o=8006}e.j.reject(new it(2,8,o,i))}p.oh=function(e,i){km(this,{type:"call",targetName:e,methodName:i,args:Ze.apply(2,arguments)})},p.pj=function(e,i){var o=Ze.apply(2,arguments),c=new mr,h=this.H.toString();this.H++,this.h.set(h,c);try{km(this,{type:"asyncCall",targetName:e,methodName:i,args:o,id:h})}catch(g){c.reject(g)}return c};function VI(e){var i=gu;i.removeUpdateListener(e.B),i.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.C)}function b_(e){var i=gu?gu.status=="connected":!1;if(e.i&&!i){e.F();for(var o in e.g)e.g[o]={};__(e)}e.i=i,e.I=i?gu.receiver.friendlyName:"",e.l.sb()}function __(e){if(e.h)for(var i=T(e.h.keys()),o=i.next();!o.done;o=i.next()){o=o.value;var c=e.h.get(o);e.h.delete(o),c.reject(new it(1,7,7e3))}}function km(e,i){i=BI(i);var o=gu;try{o.sendMessage("urn:x-cast:com.google.shaka.v2",i,function(){},sn)}catch(c){throw i=new it(2,8,8005,c),o=new Jn("error",new Map().set("detail",i)),e.A("player",o),e.Pc(),i}}var _B=.02,cv=!1,gu=null,dv=null,Dm=new Set;function $I(e){if(dv?l.__onGCastApiAvailable=dv:delete l.__onGCastApiAvailable,dv=null,e)for(var i=T(Dm),o=i.next();!o.done;o=i.next())o.value.init();typeof l.__onGCastApiAvailable=="function"&&l.__onGCastApiAvailable(e)}function Ls(e,i,o,c){c=c===void 0?!1:c,xr.call(this);var h=this;this.i=e,this.h=i,this.m=this.o=this.l=this.u=this.j=null,this.C=o,this.B=c,this.A=new Map,this.g=null,l.chrome?(this.g=new E_(o,function(){return WI(h)},function(){return XI(h)},function(g,v){return JI(h,g,v)},function(){return QI(h)},function(){return YI(h)},c),SB(this)):(this.j=this.i,this.u=this.h)}j(Ls,xr),p=Ls.prototype,p.destroy=function(e){return this.g&&e&&this.g.Pc(),this.m&&(this.m.release(),this.m=null),e=[],this.h&&(e.push(this.h.destroy()),this.h=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.u=this.j=this.i=null,xr.prototype.release.call(this),Promise.all(e)},p.Li=function(){return this.j},p.If=function(){return this.u},p.Xh=function(){return this.g?this.g.m&&cv:!1},p.qb=function(){return this.g?this.g.qb():!1},p.ag=function(){return this.g?this.g.ag():""},p.cast=function(){var e=this;return Qe(function(i){return i.g==1?e.g?x(i,e.g.cast(),2):i.return():e.h?x(i,e.h.kc(),0):i.return()})},p.ig=function(e){this.g&&this.g.ig(e)},p.Ej=function(){this.g&&bB(this.g)},p.Pc=function(){this.g&&this.g.Pc()},p.Yh=function(e,i){i=i===void 0?!1:i;var o=this;return Qe(function(c){if(c.g==1)return e==o.C&&i==o.B||(o.C=e,o.B=i,!o.g)?c.return():(o.g.Pc(),x(c,o.g.destroy(),2));o.g=null,o.g=new E_(e,function(){return WI(o)},function(){return XI(o)},function(h,g){return JI(o,h,g)},function(){return QI(o)},function(){return YI(o)},i),o.g.init(),ue(c)})};function SB(e){e.g.init(),e.m=new ni;for(var i=T(zI),o=i.next();!o.done;o=i.next())e.m.D(e.i,o.value,function(g){e.g.qb()||(g=e0(g),e.l.dispatchEvent(g))});for(var c in th)e.m.D(e.h,th[c],function(g){e.g.qb()||e.o.dispatchEvent(g)});e.j={},i={};for(var h in e.i)i={wd:i.wd},i.wd=h,Object.defineProperty(e.j,i.wd,{configurable:!1,enumerable:!0,get:function(g){return function(){return AB(e,g.wd)}}(i),set:function(g){return function(v){var E=g.wd;e.g.qb()?e.g.set("video",E,v):e.i[E]=v}}(i)});e.u={},KI(e,function(g){Object.defineProperty(e.u,g,{configurable:!1,enumerable:!0,get:function(){return wB(e,g)}})}),xB(e),e.l=new xr,e.l.Ge=e.j,e.o=new xr,e.o.Ge=e.u}function xB(e){var i=new Map;KI(e,function(o,c){i.has(c)?(c=i.get(c),o.length<c.length?e.A.set(o,c):e.A.set(c,o)):i.set(c,o)})}function KI(e,i){function o(S){return S=="constructor"||typeof c[S]!="function"?!1:!h.has(S)}var c=e.h,h=new Set,g;for(g in c)o(g)&&(h.add(g),i(g,c[g]));for(e=Object.getPrototypeOf(c),g=Object.getPrototypeOf({});e&&e!=g;){for(var v=T(Object.getOwnPropertyNames(e)),E=v.next();!E.done;E=v.next())E=E.value,o(E)&&(h.add(E),i(E,c[E]));e=Object.getPrototypeOf(e)}}function YI(e){var i={video:{},player:{},playerAfterLoad:{},manifest:e.h.Qc(),startTime:null};e.i.pause();for(var o=T(y_),c=o.next();!c.done;c=o.next())c=c.value,i.video[c]=e.i[c];for(e.i.ended||(i.startTime=e.i.currentTime),o=T(qI),c=o.next();!c.done;c=o.next()){var h=c.value;c=h[1],h=e.h[h[0]](),i.player[c]=h}for(o=T(HI),c=o.next();!c.done;c=o.next())h=c.value,c=h[1],h=e.h[h[0]](),i.playerAfterLoad[c]=h;return i}function WI(e){var i=new Jn("caststatuschanged");e.dispatchEvent(i)}function XI(e){var i=new Jn(e.j.paused?"pause":"play");e.l.dispatchEvent(i)}function QI(e){for(var i=T(qI),o=i.next();!o.done;o=i.next()){var c=o.value;o=c[1],c=e.g.get("player",c[0])(),e.h[o](c)}var h=e.g.get("player","getAssetUri")();c=e.g.get("video","ended"),i=Promise.resolve();var g=e.i.autoplay;o=null,c||(o=e.g.get("video","currentTime"));var v;(c=e.g.get("player","getTextTracks")())&&c.length&&(v=c.find(function(I){return I.active}));var E=e.g.get("player","isTextTrackVisible")();h&&(e.i.autoplay=!1,i=e.h.load(h,o));var S={};for(o=T(y_),c=o.next();!c.done;c=o.next())c=c.value,S[c]=e.g.get("video",c);i.then(function(){if(e.i){for(var I=T(y_),L=I.next();!L.done;L=I.next())L=L.value,e.i[L]=S[L];for(I=T(HI),L=I.next();!L.done;L=I.next()){var O=L.value;L=O[1],O=e.g.get("player",O[0])(),e.h[L](O)}e.h.zh(E),v&&e.h.hg(v.language,v.roles,v.forced),e.i.autoplay=g,h&&e.i.play()}},function(I){I=new Map().set("detail",I),I=new Jn("error",I),e.h.dispatchEvent(I)})}function AB(e,i){if(i=="addEventListener")return function(c,h,g){return e.l.addEventListener(c,h,g)};if(i=="removeEventListener")return function(c,h,g){return e.l.removeEventListener(c,h,g)};if(e.g.qb()&&Object.keys(e.g.g.video).length==0){var o=e.i[i];if(typeof o!="function")return o}return e.g.qb()?e.g.get("video",i):(i=e.i[i],typeof i=="function"&&(i=i.bind(e.i)),i)}function wB(e,i){if(e.A.has(i)&&(i=e.A.get(i)),i=="addEventListener")return function(o,c,h){return e.o.addEventListener(o,c,h)};if(i=="removeEventListener")return function(o,c,h){return e.o.removeEventListener(o,c,h)};if(i=="getMediaElement")return function(){return e.j};if(i=="getSharedConfiguration")return e.g.get("player","getConfiguration");if(i=="getNetworkingEngine")return function(){return e.h.xb()};if(i=="getDrmEngine")return function(){return e.h.C};if(i=="getAdManager")return function(){return e.h.Pg()};if(i=="setVideoContainer")return function(o){return e.h.Ch(o)};if(e.g.qb()){if(i=="getManifest"||i=="drmInfo")return function(){return kt(i+"() does not work while casting!"),null};if(i=="attach"||i=="detach")return function(){return kt(i+"() does not work while casting!"),Promise.resolve()}}return e.g.qb()&&Object.keys(e.g.g.video).length==0&&(v_.has(i)||T_.has(i))||!e.g.qb()?e.h[i].bind(e.h):e.g.get("player",i)}function JI(e,i,o){e.g.qb()&&(i=="video"?e.l.dispatchEvent(o):i=="player"&&e.o.dispatchEvent(o))}_e("shaka.cast.CastProxy",Ls),Ls.prototype.changeReceiverId=Ls.prototype.Yh,Ls.prototype.forceDisconnect=Ls.prototype.Pc,Ls.prototype.suggestDisconnect=Ls.prototype.Ej,Ls.prototype.setAppData=Ls.prototype.ig,Ls.prototype.cast=Ls.prototype.cast,Ls.prototype.receiverName=Ls.prototype.ag,Ls.prototype.isCasting=Ls.prototype.qb,Ls.prototype.canCast=Ls.prototype.Xh,Ls.prototype.getPlayer=Ls.prototype.If,Ls.prototype.getVideo=Ls.prototype.Li,Ls.prototype.destroy=Ls.prototype.destroy;function Sa(e,i,o,c){xr.call(this);var h=this;this.g=e,this.h=i,this.j=new ni,this.H={video:e,player:i},this.F=o||function(){},this.I=c||function(g){return g},this.i=null,this.G=!1,this.o=!0,this.m=0,this.B=!1,this.A=!0,this.u=this.l=null,this.C=new Li(function(){S_(h)}),IB(this)}j(Sa,xr),p=Sa.prototype,p.isConnected=function(){return this.G},p.Si=function(){return this.o},p.Bj=function(e){this.i=e},p.bi=function(){this.i=null},p.Cj=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=e},p.Aj=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:e}]},p.zj=function(e){this.i||(this.i={}),this.i.artist=e,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},p.destroy=function(){var e=this,i,o;return Qe(function(c){if(c.g==1)return e.j&&(e.j.release(),e.j=null),i=[],e.h&&(i.push(e.h.destroy()),e.h=null),e.C&&(e.C.stop(),e.C=null),e.g=null,e.H=null,e.F=null,e.G=!1,e.o=!0,e.l=null,e.u=null,xr.prototype.release.call(e),x(c,Promise.all(i),2);o=cast.receiver.CastReceiverManager.getInstance(),o.stop(),ue(c)})};function IB(e){var i=cast.receiver.CastReceiverManager.getInstance();i.onSenderConnected=function(){return ZI(e)},i.onSenderDisconnected=function(){return ZI(e)},i.onSystemVolumeChanged=function(){var h=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();h&&Td(e,{type:"update",update:{video:{volume:h.level,muted:h.muted}}},e.l),Td(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)},e.u=i.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.u.onMessage=function(h){return DB(e,h)},e.l=i.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.l.onMessage=function(h){return kB(e,h)},i.start(),i=T(zI);for(var o=i.next();!o.done;o=i.next())e.j.D(e.g,o.value,function(h){return eC(e,"video",h)});for(var c in th)e.j.D(e.h,th[c],function(h){return eC(e,"player",h)});e.j.D(e.g,"loadeddata",function(){e.B=!0}),e.j.D(e.h,"loading",function(){e.o=!1,kp(e)}),e.j.D(e.g,"playing",function(){e.o=!1,kp(e)}),e.j.D(e.g,"pause",function(){kp(e)}),e.j.D(e.h,"unloading",function(){e.o=!0,kp(e)}),e.j.D(e.g,"ended",function(){new Li(function(){e.g&&e.g.ended&&(e.o=!0,kp(e))}).da(LB)})}function ZI(e){e.m=0,e.A=!0,e.G=cast.receiver.CastReceiverManager.getInstance().getSenders().length!=0,kp(e)}function kp(e){var i;Qe(function(o){if(o.g==1)return x(o,Promise.resolve(),2);if(!e.h)return o.return();i=new Jn("caststatuschanged"),e.dispatchEvent(i),tC(e)||Ed(e),ue(o)})}function CB(e,i,o){var c,h,g,v,E,S,I,L,O,V;Qe(function(W){switch(W.g){case 1:for(c in i.player)h=i.player[c],e.h[c](h);return e.F(o),g=e.g.autoplay,i.manifest?(e.g.autoplay=!1,$e(W,5),x(W,e.h.load(i.manifest,i.startTime),7)):x(W,Promise.resolve(),3);case 7:lt(W,3);break;case 5:return v=et(W),E=new Map().set("detail",v),S=new Jn("error",E),e.h&&e.h.dispatchEvent(S),W.return();case 3:if(!e.h)return W.return();for(I in i.video)L=i.video[I],e.g[I]=L;for(O in i.playerAfterLoad)V=i.playerAfterLoad[O],e.h[O](V);e.g.autoplay=g,i.manifest&&(e.g.play(),Ed(e)),ue(W)}})}function eC(e,i,o){e.h&&(S_(e),Td(e,{type:"event",targetName:i,event:o},e.l))}function S_(e){e.C.da(RB);for(var i={video:{},player:{}},o=T(yB),c=o.next();!c.done;c=o.next())c=c.value,i.video[c]=e.g[c];e.h.U()&&jI.forEach(function(h,g){e.m%h==0&&(i.player[g]=e.h[g]())}),v_.forEach(function(h,g){e.m%h==0&&(i.player[g]=e.h[g]())}),(o=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(i.video.volume=o.level,i.video.muted=o.muted),Td(e,{type:"update",update:i},e.l),T_.forEach(function(h,g){e.m%h==0&&(h={player:{}},h.player[g]=e.h[g](),Td(e,{type:"update",update:h},e.l))}),e.B&&(e.m+=1),tC(e)}function tC(e){return e.A&&(e.g.duration||e.h.U())?(x_(e),e.A=!1,!0):!1}function x_(e,i){var o={contentId:e.h.Qc(),streamType:e.h.U()?"LIVE":"BUFFERED",contentType:""};e.h.U()||(o.duration=e.g.duration),e.i&&(o.metadata=e.i),Ed(e,i===void 0?0:i,o)}function kB(e,i){var o=m_(i.data);switch(o.type){case"init":e.m=0,e.B=!1,e.A=!0,CB(e,o.initState,o.appData),S_(e);break;case"appData":e.F(o.appData);break;case"set":var c=o.targetName,h=o.property;if(o=o.value,c=="video"){if(i=cast.receiver.CastReceiverManager.getInstance(),h=="volume"){i.setSystemVolumeLevel(o);break}else if(h=="muted"){i.setSystemVolumeMuted(o);break}}e.H[c][h]=o;break;case"call":c=e.H[o.targetName],c[o.methodName].apply(c,o.args);break;case"asyncCall":c=o.targetName,h=o.methodName,c=="player"&&h=="load"&&(e.m=0,e.B=!1);var g=o.id,v=i.senderId;i=e.H[c],o=i[h].apply(i,o.args),c=="player"&&h=="load"&&(o=o.then(function(){e.A=!0})),o.then(function(){return nC(e,v,g,null)},function(E){return nC(e,v,g,E)})}}function DB(e,i){var o=m_(i.data);switch(o.type){case"PLAY":e.g.play(),Ed(e);break;case"PAUSE":e.g.pause(),Ed(e);break;case"SEEK":i=o.currentTime;var c=o.resumeState;i!=null&&(e.g.currentTime=Number(i)),c&&c=="PLAYBACK_START"?(e.g.play(),Ed(e)):c&&c=="PLAYBACK_PAUSE"&&(e.g.pause(),Ed(e));break;case"STOP":e.h.kc().then(function(){e.h&&Ed(e)});break;case"GET_STATUS":x_(e,Number(o.requestId));break;case"VOLUME":c=o.volume,i=c.level,c=c.muted;var h=e.g.volume,g=e.g.muted;i!=null&&(e.g.volume=Number(i)),c!=null&&(e.g.muted=c),h==e.g.volume&&g==e.g.muted||Ed(e);break;case"LOAD":e.m=0,e.B=!1,e.A=!1,i=o.media,c=o.currentTime,h=e.I(i.contentId),g=o.autoplay||!0,e.F(i.customData),g&&(e.g.autoplay=!0),e.h.load(h,c).then(function(){e.h&&x_(e)}).catch(function(v){var E="LOAD_FAILED";v.category==7&&v.code==7e3&&(E="LOAD_CANCELLED"),Td(e,{requestId:Number(o.requestId),type:E},e.u)});break;default:Td(e,{requestId:Number(o.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.u)}}function nC(e,i,o,c){e.h&&Td(e,{type:"asyncComplete",id:o,error:c},e.l,i)}function Td(e,i,o,c){e.G&&(e=BI(i),c?o.getCastChannel(c).send(e):o.broadcast(e))}function Ed(e,i,o){o=o===void 0?null:o;var c={mediaSessionId:0,playbackRate:e.g.playbackRate,playerState:e.o?PB:e.h.Of()?NB:e.g.paused?OB:MB,currentTime:e.g.currentTime,supportedMediaCommands:63,volume:{level:e.g.volume,muted:e.g.muted}};o&&(c.media=o),Td(e,{requestId:i===void 0?0:i,type:"MEDIA_STATUS",status:[c]},e.u)}_e("shaka.cast.CastReceiver",Sa),Sa.prototype.destroy=Sa.prototype.destroy,Sa.prototype.setContentArtist=Sa.prototype.zj,Sa.prototype.setContentImage=Sa.prototype.Aj,Sa.prototype.setContentTitle=Sa.prototype.Cj,Sa.prototype.clearContentMetadata=Sa.prototype.bi,Sa.prototype.setContentMetadata=Sa.prototype.Bj,Sa.prototype.isIdle=Sa.prototype.Si,Sa.prototype.isConnected=Sa.prototype.isConnected;var RB=.5,LB=5,PB="IDLE",MB="PLAYING",NB="BUFFERING",OB="PAUSED";function iC(e,i,o,c,h){if(c>=h)return null;for(var g=-1,v=-1,E=0;E<o.length;E++)if(o[E].some(function(ht){return ht!=null&&ht.g.trim()!=""})){g=E;break}for(E=o.length-1;0<=E;E--)if(o[E].some(function(ht){return ht!=null&&ht.g.trim()!=""})){v=E;break}if(g===-1||v===-1)return null;for(var S=E=!1,I="white",L="black",O=A_(c,h,E,S,I,L);g<=v;g++){for(var V=o[g],W=-1,pe=-1,Me=0;Me<V.length;Me++)if(V[Me]!=null&&V[Me].g.trim()!==""){W=Me;break}for(Me=V.length-1;0<=Me;Me--)if(V[Me]!=null&&V[Me].g.trim()!==""){pe=Me;break}if(W===-1||pe===-1)V=rC(c,h),e.nestedCues.push(V);else{for(;W<=pe;W++)if(Me=V[W]){var De=Me.l,Fe=Me.i,We=Me.j,gt=Me.h;(De!=E||Fe!=S||We!=I||gt!=L)&&(O.payload&&e.nestedCues.push(O),O=A_(c,h,De,Fe,We,gt),E=De,S=Fe,I=We,L=gt),O.payload+=Me.g}else O.payload+=" ";O.payload&&e.nestedCues.push(O),g!==v&&(O=rC(c,h),e.nestedCues.push(O)),O=A_(c,h,E,S,I,L)}}return e.nestedCues.length?{cue:e,stream:i}:null}function A_(e,i,o,c,h,g){return e=new kr(e,i,""),o&&e.textDecoration.push(al),c&&(e.fontStyle=Fu),e.color=h,e.backgroundColor=g,e}function rC(e,i){return e=new kr(e,i,""),e.lineBreak=!0,e}function sC(e,i,o,c,h){this.g=e,this.l=i,this.i=o,this.h=c,this.j=h}function w_(e,i){this.i=[],this.g=1,this.h=0,this.C=e,this.B=i,this.j=this.m=!1,this.l="white",this.o="black",this.u=this.A=null,Rm(this)}function fv(e,i,o){var c="CC"+((e.C<<1|e.B)+1),h=new kr(i,o,"");h.lineInterpretation=1;var g=lC.get(e.g);return g&&(h.line=g),e.u!=null&&e.A!=null&&(h.position=10+Math.min(70,10*e.u)+2.5*e.A),(i=iC(h,c,e.i,i,o))&&15<e.g+i.cue.nestedCues.length-3&&(g=lC.get(e.g+3-i.cue.nestedCues.length))&&(h.line=g),i}function Rm(e){bd(e,0,15),e.g=1}function Dp(e,i,o){if(!(32>o||127<o)){var c="";switch(i){case 0:c=oC.has(o)?oC.get(o):String.fromCharCode(o);break;case 1:c=FB.get(o);break;case 2:e.i[e.g].pop(),c=UB.get(o);break;case 3:e.i[e.g].pop(),c=BB.get(o)}c&&e.i[e.g].push(new sC(c,e.m,e.j,e.o,e.l))}}function aC(e,i,o,c){if(!(0>o||0>i))if(i>=o)for(--c;0<=c;c--)e.i[i+c]=e.i[o+c].map(function(g){return g});else for(var h=0;h<c;h++)e.i[i+h]=e.i[o+h].map(function(g){return g})}function bd(e,i,o){for(var c=0;c<=o;c++)e.i[i+c]=[]}var oC=new Map([[39,""],[42,""],[92,""],[92,""],[94,""],[95,""],[96,""],[123,""],[124,""],[125,""],[126,""],[127,""]]),FB=new Map([[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57," "],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]),UB=new Map([[32,""],[33,""],[34,""],[35,""],[36,""],[37,""],[38,""],[39,""],[40,"*"],[41,"'"],[42,""],[43,""],[44,""],[45,""],[46,""],[47,""],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57,""],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]),BB=new Map([[32,""],[33,""],[34,""],[35,""],[36,""],[37,""],[38,""],[39,""],[40,""],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[54,""],[55,""],[56,""],[57,""],[58,""],[59,""],[60,""],[61,""],[62,""],[63,""]]),lC=new Map([[1,10],[2,15.33],[3,20.66],[4,26],[5,31.33],[6,36.66],[7,42],[8,47.33],[9,52.66],[10,58],[11,63.33],[12,68.66],[13,74],[14,79.33],[15,84.66]]);function hv(e,i){this.h=0,this.o=new w_(e,i),this.i=new w_(e,i),this.g=this.j=new w_(e,i),this.l=0,this.m=null}function I_(e,i,o){e.g=e.i;var c=e.g,h=null;return e.h!==3&&e.h!==4&&(h=fv(c,e.l,o),o=e.i,o.g=0<o.h?o.h:0,bd(o,0,15),o=e.j,o.g=0<o.h?o.h:0,bd(o,0,15),c.g=15),e.h=3,c.h=i,h}function uC(e){e.h=1,e.g=e.j,e.g.h=0}function cC(e){Bt("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.o,e.h=4}var zB="black green blue cyan red yellow magenta black".split(" "),dC="white green blue cyan red yellow magenta white_italics".split(" ");function C_(e,i){this.I=i,this.M=e,this.K=this.l=!1,this.m=this.o=this.G=this.L=this.H=0,this.F=2,this.i=[],this.g=this.h=this.j=0,this.C=this.A=!1,this.B="white",this.u="black",k_(this)}function k_(e){e.i=[];for(var i=0;16>i;i++)e.i.push(D_())}function D_(){for(var e=[],i=0;42>i;i++)e.push(null);return e}function cf(e,i){fC(e)&&(e.i[e.h][e.g]=new sC(i,e.C,e.A,e.u,e.B),e.g++)}function fC(e){var i=e.g<e.m&&0<=e.g;return e.h<e.o&&0<=e.h&&i}C_.prototype.isVisible=function(){return this.l};function jB(e){for(var i=0,o=1;16>o;o++,i++)e.i[i]=e.i[o];for(o=0;1>o;o++,i++)e.i[i]=D_()}function mh(e,i,o){var c=new kr(e.j,i,"");c.textAlign=e.F===0?"left":e.F===1?"right":mo;var h=c.region;switch(e.I&&(h.id+="svc"+e.I),h.id+="win"+e.M,h.height=e.o,h.width=e.m,h.heightUnits=2,h.widthUnits=2,h.viewportAnchorX=e.H,h.viewportAnchorY=e.L,h.viewportAnchorUnits=e.K?js:2,e.G){case 0:h.regionAnchorX=0,h.regionAnchorY=0;break;case 1:h.regionAnchorX=50,h.regionAnchorY=0;break;case 2:h.regionAnchorX=100,h.regionAnchorY=0;break;case 3:h.regionAnchorX=0,h.regionAnchorY=50;break;case 4:h.regionAnchorX=50,h.regionAnchorY=50;break;case 5:h.regionAnchorX=100,h.regionAnchorY=50;break;case 6:h.regionAnchorX=0,h.regionAnchorY=100;break;case 7:h.regionAnchorX=50,h.regionAnchorY=100;break;case 8:h.regionAnchorX=100,h.regionAnchorY=100}return(o=iC(c,"svc"+o,e.i,e.j,i))&&(e.j=i),o}C_.prototype.display=function(){this.l=!0};function qB(){this.i=[],this.h=null,this.g=0}function HB(e,i){i.type===3?(e.g=2*(i.value&63)-1,e.h=[]):e.h&&(0<e.g&&(e.h.push(i),e.g--),e.g===0&&(e.i.push(new Lm(e.h)),e.h=null,e.g=0))}function Lm(e){this.g=0,this.h=e}Lm.prototype.ta=function(){return this.g<this.h.length},Lm.prototype.Ba=function(){return this.g};function Hs(e){if(!e.ta())throw new it(2,2,3e3);return e.h[e.g++]}Lm.prototype.skip=function(e){if(this.g+e>this.h.length)throw new it(2,2,3e3);this.g+=e},Lm.prototype.qh=function(e){if(0>this.g-e)throw new it(2,2,3e3);this.g-=e};function GB(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function VB(e,i,o,c){if(!e.g)return[];if(o==24)return o=Hs(i).value,c=Hs(i).value,o=function(g){return g.map(function(v){return("0"+(v&255).toString(16)).slice(-2)}).join("")}([o,c]),cf(e.g,String.fromCharCode(parseInt(o,16))),[];i=e.g;var h=null;switch(o){case 8:!fC(i)||0>=i.g&&0>=i.h||(0>=i.g?(i.g=i.m-1,i.h--):i.g--,i.i[i.h][i.g]=null);break;case 13:i.isVisible()&&(h=mh(i,c,e.i)),i.h+1>=i.o?jB(i):i.h++,i.g=0;break;case 14:i.isVisible()&&(h=mh(i,c,e.i)),i.i[i.h]=D_(),i.g=0;break;case 12:i.isVisible()&&(h=mh(i,c,e.i)),k_(i),i.h=0,i.g=0}return h?[h]:[]}function $B(e,i,o,c){if(128<=o&&135>=o)c=o&7,e.h[c]&&(e.g=e.h[c]);else{if(o===136){o=Hs(i).value,i=[],o=T(Pm(e,o));for(var h=o.next();!h.done;h=o.next()){if(h=e.h[h.value],h.isVisible()){var g=mh(h,c,e.i);g&&i.push(g)}k_(h)}return i}if(o===137)for(i=Hs(i).value,i=T(Pm(e,i)),o=i.next();!o.done;o=i.next())o=e.h[o.value],o.isVisible()||(o.j=c),o.display();else{if(o===138){for(o=Hs(i).value,i=null,o=T(Pm(e,o)),h=o.next();!h.done;h=o.next())h=e.h[h.value],h.isVisible()&&(i=mh(h,c,e.i)),h.l=!1;return i?[i]:[]}if(o===139){for(o=Hs(i).value,i=null,o=T(Pm(e,o)),h=o.next();!h.done;h=o.next())h=e.h[h.value],h.isVisible()?i=mh(h,c,e.i):h.j=c,h.l=!h.l;return i?[i]:[]}if(o===140)return i=Hs(i).value,hC(e,i,c);if(o===143)return c=hC(e,255,c),pC(e),c;if(o===144)i.skip(1),c=Hs(i).value,e.g&&(e.g.A=0<(c&128),e.g.C=0<(c&64));else if(o===145)c=Hs(i).value,o=Hs(i).value,i.skip(1),e.g&&(i=gC((o&48)>>4,(o&12)>>2,o&3),e.g.B=gC((c&48)>>4,(c&12)>>2,c&3),e.g.u=i);else if(o===146)c=Hs(i).value,i=Hs(i).value,e.g&&(e=e.g,e.h=c&15,e.g=i&63);else if(o===151)i.skip(1),i.skip(1),c=Hs(i).value,i.skip(1),e.g&&(e.g.F=c&3);else if(152<=o&&159>=o){o=(o&15)-8,h=e.h[o]!==null,h||(g=new C_(o,e.i),g.j=c,e.h[o]=g),c=Hs(i).value,g=Hs(i).value;var v=Hs(i).value,E=Hs(i).value,S=Hs(i).value;i=Hs(i).value,h&&(i&7)===0||(i=e.h[o],i.h=0,i.g=0,i.C=!1,i.A=!1,i.B="white",i.u="black"),i=e.h[o],i.l=0<(c&32),i.L=g&127,i.H=v,i.G=(E&240)>>4,i.K=0<(g&128),i.o=(E&15)+1,i.m=(S&63)+1,e.g=e.h[o]}}}return[]}function Pm(e,i){for(var o=[],c=0;8>c;c++)(i&1)===1&&e.h[c]&&o.push(c),i>>=1;return o}function hC(e,i,o){var c=[];i=T(Pm(e,i));for(var h=i.next();!h.done;h=i.next()){h=h.value;var g=e.h[h];g.isVisible()&&(g=mh(g,o,e.i))&&c.push(g),e.h[h]=null}return c}function pC(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function gC(e,i,o){var c={0:0,1:0,2:1,3:1};return e=c[e],i=c[i],o=c[o],KB[e<<2|i<<1|o]}var mC=new Map([[32," "],[33,""],[37,""],[42,""],[44,""],[48,""],[49,""],[50,""],[51,""],[52,""],[53,""],[57,""],[58,""],[60,""],[61,""],[63,""],[118,""],[119,""],[120,""],[121,""],[122,""],[123,""],[124,""],[125,""],[126,""],[127,""]]),KB="black blue green cyan red magenta yellow white".split(" ");function Rp(){this.h=[],this.g=[],this.i=new qB,this.l=0,this.m=new Map([["CC1",new hv(0,0)],["CC2",new hv(0,1)],["CC3",new hv(1,0)],["CC4",new hv(1,1)]]),this.u=this.o=0,this.j=new Map,this.B=!0,this.A=new Set,R_(this)}Rp.prototype.clear=function(){this.l=0,this.h=[],this.g=[];var e=this.i;e.i=[],e.h=[],e.g=0,R_(this),e=T(this.j.values());for(var i=e.next();!i.done;i=e.next())pC(i.value)};function R_(e){e.o=0,e.u=0;for(var i=T(e.m.values()),o=i.next();!o.done;o=i.next())o=o.value,o.h=0,o.g=o.j,o.m=null,Rm(o.i),Rm(o.j),Rm(o.o);e.B=!0}Rp.prototype.extract=function(e,i){if(this.B){for(var o=T(this.m.values()),c=o.next();!c.done;c=o.next())c.value.l=i;this.B=!1}if(e=new Pr(e,0),!(8>e.getLength())&&e.X()===181&&e.na()===49&&e.S()===1195456820&&e.X()===3&&(o=e.X(),(o&64)!==0))for(o&=31,e.skip(1),c=0;c<o;c++){var h=e.X(),g=(h&4)>>2,v=e.X(),E=e.X();g&&(h&=3,h===0||h===1?this.h.push({pts:i,type:h,mb:v,Mb:E,order:this.h.length}):(this.g.push({pts:i,type:h,value:v,order:this.g.length}),this.g.push({pts:i,type:2,value:E,order:this.g.length})))}},Rp.prototype.decode=function(){function e(h,g){return h.pts-g.pts||h.order-g.order}var i=[];this.h.sort(e),this.g.sort(e);for(var o=T(this.h),c=o.next();!c.done;c=o.next())(c=YB(this,c.value))&&i.push(c);for(o=T(this.g),c=o.next();!c.done;c=o.next())HB(this.i,c.value);for(o=T(this.i.i),c=o.next();!c.done;c=o.next())c=WB(this,c.value),i.push.apply(i,k(c));return this.i.i=[],this.h=[],this.g=[],i};function YB(e,i){var o=i.type;if((i.mb&112)===16){var c=i.mb>>3&1;o===0?e.o=c:e.u=c}if(c="CC"+((o<<1|(o?e.u:e.o))+1),o=e.m.get(c),i.mb===255&&i.Mb===255||!i.mb&&!i.Mb||!yC(i.mb)||!yC(i.Mb))return 45<=++e.l&&R_(e),null;e.l=0,i.mb&=127,i.Mb&=127;var h=i.mb;if(1<=h&&15>=h||!i.mb&&!i.Mb)return null;if(h=null,(i.mb&112)===16)e:{if(e.A.add(c),c=i.mb,e=i.Mb,o.m===(c<<8|e))o.m=null;else if(o.m=c<<8|e,(c&240)===16&&(e&192)===64){i=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(c&7)<<1|e>>5&1],c="white",h=!1;var g=null,v=95<e?e-96:e-64;13>=v?c=dC[Math.floor(v/2)]:15>=v?h=!0:g=Math.floor((v-16)/2),e=(e&1)===1,o.h!==4&&(v=o.g,o.h===3&&i!==v.g&&(o=1+i-v.h,aC(v,o,1+v.g-v.h,v.h),bd(v,0,o-1),bd(v,i+1,15-i)),v.g=i,v.m=e,v.j=h,v.l=c,v.u=g,v.o="black")}else if((c&247)===17&&(e&240)===32)o.g.m=!1,o.g.j=!1,o.g.l="white",Dp(o.g,0,32),c=!1,i=dC[(e&14)>>1],i==="white_italics"&&(i="white",c=!0),o.g.m=(e&1)===1,o.g.j=c,o.g.l=i;else if((c&247)===16&&(e&240)===32||(c&247)===23&&(e&255)===45)i="black",(c&7)===0&&(i=zB[(e&14)>>1]),o.g.o=i;else if((c&247)===17&&(e&240)===48)Dp(o.g,1,e);else if((c&246)===18&&(e&224)===32)Dp(o.g,c&1?3:2,e);else{if((c&246)===20&&(e&240)===32){switch(e=i.pts,c=null,i.Mb){case 32:uC(o);break;case 33:o=o.g,o.i[o.g].pop();break;case 37:c=I_(o,2,e);break;case 38:c=I_(o,3,e);break;case 39:c=I_(o,4,e);break;case 40:Dp(o.g,0,32);break;case 41:o.h=2,o.g=o.i,o.g.h=0,o.l=e;break;case 42:Rm(o.o),cC(o);break;case 43:cC(o);break;case 44:i=o.i,c=null,o.h!==4&&(c=fv(i,o.l,e)),bd(i,0,15);break;case 45:i=o.g,o.h!==3?c=null:(c=fv(i,o.l,e),h=i.g-i.h+1,aC(i,h-1,h,i.h),bd(i,0,h-1),bd(i,i.g,15-i.g),o.l=e);break;case 46:bd(o.j,0,15);break;case 47:i=null,o.h!==4&&(i=fv(o.i,o.l,e)),c=o.j,o.j=o.i,o.i=c,uC(o),o.l=e,c=i}h=c;break e}(c==23||c==31)&&33<=e&&35>=e&&(o.g.A=e-32)}h=null}else e=i.Mb,Dp(o.g,0,i.mb),Dp(o.g,0,e);return h}function WB(e,i){var o=[];try{for(;i.ta();){var c=Hs(i).value,h=(c&224)>>5,g=c&31;if(h===7&&g!=0&&(h=Hs(i).value&63),h!=0){e.A.add("svc"+h),e.j.has(h)||e.j.set(h,new GB(h));for(var v=e.j.get(h),E=i.Ba();i.Ba()-E<g;){h=v;var S=i,I=Hs(S),L=I.value,O=I.pts;if(L===16){var V=Hs(S);L=L<<16|V.value}if(0<=L&&31>=L)var W=VB(h,S,L,O);else if(128<=L&&159>=L)W=$B(h,S,L,O);else{if(4096<=L&&4127>=L)h=S,S=L&255,8<=S&&15>=S?h.skip(1):16<=S&&23>=S?h.skip(2):24<=S&&31>=S&&h.skip(3);else if(4224<=L&&4255>=L)h=S,S=L&255,128<=S&&135>=S?h.skip(4):136<=S&&143>=S&&h.skip(5);else if(32<=L&&127>=L)S=L,h.g&&(S===127?cf(h.g,""):cf(h.g,String.fromCharCode(S)));else if(160<=L&&255>=L)h.g&&cf(h.g,String.fromCharCode(L));else if(4128<=L&&4223>=L){if(S=L&255,h.g)if(mC.has(S)){var pe=mC.get(S);cf(h.g,pe)}else cf(h.g,"_")}else 4256<=L&&4351>=L&&h.g&&((L&255)!=160?cf(h.g,"_"):cf(h.g,"[CC]"));W=[]}o.push.apply(o,k(W))}}}}catch(Me){if(Me instanceof it&&Me.code===3e3)Bt("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.");else throw Me}return o}function yC(e){for(var i=0;e;)i^=e&1,e>>=1;return i===1}Rp.prototype.getStreams=function(){return Array.from(this.A)},_e("shaka.cea.CeaDecoder",Rp),Fo=function(){return new Rp};function vC(e){for(var i=[],o=e,c=e=0;c<o.length;)e==2&&o[c]==3?(e=0,o=[].concat(k(o)),o.splice(c,1),o=new Uint8Array(o)):o[c]==0?e++:e=0,c++;for(e=o,c=0;c<e.length;){for(o=0;e[c]==255;)o+=255,c++;o+=e[c++];for(var h=0;e[c]==255;)h+=255,c++;h+=e[c++],o==4&&i.push(e.subarray(c,c+h)),c+=h}return i}function pv(){this.j=new Map,this.i=this.h=0,this.g=L_}pv.prototype.init=function(e){function i(g){g=g.name,gv.has(g)&&(o.g=gv.get(g))}var o=this,c=[],h=[];if(new Ar().box("moov",$i).box("mvex",$i).R("trex",function(g){var v=g.reader;v.skip(4),v.skip(4),g=v.S(),v=v.S(),o.h=g,o.i=v}).box("trak",$i).R("tkhd",function(g){var v=g.reader;g=g.version,g==1?(v.skip(8),v.skip(8)):(v.skip(4),v.skip(4));var E=v.S();g==1?v.skip(8):v.skip(4),v.skip(4),v.skip(8),v.skip(2),v.skip(2),v.skip(2),v.skip(2),v.skip(36),v.na(),v.na(),v.na(),v.na(),c.push(E)}).box("mdia",$i).R("mdhd",function(g){g=hp(g.reader,g.version),h.push(g.timescale)}).box("minf",$i).box("stbl",$i).R("stsd",zu).box("avc1",i).box("avc3",i).box("dvav",i).box("dva1",i).box("hev1",i).box("hvc1",i).box("dvh1",i).box("dvhe",i).box("vvc1",i).box("vvi1",i).box("dvc1",i).box("dvi1",i).box("encv",to).box("sinf",$i).box("frma",function(g){g=b0(g.reader).codec,gv.has(g)&&(o.g=gv.get(g))}).parse(e,!0),!c.length||!h.length||c.length!=h.length)throw new it(2,2,2010);this.g==L_&&kt("Unable to determine bitstream format for CEA parsing!"),c.forEach(function(g,v){o.j.set(g,h[v])})},pv.prototype.parse=function(e){var i=this;if(this.g==L_)return[];var o=[],c=0,h=[];return new Ar().box("moof",function(g){c=g.start,h=[],$i(g)}).box("traf",function(g){h.push({baseMediaDecodeTime:null,ld:i.h,md:i.i,lh:[],timescale:9e4}),$i(g)}).R("trun",function(g){var v=h[h.length-1];g=pp(g.reader,g.version,g.flags),v.lh.push(g)}).R("tfhd",function(g){var v=h[h.length-1];g=$o(g.reader,g.flags),v.ld=g.ld||i.h,v.md=g.md||i.i,g=g.trackId,i.j.has(g)&&(v.timescale=i.j.get(g))}).R("tfdt",function(g){var v=h[h.length-1];g=rf(g.reader,g.version),v.baseMediaDecodeTime=g.baseMediaDecodeTime}).box("mdat",function(g){for(var v=c-g.start-8,E=g.reader.Ba(),S=T(h),I=S.next();!I.done;I=S.next()){if(I=I.value,I.baseMediaDecodeTime===null)throw kt("Unable to find base media decode time for CEA captions!"),new it(2,2,2010);g.reader.seek(E),XB(i,g.reader,I.baseMediaDecodeTime,I.timescale,I.ld,I.md,v,I.lh,o)}}).parse(e,!1),o};function XB(e,i,o,c,h,g,v,E,S){var I=0,L=g,O=E.map(function(pe){return pe.fg});for(O=[].concat.apply([],k(O)),O.length&&(L=O[0].sampleSize||g),i.skip(v+E[0].nf);i.ta();){v=i.S();var V=i.X(),W=null;switch(W=!1,E=1,e.g){case Mm:W=V&31,W=W==6;break;case Nm:E=2,i.skip(1),W=V>>1&63,W=W==39||W==40;break;case Om:E=2,i.skip(1),W=V>>1&63,W=W==23||W==24;break;default:return}if(W)for(V=0,I<O.length&&(V=O[I].ye||0),V=(o+V)/c,E=T(vC(i.Cb(v-E))),W=E.next();!W.done;W=E.next())S.push({packet:W.value,pts:V});else try{i.skip(v-E)}catch{break}L-=v+4,L==0&&(o=I<O.length?o+(O[I].gg||h):o+h,I++,I<O.length?L=O[I].sampleSize||g:L=g)}}_e("shaka.cea.Mp4CeaParser",pv);var L_=0,Mm=1,Nm=2,Om=3,gv=new Map().set("avc1",Mm).set("avc3",Mm).set("dvav",Mm).set("dva1",Mm).set("hev1",Nm).set("hvc1",Nm).set("dvh1",Nm).set("dvhe",Nm).set("vvc1",Om).set("vvi1",Om).set("dvc1",Om).set("dvi1",Om);Yc("video/mp4",function(){return new pv});function mv(){this.g=null}mv.prototype.init=function(){},mv.prototype.parse=function(e){this.g?this.g.clearData():this.g=new Tt;var i=[];if(e=jn(e),!Zn(e))return i;e=this.g.parse(e);var o=e.od(),c=e.be();switch(e=[],o.video){case"avc":e.push(6);break;case"hvc":e.push(39),e.push(40)}if(!e.length)return i;for(o=T(c),c=o.next();!c.done;c=o.next())if(c=c.value,e.includes(c.type)&&c.time!=null)for(var h=T(vC(c.data)),g=h.next();!g.done;g=h.next())i.push({packet:g.value,pts:c.time});return i},_e("shaka.cea.TsCeaParser",mv),Yc("video/mp2t",function(){return new mv});function QB(e){var i=0,o=Ni(e),c=o.getUint32(i,!0);if(c!=e.byteLength)return[];e:{for(e=i+6,i=[];e<o.byteLength-1;){c=o.getUint16(e,!0),e+=2;var h=o.getUint16(e,!0);if(e+=2,(h&1)!=0||h+e>o.byteLength){o=[];break e}var g=jn(o,e,h);i.push({type:c,value:g}),e+=h}o=i}return o}function TC(e){return e=aa(ns(e)),e=QB(e).filter(function(i){return i.type===JB})[0],e?(e=ra(e.value,!0),(e=Cl(e,"WRMHEADER"))?e:null):null}function yv(e){try{var i=TC(e);if(i)e:{for(var o=T(pa(i,"DATA")),c=o.next();!c.done;c=o.next()){var h=c.value;if(h.children)for(var g=T(h.children),v=g.next();!v.done;v=g.next()){var E=v.value;if(E.tagName=="LA_URL"){var S=ns(E);break e}}}S=""}else S="";return S}catch{return""}}var JB=1;function EC(e,i,o){var c=t4(e),h=null;e=[];var g=[],v=null,E=new Set(c.map(function(I){return I.keyId}));E.delete(null);var S="cenc";if(1<E.size)throw new it(2,4,4010);if(!i){if(g=c.filter(function(I){return I.cd=="urn:mpeg:dash:sea:2012"}),1<g.length)throw new it(2,4,4050);g.length&&(v=i4(g[0])),(g=c.find(function(I){return I.cd=="urn:mpeg:dash:mp4protection:2011"}))&&g.encryptionScheme&&(S=g.encryptionScheme),g=c.filter(function(I){return I.cd=="urn:mpeg:dash:mp4protection:2011"?(h=I.init||h,!1):I.cd!="urn:mpeg:dash:sea:2012"}),g.length&&(e=e4(h,S,g,o,E),e.length==0&&(e=[Wa("",S,h)]))}if(c.length&&!v&&(i||!g.length))for(e=[],i=T(Object.values(o)),o=i.next();!o.done;o=i.next())o=o.value,o!="org.w3.clearkey"&&e.push(Wa(o,S,h));if(E=Array.from(E)[0]||null)for(S=T(e),i=S.next();!i.done;i=S.next())for(i=T(i.value.initData),o=i.next();!o.done;o=i.next())o.value.keyId=E;return{Jg:E,Pk:h,drmInfos:e,cf:v,Og:!0}}function ZB(e,i,o,c){var h=EC(e,o,c);if(i.Og)e=i.drmInfos.length==1&&!i.drmInfos[0].keySystem,o=h.drmInfos.length==0,(i.drmInfos.length==0||e&&!o)&&(i.drmInfos=h.drmInfos),i.Og=!1;else if(0<h.drmInfos.length&&(i.drmInfos=i.drmInfos.filter(function(g){return h.drmInfos.some(function(v){return v.keySystem==g.keySystem})}),i.drmInfos.length==0))throw new it(2,4,4008);return h.Jg||i.Jg}function vv(e){var i=Fa(e.node,"https://dashif.org/CPS","Laurl");if(i&&(i=ns(i)))return i;if((i=Fa(e.node,"urn:microsoft:playready","pro"))&&ns(i))return yv(i);if((e=Fa(e.node,"urn:mpeg:cenc:2013","pssh"))&&(e=ns(e))){i=aa(e),e=8,i=Ni(i);var o=i.getUint8(e);return e+=20,0<o&&(e+=4+16*i.getUint32(e)),e=jn(i,e+4),e=ho(e),e=Cl("<pro>"+e+"</pro>"),yv(e)}return""}function e4(e,i,o,c,h){var g=[];o=T(o);for(var v=o.next();!v.done;v=o.next()){v=v.value;var E=c[v.cd];if(E){var S;if((S=Fa(v.node,"urn:microsoft:playready","pro"))&&ns(S)){S=ns(S),S=aa(S);var I=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);S=[{initData:up(S,I,new Set,0),initDataType:"cenc",keyId:v.keyId}]}else S=null;if(I=null,v.cd==="urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e"){I=v;var L=h;if(L.size==0)I=null;else{var O=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]),V=new Uint8Array([]);I=[{initData:up(V,O,L,1),initDataType:"cenc",keyId:I.keyId}]}}S=Wa(E,i,v.init||e||S||I),(E=r4.get(E))&&(S.licenseServerUri=E(v)),g.push(S)}}return g}function t4(e){var i=[];e=T(e);for(var o=e.next();!o.done;o=e.next())(o=n4(o.value))&&i.push(o);return i}function n4(e){var i=e.attributes.schemeIdUri,o=il(e,"urn:mpeg:cenc:2013","default_KID"),c=Vh(e,"urn:mpeg:cenc:2013","pssh").map(ha),h=e.attributes.value;if(!i)return null;if(i=i.toLowerCase(),o&&(o=o.replace(/-/g,"").toLowerCase(),o.includes(" ")))throw new it(2,4,4009);var g=[];try{g=c.map(function(v){return{initDataType:"cenc",initData:aa(v),keyId:null}})}catch{throw new it(2,4,4007)}return{node:e,cd:i,keyId:o,init:0<g.length?g:null,encryptionScheme:h}}function i4(e){if(!l.crypto||!l.crypto.subtle)throw kt("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new it(2,4,4042);var i=Fa(e.node,"urn:mpeg:dash:schema:sea:2012","SegmentEncryption");if(!i)throw new it(2,4,4051);if(i.attributes.schemeIdUri!="urn:mpeg:dash:sea:aes128-cbc:2013")throw new it(2,4,4051);if(i=Fa(e.node,"urn:mpeg:dash:schema:sea:2012","CryptoPeriod"),!i)throw new it(2,4,4051);if(e=i.attributes.IV,i=ys(i.attributes.keyUriTemplate),!e||!i)throw new it(2,4,4051);if(e=oa(e.substr(2)),e.byteLength!=16)throw new it(2,4,4048);return{Xi:i,iv:e}}var r4=new Map().set("com.apple.fps",function(e){if(l.shakaMediaKeysPolyfill==="apple")throw new it(2,4,4054);return(e=Fa(e.node,"https://dashif.org/CPS","Laurl"))&&(e=ns(e))?e:""}).set("com.widevine.alpha",function(e){var i=Fa(e.node,"https://dashif.org/CPS","Laurl");return i&&(i=ns(i))?i:(e=Fa(e.node,"urn:microsoft","laurl"))&&ys(e.attributes.licenseUrl)||""}).set("com.microsoft.playready",vv).set("com.microsoft.playready.recommendation",vv).set("com.microsoft.playready.software",vv).set("com.microsoft.playready.hardware",vv).set("org.w3.clearkey",function(e){var i=Fa(e.node,"https://dashif.org/CPS","Laurl");return i&&(i=ns(i))?i:(e=Fa(e.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&e.attributes.Lic_type==="EME-1.0"&&e&&(e=ns(e))?e:""});function Fm(e,i,o,c,h,g){var v=new Map().set("RepresentationID",i).set("Number",o).set("SubNumber",c).set("Bandwidth",h).set("Time",g);return e.replace(/\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(E,S,I,L){if(E=="$$")return"$";var O=v.get(S);if(O==null)return E;switch(S=="RepresentationID"&&I&&(I=void 0),S=="Time"&&typeof O!="bigint"&&(.2<=Math.abs(O-Math.round(O))&&kt("Calculated $Time$ values must be close to integers"),O=Math.round(O)),L){case void 0:case"d":case"i":case"u":E=O.toString();break;case"o":E=O.toString(8);break;case"x":E=O.toString(16);break;case"X":E=O.toString(16).toUpperCase();break;default:E=O.toString()}return I=l.parseInt(I,10)||1,Array(Math.max(0,I-E.length)+1).join("0")+E})}function bC(e,i){var o=mu(e,i,"timescale"),c=1;o&&(c=kl(o)||1),o=mu(e,i,"duration");var h=(o=kl(o||""))?o/c:null,g=mu(e,i,"startNumber"),v=Number(mu(e,i,"presentationTimeOffset"))||0,E=vs(g||"");if((g==null||E==null)&&(E=1),g=null,i=Lp(e,i,"SegmentTimeline")){i=or(i,"S"),g=c,e=e.ha.duration||1/0;for(var S=E,I=[],L=-v,O=0;O<i.length;++O){var V=i[O],W=i[O+1],pe=Ri(V,"t",vs),Me=Ri(V,"d",vs),De=Ri(V,"r",Zs);if(V=Ri(V,"k",Zs)||0,pe!=null&&(pe-=v),Me){if(pe=pe??L,De=De||0,0>De)if(W){if(W=Ri(W,"t",vs),W==null)break;if(pe>=W)break;De=Math.ceil((W-pe)/Me)-1}else{if(e==1/0)break;if(pe/g>=e)break;De=Math.ceil((e*g-pe)/Me)-1}for(0<I.length&&pe!=L&&(I[I.length-1].end=pe/g),W=0;W<=De;++W)L=pe+Me,I.push({start:pe/g,end:L/g,xg:pe,Jb:V,wj:I.length+S}),pe=L}}g=I}return{timescale:c,He:o,Wa:h,Ld:E,hc:v/c||0,wg:v,timeline:g}}function _C(e,i){return[i(e.J),i(e.ga),i(e.qa)].filter(Ml)}function mu(e,i,o){i=_C(e,i),e=null,i=T(i);for(var c=i.next();!c.done&&!(e=c.value.attributes[o]);c=i.next());return e}function Lp(e,i,o){i=_C(e,i),e=null,i=T(i);for(var c=i.next();!c.done&&!(e=is(c.value,o));c=i.next());return e}function s4(e,i,o,c,h,g){for(var v=il(e,"http://www.w3.org/1999/xlink","href"),E=il(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",S=T(Object.keys(e.attributes)),I=S.next();!I.done;I=S.next()){I=I.value;var L=I.split(":"),O=oc("http://www.w3.org/1999/xlink");L[0]==O&&delete e.attributes[I]}if(5<=g)return yc(new it(2,4,4028));if(E!="onLoad")return yc(new it(2,4,4027));var V=ts([c],[v]);return h.request(0,ws(V,i)).Ha(function(W){if(W=Ru(W.data,e.tagName),!W)return yc(new it(2,4,4001,v));for(e.children=[];W.children.length;){var pe=W.children.shift();e.children.push(pe)}pe=T(Object.keys(W.attributes));for(var Me=pe.next();!Me.done;Me=pe.next())Me=Me.value,e.attributes[Me]=W.attributes[Me];return Tv(e,i,o,V[0],h,g+1)})}function Tv(e,i,o,c,h,g){if(g=g===void 0?0:g,il(e,"http://www.w3.org/1999/xlink","href")){var v=s4(e,i,o,c,h,g);return o&&(v=v.Ha(void 0,function(){return Tv(e,i,o,c,h,g)})),v}v=[];for(var E=T(Gh(e)),S=E.next(),I={};!S.done;I={hd:void 0},S=E.next())I.hd=S.value,il(I.hd,"http://www.w3.org/1999/xlink","href")=="urn:mpeg:dash:resolve-to-zero:2013"?e.children=e.children.filter(function(L){return function(O){return O!==L.hd}}(I)):I.hd.tagName!="SegmentTimeline"&&v.push(Tv(I.hd,i,o,c,h,g));return jg(v).Ha(function(){return e})}function a4(e,i,o,c,h,g,v){var E,S=new Ar().R("sidx",function(I){E=o4(i,c,h,g,v,o,I)});if(e&&S.parse(e),E)return E;throw new it(2,3,3004)}function o4(e,i,o,c,h,g,v){var E=[];v.reader.skip(4);var S=v.reader.S();if(S==0)throw new it(2,3,3005);if(v.version==0)var I=v.reader.S(),L=v.reader.S();else I=v.reader.bd(),L=v.reader.bd();v.reader.skip(2);var O=v.reader.na();for(e=e+v.size+L,L=0;L<O;L++){var V=v.reader.S(),W=(V&2147483648)>>>31;V&=2147483647;var pe=v.reader.S();if(v.reader.skip(4),W==1)throw new it(2,3,3006);E.push(new X(I/S+o,(I+pe)/S+o,function(){return g},e,e+V-1,i,o,c,h)),I+=pe,e+=V}return v.parser.stop(),E}function df(e){this.h=Ni(e),this.g=new Pr(this.h,0)}df.prototype.ta=function(){return this.g.ta()};function _d(e){var i=SC(e);if(7<i.length)throw new it(2,3,3002);var o=0;i=T(i);for(var c=i.next();!c.done;c=i.next())o=256*o+c.value;i=SC(e);e:{c=T(l4);for(var h=c.next();!h.done;h=c.next())if(Nn(i,new Uint8Array(h.value))){c=!0;break e}c=!1}if(c)i=e.h.byteLength-e.g.Ba();else{if(i.length==8&&i[1]&224)throw new it(2,3,3001);for(h=c=0;h<i.length;h++){var g=i[h];c=h==0?g&(1<<8-i.length)-1:256*c+g}i=c}return i=e.g.Ba()+i<=e.h.byteLength?i:e.h.byteLength-e.g.Ba(),c=Ni(e.h,e.g.Ba(),i),e.g.skip(i),new u4(o,c)}function SC(e){var i=e.g.Ba(),o=e.g.X();if(o==0)throw new it(2,3,3002);return o=8-Math.floor(Math.log2(o)),e.g.skip(o-1),jn(e.h,i,o)}var l4=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function u4(e,i){this.id=e,this.g=i}function P_(e){if(8<e.g.byteLength)throw new it(2,3,3002);if(e.g.byteLength==8&&e.g.getUint8(0)&224)throw new it(2,3,3001);for(var i=0,o=0;o<e.g.byteLength;o++){var c=e.g.getUint8(o);i=256*i+c}return i}function c4(e,i,o,c,h,g,v,E,S){function I(){return h}var L=[];e=new df(e.g);for(var O=null,V=null;e.ta();){var W=_d(e);if(W.id==187){var pe=d4(W);pe&&(W=o*pe.Jj,pe=i+pe.nj,O!=null&&L.push(new X(O+v,W+v,I,V,pe-1,g,v,E,S)),O=W,V=pe)}}return O!=null&&L.push(new X(O+v,c+v,I,V,null,g,v,E,S)),L}function d4(e){var i=new df(e.g);if(e=_d(i),e.id!=179)throw new it(2,3,3013);if(e=P_(e),i=_d(i),i.id!=183)throw new it(2,3,3012);i=new df(i.g);for(var o=0;i.ta();){var c=_d(i);if(c.id==241){o=P_(c);break}}return{Jj:e,nj:o}}function xC(e,i,o){if(i=Lp(e,i,"Initialization"),!i)return null;var c=e.J.Ua(),h=i.attributes.sourceURL;h&&(c=ts(c,[ys(h)],e.vb())),h=0;var g=null;return(i=Ri(i,"range",Xc))&&(h=i.start,g=i.end),o=new B(function(){return c},h,g,CC(e),null,null,o,e.ga.encrypted),o.codecs=e.J.codecs,o.mimeType=e.J.mimeType,e.ha&&(o.g=e.ha.start+e.ha.duration),o}function f4(e,i,o){var c=Number(mu(e,Pp,"presentationTimeOffset"))||0,h=mu(e,Pp,"timescale"),g=1;h&&(g=kl(h)||1);var v=c/g||0,E=xC(e,Pp,o);h4(e,E);var S=Oa(e);return{rc:function(){var I=Lp(S,Pp,"RepresentationIndex"),L=S.J.Ua();return I&&(I=ys(I.attributes.sourceURL))&&(L=ts(L,[I],S.vb())),I=wC(S),AC(S,i,E,L,I.start,I.end,v)}}}function AC(e,i,o,c,h,g,v){var E,S,I,L,O,V,W,pe,Me,De,Fe,We,gt,ht,It,ot,st,_t;return Qe(function(xt){if(xt.g==1)return E=e.presentationTimeline,S=!e.Ob||!e.ha.$g,I=e.ha.start,L=e.ha.duration,O=e.J.mimeType.split("/")[1],V=i,W=null,pe=[V(c,h,g,!1),O=="webm"?V(o.N(),o.Sa,o.wa,!0):null],V=null,x(xt,Promise.all(pe),2);if(Me=xt.h,De=Me[0],Fe=Me[1]||null,We=null,gt=I-v,ht=I,It=L?I+L:1/0,O=="mp4")var Ht=a4(De,h,c,o,gt,ht,It);else{Ht=De;var Pt=new df(Fe);if(_d(Pt).id!=440786851)throw new it(2,3,3008);var jt=_d(Pt);if(jt.id!=408125543)throw new it(2,3,3009);Pt=jt.g.byteOffset,jt=new df(jt.g);for(var Gt=null;jt.ta();){var Yt=_d(jt);if(Yt.id==357149030){Gt=Yt;break}}if(!Gt)throw new it(2,3,3010);for(Gt=new df(Gt.g),Yt=1e6,jt=null;Gt.ta();){var Zt=_d(Gt);if(Zt.id==2807729)Yt=P_(Zt);else if(Zt.id==17545)if(Zt.g.byteLength==4)jt=Zt.g.getFloat32(0);else if(Zt.g.byteLength==8)jt=Zt.g.getFloat64(0);else throw new it(2,3,3003)}if(jt==null)throw new it(2,3,3011);if(Gt=Yt/1e9,jt*=Gt,Ht=_d(new df(Ht)),Ht.id!=475249515)throw new it(2,3,3007);Ht=c4(Ht,Pt,Gt,jt,c,o,gt,ht,It)}for(We=Ht,ot=T(We),st=ot.next();!st.done;st=ot.next())_t=st.value,_t.codecs=e.J.codecs,_t.mimeType=e.J.mimeType,_t.bandwidth=e.bandwidth;return E.Ed(We),W=new pr(We),S&&W.Oc(ht,It,!0),xt.return(W)})}function Pp(e){return e.dd}function wC(e){var i=Lp(e,Pp,"RepresentationIndex");return e=mu(e,Pp,"indexRange"),e=Xc(e||""),i&&(e=Ri(i,"range",Xc,e)),e}function h4(e,i){if(IC(e,i),!wC(e))throw new it(2,4,4002)}function IC(e,i){var o=e.J.mimeType.split("/")[1];if(e.J.contentType!=zi&&o!="mp4"&&o!="webm")throw new it(2,4,4006);if(o=="webm"&&!i)throw new it(2,4,4005)}function CC(e){var i=e.J;return{bandwidth:e.bandwidth,audioSamplingRate:i.audioSamplingRate,codecs:i.codecs,contentType:i.contentType,frameRate:i.frameRate||null,height:i.height||null,mimeType:i.mimeType,channelsCount:i.oe,pixelAspectRatio:i.pixelAspectRatio||null,width:i.width||null,label:e.ga.label||null,roles:e.roles||null,language:e.ga.language||null}}function p4(e,i,o){var c=xC(e,kC,o),h=g4(e);if(!h.Wa&&!h.timeline&&1<h.Xc.length)throw new it(2,4,4002);if(!h.Wa&&!e.ha.duration&&!h.timeline&&h.Xc.length==1)throw new it(2,4,4002);if(h.timeline&&h.timeline.length==0)throw new it(2,4,4002);var g=null,v=null;e.qa.id&&e.J.id&&(v=i.get(e.qa.id+","+e.J.id))&&(g=v.segmentIndex);var E=m4(e.ha.start,e.ha.duration,e.J.Ua,h,c,o,e.J.mimeType,e.J.codecs,e.bandwidth,e.vb);return i=!g,g?g.Bd(E,e.presentationTimeline.pb()):g=new pr(E),e.presentationTimeline.Ed(E),e.Ob&&e.ha.$g||g.Oc(e.ha.start,e.ha.duration?e.ha.start+e.ha.duration:1/0,i),v&&(v.segmentIndex=g),{rc:function(){return g&&g.getNumReferences()!=0||g.ke(E),Promise.resolve(g)}}}function kC(e){return e.Zb}function g4(e){var i=y4(e);e=bC(e,kC);var o=e.Ld;o==0&&(o=1);var c=0;return e.Wa?c=e.Wa*(o-1):e.timeline&&0<e.timeline.length&&(c=e.timeline[0].start),{Wa:e.Wa,startTime:c,Ld:o,hc:e.hc,timeline:e.timeline,Xc:i}}function m4(e,i,o,c,h,g,v,E,S,I){var L=c.Xc.length;c.timeline&&c.timeline.length!=c.Xc.length&&(L=Math.min(c.timeline.length,c.Xc.length));for(var O=e-c.hc,V=i?e+i:1/0,W=[],pe=c.startTime,Me={},De=0;De<L;Me={Je:void 0,ze:void 0},De++){Me.ze=c.Xc[De];var Fe=pe;pe=void 0,pe=c.Wa!=null?Fe+c.Wa:c.timeline?c.timeline[De].end:Fe+i,Me.Je=null,Me=new X(e+Fe,e+pe,function(We){return function(){return We.Je==null&&(We.Je=ts(o(),[We.ze.cj],I())),We.Je}}(Me),Me.ze.start,Me.ze.end,h,O,e,V,[],"",null,null,$,g),Me.codecs=E,Me.mimeType=v,Me.bandwidth=S,W.push(Me)}return W}function y4(e){return[e.J.Zb,e.ga.Zb,e.qa.Zb].filter(Ml).map(function(i){return or(i,"SegmentURL")}).reduce(function(i,o){return 0<i.length?i:o}).map(function(i){i.attributes.indexRange&&!e.Lf&&(e.Lf=!0);var o=ys(i.attributes.media);return i=Ri(i,"mediaRange",Xc,{start:0,end:null}),{cj:o,start:i.start,end:i.end}})}function DC(e,i,o,c,h,g,v,E,S){S||e.J.de||(e.J.de=mu(e,ff,"initialization"));var I=e.J.de?b4(e,v):null,L=v4(e);T4(L);var O=Oa(e);if(L.vd)return IC(e,I),{rc:function(){var Me=Fm(L.vd,O.J.originalId,null,null,O.bandwidth||null,null);return Me=ts(O.J.Ua(),[Me]),AC(O,i,I,Me,0,null,L.hc)}};if(L.Wa)return c||e.ga.contentType==="image"||e.ga.contentType==="text"||(o=e.ha.start,c=e.qa.id,S=e.ha.duration,c=(c=c!=null&&g.get(c)||S)?o+c:1/0,e.presentationTimeline.Tf(L.Wa),e.presentationTimeline.jh(o,c)),{rc:function(){return E4(O,L,h,I,g,v,E,e.J.Ae)}};var V=null;c=c=null,e.qa.id&&e.J.id&&(c=e.qa.id+","+e.J.id,c=o.get(c))&&(V=c.segmentIndex);var W=e.ha.start,pe=e.ha.duration?W+e.ha.duration:1/0;return V?(o=V,RC(o,L,W,pe,I),o.Oa(e.presentationTimeline.pb())):V=new Ev(L,e.J.originalId,e.bandwidth,e.J.Ua,e.vb,W,pe,I,v,e.J.Ae),L.timeline&&e.ga.contentType!=="image"&&e.ga.contentType!=="text"&&e.presentationTimeline.kh(V.h?V.h.timeline:[],W),c&&e.Ob&&(c.segmentIndex=V),{rc:function(){return V instanceof Ev&&V.getNumReferences()==0&&RC(V,L,W,pe,I),Promise.resolve(V)}}}function ff(e){return e.ic}function v4(e){var i=bC(e,ff),o=mu(e,ff,"media"),c=mu(e,ff,"index"),h=mu(e,ff,"k"),g=0;return h&&(g=parseInt(h,10)),{He:i.He,Wa:i.Wa,timescale:i.timescale,Ld:i.Ld,hc:i.hc,wg:i.wg,timeline:i.timeline,ec:o&&ys(o),vd:c,mimeType:e.J.mimeType,codecs:e.J.codecs,bandwidth:e.bandwidth,dj:g}}function T4(e){var i=e.vd?1:0;if(i+=e.timeline?1:0,i+=e.Wa?1:0,i==0)throw new it(2,4,4002);if(i!=1&&(e.vd&&(e.timeline=null),e.He=null,e.Wa=null),!e.vd&&!e.ec)throw new it(2,4,4002)}function E4(e,i,o,c,h,g,v,E){function S(jt){var Gt=jt-De,Yt=Gt*Me,Zt=i.He,Xt=Gt*Zt;"BigInt"in l&&Xt>Number.MAX_SAFE_INTEGER&&(Xt=BigInt(Gt)*BigInt(Zt)),Yt+=V,Gt=Yt+Me,Zt=Math.min(Gt,L());var En=[],Wn=i.dj;if(Wn)for(var Di=(Zt-Yt)/Wn,yi={},yr=0;yr<Wn;yi={Eh:void 0},yr++){var Ji=Yt+Di*yr,Vi=Ji+Di;yi.Eh=yr+1,yi=new X(Ji,Vi,function(Wi){return function(){var fr=Fm(Fe,gt,jt,Wi.Eh,We,Xt);return ts(ht(),[fr],It())}}(yi),0,null,c,ot,V,L(),[],"",null,null,$,g),yi.codecs=e.J.codecs,yi.mimeType=e.J.mimeType,E==0?0<yr&&yi.Vc():yr%E!=0&&yi.Vc(),En.push(yi)}return Yt=new X(Yt,Zt,function(){if(Wn)return[];var Wi=Fm(Fe,gt,jt,null,We,Xt);return ts(ht(),[Wi],It())},0,null,c,ot,V,L(),En,"",null,null,$,g,0<En.length),Yt.codecs=e.J.codecs,Yt.mimeType=e.J.mimeType,Yt.bandwidth=e.bandwidth,Yt.j=Gt,Yt}function I(){var jt=[Math.max(O.pb(),V),Math.min(O.cc(),L())].map(function(Gt){return Gt-V});return jt=[Math.ceil(jt[0]/Me),Math.ceil(jt[1]/Me)-1],e.J.cb&&jt[1]++,jt.map(function(Gt){return Gt+De})}function L(){var jt=W!=null&&h.get(W)||pe;return jt?V+jt:1/0}var O=e.presentationTimeline,V=e.ha.start,W=e.qa.id,pe=e.ha.duration,Me=i.Wa,De=i.Ld,Fe=i.ec,We=e.bandwidth||null,gt=e.J.id,ht=e.J.Ua,It=e.vb,ot=V-i.hc,st=I();o=e.Ob?Math.max(st[0],st[1]-o+1):st[0],v=v||st[1],st=[];for(var _t=o;_t<=v;++_t){var xt=S(_t);st.push(xt)}var Ht=new pr(st);if(st=O.cc()<L(),_t=O.U(),st||_t){var Pt=Math.max(o,v+1);o=Me,e.J.cb&&(o=.1),Ht.Ie(o,function(){var jt=O.pb();Ht.Oa(jt);var Gt=T(I());Gt.next(),Gt=Gt.next().value;for(var Yt=[];Pt<=Gt;){var Zt=S(Pt);Yt.push(Zt),Pt++}return jt>L()&&!Yt.length?null:Yt})}return Promise.resolve(Ht)}function b4(e,i){var o=e.J.de;if(o||(o=mu(e,ff,"initialization")),!o)return null;o=ys(o);var c=e.J.originalId,h=e.bandwidth||null,g=e.J.Ua,v=e.vb;return i=new B(function(){var E=Fm(o,c,null,null,h,null);return ts(g(),[E],v())},0,null,CC(e),null,null,i,e.ga.encrypted),i.codecs=e.J.codecs,i.mimeType=e.J.mimeType,e.ha&&(i.g=e.ha.start+e.ha.duration),i}function Ev(e,i,o,c,h,g,v,E,S,I){pr.call(this,[]),this.h=e,this.F=i,this.B=o,this.C=c,this.H=h,this.j=g,this.l=v,this.u=E,this.A=S,this.G=I,M_(this)}j(Ev,pr),p=Ev.prototype,p.getNumReferences=function(){return this.h?this.h.timeline.length:0},p.release=function(){pr.prototype.release.call(this),this.h=null},p.Oa=function(e){if(this.h){for(var i=0,o=this.h.timeline,c=0;c<o.length&&o[c].end+this.j<=e;c+=1)i+=1;0<i&&(this.h.timeline=o.slice(i),this.g.length>=i&&(this.g=this.g.slice(i)),this.i+=i,this.getNumReferences()===0&&this.release())}};function RC(e,i,o,c,h){if(_4(e,h),e.h){if(o=e.h.timeline,e.h.ec!==i.ec&&(e.h.ec=i.ec),o.length){var g=o[o.length-1];i=i.timeline.filter(function(v){return v.end>g.end})}else i=i.timeline.slice();0<i.length&&e.h.timeline.push.apply(e.h.timeline,k(i)),e.l!==c&&(e.l=c)}else e.h=i,e.j=o,e.l=c;M_(e)}function _4(e,i){if(e.u!==i){e.u=i,e=T(e.g);for(var o=e.next();!o.done;o=e.next())(o=o.value)&&q(o,i)}}function M_(e){if(e.h&&!e.o){for(var i=[],o=T(e.h.timeline),c=o.next();!c.done;c=o.next())c=c.value,c.start>=e.l||0>=c.end||i.push(c);e.h.timeline=i,e.Oa(e.j)}}p.find=function(e){if(this.h&&this.h.timeline&&this.h.timeline.length&&e<this.h.timeline[0].start+this.j)return this.i;if(!this.h)return null;var i=this.h.timeline;if(e<this.j||e>=this.l)return null;for(var o=i.length-1,c=0;c<i.length;c++){var h=i[c],g=h.start+this.j;if(h=c<o?i[c+1].start+this.j:this.l===1/0?h.end+this.j:this.l,e>=g&&e<h)return c+this.i}return null},p.get=function(e){var i=this;if(e-=this.i,0>e||e>=this.getNumReferences()||!this.h)return null;var o=this.g[e];if(!o){var c=this.h.timeline[e],h=c.wj,g=c.xg+this.h.wg;o=this.j-this.h.hc;var v=this.j+c.end,E=v;e===this.getNumReferences()-1&&this.l!==1/0&&(E=this.l);for(var S=this.h.codecs,I=this.h.mimeType,L=this.h.bandwidth,O=[],V=(c.end-c.start)/c.Jb,W={},pe=0;pe<c.Jb;W={Ke:void 0,Fh:void 0},pe++){var Me=c.start+V*pe,De=Me+V;W.Fh=pe+1,W.Ke=null,W=new X(this.j+Me,this.j+De,function(Fe){return function(){return i.h?(Fe.Ke==null&&(Fe.Ke=LC(i.h.ec,i.F,h,i.B,g,Fe.Fh,i.C,i.H)),Fe.Ke):[]}}(W),0,null,this.u,o,this.j,this.l,[],"",null,null,$,this.A),W.codecs=S,W.mimeType=I,W.bandwidth=L,this.G==0?0<pe&&W.Vc():pe%this.G!=0&&W.Vc(),O.push(W)}o=new X(this.j+c.start,E,function(){return 0<c.Jb||!i.h?[]:LC(i.h.ec,i.F,h,i.B,g,null,i.C,i.H)},0,null,this.u,o,this.j,this.l,O,"",null,null,$,this.A,0<c.Jb),o.codecs=S,o.mimeType=I,o.j=v,o.bandwidth=L,this.g[e]=o}return o},p.Eb=function(e){M_(this);for(var i=0;i<this.getNumReferences();i++){var o=this.get(i+this.i);o&&e(o)}};function LC(e,i,o,c,h,g,v,E){return e=Fm(e,i,o,g,c||null,h),ts(v(),[e],E()).map(function(S){return S.toString()})}function Mp(e){this.o=null,this.A=e,this.G=new Ho,this.i=[],this.h=null,this.m=[],this.B=null,this.F=[],this.C=300,this.l=new Map,this.j=new Map,this.g=null,this.u="UNKNOWN"}Mp.prototype.configure=function(e){this.o=e},Mp.prototype.destroy=function(){return this.A=this.o=null,this.i=[],this.h=null,this.m=[],this.F=[],this.l.clear(),this.g!=null&&(this.g.stop(),this.g=null),this.G.destroy()},Mp.prototype.setManifestType=function(e){this.u=e};function Um(e,i){var o,c,h,g,v,E,S;return Qe(function(I){if(I.g==1)return o=ts(e.i,[S4(e,i)]),c=ws(o,e.o.retryParameters),h=e.A.networkingEngine.request(8,c),du(e.G,h),$e(I,2),x(I,h.promise,4);if(I.g!=2)return g=I.h,v=Er(g.data),E=JSON.parse(v),E.VERSION==1&&x4(e,E,g.uri),lt(I,0);if((S=et(I))&&S.code==7001)return I.return();e.g!=null&&(e.g.stop(),e.g=null),e.g=new Li(function(){Um(e,i)}),e.g.da(e.C),ue(I)})}function S4(e,i){if(!e.m.length)return i;i=new vn(i);var o=e.B||e.m[0],c=Math.round(e.A.getBandwidthEstimate()),h=i.g;return e.u=="DASH"?(h.add("_DASH_pathway",o),h.add("_DASH_throughput",String(c))):e.u=="HLS"&&(h.add("_HLS_pathway",o),h.add("_HLS_throughput",String(c))),Wt(h)&&Ne(i,h),i.toString()}function x4(e,i,o){e.g!=null&&(e.g.stop(),e.g=null);var c=i["RELOAD-URI"]||o;e.g=new Li(function(){Um(e,c)}),(o=i.TTL)&&(e.C=o),e.g.da(e.C),e.m=i["PATHWAY-PRIORITY"]||[],e.F=i["PATHWAY-CLONES"]||[]}function Np(e,i,o,c){var h=e.l.get(i);h||(h=new Map),h.set(o,c),e.l.set(i,h)}Mp.prototype.banLocation=function(e){this.j.set(e,Date.now()+6e4)};function Bm(e,i,o){o=o===void 0?!1:o,i=e.l.get(i)||new Map;for(var c=[],h=T(e.m),g=h.next(),v={};!g.done;v={Zc:void 0},g=h.next())if(v.Zc=g.value,g=i.get(v.Zc))c.push({Yf:v.Zc,location:g});else if(g=e.F.find(function(S){return function(I){return I.ek==S.Zc}}(v))){var E=i.get(g["BASE-ID"]);E&&(g["URI-REPLACEMENT"].Oh?(E=new vn(E),ei(E,g["URI-REPLACEMENT"].Oh),c.push({Yf:v.Zc,location:E.toString()})):c.push({Yf:v.Zc,location:E}))}for(h=Date.now(),v=T(e.j.keys()),g=v.next();!g.done;g=v.next())g=g.value,E=e.j.get(g),h>E&&e.j.delete(g);if(c=c.filter(function(S){for(var I=T(e.j.keys()),L=I.next();!L.done;L=I.next())if(L.value.includes(new vn(S.location).nb))return!1;return!0}),c.length&&(e.B=c[0].Yf),c=c.map(function(S){return S.location}),!c.length&&e.h)for(h=T(e.h.split(",")),v=h.next();!v.done;v=h.next())(v=i.get(v.value))&&(e.B=e.h,c.push(v));if(!c.length)for(i=T(i.values()),h=i.next();!h.done;h=i.next())c.push(h.value);return o?c:ts(e.i,c)}function Ba(){this.l=[],this.h=[],this.g=[],this.j=[],this.i=[],this.u=this.o=!1,this.m=new Set}p=Ba.prototype,p.release=function(){for(var e=T(this.h.concat(this.g,this.j,this.i)),i=e.next();!i.done;i=e.next())i=i.value,i.segmentIndex&&i.segmentIndex.release();this.h=[],this.g=[],this.j=[],this.i=[],this.l=[],this.u=this.o=!1,this.m.clear()},p.Ki=function(){return this.l},p.Jf=function(){return this.j.slice()},p.oi=function(){return this.i},p.Kg=function(e,i){if(e){if(e.type=="audio")for(var o=T(this.h),c=o.next();!c.done;c=o.next())c=c.value,c.matchedStreams=c.matchedStreams.filter(function(h){return h!==e});else if(e.type=="video")for(o=T(this.g),c=o.next();!c.done;c=o.next())c=c.value,c.matchedStreams=c.matchedStreams.filter(function(h){return h!==e}),c.trickModeVideo&&(c.trickModeVideo.matchedStreams=c.trickModeVideo.matchedStreams.filter(function(h){return h!==e})),c.dependencyStream&&(c.dependencyStream.matchedStreams=c.dependencyStream.matchedStreams.filter(function(h){return h!==e}));else if(e.type==zi)for(o=T(this.j),c=o.next();!c.done;c=o.next())c=c.value,c.matchedStreams=c.matchedStreams.filter(function(h){return h!==e});else if(e.type=="image")for(o=T(this.i),c=o.next();!c.done;c=o.next())c=c.value,c.matchedStreams=c.matchedStreams.filter(function(h){return h!==e});e.segmentIndex&&e.closeSegmentIndex(),this.m.delete(i)}};function PC(e,i){var o=[],c=[],h=[],g=[];e=T(e);for(var v=e.next();!v.done;v=e.next()){var E=v.value;v=new Map(E.audioStreams.map(function(O){return[U_(O),O]}));var S=new Map(E.videoStreams.map(function(O){return[F_(O),O]})),I=new Map(E.textStreams.map(function(O){return[qm(O),O]}));if(E=new Map(E.imageStreams.map(function(O){return[Hm(O),O]})),i){var L=BC(zi);I.set(qm(L),L),L=BC("image"),E.set(Hm(L),L)}o.push(v),c.push(S),h.push(I),g.push(E)}return{Dg:o,Mh:c,Ih:h,Yg:g}}p.gf=function(e,i,o){o=o===void 0?!1:o;var c=this,h,g,v,E,S,I,L,O,V,W,pe,Me,De,Fe,We,gt,ht,It,ot,st,_t,xt,Ht,Pt,jt,Gt,Yt,Zt,Xt,En,Wn,Di;return Qe(function(yi){if(yi.g==1){if(h=ds,!i&&e.length==1)return g=PC(e,!1),v=g.Dg,E=g.Mh,S=g.Ih,I=g.Yg,c.h=Array.from(v[0].values()),c.g=Array.from(E[0].values()),c.j=Array.from(S[0].values()),c.i=Array.from(I[0].values()),yi.s(2);for(L=o?c.m.size:0,O=-1,V=0;V<e.length;V++)W=e[V],c.m.has(W.id)||(c.m.add(W.id),O==-1&&(O=V));return O==-1?yi.return():(pe=PC(e,!0),Me=pe.Dg,De=pe.Mh,Fe=pe.Ih,We=pe.Yg,x(yi,Promise.all([hf(c,c.h,Me,O,Op,pf,L),hf(c,c.g,De,O,Op,pf,L),hf(c,c.j,Fe,O,Op,pf,L),hf(c,c.i,We,O,Op,pf,L)]),2))}if(gt=0,ht=[],c.g.length&&c.h.length)for(Pt=T(c.h),jt=Pt.next();!jt.done;jt=Pt.next())for(Gt=jt.value,Yt=T(c.g),Zt=Yt.next();!Zt.done;Zt=Yt.next())Xt=Zt.value,En=Xs(Gt.drmInfos,Xt.drmInfos),Gt.drmInfos.length&&Xt.drmInfos.length&&!En.length||(Wn=(Gt.bandwidth||0)+(Xt.bandwidth||0),Gt.dependencyStream&&(Wn+=Gt.dependencyStream.bandwidth||0),Xt.dependencyStream&&(Wn+=Xt.dependencyStream.bandwidth||0),Di=gt++,ht.push({id:Di,language:Gt.language,disabledUntilTime:0,primary:Gt.primary,audio:Gt,video:Xt,bandwidth:Wn,drmInfos:En,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(It=c.g.length?c.g:c.h,ot=T(It),st=ot.next();!st.done;st=ot.next())_t=st.value,xt=gt++,Ht=_t.bandwidth||0,_t.dependencyStream&&(Ht+=_t.dependencyStream.bandwidth||0),ht.push({id:xt,language:_t.language,disabledUntilTime:0,primary:_t.primary,audio:_t.type==h.V?_t:null,video:_t.type==h.la?_t:null,bandwidth:Ht,drmInfos:_t.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});c.l=ht,ue(yi)})};function MC(e){var i,o,c,h,g,v,E,S,I,L,O,V,W,pe,Me,De,Fe,We,gt,ht,It,ot,st,_t,xt,Ht,Pt,jt,Gt,Yt;return Qe(function(Zt){switch(Zt.g){case 1:if(i=ds,e.length==1)return Zt.return(e[0]);for(o=e.map(function(Xt){return new Map(Xt.filter(function(En){return En.type===i.V}).map(function(En){return[U_(En),En]}))}),c=e.map(function(Xt){return new Map(Xt.filter(function(En){return En.type===i.la}).map(function(En){return[F_(En),En]}))}),h=e.map(function(Xt){return new Map(Xt.filter(function(En){return En.type===i.za}).map(function(En){return[qm(En),En]}))}),g=e.map(function(Xt){return new Map(Xt.filter(function(En){return En.type===i.$e}).map(function(En){return[Hm(En),En]}))}),v=T(h),E=v.next();!E.done;E=v.next())S=E.value,I=UC(i.za),S.set(qm(I),I);for(L=T(g),O=L.next();!O.done;O=L.next())V=O.value,W=UC(i.$e),V.set(Hm(W),W);return pe=new Ba,x(Zt,hf(pe,[],o,0,bv,_v,0),2);case 2:return Me=Zt.h,x(Zt,hf(pe,[],c,0,bv,_v,0),3);case 3:return De=Zt.h,x(Zt,hf(pe,[],h,0,bv,_v,0),4);case 4:return Fe=Zt.h,x(Zt,hf(pe,[],g,0,bv,_v,0),5);case 5:if(We=Zt.h,gt=0,De.length&&Me.length)for(_t=T(Me),xt=_t.next();!xt.done;xt=_t.next())for(Ht=xt.value,Pt=T(De),jt=Pt.next();!jt.done;jt=Pt.next())Gt=jt.value,Yt=gt++,Gt.variantIds.push(Yt),Ht.variantIds.push(Yt);else for(ht=De.concat(Me),It=T(ht),ot=It.next();!ot.done;ot=It.next())st=ot.value,st.variantIds=[gt++];return Zt.return(De.concat(Me).concat(Fe).concat(We))}})}function hf(e,i,o,c,h,g,v){var E,S,I,L,O,V,W,pe,Me,De,Fe,We,gt,ht,It,ot,st,_t,xt;return Qe(function(Ht){switch(Ht.g){case 1:for(E=[],S=0;S<o.length;S++)S>=c?E.push(new Set(o[S].values())):E.push(new Set);I=T(i),L=I.next();case 2:if(L.done){Ht.s(4);break}return O=L.value,x(Ht,A4(e,O,o,c,g,E,v),5);case 5:if(V=Ht.h,!V)throw new it(2,4,4037);L=I.next(),Ht.s(2);break;case 4:for(W=T(E),pe=W.next();!pe.done;pe=W.next())for(Me=pe.value,De=T(Me),Fe=De.next();!Fe.done;Fe=De.next())We=Fe.value,(gt=w4(e,We,o,h,g,E))&&i.push(gt);for(ht=T(E),It=ht.next();!It.done;It=ht.next())for(ot=It.value,st=T(ot),_t=st.next(),xt={};!_t.done;xt={ng:void 0},_t=st.next())if(xt.ng=_t.value,!O_(xt.ng)&&i.some(function(Pt){return function(jt){return N_(e,Pt.ng,jt)}}(xt)))throw new it(2,4,4037);return Ht.return(i)}})}function A4(e,i,o,c,h,g,v){return Qe(function(E){return E.g==1?(FC(e,o,i,0<v),i.matchedStreams?i.segmentIndex?x(E,NC(i,c+v),2):E.s(2):E.return(!1)):(OC(i,c,h,g,v),E.return(!0))})}function NC(e,i){var o,c,h,g,v,E;return Qe(function(S){if(S.g==1){for(o=[],c=e.matchedStreams,h=i;h<c.length;h++)g=c[h],o.push(g.createSegmentIndex()),g.trickModeVideo&&!g.trickModeVideo.segmentIndex&&o.push(g.trickModeVideo.createSegmentIndex()),g.dependencyStream&&!g.dependencyStream.segmentIndex&&o.push(g.dependencyStream.createSegmentIndex());return x(S,Promise.all(o),2)}if(e.segmentIndex instanceof rs)for(v=i;v<c.length;v++)E=c[v],E.segmentIndex&&e.segmentIndex.h.push(E.segmentIndex);ue(S)})}function w4(e,i,o,c,h,g){if(O_(i))return null;var v=c(i);return FC(e,o,v),v.createSegmentIndex&&(v.createSegmentIndex=function(){return Qe(function(E){return v.segmentIndex?E.s(0):(v.segmentIndex=new rs,x(E,NC(v,0),0))})}),!v.matchedStreams||!v.matchedStreams.length?null:(OC(v,0,h,g,0),v)}function OC(e,i,o,c,h){var g=e.matchedStreams;for(i+=h;i<g.length;i++){var v=g[i];o(e,v);var E=!0;if(e.type=="audio"&&Nl(e.language,v.language)==0&&(E=!1),E&&(c[i-h].delete(v),v.fullMimeTypes))for(v=T(v.fullMimeTypes.values()),E=v.next();!E.done;E=v.next())e.fullMimeTypes.add(E.value)}}function Op(e){var i=Object.assign({},e);return i.originalId=null,i.createSegmentIndex=function(){return Promise.resolve()},i.closeSegmentIndex=function(){if(i.segmentIndex&&(i.segmentIndex.release(),i.segmentIndex=null),i.matchedStreams)for(var o=T(i.matchedStreams),c=o.next();!c.done;c=o.next())c=c.value,c.segmentIndex&&(c.segmentIndex.release(),c.segmentIndex=null)},i.roles=i.roles.slice(),i.segmentIndex=null,i.emsgSchemeIdUris=[],i.keyIds=new Set(e.keyIds),i.closedCaptions=e.closedCaptions?new Map(e.closedCaptions):null,i.trickModeVideo=null,i.dependencyStream=null,i}function bv(e){var i=Object.assign({},e);return i.roles=i.roles.slice(),i.keyIds=new Set(e.keyIds),i.segments=[],i.variantIds=[],i.closedCaptions=e.closedCaptions?new Map(e.closedCaptions):null,i}function pf(e,i){function o(v,E){v||(v=[]),E=T(E);for(var S=E.next();!S.done;S=E.next())S=S.value,v.includes(S)||v.push(S);return v}e.roles=o(e.roles,i.roles),i.emsgSchemeIdUris&&(e.emsgSchemeIdUris=o(e.emsgSchemeIdUris,i.emsgSchemeIdUris));for(var c=T(i.keyIds),h=c.next();!h.done;h=c.next())e.keyIds.add(h.value);if(e.originalId==null?e.originalId=i.originalId:(c=i.originalId||"")&&!e.originalId.endsWith(c)&&(e.originalId+=","+c),c=Xs(e.drmInfos,i.drmInfos),i.drmInfos.length&&e.drmInfos.length&&!c.length)throw new it(2,4,4038);if(e.drmInfos=c,e.encrypted=e.encrypted||i.encrypted,i.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),c=T(i.closedCaptions),h=c.next();!h.done;h=c.next()){var g=T(h.value);h=g.next().value,g=g.next().value,e.closedCaptions.set(h,g)}e.bandwidth&&i.bandwidth&&(e.bandwidth=Math.max(e.bandwidth,i.bandwidth)),i.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=Op(i.trickModeVideo),e.trickModeVideo.matchedStreams=[],e.trickModeVideo.createSegmentIndex=function(){if(e.trickModeVideo.segmentIndex)return Promise.resolve();for(var v=new rs,E=T(e.trickModeVideo.matchedStreams),S=E.next();!S.done;S=E.next())v.h.push(S.value.segmentIndex);return e.trickModeVideo.segmentIndex=v,Promise.resolve()}),e.trickModeVideo.matchedStreams.push(i.trickModeVideo),pf(e.trickModeVideo,i.trickModeVideo)):e.trickModeVideo&&(e.trickModeVideo.matchedStreams.push(i),pf(e.trickModeVideo,i)),i.dependencyStream?(e.dependencyStream||(e.dependencyStream=Op(i.dependencyStream),e.dependencyStream.matchedStreams=[],e.dependencyStream.createSegmentIndex=function(){if(e.dependencyStream.segmentIndex)return Promise.resolve();for(var v=new rs,E=T(e.dependencyStream.matchedStreams),S=E.next();!S.done;S=E.next())v.h.push(S.value.segmentIndex);return e.dependencyStream.segmentIndex=v,Promise.resolve()}),e.dependencyStream.matchedStreams.push(i.dependencyStream),pf(e.dependencyStream,i.dependencyStream)):e.dependencyStream&&(e.dependencyStream.matchedStreams.push(i),pf(e.dependencyStream,i))}function _v(e,i){var o=e.roles;o||(o=[]);for(var c=T(i.roles),h=c.next();!h.done;h=c.next())h=h.value,o.includes(h)||o.push(h);for(e.roles=o,o=T(i.keyIds),c=o.next();!c.done;c=o.next())e.keyIds.add(c.value);if(e.encrypted=e.encrypted&&i.encrypted,e.segments.push.apply(e.segments,k(i.segments)),i.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),i=T(i.closedCaptions),o=i.next();!o.done;o=i.next())c=T(o.value),o=c.next().value,c=c.next().value,e.closedCaptions.set(o,c)}function FC(e,i,o,c){c=c!==void 0&&c?o.matchedStreams:[],i=T(i);for(var h=i.next();!h.done;h=i.next()){if(h=I4(e,h.value,o),!h)return;c.push(h)}o.matchedStreams=c}function I4(e,i,o){var c={audio:U_,video:F_,text:qm,image:Hm}[o.type],h=null,g=c(o);if(i.has(g))h=i.get(g);else{g={audio:function(I,L){return N_(e,I,L)},video:function(I,L){return N_(e,I,L)},text:C4,image:k4}[o.type];for(var v={audio:D4,video:R4,text:L4,image:P4}[o.type],E=T(i.values()),S=E.next();!S.done;S=E.next())S=S.value,!g(o,S)||o.fastSwitching!=S.fastSwitching||h&&!v(o,h,S)||(h=S)}return e.u&&!O_(h)&&i.delete(c(h)),h}function zm(e,i){return e.mimeType!=i.mimeType?!1:Sv(e.codecs)===Sv(i.codecs)}p.uh=function(e){this.o=e},p.Ah=function(e){this.u=e};function N_(e,i,o){return!(!zm(i,o)&&!e.o||i.drmInfos&&!Ws(i.drmInfos,o.drmInfos))}function C4(e,i){return i.language?!(e.forced!==i.forced||Nl(e.language,i.language)==0||i.kind!=e.kind):!0}function k4(){return!0}function D4(e,i,o){var c=zm(e,i),h=zm(e,o);if(c&&!h)return!1;if(!c&&h||(c=Nl(e.language,i.language),h=Nl(e.language,o.language),h>c))return!0;if(h<c)return!1;if(i.label!==o.label){if(e.label===i.label)return!1;if(e.label===o.label)return!0}if(e.roles.length){if(c=i.roles.filter(function(g){return e.roles.includes(g)}),h=o.roles.filter(function(g){return e.roles.includes(g)}),h.length>c.length)return!0;if(h.length<c.length)return!1;if(o.roles.length!==i.roles.length)return o.roles.length<i.roles.length}else{if(!o.roles.length&&i.roles.length)return!0;if(o.roles.length&&!i.roles.length)return!1}return!i.primary&&o.primary?!0:i.primary&&!o.primary?!1:(c=jm(e.channelsCount,i.channelsCount,o.channelsCount),c==Vu?!0:c==Sd?!1:(c=jm(e.audioSamplingRate,i.audioSamplingRate,o.audioSamplingRate),c==Vu?!0:c==Sd?!1:!!(e.bandwidth&&zC(e.bandwidth,i.bandwidth,o.bandwidth)==Vu)))}function R4(e,i,o){var c=zm(e,i),h=zm(e,o);if(c&&!h)return!1;if(!c&&h||(c=jm(e.width*e.height,i.width*i.height,o.width*o.height),c==Vu))return!0;if(c==Sd)return!1;if(e.frameRate){if(c=jm(e.frameRate,i.frameRate,o.frameRate),c==Vu)return!0;if(c==Sd)return!1}return!!(e.bandwidth&&zC(e.bandwidth,i.bandwidth,o.bandwidth)==Vu)}function L4(e,i,o){var c=Nl(e.language,i.language),h=Nl(e.language,o.language);if(h>c)return!0;if(h<c)return!1;if(!i.primary&&o.primary)return!0;if(i.primary&&!o.primary)return!1;if(i.label!==o.label){if(e.label===i.label)return!1;if(e.label===o.label)return!0}if(e.roles.length){if(c=i.roles.filter(function(g){return e.roles.includes(g)}),h=o.roles.filter(function(g){return e.roles.includes(g)}),h.length>c.length)return!0;if(h.length<c.length)return!1}else{if(!o.roles.length&&i.roles.length)return!0;if(o.roles.length&&!i.roles.length)return!1}return!(o.mimeType!=e.mimeType||o.codecs!=e.codecs||i.mimeType==e.mimeType&&i.codecs==e.codecs)}function P4(e,i,o){return jm(e.width*e.height,i.width*i.height,o.width*o.height)==Vu}function UC(e){return{id:0,originalId:"",groupId:null,primary:!1,type:e,mimeType:"",codecs:"",language:"",originalLanguage:null,label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,external:!1,fastSwitching:!1,isAudioMuxedInVideo:!1,baseOriginalId:null}}function BC(e){return{id:0,originalId:"",groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new pr([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",originalLanguage:null,label:null,type:e,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null}}function jm(e,i,o){if(i==e&&e!=o)return Sd;if(o==e&&e!=i)return Vu;if(i>e){if(o<=e||o-e<i-e)return Vu;if(o-e>i-e)return Sd}else{if(o>e)return Sd;if(e-o<e-i)return Vu;if(e-o>e-i)return Sd}return jC}function zC(e,i,o){return i=Math.abs(e-i),e=Math.abs(e-o),e<i?Vu:i<e?Sd:jC}function O_(e){switch(e.type){case zi:return!e.language;case"image":return!e.tilesLayout;default:return!1}}function F_(e){return JSON.stringify([e.fastSwitching,e.width,e.frameRate,Sv(e.codecs),e.mimeType,e.label,e.roles,e.closedCaptions?Array.from(e.closedCaptions.entries()):null,e.bandwidth,e.dependencyStream?e.dependencyStream.baseOriginalId:null,Array.from(e.keyIds)])}function U_(e){return JSON.stringify([e.fastSwitching,e.channelsCount,e.language,e.bandwidth,e.label,Sv(e.codecs),e.mimeType,e.roles,e.audioSamplingRate,e.primary,e.dependencyStream?e.dependencyStream.baseOriginalId:null,Array.from(e.keyIds)])}function qm(e){return JSON.stringify([e.language,e.label,e.codecs,e.mimeType,e.bandwidth,e.roles])}function Hm(e){return JSON.stringify([e.width,e.codecs,e.mimeType])}function Sv(e){if(!B_.has(e)){var i=Ds(e);B_.set(e,i)}return B_.get(e)}_e("shaka.util.PeriodCombiner",Ba),Ba.prototype.setUseStreamOnce=Ba.prototype.Ah,Ba.prototype.setAllowMultiTypeVariants=Ba.prototype.uh,Ba.prototype.combinePeriods=Ba.prototype.gf,Ba.prototype.deleteStream=Ba.prototype.Kg,Ba.prototype.getImageStreams=Ba.prototype.oi,Ba.prototype.getTextStreams=Ba.prototype.Jf,Ba.prototype.getVariants=Ba.prototype.Ki;var Vu=1,jC=0,Sd=-1,B_=new Map;function M4(e,i){var o=new DOMParser,c=N4.value()(e);e=null;try{e=o.parseFromString(c,"text/xml")}catch{return null}if(o=e.documentElement,!o||o.getElementsByTagName("parsererror").length||o.tagName!=i)return null;if(!("createNodeIterator"in document))return o;for(i=document.createNodeIterator(e,NodeFilter.SHOW_ALL);e=i.nextNode();)if(e instanceof HTMLElement||e instanceof SVGElement)return null;return o}function qC(e,i){try{var o=da(e);return M4(o,i)}catch{return null}}var N4=new Br(function(){if(typeof trustedTypes<"u"){var e=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(i){return i}});return function(i){return e.createHTML(i)}}return function(i){return i}});function xv(){var e=this;this.j=this.g=null,this.A=[],this.i=null,this.pa=1,this.F=[],this.l={me:"",type:"",profiles:[],Wb:null,cb:0,Ua:null,Id:0},this.u=new Map,this.o=new Map,this.B=new Map,this.ka=new Map,this.m=new Ba,this.I=0,this.oa=new zt(5),this.K=new Li(function(){if(e.H&&!e.g.continueLoadingWhenPaused&&(e.G.Ja(e.H,"timeupdate"),e.H.paused)){e.G.ma(e.H,"timeupdate",function(){return WC(e)});return}WC(e)}),this.O=new Ho,this.M=null,this.C=[],this.$=1/0,this.fa=!1,this.h=null,this.L=0,this.P=!1,this.G=new ni,this.H=null,this.T=!1,this.Z="",this.ea=function(){return!1},this.W=[]}p=xv.prototype,p.configure=function(e,i){var o=this.j&&e.updatePeriod!=this.g.updatePeriod&&0<=e.updatePeriod;this.g=e,i&&(this.ea=i),o&&this.i&&this.i.presentationTimeline.U()&&this.K.sb(),this.h&&this.h.configure(this.g),this.m&&(this.m.uh(this.g.dash.multiTypeVariantsAllowed&&tl()),this.m.Ah(this.g.dash.useStreamOnceInPeriodFlattening))},p.start=function(e,i){var o=this,c;return Qe(function(h){if(h.g==1)return o.fa=i.isLowLatencyMode(),o.A=[e],o.j=i,x(h,z_(o),2);if(c=h.h,o.j&&j_(o,c),!o.j)throw new it(2,7,7001);return h.return(o.i)})},p.stop=function(){for(var e=T(this.o.values()),i=e.next();!i.done;i=e.next())i=i.value,i.segmentIndex&&i.segmentIndex.release();return this.m&&this.m.release(),this.g=this.j=null,this.A=[],this.i=null,this.o.clear(),this.B.clear(),this.u.clear(),this.l={me:"",type:"",profiles:[],Wb:null,cb:0,Ua:null,Id:0},this.m=null,this.K!=null&&(this.K.stop(),this.K=null),this.h&&this.h.destroy(),this.G&&(this.G.release(),this.G=null),this.O.destroy()},p.update=function(){var e=this,i;return Qe(function(o){if(o.g==1)return $e(o,2),x(o,z_(e),4);if(o.g!=2)return lt(o,0);if(i=et(o),!e.j||!i)return o.return();e.j.onError(i),ue(o)})},p.onExpirationUpdated=function(){},p.onInitialVariantChosen=function(e){if(this.i&&this.i.presentationTimeline.U()){var i=e.video||e.audio;if(i&&i.segmentIndex){e=this.i.presentationTimeline.cc();var o=i.segmentIndex.find(e);o!=null&&(i=i.segmentIndex.get(o))&&(this.I=i.endTime-e,j_(this,0))}}},p.banLocation=function(e){this.h&&this.h.banLocation(e)},p.setMediaElement=function(e){this.H=e};function z_(e){var i,o,c,h,g,v,E,S,I,L,O;return Qe(function(V){return V.g==1?(i=4,o="MPD",c=Q4(e),h=e.A,c.length?(h=c,o="Patch",i=6):1<e.A.length&&e.h&&(g=Bm(e.h,"Location",!0),g.length&&(h=g)),v=ws(h,e.g.retryParameters),E=Date.now(),x(V,H_(e,v,0,{type:i}),2)):V.g!=3?(S=V.h,e.j?(S.uri&&S.uri!=S.originalUri&&!e.A.includes(S.uri)&&e.A.unshift(S.uri),I=new vn(S.uri),e.Z=I.g.toString(),x(V,O4(e,S.data,S.uri,o),3)):V.return(0)):(L=Date.now(),O=(L-E)/1e3,e.oa.sample(1,O),V.return(O))})}function O4(e,i,o,c){var h,g,v,E,S,I,L,O,V,W;return Qe(function(pe){if(pe.g==1){if(h=i,g=e.g.dash.manifestPreprocessor,v=z0,g!=v){if(dn("manifest.dash.manifestPreprocessor configuration","Please Use manifest.dash.manifestPreprocessorTXml instead."),E=qC(h,c),!E)throw new it(2,4,4001,o);g(E),h=sa(E.outerHTML)}if(S=Ru(h,c),!S)throw new it(2,4,4001,o);return I=e.g.dash.manifestPreprocessorTXml,L=j0,I!=L&&I(S),c==="Patch"?pe.return(F4(e,S)):e.g.dash.disableXlinkProcessing?pe.return(HC(e,S,o)):(O=e.g.dash.xlinkFailGracefully,V=Tv(S,e.g.retryParameters,O,o,e.j.networkingEngine),du(e.O,V),x(pe,V.promise,2))}return W=pe.h,pe.return(HC(e,W,o))})}function HC(e,i,o){var c,h,g,v,E,S,I,L,O,V,W,pe,Me,De,Fe,We,gt,ht,It,ot,st,_t,xt,Ht,Pt,jt,Gt,Yt,Zt,Xt,En,Wn,Di,yi,yr,Ji,Vi,Wi,fr,ji,nr,Pi,qi,Or,Vs,Jr,ss,Ps,ta,Eh,Ad,mf;return Qe(function(Wl){switch(Wl.g){case 1:for(e.h&&e.h.l.clear(),c=[o],h=[],g=new Map,v=or(i,"Location"),E=T(v),S=E.next();!S.done;S=E.next())I=S.value,L=I.attributes.serviceLocation,(O=ha(I))&&(V=ts(c,[O])[0],L&&(e.h?Np(e.h,"Location",L,V):g.set(L,V)),h.push(V));if(e.h?(W=Bm(e.h,"Location",!0),0<W.length&&(c=e.A=W)):h.length&&(c=e.A=h),e.l.me=i.attributes.id||"",e.l.Id=Ri(i,"publishTime",sl)||0,e.F=or(i,"PatchLocation"),pe=Promise.resolve(),(Me=is(i,"ContentSteering"))&&e.j)for(De=Me.attributes.defaultServiceLocation,e.h?(e.h.i=c,e.h.h=De):(e.h=new Mp(e.j),e.h.configure(e.g),e.h.setManifestType("DASH"),e.h.i=c,e.h.h=De,(Fe=ha(Me))&&(Ri(Me,"queryBeforeStart",lc,!1)?pe=Um(e.h,Fe):Um(e.h,Fe))),We=T(g.keys()),gt=We.next();!gt.done;gt=We.next())ht=gt.value,It=g.get(ht),Np(e.h,"Location",ht,It);if(ot=or(i,"BaseURL"),st=!1,e.h)for(_t=T(ot),xt=_t.next();!xt.done;xt=_t.next())Ht=xt.value,Pt=Ht.attributes.serviceLocation,jt=ha(Ht),Pt&&jt&&(Np(e.h,"BaseURL",Pt,jt),st=!0);if(e.W=null,st&&e.h||(Gt=ot.map(ha),e.W=ts(c,Gt)),Yt=function(){return e.h&&st?Bm(e.h,"BaseURL"):e.W?e.W:[]},e.l.Ua=Yt,Zt=0,ot&&ot.length&&(Zt=Ri(ot[0],"availabilityTimeOffset",Lu)||0),e.l.cb=Zt,e.I=Ri(i,"minimumUpdatePeriod",go,-1),Xt=Ri(i,"availabilityStartTime",sl),En=Ri(i,"timeShiftBufferDepth",go),Wn=e.g.dash.ignoreSuggestedPresentationDelay,Di=null,Wn||(Di=Ri(i,"suggestedPresentationDelay",go)),yi=e.g.dash.ignoreMaxSegmentDuration,yr=null,yi||(yr=Ri(i,"maxSegmentDuration",go)),Ji=i.attributes.type||"static",e.i&&e.i.presentationTimeline&&(e.T=e.i.presentationTimeline.U()&&Ji=="static"),e.l.type=Ji,e.i)for(Vi=e.i.presentationTimeline,Wi=Vi.pb(),fr=T(e.o.values()),ji=fr.next();!ji.done;ji=fr.next())nr=ji.value,nr.segmentIndex&&nr.segmentIndex.Oa(Wi);else Pi=e.g.dash.ignoreMinBufferTime,qi=0,Pi||(qi=Ri(i,"minBufferTime",go)||0),Or=0,Or=Di!=null?Math.min(Di,En||1/0):0<e.g.defaultPresentationDelay?e.g.defaultPresentationDelay:Math.min(1.5*qi,En||1/0),Vi=new Ei(Xt,Or,e.g.dash.autoCorrectDrift);return Vi.Gc(Ji=="static"),Vi.U()&&!isNaN(e.g.availabilityWindowOverride)&&(En=e.g.availabilityWindowOverride),En==null&&(En=1/0),Vi.Ce(En),Vs=i.attributes.profiles||"",e.l.profiles=Vs.split(","),Jr={Ob:Ji!="static",presentationTimeline:Vi,qa:null,ha:null,ga:null,J:null,bandwidth:0,Lf:!1,cb:Zt,Wb:null,profiles:Vs.split(","),roles:null,vb:function(){return""}},x(Wl,pe,2);case 2:return e.L=0,ss=KC(e,Jr,Yt,i,!1),Ps=ss.duration,ta=ss.periods,(Ji!="static"||e.T)&&ss.Mg||Vi.bb(Ps||1/0),e.P&&e.fa&&Vi.vh(e.$),Vi.Tf(yr||1),e.P&&e.fa&&(Eh=Di??e.g.defaultPresentationDelay,Vi.jg(Eh)),e.i?(e.i.periodCount=ta.length,e.i.gapCount=e.L,x(Wl,GC(e,ta,!1),4)):x(Wl,e.m.gf(ta,Jr.Ob),6);case 6:if(e.i={presentationTimeline:Vi,variants:e.m.l,textStreams:e.m.Jf(),imageStreams:e.m.i,offlineSessionIds:[],sequenceMode:e.g.dash.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"DASH",serviceDescription:z4(i),nextUrl:j4(i),periodCount:ta.length,gapCount:e.L,isLowLatency:e.P,startTime:null},!Vi.Kh()){Wl.s(7);break}return Ad=or(i,"UTCTiming"),x(Wl,W4(e,Yt,Ad),8);case 8:if(mf=Wl.h,!e.j)return Wl.return();Vi.wh(mf);case 7:Vi.ie(),e.m&&!e.i.presentationTimeline.U()&&e.m.release();case 4:e.j.makeTextStreamsForClosedCaptions(e.i),q4(e),ue(Wl)}})}function GC(e,i,o){var c;return Qe(function(h){if(h.g==1)return x(h,e.m.gf(i,!0,o),2);e.i.variants=e.m.l,c=e.m.Jf(),0<c.length&&(e.i.textStreams=c),e.i.imageStreams=e.m.i,e.j.filter(e.i),ue(h)})}function F4(e,i){var o,c,h,g,v,E,S,I,L,O,V,W,pe,Me,De,Fe,We,gt,ht,It,ot,st,_t,xt,Ht,Pt,jt;return Qe(function(Gt){if(Gt.g==1){if(o=i.attributes.mpdId,c=Ri(i,"originalPublishTime",sl),!o||o!==e.l.me||c!==e.l.Id)throw e.F=[],new it(1,4,4052);for(h=[],g=[],v=new Set,E=T(Gh(i)),S=E.next();!S.done;S=E.next())if(I=S.value,L=uc(I.attributes.sel||""),O=L[L.length-1],V=ha(I)||"",O.name==="MPD")if(O.ac==="mediaPresentationDuration"){W=ha(I)||"";var Yt=go(W);if(Yt!=null){e.l.Wb=Yt;for(var Zt=T(e.u.values()),Xt=Zt.next();!Xt.done;Xt=Zt.next())Xt.value.Wb=Yt}}else if(O.ac==="type"){for(e.i.presentationTimeline.Gc(V=="static"),e.l.type=V,Yt=T(e.u.values()),Zt=Yt.next();!Zt.done;Zt=Yt.next())Zt.value.Ob=V=="dynamic";V=="static"&&(e.I=-1)}else O.ac==="publishTime"?e.l.Id=sl(V)||0:O.ac===null&&I.tagName==="add"&&g.push(I);else if(O.name==="PatchLocation")$h(e.F,I);else if(O.name==="Period")I.tagName==="add"?g.push(I):I.tagName==="remove"&&O.id&&B4(e,O.id);else if(O.name==="SegmentTemplate"){if(Zt=uc(I.attributes.sel||""),Yt=Zt[Zt.length-1],Yt.ac){Zt=VC(e,Zt),Xt=ha(I)||"";for(var En=T(Zt),Wn=En.next();!Wn.done;Wn=En.next())Wn=e.u.get(Wn.value),Jc(Wn.J.ic,I.tagName,Yt.ac,Xt);Yt=Zt}else Yt=[];for(pe=Yt,Me=T(pe),De=Me.next();!De.done;De=Me.next())Fe=De.value,v.add(Fe)}else if(O.name==="SegmentTimeline"||O.name==="S"){for(Yt=uc(I.attributes.sel||""),Yt=VC(e,Yt),Zt=T(Yt),Xt=Zt.next();!Xt.done;Xt=Zt.next())Xt=e.u.get(Xt.value),Xt=Lp(Xt,ff,"SegmentTimeline"),En=or(Xt,"S"),$h(En,I),Xt.children=En;for(We=Yt,gt=T(We),ht=gt.next();!ht.done;ht=gt.next())It=ht.value,v.add(It)}for(ot=T(v),st=ot.next();!st.done;st=ot.next())_t=st.value,$C(e,_t);for(xt=T(g),Ht=xt.next();!Ht.done;Ht=xt.next())Pt=Ht.value,h.push.apply(h,k(U4(e,Pt)));return h.length?(e.i.periodCount+=h.length,e.i.gapCount=e.L,x(Gt,GC(e,h,!0),2)):Gt.s(2)}e.l.type=="static"&&(jt=e.l.Wb,e.i.presentationTimeline.bb(jt||1/0)),ue(Gt)})}function U4(e,i){return KC(e,{Ob:e.l.type=="dynamic",presentationTimeline:e.i.presentationTimeline,qa:null,ha:null,ga:null,J:null,bandwidth:0,Lf:!1,cb:e.l.cb,profiles:e.l.profiles,Wb:e.l.Wb,roles:null,vb:function(){return""}},e.l.Ua,i,!0).periods}function B4(e,i){e.i.periodCount--;for(var o=T(e.u.keys()),c=o.next();!c.done;c=o.next())if(c=c.value,c.startsWith(i)){var h=e.u.get(c);Lp(h,ff,"SegmentTimeline").children=[],$C(e,c),e.u.delete(c)}e.C=e.C.filter(function(g){return g!==i})}function VC(e,i){var o="",c="",h=-1,g="";i=T(i);for(var v=i.next();!v.done;v=i.next())v=v.value,v.name==="Period"?o=v.id:v.name==="AdaptationSet"?(c=v.id,v.position!==null&&(h=v.position)):v.name==="Representation"&&(g=v.id);if(i=[],g)i.push(o+","+g);else if(c)for(h=T(e.u.values()),e=h.next();!e.done;e=h.next())e=e.value,e.qa.id===o&&e.ga.id===c&&e.J.id&&i.push(o+","+e.J.id);else if(-1<h)for(c=T(e.u.values()),e=c.next();!e.done;e=c.next())e=e.value,e.qa.id===o&&e.ga.position===h&&e.J.id&&i.push(o+","+e.J.id);return i}function $C(e,i){var o=e.u.get(i),c=e.o.get(i);c.segmentIndex&&c.segmentIndex.Oa(e.i.presentationTimeline.pb());try{var h=DC(o,function(g,v,E,S){return QC(e,g,v,E,S)},e.o,!0,e.g.dash.initialSegmentLimit,e.ka,o.J.aesKey,null,!0);c.createSegmentIndex=function(){return Qe(function(g){if(g.g==1)return c.segmentIndex?g.s(0):x(g,h.rc(),3);c.segmentIndex=g.h,ue(g)})}}catch(g){if(i=o.J.contentType,i!=zi&&i!="application"&&i!="image"||g.code!=4002)throw g}}function z4(e){var i=is(e,"ServiceDescription");if(!i||(e=is(i,"Latency"),i=is(i,"PlaybackRate"),!e&&!i))return null;var o={};return e&&("target"in e.attributes&&(o.targetLatency=parseInt(e.attributes.target,10)/1e3),"max"in e.attributes&&(o.maxLatency=parseInt(e.attributes.max,10)/1e3),"min"in e.attributes&&(o.minLatency=parseInt(e.attributes.min,10)/1e3)),i&&("max"in i.attributes&&(o.maxPlaybackRate=parseFloat(i.attributes.max)),"min"in i.attributes&&(o.minPlaybackRate=parseFloat(i.attributes.min))),o}function j4(e){if(e=or(e,"SupplementalProperty"),!e.length)return null;e=T(e);for(var i=e.next();!i.done;i=e.next())if(i=i.value,i.attributes.schemeIdUri=="urn:mpeg:dash:chaining:2016")return i.attributes.value;return null}function KC(e,i,o,c,h){var g=i.Wb;g||(g=Ri(c,"mediaPresentationDuration",go),e.l.Wb=g);var v=0;e.i&&e.i.presentationTimeline&&e.T&&(v=e.i.presentationTimeline.Hb());var E=[],S=v;c=or(c,"Period");for(var I=0;I<c.length;I++){var L=c[I],O=c[I+1],V=Ri(L,"start",go,S),W=L.attributes.id,pe=Ri(L,"duration",go);V=I==0&&V==0&&e.T?v:V;var Me=null;if(O){var De=Ri(O,"start",go);De!=null&&(Me=De-V+v)}else g!=null&&(Me=g-V+v);if(De=qh,Me&&pe&&Math.abs(Me-pe)>De&&Me>pe&&e.L++,Me==null&&(Me=pe),!(e.M!==null&&W!==null&&V!==null&&V<e.M)||e.C.includes(W)||I+1==c.length){if(V!==null&&(e.M===null||V>e.M)&&(e.M=V),S=H4(e,i,o,{start:V,duration:Me,node:L,$g:Me==null||!O}),E.push(S),i.qa.id&&Me&&e.ka.set(i.qa.id,Me),Me==null){S=null;break}S=V+Me}}if(h)for(i=T(E),o=i.next();!o.done;o=i.next())o=o.value.id,e.C.includes(o)||e.C.push(o);else e.C=E.map(function(Fe){return Fe.id});return g!=null?{periods:E,duration:g+v,Mg:!1}:{periods:E,duration:S,Mg:!0}}function q4(e){var i=Array.from(e.B.keys()).filter(function(E){return!e.C.includes(E)});i=T(i);for(var o=i.next();!o.done;o=i.next()){o=o.value;for(var c=!0,h=T(e.B.get(o)),g=h.next();!g.done;g=h.next()){g=g.value;var v=e.o.get(g);v&&(v.segmentIndex&&v.segmentIndex.getNumReferences()!=0?c=!1:(e.m&&e.m.Kg(v,o),e.o.delete(g)))}c&&e.B.delete(o)}}function H4(e,i,o,c){i.qa=q_(e,c.node,null,o),i.ha=c,i.qa.cb=i.cb,i.qa.id||(i.qa.id="__shaka_period_"+c.start);var h=or(c.node,"EventStream");o=i.presentationTimeline.pb(),h=T(h);for(var g=h.next();!g.done;g=h.next())X4(e,c.start,c.duration,g.value,o);for(o=or(c.node,"SupplementalProperty"),o=T(o),h=o.next();!h.done;h=o.next())h=h.value,h.attributes.schemeIdUri=="urn:mpeg:dash:urlparam:2014"&&(h=Gm(e,h))&&(i.vb=h);if(o=or(c.node,"AdaptationSet").map(function(W,pe){return YC(e,i,pe,W)}).filter(Ml),i.Ob){h=[],g=T(o);for(var v=g.next();!v.done;v=g.next()){v=T(v.value.rj);for(var E=v.next();!E.done;E=v.next())h.push(E.value)}if(h.length!=new Set(h).size)throw new it(2,4,4018)}for(h=new Map,g=T(o),v=g.next();!v.done;v=g.next())for(v=T(v.value.ei),E=v.next();!E.done;E=v.next()){var S=T(E.value);E=S.next().value,S=S.next().value,h.set(E,S)}if(h.size)for(g=null,v=T(o),E=v.next();!E.done;E=v.next()){E=E.value,S=[];for(var I=T(E.streams),L=I.next(),O={};!L.done;O={og:void 0},L=I.next())if(O.og=L.value,h.has(O.og.originalId)){g||(g=or(c.node,"AdaptationSet").map(function(W,pe){return YC(e,i,pe,W)}).filter(Ml)),L=T(g);for(var V=L.next();!V.done;V=L.next())(V=V.value.streams.find(function(W){return function(pe){return pe.originalId==W.og.originalId}}(O)))&&(V.dependencyStream=h.get(V.originalId),S.push(V))}S.length&&E.streams.push.apply(E.streams,k(S))}if(c=o.filter(function(W){return!W.vg}),o=o.filter(function(W){return W.vg}),!e.g.disableIFrames){for(o=T(o),h=o.next();!h.done;h=o.next())for(h=h.value,g=h.vg.split(" "),v=T(c),E=v.next();!E.done;E=v.next())if(E=E.value,g.includes(E.id))for(E=T(E.streams),S=E.next();!S.done;S=E.next())mc(S.value,h.streams)}if(o=Av(e.g.disableAudio,c,"audio"),h=Av(e.g.disableVideo,c,"video"),g=Av(e.g.disableText,c,zi),c=Av(e.g.disableThumbnails,c,"image"),h.length===0&&o.length===0)throw new it(2,4,4004);return{id:i.qa.id,audioStreams:o,videoStreams:h,textStreams:g,imageStreams:c}}function Av(e,i,o){return e||!i.length?[]:i.reduce(function(c,h){return h.contentType!=o||c.push.apply(c,k(h.streams)),c},[])}function YC(e,i,o,c){function h(jt){var Gt=jt.attributes["dvb:fontFamily"];jt=jt.attributes["dvb:url"],Gt&&jt&&(jt=ts(i.ga.Ua(),[jt],i.vb()),e.j.addFont(Gt,jt[0]))}function g(jt){switch(jt){case 1:case 5:case 6:case 7:return"srgb";case 9:return"rec2020";case 11:case 12:return"p3"}}function v(jt){switch(jt){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}i.ga=q_(e,c,i.qa,null),i.ga.position=o;var E=!1;o=or(c,"Role");var S=o.map(function(jt){return jt.attributes.value}).filter(Ml),I=void 0,L=i.ga.contentType==zi;L&&(I="subtitle"),o=T(o);for(var O=o.next();!O.done;O=o.next()){O=O.value;var V=O.attributes.schemeIdUri;if(V==null||V=="urn:mpeg:dash:role:2011")switch(O=O.attributes.value,O){case"main":E=!0;break;case"caption":case"subtitle":I=O}}var W=or(c,"EssentialProperty");o=null;var pe=!1;O=null,V=!1,W=T(W);for(var Me=W.next();!Me.done;Me=W.next()){Me=Me.value;var De=Me.attributes.schemeIdUri;if(De=="http://dashif.org/guidelines/trickmode")o=Me.attributes.value;else if(De=="urn:mpeg:mpegB:cicp:TransferCharacteristics")var Fe=v(parseInt(Me.attributes.value,10));else if(De=="urn:mpeg:mpegB:cicp:ColourPrimaries")var We=g(parseInt(Me.attributes.value,10));else De!="urn:mpeg:mpegB:cicp:MatrixCoefficients"&&(De=="urn:mpeg:dash:ssr:2023"&&e.g.dash.enableFastSwitching?pe=!0:De=="urn:dvb:dash:fontdownload:2014"?h(Me):De=="urn:mpeg:dash:urlparam:2014"&&(O=Gm(e,Me))||(V=!0))}if(V)return null;var gt=null;for(V=or(c,"SupplementalProperty"),V=T(V),W=V.next();!W.done;W=V.next())W=W.value,Me=W.attributes.schemeIdUri,Me=="http://dashif.org/guidelines/last-segment-number"?gt=parseInt(W.attributes.value,10)-1:Me=="urn:mpeg:mpegB:cicp:TransferCharacteristics"?Fe=v(parseInt(W.attributes.value,10)):Me=="urn:mpeg:mpegB:cicp:ColourPrimaries"?We=g(parseInt(W.attributes.value,10)):Me=="urn:dvb:dash:fontdownload:2014"?h(W):Me=="urn:mpeg:dash:urlparam:2014"&&(O=Gm(e,W));O&&(i.vb=O),O=or(c,"Accessibility");var ht=new Map,It;for(O=T(O),V=O.next();!V.done;V=O.next())if(W=V.value,V=W.attributes.schemeIdUri,W=W.attributes.value,V!="urn:scte:dash:cc:cea-608:2015"||e.g.disableText)if(V!="urn:scte:dash:cc:cea-708:2015"||e.g.disableText)V=="urn:mpeg:dash:role:2011"?W!=null&&(S.push(W),W=="captions"&&(I="caption")):V=="urn:tva:metadata:cs:AudioPurposeCS:2007"&&(W=="1"?It="visually impaired":W=="2"&&(It="hard of hearing"));else if(V=1,W!=null)for(W=T(W.split(";")),Me=W.next();!Me.done;Me=W.next()){De=Me.value;var ot=Me=void 0;De.includes("=")?(De=De.split("="),Me="svc"+De[0],ot=De[1].split(",")[0].split(":").pop()):(Me="svc"+V,V++,ot=De),ht.set(Me,Sr(ot))}else ht.set("svc1","und");else if(V=1,W!=null)for(W=W.split(";"),Me=T(W),De=Me.next();!De.done;De=Me.next()){ot=De.value;var st=De=void 0;ot.includes("=")?(ot=ot.split("="),De=ot[0].startsWith("CC")?ot[0]:"CC"+ot[0],st=ot[1]||"und"):(De="CC"+V,W.length==2?V+=2:V++,st=ot),ht.set(De,Sr(st))}else ht.set("CC1","und");O=or(c,"ContentProtection");var _t=EC(O,e.g.ignoreDrmInfo,e.g.dash.keySystemsByURI);i.ga.encrypted=0<O.length;var xt=Sr(i.ga.language||"und"),Ht=i.ga.label,Pt=new Map;if(c=or(c,"Representation"),!e.g.ignoreSupplementalCodecs){for(O=[],V=T(c),W=V.next();!W.done;W=V.next())Me=W.value,(W=il(Me,"urn:scte:dash:scte214-extensions","supplementalCodecs"))&&(Me=Na(Me),Me.attributes.codecs=W.split(" ").join(","),Me.attributes.id&&(Me.attributes.supplementalId=Me.attributes.id+"_supplementalCodecs"),O.push(Me));c.push.apply(c,k(O))}if(O=c.map(function(jt){var Gt=G4(e,i,_t,I,xt,Ht,E,S,ht,jt,It,gt);return Gt&&(Gt.hdr=Gt.hdr||Fe,Gt.colorGamut=Gt.colorGamut||We,Gt.fastSwitching=pe,jt=jt.attributes.dependencyId)?(Gt.baseOriginalId=jt,Pt.set(jt,Gt),null):Gt}).filter(function(jt){return!!jt}),O.length==0&&Pt.size==0){if(o=i.ga.contentType=="image",e.g.dash.ignoreEmptyAdaptationSet||L||o)return null;throw new it(2,4,4003)}if(!i.ga.contentType||i.ga.contentType=="application")for(i.ga.contentType=JC(O[0].mimeType,O[0].codecs),L=T(O),V=L.next();!V.done;V=L.next())V.value.type=i.ga.contentType;for(L=i.ga.id||"__fake__"+e.pa++,V=T(O),W=V.next();!W.done;W=V.next()){for(W=W.value,Me=T(_t.drmInfos),De=Me.next();!De.done;De=Me.next())De=De.value,De.keyIds=De.keyIds&&W.keyIds?new Set([].concat(k(De.keyIds),k(W.keyIds))):De.keyIds||W.keyIds;W.groupId=L}return c=c.map(function(jt){return jt.attributes.supplementalId||jt.attributes.id}).filter(Ml),{id:L,contentType:i.ga.contentType,language:xt,Qk:E,streams:O,drmInfos:_t.drmInfos,vg:o,rj:c,ei:Pt}}function Gm(e,i){if((i=Fa(i,"urn:mpeg:dash:schema:urlparam:2014","UrlQueryInfo"))&&Ri(i,"useMPDUrlQuery",lc,!1)){var o=i.attributes.queryTemplate;if(o)return function(){return o=="$querypart$"?e.Z:o.split("&").map(function(c){if(c=="$querypart$")return e.Z;var h=/\$query:(.*?)\$/g.exec(c);if(h&&h.length==2){h=h[1];var g=new si(e.Z).get(h);if(g.length)return h+"="+g[0]}return c}).join("&")}}return null}function G4(e,i,o,c,h,g,v,E,S,I,L,O){i.J=q_(e,I,i.ga,null);var V=i.J.id;if(e.$=Math.min(e.$,i.J.cb),e.P=0<e.$,!Y4(i.J))return null;var W=i.ha.start;i.bandwidth=Ri(I,"bandwidth",kl)||0,i.roles=E;var pe=or(I,"SupplementalProperty"),Me=or(I,"EssentialProperty"),De=or(I,"ContentProtection");I=null;var Fe=Me.find(function(Zt){return Zt.attributes.schemeIdUri=="urn:mpeg:dash:urlparam:2014"});(Fe||(Fe=pe.find(function(Zt){return Zt.attributes.schemeIdUri=="urn:mpeg:dash:urlparam:2014"})))&&(I=Gm(e,Fe)),I&&(i.vb=I),Fe=i.J.contentType,I=Fe==zi||Fe=="application",Fe=Fe=="image",De.length&&(i.ga.encrypted=!0);try{var We=void 0;if(o.cf){var gt=i.J.Ua,ht=i.vb,It=ts(gt(),[o.cf.Xi],ht()),ot=ws(It,e.g.retryParameters);We={bitsKey:128,blockCipherMode:"CBC",iv:o.cf.iv,firstMediaSequenceNumber:0,fetchKey:function(){var Zt,Xt,En;return Qe(function(Wn){if(Wn.g==1)return x(Wn,H_(e,ot,6),2);if(Wn.g!=3){if(Zt=Wn.h,!Zt.data||Zt.data.byteLength!=16)throw new it(2,4,4049);return Xt={name:"AES-CBC"},En=We,x(Wn,l.crypto.subtle.importKey("raw",Zt.data,Xt,!0,["decrypt"]),3)}En.cryptoKey=Wn.h,We.fetchKey=void 0,ue(Wn)})}}}if(i.J.aesKey=We,gt=function(Zt,Xt,En,Wn){return QC(e,Zt,Xt,En,Wn)},i.J.dd)var st=f4(i,gt,We);else if(i.J.Zb)st=p4(i,e.o,We);else if(i.J.ic)st=DC(i,gt,e.o,!!e.i,e.g.dash.initialSegmentLimit,e.ka,We,O,!1);else{var _t=i.ha.duration||0,xt=i.J.Ua,Ht=i.J.mimeType,Pt=i.J.codecs;st={rc:function(){var Zt=I0(W,_t,xt());return Zt.Eb(function(Xt){Xt.mimeType=Ht,Xt.codecs=Pt}),Promise.resolve(Zt)}}}}catch(Zt){if((I||Fe)&&Zt.code==4002)return null;throw Zt}O=ZB(De,o,e.g.ignoreDrmInfo,e.g.dash.keySystemsByURI),O=new Set(O?[O]:[]),De=!1,pe.some(function(Zt){return Zt.attributes.schemeIdUri=="tag:dolby.com,2018:dash:EC3_ExtensionType:2018"&&Zt.attributes.value=="JOC"})&&(De=!0),pe=!1,I&&(pe=E.includes("forced_subtitle")||E.includes("forced-subtitle"));var jt;if(Fe&&((Me=Me.find(function(Zt){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(Zt.attributes.schemeIdUri)}))&&(jt=Me.attributes.value),!jt))return null;var Gt;I=i.J.codecs,i.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(I.includes("hvc1.2.4.L153.B0")||I.includes("hev1.2.4.L153.B0"))&&(Gt="PQ"),Me=i.J.id?i.qa.id+","+i.J.id:"",e.F.length&&V&&e.u.set(i.qa.id+","+V,V4(i));var Yt=Me&&e.o.has(Me)?e.o.get(Me):{id:e.pa++,originalId:i.J.id,groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){Yt.segmentIndex&&(Yt.segmentIndex.release(),Yt.segmentIndex=null)},segmentIndex:null,mimeType:i.J.mimeType,codecs:I,frameRate:i.J.frameRate,pixelAspectRatio:i.J.pixelAspectRatio,bandwidth:i.bandwidth,width:i.J.width,height:i.J.height,kind:c,encrypted:0<o.drmInfos.length,drmInfos:o.drmInfos,keyIds:O,language:h,originalLanguage:i.ga.language,label:g,type:i.ga.contentType,primary:v,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:i.J.emsgSchemeIdUris,roles:E,forced:pe,channelsCount:i.J.oe,audioSamplingRate:i.J.audioSamplingRate,spatialAudio:De,closedCaptions:S,hdr:Gt,colorGamut:void 0,videoLayout:void 0,tilesLayout:jt,accessibilityPurpose:L,external:!1,fastSwitching:!1,fullMimeTypes:new Set([Xr(i.J.mimeType,i.J.codecs)]),isAudioMuxedInVideo:!1,baseOriginalId:null};return Yt.createSegmentIndex=function(){var Zt;return Qe(function(Xt){if(Xt.g==1)return Yt.segmentIndex?Xt.s(0):(Zt=Yt,x(Xt,st.rc(),3));Zt.segmentIndex=Xt.h,ue(Xt)})},Me&&i.Ob&&!e.o.has(Me)&&(i=i.qa.id||"",e.B.has(i)||e.B.set(i,[]),e.o.set(Me,Yt),e.B.get(i).push(Me)),Yt}function V4(e){function i(o){return o?(o=Oa(o),o.dd=null,o.Zb=null,o.ic=Zc(o.ic),o):null}return e=Oa(e),e.qa=i(e.qa),e.ga=i(e.ga),e.J=i(e.J),e.ha&&(e.ha=Oa(e.ha),e.ha.node=null),e}function WC(e){var i,o;return Qe(function(c){switch(c.g){case 1:return i=0,$e(c,2),x(c,z_(e),4);case 4:i=c.h,lt(c,3);break;case 2:if(o=et(c),e.j){if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.j.onError(o),c.return();o.severity=1,e.j.onError(o)}case 3:if(!e.j)return c.return();e.j.onManifestUpdated(),j_(e,i),ue(c)}})}function j_(e,i){if(!(0>e.I)){var o=e.I;0<=e.g.updatePeriod&&(o=e.g.updatePeriod),e.K.da(Math.max(o-i,vt(e.oa)))}}function q_(e,i,o,c){o=o||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,oe:null,audioSamplingRate:null,cb:0,Ae:0,encrypted:!1},c=c||o.Ua;var h=i.attributes.id,g=i.attributes.supplementalId,v=or(i,"BaseURL"),E,S=!1;if(e.h)for(var I=T(v),L=I.next();!L.done;L=I.next()){var O=L.value;L=O.attributes.serviceLocation,O=ha(O),L&&O&&(Np(e.h,h,L,O),S=!0)}S&&e.h||(E=v.map(ha)),I=i.attributes.contentType||o.contentType,L=i.attributes.mimeType||o.mimeType,O=Rb([i.attributes.codecs||o.codecs]).join(",");var V=Ri(i,"frameRate",Qc)||o.frameRate,W=i.attributes.sar||o.pixelAspectRatio,pe=$4(or(i,"InbandEventStream"),o.emsgSchemeIdUris),Me=or(i,"AudioChannelConfiguration");Me=K4(Me)||o.oe;var De=Ri(i,"audioSamplingRate",vs)||o.audioSamplingRate;I||(I=JC(L,O));var Fe=is(i,"SegmentBase"),We=is(i,"SegmentTemplate"),gt=Fe&&Ri(Fe,"availabilityTimeOffset",Lu)||0,ht=We&&Ri(We,"availabilityTimeOffset",Lu)||0,It=v&&v.length&&Ri(v[0],"availabilityTimeOffset",Lu)||0;gt=o.cb+It+gt+ht,ht=null,(It=is(i,"SegmentSequenceProperties"))&&(It=is(It,"SAP"))&&(ht=Ri(It,"cadence",Zs)),It=i.attributes.label;var ot=or(i,"Label");return ot&&ot.length&&(ot=ot[0],ns(ot)&&(It=ns(ot))),{Ua:function(){return ts(c(),v.length?e.h&&S?Bm(e.h,h):E||[]:[])},dd:Fe||o.dd,Zb:is(i,"SegmentList")||o.Zb,ic:We||o.ic,width:Ri(i,"width",vs)||o.width,height:Ri(i,"height",vs)||o.height,contentType:I,mimeType:L,codecs:O,frameRate:V,pixelAspectRatio:W,emsgSchemeIdUris:pe,id:g||h,originalId:h,language:i.attributes.lang,oe:Me,audioSamplingRate:De,cb:gt,de:null,Ae:ht||o.Ae,label:It||null,encrypted:!1}}function $4(e,i){i=i.slice(),e=T(e);for(var o=e.next();!o.done;o=e.next())o=o.value.attributes.schemeIdUri,i.includes(o)||i.push(o);return i}function K4(e){e=T(e);for(var i=e.next();!i.done;i=e.next()){i=i.value;var o=i.attributes.schemeIdUri;if(o&&(i=i.attributes.value))switch(o){case"urn:mpeg:dash:outputChannelPositionList:2012":return i.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(i=parseInt(i,10),!i)continue;return i;case"tag:dolby.com,2015:dash:audio_channel_configuration:2015":if(o=[2,1,2,2,2,2,1,2,2,1,1,1,1,2,1,1,2,2],i=parseInt(i,16),!i)continue;for(var c=0,h=0;h<o.length;h++)i&1<<h&&(c+=o[h]);if(c)return c;continue;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(o=[1,1,1,1,1,2,2,1,1,2,2,2,1,2,1,1].reverse(),i=parseInt(i,16),!i)continue;for(h=c=0;h<o.length;h++)i&1<<h&&(c+=o[h]);if(c)return c;continue;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(o=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(i=parseInt(i,10))&&0<i&&i<o.length)return o[i]}}return null}function Y4(e){var i=e.dd?1:0;return i+=e.Zb?1:0,i+=e.ic?1:0,i==0?e.contentType==zi||e.contentType=="application":(i!=1&&(e.dd&&(e.Zb=null),e.ic=null),!0)}function XC(e,i,o,c){var h,g,v,E,S,I,L;return Qe(function(O){if(O.g==1)return h=[ys(o)],g=ts(i(),h),v=ws(g,e.g.retryParameters),v.method=c,E=e.j.networkingEngine.request(4,v,{isPreload:e.ea()}),du(e.O,E),x(O,E.promise,2);if(S=O.h,c=="HEAD"){if(!S.headers||!S.headers.date)return O.return(0);I=S.headers.date}else I=Er(S.data);return L=Date.parse(I),isNaN(L)?O.return(0):O.return(L-Date.now())})}function W4(e,i,o){var c,h,g,v,E,S,I,L;return Qe(function(O){switch(O.g){case 1:c=o.map(function(V){return{scheme:V.attributes.schemeIdUri,value:V.attributes.value}}),h=e.g.dash.clockSyncUri,!c.length&&h&&c.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:h}),g=T(c),v=g.next();case 2:if(v.done){O.s(4);break}switch(E=v.value,$e(O,5),S=E.scheme,I=E.value,S){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return O.s(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return O.s(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return L=Date.parse(I),O.return(isNaN(L)?0:L-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":kt("NTP UTCTiming scheme is not supported");break;default:kt("Unrecognized scheme in UTCTiming element",S)}O.s(9);break;case 7:return x(O,XC(e,i,I,"HEAD"),10);case 10:return O.return(O.h);case 8:return x(O,XC(e,i,I,"GET"),11);case 11:return O.return(O.h);case 9:lt(O,3);break;case 5:et(O);case 3:v=g.next(),O.s(2);break;case 4:return kt("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),O.return(0)}})}function X4(e,i,o,c,h){var g=c.attributes.schemeIdUri||"",v=c.attributes.value||"",E=Ri(c,"timescale",vs)||1,S=Ri(c,"presentationTimeOffset",vs)||0;c=T(or(c,"Event"));for(var I=c.next();!I.done;I=c.next()){I=I.value;var L=Ri(I,"presentationTime",vs)||0,O=Ri(I,"duration",vs)||0;L=Math.max((L-S)/E+i,i),O=L+O/E,o!=null&&(L=Math.min(L,i+o),O=Math.min(O,i+o)),O<h||(I={schemeIdUri:g,value:v,startTime:L,endTime:O,id:I.attributes.id||"",timescale:E,eventElement:jf(I),eventNode:Zc(I)},e.j.onTimelineRegionAdded(I))}}function QC(e,i,o,c,h){var g,v,E,S;return Qe(function(I){return I.g==1?(g=Go,v=h?0:1,E=pm(i,o,c,e.g.retryParameters),x(I,H_(e,E,g,{type:v}),2)):(S=I.h,I.return(S.data))})}function JC(e,i){return i=Xr(e,i),Pl(i)?zi:e.split("/")[0]}function H_(e,i,o,c){return c||(c={}),c.isPreload=e.ea(),i=e.j.networkingEngine.request(o,i,c),du(e.O,i),i.promise}function Q4(e){var i=e.l.Id;if(!e.l.me||!i||!e.F.length)return[];var o=Date.now()/1e3,c=e.F.filter(function(h){return h=vs(h.attributes.ttl),!h||i+h>o}).map(ha).filter(Ml);return c.length?ts(e.A,c):[]}_e("shaka.dash.DashParser",xv),qu("application/dash+xml",function(){return new xv}),qu("video/vnd.mpeg.dash.mpd",function(){return new xv});function wv(){}_e("shaka.dependencies",wv),wv.has=function(e){return G_.has(e)},wv.add=function(e,i){if(!ek[e])throw Error(e+" is not supported");e==ZC?dn("mux.js","mux.js is no longer used in Shaka Player."):G_.set(e,function(){return i})};var ZC="muxjs",ek={Rk:ZC,ISOBoxer:"ISOBoxer"};wv.Allowed=ek;var G_=new Map([["ISOBoxer",function(){return l.ISOBoxer}]]);function tk(e,i,o){this.type=e,this.ca=i,this.segments=o||null}function Iv(e,i,o,c){this.id=e,this.name=i,this.attributes=o,this.value=c===void 0?null:c}Iv.prototype.toString=function(e){function i(h){return h.name+"="+(isNaN(Number(h.value))?'"'+h.value+'"':h.value)}var o="#"+this.name,c=this.attributes?this.attributes.filter(function(h){return e?!e.has(h.name):!0}).map(i):[];return this.value&&c.unshift(this.value),0<c.length&&(o+=":"+c.join(",")),o};function nk(e,i){return i?e.toString():(i=new Set().add("AUDIO").add("VIDEO").add("SUBTITLES").add("PATHWAY-ID").add("GROUP-ID").add("URI"),e.toString(i))}function Fp(e,i){return e=e.attributes.filter(function(o){return o.name==i}),e.length?e[0]:null}function Ti(e,i,o){return(e=Fp(e,i))?e.value:o||null}function Rr(e,i){if(e=Fp(e,i),!e)throw new it(2,4,4023,i);return e.value}function ik(e,i,o){o=o===void 0?[]:o,this.ca=i,this.g=e,this.Jb=o}function Cv(e,i){this.name=e,this.value=i}function Hl(e,i){return e.filter(function(o){return o.name==i})}function rk(e,i){return e.filter(function(o){return Rr(o,"TYPE")==i})}function la(e,i){e=T(e);for(var o=e.next();!o.done;o=e.next())if(o=o.value,o.name===i)return o;return null}function Up(e,i,o){return o=o===void 0?0:o,(e=la(e,i))?Number(e.value):o}function gf(e,i,o){return i?sk(e,[i],o):[]}function sk(e,i,o){if(!i.length)return[];var c=i;return o&&o.size&&(c=i.map(function(h){return ak(h,o)})),ts(e,c)}function ak(e,i){if(!i||!i.size)return e;e=String(e).replace(/%7B/g,"{").replace(/%7D/g,"}");var o=e.match(/{\$\w*}/g);if(o){o=T(o);for(var c=o.next();!c.done;c=o.next()){c=c.value;var h=c.slice(2,c.length-1),g=i.get(h);if(g)e=e.replace(c,g);else throw new it(2,4,4039,h)}}return e}function J4(){this.g=0}function V_(e,i){i=Er(i),i=i.replace(/\r\n|\r(?=[^\n]|$)/gm,`
`).trim();var o=i.split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(o[0]))throw new it(2,4,4015);i=0;for(var c=!0,h=T(o),g=h.next();!g.done;g=h.next())if(g=g.value,/^#(?!EXT)/m.test(g)||c)c=!1;else if(g=$_(e,g),--e.g,ok.includes(g.name)){i=1;break}else g.name=="EXT-X-STREAM-INF"&&(c=!0);for(h=[],c=!0,g=0;g<o.length;g++){var v=o[g],E=o[g+1];if(/^#(?!EXT)/m.test(v)||c)c=!1;else{if(v=$_(e,v),Z4.includes(v.name)){if(i!=1)throw new it(2,4,4017);v=o.splice(g,o.length-g),o=[],c=[],g=[],E=null,v=T(v);for(var S=v.next();!S.done;S=v.next())S=S.value,/^(#EXT)/.test(S)?(S=$_(e,S),ok.includes(S.name)?h.push(S):S.name=="EXT-X-MAP"?E=S:S.name=="EXT-X-PART"?g.push(S):S.name=="EXT-X-PRELOAD-HINT"?Ti(S,"TYPE")=="PART"?g.push(S):Ti(S,"TYPE")=="MAP"&&(S.name="EXT-X-MAP",E=S):c.push(S)):/^#(?!EXT)/m.test(S)||(S=S.trim(),E&&c.push(E),o.push(new ik(S,c,g)),c=[],g=[]);return g.length&&(E&&c.push(E),o.push(new ik("",c,g))),new tk(i,h,o)}h.push(v),v.name=="EXT-X-STREAM-INF"&&(v.attributes.push(new Cv("URI",E)),c=!0)}}return new tk(i,h)}function $_(e,i){e=e.g++;var o=i.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!o)throw new it(2,4,4016,i);i=o[1];var c=o[2];o=[];var h;if(c){c=new sc(c);var g;(g=ku(c,/^([^,=]+)(?:,|$)/g))&&(h=g[1]);for(var v=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;g=ku(c,v);)o.push(new Cv(g[1],g[2]||g[3])),au(c)}return new Iv(e,i,o,h)}var ok="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP EXT-X-PART-INF EXT-X-DATERANGE".split(" "),Z4="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP EXT-X-GAP EXT-X-TILES".split(" ");function lk(){}function uk(e,i){try{var o=kv(e);return od({uri:e,originalUri:e,data:o.data,headers:{"content-type":o.contentType},originalRequest:i})}catch(c){return yc(c)}}function kv(e){var i=e.split(":");if(2>i.length||i[0]!="data")throw new it(2,1,1004,e);if(i=i.slice(1).join(":").split(","),2>i.length)throw new it(2,1,1004,e);var o=i[0];e=l.decodeURIComponent(i.slice(1).join(",")),i=o.split(";"),o=i[0];var c=!1;1<i.length&&i[i.length-1]=="base64"&&(c=!0,i.pop());var h;return c?h=aa(e):h=sa(e),{data:h,contentType:o}}_e("shaka.net.DataUriPlugin",lk),lk.parse=uk,To("data",uk);function Dv(){var e=this;this.g=this.h=null,this.F=1,this.A=new Map,this.I=new Map,this.M=new Map,this.M.set("video",new Map),this.M.set("audio",new Map),this.M.set(zi,new Map),this.M.set("image",new Map),this.Sb=new Map().set("com.apple.streamingkeydelivery",function(i,o,c){return Sz(e,i,o,c)}).set("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",function(i){var o=Rr(i,"METHOD");if(["SAMPLE-AES","SAMPLE-AES-CTR"].includes(o)){var c="cenc";o=="SAMPLE-AES"&&(c="cbcs"),o=Rr(i,"URI"),o=kv(o.split("?")[0]),o=jn(o.data),c=Wa("com.widevine.alpha",c,[{initDataType:"cenc",initData:o}]),(i=Ti(i,"KEYID"))&&c.keyIds.add(i.toLowerCase().substr(2)),i=Promise.resolve(c)}else i=Promise.resolve(null);return i}).set("com.microsoft.playready",function(i){var o=Rr(i,"METHOD");if(["SAMPLE-AES","SAMPLE-AES-CTR"].includes(o)){var c="cenc";o=="SAMPLE-AES"&&(c="cbcs"),i=Rr(i,"URI"),i=kv(i.split("?")[0]),i=jn(i.data),o=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),o=up(i,o,new Set,0),c=Wa("com.microsoft.playready",c,[{initDataType:"cenc",initData:o}]),(i=Cl(["<PLAYREADY>",_s(i),"</PLAYREADY>"].join(`
`)))&&(c.licenseServerUri=yv(i)),c=Promise.resolve(c)}else c=Promise.resolve(null);return c}).set("urn:uuid:3d5e6d35-9b9a-41e8-b843-dd3c6e72c42c",function(i){var o=Rr(i,"METHOD");if(["SAMPLE-AES","SAMPLE-AES-CTR"].includes(o)){var c="cenc";o=="SAMPLE-AES"&&(c="cbcs"),o=Rr(i,"URI"),o=kv(o.split("?")[0]),o=jn(o.data),c=Wa("com.huawei.wiseplay",c,[{initDataType:"cenc",initData:o}]),(i=Ti(i,"KEYID"))&&c.keyIds.add(i.toLowerCase().substr(2)),i=Promise.resolve(c)}else i=Promise.resolve(null);return i}),this.Na=new Set,this.i=new Map,this.l=null,this.C="",this.Ga=new J4,this.K=-1,this.ea=1/0,this.$=this.Ub=this.Ma=!1,this.B=new Li(function(){if(e.W&&!e.g.continueLoadingWhenPaused&&(e.T.Ja(e.W,"timeupdate"),e.W.paused)){e.T.ma(e.W,"timeupdate",function(){return Dk(e)});return}Dk(e)}),this.Ea=Nv,this.m=null,this.La=0,this.o=1/0,this.Fa=this.Aa=this.P=0,this.Z=new Ho,this.G=new Map,this.H=new Map,this.sa=new Map,this.ka=new Map,this.L=new Map,this.oa=new Map,this.pa=new Map,this.Tb=this.fa=!1,this.Pb=new zt(5),this.j=null,this.O=!0,this.ya=new Set,this.T=new ni,this.u=this.W=null,this.Qb=function(){return!1}}p=Dv.prototype,p.configure=function(e,i){var o=this.h&&e.updatePeriod!=this.g.updatePeriod&&0<=e.updatePeriod;this.g=e,i&&(this.Qb=i),this.j&&this.j.configure(this.g),o&&this.m&&this.m.presentationTimeline.U()&&this.B.sb()},p.start=function(e,i){var o=this,c;return Qe(function(h){return h.g==1?(o.h=i,o.fa=i.isLowLatencyMode(),x(h,eS(o,[e]).promise,2)):h.g!=3?(c=h.h,o.C=c.uri,x(h,nz(o,c.data),3)):h.return(o.m)})},p.stop=function(){this.B&&(this.B.stop(),this.B=null);var e=[];return this.Z&&(e.push(this.Z.destroy()),this.Z=null),this.g=this.h=null,this.Na.clear(),this.m=null,this.i.clear(),this.I.clear(),this.H.clear(),this.A.clear(),this.sa.clear(),this.ka.clear(),this.L.clear(),this.oa.clear(),this.pa.clear(),this.ya.clear(),this.j&&this.j.destroy(),this.T&&(this.T.release(),this.T=null),Promise.all(e)},p.update=function(){var e=this,i,o,c,h,g,v,E,S,I,L,O,V;return Qe(function(W){if(W.g==1){if(!ao(e))return W.return();for(i=[],o=Array.from(e.i.values()),e.o=1/0,e.m.gapCount=0,c=o.filter(function(pe){return pe.stream.segmentIndex}),h=T(c),g=h.next();!g.done;g=h.next())v=g.value,i.push(ez(e,v));return x(W,Promise.all(i),2)}for(yk(e,c.map(function(pe){return pe.stream})),E=c.some(function(pe){return pe.rd==0}),c.length&&!E&&(S=Cz,Pv(e,S.Ph),I=c.map(function(pe){return pe.Vb}),e.l.bb(Math.min.apply(Math,k(I))),e.h.updateDuration()),E&&Y_(e),L=T(c),O=L.next();!O.done;O=L.next())V=O.value,V.stream.isAudioMuxedInVideo||!V.stream.segmentIndex||Hu(V.stream.segmentIndex)||e.h.disableStream(V.stream);ue(W)})};function K_(e,i){return ao(e)?e.M.get(i.type):i.je}function ez(e,i){var o,c,h,g,v,E,S,I,L,O,V,W,pe,Me,De,Fe,We,gt,ht,It,ot,st,_t,xt,Ht,Pt,jt,Gt,Yt,Zt,Xt,En,Wn,Di,yi,yr;return Qe(function(Ji){switch(Ji.g){case 1:if(i.stream.isAudioMuxedInVideo)return Ji.return();for(o=[],c=T(i.N()),h=c.next();!h.done;h=c.next())g=h.value,v=new vn(g),E=v.g,i.Td&&(0<=i.Ab&&E.add("_HLS_msn",String(i.Ab)),0<=i.Bb&&E.add("_HLS_part",String(i.Bb))),i.Ud&&E.add("_HLS_skip","YES"),Wt(E)&&Ne(v,Ke(E.toString())),o.push(v.toString());return $e(Ji,2),x(Ji,eS(e,o,!0).promise,4);case 4:S=Ji.h,lt(Ji,3);break;case 2:throw I=et(Ji),e.h&&e.h.disableStream(i.stream),I;case 3:if(!i.stream.segmentIndex)return Ji.return();if(L=V_(e.Ga,S.data),L.type!=1)throw new it(2,4,4017);return O=S.uri,O==S.originalUri||i.N().includes(O)||i.ve.push(O),V=Hl(L.ca,"EXT-X-DEFINE"),W=W_(e,V,O),pe=i.stream,Me=K_(e,i),x(Ji,bk(e,L,pe.mimeType,i.N,W),5);case 5:for(De=Ji.h,Fe=De.keyIds,We=De.drmInfos,gt=De.encrypted,ht=De.Bg,pe.encrypted||!gt||ht||(pe.encrypted=!0),It=function(Vi,Wi){return Vi.size===Wi.size&&[].concat(k(Vi)).every(function(fr){return Wi.has(fr)})},It(pe.keyIds,Fe)||(pe.keyIds=Fe,pe.drmInfos=We,e.h.newDrmInfo(pe)),ot=Ik(e,L,Me,W,i.N,i.type),st=ot.segments,(_t=ot.bandwidth)&&(pe.bandwidth=_t),xt=k0(pe),Ht=T(st),Pt=Ht.next();!Pt.done;Pt=Ht.next())jt=Pt.value,jt.Y&&(jt.Y.Wc=xt);pe.segmentIndex.Bd(st,e.l.pb()),st.length&&(Gt=Up(L.ca,"EXT-X-MEDIA-SEQUENCE",0),Zt=(Yt=la(L.ca,"EXT-X-SKIP"))?Number(Ti(Yt,"SKIPPED-SEGMENTS")):0,Xt=Tk(Gt,st),En=Xt.Ab,Wn=Xt.Bb,i.Ab=En+Zt,i.Bb=Wn,Di=Me.get(Gt),pe.segmentIndex.Oa(Di)),(yi=Hu(pe.segmentIndex))&&(i.Bc=yi.startTime,yr=st[st.length-1],i.Vb=yr.endTime),la(L.ca,"EXT-X-ENDLIST")&&(i.rd=!0),Q_(e,L),J_(e,L.ca,pe.type,W,i.N),ue(Ji)}})}p.onExpirationUpdated=function(){},p.onInitialVariantChosen=function(){},p.banLocation=function(e){this.j&&this.j.banLocation(e)},p.setMediaElement=function(e){this.W=e};function ck(e,i,o){o=o===void 0?!1:o;for(var c=e.K==-1,h=T(i),g=h.next();!g.done;g=h.next()){g=g.value;var v=g.stream.segmentIndex,E=K_(e,g);if(v=Hu(v)){E=T(E);for(var S=E.next();!S.done;S=E.next()){S=T(S.value);var I=S.next().value;if(S.next().value==v.startTime){c&&(e.K=Math.max(e.K,I)),g.qf=I;break}}}}if(!(0>e.K))for(i=T(i),c=i.next();!c.done;c=i.next())c=c.value,(Vm(e,c.type)||o)&&(h=c.stream.segmentIndex)&&(g=e.K-c.qf,0<g&&(h.g.splice(0,g),h=Hu(h))&&(h=-h.startTime,c.stream.segmentIndex.offset(h),dk(e,c,h)))}function tz(e,i){if(e.ea==1/0){i=T(i);for(var o=i.next();!o.done;o=i.next())o=Hu(o.value.stream.segmentIndex),o!=null&&o.h!=null&&(e.ea=Math.min(e.ea,o.h))}if(i=e.ea,i!=1/0){o=T(e.i.values());for(var c=o.next();!c.done;c=o.next())if(c=c.value,!Vm(e,c.type)){var h=c.stream.segmentIndex;if(h!=null){var g=Hu(h);if(g)if(g.h==null)Mt("Missing EXT-X-PROGRAM-DATE-TIME for stream",c.N(),"Expect AV sync issues!");else for(dk(e,c,g.h-i-g.startTime),c=T(h),h=c.next();!h.done;h=c.next())h.value.qg(i)}}}}function dk(e,i,o){if(!(.001>Math.abs(o))){i.Bc+=o,i.Vb+=o,e=K_(e,i);for(var c=T(e),h=c.next();!h.done;h=c.next()){var g=T(h.value);h=g.next().value,g=g.next().value,e.set(h,g+o)}i.N()}}function nz(e,i){var o,c,h,g,v,E,S,I,L,O,V,W,pe,Me,De,Fe,We,gt,ht,It,ot,st,_t,xt,Ht,Pt,jt,Gt,Yt,Zt,Xt,En,Wn,Di,yi,yr,Ji,Vi,Wi,fr,ji,nr;return Qe(function(Pi){switch(Pi.g){case 1:return o=ds,c=V_(e.Ga,i),h=Hl(c.ca,"EXT-X-DEFINE"),g=[],v=[],E=[],e.l=new Ei(null,0),e.l.Gc(!0),S=function(){return[e.C]},I=null,L=new Map,c.type==1?(e.O=!1,En=Hl(c.ca,"EXT-X-DEFINE"),L=W_(e,En,e.C),I=o.la,Wn="",Di=new Map,x(Pi,vk(e,e.F++,L,c,S,"",I,Wn,!0,"Media Playlist",null,Di,null,!1,null,!1),7)):(rz(e,h),O=Hl(c.ca,"EXT-X-MEDIA"),V=Hl(c.ca,"EXT-X-STREAM-INF"),W=Hl(c.ca,"EXT-X-IMAGE-STREAM-INF"),pe=Hl(c.ca,"EXT-X-I-FRAME-STREAM-INF"),Me=Hl(c.ca,"EXT-X-SESSION-KEY"),De=Hl(c.ca,"EXT-X-SESSION-DATA"),Fe=Hl(c.ca,"EXT-X-CONTENT-STEERING"),az(e,De),x(Pi,oz(e,Fe),4));case 4:if(!e.g.ignoreSupplementalCodecs){for(We=[],gt=T(V),ht=gt.next(),It={};!ht.done;It={Gh:void 0},ht=gt.next())ot=ht.value,(st=Ti(ot,"SUPPLEMENTAL-CODECS"))&&(It.Gh=st.split(/\s*,\s*/).map(function(qi){return qi.split("/")[0]}),_t=ot.attributes.map(function(qi){return function(Or){var Vs=Or.name,Jr=Or.value;return Vs=="CODECS"&&(Jr=qi.Gh.join(","),Or=Or.value.split(","),1<Or.length&&(Or=zs("audio",Or))&&(Jr+=","+Or)),new Cv(Vs,Jr)}}(It)),We.push(new Iv(ot.id,ot.name,_t,null)));for(V.push.apply(V,k(We)),xt=[],Ht=T(pe),Pt=Ht.next(),jt={};!Pt.done;jt={Hh:void 0},Pt=Ht.next())Gt=Pt.value,(Yt=Ti(Gt,"SUPPLEMENTAL-CODECS"))&&(jt.Hh=Yt.split(/\s*,\s*/).map(function(qi){return qi.split("/")[0]}),Zt=Gt.attributes.map(function(qi){return function(Or){var Vs=Or.name;return Or=Or.value,Vs=="CODECS"&&(Or=qi.Hh.join(",")),new Cv(Vs,Or)}}(jt)),xt.push(new Iv(Gt.id,Gt.name,Zt,null)));pe.push.apply(pe,k(xt))}return sz(e,V),gz(e,O),Xt=dz(e,pe),x(Pi,fz(e,V,Me,O,S,e.A,Xt),5);case 5:return g=Pi.h,v=lz(e,O),x(Pi,uz(e,W,pe),6);case 6:E=Pi.h,Pi.s(3);break;case 7:yi=Pi.h,e.i.set(e.C,yi),yi.stream&&(yr=k0(yi.stream),yi.stream.segmentIndex.Eb(function(qi){qi.Y&&(qi.Y.Wc=yr)})),I=yi.stream.type,g.push({id:0,language:Sr(Wn||"und"),disabledUntilTime:0,primary:!0,audio:I=="audio"?yi.stream:null,video:I=="video"?yi.stream:null,bandwidth:yi.stream.bandwidth||0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!e.h)throw new it(2,7,7001);if(Sk(e,c),c.type==1&&(ao(e)&&(xk(e,c),Ji=e.o,e.B.da(Ji)),Vi=Array.from(e.i.values()),X_(e,Vi),Y_(e),J_(e,c.ca,I,L,S)),e.m={presentationTimeline:e.l,variants:g,textStreams:v,imageStreams:E,offlineSessionIds:[],sequenceMode:e.g.hls.sequenceMode,ignoreManifestTimestampsInSegmentsMode:e.g.hls.ignoreManifestTimestampsInSegmentsMode,type:"HLS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:e.u},e.$||!e.g.hls.disableCodecGuessing){Pi.s(8);break}for(Wi=[],fr=T(e.m.variants),ji=fr.next();!ji.done;ji=fr.next())nr=ji.value,nr.audio&&nr.audio.codecs===""&&Wi.push(nr.audio.createSegmentIndex()),nr.video&&nr.video.codecs===""&&Wi.push(nr.video.createSegmentIndex());return x(Pi,Promise.all(Wi),8);case 8:e.h.makeTextStreamsForClosedCaptions(e.m),ue(Pi)}})}function iz(e,i){var o,c,h,g,v,E,S,I,L,O,V,W,pe,Me,De,Fe,We;return Qe(function(gt){if(gt.g==1)return o=Db(e.g.hls.mediaPlaylistFullMimeType),i.length?(c=Ck(e,i),h=c.segment,g=c.segmentIndex,v=h.N(),E=v[0],S=new vn(E),I=S.ab.split(".").pop(),(L=tS.get(I))?gt.return(Db(L)):x(gt,Promise.all([fk(e,h.Y,0),fk(e,h,g)]),2)):gt.return(o);if(O=gt.h,V=O[1].mimeType,W=O[0].data,pe=O[1].data,Me="mp4 mp4a m4s m4i m4a m4f cmfa mp4v m4v cmfv fmp4".split(" "),De=["audio/mp4","video/mp4","video/iso.segment"],Zn(jn(pe))){var ht=pe,It=e.g.disableAudio,ot=e.g.disableVideo,st=e.g.disableText,_t=jn(ht),xt=new Tt().parse(_t),Ht=xt.od();_t=xt.Kf();var Pt=[],jt=!1,Gt=!1;if(!It)switch(Ht.audio){case"aac":case"aac-loas":xt.fb().length&&(Pt.push("mp4a.40.2"),jt=!0);break;case"mp3":xt.fb().length&&(Pt.push("mp4a.40.34"),jt=!0);break;case"ac3":xt.fb().length&&(Pt.push("ac-3"),jt=!0);break;case"ec3":xt.fb().length&&(Pt.push("ec-3"),jt=!0);break;case"opus":xt.fb().length&&(Pt.push("opus"),jt=!0)}if(!ot)switch(Ht.video){case"avc":_t.codec?Pt.push(_t.codec):Pt.push("avc1.42E01E"),Gt=!0;break;case"hvc":_t.codec?Pt.push(_t.codec):Pt.push("hvc1.1.6.L93.90"),Gt=!0;break;case"av1":Pt.push("av01.0.01M.08"),Gt=!0}if(Pt.length){if(It=jt&&!Gt,ot=new Map,Gt&&!st){for(st=new Yr("video/mp2t"),st.i(ht),ht=T(st.j()),Gt=ht.next();!Gt.done;Gt=ht.next())Gt=Gt.value,ot.set(Gt,Gt);st.g()}_t={type:It?"audio":"video",mimeType:"video/mp2t",codecs:Pt.join(", "),language:null,height:_t.height,width:_t.width,channelCount:null,sampleRate:null,closedCaptions:ot,Nd:null,colorGamut:null,frameRate:_t.frameRate}}else _t=null;if(Fe=_t)return gt.return(Fe)}else if((h.Y||Me.includes(I)||De.includes(V))&&(We=kU(W,pe,e.g.disableText)))return gt.return(We);return V?gt.return(Db(V)):gt.return(o)})}function fk(e,i,o){var c,h,g,v,E,S;return Qe(function(I){switch(I.g){case 1:return i?(c=Go,h=pm(i.N(),i.uc(),i.tc(),e.g.retryParameters),g=i instanceof X?1:0,x(I,xd(e,h,c,{type:g}).promise,2)):I.return({mimeType:null,data:null});case 2:if(v=I.h,E=v.data,!i.aesKey){I.s(3);break}return x(I,Lb(E,i.aesKey,o),4);case 4:E=I.h;case 3:return i instanceof X?i.Kd(E,!0):i.Kd(E),(S=v.headers["content-type"])&&(S=S.split(";")[0].toLowerCase()),I.return({mimeType:S,data:E})}})}function Y_(e){if(ao(e)){if(e.Ea==Ov){for(var i=1/0,o=1/0,c=T(e.i.values()),h=c.next();!h.done;h=c.next())h=h.value,h.stream.segmentIndex&&h.stream.type!="text"&&!h.stream.isAudioMuxedInVideo&&(i=Math.min(i,h.Vb),o=Math.min(o,h.Bc));i=i-o||0,isNaN(e.g.availabilityWindowOverride)||(i=e.g.availabilityWindowOverride),e.l.Ce(i)}}else e.l.bb(mk(e));if(!e.l.u)for(i=T(e.i.values()),o=i.next();!o.done;o=i.next())o=o.value,!o.stream.segmentIndex||o.type!="audio"&&o.type!="video"||(o=Hu(o.stream.segmentIndex))&&o.h&&e.l.xh(o.h);e.l.ie()}function rz(e,i){var o=new vn(e.C).g;i=T(i);for(var c=i.next();!c.done;c=i.next()){var h=c.value;c=Ti(h,"NAME");var g=Ti(h,"VALUE");h=Ti(h,"QUERYPARAM"),c&&g&&(e.A.has(c)||e.A.set(c,g)),h&&(c=o.get(h)[0])&&!e.A.has(c)&&e.A.set(h,c)}}function W_(e,i,o){o=new vn(o).g;var c=new Map;i=T(i);for(var h=i.next();!h.done;h=i.next()){var g=h.value,v=Ti(g,"NAME"),E=Ti(g,"VALUE");h=Ti(g,"QUERYPARAM"),g=Ti(g,"IMPORT"),v&&E&&(c.has(v)||c.set(v,E)),h&&(v=o.get(h)[0])&&!c.has(v)&&c.set(h,v),g&&(h=e.A.get(g))&&c.set(g,h)}return c}function sz(e,i){i=T(i);for(var o=i.next();!o.done;o=i.next()){var c=o.value,h=Ti(c,"AUDIO");o=Ti(c,"VIDEO");var g=Ti(c,"SUBTITLES");if(c=hk(e,c),g){var v=zs(zi,c);e.H.set(g,v),fa(c,v)}h&&(g=zs("audio",c),g||(g=e.g.hls.defaultAudioCodec),e.H.set(h,g)),o&&(h=zs("video",c),h||(h=e.g.hls.defaultVideoCodec),e.H.set(o,h))}}function az(e,i){i=T(i);for(var o=i.next();!o.done;o=i.next()){var c=o.value,h=Ti(c,"DATA-ID");o=Ti(c,"URI");var g=Ti(c,"LANGUAGE");c=Ti(c,"VALUE"),h=new Map().set("id",h),o&&h.set("uri",gf([e.C],o,e.A)[0]),g&&h.set("language",g),c&&h.set("value",c),o=new Jn("sessiondata",h),e.h&&e.h.onEvent(o)}}function oz(e,i){var o,c,h,g,v,E;return Qe(function(S){if(!e.h||!e.g)return S.return();for(c=T(i),h=c.next();!h.done;h=c.next())if(g=h.value,v=Ti(g,"PATHWAY-ID"),E=Ti(g,"SERVER-URI"),v&&E){e.j=new Mp(e.h),e.j.configure(e.g),e.j.i=[e.C],e.j.setManifestType("HLS"),e.j.h=v,o=Um(e.j,E);break}return x(S,o,0)})}function lz(e,i){var o=rk(i,"SUBTITLES");i=o.map(function(v){if(e.g.disableText)return null;try{return pk(e,[v],new Map).stream}catch(E){if(e.g.hls.ignoreTextStreamFailures)return null;throw E}}),o=T(o);for(var c=o.next();!c.done;c=o.next()){var h=Rr(c.value,"GROUP-ID");if((c=e.H.get(h))&&(h=e.I.get(h))){h=T(h);for(var g=h.next();!g.done;g=h.next())g=g.value,g.stream.codecs=c,g.stream.mimeType=Z_(zi,c)||Lv(zi),yh(g.stream)}}return i.filter(function(v){return v})}function yh(e){var i=new Set([Xr(e.mimeType,e.codecs)]);e.segmentIndex&&e.segmentIndex.Eb(function(o){o.mimeType&&i.add(Xr(o.mimeType,e.codecs))}),e.fullMimeTypes=i}function uz(e,i,o){var c,h;return Qe(function(g){return g.g==1?(c=i.map(function(v){var E,S;return Qe(function(I){if(I.g==1)return e.g.disableThumbnails?I.return(null):($e(I,2),x(I,mz(e,v),4));if(I.g!=2)return E=I.h,I.return(E.stream);if(S=et(I),e.g.hls.ignoreImageStreamFailures)return I.return(null);throw S})}).concat(o.map(function(v){if(e.g.disableThumbnails)return null;try{var E=gk(e,v);return E.stream.type!=="image"?null:E.stream}catch(S){if(e.g.hls.ignoreImageStreamFailures)return null;throw S}})),x(g,Promise.all(c),2)):(h=g.h,g.return(h.filter(function(v){return v})))})}function cz(e,i,o){i=i.filter(function(E){var S=Ti(E,"URI")||"";return E=Ti(E,"TYPE"),E!="SUBTITLES"&&(S!=""||E=="AUDIO")});var c={};i=T(i);for(var h=i.next();!h.done;h=i.next()){h=h.value;var g=nk(h,!e.j);c[g]?c[g].push(h):c[g]=[h]}for(var v in c)pk(e,c[v],o,!1)}function dz(e,i){return i.map(function(o){return o=gk(e,o),o.stream.type!=="video"?null:o.stream}).filter(function(o){return o})}function fz(e,i,o,c,h,g,v){var E,S,I,L,O,V,W,pe,Me,De,Fe,We,gt,ht,It,ot,st,_t,xt,Ht,Pt,jt,Gt,Yt,Zt,Xt,En,Wn,Di,yi,yr,Ji,Vi,Wi,fr,ji;return Qe(function(nr){switch(nr.g){case 1:if(E=[],S=new Set,e.g.ignoreDrmInfo||!(0<o.length)){nr.s(2);break}I=T(o),L=I.next();case 3:if(L.done){nr.s(2);break}if(O=L.value,V=Rr(O,"METHOD"),W=Ti(O,"KEYFORMAT")||"identity",pe=null,V=="NONE"){nr.s(4);break}if(Mv(V)){Me=gf(h(),Rr(O,"URI"),g),De=Me.sort().join(""),e.L.has(De)||(Fe=ws(Me,e.g.retryParameters),We=xd(e,Fe,6).promise,e.L.set(De,We)),nr.s(4);break}if(W=="identity")return x(nr,Rk(e,O,"",h,null,g),12);if(gt=e.Sb.get(W),!gt){ht=null,nr.s(10);break}return x(nr,gt(O,"",null),11);case 11:ht=nr.h;case 10:pe=ht,nr.s(6);break;case 12:pe=nr.h;case 6:if(pe){if(pe.keyIds)for(It=T(pe.keyIds),ot=It.next();!ot.done;ot=It.next())st=ot.value,S.add(st);E.push(pe)}case 4:L=I.next(),nr.s(3);break;case 2:for(_t={},xt=T(i),Ht=xt.next();!Ht.done;Ht=xt.next())Pt=Ht.value,jt=nk(Pt,!e.j),_t[jt]?_t[jt].push(Pt):_t[jt]=[Pt];Gt=[];for(Yt in _t)Zt=_t[Yt],Xt=Zt[0],En=Ti(Xt,"FRAME-RATE"),Wn=Number(Ti(Xt,"AVERAGE-BANDWIDTH"))||Number(Rr(Xt,"BANDWIDTH")),Di=Ti(Xt,"RESOLUTION"),yi=T(Di?Di.split("x"):[null,null]),yr=yi.next().value,Ji=yi.next().value,Vi=Ti(Xt,"VIDEO-RANGE"),(Wi=Ti(Xt,"REQ-VIDEO-LAYOUT"))&&Wi.includes(",")&&(fr=Wi.split(",").filter(function(Pi){return Pi=="CH-STEREO"||Pi=="CH-MONO"}),Wi=fr[0]),Wi=Wi||"CH-MONO",ji=hz(e,Zt,c),Gt.push.apply(Gt,k(pz(e,ji.audio,ji.video,Wn,yr,Ji,En,Vi,Wi,E,S,v)));return nr.return(Gt.filter(function(Pi){return Pi!=null}))}})}function hz(e,i,o){for(var c={audio:[],video:[]},h=new Map,g=[],v=!1,E=!1,S=T(i),I=S.next();!I.done;I=S.next()){var L=I.value;I=Ti(L,"AUDIO");var O=Ti(L,"VIDEO"),V=I||O;V&&(g.includes(V)||g.push(V),(L=Ti(L,"PATHWAY-ID"))&&h.set(V,L),I?v=!0:O&&(E=!0))}g.length&&o.length&&(o=o.filter(function(pe){return g.includes(Rr(pe,"GROUP-ID"))}),cz(e,o,h)),o=(h=g.sort().join(","))&&e.I.has(h)?e.I.get(h):[],v?c.audio.push.apply(c.audio,k(o)):E&&c.video.push.apply(c.video,k(o)),v=!1;var W=i.map(function(pe){return Rr(pe,"URI")});return I=c.audio.find(function(pe){return pe&&pe.N().find(function(Me){return W.includes(Me)})}),E=hk(e,i[0]),o=zs("video",E),(S=zs("audio",E))&&!o?(I="audio",v=0<c.audio.length):!c.audio.length&&!c.video.length&&S&&o?(I="video",E=[[o,S].join()]):c.audio.length&&I?(I="audio",v=!0):I=c.video.length&&!c.audio.length?"audio":"video",v||(e=yz(e,i,E,I),h&&(e.stream.groupId=h),c[e.stream.type]=[e]),c}function hk(e,i){return i=Ti(i,"CODECS")||"",e.$=0<i.length,e.$||e.g.hls.disableCodecGuessing||(i=[],e.g.disableVideo||i.push(e.g.hls.defaultVideoCodec),e.g.disableAudio||i.push(e.g.hls.defaultAudioCodec),i=i.join(",")),Rb(i.split(/\s*,\s*/))}function pz(e,i,o,c,h,g,v,E,S,I,L,O){for(var V=T(o),W=V.next();!W.done;W=V.next())kk(W.value.stream,h,g,v,E,S,null);for(h=e.g.disableAudio,(!i.length||h)&&(i=[null]),h=e.g.disableVideo,(!o.length||h)&&(o=[null]),h=[],i=T(i),g=i.next();!g.done;g=i.next())for(g=g.value,v=T(o),E=v.next();!E.done;E=v.next()){var pe=E.value;(E=g?g.stream:null)&&(E.drmInfos=I,E.keyIds=L),(S=pe?pe.stream:null)&&(S.drmInfos=I,S.keyIds=L,e.g.disableIFrames||mc(S,O)),S&&!E&&(S.bandwidth=c),!S&&E&&(E.bandwidth=c),V=g?g.stream.drmInfos:null,W=pe?pe.stream.drmInfos:null,pe=pe?pe.N().sort().join(","):"";var Me=g?g.N().sort().join(","):"",De=[];E&&E.codecs&&De.push(E.codecs),S&&S.codecs&&De.push(S.codecs),pe=[pe,Me,De.sort()].join("-"),E&&S&&!Ws(V,W)||e.Na.has(pe)||(E={id:e.F++,language:E?E.language:"und",disabledUntilTime:0,primary:!!E&&E.primary||!!S&&S.primary,audio:E,video:S,bandwidth:c,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},h.push(E),e.Na.add(pe))}return h}function gz(e,i){i=rk(i,"CLOSED-CAPTIONS"),e.O=i.length==0,i=T(i);for(var o=i.next();!o.done;o=i.next()){var c=o.value,h=Ti(c,"LANGUAGE");o=Sr(h||"und"),h||(h=Ti(c,"NAME"))&&(o=h),h=Rr(c,"GROUP-ID"),c=Rr(c,"INSTREAM-ID").replace("SERVICE","svc"),e.G.get(h)||e.G.set(h,new Map),e.G.get(h).set(c,o)}}function pk(e,i,o,c){c=c===void 0?!0:c;for(var h=[],g=[],v=new Map,E=T(i),S=E.next();!S.done;S=E.next()){var I=S.value;S=c?Rr(I,"URI"):Ti(I,"URI")||"shaka://hls-muxed",I=Rr(I,"GROUP-ID"),h.push(S),g.push(I),v.set(I,S)}if(c=g.sort().join(","),S=i[0],i="",E=Rr(S,"TYPE").toLowerCase(),E=="subtitles"&&(E=zi),E==zi)i=Ti(S,"CODECS")||"";else for(g=T(g),I=g.next();!I.done;I=g.next())if(I=I.value,e.H.has(I)){i=e.H.get(I);break}if(g=h.sort().join(","),e.i.has(g))return e.i.get(g);if(I=e.F++,e.j){v=T(v);for(var L=v.next();!L.done;L=v.next()){var O=T(L.value);L=O.next().value,O=O.next().value,(L=o.get(L))&&Np(e.j,I,L,O)}}o=Ti(S,"LANGUAGE"),v=Ti(S,"NAME"),L=Ti(S,"DEFAULT")=="YES",E=="audio"?O=(O=Ti(S,"CHANNELS"))?parseInt(O.split("/")[0],10):null:O=null;var V;E=="audio"&&(V=Ti(S,"CHANNELS"))?(V=V.split("/"),V=V.length!=2?!1:V[1]==="JOC"||V[1].includes("ATMOS")):V=!1;var W=Ti(S,"CHARACTERISTICS"),pe=Ti(S,"FORCED")=="YES";return E=="audio"?S=(S=Ti(S,"SAMPLE-RATE"))?parseInt(S,10):null:S=null,h=Rv(e,I,h,i,E,o,L,v,O,null,W,pe,S,V),h.stream&&(h.stream.groupId=c),e.I.has(c)?e.I.get(c).push(h):e.I.set(c,[h]),e.i.set(g,h),h}function mz(e,i){var o,c,h,g,v,E,S,I,L,O;return Qe(function(V){return V.g==1?(o=Rr(i,"URI"),c=Ti(i,"CODECS","jpeg")||"",e.i.has(o)?V.return(e.i.get(o)):(h=Ti(i,"LANGUAGE"),g=Ti(i,"NAME"),v=Ti(i,"CHARACTERISTICS"),E=Rv(e,e.F++,[o],c,"image",h,!1,g,null,null,v,!1,null,!1),(S=Ti(i,"RESOLUTION"))?x(V,E.stream.createSegmentIndex(),3):V.s(2))):(V.g!=2&&(I=Hu(E.stream.segmentIndex),L=I.tilesLayout)&&(E.stream.width=Number(S.split("x")[0])*Number(L.split("x")[0]),E.stream.height=Number(S.split("x")[1])*Number(L.split("x")[1])),(O=Ti(i,"BANDWIDTH"))&&(E.stream.bandwidth=Number(O)),e.i.set(o,E),V.return(E))})}function gk(e,i){var o="video",c=Rr(i,"URI"),h=Ti(i,"CODECS")||"";if(h=="mjpg"&&(o="image"),e.i.has(c))return e.i.get(c);var g=Ti(i,"LANGUAGE"),v=Ti(i,"NAME"),E=Ti(i,"CHARACTERISTICS");return o=Rv(e,e.F++,[c],h,o,g,!1,v,null,null,E,!1,null,!1),h=Ti(i,"RESOLUTION"),g=T(h?h.split("x"):[null,null]),h=g.next().value,g=g.next().value,o.stream.width=Number(h)||void 0,o.stream.height=Number(g)||void 0,(i=Ti(i,"BANDWIDTH"))&&(o.stream.bandwidth=Number(i)),e.i.set(c,o),o}function yz(e,i,o,c){for(var h=e.F++,g=[],v=T(i),E=v.next();!E.done;E=v.next()){var S=E.value;E=Rr(S,"URI"),S=Ti(S,"PATHWAY-ID"),e.j&&S&&Np(e.j,h,S,E),g.push(E)}if(v=g.sort().join(",")+o.sort().join(","),e.i.has(v))return e.i.get(v);E=g.join(",");e:{if(i=Ti(i[0],"CLOSED-CAPTIONS"),c=="video"){if(e.g.disableText){e.O=!1,i=null;break e}if(i){if(i!="NONE"){i=e.G.get(i);break e}e.O=!1}else if(!i&&e.G.size)for(i=T(e.G.keys()).next();!i.done;){i=e.G.get(i.value);break e}}i=null}return o=wu(c,o),c=Rv(e,h,g,o,c,null,!1,E,null,i,null,!1,null,!1),e.i.set(v,c),c}function Rv(e,i,o,c,h,g,v,E,S,I,L,O,V,W){function pe(ht){var It,ot,st,_t,xt,Ht,Pt,jt,Gt,Yt,Zt,Xt,En,Wn,Di,yi,yr,Ji,Vi,Wi,fr,ji,nr;return Qe(function(Pi){switch(Pi.g){case 1:return It=ds,$e(Pi,2),x(Pi,ht.promise,4);case 4:if(ot=Pi.h,ht.aborted)return Pi.return();if(st=ot.uri,st!=ot.originalUri&&(_t=Fe.N(),_t.includes(st)||Fe.ve.push(st)),xt=V_(e.Ga,ot.data),xt.type!=1)throw new it(2,4,4017);return Ht=Hl(xt.ca,"EXT-X-DEFINE"),Pt=W_(e,Ht,st),jt=!1,(!e.$&&e.g.hls.disableCodecGuessing||e.O&&h==It.la&&!e.g.hls.disableClosedCaptionsDetection)&&0<xt.segments.length&&(e.O=!1,jt=!0),Gt=!e.$&&e.g.hls.disableCodecGuessing,Yt=ao(e),x(Pi,vk(e,0,Pt,xt,Me,c,h,g,v,E,S,I,L,O,V,W,void 0,jt,Gt),5);case 5:if(Zt=Pi.h,ht.aborted)return Pi.return();if(Xt=Zt.stream,Sk(e,xt),ao(e)&&!Yt&&xk(e,xt),Fe.Bc=Zt.Bc,Fe.Vb=Zt.Vb,Fe.Ud=Zt.Ud,Fe.Td=Zt.Td,Fe.rd=Zt.rd,Fe.je=Zt.je,Fe.Ab=Zt.Ab,Fe.Bb=Zt.Bb,Fe.Rf=!0,De.segmentIndex=Xt.segmentIndex,De.encrypted=Xt.encrypted,De.drmInfos=Xt.drmInfos,De.keyIds=Xt.keyIds,De.mimeType=Xt.mimeType,De.bandwidth=De.bandwidth||Xt.bandwidth,De.codecs=De.codecs||Xt.codecs,De.closedCaptions=De.closedCaptions||Xt.closedCaptions,De.width=De.width||Xt.width,De.height=De.height||Xt.height,De.hdr=De.hdr||Xt.hdr,De.colorGamut=De.colorGamut||Xt.colorGamut,De.frameRate=De.frameRate||Xt.frameRate,De.language=="und"&&Xt.language!="und"&&(De.language=Xt.language),De.language=De.language||Xt.language,De.channelsCount=De.channelsCount||Xt.channelsCount,De.audioSamplingRate=De.audioSamplingRate||Xt.audioSamplingRate,yh(De),De.drmInfos.length&&e.h.newDrmInfo(De),En=!1,(!I&&De.closedCaptions||I&&De.closedCaptions&&I.size!=De.closedCaptions.size)&&(En=!0),e.m&&En&&e.h.makeTextStreamsForClosedCaptions(e.m),h==It.la||h==It.V)for(Wn=T(e.i.values()),Di=Wn.next();!Di.done;Di=Wn.next())yi=Di.value,yi.Rf||yi.type!=h||(yi.stream.mimeType=Xt.mimeType,yh(yi.stream));h==It.za&&(yr=Hu(Xt.segmentIndex))&&yr.Y&&(De.mimeType="application/mp4",yh(De)),Ji=k0(De),De.segmentIndex.Eb(function(qi){qi.Y&&(qi.Y.Wc=Ji)}),vz(e)&&(e.Ub?X_(e,[Fe]):(e.Ub=!0,Vi=Array.from(e.i.values()),Wi=Vi.filter(function(qi){return qi.stream.segmentIndex}),X_(e,Wi),Y_(e),fr=e.o,0<fr&&e.B.da(fr))),J_(e,xt.ca,De.type,Pt,Me),e.m&&(e.m.startTime=e.u),lt(Pi,0);break;case 2:if(ji=et(Pi),De.closeSegmentIndex(),ji.code===7001)return Pi.return();if(nr=e.h.disableStream(De),!nr)throw ji;ue(Pi)}})}function Me(){return e.j&&1<o.length?Bm(e.j,i):Fe.ve.concat(sk([e.C],o,e.A))}var De=Ek(e,c,h,g,v,E,S,I,L,O,V,W);o.includes("shaka://hls-muxed")&&(De.isAudioMuxedInVideo=!0,De.mimeType="video/mp2t",yh(De));var Fe={stream:De,type:h,ve:[],Bc:0,Vb:0,je:new Map,Ud:!1,Td:!1,rd:!1,qf:-1,Ab:-1,Bb:-1,Rf:!1,N:Me},We=null,gt;return De.createSegmentIndex=function(){return We||(De.isAudioMuxedInVideo?(De.segmentIndex=new pr([]),Promise.resolve()):(gt=eS(e,Fe.N(),!0),We=new Promise(function(ht){ht(pe(gt))})))},De.closeSegmentIndex=function(){We&&!De.segmentIndex&&gt.abort(),De.segmentIndex&&(De.segmentIndex.release(),De.segmentIndex=null),We=null},Fe}function mk(e){var i=1/0;e=T(e.i.values());for(var o=e.next();!o.done;o=e.next())o=o.value,o.stream.segmentIndex&&o.stream.type!="text"&&!o.stream.isAudioMuxedInVideo&&(i=Math.min(i,o.Vb));return i}function yk(e,i){var o=[];i=T(i);for(var c=i.next();!c.done;c=i.next())c=c.value,c.segmentIndex&&c.segmentIndex.Eb(function(h){o.push(h)});e.l.Ed(o)}function X_(e,i){if(!ao(e))for(var o=mk(e),c=T(i),h=c.next();!h.done;h=c.next())h.value.stream.segmentIndex.Oc(0,o);yk(e,i.map(function(g){return g.stream})),c=Array.from(e.i.values()).filter(function(g){return g.stream.segmentIndex}),o=c.some(function(g){return g.stream.type=="audio"}),h=c.some(function(g){return g.stream.type=="video"}),c=ao(e)&&!e.Ma,o=!ao(e)&&e.Ma&&!(o&&h),e.g.hls.ignoreManifestProgramDateTime||c||o?ck(e,i,c):(tz(e,i),0<e.g.hls.ignoreManifestProgramDateTimeForTypes.length&&ck(e,i))}function Vm(e,i){return e.g.hls.ignoreManifestProgramDateTime?!0:e.g.hls.ignoreManifestProgramDateTimeForTypes.includes(i)}function vz(e){if(!e.m)return!1;var i=[],o=[];e=T(e.m.variants);for(var c=e.next();!c.done;c=e.next())c=c.value,c.video&&i.push(c.video),c.audio&&o.push(c.audio);return!(0<i.length&&!i.some(function(h){return h.segmentIndex})||0<o.length&&!o.some(function(h){return h.segmentIndex}))}function vk(e,i,o,c,h,g,v,E,S,I,L,O,V,W,pe,Me,De,Fe,We){Fe=Fe===void 0?!0:Fe,We=We===void 0?!0:We;var gt,ht,It,ot,st,_t,xt,Ht,Pt,jt,Gt,Yt,Zt,Xt,En,Wn,Di,yi,yr,Ji,Vi,Wi,fr,ji,nr,Pi,qi,Or,Vs;return Qe(function(Jr){switch(Jr.g){case 1:if(gt=c.segments||[],ht=gt.every(function(ss){return!!la(ss.ca,"EXT-X-GAP")}),!gt.length||ht)throw new it(2,4,4053);if(Tz(e,c),ao(e)&&Q_(e,c),It=ao(e)?e.M.get(v):new Map,ot=Ik(e,c,It,o,h,v),st=ot.segments,_t=ot.bandwidth,Gt=jt=Pt=Ht=xt=null,!(0<st.length&&Fe)){Jr.s(2);break}return x(Jr,iz(e,st),3);case 3:Yt=Jr.h,v=Yt.type,E=Yt.language,L=Yt.channelCount,pe=Yt.sampleRate,e.g.disableText||(O=Yt.closedCaptions),Ht=Yt.height,xt=Yt.width,Pt=Yt.Nd,jt=Yt.colorGamut,Gt=Yt.frameRate,We&&(De=Yt.mimeType,g=Yt.codecs);case 2:if(De){Jr.s(4);break}return x(Jr,_z(e,v,g,st),5);case 5:De=Jr.h,v!=zi||g||De!="application/mp4"||!st[0]||st[0].Y||(De="text/vtt");case 4:return x(Jr,bk(e,c,De,h,o),6);case 6:if(Zt=Jr.h,Xt=Zt.drmInfos,En=Zt.keyIds,Wn=Zt.encrypted,Di=Zt.Bg,Wn&&!Xt.length&&!Di)throw new it(2,4,4026);return yi=Ek(e,g,v,E,S,I,L,O,V,W,pe,Me),yi.encrypted=Wn&&!Di,yi.drmInfos=Xt,yi.keyIds=En,yi.mimeType=De,_t&&(yi.bandwidth=_t),yh(yi),v=="video"&&(xt||Ht||Pt||jt)&&kk(yi,xt,Ht,Gt,Pt,null,jt),ao(e)&&Q_(e,c),yr=st[0].startTime,Ji=st[st.length-1],Vi=Ji.endTime,Wi=new pr(st),yi.segmentIndex=Wi,ji=(fr=la(c.ca,"EXT-X-SERVER-CONTROL"))?Fp(fr,"CAN-SKIP-UNTIL")!=null:!1,nr=fr?Fp(fr,"CAN-BLOCK-RELOAD")!=null:!1,Pi=Up(c.ca,"EXT-X-MEDIA-SEQUENCE",0),qi=Tk(Pi,st),Or=qi.Ab,Vs=qi.Bb,Jr.return({stream:yi,type:v,ve:[],N:h,Bc:yr,Vb:Vi,Ud:ji,Td:nr,rd:!1,qf:-1,Ab:Or,Bb:Vs,je:It,Rf:!1})}})}function Tk(e,i){e=e+i.length-1;var o=-1;if(!i.length)return e++,{Ab:e,Bb:o};i=i[i.length-1];var c=i.g;return i.g.length?(o=c.length-1,c[c.length-1].isPreload()||(e++,o=0),{Ab:e,Bb:o}):(e++,i.m&&(o=0),{Ab:e,Bb:o})}function Ek(e,i,o,c,h,g,v,E,S,I,L,O){var V=Z_(o,i)||Lv(o),W=[];if(S){S=T(S.split(","));for(var pe=S.next();!pe.done;pe=S.next())W.push(pe.value)}return S=void 0,pe=null,o==zi?S=W.includes("public.accessibility.transcribes-spoken-dialog")&&W.includes("public.accessibility.describes-music-and-sound")?"caption":"subtitle":W.includes("public.accessibility.describes-video")&&(pe="visually impaired"),W.length||S!=="subtitle"||W.push("subtitle"),e={id:e.F++,originalId:g,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:V,codecs:i,kind:o==zi?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:Sr(c||"und"),originalLanguage:c,label:g,type:o,primary:h,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:W,forced:I,channelsCount:v,audioSamplingRate:L,spatialAudio:O,closedCaptions:E,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,accessibilityPurpose:pe,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null},yh(e),e}function bk(e,i,o,c,h){var g,v,E,S,I,L,O,V,W,pe,Me,De,Fe,We,gt,ht,It,ot,st,_t,xt,Ht,Pt,jt,Gt,Yt,Zt,Xt,En;return Qe(function(Wn){switch(Wn.g){case 1:if(g=new Map,!e.g.ignoreDrmInfo&&i.segments){for(v=T(i.segments),E=v.next();!E.done;E=v.next())if(S=E.value,I=Hl(S.ca,"EXT-X-KEY"),L=null,I.length)for(L=Ak(e,i,S.ca,c,h),O=T(I),V=O.next();!V.done;V=O.next())W=V.value,g.set(W,L)}Me=pe=!1,De=[],Fe=new Set,We=T(g),gt=We.next();case 2:if(gt.done){Wn.s(4);break}if(ht=gt.value,It=T(ht),ot=It.next().value,st=It.next().value,_t=ot,xt=st,Ht=Rr(_t,"METHOD"),Ht=="NONE"){Wn.s(3);break}if(pe=!0,Pt=Ti(_t,"KEYFORMAT")||"identity",jt=null,Mv(Ht)){Me=!0,Wn.s(3);break}if(Pt=="identity")return x(Wn,Rk(e,_t,o,c,xt,h),11);if(Gt=e.Sb.get(Pt),!Gt){Yt=null,Wn.s(9);break}return x(Wn,Gt(_t,o,xt),10);case 10:Yt=Wn.h;case 9:jt=Yt,Wn.s(6);break;case 11:jt=Wn.h;case 6:if(jt){if(jt.keyIds)for(Zt=T(jt.keyIds),Xt=Zt.next();!Xt.done;Xt=Zt.next())En=Xt.value,Fe.add(En);De.push(jt)}case 3:gt=We.next(),Wn.s(2);break;case 4:return Wn.return({drmInfos:De,keyIds:Fe,encrypted:pe,Bg:Me})}})}function _k(e,i,o,c,h){if(!l.crypto||!l.crypto.subtle)throw kt("Web Crypto API is not available to decrypt AES. (Web Crypto only exists in secure origins like https)"),new it(2,4,4042);var g=0,v=Ti(i,"IV","");if(v){var E=oa(v.substr(2));if(E.byteLength!=16)throw new it(2,4,4048)}else g=Up(o.ca,"EXT-X-MEDIA-SEQUENCE",0);var S=gf(c(),Rr(i,"URI"),h),I=S.sort().join("");if(o=i.toString()+"-"+g+"-"+I,!e.ka.has(o)){var L={bitsKey:128,blockCipherMode:"CBC",iv:E,firstMediaSequenceNumber:g};switch(Rr(i,"METHOD")){case"AES-256":L.bitsKey=256;break;case"AES-256-CTR":L.bitsKey=256,L.blockCipherMode="CTR"}L.fetchKey=function(){var O,V,W,pe;return Qe(function(Me){if(Me.g==1)return e.L.has(I)||(O=ws(S,e.g.retryParameters),V=xd(e,O,6).promise,e.L.set(I,V)),x(Me,e.L.get(I),2);if(Me.g!=3){if(W=Me.h,!W.data||W.data.byteLength!=L.bitsKey/8)throw new it(2,4,4049);return pe={name:L.blockCipherMode=="CTR"?"AES-CTR":"AES-CBC",length:L.bitsKey},x(Me,l.crypto.subtle.importKey("raw",W.data,pe,!0,["decrypt"]),3)}L.cryptoKey=Me.h,L.fetchKey=void 0,ue(Me)})},e.ka.set(o,L)}return e.ka.get(o)}function Sk(e,i){e.u==null&&(i=la(i.ca,"EXT-X-START"))&&(e.u=Number(Rr(i,"TIME-OFFSET")))}function Tz(e,i){var o=la(i.ca,"EXT-X-PLAYLIST-TYPE");i=la(i.ca,"EXT-X-ENDLIST"),i=o&&o.value=="VOD"||i,o=o&&o.value=="EVENT"&&!i,o=!i&&!o,i?Pv(e,Nv):o?Pv(e,Ov):Pv(e,Mk)}function Q_(e,i){var o=1/0,c=i.segments;if(c.length)for(var h=c.length-1;0<=h;){var g=la(c[h].ca,"EXTINF");if(g){o=Number(g.value.split(",")[0]);break}h--}if(c=la(i.ca,"EXT-X-TARGETDURATION"),!c)throw new it(2,4,4024,"EXT-X-TARGETDURATION");c=Number(c.value),(h=la(i.ca,"EXT-X-PART-INF"))&&(e.P=Number(Rr(h,"PART-TARGET"))),i=la(i.ca,"EXT-X-SERVER-CONTROL"),e.fa&&e.P?(e.o=e.Tb?5*e.P<=o?Math.min(e.P,e.o):Math.min(o,e.o):Math.min(e.P,e.o),e.Fa=i?Number(Rr(i,"PART-HOLD-BACK")):0):(e.o=Math.min(o,e.o),o=i?Fp(i,"HOLD-BACK"):null,e.Aa=o?Number(o.value):0),e.La=Math.max(c,e.La)}function xk(e,i){var o=0;if(e.g.defaultPresentationDelay)o=e.g.defaultPresentationDelay;else if(e.Fa)o=e.Fa;else if(e.Aa)o=e.Aa;else{var c=i.segments.length,h=e.g.hls.liveSegmentsDelay;for(h>c-2&&(h=Math.max(1,c-2)),h=c-h;h<c;h++){var g=la(i.segments[h].ca,"EXTINF");o=g?o+Math.ceil(Number(g.value.split(",")[0])):o+e.La}}e.u&&0>e.u&&(o=Math.min(-e.u,o),e.u+=o),e.l.yh(0),e.l.jg(o),e.l.Gc(!1)}function Ak(e,i,o,c,h){var g=la(o,"EXT-X-MAP");if(!g)return null;var v=Rr(g,"URI"),E=gf(c(),v,h);if(v=[E.toString(),Ti(g,"BYTERANGE","")].join("-"),!e.sa.has(v)){var S=void 0,I=null,L=!1;o=T(o);for(var O=o.next();!O.done;O=o.next())O=O.value,O.name=="EXT-X-KEY"?(L=Rr(O,"METHOD"),Mv(L)&&O.id<g.id?(L=!1,S=_k(e,O,i,c,h)):L=L!="NONE"):O.name=="EXT-X-BYTERANGE"&&O.id<g.id&&(I=O);i=Ez(E,g,I,S,L),e.sa.set(v,i)}return e.sa.get(v)}function Ez(e,i,o,c,h){var g=0,v=null;return i=Ti(i,"BYTERANGE"),!i&&o&&(i=o.value),i&&(g=i.split("@"),v=Number(g[0]),g=Number(g[1]),v=g+v-1,c&&(o=v+1-g,o%16&&(v+=16-o%16))),new B(function(){return e},g,v,null,null,null,c,h)}function bz(e,i,o,c,h,g,v,E,S){function I(Wn){Wn=new vn(Wn).ab.split(".").pop();var Di=nS.get(v).get(Wn);return Di||(Di=tS.get(Wn)),Di}var L=c.ca,O=la(L,"EXTINF"),V=0,W=0,pe=null;c.Jb.length&&(e.m.isLowLatency=!0);var Me=null;if(!e.g.hls.ignoreManifestProgramDateTime){var De=la(L,"EXT-X-PROGRAM-DATE-TIME");De&&De.value&&(Me=sl(De.value),e.Ma=!0)}var Fe=$;if(la(L,"EXT-X-GAP")&&(e.m.gapCount++,Fe=2),!O){if(c.Jb.length==0)throw new it(2,4,4024,"EXTINF");if(!e.fa)return null}var We=[];De=!1;var gt=null,ht=!1,It=!1;if(e.fa&&c.Jb.length){V=i&&l.ReadableStream&&e.g.hls.allowLowLatencyByteRangeOptimization;for(var ot=Me,st={},_t=0;_t<c.Jb.length;st={Le:void 0,re:void 0},_t++){var xt=c.Jb[_t],Ht=_t==0?o:We[We.length-1],Pt=_t==0?h:Ht.endTime,jt=Number(Ti(xt,"DURATION"))||e.P;if(jt){var Gt=Pt+jt,Yt=0,Zt=null;if(xt.name=="EXT-X-PRELOAD-HINT"?(Yt=(Yt=Ti(xt,"BYTERANGE-START"))?Number(Yt):0,(Ht=Ti(xt,"BYTERANGE-LENGTH"))?Zt=Yt+Number(Ht)-1:Yt&&(Zt=Number.MAX_SAFE_INTEGER)):(Yt=Ti(xt,"BYTERANGE"),Zt=T(wk(Ht,Yt)),Yt=Zt.next().value,Zt=Zt.next().value),st.re=Ti(xt,"URI"),st.re){Ht=$,Ti(xt,"GAP")=="YES"&&(e.m.gapCount++,Ht=2,ht=!0),st.Le=null;var Xt=function(Wn){return function(){return Wn.Le==null&&(Wn.Le=gf(E(),Wn.re,g)),Wn.Le}}(st);V&&0<=Yt&&Zt!=null&&(gt=Xt,De=!0),Pt=new X(Pt,Gt,Xt,Yt,Zt,i,0,0,1/0,[],"",null,ot,Ht,S),xt.name=="EXT-X-PRELOAD-HINT"&&(Pt.Sf(),It=!0),Ti(xt,"INDEPENDENT")!="YES"&&0<_t&&Pt.Vc(),(st=I(st.re))&&(Pt.mimeType=st,Pk.has(st)&&(Pt.Y=null)),We.push(Pt),ot&&(ot+=jt)}}}}if(O){if(O=Number(O.value.split(",")[0]),O==0)return null;V=h+O}else if(We.length)V=We[We.length-1].endTime;else return null;De&&(ht||We[0].Sa!=0?(De=!1,gt=null):We=[]),(O=la(L,"EXT-X-BYTERANGE"))?(pe=T(wk(o,O.value)),W=pe.next().value,pe=pe.next().value):We.length&&(W=We[0].Sa,pe=We[We.length-1].wa),o="",O=null,v=="image"&&(o="1x1",L=la(L,"EXT-X-TILES"))&&(o=Rr(L,"LAYOUT"),(L=Ti(L,"DURATION"))&&(O=Number(L)));var En=null;return i=new X(h,V,function(){return gt?gt():(En==null&&(En=gf(E(),c.g,g)),En||[])},W,pe,i,0,0,1/0,We,o,O,Me,Fe,S,0<We.length&&!!c.g),(h=I(c.g))&&(i.mimeType=h,Pk.has(h)&&(i.Y=null)),De&&(e.Tb=!0,i.dh(),It&&i.Sf()),i}function wk(e,i){var o=0,c=null;return i&&(o=i.split("@"),i=Number(o[0]),o=o[1]?Number(o[1]):e.wa+1,c=o+i-1),[o,c]}function J_(e,i,o,c,h){if(o=="video"||o=="audio"){var g=e.l.m;if(g&&!Vm(e,o))for(i=Hl(i,"EXT-X-DATERANGE"),i=i.filter(function(Pt){return Fp(Pt,"START-DATE")!=null}).sort(function(Pt,jt){return Pt=Rr(Pt,"START-DATE"),jt=Rr(jt,"START-DATE"),Pt<jt?-1:Pt>jt?1:0}),o=0;o<i.length;o++){var v=i[o];try{var E=Rr(v,"ID");if(!e.ya.has(E)){var S=Rr(v,"START-DATE"),I=sl(S);if(!isNaN(I)){var L=Math.max(0,I-g),O=null,V=Ti(v,"END-DATE");if(V){var W=sl(V);if(!isNaN(W)&&(O=W-g,0>O))continue}if(O==null){var pe=Ti(v,"DURATION")||Ti(v,"PLANNED-DURATION");if(pe){var Me=parseFloat(pe);if(isNaN(Me)||(O=L+Me),0>I-g+Me)continue}}var De=Ti(v,"CLASS")||"com.apple.quicktime.HLS",Fe=Ti(v,"END-ON-NEXT")=="YES";if(O==null&&Fe){for(var We=o+1;We<i.length;We++){var gt=Ti(i[We],"CLASS")||"com.apple.quicktime.HLS";if(De==gt){var ht=Rr(i[We],"START-DATE"),It=sl(ht);if(!isNaN(It)&&It&&It>I){O=Math.max(0,It-g);break}}}if(O==null)continue}We=["CLASS","START-DATE","END-DATE","DURATION","END-ON-NEXT"];for(var ot=[],st=T(v.attributes),_t=st.next();!_t.done;_t=st.next()){var xt=_t.value;if(!We.includes(xt.name)){var Ht=ak(xt.value,c);(xt.name=="X-ASSET-URI"||xt.name=="X-ASSET-LIST")&&(Ht=gf(h(),xt.value,c)[0]),ot.push({key:xt.name,description:"",data:Ht,mimeType:null,pictureType:null})}}1<ot.length&&e.h.onMetadata(De,L,O,ot),e.ya.add(E)}}}catch{}}}}function Ik(e,i,o,c,h,g){var v=i.segments,E=void 0,S=Up(i.ca,"EXT-X-DISCONTINUITY-SEQUENCE",-1),I=Up(i.ca,"EXT-X-MEDIA-SEQUENCE",0),L=la(i.ca,"EXT-X-SKIP"),O=L?Number(Ti(L,"SKIPPED-SEGMENTS")):0,V=I+O,W=0;ao(e)&&o.has(V)&&(W=o.get(V)),W===0&&e.Ea==Ov&&0<o.size&&!o.has(V)&&e.l.i!=null&&(W=e.l.pb());var pe=[],Me=null;L=[];for(var De=0;De<v.length;De++){var Fe=v[De],We=De==0?W:Me.endTime;V=I+O+De,la(Fe.ca,"EXT-X-DISCONTINUITY")&&(S++,Me&&Me.Y&&(Me.Y.g=We));for(var gt=T(Fe.ca),ht=gt.next();!ht.done;ht=gt.next())ht=ht.value,ht.name=="EXT-X-KEY"&&(Mv(Rr(ht,"METHOD"))?E=_k(e,ht,i,h,c):E=void 0);o.set(V,We),gt=Ak(e,i,Fe.ca,h,c),(We=bz(e,gt,Me,Fe,We,c,g,h,E))&&((Me=Up(Fe.ca,"EXT-X-BITRATE"))?L.push({bitrate:Me,duration:We.endTime-We.startTime}):L.length&&(Me=L.pop(),Me.duration+=We.endTime-We.startTime,L.push(Me)),Me=We,We.i=S,Vm(e,g)&&e.K!=null&&V<e.K||pe.push(We))}if(i=void 0,L.length&&(i=L.reduce(function(It,ot){return It+ot.duration},0),i=Math.round(L.reduce(function(It,ot){return It+ot.bitrate*ot.duration},0)/i*1e3)),L=pe.some(function(It){return It.h!=null})){for(o={},c=0;c<pe.length;o={Xd:void 0,Wd:void 0,Qd:void 0,Dc:void 0,Pd:void 0},c++)if(o.Dc=pe[c],o.Dc.h==null)for(o.Wd=0,o.Xd=c,h=function(It){return function(){var ot=pe[It.Xd];if(ot){if(ot.h!=null)return ot.h+It.Wd;It.Wd-=ot.endTime-ot.startTime,It.Xd+=1}return null}}(o),o.Pd=0,o.Qd=c,v=function(It){return function(){var ot=pe[It.Qd];if(ot){if(ot!=It.Dc&&(It.Pd+=ot.endTime-ot.startTime),ot.h!=null)return ot.h+It.Pd;--It.Qd}return null}}(o);o.Dc.h==null;)o.Dc.h=v(),o.Dc.h==null&&(o.Dc.h=h())}if(L)for(o=T(pe),c=o.next();!c.done;c=o.next())for(h=c.value,c=h.h,h=T(h.g),v=h.next();!v.done;v=h.next())v=v.value,v.h=c,c+=v.endTime-v.startTime;if(o=e.ea,L&&o!=1/0&&!Vm(e,g))for(e=T(pe),g=e.next();!g.done;g=e.next())g.value.qg(o);return{segments:pe,bandwidth:i}}function Z_(e,i){if(e==zi){if(i=="vtt"||i=="wvtt")return"text/vtt";if(i&&i!=="")return"application/mp4"}return e!="image"||i&&i!="jpeg"?e=="audio"&&i=="mp4a.40.34"?"audio/mpeg":i=="mjpg"?"application/mp4":null:"image/jpeg"}function Lv(e){return e==zi?"text/vtt":nS.get(e).get("mp4")}function Ck(e,i){e=ao(e)?Math.trunc((i.length-1)/2):0;for(var o=i[e];o.dc()==2&&e+1<i.length;)e++,o=i[e];return{segment:o,segmentIndex:e}}function _z(e,i,o,c){var h,g,v,E,S,I,L,O,V,W,pe,Me,De;return Qe(function(Fe){switch(Fe.g){case 1:return h=Go,g=Ck(e,c),v=g.segment,v.status==2?Fe.return(Lv(i)):(E=v.N(),S=new vn(E[0]),I=S.ab.split(".").pop(),L=nS.get(i),(O=L.get(I))||(O=tS.get(I))||(O=Z_(i,o))?Fe.return(O):(W=1,pe=ws(E,e.g.retryParameters),$e(Fe,2),pe.method="HEAD",x(Fe,xd(e,pe,h,{type:W}).promise,4)));case 4:Me=Fe.h,V=Me.headers["content-type"],lt(Fe,3);break;case 2:if(De=et(Fe),!De||De.code!=1002&&De.code!=1001){Fe.s(3);break}return pe.method="GET",e.g.hls.allowRangeRequestsToGuessMimeType&&(pe.headers.Range="bytes=0-0"),x(Fe,xd(e,pe,h,{type:W}).promise,6);case 6:Me=Fe.h,V=Me.headers["content-type"];case 3:if(!V){Fe.s(7);break}if(O=V.toLowerCase().split(";")[0],O!="application/octet-stream"){Fe.s(8);break}if(Me.data.byteLength){Fe.s(9);break}return pe.method="GET",x(Fe,xd(e,pe,h,{type:W}).promise,10);case 10:Me=Fe.h;case 9:Zn(jn(Me.data))&&(O="video/mp2t");case 8:if(O!="application/octet-stream")return Fe.return(O);case 7:return Fe.return(Lv(i))}})}function kk(e,i,o,c,h,g,v){e&&(e.width=Number(i)||void 0,e.height=Number(o)||void 0,e.frameRate=Number(c)||void 0,e.hdr=h||void 0,e.videoLayout=g||void 0,e.colorGamut=v||void 0)}function eS(e,i,o){return xd(e,ws(i,e.g.retryParameters),0,{type:o?2:3})}function Dk(e){var i,o,c,h,g,v;return Qe(function(E){switch(E.g){case 1:return e.h?($e(E,2),i=Date.now(),x(E,e.update(),4)):E.return();case 4:o=Date.now(),ao(e)&&(c=(o-i)/1e3,e.Pb.sample(1,c),h=0<e.g.updatePeriod?e.g.updatePeriod:e.o,g=Math.max(0,h-vt(e.Pb)),e.B.da(g)),lt(E,3);break;case 2:if(v=et(E),!e.h)return E.return();if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.h.onError(v),E.return();v.severity=1,e.h.onError(v),e.B.da(.1);case 3:if(!e.h)return E.return();e.h.onManifestUpdated(),ue(E)}})}function ao(e){return e.Ea!=Nv}function Pv(e,i){e.Ea=i,e.l&&e.l.Gc(!ao(e)),ao(e)||e.B.stop()}function xd(e,i,o,c){if(!e.Z)throw new it(2,7,7001);return c||(c={}),c.isPreload=e.Qb(),i=e.h.networkingEngine.request(o,i,c),du(e.Z,i),i}function Mv(e){return e=="AES-128"||e=="AES-256"||e=="AES-256-CTR"}function Sz(e,i,o,c){var h,g,v,E,S,I;return Qe(function(L){if(L.g==1){if(o=="video/mp2t")throw new it(2,4,4040);if(l.shakaMediaKeysPolyfill==="apple")throw new it(2,4,4041);if(h=Rr(i,"METHOD"),g=["SAMPLE-AES","SAMPLE-AES-CTR"],!g.includes(h))return L.return(null);v="cenc",h=="SAMPLE-AES"&&(v="cbcs"),E=Rr(i,"URI"),S=Wa("com.apple.fps",v,[{initDataType:"sinf",initData:new Uint8Array(0),keyId:null}],E);var O=new vn(E).nb.replace(/-/g,"").toLowerCase();return(I=O.length===32&&/^[0-9a-f]+$/.test(O)?O:null)||!c?L.s(2):x(L,Lk(e,c),3)}return L.g!=2&&(I=L.h),I&&S.keyIds.add(I),L.return(S)})}function Rk(e,i,o,c,h,g){var v,E,S,I,L,O,V,W,pe,Me,De,Fe;return Qe(function(We){switch(We.g){case 1:if(o=="video/mp2t")throw new it(2,4,4040);if(l.shakaMediaKeysPolyfill==="apple")throw new it(2,4,4041);if(v=Rr(i,"METHOD"),E=["SAMPLE-AES","SAMPLE-AES-CTR"],!E.includes(v))return We.return(null);if(S=gf(c(),Rr(i,"URI"),g),S[0].startsWith("data:text/plain;base64,")){I=No(aa(S[0].split("data:text/plain;base64,").pop())),We.s(2);break}return L=S.sort().join(""),e.oa.has(L)||(O=ws(S,e.g.retryParameters),V=xd(e,O,6).promise,e.oa.set(L,V)),x(We,e.oa.get(L),3);case 3:W=We.h,I=No(W.data);case 2:if(pe="00000000000000000000000000000000",!h){We.s(4);break}return x(We,Lk(e,h),5);case 5:(Me=We.h)&&(pe=Me);case 4:return De=new Map,De.set(pe,I),Fe="cenc",v=="SAMPLE-AES"&&(Fe="cbcs"),We.return($c(De,Fe))}})}function Lk(e,i){var o,c,h,g;return Qe(function(v){return v.g==1?(o=null,e.pa.has(i)?(o=e.pa.get(i),v.s(2)):(c=pm(i.N(),i.uc(),i.tc(),e.g.retryParameters),h=Go,x(v,xd(e,c,h,{type:0}).promise,3))):(v.g!=2&&(g=v.h,i.Kd(g.data),o=RU(g.data),e.pa.set(i,o)),v.return(o))})}_e("shaka.hls.HlsParser",Dv);var tS=new Map().set("aac","audio/aac").set("ac3","audio/ac3").set("ec3","audio/ec3").set("mp3","audio/mpeg"),xz=new Map().set("mp4","audio/mp4").set("mp4a","audio/mp4").set("m4s","audio/mp4").set("m4i","audio/mp4").set("m4a","audio/mp4").set("m4f","audio/mp4").set("cmfa","audio/mp4").set("ts","video/mp2t").set("tsa","video/mp2t"),Az=new Map().set("mp4","video/mp4").set("mp4v","video/mp4").set("m4s","video/mp4").set("m4i","video/mp4").set("m4v","video/mp4").set("m4f","video/mp4").set("cmfv","video/mp4").set("ts","video/mp2t").set("tsv","video/mp2t"),wz=new Map().set("mp4","application/mp4").set("m4s","application/mp4").set("m4i","application/mp4").set("m4f","application/mp4").set("cmft","application/mp4").set("vtt","text/vtt").set("webvtt","text/vtt").set("ttml","application/ttml+xml"),Iz=new Map().set("jpg","image/jpeg").set("png","image/png").set("svg","image/svg+xml").set("webp","image/webp").set("avif","image/avif"),nS=new Map().set("audio",xz).set("video",Az).set("text",wz).set("image",Iz),Pk=new Set(["video/mp2t"].concat(k(ll))),Nv="VOD",Mk="EVENT",Ov="LIVE",Cz={Ph:Nv,Zj:Mk,gk:Ov};qu("application/x-mpegurl",function(){return new Dv}),qu("application/vnd.apple.mpegurl",function(){return new Dv});function Fv(e){return yv(e)}var kz=new Map().set("com.microsoft.playready",Fv).set("com.microsoft.playready.recommendation",Fv).set("com.microsoft.playready.software",Fv).set("com.microsoft.playready.hardware",Fv);function iS(){var e=this;this.h=this.g=null,this.l=[],this.j=null,this.u=1,this.i=null,this.C=new zt(5),this.o=new Li(function(){Dz(e)}),this.B=new Ho,this.m=new Map,this.A=function(){return!1}}p=iS.prototype,p.configure=function(e,i){this.g=e,i&&(this.A=i)},p.start=function(e,i){var o=this;return Qe(function(c){if(c.g==1)return o.l=[e],o.h=i,x(c,rS(o),2);if(!o.h)throw new it(2,7,7001);return c.return(o.j)})};function Dz(e){var i;Qe(function(o){switch(o.g){case 1:return $e(o,2),x(o,rS(e),4);case 4:lt(o,3);break;case 2:i=et(o),e.h&&(i.severity=1,e.h.onError(i));case 3:if(!e.h)return o.return();ue(o)}})}p.stop=function(){return this.g=this.h=null,this.l=[],this.j=null,this.o!=null&&(this.o.stop(),this.o=null),this.m.clear(),this.B.destroy()},p.update=function(){var e=this,i;return Qe(function(o){if(o.g==1)return $e(o,2),x(o,rS(e),4);if(o.g!=2)return lt(o,0);if(i=et(o),!e.h||!i)return o.return();e.h.onError(i),ue(o)})},p.onExpirationUpdated=function(){},p.onInitialVariantChosen=function(){},p.banLocation=function(){},p.setMediaElement=function(){};function rS(e){var i,o,c,h,g,v,E;return Qe(function(S){if(S.g==1)return i=ws(e.l,e.g.retryParameters),o=e.h.networkingEngine,c=Date.now(),h=o.request(0,i,{type:5,isPreload:e.A()}),du(e.B,h),x(S,h.promise,2);if(g=S.h,!e.h)return S.return();g.uri&&!e.l.includes(g.uri)&&e.l.unshift(g.uri);var I=g.uri,L=g.data,O=e.g.mss.manifestPreprocessor;if(O!=z0){if(dn("manifest.mss.manifestPreprocessor configuration","Please Use manifest.mss.manifestPreprocessorTXml instead."),L=qC(L,"SmoothStreamingMedia"),!L)throw new it(2,4,4046,I);O(L),L=sa(L.outerHTML)}var V=Ru(L,"SmoothStreamingMedia");if(!V)throw new it(2,4,4046,I);if(I=e.g.mss.manifestPreprocessorTXml,I!=j0&&I(V),e.i||(e.i=new Ei(null,0)),I=Ri(V,"IsLive",lc,!1))throw new it(2,4,4047);e.i.Gc(!I),O=Ri(V,"TimeScale",vs,1e7),L=Ri(V,"DVRWindowLength",vs),I&&(L===0||isNaN(L))&&(L=1/0);var W=Ri(V,"CanSeek",lc,!1);L===0&&W&&(L=1/0),W=null,L&&0<L&&(W=L/O),I&&!isNaN(e.g.availabilityWindowOverride)&&(W=e.g.availabilityWindowOverride),W==null&&(W=1/0),e.i.Ce(W),L=Ri(V,"Duration",vs,1/0),I||e.i.bb(L/O),I={variants:[],textStreams:[],timescale:O,duration:L/O};var pe;for(W=or(V,"Protection"),O=e.g.mss.keySystemsBySystemId,L=[],W=T(W),pe=W.next();!pe.done;pe=W.next())L=L.concat(or(pe.value,"ProtectionHeader"));if(L.length){for(W=[],pe=0;pe<L.length;pe++){var Me=L[pe],De=Me.attributes.SystemID.toLowerCase(),Fe=O[De];if(Fe){var We;e:{if(We=TC(Me)){We=T(pa(We,"DATA"));for(var gt=We.next();!gt.done;gt=We.next())if(gt=is(gt.value,"KID")){We=aa(ns(gt)),We=new Uint8Array([We[3],We[2],We[1],We[0],We[5],We[4],We[7],We[6]].concat(k(We.slice(8)))),We=No(We);break e}}We=null}gt=aa(ns(Me)),De=oa(De.replace(/-/g,"")),De=[{initData:up(gt,De,new Set,0),initDataType:"cenc",keyId:We}],De=Wa(Fe,"cenc",De),We&&De.keyIds.add(We),(Fe=kz.get(Fe))&&(De.licenseServerUri=Fe(Me)),W.push(De)}}O=W}else O=[];for(pe=O,W=[],O=[],L=[],V=or(V,"StreamIndex"),V=T(V),Me=V.next();!Me.done;Me=V.next()){Me=Me.value,Fe=or(Me,"QualityLevel"),De=I.timescale,We=I.duration,gt=or(Me,"c");for(var ht=[],It=0,ot=0;ot<gt.length;++ot){var st=gt[ot],_t=gt[ot+1],xt=Ri(st,"t",vs),Ht=Ri(st,"d",vs);if(st=Ri(st,"r",Zs),!Ht)break;if(xt=xt??It,(st=st||0)&&st--,0>st)if(_t){if(_t=Ri(_t,"t",vs),_t==null)break;if(xt>=_t)break;st=Math.ceil((_t-xt)/Ht)-1}else{if(We==1/0)break;if(xt/De>=We)break;st=Math.ceil((We*De-xt)/Ht)-1}for(_t=0;_t<=st;++_t)It=xt+Ht,ht.push({start:xt/De,end:It/De,xg:xt}),xt=It}for(De=ht,Fe=T(Fe),We=Fe.next();!We.done;We=Fe.next())(We=Rz(e,Me,We.value,De,pe,I))&&(We.type!="audio"||e.g.disableAudio?We.type!="video"||e.g.disableVideo?We.type!=zi||e.g.disableText||L.push(We):O.push(We):W.push(We))}for(V=[],W=T(0<W.length?W:[null]),pe=W.next();!pe.done;pe=W.next())for(pe=pe.value,Me=T(0<O.length?O:[null]),ht=Me.next();!ht.done;ht=Me.next())Fe=V,De=Fe.push,We=e,gt=pe,ht=ht.value,ot=0,gt&&gt.bandwidth&&0<gt.bandwidth&&(ot+=gt.bandwidth),ht&&ht.bandwidth&&0<ht.bandwidth&&(ot+=ht.bandwidth),We={id:We.u++,language:gt?gt.language:"und",disabledUntilTime:0,primary:!!gt&&gt.primary||!!ht&&ht.primary,audio:gt,video:ht,bandwidth:ot,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},De.call(Fe,We);I.variants=V,I.textStreams=L,e.j?(e.j.variants=I.variants,e.j.textStreams=I.textStreams,e.h.filter(e.j)):(e.j={presentationTimeline:e.i,variants:I.variants,textStreams:I.textStreams,imageStreams:[],offlineSessionIds:[],sequenceMode:e.g.mss.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"MSS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:null},e.i.ie()),Promise.resolve(),v=Date.now(),E=(v-c)/1e3,e.C.sample(1,E),ue(S)})}function Rz(e,i,o,c,h,g){var v=i.attributes.Type;if(v!=="audio"&&v!=="video"&&v!=="text")return kt("Ignoring unrecognized type:",v),null;var E=i.attributes.Language,S=e.u++,I=Ri(o,"Bitrate",kl),L=Ri(o,"MaxWidth",kl),O=Ri(o,"MaxHeight",kl),V=Ri(o,"Channels",kl),W=Ri(o,"SamplingRate",kl),pe=g.duration;c.length&&(pe=c[c.length-1].end-c[0].start);var Me=e.i.getDuration();e.i.bb(Math.min(pe,Me));var De={id:S,originalId:i.attributes.Name||String(S),groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"",codecs:"",frameRate:void 0,pixelAspectRatio:void 0,bandwidth:I||0,width:L||void 0,height:O||void 0,kind:"",encrypted:0<h.length,drmInfos:h,keyIds:new Set,language:Sr(E||"und"),originalLanguage:E,label:"",type:"",primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:[],roles:[],forced:!1,channelsCount:V,audioSamplingRate:W,spatialAudio:!1,closedCaptions:null,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,matchedStreams:[],mssPrivateData:{duration:pe,timescale:g.timescale,codecPrivateData:null},accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null};if((h=i.attributes.Subtype)&&((h=Fz.get(h))&&De.roles.push(h),h==="main"&&(De.primary=!0)),h=o.attributes.FourCC,(h===null||h==="")&&(h=i.attributes.FourCC),!h){if(v==="audio")h="AAC";else if(v==="video")return kt('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),null}if(!Oz.includes(h.toUpperCase()))return kt("Codec not supported:",h),null;switch(o=Lz(o,v,h,De),De.mssPrivateData.codecPrivateData=o,v){case"audio":if(!o)return kt("Quality unsupported without CodecPrivateData",v),null;De.type="audio",De.mimeType="mss/audio/mp4",De.codecs=Pz(h,o);break;case"video":if(!o)return kt("Quality unsupported without CodecPrivateData",v),null;De.type="video",De.mimeType="mss/video/mp4",De.codecs=Mz(o);break;case"text":De.type=zi,De.mimeType="application/mp4",(h==="TTML"||h==="DFXP")&&(De.codecs="stpp")}return De.fullMimeTypes.add(Xr(De.mimeType,De.codecs)),De.createSegmentIndex=function(){if(De.segmentIndex)return Promise.resolve();if(e.m.has(De.id))var Fe=e.m.get(De.id);else Fe=[],De.type=="video"&&(Fe=De.mssPrivateData.codecPrivateData.split("00000001").slice(1)),Fe={id:De.id,type:De.type,codecs:De.codecs,encrypted:De.encrypted,timescale:De.mssPrivateData.timescale,duration:De.mssPrivateData.duration,lb:Fe,ra:new Uint8Array([]),Ca:new Uint8Array([]),Ia:0,Ka:0,data:null,stream:De},Fe=sf(new cd([Fe])),e.m.set(De.id,Fe);return Fe=Nz(e,new B(function(){return[]},0,null,k0(De),De.mssPrivateData.timescale,Fe,null,De.encrypted),De,i,c),De.segmentIndex=new pr(Fe),Promise.resolve()},De.closeSegmentIndex=function(){De.segmentIndex&&(De.segmentIndex.release(),De.segmentIndex=null)},De}function Lz(e,i,o,c){if(e=e.attributes.CodecPrivateData)return e;if(i!=="audio")return null;i=c.channelsCount||2,e=c.audioSamplingRate||44100;var h={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12};return c=h[e],o==="AACH"?(o=new Uint8Array(4),e=h[2*e],o[0]=40|c>>1,o[1]=c<<7|i<<3|e>>1,o[2]=e<<7|8,o[3]=0,i=new Uint16Array(2),i[0]=(o[0]<<8)+o[1],i[1]=(o[2]<<8)+o[3],i[0].toString(16)+i[1].toString(16)):(o=new Uint8Array(2),o[0]=16|c>>1,o[1]=c<<7|i<<3,i=new Uint16Array(1),i[0]=(o[0]<<8)+o[1],i[0].toString(16))}function Pz(e,i){var o=0;return e==="AACH"&&(o=5),i?o===0&&(o=(parseInt(i.substr(0,2),16)&248)>>3):(o=2,e==="AACH"&&(o=5)),"mp4a.40."+o}function Mz(e){var i=/00000001[0-9]7/.exec(e);return i.length&&e?"avc1."+e.substr(e.indexOf(i[0])+10,6):""}function Nz(e,i,o,c,h){var g=c.attributes.Url.replace("{bitrate}",String(o.bandwidth));c=[],h=T(h);for(var v=h.next(),E={};!v.done;E={Fe:void 0},v=h.next())E.Fe=v.value,c.push(new X(E.Fe.start,E.Fe.end,function(S){return function(){return ts(e.l,[g.replace("{start time}",String(S.Fe.xg))])}}(E),0,null,i,0,0,o.mssPrivateData.duration));return c}_e("shaka.mss.MssParser",iS);var Oz="AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "),Fz=new Map().set("CAPT","main").set("SUBT","alternate").set("DESC","main");qu("application/vnd.ms-sstr+xml",function(){return new iS});function Nk(e,i,o,c,h,g,v){if(200<=o&&299>=o&&o!=202||o==304)return{uri:h||c,originalUri:c,data:i,status:o,headers:e,fromCache:!!e["x-shaka-from-cache"],originalRequest:g};g=null;try{g=da(i)}catch{}throw new it(o==401||o==403?2:1,1,1001,c,o,g,e,v,h||c)}function sS(){}function Uv(e,i,o,c,h,g){var v=new qz;vc(i.headers).forEach(function(L,O){v.append(O,L)});var E=new zz,S={Gg:!1,Jh:!1};if(e=Uz(e,i,o,{body:i.body||void 0,headers:v,method:i.method,signal:E.signal,credentials:i.allowCrossSiteCredentials?"include":void 0},S,c,h,i.streamDataCallback,g.minBytesForProgressEvents||0),e=new Fi(e,function(){return S.Gg=!0,E.abort(),Promise.resolve()}),i=i.retryParameters.timeout){var I=new Li(function(){S.Jh=!0,E.abort()});I.da(i/1e3),e.finally(function(){I.stop()})}return e}function Uz(e,i,o,c,h,g,v,E,S){var I,L,O,V,W,pe,Me,De,Fe,We,gt,ht,It,ot;return Qe(function(st){switch(st.g){case 1:return I=Bz,L=jz,V=new ArrayBuffer(0),pe=W=0,Me=Date.now(),$e(st,2),x(st,I(e,c),4);case 4:if(O=st.h,v(Ok(O.headers)),c.method=="HEAD"){st.s(5);break}return Fe=(De=O.headers.get("Content-Length"))?parseInt(De,10):0,O.body?(We=O.clone().body.getReader(),gt=function(_t){function xt(){var Ht,Pt,jt,Gt;return Qe(function(Yt){switch(Yt.g){case 1:return $e(Yt,2),x(Yt,We.read(),4);case 4:Ht=Yt.h,lt(Yt,3);break;case 2:return et(Yt),Yt.return();case 3:if(Ht.done){Yt.s(5);break}if(W+=Ht.value.byteLength,!E){Yt.s(5);break}return x(Yt,E(Ht.value),5);case 5:Pt=Date.now(),jt=W-pe,(100<Pt-Me&&jt>=S||Ht.done)&&(Gt=Ht.done?0:Fe-W,g(Pt-Me,jt,Gt),pe=W,Me=Pt),Ht.done?_t.close():(_t.enqueue(Ht.value),xt()),ue(Yt)}})}xt()},new L({start:gt}),x(st,O.arrayBuffer(),8)):x(st,O.arrayBuffer(),9);case 8:V=st.h,st.s(5);break;case 9:V=st.h,ht=Date.now(),g(ht-Me,V.byteLength,0);case 5:lt(st,3);break;case 2:throw It=et(st),h.Gg?new it(1,1,7001,e,o):h.Jh?new it(1,1,1003,e,o):new it(1,1,1002,e,It,o);case 3:return ot=Ok(O.headers),st.return(Nk(ot,V,O.status,e,O.url,i,o))}})}function Ok(e){var i={};return e.forEach(function(o,c){i[c.trim()]=o}),i}function Fk(){if(l.ReadableStream)try{new ReadableStream({})}catch{return!1}else return!1;if(l.Response){if(!new Response("").body)return!1}else return!1;return!(!l.fetch||"polyfill"in l.fetch||!l.AbortController)}_e("shaka.net.HttpFetchPlugin",sS),sS.isSupported=Fk,sS.parse=Uv;var Bz=l.fetch,zz=l.AbortController,jz=l.ReadableStream,qz=l.Headers;Fk()&&(To("http",Uv,2,!0),To("https",Uv,2,!0),To("blob",Uv,2,!0));function Uk(){}function Bv(e,i,o,c,h,g){var v=new Hz,E=Date.now(),S=0,I=new Promise(function(L,O){v.open(i.method,e,!0),v.responseType="arraybuffer",v.timeout=i.retryParameters.timeout,v.withCredentials=i.allowCrossSiteCredentials,v.onabort=function(){O(new it(1,1,7001,e,o))};var V=!1;v.onreadystatechange=function(){if(v.readyState==2&&!V){var pe=Bk(v);h(pe),V=!0}},v.onload=function(pe){var Me=Bk(v),De=v.response;try{c(Date.now()-E,pe.loaded-S,0);var Fe=Nk(Me,De,v.status,e,v.responseURL,i,o);L(Fe)}catch(We){O(We)}},v.onerror=function(pe){O(new it(1,1,1002,e,pe,o))},v.ontimeout=function(){O(new it(1,1,1003,e,o))},v.onprogress=function(pe){var Me=Date.now(),De=g.minBytesForProgressEvents||0,Fe=pe.loaded-S;(100<Me-E&&Fe>=De||pe.lengthComputable&&pe.loaded==pe.total)&&(c(Me-E,Fe,v.readyState==4?0:pe.total-pe.loaded),S=pe.loaded,E=Me)};for(var W in i.headers)v.setRequestHeader(W.toLowerCase(),i.headers[W]);v.send(i.body)});return new Fi(I,function(){return v.abort(),Promise.resolve()})}function Bk(e){var i=e.getAllResponseHeaders().trim().split(`\r
`);e={},i=T(i);for(var o=i.next();!o.done;o=i.next())o=o.value.split(": "),e[o[0].toLowerCase()]=o.slice(1).join(": ");return e}_e("shaka.net.HttpXHRPlugin",Uk),Uk.parse=Bv;var Hz=l.XMLHttpRequest;To("http",Bv,1,!0),To("https",Bv,1,!0),To("blob",Bv,1,!0);function zk(e,i,o,c,h){this.g=e,this.i=i,this.groupId=o,this.h=c,this.j=h}function aS(e){var i=e.Ib(!1);return i?_s(i):e.N().map(function(o){return"{"+encodeURI(o.split("#xywh=")[0])+"}"}).join("")+":"+e.Sa+":"+e.wa}function Gz(e,i){return pm(e.g.N(),e.g.Sa,e.g.wa,i.streaming.retryParameters)}function jk(){this.g=this.j=this.i=0,this.h=new Map,this.l=0}function qk(e,i){e.i+=i;var o=e.l;return e.l++,e.h.set(o,i),o}jk.prototype.close=function(e,i){if(this.h.has(e)){var o=this.h.get(e);this.h.delete(e),this.j+=o,this.g+=i}};function Hk(e){return e.i==0?0:e.j/e.i}function Gk(e){var i=this;this.u=e,this.i=new Map,this.h=new ld(function(){return oS(i).catch(function(){})}),this.j=[],this.o=function(){},this.m=function(){},this.g=new jk,this.l=!1}Gk.prototype.destroy=function(){return this.h.destroy()};function Vz(e,i,o){e.o=i,e.m=o}function oS(e){e.l=!0;var i=e.j.map(function(o){return o()});return e.j=[],Promise.all(i)}function $z(e,i,o,c,h,g){Lr(e.h);var v=(e.i.get(i)||Promise.resolve()).then(function(){var E,S,I,L,O,V,W;return Qe(function(pe){if(pe.g==1)return x(pe,Wz(e,o),2);if(E=pe.h,e.h.g)throw new it(2,9,7001);if(h)for(L in S=jn(E),I=new $g(S),I.data)O=Number(L),V=I.data[O],W=I.g[O],e.m(V,W);return e.g.close(c,E.byteLength),e.o(Hk(e.g),e.g.g),pe.return(g(E))})});e.i.set(i,v)}function Kz(e,i,o,c,h,g){Lr(e.h);var v=(e.i.get(i)||Promise.resolve()).then(function(){if(e.h.g)throw new it(2,9,7001);if(h){var E=jn(o);E=new $g(E);for(var S in E.data){var I=Number(S);e.m(E.data[I],E.g[I])}}return e.g.close(c,o.byteLength),e.o(Hk(e.g),e.g.g),g(o)});e.i.set(i,v)}function Yz(e){return Qe(function(i){return i.g==1?x(i,Promise.all(e.i.values()),2):i.return(e.g.g)})}function Wz(e,i){var o,c,h,g;return Qe(function(v){return v.g==1?(o=Go,c=e.u.request(o,i),h=function(){return c.abort()},e.j.push(h),x(v,c.promise,2)):(g=v.h,fa(e.j,h),v.return(g.data))})}function zv(e,i){var o=this;this.i=e,this.h=e.objectStore(i),this.g=new mr,e.onabort=function(c){c.preventDefault(),o.g.reject()},e.onerror=function(c){c.preventDefault(),o.g.reject()},e.oncomplete=function(){o.g.resolve()}}zv.prototype.abort=function(){var e=this;return Qe(function(i){if(i.g==1){try{e.i.abort()}catch{}return $e(i,2),x(i,e.g,4)}if(i.g!=2)return lt(i,0);et(i),ue(i)})};function lS(e,i){return new Promise(function(o,c){var h=e.h.openCursor();h.onerror=c,h.onsuccess=function(){var g;return Qe(function(v){if(v.g==1)return h.result==null?(o(),v.return()):(g=h.result,x(v,i(g.key,g.value,g),2));g.continue(),ue(v)})}})}zv.prototype.store=function(){return this.h},zv.prototype.promise=function(){return this.g};function uS(e){this.h=e,this.g=[]}uS.prototype.destroy=function(){return Promise.all(this.g.map(function(e){return e.abort()}))};function vh(e,i){return jv(e,i,"readwrite")}function jv(e,i,o){o=e.h.transaction([i],o);var c=new zv(o,i);return e.g.push(c),c.promise().then(function(){fa(e.g,c)},function(){fa(e.g,c)}),c}function Th(e,i,o){this.h=new uS(e),this.i=i,this.g=o}p=Th.prototype,p.destroy=function(){return this.h.destroy()},p.hasFixedKeySpace=function(){return!0},p.addSegments=function(){return Vk(this.i)},p.removeSegments=function(e,i){return $k(this,this.i,e,i)},p.getSegments=function(e){var i=this,o;return Qe(function(c){return c.g==1?x(c,Kk(i,i.i,e),2):(o=c.h,c.return(o.map(function(h){return i.Ig(h)})))})},p.addManifests=function(){return Vk(this.g)},p.updateManifest=function(){return Promise.reject(new it(2,9,9016,"Cannot modify values in "+this.g))};function Xz(e,i,o){e=vh(e.h,e.g);var c=e.store();return c.get(i).onsuccess=function(){c.put(o,i)},e.promise()}p.updateManifestExpiration=function(e,i){var o=vh(this.h,this.g),c=o.store();return c.get(e).onsuccess=function(h){(h=h.target.result)&&(h.expiration=i,c.put(h,e))},o.promise()},p.removeManifests=function(e,i){return $k(this,this.g,e,i)},p.getManifests=function(e){var i=this,o;return Qe(function(c){return c.g==1?x(c,Kk(i,i.g,e),2):(o=c.h,c.return(Promise.all(o.map(function(h){return i.jd(h)}))))})},p.getAllManifests=function(){var e=this,i,o;return Qe(function(c){return c.g==1?(i=jv(e.h,e.g,"readonly"),o=new Map,x(c,lS(i,function(h,g){var v;return Qe(function(E){if(E.g==1)return x(E,e.jd(g),2);v=E.h,o.set(h,v),ue(E)})}),2)):c.g!=3?x(c,i.promise(),3):c.return(o)})},p.Ig=function(e){return e},p.jd=function(e){return Promise.resolve(e)};function Vk(e){return Promise.reject(new it(2,9,9011,"Cannot add new value to "+e))}p.add=function(e,i){var o=this,c,h,g,v,E,S,I;return Qe(function(L){if(L.g==1){for(c=vh(o.h,e),h=c.store(),g=[],v=T(i),E=v.next(),S={};!E.done;S={cg:void 0},E=v.next())I=E.value,S.cg=h.add(I),S.cg.onsuccess=function(O){return function(){g.push(O.cg.result)}}(S);return x(L,c.promise(),2)}return L.return(g)})};function $k(e,i,o,c){e=vh(e.h,i),i=e.store(),o=T(o);for(var h=o.next(),g={};!h.done;g={Qf:void 0},h=o.next())g.Qf=h.value,i.delete(g.Qf).onsuccess=function(v){return function(){return c(v.Qf)}}(g);return e.promise()}function Kk(e,i,o){var c,h,g,v,E,S,I;return Qe(function(L){if(L.g==1){for(c=jv(e.h,i,"readonly"),h=c.store(),g={},v=[],E=T(o),S=E.next(),I={};!S.done;I={we:void 0,ee:void 0},S=E.next())I.ee=S.value,I.we=h.get(I.ee),I.we.onsuccess=function(O){return function(){O.we.result==null&&v.push(O.ee),g[O.ee]=O.we.result}}(I);return x(L,c.promise(),2)}if(v.length)throw new it(2,9,9012,"Could not find values for "+v);return L.return(o.map(function(O){return g[O]}))})}function $m(e){this.g=new uS(e)}$m.prototype.destroy=function(){return this.g.destroy()},$m.prototype.getAll=function(){var e=this,i,o;return Qe(function(c){return c.g==1?(i=jv(e.g,"session-ids","readonly"),o=[],x(c,lS(i,function(h,g){o.push(g)}),2)):c.g!=3?x(c,i.promise(),3):c.return(o)})},$m.prototype.add=function(e){var i=vh(this.g,"session-ids"),o=i.store();e=T(e);for(var c=e.next();!c.done;c=e.next())o.add(c.value);return i.promise()},$m.prototype.remove=function(e){var i=this,o;return Qe(function(c){return c.g==1?(o=vh(i.g,"session-ids"),x(c,lS(o,function(h,g,v){e.includes(g.sessionId)&&v.delete()}),2)):x(c,o.promise(),0)})};function Ao(){this.g=new Map}Ao.prototype.destroy=function(){for(var e=[],i=T(this.g.values()),o=i.next();!o.done;o=i.next())e.push(o.value.destroy());return this.g.clear(),Promise.all(e)},Ao.prototype.init=function(){var e=this;Km.forEach(function(h,g){(h=h())&&e.g.set(g,h)});for(var i=[],o=T(this.g.values()),c=o.next();!c.done;c=o.next())i.push(c.value.init());return Promise.all(i)};function Yk(e){var i=null;if(e.g.forEach(function(o,c){o.getCells().forEach(function(h,g){h.hasFixedKeySpace()||i||(i={path:{zb:c,Ta:g},Ta:h})})}),i)return i;throw new it(2,9,9013,"Could not find a cell that supports add-operations")}function Qz(e,i){e.g.forEach(function(o,c){o.getCells().forEach(function(h,g){i({zb:c,Ta:g},h)})})}function qv(e,i,o){if(e=e.g.get(i),!e)throw new it(2,9,9013,"Could not find mechanism with name "+i);if(i=e.getCells().get(o),!i)throw new it(2,9,9013,"Could not find cell with name "+o);return i}function Jz(e,i){e.g.forEach(function(o){i(o.getEmeSessionCell())})}function Zz(e){var i=Array.from(e.g.keys());if(!i.length)throw new it(2,9,9e3,"No supported storage mechanisms found");return e.g.get(i[0]).getEmeSessionCell()}function e8(e){var i,o,c;return Qe(function(h){return h.g==1?(i=Array.from(e.g.values()),o=0<i.length,o||(c=Km,c.forEach(function(g){(g=g())&&i.push(g)})),x(h,Promise.all(i.map(function(g){return g.erase()})),2)):o?h.s(0):x(h,Promise.all(i.map(function(g){return g.destroy()})),0)})}function Wk(e,i){Km.set(e,i)}_e("shaka.offline.StorageMuxer",Ao),Ao.unregister=function(e){Km.delete(e)},Ao.register=Wk,Ao.prototype.destroy=Ao.prototype.destroy;var Km=new Map;function Ym(){Th.apply(this,arguments)}j(Ym,Th),Ym.prototype.updateManifestExpiration=function(e,i){var o=this,c,h,g;return Qe(function(v){return c=vh(o.h,o.g),h=c.store(),g=new mr,h.get(e).onsuccess=function(E){(E=E.target.result)?(E.expiration=i,h.put(E),g.resolve()):g.reject(new it(2,9,9012,"Could not find values for "+e))},x(v,Promise.all([c.promise(),g]),0)})},Ym.prototype.jd=function(e){var i,o,c,h,g,v;return Qe(function(E){if(E.g==1){for(i=[],o=0;o<e.periods.length;++o)c=o==e.periods.length-1?e.duration:e.periods[o+1].startTime,h=c-e.periods[o].startTime,g=t8(e.periods[o],h),i.push(g);return x(E,MC(i),2)}return v=E.h,E.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:e.expiration==null?1/0:e.expiration,streams:v,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata,sequenceMode:!1})})};function t8(e,i){i8(e);for(var o=T(e.streams),c=o.next();!c.done;c=o.next());return e.streams.map(function(h){return n8(h,e.startTime,i)})}function n8(e,i,o){var c=e.initSegmentUri?Xk(e.initSegmentUri):null,h=i+e.presentationTimeOffset,g=i+o;return{id:e.id,originalId:null,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,initSegmentKey:c,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(v){var E=Xk(v.uri);return{startTime:i+v.startTime,endTime:i+v.endTime,dataKey:E,initSegmentKey:c,appendWindowStart:i,appendWindowEnd:g,timestampOffset:h,tilesLayout:"",mimeType:null,codecs:null,thumbnailSprite:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1,isAudioMuxedInVideo:!1}}Ym.prototype.Ig=function(e){return{data:e.data}};function Xk(e){var i;if((i=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(i=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(i[1]);throw new it(2,9,9004,"Could not parse uri "+e)}function i8(e){var i=e.streams.filter(function(E){return E.contentType=="audio"});if(e=e.streams.filter(function(E){return E.contentType=="video"}),!i.every(function(E){return E.variantIds})||!e.every(function(E){return E.variantIds})){for(var o=T(i),c=o.next();!c.done;c=o.next())c.value.variantIds=[];for(o=T(e),c=o.next();!c.done;c=o.next())c.value.variantIds=[];if(o=0,e.length&&!i.length){c=o++;for(var h=T(e),g=h.next();!g.done;g=h.next())g.value.variantIds.push(c)}if(!e.length&&i.length)for(c=o++,h=T(i),g=h.next();!g.done;g=h.next())g.value.variantIds.push(c);if(e.length&&i.length)for(i=T(i),c=i.next();!c.done;c=i.next())for(c=c.value,h=T(e),g=h.next();!g.done;g=h.next()){g=g.value;var v=o++;c.variantIds.push(v),g.variantIds.push(v)}}}function Hv(){Th.apply(this,arguments)}j(Hv,Th),Hv.prototype.jd=function(e){var i,o,c,h,g,v;return Qe(function(E){if(E.g==1){for(i=[],o=0;o<e.periods.length;++o){c=o==e.periods.length-1?e.duration:e.periods[o+1].startTime,h=c-e.periods[o].startTime;for(var S=e.periods[o],I=[],L=T(S.streams),O=L.next();!O.done;O=L.next())O=O.value,O.variantIds.length!=0&&I.push(r8(O,S.startTime,S.startTime+h));g=I,i.push(g)}return x(E,MC(i),2)}return v=E.h,E.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:e.expiration==null?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:v,sequenceMode:!1})})};function r8(e,i,o){return{id:e.id,originalId:e.originalId,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(c){return{startTime:i+c.startTime,endTime:i+c.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:i,appendWindowEnd:o,timestampOffset:i-e.presentationTimeOffset,dataKey:c.dataKey,tilesLayout:"",mimeType:null,codecs:null,thumbnailSprite:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1,isAudioMuxedInVideo:!1}}function cS(){Th.apply(this,arguments)}j(cS,Th),p=cS.prototype,p.hasFixedKeySpace=function(){return!1},p.addSegments=function(e){return this.add(this.i,e)},p.addManifests=function(e){return this.add(this.g,e)},p.updateManifest=function(e,i){return Xz(this,e,i)},p.jd=function(e){return e.expiration==null&&(e.expiration=1/0),Promise.resolve(e)};function Qk(){this.m=this.j=this.i=this.h=this.g=this.l=null}p=Qk.prototype,p.init=function(){var e=this,i=new mr,o=!1,c=new Li(function(){o=!0,i.reject(new it(2,9,9017))});c.da(5);var h=l.indexedDB.open("shaka_offline_db",5);return h.onsuccess=function(){if(!o){var g=h.result;e.l=g;var v=g.objectStoreNames;v=v.contains("manifest")&&v.contains("segment")?new Ym(g,"segment","manifest"):null,e.g=v,v=g.objectStoreNames,v=v.contains("manifest-v2")&&v.contains("segment-v2")?new Hv(g,"segment-v2","manifest-v2"):null,e.h=v,v=g.objectStoreNames,v=v.contains("manifest-v3")&&v.contains("segment-v3")?new Hv(g,"segment-v3","manifest-v3"):null,e.i=v,v=g.objectStoreNames,v=v.contains("manifest-v5")&&v.contains("segment-v5")?new cS(g,"segment-v5","manifest-v5"):null,e.j=v,g=g.objectStoreNames.contains("session-ids")?new $m(g):null,e.m=g,c.stop(),i.resolve()}},h.onupgradeneeded=function(){for(var g=h.result,v=T(["segment-v5","manifest-v5","session-ids"]),E=v.next();!E.done;E=v.next())E=E.value,g.objectStoreNames.contains(E)||g.createObjectStore(E,{autoIncrement:!0})},h.onerror=function(g){o||(i.reject(new it(2,9,9001,h.error)),c.stop(),g.preventDefault())},i},p.destroy=function(){var e=this;return Qe(function(i){switch(i.g){case 1:if(!e.g){i.s(2);break}return x(i,e.g.destroy(),2);case 2:if(!e.h){i.s(4);break}return x(i,e.h.destroy(),4);case 4:if(!e.i){i.s(6);break}return x(i,e.i.destroy(),6);case 6:if(!e.j){i.s(8);break}return x(i,e.j.destroy(),8);case 8:if(!e.m){i.s(10);break}return x(i,e.m.destroy(),10);case 10:e.l&&e.l.close(),ue(i)}})},p.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},p.getEmeSessionCell=function(){return this.m},p.erase=function(){var e=this;return Qe(function(i){switch(i.g){case 1:if(!e.g){i.s(2);break}return x(i,e.g.destroy(),2);case 2:if(!e.h){i.s(4);break}return x(i,e.h.destroy(),4);case 4:if(!e.i){i.s(6);break}return x(i,e.i.destroy(),6);case 6:if(!e.j){i.s(8);break}return x(i,e.j.destroy(),8);case 8:return e.l&&e.l.close(),x(i,s8(),10);case 10:return e.l=null,e.g=null,e.h=null,e.i=null,e.j=null,x(i,e.init(),0)}})};function s8(){var e=new mr,i=l.indexedDB.deleteDatabase("shaka_offline_db");return i.onblocked=function(){},i.onsuccess=function(){e.resolve()},i.onerror=function(o){e.reject(new it(2,9,9001,i.error)),o.preventDefault()},e}Wk("idb",function(){return(!Bi()||Bi()&&Ms())&&!ca()&&l.indexedDB?new Qk:null});function Ac(e,i,o,c){this.g=e,this.i=i,this.h=o,this.l=c,this.j=["offline:",e,"/",i,"/",o,"/",c].join("")}Ac.prototype.zb=function(){return this.i},Ac.prototype.Ta=function(){return this.h},Ac.prototype.key=function(){return this.l},Ac.prototype.toString=function(){return this.j};function dS(e){if(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e),e==null)return null;var i=e[1];if(i!="manifest"&&i!="segment")return null;var o=e[2];if(!o)return null;var c=e[3];return c&&i!=null?new Ac(i,o,c,Number(e[4])):null}function Jk(e,i){this.h=e,this.g=i}function Zk(e,i){var o=new Ei(null,0);o.bb(i.duration);var c=i.streams.filter(function(I){return I.type=="audio"}),h=i.streams.filter(function(I){return I.type=="video"});c=a8(e,c,h,o),h=i.streams.filter(function(I){return I.type==zi}).map(function(I){return Gv(e,I,o)});var g=i.streams.filter(function(I){return I.type=="image"}).map(function(I){return Gv(e,I,o)}),v=i.drmInfo?[i.drmInfo]:[];if(i.drmInfo)for(var E=T(c.values()),S=E.next();!S.done;S=E.next())S=S.value,S.audio&&S.audio.encrypted&&(S.audio.drmInfos=v),S.video&&S.video.encrypted&&(S.video.drmInfos=v);return{presentationTimeline:o,offlineSessionIds:i.sessionIds,variants:Array.from(c.values()),textStreams:h,imageStreams:g,sequenceMode:i.sequenceMode||!1,ignoreManifestTimestampsInSegmentsMode:!1,type:i.type||"UNKNOWN",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:null}}function a8(e,i,o,c){for(var h=new Set,g=T(i),v=g.next();!v.done;v=g.next()){v=T(v.value.variantIds);for(var E=v.next();!E.done;E=v.next())h.add(E.value)}for(g=T(o),v=g.next();!v.done;v=g.next())for(v=T(v.value.variantIds),E=v.next();!E.done;E=v.next())h.add(E.value);for(g=new Map,h=T(h),v=h.next();!v.done;v=h.next())v=v.value,g.set(v,{id:v,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(i=T(i),h=i.next();!h.done;h=i.next())for(v=h.value,h=Gv(e,v,c),v=T(v.variantIds),E=v.next();!E.done;E=v.next())E=g.get(E.value),E.language=h.language,E.primary=E.primary||h.primary,E.audio=h;for(o=T(o),i=o.next();!i.done;i=o.next())for(h=i.value,i=Gv(e,h,c),h=T(h.variantIds),v=h.next();!v.done;v=h.next())v=g.get(v.value),v.primary=v.primary||i.primary,v.video=i;return g}function Gv(e,i,o){var c=i.segments.map(function(h){return o8(e,h,i)});return o.Ed(c),{id:i.id,originalId:i.originalId,groupId:i.groupId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new pr(c),mimeType:i.mimeType,codecs:i.codecs,width:i.width||void 0,height:i.height||void 0,frameRate:i.frameRate,pixelAspectRatio:i.pixelAspectRatio,hdr:i.hdr,colorGamut:i.colorGamut,videoLayout:i.videoLayout,kind:i.kind,encrypted:i.encrypted,drmInfos:[],keyIds:i.keyIds,language:i.language,originalLanguage:i.originalLanguage||null,label:i.label,type:i.type,primary:i.primary,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:i.roles,forced:i.forced,channelsCount:i.channelsCount,audioSamplingRate:i.audioSamplingRate,spatialAudio:i.spatialAudio,closedCaptions:i.closedCaptions,tilesLayout:i.tilesLayout,mssPrivateData:i.mssPrivateData,accessibilityPurpose:null,external:i.external,fastSwitching:i.fastSwitching,fullMimeTypes:new Set([Xr(i.mimeType,i.codecs)]),isAudioMuxedInVideo:!1,baseOriginalId:null}}function o8(e,i,o){var c=new Ac("segment",e.h,e.g,i.dataKey);return e=new X(i.startTime,i.endTime,function(){return[c.toString()]},0,null,i.initSegmentKey!=null?l8(e,i.initSegmentKey):null,i.timestampOffset,i.appendWindowStart,i.appendWindowEnd,[],i.tilesLayout||""),e.mimeType=i.mimeType||o.mimeType||"",e.codecs=i.codecs||o.codecs||"",i.thumbnailSprite&&e.De(i.thumbnailSprite),e}function l8(e,i){var o=new Ac("segment",e.h,e.g,i);return new B(function(){return[o.toString()]},0,null)}function eD(){this.g=null}p=eD.prototype,p.configure=function(){},p.start=function(e,i){var o=this,c,h,g,v,E,S,I;return Qe(function(L){switch(L.g){case 1:if(c=dS(e),o.g=c,c==null||c.g!="manifest")throw new it(2,1,9004,e);return h=new Ao,xe(L,2),x(L,h.init(),4);case 4:return x(L,qv(h,c.zb(),c.Ta()),5);case 5:return g=L.h,x(L,g.getManifests([c.key()]),6);case 6:return v=L.h,E=v[0],S=new Jk(c.zb(),c.Ta()),I=Zk(S,E),i.makeTextStreamsForClosedCaptions(I),L.return(I);case 2:return Xe(L),x(L,h.destroy(),7);case 7:ut(L,0)}})},p.stop=function(){return Promise.resolve()},p.update=function(){},p.onExpirationUpdated=function(e,i){var o=this,c,h,g,v,E,S,I;return Qe(function(L){switch(L.g){case 1:return c=o.g,h=new Ao,$e(L,2,3),x(L,h.init(),5);case 5:return x(L,qv(h,c.zb(),c.Ta()),6);case 6:return g=L.h,x(L,g.getManifests([c.key()]),7);case 7:if(v=L.h,E=v[0],S=E.sessionIds.includes(e),I=E.expiration==null||E.expiration>i,!S||!I){L.s(3);break}return x(L,g.updateManifestExpiration(c.key(),i),3);case 3:return Xe(L),x(L,h.destroy(),10);case 10:ut(L,0);break;case 2:et(L),L.s(3)}})},p.onInitialVariantChosen=function(){},p.banLocation=function(){},p.setMediaElement=function(){},qu("application/x-offline-manifest",function(){return new eD});function tD(){}function nD(e,i){var o=dS(e);return o&&o.g=="manifest"?(e={uri:e,originalUri:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"},originalRequest:i},e=od(e)):e=o&&o.g=="segment"?u8(o.key(),o,i):yc(new it(2,1,9004,e)),e}function u8(e,i,o){var c=new Ao;return od(void 0).Ha(function(){return c.init()}).Ha(function(){return qv(c,i.zb(),i.Ta())}).Ha(function(h){return h.getSegments([i.key()])}).Ha(function(h){return{uri:i,data:h[0].data,headers:{},originalRequest:o}}).finally(function(){return c.destroy()})}_e("shaka.offline.OfflineScheme",tD),tD.plugin=nD,To("offline",nD);function iD(e,i,o){var c,h,g,v,E,S;return Qe(function(I){switch(I.g){case 1:c=[];for(var L=[],O=T(o),V=O.next();!V.done;V=O.next()){V=V.value;for(var W=!1,pe=T(L),Me=pe.next();!Me.done;Me=pe.next())if(Me=Me.value,d8(Me.info,V)){Me.sessionIds.push(V.sessionId),W=!0;break}W||L.push({info:V,sessionIds:[V.sessionId]})}h=T(L),g=h.next();case 2:if(g.done){I.s(4);break}return v=g.value,E=c8(e,i,v),x(I,E,5);case 5:S=I.h,c=c.concat(S),g=h.next(),I.s(2);break;case 4:return I.return(c)}})}function c8(e,i,o){var c,h;return Qe(function(g){switch(g.g){case 1:return c=new sh({Xb:i,onError:function(){},pe:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),$e(g,2),c.configure(e),x(g,s0(c,o.info.keySystem,o.info.licenseUri,o.info.serverCertificate,o.info.audioCapabilities,o.info.videoCapabilities),4);case 4:lt(g,3);break;case 2:return et(g),x(g,c.destroy(),5);case 5:return g.return([]);case 3:return h=[],x(g,Promise.all(o.sessionIds.map(function(v){return Qe(function(E){if(E.g==1)return $e(E,2),x(E,ob(c,v),4);if(E.g!=2)return h.push(v),lt(E,0);et(E),ue(E)})})),6);case 6:return x(g,c.destroy(),7);case 7:return g.return(h)}})}function d8(e,i){function o(c,h){return c.robustness==h.robustness&&c.contentType==h.contentType}return e.keySystem==i.keySystem&&e.licenseUri==i.licenseUri&&jd(e.audioCapabilities,i.audioCapabilities,o)&&jd(e.videoCapabilities,i.videoCapabilities,o)}function f8(e,i,o){var c=i.presentationTimeline.getDuration();return i=rD(i),{offlineUri:null,originalManifestUri:e,duration:c,size:0,expiration:1/0,tracks:i,appMetadata:o,isIncomplete:!1}}function fS(e,i){var o=Zk(new Jk(e.zb(),e.Ta()),i),c=i.appMetadata||{};return o=rD(o),{offlineUri:e.toString(),originalManifestUri:i.originalManifestUri,duration:i.duration,size:i.size,expiration:i.expiration,tracks:o,appMetadata:c,isIncomplete:i.isIncomplete||!1}}function rD(e){var i=[],o=Ul(e.variants);o=T(o);for(var c=o.next();!c.done;c=o.next())i.push(Oi(c.value));for(e=T(e.textStreams),o=e.next();!o.done;o=e.next())i.push(lr(o.value));return i}function h8(){this.g=new Map}function p8(e,i){var o=i.audio,c=i.video;if(o&&!c&&e.g.set(o.id,o.bandwidth||i.bandwidth),!o&&c&&e.g.set(c.id,c.bandwidth||i.bandwidth),o&&c){var h=o.bandwidth||393216,g=c.bandwidth||i.bandwidth-h;0>=g&&(g=i.bandwidth),e.g.set(o.id,h),e.g.set(c.id,g)}}function g8(e,i){e.g.set(i.id,i.bandwidth||2048)}function sD(e,i){return e=e.g.get(i),e==null&&(e=0),e}function ua(e){var i=this;if(e&&e.constructor!=fn)throw new it(2,9,9008);this.g=this.h=null,e?(this.h=e.g,this.g=e.xb()):(this.h=_p(),this.g=new Dr),this.i=[],this.l=[];var o=!e;this.j=new ld(function(){var c,h,g,v,E;return Qe(function(S){switch(S.g){case 1:return x(S,Promise.all(i.l.map(function(I){return oS(I)})),2);case 2:for(c=function(){},h=[],g=T(i.i),v=g.next();!v.done;v=g.next())E=v.value,h.push(E.then(c,c));return x(S,Promise.all(h),3);case 3:if(!o){S.s(4);break}return x(S,i.g.destroy(),4);case 4:i.h=null,i.g=null,ue(S)}})}),this.m=1e9}function hS(){if(Ya())e:{for(var e=T(Km.values()),i=e.next();!i.done;i=e.next())if(i=i.value,i=i()){i.destroy(),e=!0;break e}e=!1}else e=!1;return e}p=ua.prototype,p.destroy=function(){return this.j.destroy()},p.configure=function(e,i){return arguments.length==2&&typeof e=="string"&&(e=F0(e,i)),lf(this.h,e)},p.getConfiguration=function(){var e=_p();return lf(e,this.h,_p()),e},p.xb=function(){return this.g},p.store=function(e,i,o,c,h){var g=this,v=this.getConfiguration(),E=new Gk(this.g);return this.l.push(E),i=m8(this,e,i||{},c||[],h||[],function(){var S;return Qe(function(I){return I.g==1?o?I.s(2):x(I,hh(e,g.g,v.manifest.retryParameters),3):(I.g!=2&&(o=I.h),S=E0(e,o||null),I.return(S()))})},v,E),i=new Fi(i,function(){return oS(E)}),i.finally(function(){fa(g.l,E)}),L8(this,i)};function m8(e,i,o,c,h,g,v,E){var S,I,L,O,V,W,pe,Me,De,Fe,We,gt,ht,It,ot,st,_t,xt,Ht,Pt,jt,Gt,Yt,Zt;return Qe(function(Xt){switch(Xt.g){case 1:return Vv(),I=S=null,L=new Ao,W=V=O=null,$e(Xt,2,3),x(Xt,g(),5);case 5:return S=Xt.h,x(Xt,A8(e,i,S,v),6);case 6:if(pe=Xt.h,hl(e),Me=!pe.presentationTimeline.U()&&!pe.presentationTimeline.yc(),!Me)throw new it(2,9,9005,i);De=T(c),Fe=De.next();case 7:if(Fe.done){Xt.s(9);break}return We=Fe.value,x(Xt,w8(e,We,pe),10);case 10:gt=Xt.h,pe.imageStreams.push(gt),hl(e),Fe=De.next(),Xt.s(7);break;case 9:ht=T(h),It=ht.next();case 11:return It.done?(m0(v.drm.clearKeys,pe.variants),_t=pe.variants.some(function(En){if(En.audio){for(var Wn=T(En.audio.drmInfos),Di=Wn.next();!Di.done;Di=Wn.next())if(Di.value.licenseServerUri.startsWith("data:"))return!0}if(En.video){for(En=T(En.video.drmInfos),Wn=En.next();!Wn.done;Wn=En.next())if(Wn.value.licenseServerUri.startsWith("data:"))return!0}return!1}),xt=v.offline.usePersistentLicense,_t&&(xt=!1),x(Xt,e.Lc(pe,function(En){W=W||En},v,xt),15)):(ot=It.value,x(Xt,I8(e,pe,ot.uri,ot.language,ot.kind,ot.mime,ot.codecs),14));case 14:st=Xt.h,pe.textStreams.push(st),hl(e),It=ht.next(),Xt.s(11);break;case 15:if(I=Xt.h,hl(e),W)throw W;return x(Xt,v8(pe,I,v,xt),16);case 16:return x(Xt,L.init(),17);case 17:return hl(e),x(Xt,Yk(L),18);case 18:return O=Xt.h,hl(e),Ht=T8(I,pe,i,o,v,E,xt),Pt=Ht.Yi,jt=Ht.tg,x(Xt,O.Ta.addManifests([Pt]),19);case 19:if(Gt=Xt.h,hl(e),V=Gt[0],hl(e),W)throw W;return x(Xt,y8(e,jt,V,Pt,E,v,O.Ta,pe,I,xt),20);case 20:return hl(e),uD(pe,Pt,I,xt),x(Xt,O.Ta.updateManifest(V,Pt),21);case 21:return hl(e),Yt=new Ac("manifest",O.path.zb,O.path.Ta,V),Xt.return(fS(Yt,Pt));case 3:return Xe(Xt),x(Xt,L.destroy(),22);case 22:if(!S){Xt.s(23);break}return x(Xt,S.stop(),23);case 23:if(!I){Xt.s(25);break}return x(Xt,I.destroy(),25);case 25:ut(Xt,0);break;case 2:if(Zt=et(Xt),V==null){Xt.s(27);break}return x(Xt,aD(V),27);case 27:throw W||Zt}})}function y8(e,i,o,c,h,g,v,E,S,I){var L,O,V,W,pe,Me,De,Fe,We,gt,ht;return Qe(function(It){switch(It.g){case 1:if(L={},O=0,V=function(){if(e.j.g||h.l)throw new it(2,9,7001)},W=function(ot,st){var _t,xt,Ht,Pt,jt,Gt,Yt,Zt,Xt;return Qe(function(En){if(En.g==1){for(_t=T(ot),xt=_t.next(),Ht={};!xt.done;Ht={Nb:void 0},xt=_t.next())Ht.Nb=xt.value,V(),Pt=Gz(Ht.Nb,g),jt=Ht.Nb.i,Gt=Ht.Nb.h,Yt=function(Wn){return function(Di){var yi,yr,Ji,Vi;return Qe(function(Wi){switch(Wi.g){case 1:if(yi=Wn.Nb.g,yr=yi.Ib(!1),!yi.aesKey||yr){Wi.s(2);break}return x(Wi,Lb(Di,yi.aesKey,Wn.Nb.j),3);case 3:Di=Wi.h;case 2:return Ji=aS(yi),x(Wi,v.addSegments([{data:Di}]),4);case 4:Vi=Wi.h,V(),L[Ji]=Vi[0],O+=Di.byteLength,ue(Wi)}})}}(Ht),Zt=Ht.Nb.g,(Xt=Zt.Ib(!1))?Kz(h,Ht.Nb.groupId,Xt,jt,Gt,Yt):$z(h,Ht.Nb.groupId,Pt,jt,Gt,Yt);return x(En,Yz(h),2)}return V(),!st||h.l?En.s(0):(uD(E,c,S,I),x(En,v.updateManifest(o,c),0))})},pe=!1,$e(It,2),!pS(E)||!pe||lD(E)){It.s(4);break}return x(It,W(i.filter(function(ot){return ot.h}),!0),5);case 5:return V(),i=i.filter(function(ot){return!ot.h}),Me=L,De=O,L={},O=0,x(It,oD(v,o,c,Me,De,function(){return hl(e)}),6);case 6:V();case 4:if(pe){It.s(7);break}return x(It,W(i,!1),8);case 8:return V(),Fe=L,We=O,L={},O=0,x(It,oD(v,o,c,Fe,We,function(){return V()}),9);case 9:V();case 7:lt(It,0);break;case 2:return gt=et(It),ht=Object.values(L),x(It,v.removeSegments(ht,function(){}),10);case 10:throw gt}})}function aD(e){var i,o,c,h;return Qe(function(g){switch(g.g){case 1:return i=new Ao,x(g,i.init(),2);case 2:return x(g,Yk(i),3);case 3:return o=g.h,c=new Ac("manifest",o.path.zb,o.path.Ta,e),x(g,i.destroy(),4);case 4:return h=new ua,x(g,h.remove(c.toString()),0)}})}function oD(e,i,o,c,h,g){var v,E,S,I,L,O,V,W,pe,Me,De;return Qe(function(Fe){switch(Fe.g){case 1:for(v=!1,$e(Fe,2),E=!0,S=T(o.streams),I=S.next();!I.done;I=S.next())for(L=I.value,O=T(L.segments),V=O.next();!V.done;V=O.next())W=V.value,pe=W.pendingSegmentRefId?c[W.pendingSegmentRefId]:null,pe!=null&&(W.dataKey=pe,W.pendingSegmentRefId=void 0),pe=W.pendingInitSegmentRefId?c[W.pendingInitSegmentRefId]:null,pe!=null&&(W.initSegmentKey=pe,W.pendingInitSegmentRefId=void 0),W.pendingSegmentRefId&&(E=!1),W.pendingInitSegmentRefId&&(E=!1);return o.size+=h,E&&(o.isIncomplete=!1),x(Fe,e.updateManifest(i,o),4);case 4:v=!0,g(),lt(Fe,0);break;case 2:return Me=et(Fe),x(Fe,aD(i),5);case 5:if(v){Fe.s(6);break}return De=Object.values(c),x(Fe,e.removeSegments(De,function(){}),6);case 6:throw Me}})}function v8(e,i,o,c){var h,g,v,E,S,I,L,O,V,W,pe,Me,De,Fe,We,gt,ht,It,ot,st,_t,xt,Ht,Pt,jt,Gt,Yt,Zt,Xt,En;return Qe(function(Wn){switch(Wn.g){case 1:return h={width:1/0,height:1/0},Zf(e,o.restrictions,h),x(Wn,ee(i,e,c,o.drm.preferredKeySystems,o.drm.keySystemsMapping),2);case 2:for(g=[],v=o.preferredDecodingAttributes,E=o.preferredVideoCodecs,S=o.preferredAudioCodecs,I=o.preferredTextFormats,Zh(e,E,S,v,I),L=T(e.variants),O=L.next();!O.done;O=L.next())V=O.value,g.push(Oi(V));for(W=T(e.textStreams),pe=W.next();!pe.done;pe=W.next())Me=pe.value,g.push(lr(Me));for(De=T(e.imageStreams),Fe=De.next();!Fe.done;Fe=De.next())We=Fe.value,g.push(Rs(We));return x(Wn,o.offline.trackSelectionCallback(g),3);case 3:for(gt=Wn.h,ht=e.presentationTimeline.getDuration(),It=0,ot=T(gt),st=ot.next();!st.done;st=ot.next())_t=st.value,xt=_t.bandwidth*ht/8,It+=xt;return $e(Wn,4),x(Wn,o.offline.downloadSizeCallback(It),6);case 6:if(Ht=Wn.h,!Ht)throw new it(2,9,9014);lt(Wn,5);break;case 4:throw Pt=et(Wn),Pt instanceof it?Pt:new it(2,9,9015);case 5:for(jt=new Set,Gt=new Set,Yt=new Set,Zt=T(gt),Xt=Zt.next();!Xt.done;Xt=Zt.next())En=Xt.value,En.type=="variant"&&jt.add(En.id),En.type=="text"&&Gt.add(En.id),En.type=="image"&&Yt.add(En.id);e.variants=e.variants.filter(function(Di){return jt.has(Di.id)}),e.textStreams=e.textStreams.filter(function(Di){return Gt.has(Di.id)}),e.imageStreams=e.imageStreams.filter(function(Di){return Yt.has(Di.id)}),N8(e),ue(Wn)}})}function T8(e,i,o,c,h,g,v){var E=f8(o,i,c),S=h.offline.progressCallback;Vz(g,function(pe,Me){E.size=Me,S(E,pe)},function(pe,Me){I&&v&&L==Me&&Jd(e,"cenc",pe)});var I=pS(i)&&!lD(i),L=null;I&&(L=O8.get(e.h.keySystem));for(var O=new h8,V=T(i.textStreams),W=V.next();!W.done;W=V.next())O.g.set(W.value.id,52);for(V=T(i.imageStreams),W=V.next();!W.done;W=V.next())g8(O,W.value);for(V=T(i.variants),W=V.next();!W.done;W=V.next())p8(O,W.value);return g=k8(g,O,i,h),h=g.streams,g=g.tg,(O=e.h)&&v&&(O.initData=[]),{Yi:{creationTime:Date.now(),originalManifestUri:o,duration:i.presentationTimeline.getDuration(),size:0,expiration:e.pd(),streams:h,sessionIds:v?Xg(e):[],drmInfo:O,appMetadata:c,isIncomplete:!0,sequenceMode:i.sequenceMode,type:i.type},tg:g}}function pS(e){return e.variants.some(function(i){var o=i.audio&&i.audio.encrypted;return i.video&&i.video.encrypted||o})}function lD(e){return e.variants.some(function(i){return(i.video?i.video.drmInfos:[]).concat(i.audio?i.audio.drmInfos:[]).some(function(o){return o.initData&&o.initData.length})})}function uD(e,i,o,c){if(i.expiration=o.pd(),o=Xg(o),i.sessionIds=c?o:[],pS(e)&&c&&!o.length)throw new it(2,9,9007)}p.remove=function(e){return gS(this,E8(this,e))};function E8(e,i){var o,c,h,g,v,E;return Qe(function(S){switch(S.g){case 1:if(Vv(),o=dS(i),o==null||o.g!="manifest")throw new it(2,9,9004,i);return c=o,h=new Ao,xe(S,2),x(S,h.init(),4);case 4:return x(S,qv(h,c.zb(),c.Ta()),5);case 5:return g=S.h,x(S,g.getManifests([c.key()]),6);case 6:return v=S.h,E=v[0],x(S,Promise.all([b8(e,E,h),_8(g,c,E)]),2);case 2:return Xe(S),x(S,h.destroy(),8);case 8:ut(S,0)}})}function cD(e,i){for(var o=[],c=T(e.streams),h=c.next();!h.done;h=c.next())h=h.value,i&&h.type=="video"?o.push({contentType:Xr(h.mimeType,h.codecs),robustness:e.drmInfo.videoRobustness}):i||h.type!="audio"||o.push({contentType:Xr(h.mimeType,h.codecs),robustness:e.drmInfo.audioRobustness});return o}function b8(e,i,o){return Qe(function(c){return x(c,M8(e.g,e.h.drm,o,i),0)})}function _8(e,i,o){function c(){}var h=P8(o);return fS(i,o),Promise.all([e.removeSegments(h,c),e.removeManifests([i.key()],c)])}p.qj=function(){return gS(this,S8(this))};function S8(e){var i,o,c,h,g,v,E,S,I,L;return Qe(function(O){switch(O.g){case 1:return Vv(),i=e.g,o=e.h.drm,c=new Ao,h=!1,xe(O,2),x(O,c.init(),4);case 4:g=[],Jz(c,function(V){return g.push(V)}),v=T(g),E=v.next();case 5:if(E.done){O.s(2);break}return S=E.value,x(O,S.getAll(),8);case 8:return I=O.h,x(O,iD(o,i,I),9);case 9:return L=O.h,x(O,S.remove(L),10);case 10:L.length!=I.length&&(h=!0),E=v.next(),O.s(5);break;case 2:return Xe(O),x(O,c.destroy(),11);case 11:ut(O,3);break;case 3:return O.return(!h)}})}p.list=function(){return gS(this,x8())};function x8(){var e,i,o;return Qe(function(c){switch(c.g){case 1:return Vv(),e=[],i=new Ao,xe(c,2),x(c,i.init(),4);case 4:return o=Promise.resolve(),Qz(i,function(h,g){o=o.then(function(){var v;return Qe(function(E){if(E.g==1)return x(E,g.getAllManifests(),2);v=E.h,v.forEach(function(S,I){S=fS(new Ac("manifest",h.zb,h.Ta,I),S),e.push(S)}),ue(E)})})}),x(c,o,2);case 2:return Xe(c),x(c,i.destroy(),6);case 6:ut(c,3);break;case 3:return c.return(e)}})}function A8(e,i,o,c){var h,g,v,E,S;return Qe(function(I){if(I.g==1)return h=null,g=e.g,v={networkingEngine:g,filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(L){h=L},isLowLatencyMode:function(){return!1},updateDuration:function(){},newDrmInfo:function(){},onManifestUpdated:function(){},getBandwidthEstimate:function(){return c.abr.defaultBandwidthEstimate},onMetadata:function(){},disableStream:function(){},addFont:function(){}},o.configure(c.manifest),hl(e),x(I,o.start(i,v),2);if(I.g!=3)return E=I.h,hl(e),S=fD(E),x(I,Promise.all(ap(S,function(L){return L.createSegmentIndex()})),3);if(hl(e),h)throw h;return I.return(E)})}function w8(e,i,o){var c,h,g,v,E,S,I,L,O,V,W,pe,Me,De,Fe;return Qe(function(We){switch(We.g){case 1:return x(We,dD(e,i),2);case 2:if(c=We.h,c!="text/vtt")throw new it(1,2,2017,i);return x(We,C8(i,e.g,e.h.streaming.retryParameters),3);case 3:if(h=We.h,g=Uu(c),!g)throw new it(2,2,2014,c);for(v=g(),E={periodStart:0,segmentStart:0,segmentEnd:o.presentationTimeline.getDuration(),vttOffset:0},S=jn(h),I=v.parseMedia(S,E,i,[]),L=[],O=T(I),V=O.next(),W={};!V.done;W={Me:void 0,Nc:void 0},V=O.next())W.Nc=V.value,W.Me=null,pe=function(gt){return function(){return gt.Me==null&&(gt.Me=ts([i],[gt.Nc.payload])),gt.Me||[]}}(W),Me=new X(W.Nc.startTime,W.Nc.endTime,pe,0,null,null,0,0,1/0),W.Nc.payload.includes("#xywh")&&(De=W.Nc.payload.split("#xywh=")[1].split(","),De.length===4&&Me.De({height:parseInt(De[3],10),positionX:parseInt(De[0],10),positionY:parseInt(De[1],10),width:parseInt(De[2],10)})),L.push(Me);if(Fe=c,!L.length){We.s(4);break}return x(We,hh(L[0].N()[0],e.g,e.h.manifest.retryParameters),5);case 5:Fe=We.h;case 4:return We.return({id:e.m++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new pr(L),mimeType:Fe||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:"image",primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Xr(Fe||"","")]),isAudioMuxedInVideo:!1,baseOriginalId:null})}})}function I8(e,i,o,c,h,g,v){var E,S,I;return Qe(function(L){if(L.g==1)return g?L.s(2):x(L,dD(e,o),3);if(L.g!=2&&(g=L.h),E={id:e.m++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:I0(0,i.presentationTimeline.getDuration(),[o]),mimeType:g||"",codecs:v||"",kind:h,encrypted:!1,drmInfos:[],keyIds:new Set,language:c,originalLanguage:c,label:null,type:zi,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Xr(g||"",v||"")]),isAudioMuxedInVideo:!1,baseOriginalId:null},S=Xr(E.mimeType,E.codecs),I=Pl(S),!I)throw new it(2,2,2014,g);return L.return(E)})}function dD(e,i){var o;return Qe(function(c){switch(c.g){case 1:return $e(c,2),x(c,hh(i,e.g,e.h.streaming.retryParameters),4);case 4:o=c.h,lt(c,3);break;case 2:et(c);case 3:if(o)return c.return(o);throw new it(1,2,2011,i)}})}function C8(e,i,o){var c,h,g;return Qe(function(v){return v.g==1?(c=Go,h=ws([e],o),h.method="GET",x(v,i.request(c,h).promise,2)):(g=v.h,v.return(g.data))})}p.Lc=function(e,i,o,c){var h=this,g;return Qe(function(v){return v.g==1?(g=new sh({Xb:h.g,onError:i,pe:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),g.configure(o.drm),x(v,Qd(g,e.variants,c),2)):v.g!=3?x(v,Wg(g),3):v.return(g)})};function k8(e,i,o,c){var h=new Map,g=fD(o),v=new Map;g=T(g);for(var E=g.next();!E.done;E=g.next()){E=E.value;var S=D8(e,i,o,E,c,h);v.set(E.id,S)}for(e=T(o.variants),i=e.next();!i.done;i=e.next())i=i.value,i.audio&&v.get(i.audio.id).variantIds.push(i.id),i.video&&v.get(i.video.id).variantIds.push(i.id);return{streams:Array.from(v.values()),tg:Array.from(h.values())}}function D8(e,i,o,c,h,g){var v={id:c.id,originalId:c.originalId,groupId:c.groupId,primary:c.primary,type:c.type,mimeType:c.mimeType,codecs:c.codecs,frameRate:c.frameRate,pixelAspectRatio:c.pixelAspectRatio,hdr:c.hdr,colorGamut:c.colorGamut,videoLayout:c.videoLayout,kind:c.kind,language:c.language,originalLanguage:c.originalLanguage,label:c.label,width:c.width||null,height:c.height||null,encrypted:c.encrypted,keyIds:c.keyIds,segments:[],variantIds:[],roles:c.roles,forced:c.forced,channelsCount:c.channelsCount,audioSamplingRate:c.audioSamplingRate,spatialAudio:c.spatialAudio,closedCaptions:c.closedCaptions,tilesLayout:c.tilesLayout,mssPrivateData:c.mssPrivateData,external:c.external,fastSwitching:c.fastSwitching,isAudioMuxedInVideo:c.isAudioMuxedInVideo},E=h.offline.numberOfParallelDownloads,S=E===0?c.id:0;return R8(c,o.presentationTimeline.pb(),function(I,L){var O=aS(I),V=void 0;if(!g.has(O)){var W=I.endTime-I.startTime;W=sD(i,c.id)*W,W=qk(e.g,W),g.set(O,new zk(I,W,S,!1,L))}I.Y&&(V=aS(I.Y),g.has(V)||(W=.5*sD(i,c.id),W=qk(e.g,W),g.set(V,new zk(I.Y,W,S,!0,L)))),v.segments.push({pendingInitSegmentRefId:V,initSegmentKey:V?0:null,startTime:I.startTime,endTime:I.endTime,appendWindowStart:I.appendWindowStart,appendWindowEnd:I.appendWindowEnd,timestampOffset:I.timestampOffset,tilesLayout:I.tilesLayout,pendingSegmentRefId:O,dataKey:0,mimeType:I.mimeType,codecs:I.codecs,thumbnailSprite:I.thumbnailSprite}),E!==0&&(S=(S+1)%E)}),v}function R8(e,i,o){if(i=e.segmentIndex.find(i),i!=null)for(var c=e.segmentIndex.get(i);c;)o(c,i),c=e.segmentIndex.get(++i)}function hl(e){if(e.j.g)throw new it(2,9,7001)}function Vv(){if(!hS())throw new it(2,9,9e3)}function gS(e,i){return Qe(function(o){return o.g==1?(e.i.push(i),xe(o,2),x(o,i,4)):o.g!=2?o.return(o.h):(Xe(o),fa(e.i,i),ut(o,0))})}function L8(e,i){var o=i.promise;return e.i.push(o),i.finally(function(){fa(e.i,o)})}function P8(e){var i=new Set;e=T(e.streams);for(var o=e.next();!o.done;o=e.next()){o=T(o.value.segments);for(var c=o.next();!c.done;c=o.next())c=c.value,c.initSegmentKey!=null&&i.add(c.initSegmentKey),i.add(c.dataKey)}return Array.from(i)}function M8(e,i,o,c){var h,g,v;return Qe(function(E){return E.g==1?c.drmInfo?(h=Zz(o),g=c.sessionIds.map(function(S){return{sessionId:S,keySystem:c.drmInfo.keySystem,licenseUri:c.drmInfo.licenseServerUri,serverCertificate:c.drmInfo.serverCertificate,audioCapabilities:cD(c,!1),videoCapabilities:cD(c,!0)}}),x(E,iD(i,e,g),2)):E.return():E.g!=3?(v=E.h,x(E,h.remove(v),3)):x(E,h.add(g.filter(function(S){return!v.includes(S.sessionId)})),0)})}function fD(e){for(var i=new Set,o=T(e.variants),c=o.next();!c.done;c=o.next())c=c.value,c.audio&&i.add(c.audio),c.video&&i.add(c.video);for(o=T(e.textStreams),c=o.next();!c.done;c=o.next())i.add(c.value);for(e=T(e.imageStreams),o=e.next();!o.done;o=e.next())i.add(o.value);return i}function N8(e){e.variants.map(function(g){return g.video});var i=new Set(e.variants.map(function(g){return g.audio}));e=e.textStreams;for(var o=T(i),c=o.next();!c.done;c=o.next()){c=T(i);for(var h=c.next();!h.done;h=c.next());}for(i=T(e),o=i.next();!o.done;o=i.next())for(o=T(e),c=o.next();!c.done;c=o.next());}_e("shaka.offline.Storage",ua),ua.deleteAll=function(){var e;return Qe(function(i){return i.g==1?(e=new Ao,xe(i,2),x(i,e8(e),2)):i.g!=5?(Xe(i),x(i,e.destroy(),5)):ut(i,0)})},ua.prototype.list=ua.prototype.list,ua.prototype.removeEmeSessions=ua.prototype.qj,ua.prototype.remove=ua.prototype.remove,ua.prototype.store=ua.prototype.store,ua.prototype.getNetworkingEngine=ua.prototype.xb,ua.prototype.getConfiguration=ua.prototype.getConfiguration,ua.prototype.configure=ua.prototype.configure,ua.prototype.destroy=ua.prototype.destroy,ua.support=hS;var O8=new Map().set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95").set("com.huawei.wiseplay","3d5e6d359b9a41e8b843dd3c6e72c42c");$1("offline",hS);function za(){}function wo(e,i){for(e={priority:i||0,callback:e},i=0;i<Wm.length;i++)if(Wm[i].priority<e.priority){Wm.splice(i,0,e);return}Wm.push(e)}_e("shaka.polyfill",za),za.register=wo,za.installAll=function(){for(var e=T(Wm),i=e.next();!i.done;i=e.next()){i=i.value;try{i.callback()}catch(o){kt("Error installing polyfill!",o)}}};var Wm=[];function hD(){}function pD(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var e=T(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),i=e.next();!i.done;i=e.next())F8(i.value)}function F8(e){var i="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(i)},set:function(o){o==null||o==null?this.removeAttribute(i):this.setAttribute(i,o)}})}za.Aria=hD,hD.install=pD,wo(pD);function gD(){}function mD(){Qi()||Cr("Sky_STB")||kR()}za.EncryptionScheme=gD,gD.install=mD,wo(mD,-2);function yD(){}function vD(){if(l.Document){var e=Element.prototype;e.requestFullscreen=e.requestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen||e.webkitRequestFullscreen,e=Document.prototype,e.exitFullscreen=e.exitFullscreen||e.mozCancelFullScreen||e.msExitFullscreen||e.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",Bp),document.addEventListener("webkitfullscreenerror",Bp),document.addEventListener("mozfullscreenchange",Bp),document.addEventListener("mozfullscreenerror",Bp),document.addEventListener("MSFullscreenChange",Bp),document.addEventListener("MSFullscreenError",Bp)}}function Bp(e){var i=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),o=document.createEvent("Event");o.initEvent(i,e.bubbles,e.cancelable),e.target.dispatchEvent(o)}za.Fullscreen=yD,yD.install=vD,wo(vD);function mS(){}function TD(){var e=!0;(Bi()&&!Ms()&&!Mo()||er()||sr()||Qi()||Si()||In()||ur()||Ra()&&!er())&&(e=!1),e&&navigator.mediaCapabilities||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),ED=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=U8)}function U8(e){var i,o,c,h,g,v,E,S,I,L,O;return Qe(function(V){switch(V.g){case 1:if(i={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:e},o=e.video,c=e.audio,e.type!="media-source"){if(e.type=="file"){if(o&&(h=o.contentType,g=nu(h),!g)||c&&(v=c.contentType,E=nu(v),!E))return V.return(i)}else return V.return(i);V.s(2);break}if(!Ya())return V.return(i);if(!o){V.s(3);break}return x(V,B8(o),4);case 4:if(S=V.h,!S)return V.return(i);case 3:if(c){var W=c.contentType;if(Bi()&&c.spatialRendering&&(W+="; spatialRendering=true"),I=Ss(W),!I)return V.return(i)}case 2:return e.keySystemConfiguration?(L=e.keySystemConfiguration,x(V,z8(o,c,L),6)):(i.supported=!0,V.return(i));case 6:(O=V.h)&&(i.supported=!0,i.keySystemAccess=O);case 5:return V.return(i)}})}function B8(e){var i,o;return Qe(function(c){return c.g==1?Bi()?x(c,j8(e),3):In()?(i=e.contentType,e.width&&e.height&&(i+="; width="+e.width,i+="; height="+e.height),e.framerate&&(i+="; framerate="+e.framerate),e.bitrate&&(i+="; bitrate="+e.bitrate),c.return(Ss(i))):c.s(2):c.g!=2?(o=c.h,c.return(o)):c.return(Ss(e.contentType))})}function z8(e,i,o){var c,h,g,v,E,S,I,L,O,V,W;return Qe(function(pe){switch(pe.g){case 1:if(c=[],h=[],o.audio&&(g={robustness:o.audio.robustness||"",contentType:i.contentType},In()&&i.contentType.includes('codecs="ac-3"')&&(g.contentType='audio/mp4; codecs="ec-3"'),o.audio.encryptionScheme&&(g.encryptionScheme=o.audio.encryptionScheme),c.push(g)),o.video&&(v={robustness:o.video.robustness||"",contentType:e.contentType},o.video.encryptionScheme&&(v.encryptionScheme=o.video.encryptionScheme),h.push(v)),E={initDataTypes:[o.initDataType],distinctiveIdentifier:o.distinctiveIdentifier,persistentState:o.persistentState,sessionTypes:o.sessionTypes},c.length&&(E.audioCapabilities=c),h.length&&(E.videoCapabilities=h),S=e?e.contentType:"",I=i?i.contentType:"",L=ps(S)+";"+yo(S),O=ps(I)+";"+yo(I),V=o.keySystem,W=null,$e(pe,2),ia.has(L+"#"+O+"#"+V)){W=ia.get(L+"#"+O+"#"+V)||null,pe.s(4);break}return x(pe,navigator.requestMediaKeySystemAccess(o.keySystem,[E]),5);case 5:W=pe.h,ia.set(L+"#"+O+"#"+V,W);case 4:lt(pe,3);break;case 2:et(pe);case 3:return pe.return(W)}})}function j8(e){var i,o,c,h,g;return Qe(function(v){if(v.g==1){if(!(l.cast&&cast.__platform__&&cast.__platform__.canDisplayType))return v.return(Ss(e.contentType));switch(i=e.contentType,e.width&&e.height&&1280<e.width&&720<e.height&&(i+="; width="+e.width+"; height="+e.height),e.framerate&&(o=Math.round(e.framerate),24>o||30<o)&&(i+="; framerate="+e.framerate),c=e.transferFunction||"",c){case"":case"srgb":break;case"pq":i+="; eotf=smpte2084";break;case"hlg":i+="; eotf=arib-std-b67";break;default:return v.return(!1)}return h=!1,g=q8,g.has(i)?(h=g.get(i),v.s(2)):x(v,cast.__platform__.canDisplayType(i),3)}return v.g!=2&&(h=v.h,g.set(i,h)),v.return(h)})}za.MediaCapabilities=mS,mS.install=TD;var ED=null;mS.originalMcap=ED;var q8=new Map;wo(TD,-1);function bD(){}function _D(){var e=Ur();(l.MediaSource||l.ManagedMediaSource)&&(e&&l.MediaSource?12>=e?(yS(),SD()):15>=e&&yS():Cr("DT_STB_BCM")?(yS(),SD()):(Cr("Tizen 2")||ii()||Cr("Tizen 4"))&&G8()),(l.MediaSource||l.ManagedMediaSource)&&H8(),l.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&V8()}function yS(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var i=e.apply(this,Ze.apply(0,arguments));return i.abort=function(){},i}}function SD(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(i,o){return e.call(this,i,o-.001)}}function H8(){if(l.MediaSource){var e=MediaSource.isTypeSupported.bind(MediaSource);MediaSource.isTypeSupported=function(o){return sd(o)!="mp2t"&&e(o)}}if(l.ManagedMediaSource){var i=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);l.ManagedMediaSource.isTypeSupported=function(o){return sd(o)!="mp2t"&&i(o)}}}function G8(){var e=MediaSource.isTypeSupported.bind(MediaSource);if(MediaSource.isTypeSupported=function(o){return yo(o)!="opus"&&e(o)},l.ManagedMediaSource){var i=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);l.ManagedMediaSource.isTypeSupported=function(o){return yo(o)!="opus"&&i(o)}}}function V8(){var e=MediaSource.isTypeSupported;Si()||(MediaSource.isTypeSupported=function(i){var o=i.split(/ *; */),c=o.findIndex(function(v){return v.startsWith("codecs=")});if(0>c)return e(i);var h=o[c].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),g=h.findIndex(function(v){return v.startsWith("vp09")});return 0<=g&&(h[g]="vp9",o[c]='codecs="'+h.join(",")+'"',i=o.join("; ")),e(i)})}za.MediaSource=bD,bD.install=_D,wo(_D);function xD(){}function AD(){screen.orientation&&screen.orientation.unlock||(screen.orientation!=null?$8():l.orientation!=null&&K8())}function $8(){screen.orientation.lock===void 0&&(screen.orientation.lock=function(){return Promise.resolve()}),screen.orientation.unlock===void 0&&(screen.orientation.unlock=function(){})}function K8(){function e(){switch(l.orientation){case-90:i.type="landscape-secondary",i.angle=270;break;case 0:i.type="portrait-primary",i.angle=0;break;case 90:i.type="landscape-primary",i.angle=90;break;case 180:i.type="portrait-secondary",i.angle=180}}var i=new $v;screen.orientation=i,e(),l.addEventListener("orientationchange",function(){e();var o=new Jn("change");i.dispatchEvent(o)})}za.Orientation=xD,xD.install=AD;function $v(){xr.call(this),this.type="",this.angle=0}j($v,xr),$v.prototype.lock=function(e){function i(c){return screen.lockOrientation?screen.lockOrientation(c):screen.mozLockOrientation?screen.mozLockOrientation(c):screen.msLockOrientation?screen.msLockOrientation(c):!1}var o=!1;switch(e){case"natural":o=i("default");break;case"any":o=!0,this.unlock();break;default:o=i(e)}return o?Promise.resolve():(e=Error("screen.orientation.lock() is not available on this device"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(e))},$v.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},wo(AD);function vS(){}var TS,ES,bS,_S,SS,xS;function wD(e){l.HTMLVideoElement&&l.WebKitMediaKeys&&(e!==void 0&&e&&(TS=!0,ES=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),bS=HTMLMediaElement.prototype.setMediaKeys,_S=l.MediaKeys,SS=l.MediaKeySystemAccess,xS=navigator.requestMediaKeySystemAccess),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=W8,l.MediaKeys=Xm,l.MediaKeySystemAccess=Kv,navigator.requestMediaKeySystemAccess=Y8,l.shakaMediaKeysPolyfill=Q8,eh.clear(),ia.clear())}function Y8(e,i){try{var o=new Kv(e,i);return Promise.resolve(o)}catch(c){return Promise.reject(c)}}function W8(e){var i=this.mediaKeys;return i&&i!=e&&ID(i,null),delete this.mediaKeys,(this.mediaKeys=e)?ID(e,this):Promise.resolve()}function X8(e){if(e=jn(e.initData),Ni(e).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=ra(e.subarray(4),!0),e=sa(e);var i=new Event("encrypted");i.initDataType="skd",i.initData=fi(e),this.dispatchEvent(i)}za.PatchedMediaKeysApple=vS,vS.uninstall=function(){TS&&(TS=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",ES),HTMLMediaElement.prototype.setMediaKeys=bS,l.MediaKeys=_S,l.MediaKeySystemAccess=SS,navigator.requestMediaKeySystemAccess=xS,ES=xS=bS=SS=_S=null,l.shakaMediaKeysPolyfill="",eh.clear(),ia.clear())},vS.install=wD;function Kv(e,i){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(e=T(i),i=e.next();!i.done;i=e.next()){var o=i.value;if(o.persistentState=="required")i=null;else{i={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:o.initDataTypes,sessionTypes:["temporary"],label:o.label};var c=!1,h=!1;if(o.audioCapabilities)for(var g=T(o.audioCapabilities),v=g.next();!v.done;v=g.next())v=v.value,v.contentType&&(c=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,v.contentType.split(";")[0])&&(i.audioCapabilities.push(v),h=!0));if(o.videoCapabilities)for(o=T(o.videoCapabilities),g=o.next();!g.done;g=o.next())g=g.value,g.contentType&&(c=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,g.contentType.split(";")[0])&&(i.videoCapabilities.push(g),h=!0));c||(h=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),i=h?i:null}if(i){this.g=i;return}}throw e=Error("Unsupported keySystem"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}Kv.prototype.createMediaKeys=function(){var e=new Xm(this.keySystem);return Promise.resolve(e)},Kv.prototype.getConfiguration=function(){return this.g};function Xm(e){this.h=new WebKitMediaKeys(e),this.g=new ni}Xm.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary")throw new TypeError("Session type "+e+" is unsupported on this platform.");return new AS(this.h)},Xm.prototype.setServerCertificate=function(){return Promise.resolve(!1)};function ID(e,i){if(e.g.Qa(),!i)return Promise.resolve();e.g.D(i,"webkitneedkey",X8);try{return md(i,HTMLMediaElement.HAVE_METADATA,e.g,function(){i.webkitSetMediaKeys(e.h)}),Promise.resolve()}catch(o){return Promise.reject(o)}}Xm.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function AS(e){xr.call(this),this.i=null,this.l=e,this.g=this.h=null,this.j=new ni,this.sessionId="",this.expiration=NaN,this.closed=new mr,this.keyStatuses=new CD}j(AS,xr),p=AS.prototype,p.generateRequest=function(e,i){var o=this;this.h=new mr;try{var c=this.l.createSession("video/mp4",jn(i));this.i=c,this.sessionId=c.sessionId||"",this.j.D(this.i,"webkitkeymessage",function(h){o.h&&(o.h.resolve(),o.h=null),h=new Map().set("messageType",o.keyStatuses.dc()==null?"license-request":"license-renewal").set("message",fi(h.message)),h=new Jn("message",h),o.dispatchEvent(h)}),this.j.D(c,"webkitkeyadded",function(){o.g&&(Yv(o,"usable"),o.g.resolve(),o.g=null)}),this.j.D(c,"webkitkeyerror",function(){var h=Error("EME PatchedMediaKeysApple key error");if(h.errorCode=o.i.error,o.h!=null)o.h.reject(h),o.h=null;else if(o.g!=null)o.g.reject(h),o.g=null;else switch(o.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:Yv(o,"output-not-allowed");break;default:Yv(o,"internal-error")}}),Yv(this,"status-pending")}catch(h){this.h.reject(h)}return this.h},p.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},p.update=function(e){this.g=new mr;try{this.i.update(jn(e))}catch(i){this.g.reject(i)}return this.g},p.close=function(){try{this.i.close(),this.closed.resolve(),this.j.Qa()}catch(e){this.closed.reject(e)}return this.closed},p.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))};function Yv(e,i){var o=e.keyStatuses;o.size=i==null?0:1,o.g=i,i=new Jn("keystatuseschange"),e.dispatchEvent(i)}function CD(){this.size=0,this.g=void 0}p=CD.prototype,p.dc=function(){return this.g},p.forEach=function(e){this.g&&e(this.g,Tr.value())},p.get=function(e){if(this.has(e))return this.g},p.has=function(e){var i=Tr.value();return!!(this.g&&Nn(e,i))},p.entries=function(){},p.keys=function(){},p.values=function(){};var Q8="apple";wo(function(){l.HTMLVideoElement&&l.WebKitMediaKeys&&(navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||wD())});function kD(){}function DD(){l.MediaKeys&&(!MediaKeys.prototype.setServerCertificate||ii()||Cr("Tizen 4")||Cr("Tizen 5.0")||hr())&&(MediaKeys.prototype.setServerCertificate=J8)}function J8(){return Promise.resolve(!1)}za.PatchedMediaKeysCert=kD,kD.install=DD,wo(DD);function RD(){}function LD(){if(!(!l.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)DS="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=Z8,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=ej,l.MediaKeys=Qm,l.MediaKeySystemAccess=Wv,l.shakaMediaKeysPolyfill=tj}}function wS(e){var i=DS;return i?i+e.charAt(0).toUpperCase()+e.slice(1):e}function Z8(e,i){try{var o=new Wv(e,i);return Promise.resolve(o)}catch(c){return Promise.reject(c)}}function ej(e){var i=this.mediaKeys;return i&&i!=e&&PD(i,null),delete this.mediaKeys,(this.mediaKeys=e)&&PD(e,this),Promise.resolve()}za.PatchedMediaKeysWebkit=RD,RD.install=LD;function Wv(e,i){this.g=this.keySystem=e;var o=!1;e=="org.w3.clearkey"&&(this.g="webkit-org.w3.clearkey",o=!1);var c=!1,h=document.getElementsByTagName("video");h=h.length?h[0]:document.createElement("video"),i=T(i);for(var g=i.next();!g.done;g=i.next()){g=g.value;var v={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:g.initDataTypes,sessionTypes:["temporary"],label:g.label},E=!1;if(g.audioCapabilities)for(var S=T(g.audioCapabilities),I=S.next();!I.done;I=S.next())I=I.value,I.contentType&&(E=!0,h.canPlayType(I.contentType.split(";")[0],this.g)&&(v.audioCapabilities.push(I),c=!0));if(g.videoCapabilities)for(S=T(g.videoCapabilities),I=S.next();!I.done;I=S.next())I=I.value,I.contentType&&(E=!0,h.canPlayType(I.contentType,this.g)&&(v.videoCapabilities.push(I),c=!0));if(E||(c=h.canPlayType("video/mp4",this.g)||h.canPlayType("video/webm",this.g)),g.persistentState=="required"&&(o?(v.persistentState="required",v.sessionTypes=["persistent-license"]):c=!1),c){this.h=v;return}}throw o="Unsupported keySystem",(e=="org.w3.clearkey"||e=="com.widevine.alpha")&&(o="None of the requested configurations were supported."),e=Error(o),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}Wv.prototype.createMediaKeys=function(){var e=new Qm(this.g);return Promise.resolve(e)},Wv.prototype.getConfiguration=function(){return this.h};function Qm(e){this.l=e,this.h=null,this.g=new ni,this.i=[],this.j=new Map}function PD(e,i){e.h=i,e.g.Qa();var o=DS;i&&(e.g.D(i,o+"needkey",function(c){var h=new CustomEvent("encrypted");h.initDataType="cenc",h.initData=fi(c.initData),e.h.dispatchEvent(h)}),e.g.D(i,o+"keymessage",function(c){var h=IS(e,c.sessionId);h&&(c=new Map().set("messageType",h.keyStatuses.dc()==null?"licenserequest":"licenserenewal").set("message",c.message),c=new Jn("message",c),h.h&&(h.h.resolve(),h.h=null),h.dispatchEvent(c))}),e.g.D(i,o+"keyadded",function(c){(c=IS(e,c.sessionId))&&c.ready()}),e.g.D(i,o+"keyerror",function(c){var h=IS(e,c.sessionId);if(h){var g=Error("EME v0.1b key error"),v=c.errorCode;v.systemCode=c.systemCode,g.errorCode=v,!c.sessionId&&h.h?(c.systemCode==45&&(g.message="Unsupported session type."),h.h.reject(g),h.h=null):c.sessionId&&h.g?(h.g.reject(g),h.g=null):(g=c.systemCode,c.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?Xv(h,"output-restricted"):g==1?Xv(h,"expired"):Xv(h,"internal-error"))}}))}Qm.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary"&&e!="persistent-license")throw new TypeError("Session type "+e+" is unsupported on this platform.");var i=this.h||document.createElement("video");return i.src||(i.src="about:blank"),e=new CS(i,this.l,e),this.i.push(e),e},Qm.prototype.setServerCertificate=function(){return Promise.resolve(!1)},Qm.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function IS(e,i){var o=e.j.get(i);return o||((o=e.i.shift())?(o.sessionId=i,e.j.set(i,o),o):null)}function CS(e,i,o){xr.call(this),this.j=e,this.m=!1,this.g=this.h=null,this.i=i,this.l=o,this.sessionId="",this.expiration=NaN,this.closed=new mr,this.keyStatuses=new ND}j(CS,xr),p=CS.prototype,p.ready=function(){Xv(this,"usable"),this.g&&this.g.resolve(),this.g=null};function MD(e,i,o){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if(e.l=="persistent-license")if(o)var c=jn(sa("LOAD_SESSION|"+o));else{var h=sa("PERSISTENT|");c=qr(h,i)}else c=jn(i)}catch(v){return Promise.reject(v)}e.h=new mr;var g=wS("generateKeyRequest");try{e.j[g](e.i,c)}catch(v){if(v.name!="InvalidStateError")return e.h=null,Promise.reject(v);new Li(function(){try{e.j[g](e.i,c)}catch(E){e.h.reject(E),e.h=null}}).da(.01)}return e.h}function kS(e,i,o){if(e.g)e.g.then(function(){return kS(e,i,o)}).catch(function(){return kS(e,i,o)});else{if(e.g=i,e.i=="webkit-org.w3.clearkey"){var c=Er(o),h=JSON.parse(c);h.keys[0].kty!="oct"&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null),c=aa(h.keys[0].k),h=aa(h.keys[0].kid)}else c=jn(o),h=null;var g=wS("addKey");try{e.j[g](e.i,c,h,e.sessionId)}catch(v){e.g.reject(v),e.g=null}}}function Xv(e,i){var o=e.keyStatuses;o.size=i==null?0:1,o.g=i,i=new Jn("keystatuseschange"),e.dispatchEvent(i)}p.generateRequest=function(e,i){return MD(this,i,null)},p.load=function(e){return this.l=="persistent-license"?MD(this,null,e):Promise.reject(Error("Not a persistent session."))},p.update=function(e){var i=new mr;return kS(this,i,e),i},p.close=function(){if(this.l!="persistent-license"){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=wS("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch{}}return this.closed.resolve(),this.closed},p.remove=function(){return this.l!="persistent-license"?Promise.reject(Error("Not a persistent session.")):this.close()};function ND(){this.size=0,this.g=void 0}p=ND.prototype,p.dc=function(){return this.g},p.forEach=function(e){this.g&&e(this.g,Tr.value())},p.get=function(e){if(this.has(e))return this.g},p.has=function(e){var i=Tr.value();return!!(this.g&&Nn(e,i))},p.entries=function(){},p.keys=function(){},p.values=function(){};var DS="",tj="webkit";wo(LD);function OD(){}function FD(){if(l.HTMLVideoElement){var e=HTMLVideoElement.prototype;e.requestPictureInPicture&&document.exitPictureInPicture||!e.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,e.requestPictureInPicture=ij,Object.defineProperty(e,"disablePictureInPicture",{get:sj,set:aj,enumerable:!0,configurable:!0}),document.exitPictureInPicture=rj,document.addEventListener("webkitpresentationmodechanged",nj,!0))}}function nj(e){if(e=e.target,e.webkitPresentationMode=="picture-in-picture"){document.pictureInPictureElement=e;var i=new Event("enterpictureinpicture");e.dispatchEvent(i)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),i=new Event("leavepictureinpicture"),e.dispatchEvent(i)}function ij(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function rj(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function sj(){return this.hasAttribute("disablePictureInPicture")?!0:!this.webkitSupportsPresentationMode("picture-in-picture")}function aj(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}za.PiPWebkit=OD,OD.install=FD,wo(FD);function UD(){}function BD(){l.crypto&&("randomUUID"in l.crypto||(l.crypto.randomUUID=oj))}function oj(){var e=URL.createObjectURL(new Blob),i=e.toString();return URL.revokeObjectURL(e),i.substr(i.lastIndexOf("/")+1)}za.RandomUUID=UD,UD.install=BD,wo(BD);function zD(){}function jD(){var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:lj})}function lj(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}za.Symbol=zD,zD.install=jD,wo(jD);function qD(){}function HD(){if(l.HTMLMediaElement){var e=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var i=e.apply(this);return i&&i.catch(function(){}),i}}}za.VideoPlayPromise=qD,qD.install=HD,wo(HD);function GD(){}function VD(){if(l.HTMLVideoElement){var e=HTMLVideoElement.prototype;!e.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in e||hr())&&(e.getVideoPlaybackQuality=uj)}}function uj(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}za.VideoPlaybackQuality=GD,GD.install=VD,wo(VD);function $D(){}function KD(){if(!l.VTTCue&&l.TextTrackCue){var e=null,i=TextTrackCue.length;if(i==3)e=RS;else if(i==6)e=cj;else{try{var o=!!RS(1,2,"")}catch{o=!1}o&&(e=RS)}e&&(l.VTTCue=function(c,h,g){return e(c,h,g)})}}function RS(e,i,o){return new l.TextTrackCue(e,i,o)}function cj(e,i,o){return new l.TextTrackCue(e+"-"+i+"-"+o,e,i,o)}za.VTTCue=$D,$D.install=KD,wo(KD);function pl(){}pl.prototype.parseInit=function(){},pl.prototype.setSequenceMode=function(){},pl.prototype.setManifestType=function(){},pl.prototype.parseMedia=function(e,i){var o=null,c=[];e=Er(e).split(/\r?\n/),e=T(e);for(var h=e.next();!h.done;h=e.next())if((h=h.value)&&!/^\s+$/.test(h)&&(h=dj.exec(h))){var g=fj.exec(h[1]);g=60*parseInt(g[1],10)+parseFloat(g[2].replace(",",".")),h=new kr(g,i.segmentEnd?i.segmentEnd:g+2,h[2]),o&&(o.endTime=g,c.push(o)),o=h}return o&&c.push(o),c},_e("shaka.text.LrcTextParser",pl),pl.prototype.parseMedia=pl.prototype.parseMedia,pl.prototype.setManifestType=pl.prototype.setManifestType,pl.prototype.setSequenceMode=pl.prototype.setSequenceMode,pl.prototype.parseInit=pl.prototype.parseInit;var dj=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,fj=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;As("application/x-subtitle-lrc",function(){return new pl});function Yo(){}Yo.prototype.parseInit=function(){},Yo.prototype.setSequenceMode=function(){},Yo.prototype.setManifestType=function(){},Yo.prototype.parseMedia=function(e,i,o,c){var h=Er(e);if(e=[],h=="")return e;var g=Cl(h,"tt",!0);if(!g)throw new it(2,2,2005,"Failed to parse TTML.");if(h=pa(g,"body")[0],!h)return[];var v=rl(g,Jm,"frameRate"),E=rl(g,Jm,"subFrameRate"),S=rl(g,Jm,"frameRateMultiplier"),I=rl(g,Jm,"tickRate"),L=rl(g,Jm,"cellResolution"),O=g.attributes["xml:space"]||"default",V=rl(g,Zv,"extent");if(O!="default"&&O!="preserve")throw new it(2,2,2005,"Invalid xml:space value: "+O);O=O=="default",v=new yj(v,E,S,I),L=mj(L),E=pa(g,"metadata")[0],E=(E?E.children:[]).filter(function(Me){return Me!=`
`}),S=pa(g,"style"),g=pa(g,"region"),I=[];for(var W=T(g),pe=W.next();!pe.done;pe=W.next())(pe=hj(pe.value,S,V))&&I.push(pe);if(or(h,"p").length)throw new it(2,2,2001,"<p> can only be inside <div> in TTML");for(V=T(or(h,"div")),W=V.next();!W.done;W=V.next())if(or(W.value,"span").length)throw new it(2,2,2001,"<span> can only be inside <p> in TTML");return(i=YD(h,i,v,E,S,g,I,O,L,null,!1,o,c))&&(i.backgroundColor||(i.backgroundColor="transparent"),e.push(i)),e};function YD(e,i,o,c,h,g,v,E,S,I,L,O,V){var W=I;if(Wc(e)){if(!L)return null;var pe={tagName:"span",children:[ns(e)],attributes:{},parent:null}}else pe=e;for(var Me=null,De=T(rR),Fe=De.next();!Fe.done&&!(Me=Jv(pe,"backgroundImage",c,"#",Fe.value)[0]);Fe=De.next());De=null,Fe=rl(pe,rR,"backgroundImage");var We=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/;if(Fe&&We.test(Fe)){if(De=parseInt(Fe.split(":").pop(),10)-1,De>=V.length)return null;De=V[De]}else O&&Fe&&!Fe.startsWith("#")&&(We=new vn(O),Fe=new vn(Fe),(Fe=We.resolve(Fe).toString())&&(De=Fe));if((e.tagName=="p"||Me||De)&&(L=!0),e=L,Fe=(pe.attributes["xml:space"]||(E?"default":"preserve"))=="default",We=pe.children.every(Wc),E=[],!We)for(var gt=T(pe.children),ht=gt.next();!ht.done;ht=gt.next())(ht=YD(ht.value,i,o,c,h,g,v,Fe,S,pe,L,O,V))&&E.push(ht);if(c=I!=null,O=ns(pe),O=pe.children.length&&O&&/\S/.test(O),gt=pe.attributes.begin||pe.attributes.end||pe.attributes.dur,!(gt||O||pe.tagName=="br"||E.length!=0||c&&!Fe))return null;for(V=QD(pe,o),O=V.start,V=V.end;W&&W.tagName&&W.tagName!="tt";)V=gj(W,o,O,V),O=V.start,V=V.end,W=W.parent;if(O==null&&(O=0),O+=i.periodStart,V=V==null?1/0:V+i.periodStart,O=Math.max(O,i.segmentStart),V=Math.min(V,i.segmentEnd),!gt&&0<E.length)for(O=1/0,V=0,i=T(E),o=i.next();!o.done;o=i.next())o=o.value,O=Math.min(O,o.startTime),V=Math.max(V,o.endTime);if(pe.tagName=="br")return h=new kr(O,V,""),h.lineBreak=!0,h;if(i="",We&&(i=ys(ns(pe)||""),Fe&&(i=i.replace(/\s+/g," "))),i=new kr(O,V,i),i.nestedCues=E,L||(i.isContainer=!0),S&&(i.cellResolution=S),S=Jv(pe,"region",g,"")[0],pe.attributes.region&&S&&S.attributes["xml:id"]){var It=S.attributes["xml:id"];i.region=v.filter(function(ot){return ot.id==It})[0]}return v=S,I&&c&&!pe.attributes.region&&!pe.attributes.style&&(v=Jv(I,"region",g,"")[0]),pj(i,pe,v,Me,De,h,e,E.length==0),i}function hj(e,i,o){var c=new po,h=e.attributes["xml:id"];if(!h)return null;c.id=h,h=null,o&&(h=OS.exec(o)||FS.exec(o)),o=h?Number(h[1]):null,h=h?Number(h[2]):null;var g,v=Qv(e,i,"extent");if(v){var E=(g=OS.exec(v))||FS.exec(v);E!=null&&(c.width=Number(E[1]),c.height=Number(E[2]),g||(o!=null&&(c.width=100*c.width/o),h!=null&&(c.height=100*c.height/h)),c.widthUnits=g||o!=null?js:0,c.heightUnits=g||h!=null?js:0)}return(e=Qv(e,i,"origin"))&&(E=(g=OS.exec(e))||FS.exec(e),E!=null&&(c.viewportAnchorX=Number(E[1]),c.viewportAnchorY=Number(E[2]),g?v||(c.width=100-c.viewportAnchorX,c.widthUnits=js,c.height=100-c.viewportAnchorY,c.heightUnits=js):(h!=null&&(c.viewportAnchorY=100*c.viewportAnchorY/h),o!=null&&(c.viewportAnchorX=100*c.viewportAnchorX/o)),c.viewportAnchorUnits=g||o!=null?js:0)),c}function LS(e){var i=e.match(/rgba\(([^)]+)\)/);return i&&(i=i[1].split(","),i.length==4)?(i[3]=String(Number(i[3])/255),"rgba("+i.join(",")+")"):e}function pj(e,i,o,c,h,g,v,E){if(v=v||E,xa(i,o,g,"direction",v)=="rtl"&&(e.direction="rtl"),E=xa(i,o,g,"writingMode",v),E=="tb"||E=="tblr"?e.writingMode="vertical-lr":E=="tbrl"?e.writingMode="vertical-rl":E=="rltb"||E=="rl"?e.direction="rtl":E&&(e.direction=fc),(E=xa(i,o,g,"textAlign",!0))?(e.positionAlign=Ej.get(E),e.lineAlign=Tj.get(E),e.textAlign=ed[E.toUpperCase()]):e.textAlign=mo,(E=xa(i,o,g,"displayAlign",!0))&&(e.displayAlign=Hf[E.toUpperCase()]),(E=xa(i,o,g,"color",v))&&(e.color=LS(E)),(E=xa(i,o,g,"backgroundColor",v))&&(e.backgroundColor=LS(E)),(E=xa(i,o,g,"border",v))&&(e.border=E),E=xa(i,o,g,"fontFamily",v))switch(E){case"monospaceSerif":e.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":e.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":e.fontFamily="sans-serif";break;case"monospaceSansSerif":e.fontFamily="Consolas,monospace";break;case"proportionalSerif":e.fontFamily="serif";break;default:e.fontFamily=E.split(",").filter(function(S){return S!="default"}).join(",")}switch((E=xa(i,o,g,"fontWeight",v))&&E=="bold"&&(e.fontWeight=Nu),E=xa(i,o,g,"wrapOption",v),e.wrapLine=!(E&&E=="noWrap"),(E=xa(i,o,g,"lineHeight",v))&&E.match(zp)&&(e.lineHeight=E),(E=xa(i,o,g,"fontSize",v))&&(E.match(zp)||E.match(vj))&&(e.fontSize=E),(E=xa(i,o,g,"fontStyle",v))&&(e.fontStyle=Gf[E.toUpperCase()]),c?(h=c.attributes.imageType||c.attributes.imagetype,E=c.attributes.encoding,c=ns(c).trim(),h=="PNG"&&E=="Base64"&&c&&(e.backgroundImage="data:image/png;base64,"+c)):h&&(e.backgroundImage=h),(c=xa(i,o,g,"textOutline",v))&&(c=c.split(" "),c[0].match(zp)?e.textStrokeColor=e.color:(e.textStrokeColor=LS(c[0]),c.shift()),c[0]&&c[0].match(zp)?e.textStrokeWidth=c[0]:e.textStrokeColor=""),(c=xa(i,o,g,"letterSpacing",v))&&c.match(zp)&&(e.letterSpacing=c),(c=xa(i,o,g,"linePadding",v))&&c.match(zp)&&(e.linePadding=c),(c=xa(i,o,g,"opacity",v))&&(e.opacity=parseFloat(c)),(c=Qv(o,g,"textDecoration"))&&WD(e,c),(c=PS(i,g,"textDecoration"))&&WD(e,c),(c=xa(i,o,g,"textCombine",v))&&(e.textCombineUpright=c),xa(i,o,g,"ruby",v)){case"container":e.rubyTag="ruby";break;case"text":e.rubyTag="rt"}}function WD(e,i){i=T(i.split(" "));for(var o=i.next();!o.done;o=i.next())switch(o.value){case"underline":e.textDecoration.includes(al)||e.textDecoration.push(al);break;case"noUnderline":e.textDecoration.includes(al)&&fa(e.textDecoration,al);break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&fa(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&fa(e.textDecoration,"overline")}}function xa(e,i,o,c,h){return h=h===void 0?!0:h,(e=PS(e,o,c))?e:h?Qv(i,o,c):null}function Qv(e,i,o){if(!e)return null;var c=rl(e,Zv,o);return c||XD(e,i,o)}function PS(e,i,o){var c=rl(e,Zv,o);return c||XD(e,i,o)}function XD(e,i,o){e=Jv(e,"style",i,"");for(var c=null,h=0;h<e.length;h++){var g=il(e[h],"urn:ebu:tt:style",o);g||(g=rl(e[h],Zv,o)),g||(g=PS(e[h],i,o)),g&&(c=g)}return c}function Jv(e,i,o,c,h){var g=[];if(!e||1>o.length)return g;var v=e;for(e=null;!e&&!(e=h?il(v,h,i):v.attributes[i])&&(v=v.parent,v););if(i=e){for(i=T(i.split(" ")),h=i.next();!h.done;h=i.next())for(h=h.value,e=T(o),v=e.next();!v.done;v=e.next())if(v=v.value,c+v.attributes["xml:id"]==h){g.push(v);break}}return g}function gj(e,i,o,c){return e=QD(e,i),o==null?o=e.start:e.start!=null&&(o+=e.start),c==null?c=e.end:e.start!=null&&(c+=e.start),{start:o,end:c}}function QD(e,i){var o=MS(e.attributes.begin,i),c=MS(e.attributes.end,i);return e=MS(e.attributes.dur,i),c==null&&e!=null&&(c=o+e),{start:o,end:c}}function MS(e,i){var o=null;if(JD.test(e)){e=JD.exec(e),o=Number(e[1]);var c=Number(e[2]),h=Number(e[3]),g=Number(e[4]);g+=(Number(e[5])||0)/i.h,h+=g/i.frameRate,o=h+60*c+3600*o}else if(ZD.test(e))o=NS(ZD,e);else if(eR.test(e))o=NS(eR,e);else if(tR.test(e))e=tR.exec(e),o=Number(e[1])/i.frameRate;else if(nR.test(e))e=nR.exec(e),o=Number(e[1])/i.g;else if(iR.test(e))o=NS(iR,e);else if(e)throw new it(2,2,2001,"Could not parse cue time range in TTML");return o}function NS(e,i){return e=e.exec(i),e==null||e[0]==""?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+60*(Number(e[2])||0)+3600*(Number(e[1])||0)}function mj(e){return e&&(e=/^(\d+) (\d+)$/.exec(e))?{oc:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}_e("shaka.text.TtmlTextParser",Yo),Yo.prototype.parseMedia=Yo.prototype.parseMedia,Yo.prototype.setManifestType=Yo.prototype.setManifestType,Yo.prototype.setSequenceMode=Yo.prototype.setSequenceMode,Yo.prototype.parseInit=Yo.prototype.parseInit;function yj(e,i,o,c){this.frameRate=Number(e)||30,this.h=Number(i)||1,this.g=Number(c),this.g==0&&(this.g=e?this.frameRate*this.h:1),o&&(e=/^(\d+) (\d+)$/g.exec(o))&&(this.frameRate*=Number(e[1])/Number(e[2]))}var OS=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,vj=/^(\d{1,4}(?:\.\d+)?|100)%$/,zp=/^(\d+px|\d+em|\d*\.?\d+c)$/,FS=/^(\d+)px (\d+)px$/,JD=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,ZD=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,eR=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d+)$/,tR=/^(\d*(?:\.\d*)?)f$/,nR=/^(\d*(?:\.\d*)?)t$/,iR=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),Tj=new Map().set("left",Xa).set("center","center").set("right","end").set("start",Xa).set("end","end"),Ej=new Map().set("left","line-left").set("center","center").set("right","line-right"),Jm=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],Zv=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],rR=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];As("application/ttml+xml",function(){return new Yo});function Gs(){this.g=new Yo}Gs.prototype.parseInit=function(e){var i=!1;if(new Ar().box("moov",$i).box("trak",$i).box("mdia",$i).box("minf",$i).box("stbl",$i).R("stsd",zu).box("stpp",function(o){i=!0,o.parser.stop()}).parse(e),!i)throw new it(2,2,2007)},Gs.prototype.setSequenceMode=function(){},Gs.prototype.setManifestType=function(){},Gs.prototype.parseMedia=function(e,i,o){var c=[],h=null,g=[],v=new Map,E=[];if(new Ar().box("moof",$i).box("traf",$i).R("tfhd",function(Fe){h=$o(Fe.reader,Fe.flags).md}).R("trun",function(Fe){Fe=pp(Fe.reader,Fe.version,Fe.flags),Fe=T(Fe.fg);for(var We=Fe.next();!We.done;We=Fe.next())E.push(We.value.sampleSize||h||0)}).R("subs",function(Fe){for(var We=Fe.reader,gt=We.S(),ht=-1,It=0;It<gt;It++){var ot=We.S();ht+=ot,ot=We.na();for(var st=[],_t=0;_t<ot;_t++)Fe.version==1?st.push(We.S()):st.push(We.na()),We.X(),We.X(),We.S();v.set(ht,st)}}).box("mdat",Xd(function(Fe){g.push(Fe)})).parse(e,!1),g.length==0)throw new it(2,2,2007);for(var S=qr.apply(Wr,k(g)),I=0,L=0;L<E.length;L++){var O=jn(S,I,E[L]);I+=E[L];var V=v.get(L);if(V&&V.length){O=jn(O,0,V[0]);for(var W=[],pe=V[0],Me=1;Me<V.length;Me++){var De=jn(e,pe,V[Me]);De=ho(De),W.push("data:image/png;base64,"+De),pe+=V[Me]}c=c.concat(this.g.parseMedia(O,i,o,W))}else c=c.concat(this.g.parseMedia(O,i,o,[]))}return c},_e("shaka.text.Mp4TtmlParser",Gs),Gs.prototype.parseMedia=Gs.prototype.parseMedia,Gs.prototype.setManifestType=Gs.prototype.setManifestType,Gs.prototype.setSequenceMode=Gs.prototype.setSequenceMode,Gs.prototype.parseInit=Gs.prototype.parseInit,As('application/mp4; codecs="stpp"',function(){return new Gs}),As('application/mp4; codecs="stpp.ttml"',function(){return new Gs}),As('application/mp4; codecs="stpp.ttml.im1i"',function(){return new Gs}),As('application/mp4; codecs="stpp.ttml.im1t"',function(){return new Gs}),As('application/mp4; codecs="stpp.ttml.im2i"',function(){return new Gs}),As('application/mp4; codecs="stpp.ttml.im2t"',function(){return new Gs}),As('application/mp4; codecs="stpp.ttml.etd1"',function(){return new Gs}),As('application/mp4; codecs="stpp.ttml.etd1|im1t"',function(){return new Gs}),As('application/mp4; codecs="stpp.ttml.im1t|etd1"',function(){return new Gs}),As('application/mp4; codecs="stpp.TTML.im1t"',function(){return new Gs});function oo(){this.g="UNKNOWN"}oo.prototype.parseInit=function(){},oo.prototype.setSequenceMode=function(){},oo.prototype.setManifestType=function(e){this.g=e},oo.prototype.parseMedia=function(e,i){e=Er(e),e=e.replace(/\r\n|\r(?=[^\n]|$)/gm,`
`);var o=e.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(o[0]))throw new it(2,2,2e3);if(e=i.vttOffset,this.g=="HLS")if(o[0].includes("X-TIMESTAMP-MAP")){var c=o[0];if(e=c.match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),c=c.match(/MPEGTS:(\d+)/m),!e||!c)throw new it(2,2,2e3);if(e=nl(e[1]),e==null)throw new it(2,2,2e3);c=Number(c[1]);for(var h=i.segmentStart-i.periodStart;95443.7176888889<=h;)h-=95443.7176888889,c+=8589934592;e=i.periodStart+c/9e4-e}else i.periodStart&&i.vttOffset==i.periodStart&&(e=0);for(i=[],c=T(o[0].split(`
`)),h=c.next();!h.done;h=c.next())if(h=h.value,/^Region:/.test(h)){h=new sc(h);var g=new po;Il(h),au(h);for(var v=Il(h);v;){var E=g,S=v;(v=/^id=(.*)$/.exec(S))?E.id=v[1]:(v=/^width=(\d{1,2}|100)%$/.exec(S))?E.width=Number(v[1]):(v=/^lines=(\d+)$/.exec(S))?(E.height=Number(v[1]),E.heightUnits=2):(v=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(S))?(E.regionAnchorX=Number(v[1]),E.regionAnchorY=Number(v[2])):(v=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(S))?(E.viewportAnchorX=Number(v[1]),E.viewportAnchorY=Number(v[2])):/^scroll=up$/.exec(S)&&(E.scroll="up"),au(h),v=Il(h)}i.push(g)}for(c=new Map,Pu(c),h=[],o=T(o.slice(1)),g=o.next();!g.done;g=o.next()){if(g=g.value.split(`
`),(g.length!=1||g[0])&&!/^NOTE($|[ \t])/.test(g[0])&&g[0]=="STYLE"){for(E=[],v=-1,S=1;S<g.length;S++)g[S].includes("::cue")&&(E.push([]),v=E.length-1),v!=-1&&(E[v].push(g[S]),g[S].includes("}")&&(v=-1));for(E=T(E),v=E.next();!v.done;v=E.next()){var I=v.value;v="global",(S=I[0].match(/\((.*)\)/))&&(v=S.pop()),S=I.slice(1,-1),I[0].includes("}")&&(I=/\{(.*?)\}/.exec(I[0]))&&(S=I[1].split(";")),(I=c.get(v))||(I=new kr(0,0,""));for(var L=!1,O=0;O<S.length;O++){var V=/^\s*([^:]+):\s*(.*)/.exec(S[O]);if(V){var W=V[2].trim().replace(";","");switch(V[1].trim()){case"background-color":case"background":L=!0,I.backgroundColor=W;break;case"color":L=!0,I.color=W;break;case"font-family":L=!0,I.fontFamily=W;break;case"font-size":L=!0,I.fontSize=W;break;case"font-weight":(700<=parseInt(W,10)||W=="bold")&&(L=!0,I.fontWeight=Nu);break;case"font-style":switch(W){case"normal":L=!0,I.fontStyle=Ou;break;case"italic":L=!0,I.fontStyle=Fu;break;case"oblique":L=!0,I.fontStyle="oblique"}break;case"opacity":L=!0,I.opacity=parseFloat(W);break;case"text-combine-upright":L=!0,I.textCombineUpright=W;break;case"text-shadow":L=!0,I.textShadow=W;break;case"white-space":L=!0,I.wrapLine=W!="noWrap"}}}L&&c.set(v,I)}}if(I=g,L=e,I.length==1&&!I[0]||/^NOTE($|[ \t])/.test(I[0])||I[0]=="STYLE"||I[0]=="REGION")g=null;else if(g=null,I[0].includes("-->")||(g=I[0],I.splice(0,1)),E=new sc(I[0]),v=Du(E),O=ku(E,/[ \t]+--\x3e[ \t]+/g),S=Du(E),v==null||O==null||S==null)kt("Failed to parse VTT time code. Cue skipped:",g,I),g=null;else{for(v+=L,S+=L,L=I.slice(1).join(`
`).trim(),c.has("global")?(I=c.get("global").clone(),I.startTime=v,I.endTime=S,I.payload=L):I=new kr(v,S,L),au(E),v=Il(E);v;)sR(I,v,i),au(E),v=Il(E);cc(I,c),g!=null&&(I.id=g),g=I}g&&h.push(g)}return h};function sR(e,i,o){var c;(c=/^align:(start|middle|center|end|left|right)$/.exec(i))?(i=c[1],i=="middle"?e.textAlign=mo:e.textAlign=ed[i.toUpperCase()]):(c=/^vertical:(lr|rl)$/.exec(i))?e.writingMode=c[1]=="lr"?"vertical-lr":"vertical-rl":(c=/^size:([\d.]+)%$/.exec(i))?e.size=Number(c[1]):(c=/^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(i))?(e.position=Number(c[1]),c[2]&&(i=c[2],e.positionAlign=i=="line-left"||i=="start"?"line-left":i=="line-right"||i=="end"?"line-right":i=="center"||i=="middle"?"center":Mu)):(c=/^region:(.*)$/.exec(i))?(i=bj(o,c[1]))&&(e.region=i):(o=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(i))?(e.lineInterpretation=1,e.line=Number(o[1]),o[2]&&(e.lineAlign=nd[o[2].toUpperCase()])):(o=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(i))&&(e.lineInterpretation=hc,e.line=Number(o[1]),o[2]&&(e.lineAlign=nd[o[2].toUpperCase()]))}function bj(e,i){return e=e.filter(function(o){return o.id==i}),e.length?e[0]:null}_e("shaka.text.VttTextParser",oo),oo.prototype.parseMedia=oo.prototype.parseMedia,oo.prototype.setManifestType=oo.prototype.setManifestType,oo.prototype.setSequenceMode=oo.prototype.setSequenceMode,oo.prototype.parseInit=oo.prototype.parseInit,As("text/vtt",function(){return new oo}),As('text/vtt; codecs="vtt"',function(){return new oo}),As('text/vtt; codecs="wvtt"',function(){return new oo});function gl(){this.g=null}gl.prototype.parseInit=function(e){var i=this,o=!1;if(new Ar().box("moov",$i).box("trak",$i).box("mdia",$i).R("mdhd",function(c){c=hp(c.reader,c.version),i.g=c.timescale}).box("minf",$i).box("stbl",$i).R("stsd",zu).box("wvtt",function(){o=!0}).parse(e),!this.g)throw new it(2,2,2008);if(!o)throw new it(2,2,2008)},gl.prototype.setSequenceMode=function(){},gl.prototype.setManifestType=function(){},gl.prototype.parseMedia=function(e,i){if(!e.length)return[];if(!this.g)throw new it(2,2,2008);var o=0,c=[],h,g=[],v=!1,E=!1,S=!1,I=null;if(new Ar().box("moof",$i).box("traf",$i).R("tfdt",function(gt){v=!0,o=rf(gt.reader,gt.version).baseMediaDecodeTime}).R("tfhd",function(gt){I=$o(gt.reader,gt.flags).ld}).R("trun",function(gt){E=!0,c=pp(gt.reader,gt.version,gt.flags).fg}).box("mdat",Xd(function(gt){S=!0,h=gt})).parse(e,!1),!S&&!v&&!E)throw new it(2,2,2008);e=o;for(var L=new Pr(h,0),O=T(c),V=O.next();!V.done;V=O.next()){V=V.value;var W=V.gg||I,pe=V.ye?o+V.ye:e;e=pe+(W||0);var Me=0;do{var De=L.S();Me+=De;var Fe=L.S(),We=null;rh(Fe)=="vttc"?8<De&&(We=L.Cb(De-8)):L.skip(De-8),W&&We&&(De=_j(We,i.periodStart+pe/this.g,i.periodStart+e/this.g),g.push(De))}while(V.sampleSize&&Me<V.sampleSize)}return g.filter(Ml)};function _j(e,i,o){var c,h,g;return new Ar().box("payl",Xd(function(v){c=Er(v)})).box("iden",Xd(function(v){h=Er(v)})).box("sttg",Xd(function(v){g=Er(v)})).parse(e),c?Sj(c,h,g,i,o):null}function Sj(e,i,o,c,h){if(e=new kr(c,h,e),cc(e),i&&(e.id=i),o)for(i=new sc(o),o=Il(i);o;)sR(e,o,[]),au(i),o=Il(i);return e}_e("shaka.text.Mp4VttParser",gl),gl.prototype.parseMedia=gl.prototype.parseMedia,gl.prototype.setManifestType=gl.prototype.setManifestType,gl.prototype.setSequenceMode=gl.prototype.setSequenceMode,gl.prototype.parseInit=gl.prototype.parseInit,As('application/mp4; codecs="wvtt"',function(){return new gl});function ml(){}ml.prototype.parseInit=function(){},ml.prototype.setSequenceMode=function(){},ml.prototype.setManifestType=function(){},ml.prototype.parseMedia=function(e){var i=Er(e).replace(/\r+/g,"");if(i=i.trim(),e=[],i=="")return e;i=T(i.split(`

`));for(var o=i.next();!o.done;o=i.next()){o=o.value.split(`
`);var c=new sc(o[0]),h=Du(c),g=ku(c,/,/g);if(c=Du(c),h==null||g==null||c==null)throw new it(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new kr(h,c,o.slice(1).join(`
`).trim()))}return e},_e("shaka.text.SbvTextParser",ml),ml.prototype.parseMedia=ml.prototype.parseMedia,ml.prototype.setManifestType=ml.prototype.setManifestType,ml.prototype.setSequenceMode=ml.prototype.setSequenceMode,ml.prototype.parseInit=ml.prototype.parseInit,As("text/x-subviewer",function(){return new ml});function Wo(){this.g=new oo}Wo.prototype.parseInit=function(){},Wo.prototype.setSequenceMode=function(){},Wo.prototype.setManifestType=function(){},Wo.prototype.parseMedia=function(e,i,o){return e=Er(e),e=aR(e),e=jn(sa(e)),this.g.parseMedia(e,i,o,[])};function aR(e){var i=`WEBVTT

`;if(e=="")return i;e=e.replace(/\r+/g,""),e=e.trim(),e=T(e.split(`

`));for(var o=e.next();!o.done;o=e.next())o=o.value.split(/\n/),o[0].match(/\d+/)&&o.shift(),o[0]=o[0].replace(/,/g,"."),i+=o.join(`
`).replace(/{b}/g,"<b>").replace(/{\/b}/g,"</b>").replace(/{i}/g,"<i>").replace(/{\/i}/g,"</i>").replace(/{u}/g,"<u>").replace(/{\/u}/g,"</u>")+`

`;return i}_e("shaka.text.SrtTextParser",Wo),Wo.srt2webvtt=aR,Wo.prototype.parseMedia=Wo.prototype.parseMedia,Wo.prototype.setManifestType=Wo.prototype.setManifestType,Wo.prototype.setSequenceMode=Wo.prototype.setSequenceMode,Wo.prototype.parseInit=Wo.prototype.parseInit,As("text/srt",function(){return new Wo});function yl(){}yl.prototype.parseInit=function(){},yl.prototype.setSequenceMode=function(){},yl.prototype.setManifestType=function(){},yl.prototype.parseMedia=function(e){var i="",o="",c=null,h=null;for(h=Er(e).split(/\r?\n\s*\r?\n/),e=T(h),h=e.next();!h.done;h=e.next()){var g=h.value;h=g,(g=Aj.exec(g))&&(c=g[1],h=g[2]),c=="V4 Styles"||c=="V4+ Styles"?(i=h,i=o?i+(`
`+h):h):c=="Events"&&(o=o?o+(`
`+h):h)}for(c=[],h=null,i=T(i.split(/\r?\n/)),e=i.next();!e.done;e=i.next())if(e=e.value,!/^\s*;/.test(e)&&(g=uR.exec(e))){if(e=g[1].trim(),g=g[2].trim(),e=="Format")h=g.split(eT);else if(e=="Style"){e=g.split(eT),g={};for(var v=0;v<h.length&&v<e.length;v++)g[h[v]]=e[v];c.push(g)}}for(h=[],i=null,o=T(o.split(/\r?\n/)),g=o.next(),e={};!g.done;e={Dh:void 0},g=o.next())if(g=g.value,!/^\s*;/.test(g)&&(v=uR.exec(g))){if(g=v[1].trim(),v=v[2].trim(),g=="Format")i=v.split(eT);else if(g=="Dialogue"){v=v.split(eT),g={};for(var E=0;E<i.length&&E<v.length;E++)g[i[E]]=v[E];E=lR(g.Start);var S=lR(g.End);v=new kr(E,S,v.slice(i.length-1).join(",").replace(/\\N/g,`
`).replace(/\{[^}]+\}/g,"")),e.Dh=g.Style,(e=c.find(function(I){return function(L){return L.Name==I.Dh}}(e)))&&xj(v,e),h.push(v)}}return h};function xj(e,i){var o=i.Fontname;if(o&&(e.fontFamily=o),(o=i.Fontsize)&&(e.fontSize=o+"px"),(o=i.PrimaryColour)&&(o=oR(o))&&(e.color=o),(o=i.BackColour)&&(o=oR(o))&&(e.backgroundColor=o),i.Bold&&(e.fontWeight=Nu),i.Italic&&(e.fontStyle=Fu),i.Underline&&e.textDecoration.push(al),(o=i.Spacing)&&(e.letterSpacing=o+"px"),o=i.Alignment)switch(parseInt(o,10)){case 1:e.displayAlign=td,e.textAlign="start";break;case 2:e.displayAlign=td,e.textAlign=mo;break;case 3:e.displayAlign=td,e.textAlign="end";break;case 5:e.displayAlign="before",e.textAlign="start";break;case 6:e.displayAlign="before",e.textAlign=mo;break;case 7:e.displayAlign="before",e.textAlign="end";break;case 9:e.displayAlign="center",e.textAlign="start";break;case 10:e.displayAlign="center",e.textAlign=mo;break;case 11:e.displayAlign="center",e.textAlign="end"}(i=i.AlphaLevel)&&(e.opacity=parseFloat(i))}function oR(e){return e=parseInt(e.replace("&H",""),16),0<=e?"rgba("+(e&255)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function lR(e){return e=wj.exec(e),3600*(e[1]?parseInt(e[1].replace(":",""),10):0)+60*parseInt(e[2],10)+parseFloat(e[3])}_e("shaka.text.SsaTextParser",yl),yl.prototype.parseMedia=yl.prototype.parseMedia,yl.prototype.setManifestType=yl.prototype.setManifestType,yl.prototype.setSequenceMode=yl.prototype.setSequenceMode,yl.prototype.parseInit=yl.prototype.parseInit;var Aj=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,uR=/^\s*([^:]+):\s*(.*)/,eT=/\s*,\s*/,wj=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;As("text/x-ssa",function(){return new yl});function cR(e,i){var o=e[i+1]&1?7:9;return i+o<=e.length&&(e=((e[i+3]&3)<<11|e[i+4]<<3|(e[i+5]&224)>>>5)-o,0<e)?{ud:o,ia:e}:null}function dR(e,i){var o=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],c=(e[i+2]&60)>>>2;if(c>o.length-1)return null;var h=((e[i+2]&192)>>>6)+1,g=(e[i+2]&1)<<2;return g|=(e[i+3]&192)>>>6,{sampleRate:o[c],channelCount:g,codec:"mp4a.40."+h}}function fR(e,i){if(i+1<e.length&&e[i]===255&&(e[i+1]&246)===240){var o=e[i+1]&1?7:9;if(i+o>=e.length)return!1;var c=(e[i+3]&3)<<11|e[i+4]<<3|(e[i+5]&224)>>>5;return c<=o?!1:(i+=c,i===e.length||i+1<e.length&&e[i]===255&&(e[i+1]&246)===240)}return!1}function Ij(e,i){switch(e){case"mp4a.40.2":if(i===1)return new Uint8Array([0,200,0,128,35,128]);if(i===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(i===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(i===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(i===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(i===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(i===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(i===2||i===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}function vl(e){this.j=e,this.h=0,this.g=new Map,this.i=null}p=vl.prototype,p.destroy=function(){this.g.clear()},p.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/aac"?Ss(this.convertCodecs("audio",e)):!1},p.convertCodecs=function(e,i){return i.toLowerCase().split(";")[0]=="audio/aac"?'audio/mp4; codecs="'+(ea(i)||"mp4a.40.2")+'"':i},p.getOriginalMimeType=function(){return this.j},p.transmux=function(e,i,o,c){for(var h=jn(e),g=nt(h),v=g.length;v<h.length&&!fR(h,v);v++);if(e=1e3*o.endTime,g=Ve(g),g.length&&o&&(g=g.find(function(L){return L.description==="com.apple.streaming.transportStreamTimestamp"}))&&(e=g.data),g=dR(h,v),!g)return Promise.reject(new it(2,3,3018,o?o.N()[0]:null));i.audioSamplingRate=g.sampleRate,i.channelsCount=g.channelCount;for(var E=[];v<h.length;){var S=cR(h,v);if(!S)return Promise.reject(new it(2,3,3018,o?o.N()[0]:null));var I=S.ud+S.ia;v+I<=h.length&&E.push({data:h.subarray(v+S.ud,v+I),size:S.ia,duration:1024,eb:0,flags:{hb:0,$a:0,Za:0,Xa:0,Ya:2,ib:0}}),v+=I}return h=g.sampleRate,e=Math.floor(e*h/1e3),c={id:i.id,type:"audio",codecs:g.codec,encrypted:i.encrypted&&0<i.drmInfos.length,timescale:h,duration:c,lb:[],ra:new Uint8Array([]),Ca:new Uint8Array([]),Ia:0,Ka:0,data:{Db:this.h,baseMediaDecodeTime:e,jb:E},stream:i},c=new cd([c]),o=i.id+"_"+o.i,this.g.has(o)?i=this.g.get(o):(i=sf(c),this.g.set(o,i)),o=this.i!==i,c=af(c),this.i=i,this.h++,o?(i=qr(i,c),Promise.resolve(i)):Promise.resolve(c)},_e("shaka.transmuxer.AacTransmuxer",vl),vl.prototype.transmux=vl.prototype.transmux,vl.prototype.getOriginalMimeType=vl.prototype.getOriginalMimeType,vl.prototype.convertCodecs=vl.prototype.convertCodecs,vl.prototype.isSupported=vl.prototype.isSupported,vl.prototype.destroy=vl.prototype.destroy,zo("audio/aac",function(){return new vl("audio/aac")},Ts);function hR(e,i){if(i+8>e.length||e[i]!==11||e[i+1]!==119)return null;var o=e[i+4]>>6;if(3<=o)return null;var c=e[i+4]&63,h=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*c+o];if(i+h>e.length)return null;var g=e[i+6]>>5,v=0;g===2?v+=2:(g&1&&g!==1&&(v+=2),g&4&&(v+=2)),v=(e[i+6]<<8|e[i+7])>>12-v&1;var E=e[i+5]&7;return e=new Uint8Array([o<<6|e[i+5]>>3<<1|E>>2,(E&3)<<6|g<<3|v<<2|c>>4,c<<4&224]),{sampleRate:[48e3,44100,32e3][o],channelCount:[2,1,2,3,3,4,4,5][g]+v,ra:e,ia:h}}function Cj(e,i){if(e[i]===11&&e[i+1]===119){var o=0,c=5;i+=c;for(var h,g;0<c;){g=e[i];var v=Math.min(c,8),E=8-v;h=4278190080>>>24+E<<E,h=(g&h)>>E,o=o?o<<v|h:h,i+=1,c-=v}if(16>o)return!0}return!1}function Gl(e){this.j=e,this.h=0,this.g=new Map,this.i=null}p=Gl.prototype,p.destroy=function(){this.g.clear()},p.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ac3"?Ss(this.convertCodecs("audio",e)):!1},p.convertCodecs=function(e,i){return i.toLowerCase().split(";")[0]=="audio/ac3"?ii()?'audio/mp4; codecs="ec-3"':'audio/mp4; codecs="ac-3"':i},p.getOriginalMimeType=function(){return this.j},p.transmux=function(e,i,o,c){e=jn(e);for(var h=nt(e),g=h.length;g<e.length&&!Cj(e,g);g++);var v=1e3*o.endTime;h=Ve(h),h.length&&o&&(h=h.find(function(L){return L.description==="com.apple.streaming.transportStreamTimestamp"}))&&(v=h.data),h=0;for(var E=new Uint8Array([]),S=[];g<e.length;){var I=hR(e,g);if(!I)return Promise.reject(new it(2,3,3018,o?o.N()[0]:null));i.audioSamplingRate=I.sampleRate,i.channelsCount=I.channelCount,h=I.sampleRate,E=I.ra,S.push({data:e.subarray(g,g+I.ia),size:I.ia,duration:1536,eb:0,flags:{hb:0,$a:0,Za:0,Xa:0,Ya:2,ib:0}}),g+=I.ia}return e=Math.floor(v*h/1e3),c={id:i.id,type:"audio",codecs:"ac-3",encrypted:i.encrypted&&0<i.drmInfos.length,timescale:h,duration:c,lb:[],ra:E,Ca:new Uint8Array([]),Ia:0,Ka:0,data:{Db:this.h,baseMediaDecodeTime:e,jb:S},stream:i},c=new cd([c]),o=i.id+"_"+o.i,this.g.has(o)?i=this.g.get(o):(i=sf(c),this.g.set(o,i)),o=this.i!==i,c=af(c),this.i=i,this.h++,o?(i=qr(i,c),Promise.resolve(i)):Promise.resolve(c)},_e("shaka.transmuxer.Ac3Transmuxer",Gl),Gl.prototype.transmux=Gl.prototype.transmux,Gl.prototype.getOriginalMimeType=Gl.prototype.getOriginalMimeType,Gl.prototype.convertCodecs=Gl.prototype.convertCodecs,Gl.prototype.isSupported=Gl.prototype.isSupported,Gl.prototype.destroy=Gl.prototype.destroy,zo("audio/ac3",function(){return new Gl("audio/ac3")},Ts);function pR(e,i){if(i+8>e.length||(e[i]<<8|e[i+1]<<0)!==2935)return null;var o=new rt(e.subarray(i+2));me(o,2),me(o,3);var c=Ue(o,11)+1<<1,h=Ue(o,2);if(h==3){h=Ue(o,2),h=[24e3,22060,16e3][h];var g=3}else h=[48e3,44100,32e3][h],g=Ue(o,2);var v=Ue(o,3),E=Ue(o,1);return o=Ue(o,5),i+c>e.byteLength?null:(e=Math.floor(c*h/(16*[1,2,3,6][g])),e=new Uint8Array([(e&8160)>>5,(e&31)<<3,h<<6|o<<1|0,0|v<<1|E<<0,0]),{sampleRate:h,channelCount:[2,1,2,3,3,4,4,5][v]+E,ra:e,ia:c})}function Vl(e){this.j=e,this.h=0,this.g=new Map,this.i=null}p=Vl.prototype,p.destroy=function(){this.g.clear()},p.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ec3"?Ss(this.convertCodecs("audio",e)):!1},p.convertCodecs=function(e,i){return i.toLowerCase().split(";")[0]=="audio/ec3"?'audio/mp4; codecs="ec-3"':i},p.getOriginalMimeType=function(){return this.j},p.transmux=function(e,i,o,c){e=jn(e);for(var h=nt(e),g=h.length;g<e.length&&(e[g]<<8|e[g+1]<<0)!==2935;g++);var v=1e3*o.endTime;h=Ve(h),h.length&&o&&(h=h.find(function(L){return L.description==="com.apple.streaming.transportStreamTimestamp"}))&&(v=h.data),h=0;for(var E=new Uint8Array([]),S=[];g<e.length;){var I=pR(e,g);if(!I)return Promise.reject(new it(2,3,3018,o?o.N()[0]:null));i.audioSamplingRate=I.sampleRate,i.channelsCount=I.channelCount,h=I.sampleRate,E=I.ra,S.push({data:e.subarray(g,g+I.ia),size:I.ia,duration:1536,eb:0,flags:{hb:0,$a:0,Za:0,Xa:0,Ya:2,ib:0}}),g+=I.ia}return e=Math.floor(v*h/1e3),c={id:i.id,type:"audio",codecs:"ec-3",encrypted:i.encrypted&&0<i.drmInfos.length,timescale:h,duration:c,lb:[],ra:E,Ca:new Uint8Array([]),Ia:0,Ka:0,data:{Db:this.h,baseMediaDecodeTime:e,jb:S},stream:i},c=new cd([c]),o=i.id+"_"+o.i,this.g.has(o)?i=this.g.get(o):(i=sf(c),this.g.set(o,i)),o=this.i!==i,c=af(c),this.i=i,this.h++,o?(i=qr(i,c),Promise.resolve(i)):Promise.resolve(c)},_e("shaka.transmuxer.Ec3Transmuxer",Vl),Vl.prototype.transmux=Vl.prototype.transmux,Vl.prototype.getOriginalMimeType=Vl.prototype.getOriginalMimeType,Vl.prototype.convertCodecs=Vl.prototype.convertCodecs,Vl.prototype.isSupported=Vl.prototype.isSupported,Vl.prototype.destroy=Vl.prototype.destroy,zo("audio/ec3",function(){return new Vl("audio/ec3")},Ts);function kj(e){if(!e.length)return null;var i=e.find(function(Me){return Me.type==7});if(e=e.find(function(Me){return Me.type==8}),!i||!e)return null;var o=new rt(i.data),c=qe(o);if(qe(o),qe(o),Ee(o),Rj.includes(c)&&(c=ye(o),c===3&&me(o,1),Ee(o),Ee(o),me(o,1),we(o))){c=c!==3?8:12;for(var h=0;h<c;h++)we(o)&&(6>h?tt(o,16):tt(o,64))}if(Ee(o),c=ye(o),c===0)ye(o);else if(c===1)for(me(o,1),Ee(o),Ee(o),c=ye(o),h=0;h<c;h++)Ee(o);Ee(o),me(o,1);var g=ye(o),v=ye(o),E=Ue(o,1);E===0&&me(o,1),me(o,1);var S=0,I=0,L=0,O=0;if(we(o)&&(S=ye(o),I=ye(o),L=ye(o),O=ye(o)),h=c=1,we(o)&&we(o)){var V=qe(o),W=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],pe=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];0<V&&16>=V?(c=W[V-1],h=pe[V-1]):V===255&&(c=Ue(o,16),h=Ue(o,16))}return o=(2-E)*(v+1)*16-2*L-2*O,g=16*(g+1)-2*S-2*I,S=[],i=i.fullData,S.push(i.byteLength>>>8&255),S.push(i.byteLength&255),S=S.concat.apply(S,k(i)),i=[],e=e.fullData,i.push(e.byteLength>>>8&255),i.push(e.byteLength&255),i=i.concat.apply(i,k(e)),e=new Uint8Array([1,S[3],S[4],S[5],255,225].concat(S,[1],i)),{height:o,width:g,Ca:e,Ia:c,Ka:h}}function Dj(e){function i(pe){h={data:new Uint8Array([]),frame:!1,isKeyframe:!1,pts:pe.pts,dts:pe.dts,nalus:[]}}function o(){if(h&&h.nalus.length&&h.frame){for(var pe=[],Me=T(h.nalus),De=Me.next();!De.done;De=Me.next()){De=De.value;var Fe=De.fullData.byteLength,We=new Uint8Array(4);We[0]=Fe>>24&255,We[1]=Fe>>16&255,We[2]=Fe>>8&255,We[3]=Fe&255,pe.push(We),pe.push(De.fullData)}h.data=qr.apply(Wr,k(pe)),c.push(h)}}for(var c=[],h=null,g=!1,v=0;v<e.length;v++){var E=e[v],S=E.nalus,I=!1;h&&S.length&&!g&&(o(),i(E)),S=T(E.nalus);for(var L=S.next();!L.done;L=S.next()){L=L.value;var O=!1;switch(L.type){case 1:var V=!1;O=!0;var W=L.data;I&&4<W.length&&(W=mt(new rt(W)),W===2||W===4||W===7||W===9)&&(V=!0),V&&h&&h.frame&&!h.isKeyframe&&(o(),h=null),h||i(E),h.frame=!0,h.isKeyframe=V;break;case 5:O=!0,h&&h.frame&&!h.isKeyframe&&(o(),h=null),h||i(E),h.frame=!0,h.isKeyframe=!0;break;case 6:O=!0;break;case 7:I=O=!0;break;case 8:O=!0;break;case 9:g=O=!0,h&&h.frame&&(o(),h=null),h||i(E);break;case 12:O=!0;break;default:O=!1}h&&O&&h.nalus.push(L)}}return o(),c}var Rj=[100,110,122,244,44,83,86,118,128,138,139,134];function Lj(e){if(!e.length)return null;var i=e.find(function(v){return v.type==32}),o=e.find(function(v){return v.type==33}),c=e.find(function(v){return v.type==34});if(!i||!o||!c)return null;var h=Pj(i.fullData);e=Mj(o.fullData);var g=Nj(c.fullData);return i=Oj(i.fullData,o.fullData,c.fullData,{Uf:h.Uf,rg:h.rg,Ef:e.Ef,Ff:e.Ff,yf:e.yf,Df:e.Df,zf:e.zf,Af:e.Af,Bf:e.Bf,Cf:e.Cf,rf:e.rf,tf:e.tf,uf:e.uf,vf:e.vf,wf:e.wf,xf:e.xf,hf:e.hf,le:e.le,ff:e.ff,ef:e.ef,df:e.df,Wf:g.Wf}),{height:e.height,width:e.width,Ca:i,Ia:e.vj,Ka:e.uj}}function Pj(e){var i=new rt(e,!0);return qe(i),qe(i),Ue(i,4),Ue(i,2),Ue(i,6),e=Ue(i,3),i=we(i),{Uf:e+1,rg:i}}function Mj(e){e=new rt(e,!0),qe(e),qe(e);var i=0,o=0,c=0,h=0;Ue(e,4);var g=Ue(e,3);we(e);for(var v=Ue(e,2),E=Ue(e,1),S=Ue(e,5),I=qe(e),L=qe(e),O=qe(e),V=qe(e),W=qe(e),pe=qe(e),Me=qe(e),De=qe(e),Fe=qe(e),We=qe(e),gt=qe(e),ht=[],It=[],ot=0;ot<g;ot++)ht.push(we(e)),It.push(we(e));if(0<g)for(ot=g;8>ot;ot++)Ue(e,2);for(ot=0;ot<g;ot++)ht[ot]&&Ue(e,88),It[ot]&&qe(e);ye(e),ht=ye(e),ht==3&&Ue(e,1),It=ye(e),ot=ye(e),we(e)&&(i+=ye(e),o+=ye(e),c+=ye(e),h+=ye(e));var st=ye(e),_t=ye(e),xt=ye(e);if(we(e))for(var Ht=0;Ht<=g;Ht++)ye(e),ye(e),ye(e);else ye(e),ye(e),ye(e);if(ye(e),ye(e),ye(e),ye(e),ye(e),ye(e),we(e)&&we(e))for(Ht=0;4>Ht;Ht++)for(var Pt=0;Pt<(Ht===3?2:6);Pt++)if(we(e)){var jt=Math.min(64,1<<4+(Ht<<1));1<Ht&&de(e);for(var Gt=0;Gt<jt;Gt++)de(e)}else ye(e);for(we(e),we(e),we(e)&&(qe(e),ye(e),ye(e),we(e)),Ht=ye(e),jt=Pt=0;jt<Ht;jt++)if(Gt=!1,jt!==0&&(Gt=we(e)),Gt){jt===Ht&&ye(e),we(e),ye(e);for(var Yt=Gt=0;Yt<=Pt;Yt++){var Zt=we(e),Xt=!1;Zt||(Xt=we(e)),(Zt||Xt)&&Gt++}Pt=Gt}else{for(Yt=ye(e),Gt=ye(e),Pt=Yt+Gt,Zt=0;Zt<Yt;Zt++)ye(e),we(e);for(Yt=0;Yt<Gt;Yt++)ye(e),we(e)}if(we(e))for(Ht=ye(e),Pt=0;Pt<Ht;Pt++){for(jt=0;jt<xt+4;jt++)Ue(e,1);Ue(e,1)}if(Ht=xt=1,Pt=0,we(e),we(e),we(e)){if(we(e)&&(jt=qe(e),Gt=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],Yt=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1],0<jt&&16>=jt?(xt=Gt[jt-1],Ht=Yt[jt-1]):jt===255&&(xt=Ue(e,16),Ht=Ue(e,16))),we(e)&&we(e),we(e)&&(Ue(e,3),we(e),we(e)&&(qe(e),qe(e),qe(e))),we(e)&&(ye(e),ye(e)),we(e),we(e),we(e),(jt=we(e))&&(ye(e),ye(e),ye(e),ye(e)),we(e)&&(Ue(e,32),Ue(e,32),we(e)&&ye(e),we(e)))for(Yt=!1,jt=we(e),Gt=we(e),(jt||Gt)&&((Yt=we(e))&&(qe(e),Ue(e,5),we(e),Ue(e,5)),Ue(e,4),Ue(e,4),Yt&&Ue(e,4),Ue(e,5),Ue(e,5),Ue(e,5)),Zt=0;Zt<=g;Zt++){var En=!0;Xt=1,we(e)||(En=we(e));var Wn=!1;if(En?ye(e):Wn=we(e),Wn||(Xt=ye(e)+1),jt){for(En=0;En<Xt;En++)ye(e),ye(e),Yt&&(ye(e),ye(e));we(e)}if(Gt){for(En=0;En<Xt;En++)ye(e),ye(e),Yt&&(ye(e),ye(e));we(e)}}we(e)&&(we(e),we(e),we(e),Pt=ye(e),ye(e),ye(e),ye(e),ye(e))}return{yf:gt,Ef:v,Ff:E,Df:S,zf:I,Af:L,Bf:O,Cf:V,rf:W,tf:pe,uf:Me,vf:De,wf:Fe,xf:We,le:Pt,hf:0,ff:ht,ef:st,df:_t,width:It-(i+o)*(ht===1||ht===2?2:1),height:ot-(c+h)*(ht===1?2:1),vj:xt,uj:Ht}}function Nj(e){var i=new rt(e,!0);qe(i),qe(i),ye(i),ye(i),we(i),we(i),Ue(i,3),we(i),we(i),ye(i),ye(i),de(i),we(i),we(i),we(i)&&ye(i),de(i),de(i),we(i),we(i),we(i),we(i),e=we(i),i=we(i);var o=1;return i&&e?o=0:i?o=3:e&&(o=2),{Wf:o}}function Oj(e,i,o,c){var h=new Uint8Array(23+(5+e.byteLength)+(5+i.byteLength)+(5+o.byteLength));return h[0]=1,h[1]=(c.Ef&3)<<6|(c.Ff?1:0)<<5|c.Df&31,h[2]=c.zf,h[3]=c.Af,h[4]=c.Bf,h[5]=c.Cf,h[6]=c.rf,h[7]=c.tf,h[8]=c.uf,h[9]=c.vf,h[10]=c.wf,h[11]=c.xf,h[12]=c.yf,h[13]=240|(c.le&3840)>>8,h[14]=c.le&255,h[15]=252|c.Wf&3,h[16]=252|c.ff&3,h[17]=248|c.ef&7,h[18]=248|c.df&7,h[19]=0,h[20]=0,h[21]=(c.hf&3)<<6|(c.Uf&7)<<3|(c.rg?1:0)<<2|3,h[22]=3,h[23]=160,h[24]=0,h[25]=1,h[26]=(e.byteLength&65280)>>8,h[27]=(e.byteLength&255)>>0,h.set(e,28),h[23+(5+e.byteLength)]=161,h[e.byteLength+29]=0,h[e.byteLength+30]=1,h[e.byteLength+31]=(i.byteLength&65280)>>8,h[e.byteLength+32]=(i.byteLength&255)>>0,h.set(i,e.byteLength+33),h[23+(e.byteLength+10+i.byteLength)]=162,h[e.byteLength+10+i.byteLength+24]=0,h[e.byteLength+10+i.byteLength+25]=1,h[e.byteLength+10+i.byteLength+26]=(o.byteLength&65280)>>8,h[e.byteLength+10+i.byteLength+27]=(o.byteLength&255)>>0,h.set(o,e.byteLength+10+i.byteLength+28),h}function tT(e,i){var o=e[i+1]>>3&3,c=e[i+1]>>1&3,h=e[i+2]>>4&15,g=e[i+2]>>2&3;if(o!==1&&h!==0&&h!==15&&g!==3){var v=e[i+3]>>6;h=1e3*Fj[14*(o===3?3-c:c===3?3:4)+h-1],g=Uj[3*(o===3?0:o===2?1:2)+g],o=Bj[o][c];var E=zj[c],S=Math.floor(o*h/g+(e[i+2]>>1&1))*E,I=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);return(I=I?parseInt(I[1],10):0)&&87>=I&&c===2&&224e3<=h&&v===0&&(e[i+3]|=128),{sampleRate:g,channelCount:v===3?1:2,ia:S,tj:8*o*E}}return null}function gR(e,i){return e[i]===255&&(e[i+1]&224)===224&&(e[i+1]&6)!==0}function mR(e,i){if(i+1<e.length&&gR(e,i)){var o=tT(e,i),c=4;return o&&o.ia&&(c=o.ia),i+=c,i===e.length||i+1<e.length&&gR(e,i)}return!1}var Fj=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],Uj=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],Bj=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],zj=[0,1,1,4];function $l(e){this.j=e,this.h=0,this.g=new Map,this.i=null}p=$l.prototype,p.destroy=function(){this.g.clear()},p.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/mpeg"?Ss(this.convertCodecs("audio",e)):!1},p.convertCodecs=function(e,i){return i.toLowerCase().split(";")[0]=="audio/mpeg"?'audio/mp4; codecs="mp3"':i},p.getOriginalMimeType=function(){return this.j},p.transmux=function(e,i,o,c){for(var h=jn(e),g=nt(h).length;g<h.length&&!mR(h,g);g++);var v;for(e=[];g<h.length;){var E=tT(h,g);if(!E)return Promise.reject(new it(2,3,3018,o?o.N()[0]:null));v||(v=E),g+E.ia<=h.length&&e.push({data:h.subarray(g,g+E.ia),size:E.ia,duration:1152,eb:0,flags:{hb:0,$a:0,Za:0,Xa:0,Ya:2,ib:0}}),g+=E.ia}return v?(h=9e4*v.tj/v.sampleRate*this.h,c={id:i.id,type:"audio",codecs:"mp3",encrypted:i.encrypted&&0<i.drmInfos.length,timescale:v.sampleRate,duration:c,lb:[],ra:new Uint8Array([]),Ca:new Uint8Array([]),Ia:0,Ka:0,data:{Db:this.h,baseMediaDecodeTime:h,jb:e},stream:i},c=new cd([c]),o=i.id+"_"+o.i,this.g.has(o)?i=this.g.get(o):(i=sf(c),this.g.set(o,i)),o=this.i!==i,c=af(c),this.i=i,this.h++,o?(i=qr(i,c),Promise.resolve(i)):Promise.resolve(c)):Promise.reject(new it(2,3,3018,o?o.N()[0]:null))},_e("shaka.transmuxer.Mp3Transmuxer",$l),$l.prototype.transmux=$l.prototype.transmux,$l.prototype.getOriginalMimeType=$l.prototype.getOriginalMimeType,$l.prototype.convertCodecs=$l.prototype.convertCodecs,$l.prototype.isSupported=$l.prototype.isSupported,$l.prototype.destroy=$l.prototype.destroy,zo("audio/mpeg",function(){return new $l("audio/mpeg")},Ts);function Kl(e){this.h=e,this.g=null}p=Kl.prototype,p.destroy=function(){},p.isSupported=function(e){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var i=ea(e).split(","),o=zs("audio",i);return i=zs("video",i),!o||i||Ds(o)!="mp3"?!1:Ss(this.convertCodecs("audio",e))},p.convertCodecs=function(e,i){return i.toLowerCase().split(";")[0]=="video/mp2t"?"audio/mpeg":i},p.getOriginalMimeType=function(){return this.h},p.transmux=function(e,i,o,c,h){if(this.g?this.g.clearData():this.g=new Tt,e=jn(e),e=this.g.parse(e),e.od().audio!="mp3"||h!="audio")return Promise.reject(new it(2,3,3018,o?o.N()[0]:null));for(o=new Uint8Array([]),h=T(e.fb()),e=h.next();!e.done;e=h.next())if(e=e.value.data)for(i=0;i<e.length;)(c=tT(e,i))?(i+c.ia<=e.length&&(o=qr(o,e.subarray(i,i+c.ia))),i+=c.ia):i++;return Promise.resolve(o)},_e("shaka.transmuxer.MpegTsTransmuxer",Kl),Kl.prototype.transmux=Kl.prototype.transmux,Kl.prototype.getOriginalMimeType=Kl.prototype.getOriginalMimeType,Kl.prototype.convertCodecs=Kl.prototype.convertCodecs,Kl.prototype.isSupported=Kl.prototype.isSupported,Kl.prototype.destroy=Kl.prototype.destroy,zo("video/mp2t",function(){return new Kl("video/mp2t")},uu);/*
 @license
 MSS Transmuxer
 Copyright 2015 Dash Industry Forum
 SPDX-License-Identifier: BSD-3-Clause
*/function Tl(e){this.h=e,(this.g=G_.get("ISOBoxer")())&&jj(this)}function jj(e){function i(){this._procFullBox(),this.flags&1&&(this._procField("AlgorithmID","uint",24),this._procField("IV_size","uint",8),this._procFieldArray("KID",16,"uint",8)),this._procField("sample_count","uint",32),this._procEntries("entry",this.sample_count,function(o){this._procEntryField(o,"InitializationVector","data",8),this.flags&2&&(this._procEntryField(o,"NumberOfEntries","uint",16),this._procSubEntries(o,"clearAndCryptedData",o.NumberOfEntries,function(c){this._procEntryField(c,"BytesOfClearData","uint",16),this._procEntryField(c,"BytesOfEncryptedData","uint",32)}))})}e.g.addBoxProcessor("saio",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("entry_count","uint",32),this._procFieldArray("offset",this.entry_count,"uint",this.version===1?64:32)}),e.g.addBoxProcessor("saiz",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("default_sample_info_size","uint",8),this._procField("sample_count","uint",32),this.default_sample_info_size===0&&this._procFieldArray("sample_info_size",this.sample_count,"uint",8)}),e.g.addBoxProcessor("senc",i),e.g.addBoxProcessor("uuid",function(){for(var o=!0,c=0;16>c;c++)this.usertype[c]!==qj[c]&&(o=!1);o&&(this._parsing&&(this.type="sepiff"),i.call(this))})}p=Tl.prototype,p.destroy=function(){},p.isSupported=function(e,i){var o=e.startsWith("mss/");return!this.g||!o?!1:i?Ss(this.convertCodecs(i,e)):(i=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),Ss(i)||Ss(e))},p.convertCodecs=function(e,i){return i.replace("mss/","")},p.getOriginalMimeType=function(){return this.h},p.transmux=function(e,i,o){if(!o)return Promise.resolve(jn(e));if(!i.mssPrivateData)return Promise.reject(new it(2,3,3020,o?o.N()[0]:null));try{var c,h=this.g.parseBuffer(e),g=h.fetch("tfhd");g.track_ID=i.id+1;var v=h.fetch("tfdt"),E=h.fetch("traf");v===null&&(v=this.g.createFullBox("tfdt",E,g),v.version=1,v.flags=0,v.baseMediaDecodeTime=Math.floor(o.startTime*i.mssPrivateData.timescale));var S=h.fetch("trun"),I=h.fetch("tfxd");I&&I._parent.boxes.splice(I._parent.boxes.indexOf(I),1);var L=h.fetch("tfrf");L&&L._parent.boxes.splice(L._parent.boxes.indexOf(L),1);var O=h.fetch("sepiff");if(O!==null){O.type="senc",O.usertype=void 0;var V=h.fetch("saio");if(V===null){V=this.g.createFullBox("saio",E),V.version=0,V.flags=0,V.entry_count=1,V.offset=[0];var W=this.g.createFullBox("saiz",E);if(W.version=0,W.flags=0,W.sample_count=O.sample_count,W.default_sample_info_size=0,W.sample_info_size=[],O.flags&2)for(c=0;c<O.sample_count;c+=1)W.sample_info_size[c]=10+6*O.entry[c].NumberOfEntries;else W.default_sample_info_size=8}}g.flags&=16777214,g.flags|=131072,S.flags|=1;var pe=h.fetch("moof");S.data_offset=pe.getLength()+8;var Me=h.fetch("saio");Me!==null&&(Me.offset[0]=yR(pe,"traf")+yR(E,"senc")+16);var De=jn(h.write());return Promise.resolve(De)}catch(Fe){return Fe instanceof it?Promise.reject(Fe):Promise.reject(new it(2,3,3022,o?o.N()[0]:null))}};function yR(e,i){for(var o=8,c=0;c<e.boxes.length&&e.boxes[c].type!==i;c++)o+=e.boxes[c].size;return o}_e("shaka.transmuxer.MssTransmuxer",Tl),Tl.prototype.transmux=Tl.prototype.transmux,Tl.prototype.getOriginalMimeType=Tl.prototype.getOriginalMimeType,Tl.prototype.convertCodecs=Tl.prototype.convertCodecs,Tl.prototype.isSupported=Tl.prototype.isSupported,Tl.prototype.destroy=Tl.prototype.destroy;var qj=new Uint8Array([162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244]);zo("mss/audio/mp4",function(){return new Tl("mss/audio/mp4")},Ts),zo("mss/video/mp4",function(){return new Tl("mss/video/mp4")},Ts);function Yl(e){this.m=e,this.g=0,this.i=new Map,this.l=this.h=this.j=null}p=Yl.prototype,p.destroy=function(){this.i.clear(),this.h&&this.h.destroy()},p.isSupported=function(e,i){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var o=e;i&&(o=this.convertCodecs(i,e));var c=ea(o).split(",");return o=zs("audio",c),c=zs("video",c),o&&(o=Ds(o),!Hj.includes(o))||c&&(o=Ds(c),!Gj.includes(o))?!1:i?Ss(this.convertCodecs(i,e)):(i=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),Ss(i)||Ss(e))},p.convertCodecs=function(e,i){return i.toLowerCase().split(";")[0]=="video/mp2t"?(i=ea(i).replace("mp4a.40.34","mp3").split(",").map(function(o){return Ct(o,"audio/mp4")}).map($t).join(","),e=="audio"?'audio/mp4; codecs="'+i+'"':'video/mp4; codecs="'+i+'"'):i},p.getOriginalMimeType=function(){return this.m},p.transmux=function(e,i,o,c,h){var g=jn(e);if(h=="audio"&&!Zn(g)){for(var v=nt(g),E=v.length;E<g.length;E++)if(mR(g,E))return Promise.reject(new it(2,3,3018,o?o.N()[0]:null));for(E=v.length;E<g.length;E++)if(fR(g,E))return this.h||(this.h=new vl("audio/aac")),this.h.transmux(e,i,o,c,h);return Promise.reject(new it(2,3,3018,o?o.N()[0]:null))}this.j?this.j.clearData():this.j=new Tt;var S=this.j.parse(g),I=[],L=S.od();try{var O=null;if(h=="video"){switch(L.video){case"avc":var V=[],W=null,pe=S.wc(),Me=Dj(pe);if(!Me.length)throw new it(2,3,3023,o?o.N()[0]:null);for(var De=0;De<Me.length;De++){var Fe=Me[De];W==null&&(W=Fe.dts);var We=void 0;We=De+1<Me.length?(Me[De+1].dts||0)-(Fe.dts||0):1<Me.length?(Fe.dts||0)-(Me[De-1].dts||0):9e4*(o.endTime-o.startTime),V.push({data:Fe.data,size:Fe.data.byteLength,duration:We,eb:Math.round((Fe.pts||0)-(Fe.dts||0)),flags:{hb:0,$a:0,Za:0,Xa:0,Ya:Fe.isKeyframe?2:1,ib:Fe.isKeyframe?0:1}})}for(var gt=[],ht=T(pe),It=ht.next();!It.done;It=ht.next())gt.push.apply(gt,k(It.value.nalus));var ot=kj(gt);if(!ot||W==null)throw new it(2,3,3018,o?o.N()[0]:null);i.height=ot.height,i.width=ot.width,O={id:i.id,type:"video",codecs:"avc1",encrypted:i.encrypted&&0<i.drmInfos.length,timescale:9e4,duration:c,lb:[],ra:new Uint8Array([]),Ca:ot.Ca,Ia:ot.Ia,Ka:ot.Ka,data:{Db:this.g,baseMediaDecodeTime:W,jb:V},stream:i};break;case"hvc":var st=[],_t=null,xt=[],Ht=S.wc();if(!Ht.length)throw new it(2,3,3023,o?o.N()[0]:null);for(var Pt=0;Pt<Ht.length;Pt++){var jt=Ht[Pt],Gt=jt.nalus;xt.push.apply(xt,k(Gt));for(var Yt=!1,Zt=[],Xt=!1,En=T(Gt),Wn=En.next();!Wn.done;Wn=En.next()){var Di=Wn.value;switch(Di.type){case 1:case 0:var yi=Xt=!0;break;case 19:case 20:case 21:Yt=yi=Xt=!0;break;case 32:yi=!0;break;case 33:yi=!0;break;case 34:yi=!0;break;case 35:Xt=yi=!0;break;case 39:case 40:yi=!0;break;default:yi=!1}if(Xt&&yi){var yr=Di.fullData.byteLength,Ji=new Uint8Array(4);Ji[0]=yr>>24&255,Ji[1]=yr>>16&255,Ji[2]=yr>>8&255,Ji[3]=yr&255,Zt.push(Ji),Zt.push(Di.fullData)}}var Vi=Zt.length?{data:qr.apply(Wr,k(Zt)),isKeyframe:Yt}:null;if(Vi){_t==null&&jt.dts!=null&&(_t=jt.dts);var Wi=void 0;Wi=Pt+1<Ht.length?(Ht[Pt+1].dts||0)-(jt.dts||0):1<Ht.length?(jt.dts||0)-(Ht[Pt-1].dts||0):9e4*(o.endTime-o.startTime),st.push({data:Vi.data,size:Vi.data.byteLength,duration:Wi,eb:Math.round((jt.pts||0)-(jt.dts||0)),flags:{hb:0,$a:0,Za:0,Xa:0,Ya:Vi.isKeyframe?2:1,ib:Vi.isKeyframe?0:1}})}}var fr=Lj(xt);if(!fr||_t==null)throw new it(2,3,3018,o?o.N()[0]:null);i.height=fr.height,i.width=fr.width,O={id:i.id,type:"video",codecs:"hvc1",encrypted:i.encrypted&&0<i.drmInfos.length,timescale:9e4,duration:c,lb:[],ra:new Uint8Array([]),Ca:fr.Ca,Ia:fr.Ia,Ka:fr.Ka,data:{Db:this.g,baseMediaDecodeTime:_t,jb:st},stream:i}}O&&(I.push(O),O=null)}if(h=="audio"){switch(L.audio){case"aac":for(var ji=[],nr,Pi=null,qi=null,Or=null,Vs=T(S.fb()),Jr=Vs.next();!Jr.done;Jr=Vs.next()){var ss=Jr.value,Ps=ss.data;if(Ps){var ta=0;if(qi==-1&&Or)Ps=qr(Or,ss.data),qi=null;else if(qi!=null&&Or){ta=Math.max(0,qi);var Eh=qr(Or,Ps.subarray(0,ta));ji.push({data:Eh,size:Eh.byteLength,duration:1024,eb:0,flags:{hb:0,$a:0,Za:0,Xa:0,Ya:2,ib:0}}),qi=Or=null}if(nr=dR(Ps,ta),!nr)throw new it(2,3,3018,o?o.N()[0]:null);for(i.audioSamplingRate=nr.sampleRate,i.channelsCount=nr.channelCount,Pi==null&&ss.pts!==null&&(Pi=ss.pts);ta<Ps.length;){var Ad=cR(Ps,ta);if(!Ad){Or=Ps.subarray(ta,Ps.length),qi=-1;break}var mf=Ad.ud+Ad.ia;qi=Math.max(0,ta+mf-Ps.length),qi!=0?Or=Ps.subarray(ta+Ad.ud,ta+mf):ta+mf<=Ps.length&&ji.push({data:Ps.subarray(ta+Ad.ud,ta+mf),size:Ad.ia,duration:1024,eb:0,flags:{hb:0,$a:0,Za:0,Xa:0,Ya:2,ib:0}}),ta+=mf}}}if(!nr||Pi==null){if(!S.wc().length)throw new it(2,3,3018,o?o.N()[0]:null);Pi=9e4*o.startTime;var Wl=zs("audio",i.codecs.split(","));if(!Wl||!i.channelsCount||!i.audioSamplingRate)throw new it(2,3,3018,o?o.N()[0]:null);nr={sampleRate:i.audioSamplingRate,channelCount:i.channelsCount,codec:Wl};var jS=Ij(Wl,i.channelsCount);if(!jS)throw new it(2,3,3018,o?o.N()[0]:null);for(var Xj=Pi+9e4*(o.endTime-o.startTime),LR=Pi;LR<Xj;)ji.push({data:jS,size:jS.byteLength,duration:1024,eb:0,flags:{hb:0,$a:0,Za:0,Xa:0,Ya:2,ib:0}}),LR+=1024/nr.sampleRate*9e4}var PR=nr.sampleRate,Qj=Pi/9e4*PR;O={id:i.id,type:"audio",codecs:nr.codec,encrypted:i.encrypted&&0<i.drmInfos.length,timescale:PR,duration:c,lb:[],ra:new Uint8Array([]),Ca:new Uint8Array([]),Ia:0,Ka:0,data:{Db:this.g,baseMediaDecodeTime:Qj,jb:ji},stream:i};break;case"ac3":for(var MR=[],iT=0,qS=new Uint8Array([]),rT=null,NR=T(S.fb()),HS=NR.next();!HS.done;HS=NR.next()){var GS=HS.value,VS=GS.data;rT==null&&GS.pts!==null&&(rT=GS.pts);for(var jp=0;jp<VS.length;){var yf=hR(VS,jp);yf?(i.audioSamplingRate=yf.sampleRate,i.channelsCount=yf.channelCount,iT=yf.sampleRate,qS=yf.ra,MR.push({data:VS.subarray(jp,jp+yf.ia),size:yf.ia,duration:1536,eb:0,flags:{hb:0,$a:0,Za:0,Xa:0,Ya:2,ib:0}}),jp+=yf.ia):jp++}}if(iT==0||qS.byteLength==0||rT==null)throw new it(2,3,3018,o?o.N()[0]:null);var Jj=rT/9e4*iT;O={id:i.id,type:"audio",codecs:"ac-3",encrypted:i.encrypted&&0<i.drmInfos.length,timescale:iT,duration:c,lb:[],ra:qS,Ca:new Uint8Array([]),Ia:0,Ka:0,data:{Db:this.g,baseMediaDecodeTime:Jj,jb:MR},stream:i};break;case"ec3":for(var OR=[],sT=0,$S=new Uint8Array([]),aT=null,FR=T(S.fb()),KS=FR.next();!KS.done;KS=FR.next()){var YS=KS.value,WS=YS.data;aT==null&&YS.pts!==null&&(aT=YS.pts);for(var qp=0;qp<WS.length;){var vf=pR(WS,qp);vf?(i.audioSamplingRate=vf.sampleRate,i.channelsCount=vf.channelCount,sT=vf.sampleRate,$S=vf.ra,OR.push({data:WS.subarray(qp,qp+vf.ia),size:vf.ia,duration:1536,eb:0,flags:{hb:0,$a:0,Za:0,Xa:0,Ya:2,ib:0}}),qp+=vf.ia):qp++}}if(sT==0||$S.byteLength==0||aT==null)throw new it(2,3,3018,o?o.N()[0]:null);var Zj=aT/9e4*sT;O={id:i.id,type:"audio",codecs:"ec-3",encrypted:i.encrypted&&0<i.drmInfos.length,timescale:sT,duration:c,lb:[],ra:$S,Ca:new Uint8Array([]),Ia:0,Ka:0,data:{Db:this.g,baseMediaDecodeTime:Zj,jb:OR},stream:i};break;case"mp3":for(var UR=[],oT,lT=null,BR=T(S.fb()),XS=BR.next();!XS.done;XS=BR.next()){var QS=XS.value,ty=QS.data;if(ty){lT==null&&QS.pts!==null&&(lT=QS.pts);for(var bh=0;bh<ty.length;){var Hp=tT(ty,bh);Hp?(oT||(oT=Hp),bh+Hp.ia<=ty.length&&UR.push({data:ty.subarray(bh,bh+Hp.ia),size:Hp.ia,duration:1152,eb:0,flags:{hb:0,$a:0,Za:0,Xa:0,Ya:2,ib:0}}),bh+=Hp.ia):bh++}}}if(!oT||lT==null)throw new it(2,3,3018,o?o.N()[0]:null);var zR=oT.sampleRate,e5=lT/9e4*zR;O={id:i.id,type:"audio",codecs:"mp3",encrypted:i.encrypted&&0<i.drmInfos.length,timescale:zR,duration:c,lb:[],ra:new Uint8Array([]),Ca:new Uint8Array([]),Ia:0,Ka:0,data:{Db:this.g,baseMediaDecodeTime:e5,jb:UR},stream:i};break;case"opus":var jR=[],uT=null,wc=S.F;if(!wc)throw new it(2,3,3018,o?o.N()[0]:null);var lo=[];switch(wc.Zh){case 1:case 2:lo=[0];break;case 0:lo=[255,1,1,0,1];break;case 128:lo=[255,2,0,0,1];break;case 3:lo=[1,2,1,0,2,1];break;case 4:lo=[1,2,2,0,1,2,3];break;case 5:lo=[1,3,2,0,4,1,2,3];break;case 6:lo=[1,4,2,0,4,1,2,3,5];break;case 7:lo=[1,4,2,0,4,1,2,3,5,6];break;case 8:lo=[1,5,3,0,6,1,2,3,4,5,7];break;case 130:lo=[1,1,2,0,1];break;case 131:lo=[1,1,3,0,1,2];break;case 132:lo=[1,1,4,0,1,2,3];break;case 133:lo=[1,1,5,0,1,2,3,4];break;case 134:lo=[1,1,6,0,1,2,3,4,5];break;case 135:lo=[1,1,7,0,1,2,3,4,5,6];break;case 136:lo=[1,1,8,0,1,2,3,4,5,6,7]}for(var qR=new Uint8Array([0,wc.channelCount,0,0,wc.sampleRate>>>24&255,wc.sampleRate>>>17&255,wc.sampleRate>>>8&255,wc.sampleRate>>>0&255,0,0].concat(k(lo))),HR=wc.sampleRate,GR=T(S.fb()),JS=GR.next();!JS.done;JS=GR.next()){var ZS=JS.value,Gp=ZS.data;uT==null&&ZS.pts!==null&&(uT=ZS.pts);for(var ny=0;ny<Gp.length;){for(var t5=(Gp[ny+1]&16)!==0,n5=(Gp[ny+1]&8)!==0,wd=ny+2,cT=0;Gp[wd]===255;)cT+=255,wd+=1;cT+=Gp[wd],wd+=1,wd+=t5?2:0,wd+=n5?2:0;var VR=Gp.slice(wd,wd+cT);jR.push({data:VR,size:VR.byteLength,duration:960,eb:0,flags:{hb:0,$a:0,Za:0,Xa:0,Ya:2,ib:0}}),ny=wd+cT}}if(qR.byteLength==0||uT==null)throw new it(2,3,3018,o?o.N()[0]:null);i.audioSamplingRate=wc.sampleRate,i.channelsCount=wc.channelCount;var i5=uT/9e4*HR;O={id:i.id,type:"audio",codecs:"opus",encrypted:i.encrypted&&0<i.drmInfos.length,timescale:HR,duration:c,lb:[],ra:qR,Ca:new Uint8Array([]),Ia:0,Ka:0,data:{Db:this.g,baseMediaDecodeTime:i5,jb:jR},stream:i}}O&&(I.push(O),O=null)}}catch(tx){return tx&&tx.code==3023?Promise.resolve(new Uint8Array([])):Promise.reject(tx)}if(!I.length)return Promise.reject(new it(2,3,3018,o?o.N()[0]:null));var $R=new cd(I),ex=i.id+"_"+o.i;if(this.i.has(ex))var iy=this.i.get(ex);else iy=sf($R),this.i.set(ex,iy);var r5=this.l!==iy,KR=af($R);if(this.l=iy,this.g++,r5){var s5=qr(iy,KR);return Promise.resolve(s5)}return Promise.resolve(KR)},_e("shaka.transmuxer.TsTransmuxer",Yl),Yl.prototype.transmux=Yl.prototype.transmux,Yl.prototype.getOriginalMimeType=Yl.prototype.getOriginalMimeType,Yl.prototype.convertCodecs=Yl.prototype.convertCodecs,Yl.prototype.isSupported=Yl.prototype.isSupported,Yl.prototype.destroy=Yl.prototype.destroy;var Hj=["aac","ac-3","ec-3","mp3","opus"],Gj=["avc","hevc"];zo("video/mp2t",function(){return new Yl("video/mp2t")},ol);function vR(){}j(vR,So),_e("shaka.util.FairPlayUtils",vR);/*
 @license
 EME Encryption Scheme Polyfill
 Copyright 2019 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function TR(){}var Zm;function ER(){Zm||navigator.emeEncryptionSchemePolyfilled?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(Zm=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=Vj,navigator.emeEncryptionSchemePolyfilled=!0):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function Vj(e,i){var o=this,c;return Qe(function(h){return h.g==1?(console.assert(o==navigator,'bad "this" for requestMediaKeySystemAccess'),x(h,Zm.call(o,e,i),2)):(c=h.h,CR(c)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=Zm,h.return(c)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=bR,h.return(bR.call(o,e,i))))})}function bR(e,i){var o=this,c,h,g,v,E,S,I,L,O,V,W,pe;return Qe(function(Me){if(Me.g==1){for(console.assert(o==navigator,'bad "this" for requestMediaKeySystemAccess'),c=IR(e),h=[],g=T(i),v=g.next();!v.done;v=g.next())E=v.value,S=_R(E.videoCapabilities,c),I=_R(E.audioCapabilities,c),E.videoCapabilities&&E.videoCapabilities.length&&!S.length||E.audioCapabilities&&E.audioCapabilities.length&&!I.length||(L=Object.assign({},E),L.videoCapabilities=S,L.audioCapabilities=I,h.push(L));if(!h.length)throw O=Error("Unsupported keySystem or supportedConfigurations."),O.name="NotSupportedError",O.code=DOMException.NOT_SUPPORTED_ERR,O;return x(Me,Zm.call(o,e,h),2)}return V=Me.h,pe=W=null,h[0]&&(h[0].videoCapabilities&&(W=h[0].videoCapabilities[0].encryptionScheme),h[0].audioCapabilities&&(pe=h[0].audioCapabilities[0].encryptionScheme)),Me.return(new nT(V,W,pe))})}function _R(e,i){return e&&e.filter(function(o){return US(o.encryptionScheme,i)})}_e("EmeEncryptionSchemePolyfill",TR),TR.install=ER;function SR(){}var ey;function xR(){ey||navigator.mediaCapabilitiesEncryptionSchemePolyfilled?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(ey=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=$j,navigator.mediaCapabilitiesEncryptionSchemePolyfilled=!0):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function $j(e){var i=this,o,c;return Qe(function(h){switch(h.g){case 1:return console.assert(i==navigator.mediaCapabilities,'bad "this" for decodingInfo'),x(h,ey.call(i,e),2);case 2:if(o=h.h,!o.supported||!e.keySystemConfiguration)return h.return(o);if((c=o.keySystemAccess)&&CR(c))return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=ey,h.return(o);if(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=AR,c){h.s(3);break}return x(h,wR(e),4);case 4:return o.keySystemAccess=h.h,h.return(o);case 3:return h.return(AR.call(i,e))}})}function AR(e){var i=this,o,c,h,g,v,E,S;return Qe(function(I){switch(I.g){case 1:return console.assert(i==navigator.mediaCapabilities,'bad "this" for decodingInfo'),c=o=null,!e.keySystemConfiguration||(h=e.keySystemConfiguration,g=h.keySystem,c=h.audio&&h.audio.encryptionScheme,o=h.video&&h.video.encryptionScheme,v=IR(g),E={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},US(c,v)&&US(o,v))?x(I,ey.call(i,e),2):I.return(E);case 2:if(S=I.h,S.keySystemAccess){S.keySystemAccess=new nT(S.keySystemAccess,o,c),I.s(3);break}if(!e.keySystemConfiguration){I.s(3);break}return x(I,wR(e),5);case 5:S.keySystemAccess=I.h;case 3:return I.return(S)}})}function wR(e){var i,o;return Qe(function(c){if(c.g==1){var h=e.keySystemConfiguration,g=[],v=[];return h.audio&&g.push({robustness:h.audio.robustness||"",contentType:e.audio.contentType,encryptionScheme:h.audio.encryptionScheme}),h.video&&v.push({robustness:h.video.robustness||"",contentType:e.video.contentType,encryptionScheme:h.video.encryptionScheme}),h={initDataTypes:h.initDataType?[h.initDataType]:[],distinctiveIdentifier:h.distinctiveIdentifier,persistentState:h.persistentState,sessionTypes:h.sessionTypes},g.length&&(h.audioCapabilities=g),v.length&&(h.videoCapabilities=v),i=h,x(c,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[i]),2)}return o=c.h,c.return(o)})}_e("McEncryptionSchemePolyfill",SR),SR.install=xR;function nT(e,i,o){this.g=e,this.i=i||null,this.h=o||null,this.keySystem=e.keySystem}nT.prototype.getConfiguration=function(){var e=this.g.getConfiguration();if(e.videoCapabilities)for(var i=T(e.videoCapabilities),o=i.next();!o.done;o=i.next())o.value.encryptionScheme=this.i;if(e.audioCapabilities)for(i=T(e.audioCapabilities),o=i.next();!o.done;o=i.next())o.value.encryptionScheme=this.h;return e},nT.prototype.createMediaKeys=function(){return this.g.createMediaKeys()};function IR(e){return e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("com.adobe")||e.startsWith("org.w3")?"cenc":e.startsWith("com.apple")?"cbcs":e.startsWith("com.huawei")?"cenc":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function CR(e){e=e.getConfiguration();var i=e.audioCapabilities&&e.audioCapabilities[0];return!!((e=e.videoCapabilities&&e.videoCapabilities[0]||i)&&e.encryptionScheme!==void 0)}function US(e,i){return!!(!e||e==i||(e=="cbcs"||e=="cbcs-1-9")&&(Yj||Wj||Kj))}function BS(){}function kR(){ER(),xR()}_e("EncryptionSchemePolyfills",BS),BS.install=kR;var Kj=navigator.userAgent.includes("CrKey"),Yj=100<=parseInt(navigator.userAgent.split("Firefox/").pop(),10),zS,DR=navigator.userAgent||"";if(DR.includes("Web0S")){var RR=DR.match(/Chrome\/(\d+)/);zS=RR?79<=parseInt(RR[1],10):!1}else zS=!1;var Wj=zS;typeof f<"u"&&f.exports&&(f.exports=BS)}).call(n,t,t,void 0);for(var r in n.shaka)u[r]=n.shaka[r]})()}(Ix)),Ix}var Iw=SV();const Aa=Lg(Iw);var xV=Ka('<div class=player-container><div class="player-label player-name-label">Shaka</div><div class="player-label player-status-label"></div><div class="player-label player-time-label"></div><video muted width=320 height=240>'),AV=Ka("<div>");const wV={};Iw.polyfill.installAll();function IV(u){let t,n=null;const[r,l]=Va(null);let d=null,f=null,p=null;const[m,y]=Va([]),b=async()=>{try{n=new Iw.Player,n&&(await n.attach(t),n.configure(wV),n.addEventListener("error",w=>{const T=w.detail;console.error("Shaka: Error code",T.code,"object",T),l(`error: ${T.code}`)}),n.addEventListener("statechanged",w=>{const{newstate:T,timeStamp:k}=w;if(p!=="playing"&&f!=null){const U=((k-f)/1e3).toFixed(2);y(Y=>[`${p} for ${U}s`,...Y])}f=k,p=T,l(U=>U!=null&&U.startsWith("error")?U:T)})),t.muted=!0,t.addEventListener("loadeddata",()=>{if(d!==null){const T=((performance.now()-d)/1e3).toFixed(2);y(k=>[` loaded in ${T}s`,...k])}})}catch(w){console.error("Shaka: Error initializing Shaka player:",w)}},_=async(w,T)=>{if(y([]),l("loading"),f=null,p=null,!!n){if(w==null){l(null),await n.unload();return}try{d=performance.now(),T&&n.configure({drm:{servers:{"com.widevine.alpha":T}}}),await n.attach(t),await n.load(w),t.play().catch(k=>console.error("Shaka: Error auto-playing video:",k))}catch(k){console.error("Shaka: Error code",k.code,"object",k),l(`error: ${k.code||"unknown"}`)}}},A=async()=>{try{await(n==null?void 0:n.destroy())}catch(w){console.error("Shaka: Error destroying Shaka player:",w)}};return Mf(()=>b()),zh(()=>_(u.playbackUrl,u.licenseUrl)),jh(()=>A()),(()=>{var w=xV(),T=w.firstChild,k=T.nextSibling,U=k.nextSibling,Y=U.nextSibling;T.style.setProperty("background","red"),ls(k,r),ls(U,xl(Od,{get each(){return m()},children:te=>(()=>{var Re=AV();return ls(Re,te),Re})()}));var se=t;return typeof se=="function"?jy(se,Y):t=Y,w})()}var Cx,yL;function LE(){if(yL)return Cx;yL=1;var u;return typeof window<"u"?u=window:typeof Py<"u"?u=Py:typeof self<"u"?u=self:u={},Cx=u,Cx}var CV=LE();const St=Lg(CV),kV={},DV=Object.freeze(Object.defineProperty({__proto__:null,default:kV},Symbol.toStringTag,{value:"Module"})),RV=_V(DV);var kx,vL;function DN(){if(vL)return kx;vL=1;var u=typeof Py<"u"?Py:typeof window<"u"?window:{},t=RV,n;return typeof document<"u"?n=document:(n=u["__GLOBAL_DOCUMENT_CACHE@4"],n||(n=u["__GLOBAL_DOCUMENT_CACHE@4"]=t)),kx=n,kx}var LV=DN();const li=Lg(LV);var wT={exports:{}},Dx={exports:{}},TL;function PV(){return TL||(TL=1,function(u){function t(){return u.exports=t=Object.assign?Object.assign.bind():function(n){for(var r=1;r<arguments.length;r++){var l=arguments[r];for(var d in l)({}).hasOwnProperty.call(l,d)&&(n[d]=l[d])}return n},u.exports.__esModule=!0,u.exports.default=u.exports,t.apply(null,arguments)}u.exports=t,u.exports.__esModule=!0,u.exports.default=u.exports}(Dx)),Dx.exports}var Rx,EL;function MV(){if(EL)return Rx;EL=1,Rx=t;var u=Object.prototype.toString;function t(n){if(!n)return!1;var r=u.call(n);return r==="[object Function]"||typeof n=="function"&&r!=="[object RegExp]"||typeof window<"u"&&(n===window.setTimeout||n===window.alert||n===window.confirm||n===window.prompt)}return Rx}var Lx,bL;function NV(){if(bL)return Lx;bL=1;function u(l,d){var f=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(f)return(f=f.call(l)).next.bind(f);if(Array.isArray(l)||(f=t(l))||d){f&&(l=f);var p=0;return function(){return p>=l.length?{done:!0}:{done:!1,value:l[p++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function t(l,d){if(l){if(typeof l=="string")return n(l,d);var f=Object.prototype.toString.call(l).slice(8,-1);if(f==="Object"&&l.constructor&&(f=l.constructor.name),f==="Map"||f==="Set")return Array.from(l);if(f==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f))return n(l,d)}}function n(l,d){(d==null||d>l.length)&&(d=l.length);for(var f=0,p=new Array(d);f<d;f++)p[f]=l[f];return p}var r=function(){function l(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1}var d=l.prototype;return d.getIsEnabled=function(){return this.enabled_},d.enable=function(){this.enabled_=!0},d.disable=function(){this.enabled_=!1},d.reset=function(){this.typeToInterceptorsMap_=new Map,this.enabled_=!1},d.addInterceptor=function(p,m){this.typeToInterceptorsMap_.has(p)||this.typeToInterceptorsMap_.set(p,new Set);var y=this.typeToInterceptorsMap_.get(p);return y.has(m)?!1:(y.add(m),!0)},d.removeInterceptor=function(p,m){var y=this.typeToInterceptorsMap_.get(p);return y&&y.has(m)?(y.delete(m),!0):!1},d.clearInterceptorsByType=function(p){var m=this.typeToInterceptorsMap_.get(p);return m?(this.typeToInterceptorsMap_.delete(p),this.typeToInterceptorsMap_.set(p,new Set),!0):!1},d.clear=function(){return this.typeToInterceptorsMap_.size?(this.typeToInterceptorsMap_=new Map,!0):!1},d.getForType=function(p){return this.typeToInterceptorsMap_.get(p)||new Set},d.execute=function(p,m){for(var y=this.getForType(p),b=u(y),_;!(_=b()).done;){var A=_.value;try{m=A(m)}catch{}}return m},l}();return Lx=r,Lx}var Px,_L;function OV(){if(_L)return Px;_L=1;var u=function(){function n(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1}var r=n.prototype;return r.getIsEnabled=function(){return this.enabled_},r.enable=function(){this.enabled_=!0},r.disable=function(){this.enabled_=!1},r.reset=function(){this.maxAttempts_=1,this.delayFactor_=.1,this.fuzzFactor_=.1,this.initialDelay_=1e3,this.enabled_=!1},r.getMaxAttempts=function(){return this.maxAttempts_},r.setMaxAttempts=function(d){this.maxAttempts_=d},r.getDelayFactor=function(){return this.delayFactor_},r.setDelayFactor=function(d){this.delayFactor_=d},r.getFuzzFactor=function(){return this.fuzzFactor_},r.setFuzzFactor=function(d){this.fuzzFactor_=d},r.getInitialDelay=function(){return this.initialDelay_},r.setInitialDelay=function(d){this.initialDelay_=d},r.createRetry=function(d){var f=d===void 0?{}:d,p=f.maxAttempts,m=f.delayFactor,y=f.fuzzFactor,b=f.initialDelay;return new t({maxAttempts:p||this.maxAttempts_,delayFactor:m||this.delayFactor_,fuzzFactor:y||this.fuzzFactor_,initialDelay:b||this.initialDelay_})},n}(),t=function(){function n(l){this.maxAttempts_=l.maxAttempts,this.delayFactor_=l.delayFactor,this.fuzzFactor_=l.fuzzFactor,this.currentDelay_=l.initialDelay,this.currentAttempt_=1}var r=n.prototype;return r.moveToNextAttempt=function(){this.currentAttempt_++;var d=this.currentDelay_*this.delayFactor_;this.currentDelay_=this.currentDelay_+d},r.shouldRetry=function(){return this.currentAttempt_<this.maxAttempts_},r.getCurrentDelay=function(){return this.currentDelay_},r.getCurrentMinPossibleDelay=function(){return(1-this.fuzzFactor_)*this.currentDelay_},r.getCurrentMaxPossibleDelay=function(){return(1+this.fuzzFactor_)*this.currentDelay_},r.getCurrentFuzzedDelay=function(){var d=this.getCurrentMinPossibleDelay(),f=this.getCurrentMaxPossibleDelay();return d+Math.random()*(f-d)},n}();return Px=u,Px}var Mx,SL;function FV(){if(SL)return Mx;SL=1;var u=LE(),t=function(l,d){return d===void 0&&(d=!1),function(f,p,m){if(f){l(f);return}if(p.statusCode>=400&&p.statusCode<=599){var y=m;if(d)if(u.TextDecoder){var b=n(p.headers&&p.headers["content-type"]);try{y=new TextDecoder(b).decode(m)}catch{}}else y=String.fromCharCode.apply(null,new Uint8Array(m));l({cause:y});return}l(null,m)}};function n(r){return r===void 0&&(r=""),r.toLowerCase().split(";").reduce(function(l,d){var f=d.split("="),p=f[0],m=f[1];return p.trim()==="charset"?m.trim():l},"utf-8")}return Mx=t,Mx}var xL;function UV(){if(xL)return wT.exports;xL=1;var u=LE(),t=PV(),n=MV(),r=NV(),l=OV();y.httpHandler=FV(),y.requestInterceptorsStorage=new r,y.responseInterceptorsStorage=new r,y.retryManager=new l;/**
 * @license
 * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
 * Copyright (c) 2014 David Bjrklund
 * Available under the MIT license
 * <https://github.com/kesla/parse-headers/blob/master/LICENCE>
 */var d=function(T){var k={};return T&&T.trim().split(`
`).forEach(function(U){var Y=U.indexOf(":"),se=U.slice(0,Y).trim().toLowerCase(),te=U.slice(Y+1).trim();typeof k[se]>"u"?k[se]=te:Array.isArray(k[se])?k[se].push(te):k[se]=[k[se],te]}),k};wT.exports=y,wT.exports.default=y,y.XMLHttpRequest=u.XMLHttpRequest||A,y.XDomainRequest="withCredentials"in new y.XMLHttpRequest?y.XMLHttpRequest:u.XDomainRequest,f(["get","put","post","patch","head","delete"],function(w){y[w==="delete"?"del":w]=function(T,k,U){return k=m(T,k,U),k.method=w.toUpperCase(),b(k)}});function f(w,T){for(var k=0;k<w.length;k++)T(w[k])}function p(w){for(var T in w)if(w.hasOwnProperty(T))return!1;return!0}function m(w,T,k){var U=w;return n(T)?(k=T,typeof w=="string"&&(U={uri:w})):U=t({},T,{uri:w}),U.callback=k,U}function y(w,T,k){return T=m(w,T,k),b(T)}function b(w){if(typeof w.callback>"u")throw new Error("callback argument missing");if(w.requestType&&y.requestInterceptorsStorage.getIsEnabled()){var T={uri:w.uri||w.url,headers:w.headers||{},body:w.body,metadata:w.metadata||{},retry:w.retry,timeout:w.timeout},k=y.requestInterceptorsStorage.execute(w.requestType,T);w.uri=k.uri,w.headers=k.headers,w.body=k.body,w.metadata=k.metadata,w.retry=k.retry,w.timeout=k.timeout}var U=!1,Y=function(Dt,dt,Et){U||(U=!0,w.callback(Dt,dt,Et))};function se(){j.readyState===4&&!y.responseInterceptorsStorage.getIsEnabled()&&setTimeout(Be,0)}function te(){var ut=void 0;if(j.response?ut=j.response:ut=j.responseText||_(j),lt)try{ut=JSON.parse(ut)}catch{}return ut}function Re(ut){if(clearTimeout(et),clearTimeout(w.retryTimeout),ut instanceof Error||(ut=new Error(""+(ut||"Unknown XMLHttpRequest Error"))),ut.statusCode=0,!Z&&y.retryManager.getIsEnabled()&&w.retry&&w.retry.shouldRetry()){w.retryTimeout=setTimeout(function(){w.retry.moveToNextAttempt(),w.xhr=j,b(w)},w.retry.getCurrentFuzzedDelay());return}if(w.requestType&&y.responseInterceptorsStorage.getIsEnabled()){var Dt={headers:Xe.headers||{},body:Xe.body,responseUrl:j.responseURL,responseType:j.responseType},dt=y.responseInterceptorsStorage.execute(w.requestType,Dt);Xe.body=dt.body,Xe.headers=dt.headers}return Y(ut,Xe)}function Be(){if(!Z){var ut;clearTimeout(et),clearTimeout(w.retryTimeout),w.useXDR&&j.status===void 0?ut=200:ut=j.status===1223?204:j.status;var Dt=Xe,dt=null;if(ut!==0?(Dt={body:te(),statusCode:ut,method:x,headers:{},url:K,rawRequest:j},j.getAllResponseHeaders&&(Dt.headers=d(j.getAllResponseHeaders()))):dt=new Error("Internal XMLHttpRequest Error"),w.requestType&&y.responseInterceptorsStorage.getIsEnabled()){var Et={headers:Dt.headers||{},body:Dt.body,responseUrl:j.responseURL,responseType:j.responseType},Rt=y.responseInterceptorsStorage.execute(w.requestType,Et);Dt.body=Rt.body,Dt.headers=Rt.headers}return Y(dt,Dt,Dt.body)}}var j=w.xhr||null;j||(w.cors||w.useXDR?j=new y.XDomainRequest:j=new y.XMLHttpRequest);var M,Z,K=j.url=w.uri||w.url,x=j.method=w.method||"GET",ue=w.body||w.data,$e=j.headers=w.headers||{},xe=!!w.sync,lt=!1,et,Xe={body:void 0,headers:{},statusCode:0,method:x,url:K,rawRequest:j};if("json"in w&&w.json!==!1&&(lt=!0,$e.accept||$e.Accept||($e.Accept="application/json"),x!=="GET"&&x!=="HEAD"&&($e["content-type"]||$e["Content-Type"]||($e["Content-Type"]="application/json"),ue=JSON.stringify(w.json===!0?ue:w.json))),j.onreadystatechange=se,j.onload=Be,j.onerror=Re,j.onprogress=function(){},j.onabort=function(){Z=!0,clearTimeout(w.retryTimeout)},j.ontimeout=Re,j.open(x,K,!xe,w.username,w.password),xe||(j.withCredentials=!!w.withCredentials),!xe&&w.timeout>0&&(et=setTimeout(function(){if(!Z){Z=!0,j.abort("timeout");var ut=new Error("XMLHttpRequest timeout");ut.code="ETIMEDOUT",Re(ut)}},w.timeout)),j.setRequestHeader)for(M in $e)$e.hasOwnProperty(M)&&j.setRequestHeader(M,$e[M]);else if(w.headers&&!p(w.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in w&&(j.responseType=w.responseType),"beforeSend"in w&&typeof w.beforeSend=="function"&&w.beforeSend(j),j.send(ue||null),j}function _(w){try{if(w.responseType==="document")return w.responseXML;var T=w.responseXML&&w.responseXML.documentElement.nodeName==="parsererror";if(w.responseType===""&&!T)return w.responseXML}catch{}return null}function A(){}return wT.exports}var BV=UV();const RN=Lg(BV);var Nx={exports:{}},Ox,AL;function zV(){if(AL)return Ox;AL=1;var u=DN(),t=Object.create||function(){function K(){}return function(x){if(arguments.length!==1)throw new Error("Object.create shim only accepts one parameter.");return K.prototype=x,new K}}();function n(K,x){this.name="ParsingError",this.code=K.code,this.message=x||K.message}n.prototype=t(Error.prototype),n.prototype.constructor=n,n.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};function r(K){function x($e,xe,lt,et){return($e|0)*3600+(xe|0)*60+(lt|0)+(et|0)/1e3}var ue=K.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return ue?ue[3]?x(ue[1],ue[2],ue[3].replace(":",""),ue[4]):ue[1]>59?x(ue[1],ue[2],0,ue[4]):x(0,ue[1],ue[2],ue[4]):null}function l(){this.values=t(null)}l.prototype={set:function(K,x){!this.get(K)&&x!==""&&(this.values[K]=x)},get:function(K,x,ue){return ue?this.has(K)?this.values[K]:x[ue]:this.has(K)?this.values[K]:x},has:function(K){return K in this.values},alt:function(K,x,ue){for(var $e=0;$e<ue.length;++$e)if(x===ue[$e]){this.set(K,x);break}},integer:function(K,x){/^-?\d+$/.test(x)&&this.set(K,parseInt(x,10))},percent:function(K,x){return x.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(x=parseFloat(x),x>=0&&x<=100)?(this.set(K,x),!0):!1}};function d(K,x,ue,$e){var xe=$e?K.split($e):[K];for(var lt in xe)if(typeof xe[lt]=="string"){var et=xe[lt].split(ue);if(et.length===2){var Xe=et[0].trim(),ut=et[1].trim();x(Xe,ut)}}}function f(K,x,ue){var $e=K;function xe(){var Xe=r(K);if(Xe===null)throw new n(n.Errors.BadTimeStamp,"Malformed timestamp: "+$e);return K=K.replace(/^[^\sa-zA-Z-]+/,""),Xe}function lt(Xe,ut){var Dt=new l;d(Xe,function(dt,Et){switch(dt){case"region":for(var Rt=ue.length-1;Rt>=0;Rt--)if(ue[Rt].id===Et){Dt.set(dt,ue[Rt].region);break}break;case"vertical":Dt.alt(dt,Et,["rl","lr"]);break;case"line":var mn=Et.split(","),Tn=mn[0];Dt.integer(dt,Tn),Dt.percent(dt,Tn)&&Dt.set("snapToLines",!1),Dt.alt(dt,Tn,["auto"]),mn.length===2&&Dt.alt("lineAlign",mn[1],["start","center","end"]);break;case"position":mn=Et.split(","),Dt.percent(dt,mn[0]),mn.length===2&&Dt.alt("positionAlign",mn[1],["start","center","end"]);break;case"size":Dt.percent(dt,Et);break;case"align":Dt.alt(dt,Et,["start","center","end","left","right"]);break}},/:/,/\s/),ut.region=Dt.get("region",null),ut.vertical=Dt.get("vertical","");try{ut.line=Dt.get("line","auto")}catch{}ut.lineAlign=Dt.get("lineAlign","start"),ut.snapToLines=Dt.get("snapToLines",!0),ut.size=Dt.get("size",100);try{ut.align=Dt.get("align","center")}catch{ut.align=Dt.get("align","middle")}try{ut.position=Dt.get("position","auto")}catch{ut.position=Dt.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},ut.align)}ut.positionAlign=Dt.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},ut.align)}function et(){K=K.replace(/^\s+/,"")}if(et(),x.startTime=xe(),et(),K.substr(0,3)!=="-->")throw new n(n.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+$e);K=K.substr(3),et(),x.endTime=xe(),et(),lt(K,x)}var p=u.createElement&&u.createElement("textarea"),m={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},y={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},b={v:"title",lang:"lang"},_={rt:"ruby"};function A(K,x){function ue(){if(!x)return null;function Tn(Ze){return x=x.substr(Ze.length),Ze}var Qe=x.match(/^([^<]*)(<[^>]*>?)?/);return Tn(Qe[1]?Qe[1]:Qe[2])}function $e(Tn){return p.innerHTML=Tn,Tn=p.textContent,p.textContent="",Tn}function xe(Tn,Qe){return!_[Qe.localName]||_[Qe.localName]===Tn.localName}function lt(Tn,Qe){var Ze=m[Tn];if(!Ze)return null;var at=K.document.createElement(Ze),nn=b[Tn];return nn&&Qe&&(at[nn]=Qe.trim()),at}for(var et=K.document.createElement("div"),Xe=et,ut,Dt=[];(ut=ue())!==null;){if(ut[0]==="<"){if(ut[1]==="/"){Dt.length&&Dt[Dt.length-1]===ut.substr(2).replace(">","")&&(Dt.pop(),Xe=Xe.parentNode);continue}var dt=r(ut.substr(1,ut.length-2)),Et;if(dt){Et=K.document.createProcessingInstruction("timestamp",dt),Xe.appendChild(Et);continue}var Rt=ut.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!Rt||(Et=lt(Rt[1],Rt[3]),!Et)||!xe(Xe,Et))continue;if(Rt[2]){var mn=Rt[2].split(".");mn.forEach(function(Tn){var Qe=/^bg_/.test(Tn),Ze=Qe?Tn.slice(3):Tn;if(y.hasOwnProperty(Ze)){var at=Qe?"background-color":"color",nn=y[Ze];Et.style[at]=nn}}),Et.className=mn.join(" ")}Dt.push(Rt[1]),Xe.appendChild(Et),Xe=Et;continue}Xe.appendChild(K.document.createTextNode($e(ut)))}return et}var w=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function T(K){for(var x=0;x<w.length;x++){var ue=w[x];if(K>=ue[0]&&K<=ue[1])return!0}return!1}function k(K){var x=[],ue="",$e;if(!K||!K.childNodes)return"ltr";function xe(Xe,ut){for(var Dt=ut.childNodes.length-1;Dt>=0;Dt--)Xe.push(ut.childNodes[Dt])}function lt(Xe){if(!Xe||!Xe.length)return null;var ut=Xe.pop(),Dt=ut.textContent||ut.innerText;if(Dt){var dt=Dt.match(/^.*(\n|\r)/);return dt?(Xe.length=0,dt[0]):Dt}if(ut.tagName==="ruby")return lt(Xe);if(ut.childNodes)return xe(Xe,ut),lt(Xe)}for(xe(x,K);ue=lt(x);)for(var et=0;et<ue.length;et++)if($e=ue.charCodeAt(et),T($e))return"rtl";return"ltr"}function U(K){if(typeof K.line=="number"&&(K.snapToLines||K.line>=0&&K.line<=100))return K.line;if(!K.track||!K.track.textTrackList||!K.track.textTrackList.mediaElement)return-1;for(var x=K.track,ue=x.textTrackList,$e=0,xe=0;xe<ue.length&&ue[xe]!==x;xe++)ue[xe].mode==="showing"&&$e++;return++$e*-1}function Y(){}Y.prototype.applyStyles=function(K,x){x=x||this.div;for(var ue in K)K.hasOwnProperty(ue)&&(x.style[ue]=K[ue])},Y.prototype.formatStyle=function(K,x){return K===0?0:K+x};function se(K,x,ue){Y.call(this),this.cue=x,this.cueDiv=A(K,x.text);var $e={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:x.vertical===""?"horizontal-tb":x.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles($e,this.cueDiv),this.div=K.document.createElement("div"),$e={direction:k(this.cueDiv),writingMode:x.vertical===""?"horizontal-tb":x.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:x.align==="middle"?"center":x.align,font:ue.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles($e),this.div.appendChild(this.cueDiv);var xe=0;switch(x.positionAlign){case"start":case"line-left":xe=x.position;break;case"center":xe=x.position-x.size/2;break;case"end":case"line-right":xe=x.position-x.size;break}x.vertical===""?this.applyStyles({left:this.formatStyle(xe,"%"),width:this.formatStyle(x.size,"%")}):this.applyStyles({top:this.formatStyle(xe,"%"),height:this.formatStyle(x.size,"%")}),this.move=function(lt){this.applyStyles({top:this.formatStyle(lt.top,"px"),bottom:this.formatStyle(lt.bottom,"px"),left:this.formatStyle(lt.left,"px"),right:this.formatStyle(lt.right,"px"),height:this.formatStyle(lt.height,"px"),width:this.formatStyle(lt.width,"px")})}}se.prototype=t(Y.prototype),se.prototype.constructor=se;function te(K){var x,ue,$e,xe;if(K.div){ue=K.div.offsetHeight,$e=K.div.offsetWidth,xe=K.div.offsetTop;var lt=(lt=K.div.childNodes)&&(lt=lt[0])&&lt.getClientRects&&lt.getClientRects();K=K.div.getBoundingClientRect(),x=lt?Math.max(lt[0]&&lt[0].height||0,K.height/lt.length):0}this.left=K.left,this.right=K.right,this.top=K.top||xe,this.height=K.height||ue,this.bottom=K.bottom||xe+(K.height||ue),this.width=K.width||$e,this.lineHeight=x!==void 0?x:K.lineHeight}te.prototype.move=function(K,x){switch(x=x!==void 0?x:this.lineHeight,K){case"+x":this.left+=x,this.right+=x;break;case"-x":this.left-=x,this.right-=x;break;case"+y":this.top+=x,this.bottom+=x;break;case"-y":this.top-=x,this.bottom-=x;break}},te.prototype.overlaps=function(K){return this.left<K.right&&this.right>K.left&&this.top<K.bottom&&this.bottom>K.top},te.prototype.overlapsAny=function(K){for(var x=0;x<K.length;x++)if(this.overlaps(K[x]))return!0;return!1},te.prototype.within=function(K){return this.top>=K.top&&this.bottom<=K.bottom&&this.left>=K.left&&this.right<=K.right},te.prototype.overlapsOppositeAxis=function(K,x){switch(x){case"+x":return this.left<K.left;case"-x":return this.right>K.right;case"+y":return this.top<K.top;case"-y":return this.bottom>K.bottom}},te.prototype.intersectPercentage=function(K){var x=Math.max(0,Math.min(this.right,K.right)-Math.max(this.left,K.left)),ue=Math.max(0,Math.min(this.bottom,K.bottom)-Math.max(this.top,K.top)),$e=x*ue;return $e/(this.height*this.width)},te.prototype.toCSSCompatValues=function(K){return{top:this.top-K.top,bottom:K.bottom-this.bottom,left:this.left-K.left,right:K.right-this.right,height:this.height,width:this.width}},te.getSimpleBoxPosition=function(K){var x=K.div?K.div.offsetHeight:K.tagName?K.offsetHeight:0,ue=K.div?K.div.offsetWidth:K.tagName?K.offsetWidth:0,$e=K.div?K.div.offsetTop:K.tagName?K.offsetTop:0;K=K.div?K.div.getBoundingClientRect():K.tagName?K.getBoundingClientRect():K;var xe={left:K.left,right:K.right,top:K.top||$e,height:K.height||x,bottom:K.bottom||$e+(K.height||x),width:K.width||ue};return xe};function Re(K,x,ue,$e){function xe(Ze,at){for(var nn,ce=new te(Ze),ge=1,G=0;G<at.length;G++){for(;Ze.overlapsOppositeAxis(ue,at[G])||Ze.within(ue)&&Ze.overlapsAny($e);)Ze.move(at[G]);if(Ze.within(ue))return Ze;var ae=Ze.intersectPercentage(ue);ge>ae&&(nn=new te(Ze),ge=ae),Ze=new te(ce)}return nn||ce}var lt=new te(x),et=x.cue,Xe=U(et),ut=[];if(et.snapToLines){var Dt;switch(et.vertical){case"":ut=["+y","-y"],Dt="height";break;case"rl":ut=["+x","-x"],Dt="width";break;case"lr":ut=["-x","+x"],Dt="width";break}var dt=lt.lineHeight,Et=dt*Math.round(Xe),Rt=ue[Dt]+dt,mn=ut[0];Math.abs(Et)>Rt&&(Et=Et<0?-1:1,Et*=Math.ceil(Rt/dt)*dt),Xe<0&&(Et+=et.vertical===""?ue.height:ue.width,ut=ut.reverse()),lt.move(mn,Et)}else{var Tn=lt.lineHeight/ue.height*100;switch(et.lineAlign){case"center":Xe-=Tn/2;break;case"end":Xe-=Tn;break}switch(et.vertical){case"":x.applyStyles({top:x.formatStyle(Xe,"%")});break;case"rl":x.applyStyles({left:x.formatStyle(Xe,"%")});break;case"lr":x.applyStyles({right:x.formatStyle(Xe,"%")});break}ut=["+y","-x","+x","-y"],lt=new te(x)}var Qe=xe(lt,ut);x.move(Qe.toCSSCompatValues(ue))}function Be(){}Be.StringDecoder=function(){return{decode:function(K){if(!K)return"";if(typeof K!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(K))}}},Be.convertCueToDOMTree=function(K,x){return!K||!x?null:A(K,x)};var j=.05,M="sans-serif",Z="1.5%";return Be.processCues=function(K,x,ue){if(!K||!x||!ue)return null;for(;ue.firstChild;)ue.removeChild(ue.firstChild);var $e=K.document.createElement("div");$e.style.position="absolute",$e.style.left="0",$e.style.right="0",$e.style.top="0",$e.style.bottom="0",$e.style.margin=Z,ue.appendChild($e);function xe(dt){for(var Et=0;Et<dt.length;Et++)if(dt[Et].hasBeenReset||!dt[Et].displayState)return!0;return!1}if(!xe(x)){for(var lt=0;lt<x.length;lt++)$e.appendChild(x[lt].displayState);return}var et=[],Xe=te.getSimpleBoxPosition($e),ut=Math.round(Xe.height*j*100)/100,Dt={font:ut+"px "+M};(function(){for(var dt,Et,Rt=0;Rt<x.length;Rt++)Et=x[Rt],dt=new se(K,Et,Dt),$e.appendChild(dt.div),Re(K,dt,Xe,et),Et.displayState=dt.div,et.push(te.getSimpleBoxPosition(dt))})()},Be.Parser=function(K,x,ue){ue||(ue=x,x={}),x||(x={}),this.window=K,this.vttjs=x,this.state="INITIAL",this.buffer="",this.decoder=ue||new TextDecoder("utf8"),this.regionList=[]},Be.Parser.prototype={reportOrThrowError:function(K){if(K instanceof n)this.onparsingerror&&this.onparsingerror(K);else throw K},parse:function(K){var x=this;K&&(x.buffer+=x.decoder.decode(K,{stream:!0}));function ue(){for(var dt=x.buffer,Et=0;Et<dt.length&&dt[Et]!=="\r"&&dt[Et]!==`
`;)++Et;var Rt=dt.substr(0,Et);return dt[Et]==="\r"&&++Et,dt[Et]===`
`&&++Et,x.buffer=dt.substr(Et),Rt}function $e(dt){var Et=new l;if(d(dt,function(mn,Tn){switch(mn){case"id":Et.set(mn,Tn);break;case"width":Et.percent(mn,Tn);break;case"lines":Et.integer(mn,Tn);break;case"regionanchor":case"viewportanchor":var Qe=Tn.split(",");if(Qe.length!==2)break;var Ze=new l;if(Ze.percent("x",Qe[0]),Ze.percent("y",Qe[1]),!Ze.has("x")||!Ze.has("y"))break;Et.set(mn+"X",Ze.get("x")),Et.set(mn+"Y",Ze.get("y"));break;case"scroll":Et.alt(mn,Tn,["up"]);break}},/=/,/\s/),Et.has("id")){var Rt=new(x.vttjs.VTTRegion||x.window.VTTRegion);Rt.width=Et.get("width",100),Rt.lines=Et.get("lines",3),Rt.regionAnchorX=Et.get("regionanchorX",0),Rt.regionAnchorY=Et.get("regionanchorY",100),Rt.viewportAnchorX=Et.get("viewportanchorX",0),Rt.viewportAnchorY=Et.get("viewportanchorY",100),Rt.scroll=Et.get("scroll",""),x.onregion&&x.onregion(Rt),x.regionList.push({id:Et.get("id"),region:Rt})}}function xe(dt){var Et=new l;d(dt,function(Rt,mn){switch(Rt){case"MPEGT":Et.integer(Rt+"S",mn);break;case"LOCA":Et.set(Rt+"L",r(mn));break}},/[^\d]:/,/,/),x.ontimestampmap&&x.ontimestampmap({MPEGTS:Et.get("MPEGTS"),LOCAL:Et.get("LOCAL")})}function lt(dt){dt.match(/X-TIMESTAMP-MAP/)?d(dt,function(Et,Rt){switch(Et){case"X-TIMESTAMP-MAP":xe(Rt);break}},/=/):d(dt,function(Et,Rt){switch(Et){case"Region":$e(Rt);break}},/:/)}try{var et;if(x.state==="INITIAL"){if(!/\r\n|\n/.test(x.buffer))return this;et=ue();var Xe=et.match(/^WEBVTT([ \t].*)?$/);if(!Xe||!Xe[0])throw new n(n.Errors.BadSignature);x.state="HEADER"}for(var ut=!1;x.buffer;){if(!/\r\n|\n/.test(x.buffer))return this;switch(ut?ut=!1:et=ue(),x.state){case"HEADER":/:/.test(et)?lt(et):et||(x.state="ID");continue;case"NOTE":et||(x.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(et)){x.state="NOTE";break}if(!et)continue;x.cue=new(x.vttjs.VTTCue||x.window.VTTCue)(0,0,"");try{x.cue.align="center"}catch{x.cue.align="middle"}if(x.state="CUE",et.indexOf("-->")===-1){x.cue.id=et;continue}case"CUE":try{f(et,x.cue,x.regionList)}catch(dt){x.reportOrThrowError(dt),x.cue=null,x.state="BADCUE";continue}x.state="CUETEXT";continue;case"CUETEXT":var Dt=et.indexOf("-->")!==-1;if(!et||Dt&&(ut=!0)){x.oncue&&x.oncue(x.cue),x.cue=null,x.state="ID";continue}x.cue.text&&(x.cue.text+=`
`),x.cue.text+=et.replace(/\u2028/g,`
`).replace(/u2029/g,`
`);continue;case"BADCUE":et||(x.state="ID");continue}}}catch(dt){x.reportOrThrowError(dt),x.state==="CUETEXT"&&x.cue&&x.oncue&&x.oncue(x.cue),x.cue=null,x.state=x.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var K=this;try{if(K.buffer+=K.decoder.decode(),(K.cue||K.state==="HEADER")&&(K.buffer+=`

`,K.parse()),K.state==="INITIAL")throw new n(n.Errors.BadSignature)}catch(x){K.reportOrThrowError(x)}return K.onflush&&K.onflush(),this}},Ox=Be,Ox}var Fx,wL;function jV(){if(wL)return Fx;wL=1;var u="auto",t={"":1,lr:1,rl:1},n={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function r(f){if(typeof f!="string")return!1;var p=t[f.toLowerCase()];return p?f.toLowerCase():!1}function l(f){if(typeof f!="string")return!1;var p=n[f.toLowerCase()];return p?f.toLowerCase():!1}function d(f,p,m){this.hasBeenReset=!1;var y="",b=!1,_=f,A=p,w=m,T=null,k="",U=!0,Y="auto",se="start",te="auto",Re="auto",Be=100,j="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return y},set:function(M){y=""+M}},pauseOnExit:{enumerable:!0,get:function(){return b},set:function(M){b=!!M}},startTime:{enumerable:!0,get:function(){return _},set:function(M){if(typeof M!="number")throw new TypeError("Start time must be set to a number.");_=M,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return A},set:function(M){if(typeof M!="number")throw new TypeError("End time must be set to a number.");A=M,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return w},set:function(M){w=""+M,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return T},set:function(M){T=M,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return k},set:function(M){var Z=r(M);if(Z===!1)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");k=Z,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return U},set:function(M){U=!!M,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return Y},set:function(M){if(typeof M!="number"&&M!==u)throw new SyntaxError("Line: an invalid number or illegal string was specified.");Y=M,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return se},set:function(M){var Z=l(M);Z?(se=Z,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return te},set:function(M){if(M<0||M>100)throw new Error("Position must be between 0 and 100.");te=M,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return Re},set:function(M){var Z=l(M);Z?(Re=Z,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return Be},set:function(M){if(M<0||M>100)throw new Error("Size must be between 0 and 100.");Be=M,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return j},set:function(M){var Z=l(M);if(!Z)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");j=Z,this.hasBeenReset=!0}}}),this.displayState=void 0}return d.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},Fx=d,Fx}var Ux,IL;function qV(){if(IL)return Ux;IL=1;var u={"":!0,up:!0};function t(l){if(typeof l!="string")return!1;var d=u[l.toLowerCase()];return d?l.toLowerCase():!1}function n(l){return typeof l=="number"&&l>=0&&l<=100}function r(){var l=100,d=3,f=0,p=100,m=0,y=100,b="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return l},set:function(_){if(!n(_))throw new Error("Width must be between 0 and 100.");l=_}},lines:{enumerable:!0,get:function(){return d},set:function(_){if(typeof _!="number")throw new TypeError("Lines must be set to a number.");d=_}},regionAnchorY:{enumerable:!0,get:function(){return p},set:function(_){if(!n(_))throw new Error("RegionAnchorX must be between 0 and 100.");p=_}},regionAnchorX:{enumerable:!0,get:function(){return f},set:function(_){if(!n(_))throw new Error("RegionAnchorY must be between 0 and 100.");f=_}},viewportAnchorY:{enumerable:!0,get:function(){return y},set:function(_){if(!n(_))throw new Error("ViewportAnchorY must be between 0 and 100.");y=_}},viewportAnchorX:{enumerable:!0,get:function(){return m},set:function(_){if(!n(_))throw new Error("ViewportAnchorX must be between 0 and 100.");m=_}},scroll:{enumerable:!0,get:function(){return b},set:function(_){var A=t(_);A===!1?console.warn("Scroll: an invalid or illegal string was specified."):b=A}}})}return Ux=r,Ux}var CL;function HV(){if(CL)return Nx.exports;CL=1;var u=LE(),t=Nx.exports={WebVTT:zV(),VTTCue:jV(),VTTRegion:qV()};u.vttjs=t,u.WebVTT=t.WebVTT;var n=t.VTTCue,r=t.VTTRegion,l=u.VTTCue,d=u.VTTRegion;return t.shim=function(){u.VTTCue=n,u.VTTRegion=r},t.restore=function(){u.VTTCue=l,u.VTTRegion=d},u.VTTCue||t.shim(),Nx.exports}var GV=HV();const kL=Lg(GV);function Us(){return Us=Object.assign?Object.assign.bind():function(u){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(u[r]=n[r])}return u},Us.apply(null,arguments)}var DL="https://example.com",PE=function(t,n){if(/^[a-z]+:/i.test(n))return n;/^data:/.test(t)&&(t=St.location&&St.location.href||"");var r=/^\/\//.test(t),l=!St.location&&!/\/\//i.test(t);t=new St.URL(t,St.location||DL);var d=new URL(n,t);return l?d.href.slice(DL.length):r?d.href.slice(d.protocol.length):d.href},Cw=function(){function u(){this.listeners={}}var t=u.prototype;return t.on=function(r,l){this.listeners[r]||(this.listeners[r]=[]),this.listeners[r].push(l)},t.off=function(r,l){if(!this.listeners[r])return!1;var d=this.listeners[r].indexOf(l);return this.listeners[r]=this.listeners[r].slice(0),this.listeners[r].splice(d,1),d>-1},t.trigger=function(r){var l=this.listeners[r];if(l)if(arguments.length===2)for(var d=l.length,f=0;f<d;++f)l[f].call(this,arguments[1]);else for(var p=Array.prototype.slice.call(arguments,1),m=l.length,y=0;y<m;++y)l[y].apply(this,p)},t.dispose=function(){this.listeners={}},t.pipe=function(r){this.on("data",function(l){r.push(l)})},u}(),VV=function(t){return St.atob?St.atob(t):Buffer.from(t,"base64").toString("binary")};function LN(u){for(var t=VV(u),n=new Uint8Array(t.length),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}/*! @name m3u8-parser @version 7.2.0 @license Apache-2.0 */class $V extends Cw{constructor(){super(),this.buffer=""}push(t){let n;for(this.buffer+=t,n=this.buffer.indexOf(`
`);n>-1;n=this.buffer.indexOf(`
`))this.trigger("data",this.buffer.substring(0,n)),this.buffer=this.buffer.substring(n+1)}}const KV="	",Bx=function(u){const t=/([0-9.]*)?@?([0-9.]*)?/.exec(u||""),n={};return t[1]&&(n.length=parseInt(t[1],10)),t[2]&&(n.offset=parseInt(t[2],10)),n},YV=function(){const n="(?:"+"[^=]*"+")=(?:"+'"[^"]*"|[^,]*'+")";return new RegExp("(?:^|,)("+n+")")},Xo=function(u){const t={};if(!u)return t;const n=u.split(YV());let r=n.length,l;for(;r--;)n[r]!==""&&(l=/([^=]*)=(.*)/.exec(n[r]).slice(1),l[0]=l[0].replace(/^\s+|\s+$/g,""),l[1]=l[1].replace(/^\s+|\s+$/g,""),l[1]=l[1].replace(/^['"](.*)['"]$/g,"$1"),t[l[0]]=l[1]);return t},RL=u=>{const t=u.split("x"),n={};return t[0]&&(n.width=parseInt(t[0],10)),t[1]&&(n.height=parseInt(t[1],10)),n};class WV extends Cw{constructor(){super(),this.customParsers=[],this.tagMappers=[]}push(t){let n,r;if(t=t.trim(),t.length===0)return;if(t[0]!=="#"){this.trigger("data",{type:"uri",uri:t});return}this.tagMappers.reduce((d,f)=>{const p=f(t);return p===t?d:d.concat([p])},[t]).forEach(d=>{for(let f=0;f<this.customParsers.length;f++)if(this.customParsers[f].call(this,d))return;if(d.indexOf("#EXT")!==0){this.trigger("data",{type:"comment",text:d.slice(1)});return}if(d=d.replace("\r",""),n=/^#EXTM3U/.exec(d),n){this.trigger("data",{type:"tag",tagType:"m3u"});return}if(n=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(d),n){r={type:"tag",tagType:"inf"},n[1]&&(r.duration=parseFloat(n[1])),n[2]&&(r.title=n[2]),this.trigger("data",r);return}if(n=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(d),n){r={type:"tag",tagType:"targetduration"},n[1]&&(r.duration=parseInt(n[1],10)),this.trigger("data",r);return}if(n=/^#EXT-X-VERSION:([0-9.]*)?/.exec(d),n){r={type:"tag",tagType:"version"},n[1]&&(r.version=parseInt(n[1],10)),this.trigger("data",r);return}if(n=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(d),n){r={type:"tag",tagType:"media-sequence"},n[1]&&(r.number=parseInt(n[1],10)),this.trigger("data",r);return}if(n=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(d),n){r={type:"tag",tagType:"discontinuity-sequence"},n[1]&&(r.number=parseInt(n[1],10)),this.trigger("data",r);return}if(n=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(d),n){r={type:"tag",tagType:"playlist-type"},n[1]&&(r.playlistType=n[1]),this.trigger("data",r);return}if(n=/^#EXT-X-BYTERANGE:(.*)?$/.exec(d),n){r=Us(Bx(n[1]),{type:"tag",tagType:"byterange"}),this.trigger("data",r);return}if(n=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(d),n){r={type:"tag",tagType:"allow-cache"},n[1]&&(r.allowed=!/NO/.test(n[1])),this.trigger("data",r);return}if(n=/^#EXT-X-MAP:(.*)$/.exec(d),n){if(r={type:"tag",tagType:"map"},n[1]){const f=Xo(n[1]);f.URI&&(r.uri=f.URI),f.BYTERANGE&&(r.byterange=Bx(f.BYTERANGE))}this.trigger("data",r);return}if(n=/^#EXT-X-STREAM-INF:(.*)$/.exec(d),n){r={type:"tag",tagType:"stream-inf"},n[1]&&(r.attributes=Xo(n[1]),r.attributes.RESOLUTION&&(r.attributes.RESOLUTION=RL(r.attributes.RESOLUTION)),r.attributes.BANDWIDTH&&(r.attributes.BANDWIDTH=parseInt(r.attributes.BANDWIDTH,10)),r.attributes["FRAME-RATE"]&&(r.attributes["FRAME-RATE"]=parseFloat(r.attributes["FRAME-RATE"])),r.attributes["PROGRAM-ID"]&&(r.attributes["PROGRAM-ID"]=parseInt(r.attributes["PROGRAM-ID"],10))),this.trigger("data",r);return}if(n=/^#EXT-X-MEDIA:(.*)$/.exec(d),n){r={type:"tag",tagType:"media"},n[1]&&(r.attributes=Xo(n[1])),this.trigger("data",r);return}if(n=/^#EXT-X-ENDLIST/.exec(d),n){this.trigger("data",{type:"tag",tagType:"endlist"});return}if(n=/^#EXT-X-DISCONTINUITY/.exec(d),n){this.trigger("data",{type:"tag",tagType:"discontinuity"});return}if(n=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(d),n){r={type:"tag",tagType:"program-date-time"},n[1]&&(r.dateTimeString=n[1],r.dateTimeObject=new Date(n[1])),this.trigger("data",r);return}if(n=/^#EXT-X-KEY:(.*)$/.exec(d),n){r={type:"tag",tagType:"key"},n[1]&&(r.attributes=Xo(n[1]),r.attributes.IV&&(r.attributes.IV.substring(0,2).toLowerCase()==="0x"&&(r.attributes.IV=r.attributes.IV.substring(2)),r.attributes.IV=r.attributes.IV.match(/.{8}/g),r.attributes.IV[0]=parseInt(r.attributes.IV[0],16),r.attributes.IV[1]=parseInt(r.attributes.IV[1],16),r.attributes.IV[2]=parseInt(r.attributes.IV[2],16),r.attributes.IV[3]=parseInt(r.attributes.IV[3],16),r.attributes.IV=new Uint32Array(r.attributes.IV))),this.trigger("data",r);return}if(n=/^#EXT-X-START:(.*)$/.exec(d),n){r={type:"tag",tagType:"start"},n[1]&&(r.attributes=Xo(n[1]),r.attributes["TIME-OFFSET"]=parseFloat(r.attributes["TIME-OFFSET"]),r.attributes.PRECISE=/YES/.test(r.attributes.PRECISE)),this.trigger("data",r);return}if(n=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(d),n){r={type:"tag",tagType:"cue-out-cont"},n[1]?r.data=n[1]:r.data="",this.trigger("data",r);return}if(n=/^#EXT-X-CUE-OUT:(.*)?$/.exec(d),n){r={type:"tag",tagType:"cue-out"},n[1]?r.data=n[1]:r.data="",this.trigger("data",r);return}if(n=/^#EXT-X-CUE-IN:?(.*)?$/.exec(d),n){r={type:"tag",tagType:"cue-in"},n[1]?r.data=n[1]:r.data="",this.trigger("data",r);return}if(n=/^#EXT-X-SKIP:(.*)$/.exec(d),n&&n[1]){r={type:"tag",tagType:"skip"},r.attributes=Xo(n[1]),r.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(r.attributes["SKIPPED-SEGMENTS"]=parseInt(r.attributes["SKIPPED-SEGMENTS"],10)),r.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(r.attributes["RECENTLY-REMOVED-DATERANGES"]=r.attributes["RECENTLY-REMOVED-DATERANGES"].split(KV)),this.trigger("data",r);return}if(n=/^#EXT-X-PART:(.*)$/.exec(d),n&&n[1]){r={type:"tag",tagType:"part"},r.attributes=Xo(n[1]),["DURATION"].forEach(function(f){r.attributes.hasOwnProperty(f)&&(r.attributes[f]=parseFloat(r.attributes[f]))}),["INDEPENDENT","GAP"].forEach(function(f){r.attributes.hasOwnProperty(f)&&(r.attributes[f]=/YES/.test(r.attributes[f]))}),r.attributes.hasOwnProperty("BYTERANGE")&&(r.attributes.byterange=Bx(r.attributes.BYTERANGE)),this.trigger("data",r);return}if(n=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(d),n&&n[1]){r={type:"tag",tagType:"server-control"},r.attributes=Xo(n[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(f){r.attributes.hasOwnProperty(f)&&(r.attributes[f]=parseFloat(r.attributes[f]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(f){r.attributes.hasOwnProperty(f)&&(r.attributes[f]=/YES/.test(r.attributes[f]))}),this.trigger("data",r);return}if(n=/^#EXT-X-PART-INF:(.*)$/.exec(d),n&&n[1]){r={type:"tag",tagType:"part-inf"},r.attributes=Xo(n[1]),["PART-TARGET"].forEach(function(f){r.attributes.hasOwnProperty(f)&&(r.attributes[f]=parseFloat(r.attributes[f]))}),this.trigger("data",r);return}if(n=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(d),n&&n[1]){r={type:"tag",tagType:"preload-hint"},r.attributes=Xo(n[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(f){if(r.attributes.hasOwnProperty(f)){r.attributes[f]=parseInt(r.attributes[f],10);const p=f==="BYTERANGE-LENGTH"?"length":"offset";r.attributes.byterange=r.attributes.byterange||{},r.attributes.byterange[p]=r.attributes[f],delete r.attributes[f]}}),this.trigger("data",r);return}if(n=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(d),n&&n[1]){r={type:"tag",tagType:"rendition-report"},r.attributes=Xo(n[1]),["LAST-MSN","LAST-PART"].forEach(function(f){r.attributes.hasOwnProperty(f)&&(r.attributes[f]=parseInt(r.attributes[f],10))}),this.trigger("data",r);return}if(n=/^#EXT-X-DATERANGE:(.*)$/.exec(d),n&&n[1]){r={type:"tag",tagType:"daterange"},r.attributes=Xo(n[1]),["ID","CLASS"].forEach(function(p){r.attributes.hasOwnProperty(p)&&(r.attributes[p]=String(r.attributes[p]))}),["START-DATE","END-DATE"].forEach(function(p){r.attributes.hasOwnProperty(p)&&(r.attributes[p]=new Date(r.attributes[p]))}),["DURATION","PLANNED-DURATION"].forEach(function(p){r.attributes.hasOwnProperty(p)&&(r.attributes[p]=parseFloat(r.attributes[p]))}),["END-ON-NEXT"].forEach(function(p){r.attributes.hasOwnProperty(p)&&(r.attributes[p]=/YES/i.test(r.attributes[p]))}),["SCTE35-CMD"," SCTE35-OUT","SCTE35-IN"].forEach(function(p){r.attributes.hasOwnProperty(p)&&(r.attributes[p]=r.attributes[p].toString(16))});const f=/^X-([A-Z]+-)+[A-Z]+$/;for(const p in r.attributes){if(!f.test(p))continue;const m=/[0-9A-Fa-f]{6}/g.test(r.attributes[p]),y=/^\d+(\.\d+)?$/.test(r.attributes[p]);r.attributes[p]=m?r.attributes[p].toString(16):y?parseFloat(r.attributes[p]):String(r.attributes[p])}this.trigger("data",r);return}if(n=/^#EXT-X-INDEPENDENT-SEGMENTS/.exec(d),n){this.trigger("data",{type:"tag",tagType:"independent-segments"});return}if(n=/^#EXT-X-I-FRAMES-ONLY/.exec(d),n){this.trigger("data",{type:"tag",tagType:"i-frames-only"});return}if(n=/^#EXT-X-CONTENT-STEERING:(.*)$/.exec(d),n){r={type:"tag",tagType:"content-steering"},r.attributes=Xo(n[1]),this.trigger("data",r);return}if(n=/^#EXT-X-I-FRAME-STREAM-INF:(.*)$/.exec(d),n){r={type:"tag",tagType:"i-frame-playlist"},r.attributes=Xo(n[1]),r.attributes.URI&&(r.uri=r.attributes.URI),r.attributes.BANDWIDTH&&(r.attributes.BANDWIDTH=parseInt(r.attributes.BANDWIDTH,10)),r.attributes.RESOLUTION&&(r.attributes.RESOLUTION=RL(r.attributes.RESOLUTION)),r.attributes["AVERAGE-BANDWIDTH"]&&(r.attributes["AVERAGE-BANDWIDTH"]=parseInt(r.attributes["AVERAGE-BANDWIDTH"],10)),r.attributes["FRAME-RATE"]&&(r.attributes["FRAME-RATE"]=parseFloat(r.attributes["FRAME-RATE"])),this.trigger("data",r);return}if(n=/^#EXT-X-DEFINE:(.*)$/.exec(d),n){r={type:"tag",tagType:"define"},r.attributes=Xo(n[1]),this.trigger("data",r);return}this.trigger("data",{type:"tag",data:d.slice(4)})})}addParser({expression:t,customType:n,dataParser:r,segment:l}){typeof r!="function"&&(r=d=>d),this.customParsers.push(d=>{if(t.exec(d))return this.trigger("data",{type:"custom",data:r(d),customType:n,segment:l}),!0})}addTagMapper({expression:t,map:n}){const r=l=>t.test(l)?n(l):l;this.tagMappers.push(r)}}const XV=u=>u.toLowerCase().replace(/-(\w)/g,t=>t[1].toUpperCase()),bf=function(u){const t={};return Object.keys(u).forEach(function(n){t[XV(n)]=u[n]}),t},zx=function(u){const{serverControl:t,targetDuration:n,partTargetDuration:r}=u;if(!t)return;const l="#EXT-X-SERVER-CONTROL",d="holdBack",f="partHoldBack",p=n&&n*3,m=r&&r*2;n&&!t.hasOwnProperty(d)&&(t[d]=p,this.trigger("info",{message:`${l} defaulting HOLD-BACK to targetDuration * 3 (${p}).`})),p&&t[d]<p&&(this.trigger("warn",{message:`${l} clamping HOLD-BACK (${t[d]}) to targetDuration * 3 (${p})`}),t[d]=p),r&&!t.hasOwnProperty(f)&&(t[f]=r*3,this.trigger("info",{message:`${l} defaulting PART-HOLD-BACK to partTargetDuration * 3 (${t[f]}).`})),r&&t[f]<m&&(this.trigger("warn",{message:`${l} clamping PART-HOLD-BACK (${t[f]}) to partTargetDuration * 2 (${m}).`}),t[f]=m)};class QV extends Cw{constructor(t={}){super(),this.lineStream=new $V,this.parseStream=new WV,this.lineStream.pipe(this.parseStream),this.mainDefinitions=t.mainDefinitions||{},this.params=new URL(t.uri,"https://a.com").searchParams,this.lastProgramDateTime=null;const n=this,r=[];let l={},d,f,p=!1;const m=function(){},y={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},b="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed";let _=0;this.manifest={allowCache:!0,discontinuityStarts:[],dateRanges:[],iFramePlaylists:[],segments:[]};let A=0,w=0;const T={};this.on("end",()=>{l.uri||!l.parts&&!l.preloadHints||(!l.map&&d&&(l.map=d),!l.key&&f&&(l.key=f),!l.timeline&&typeof _=="number"&&(l.timeline=_),this.manifest.preloadSegment=l)}),this.parseStream.on("data",function(k){let U,Y;if(n.manifest.definitions){for(const se in n.manifest.definitions)if(k.uri&&(k.uri=k.uri.replace(`{$${se}}`,n.manifest.definitions[se])),k.attributes)for(const te in k.attributes)typeof k.attributes[te]=="string"&&(k.attributes[te]=k.attributes[te].replace(`{$${se}}`,n.manifest.definitions[se]))}({tag(){({version(){k.version&&(this.manifest.version=k.version)},"allow-cache"(){this.manifest.allowCache=k.allowed,"allowed"in k||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange(){const se={};"length"in k&&(l.byterange=se,se.length=k.length,"offset"in k||(k.offset=A)),"offset"in k&&(l.byterange=se,se.offset=k.offset),A=se.offset+se.length},endlist(){this.manifest.endList=!0},inf(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),k.title&&(l.title=k.title),k.duration>0&&(l.duration=k.duration),k.duration===0&&(l.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=r},key(){if(!k.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(k.attributes.METHOD==="NONE"){f=null;return}if(!k.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}if(k.attributes.KEYFORMAT==="com.apple.streamingkeydelivery"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:k.attributes};return}if(k.attributes.KEYFORMAT==="com.microsoft.playready"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.microsoft.playready"]={uri:k.attributes.URI};return}if(k.attributes.KEYFORMAT===b){if(["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(k.attributes.METHOD)===-1){this.trigger("warn",{message:"invalid key method provided for Widevine"});return}if(k.attributes.METHOD==="SAMPLE-AES-CENC"&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),k.attributes.URI.substring(0,23)!=="data:text/plain;base64,"){this.trigger("warn",{message:"invalid key URI provided for Widevine"});return}if(!(k.attributes.KEYID&&k.attributes.KEYID.substring(0,2)==="0x")){this.trigger("warn",{message:"invalid key ID provided for Widevine"});return}this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:k.attributes.KEYFORMAT,keyId:k.attributes.KEYID.substring(2)},pssh:LN(k.attributes.URI.split(",")[1])};return}k.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),f={method:k.attributes.METHOD||"AES-128",uri:k.attributes.URI},typeof k.attributes.IV<"u"&&(f.iv=k.attributes.IV)},"media-sequence"(){if(!isFinite(k.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+k.number});return}this.manifest.mediaSequence=k.number},"discontinuity-sequence"(){if(!isFinite(k.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+k.number});return}this.manifest.discontinuitySequence=k.number,_=k.number},"playlist-type"(){if(!/VOD|EVENT/.test(k.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+k.playlist});return}this.manifest.playlistType=k.playlistType},map(){d={},k.uri&&(d.uri=k.uri),k.byterange&&(d.byterange=k.byterange),f&&(d.key=f)},"stream-inf"(){if(this.manifest.playlists=r,this.manifest.mediaGroups=this.manifest.mediaGroups||y,!k.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}l.attributes||(l.attributes={}),Us(l.attributes,k.attributes)},media(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||y,!(k.attributes&&k.attributes.TYPE&&k.attributes["GROUP-ID"]&&k.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}const se=this.manifest.mediaGroups[k.attributes.TYPE];se[k.attributes["GROUP-ID"]]=se[k.attributes["GROUP-ID"]]||{},U=se[k.attributes["GROUP-ID"]],Y={default:/yes/i.test(k.attributes.DEFAULT)},Y.default?Y.autoselect=!0:Y.autoselect=/yes/i.test(k.attributes.AUTOSELECT),k.attributes.LANGUAGE&&(Y.language=k.attributes.LANGUAGE),k.attributes.URI&&(Y.uri=k.attributes.URI),k.attributes["INSTREAM-ID"]&&(Y.instreamId=k.attributes["INSTREAM-ID"]),k.attributes.CHARACTERISTICS&&(Y.characteristics=k.attributes.CHARACTERISTICS),k.attributes.FORCED&&(Y.forced=/yes/i.test(k.attributes.FORCED)),U[k.attributes.NAME]=Y},discontinuity(){_+=1,l.discontinuity=!0,this.manifest.discontinuityStarts.push(r.length)},"program-date-time"(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=k.dateTimeString,this.manifest.dateTimeObject=k.dateTimeObject),l.dateTimeString=k.dateTimeString,l.dateTimeObject=k.dateTimeObject;const{lastProgramDateTime:se}=this;this.lastProgramDateTime=new Date(k.dateTimeString).getTime(),se===null&&this.manifest.segments.reduceRight((te,Re)=>(Re.programDateTime=te-Re.duration*1e3,Re.programDateTime),this.lastProgramDateTime)},targetduration(){if(!isFinite(k.duration)||k.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+k.duration});return}this.manifest.targetDuration=k.duration,zx.call(this,this.manifest)},start(){if(!k.attributes||isNaN(k.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return}this.manifest.start={timeOffset:k.attributes["TIME-OFFSET"],precise:k.attributes.PRECISE}},"cue-out"(){l.cueOut=k.data},"cue-out-cont"(){l.cueOutCont=k.data},"cue-in"(){l.cueIn=k.data},skip(){this.manifest.skip=bf(k.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",k.attributes,["SKIPPED-SEGMENTS"])},part(){p=!0;const se=this.manifest.segments.length,te=bf(k.attributes);l.parts=l.parts||[],l.parts.push(te),te.byterange&&(te.byterange.hasOwnProperty("offset")||(te.byterange.offset=w),w=te.byterange.offset+te.byterange.length);const Re=l.parts.length-1;this.warnOnMissingAttributes_(`#EXT-X-PART #${Re} for segment #${se}`,k.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((Be,j)=>{Be.hasOwnProperty("lastPart")||this.trigger("warn",{message:`#EXT-X-RENDITION-REPORT #${j} lacks required attribute(s): LAST-PART`})})},"server-control"(){const se=this.manifest.serverControl=bf(k.attributes);se.hasOwnProperty("canBlockReload")||(se.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),zx.call(this,this.manifest),se.canSkipDateranges&&!se.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint"(){const se=this.manifest.segments.length,te=bf(k.attributes),Re=te.type&&te.type==="PART";l.preloadHints=l.preloadHints||[],l.preloadHints.push(te),te.byterange&&(te.byterange.hasOwnProperty("offset")||(te.byterange.offset=Re?w:0,Re&&(w=te.byterange.offset+te.byterange.length)));const Be=l.preloadHints.length-1;if(this.warnOnMissingAttributes_(`#EXT-X-PRELOAD-HINT #${Be} for segment #${se}`,k.attributes,["TYPE","URI"]),!!te.type)for(let j=0;j<l.preloadHints.length-1;j++){const M=l.preloadHints[j];M.type&&M.type===te.type&&this.trigger("warn",{message:`#EXT-X-PRELOAD-HINT #${Be} for segment #${se} has the same TYPE ${te.type} as preload hint #${j}`})}},"rendition-report"(){const se=bf(k.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(se);const te=this.manifest.renditionReports.length-1,Re=["LAST-MSN","URI"];p&&Re.push("LAST-PART"),this.warnOnMissingAttributes_(`#EXT-X-RENDITION-REPORT #${te}`,k.attributes,Re)},"part-inf"(){this.manifest.partInf=bf(k.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",k.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),zx.call(this,this.manifest)},daterange(){this.manifest.dateRanges.push(bf(k.attributes));const se=this.manifest.dateRanges.length-1;this.warnOnMissingAttributes_(`#EXT-X-DATERANGE #${se}`,k.attributes,["ID","START-DATE"]);const te=this.manifest.dateRanges[se];te.endDate&&te.startDate&&new Date(te.endDate)<new Date(te.startDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE END-DATE must be equal to or later than the value of the START-DATE"}),te.duration&&te.duration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE DURATION must not be negative"}),te.plannedDuration&&te.plannedDuration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE PLANNED-DURATION must not be negative"});const Re=!!te.endOnNext;if(Re&&!te.class&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must have a CLASS attribute"}),Re&&(te.duration||te.endDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must not contain DURATION or END-DATE attributes"}),te.duration&&te.endDate){const j=te.startDate.getTime()+te.duration*1e3;this.manifest.dateRanges[se].endDate=new Date(j)}if(!T[te.id])T[te.id]=te;else{for(const j in T[te.id])if(te[j]&&JSON.stringify(T[te.id][j])!==JSON.stringify(te[j])){this.trigger("warn",{message:"EXT-X-DATERANGE tags with the same ID in a playlist must have the same attributes values"});break}const Be=this.manifest.dateRanges.findIndex(j=>j.id===te.id);this.manifest.dateRanges[Be]=Us(this.manifest.dateRanges[Be],te),T[te.id]=Us(T[te.id],te),this.manifest.dateRanges.pop()}},"independent-segments"(){this.manifest.independentSegments=!0},"i-frames-only"(){this.manifest.iFramesOnly=!0,this.requiredCompatibilityversion(this.manifest.version,4)},"content-steering"(){this.manifest.contentSteering=bf(k.attributes),this.warnOnMissingAttributes_("#EXT-X-CONTENT-STEERING",k.attributes,["SERVER-URI"])},define(){this.manifest.definitions=this.manifest.definitions||{};const se=(te,Re)=>{if(te in this.manifest.definitions){this.trigger("error",{message:`EXT-X-DEFINE: Duplicate name ${te}`});return}this.manifest.definitions[te]=Re};if("QUERYPARAM"in k.attributes){if("NAME"in k.attributes||"IMPORT"in k.attributes){this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"});return}const te=this.params.get(k.attributes.QUERYPARAM);if(!te){this.trigger("error",{message:`EXT-X-DEFINE: No query param ${k.attributes.QUERYPARAM}`});return}se(k.attributes.QUERYPARAM,decodeURIComponent(te));return}if("NAME"in k.attributes){if("IMPORT"in k.attributes){this.trigger("error",{message:"EXT-X-DEFINE: Invalid attributes"});return}if(!("VALUE"in k.attributes)||typeof k.attributes.VALUE!="string"){this.trigger("error",{message:`EXT-X-DEFINE: No value for ${k.attributes.NAME}`});return}se(k.attributes.NAME,k.attributes.VALUE);return}if("IMPORT"in k.attributes){if(!this.mainDefinitions[k.attributes.IMPORT]){this.trigger("error",{message:`EXT-X-DEFINE: No value ${k.attributes.IMPORT} to import, or IMPORT used on main playlist`});return}se(k.attributes.IMPORT,this.mainDefinitions[k.attributes.IMPORT]);return}this.trigger("error",{message:"EXT-X-DEFINE: No attribute"})},"i-frame-playlist"(){this.manifest.iFramePlaylists.push({attributes:k.attributes,uri:k.uri,timeline:_}),this.warnOnMissingAttributes_("#EXT-X-I-FRAME-STREAM-INF",k.attributes,["BANDWIDTH","URI"])}}[k.tagType]||m).call(n)},uri(){l.uri=k.uri,r.push(l),this.manifest.targetDuration&&!("duration"in l)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),l.duration=this.manifest.targetDuration),f&&(l.key=f),l.timeline=_,d&&(l.map=d),w=0,this.lastProgramDateTime!==null&&(l.programDateTime=this.lastProgramDateTime,this.lastProgramDateTime+=l.duration*1e3),l={}},comment(){},custom(){k.segment?(l.custom=l.custom||{},l.custom[k.customType]=k.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[k.customType]=k.data)}})[k.type].call(n)})}requiredCompatibilityversion(t,n){(t<n||!t)&&this.trigger("warn",{message:`manifest must be at least version ${n}`})}warnOnMissingAttributes_(t,n,r){const l=[];r.forEach(function(d){n.hasOwnProperty(d)||l.push(d)}),l.length&&this.trigger("warn",{message:`${t} lacks required attribute(s): ${l.join(", ")}`})}push(t){this.lineStream.push(t)}end(){this.lineStream.push(`
`),this.manifest.dateRanges.length&&this.lastProgramDateTime===null&&this.trigger("warn",{message:"A playlist with EXT-X-DATERANGE tag must contain atleast one EXT-X-PROGRAM-DATE-TIME tag"}),this.lastProgramDateTime=null,this.trigger("end")}addParser(t){this.parseStream.addParser(t)}addTagMapper(t){this.parseStream.addTagMapper(t)}}var Lh={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},JV=["video","audio","text"],LL=["Video","Audio","Text"],PN=function(t){return t&&t.replace(/avc1\.(\d+)\.(\d+)/i,function(n,r,l){var d=("00"+Number(r).toString(16)).slice(-2),f=("00"+Number(l).toString(16)).slice(-2);return"avc1."+d+"00"+f})},Rc=function(t){t===void 0&&(t="");var n=t.split(","),r=[];return n.forEach(function(l){l=l.trim();var d;JV.forEach(function(f){var p=Lh[f].exec(l.toLowerCase());if(!(!p||p.length<=1)){d=f;var m=l.substring(0,p[1].length),y=l.replace(m,"");r.push({type:m,details:y,mediaType:f})}}),d||r.push({type:l,details:"",mediaType:"unknown"})}),r},ZV=function(t,n){if(!t.mediaGroups.AUDIO||!n)return null;var r=t.mediaGroups.AUDIO[n];if(!r)return null;for(var l in r){var d=r[l];if(d.default&&d.playlists)return Rc(d.playlists[0].attributes.CODECS)}return null},MN=function(t){return t===void 0&&(t=""),Lh.audio.test(t.trim().toLowerCase())},e9=function(t){return t===void 0&&(t=""),Lh.text.test(t.trim().toLowerCase())},Eg=function(t){if(!(!t||typeof t!="string")){var n=t.toLowerCase().split(",").map(function(d){return PN(d.trim())}),r="video";n.length===1&&MN(n[0])?r="audio":n.length===1&&e9(n[0])&&(r="application");var l="mp4";return n.every(function(d){return Lh.mp4.test(d)})?l="mp4":n.every(function(d){return Lh.webm.test(d)})?l="webm":n.every(function(d){return Lh.ogg.test(d)})&&(l="ogg"),r+"/"+l+';codecs="'+t+'"'}},yy=function(t,n){return t===void 0&&(t=""),n===void 0&&(n=!1),St.MediaSource&&St.MediaSource.isTypeSupported&&St.MediaSource.isTypeSupported(Eg(t))||n&&St.ManagedMediaSource&&St.ManagedMediaSource.isTypeSupported&&St.ManagedMediaSource.isTypeSupported(Eg(t))||!1},jx=function(t){return t===void 0&&(t=""),t.toLowerCase().split(",").every(function(n){n=n.trim();for(var r=0;r<LL.length;r++){var l=LL[r];if(Lh["muxer"+l].test(n))return!0}return!1})},PL="mp4a.40.2",t9="avc1.4d400d",n9=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,i9=/^application\/dash\+xml/i,NN=function(t){return n9.test(t)?"hls":i9.test(t)?"dash":t==="application/vnd.videojs.vhs+json"?"vhs-json":null},r9=function(t){return t.toString(2).length},s9=function(t){return Math.ceil(r9(t)/8)},ON=function(t){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer},a9=function(t){return ON(t)},ir=function(t){return t instanceof Uint8Array?t:(!Array.isArray(t)&&!a9(t)&&!(t instanceof ArrayBuffer)&&(typeof t!="number"||typeof t=="number"&&t!==t?t=0:t=[t]),new Uint8Array(t&&t.buffer||t,t&&t.byteOffset||0,t&&t.byteLength||0))},uo=St.BigInt||Number,DA=[uo("0x1"),uo("0x100"),uo("0x10000"),uo("0x1000000"),uo("0x100000000"),uo("0x10000000000"),uo("0x1000000000000"),uo("0x100000000000000"),uo("0x10000000000000000")];(function(){var u=new Uint16Array([65484]),t=new Uint8Array(u.buffer,u.byteOffset,u.byteLength);return t[0]===255?"big":t[0]===204?"little":"unknown"})();var o9=function(t,n){var r=n===void 0?{}:n,l=r.signed,d=l===void 0?!1:l,f=r.le,p=f===void 0?!1:f;t=ir(t);var m=p?"reduce":"reduceRight",y=t[m]?t[m]:Array.prototype[m],b=y.call(t,function(A,w,T){var k=p?T:Math.abs(T+1-t.length);return A+uo(w)*DA[k]},uo(0));if(d){var _=DA[t.length]/uo(2)-uo(1);b=uo(b),b>_&&(b-=_,b-=_,b-=uo(2))}return Number(b)},l9=function(t,n){var r={},l=r.le,d=l===void 0?!1:l;(typeof t!="bigint"&&typeof t!="number"||typeof t=="number"&&t!==t)&&(t=0),t=uo(t);for(var f=s9(t),p=new Uint8Array(new ArrayBuffer(f)),m=0;m<f;m++){var y=d?m:Math.abs(m+1-p.length);p[y]=Number(t/DA[m]&uo(255)),t<0&&(p[y]=Math.abs(~p[y]),p[y]-=m===0?1:2)}return p},FN=function(t,n){if(typeof t!="string"&&t&&typeof t.toString=="function"&&(t=t.toString()),typeof t!="string")return new Uint8Array;n||(t=unescape(encodeURIComponent(t)));for(var r=new Uint8Array(t.length),l=0;l<t.length;l++)r[l]=t.charCodeAt(l);return r},u9=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(n=n.filter(function(p){return p&&(p.byteLength||p.length)&&typeof p!="string"}),n.length<=1)return ir(n[0]);var l=n.reduce(function(p,m,y){return p+(m.byteLength||m.length)},0),d=new Uint8Array(l),f=0;return n.forEach(function(p){p=ir(p),d.set(p,f),f+=p.byteLength}),d},Os=function(t,n,r){var l=r===void 0?{}:r,d=l.offset,f=d===void 0?0:d,p=l.mask,m=p===void 0?[]:p;t=ir(t),n=ir(n);var y=n.every?n.every:Array.prototype.every;return n.length&&t.length-f>=n.length&&y.call(n,function(b,_){var A=m[_]?m[_]&t[f+_]:t[f+_];return b===A})},c9=function(t,n,r){n.forEach(function(l){for(var d in t.mediaGroups[l])for(var f in t.mediaGroups[l][d]){var p=t.mediaGroups[l][d][f];r(p,l,d,f)}})},sy={},kd={},Sh={},ML;function ME(){if(ML)return Sh;ML=1;function u(d,f,p){if(p===void 0&&(p=Array.prototype),d&&typeof p.find=="function")return p.find.call(d,f);for(var m=0;m<d.length;m++)if(Object.prototype.hasOwnProperty.call(d,m)){var y=d[m];if(f.call(void 0,y,m,d))return y}}function t(d,f){return f===void 0&&(f=Object),f&&typeof f.freeze=="function"?f.freeze(d):d}function n(d,f){if(d===null||typeof d!="object")throw new TypeError("target is not an object");for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&(d[p]=f[p]);return d}var r=t({HTML:"text/html",isHTML:function(d){return d===r.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),l=t({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(d){return d===l.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});return Sh.assign=n,Sh.find=u,Sh.freeze=t,Sh.MIME_TYPE=r,Sh.NAMESPACE=l,Sh}var NL;function UN(){if(NL)return kd;NL=1;var u=ME(),t=u.find,n=u.NAMESPACE;function r(Ne){return Ne!==""}function l(Ne){return Ne?Ne.split(/[\t\n\f\r ]+/).filter(r):[]}function d(Ne,Ke){return Ne.hasOwnProperty(Ke)||(Ne[Ke]=!0),Ne}function f(Ne){if(!Ne)return[];var Ke=l(Ne);return Object.keys(Ke.reduce(d,{}))}function p(Ne){return function(Ke){return Ne&&Ne.indexOf(Ke)!==-1}}function m(Ne,Ke){for(var ft in Ne)Object.prototype.hasOwnProperty.call(Ne,ft)&&(Ke[ft]=Ne[ft])}function y(Ne,Ke){var ft=Ne.prototype;if(!(ft instanceof Ke)){let un=function(){};var At=un;un.prototype=Ke.prototype,un=new un,m(ft,un),Ne.prototype=ft=un}ft.constructor!=Ne&&(typeof Ne!="function"&&console.error("unknown Class:"+Ne),ft.constructor=Ne)}var b={},_=b.ELEMENT_NODE=1,A=b.ATTRIBUTE_NODE=2,w=b.TEXT_NODE=3,T=b.CDATA_SECTION_NODE=4,k=b.ENTITY_REFERENCE_NODE=5,U=b.ENTITY_NODE=6,Y=b.PROCESSING_INSTRUCTION_NODE=7,se=b.COMMENT_NODE=8,te=b.DOCUMENT_NODE=9,Re=b.DOCUMENT_TYPE_NODE=10,Be=b.DOCUMENT_FRAGMENT_NODE=11,j=b.NOTATION_NODE=12,M={},Z={};M.INDEX_SIZE_ERR=(Z[1]="Index size error",1),M.DOMSTRING_SIZE_ERR=(Z[2]="DOMString size error",2);var K=M.HIERARCHY_REQUEST_ERR=(Z[3]="Hierarchy request error",3);M.WRONG_DOCUMENT_ERR=(Z[4]="Wrong document",4),M.INVALID_CHARACTER_ERR=(Z[5]="Invalid character",5),M.NO_DATA_ALLOWED_ERR=(Z[6]="No data allowed",6),M.NO_MODIFICATION_ALLOWED_ERR=(Z[7]="No modification allowed",7);var x=M.NOT_FOUND_ERR=(Z[8]="Not found",8);M.NOT_SUPPORTED_ERR=(Z[9]="Not supported",9);var ue=M.INUSE_ATTRIBUTE_ERR=(Z[10]="Attribute in use",10);M.INVALID_STATE_ERR=(Z[11]="Invalid state",11),M.SYNTAX_ERR=(Z[12]="Syntax error",12),M.INVALID_MODIFICATION_ERR=(Z[13]="Invalid modification",13),M.NAMESPACE_ERR=(Z[14]="Invalid namespace",14),M.INVALID_ACCESS_ERR=(Z[15]="Invalid access",15);function $e(Ne,Ke){if(Ke instanceof Error)var ft=Ke;else ft=this,Error.call(this,Z[Ne]),this.message=Z[Ne],Error.captureStackTrace&&Error.captureStackTrace(this,$e);return ft.code=Ne,Ke&&(this.message=this.message+": "+Ke),ft}$e.prototype=Error.prototype,m(M,$e);function xe(){}xe.prototype={length:0,item:function(Ne){return Ne>=0&&Ne<this.length?this[Ne]:null},toString:function(Ne,Ke){for(var ft=[],At=0;At<this.length;At++)Un(this[At],ft,Ne,Ke);return ft.join("")},filter:function(Ne){return Array.prototype.filter.call(this,Ne)},indexOf:function(Ne){return Array.prototype.indexOf.call(this,Ne)}};function lt(Ne,Ke){this._node=Ne,this._refresh=Ke,et(this)}function et(Ne){var Ke=Ne._node._inc||Ne._node.ownerDocument._inc;if(Ne._inc!==Ke){var ft=Ne._refresh(Ne._node);if(ei(Ne,"length",ft.length),!Ne.$$length||ft.length<Ne.$$length)for(var At=ft.length;At in Ne;At++)Object.prototype.hasOwnProperty.call(Ne,At)&&delete Ne[At];m(ft,Ne),Ne._inc=Ke}}lt.prototype.item=function(Ne){return et(this),this[Ne]||null},y(lt,xe);function Xe(){}function ut(Ne,Ke){for(var ft=Ne.length;ft--;)if(Ne[ft]===Ke)return ft}function Dt(Ne,Ke,ft,At){if(At?Ke[ut(Ke,At)]=ft:Ke[Ke.length++]=ft,Ne){ft.ownerElement=Ne;var un=Ne.ownerDocument;un&&(At&&at(un,Ne,At),Ze(un,Ne,ft))}}function dt(Ne,Ke,ft){var At=ut(Ke,ft);if(At>=0){for(var un=Ke.length-1;At<un;)Ke[At]=Ke[++At];if(Ke.length=un,Ne){var Qn=Ne.ownerDocument;Qn&&(at(Qn,Ne,ft),ft.ownerElement=null)}}else throw new $e(x,new Error(Ne.tagName+"@"+ft))}Xe.prototype={length:0,item:xe.prototype.item,getNamedItem:function(Ne){for(var Ke=this.length;Ke--;){var ft=this[Ke];if(ft.nodeName==Ne)return ft}},setNamedItem:function(Ne){var Ke=Ne.ownerElement;if(Ke&&Ke!=this._ownerElement)throw new $e(ue);var ft=this.getNamedItem(Ne.nodeName);return Dt(this._ownerElement,this,Ne,ft),ft},setNamedItemNS:function(Ne){var Ke=Ne.ownerElement,ft;if(Ke&&Ke!=this._ownerElement)throw new $e(ue);return ft=this.getNamedItemNS(Ne.namespaceURI,Ne.localName),Dt(this._ownerElement,this,Ne,ft),ft},removeNamedItem:function(Ne){var Ke=this.getNamedItem(Ne);return dt(this._ownerElement,this,Ke),Ke},removeNamedItemNS:function(Ne,Ke){var ft=this.getNamedItemNS(Ne,Ke);return dt(this._ownerElement,this,ft),ft},getNamedItemNS:function(Ne,Ke){for(var ft=this.length;ft--;){var At=this[ft];if(At.localName==Ke&&At.namespaceURI==Ne)return At}return null}};function Et(){}Et.prototype={hasFeature:function(Ne,Ke){return!0},createDocument:function(Ne,Ke,ft){var At=new Qe;if(At.implementation=this,At.childNodes=new xe,At.doctype=ft||null,ft&&At.appendChild(ft),Ke){var un=At.createElementNS(Ne,Ke);At.appendChild(un)}return At},createDocumentType:function(Ne,Ke,ft){var At=new ni;return At.name=Ne,At.nodeName=Ne,At.publicId=Ke||"",At.systemId=ft||"",At}};function Rt(){}Rt.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(Ne,Ke){return Mt(this,Ne,Ke)},replaceChild:function(Ne,Ke){Mt(this,Ne,Ke,bt),Ke&&this.removeChild(Ke)},removeChild:function(Ne){return ce(this,Ne)},appendChild:function(Ne){return this.insertBefore(Ne,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(Ne){return Hn(this.ownerDocument||this,this,Ne)},normalize:function(){for(var Ne=this.firstChild;Ne;){var Ke=Ne.nextSibling;Ke&&Ke.nodeType==w&&Ne.nodeType==w?(this.removeChild(Ke),Ne.appendData(Ke.data)):(Ne.normalize(),Ne=Ke)}},isSupported:function(Ne,Ke){return this.ownerDocument.implementation.hasFeature(Ne,Ke)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(Ne){for(var Ke=this;Ke;){var ft=Ke._nsMap;if(ft){for(var At in ft)if(Object.prototype.hasOwnProperty.call(ft,At)&&ft[At]===Ne)return At}Ke=Ke.nodeType==A?Ke.ownerDocument:Ke.parentNode}return null},lookupNamespaceURI:function(Ne){for(var Ke=this;Ke;){var ft=Ke._nsMap;if(ft&&Object.prototype.hasOwnProperty.call(ft,Ne))return ft[Ne];Ke=Ke.nodeType==A?Ke.ownerDocument:Ke.parentNode}return null},isDefaultNamespace:function(Ne){var Ke=this.lookupPrefix(Ne);return Ke==null}};function mn(Ne){return Ne=="<"&&"&lt;"||Ne==">"&&"&gt;"||Ne=="&"&&"&amp;"||Ne=='"'&&"&quot;"||"&#"+Ne.charCodeAt()+";"}m(b,Rt),m(b,Rt.prototype);function Tn(Ne,Ke){if(Ke(Ne))return!0;if(Ne=Ne.firstChild)do if(Tn(Ne,Ke))return!0;while(Ne=Ne.nextSibling)}function Qe(){this.ownerDocument=this}function Ze(Ne,Ke,ft){Ne&&Ne._inc++;var At=ft.namespaceURI;At===n.XMLNS&&(Ke._nsMap[ft.prefix?ft.localName:""]=ft.value)}function at(Ne,Ke,ft,At){Ne&&Ne._inc++;var un=ft.namespaceURI;un===n.XMLNS&&delete Ke._nsMap[ft.prefix?ft.localName:""]}function nn(Ne,Ke,ft){if(Ne&&Ne._inc){Ne._inc++;var At=Ke.childNodes;if(ft)At[At.length++]=ft;else{for(var un=Ke.firstChild,Qn=0;un;)At[Qn++]=un,un=un.nextSibling;At.length=Qn,delete At[At.length]}}}function ce(Ne,Ke){var ft=Ke.previousSibling,At=Ke.nextSibling;return ft?ft.nextSibling=At:Ne.firstChild=At,At?At.previousSibling=ft:Ne.lastChild=ft,Ke.parentNode=null,Ke.previousSibling=null,Ke.nextSibling=null,nn(Ne.ownerDocument,Ne),Ke}function ge(Ne){return Ne&&(Ne.nodeType===Rt.DOCUMENT_NODE||Ne.nodeType===Rt.DOCUMENT_FRAGMENT_NODE||Ne.nodeType===Rt.ELEMENT_NODE)}function G(Ne){return Ne&&(_e(Ne)||Ae(Ne)||ae(Ne)||Ne.nodeType===Rt.DOCUMENT_FRAGMENT_NODE||Ne.nodeType===Rt.COMMENT_NODE||Ne.nodeType===Rt.PROCESSING_INSTRUCTION_NODE)}function ae(Ne){return Ne&&Ne.nodeType===Rt.DOCUMENT_TYPE_NODE}function _e(Ne){return Ne&&Ne.nodeType===Rt.ELEMENT_NODE}function Ae(Ne){return Ne&&Ne.nodeType===Rt.TEXT_NODE}function yt(Ne,Ke){var ft=Ne.childNodes||[];if(t(ft,_e)||ae(Ke))return!1;var At=t(ft,ae);return!(Ke&&At&&ft.indexOf(At)>ft.indexOf(Ke))}function zt(Ne,Ke){var ft=Ne.childNodes||[];function At(Qn){return _e(Qn)&&Qn!==Ke}if(t(ft,At))return!1;var un=t(ft,ae);return!(Ke&&un&&ft.indexOf(un)>ft.indexOf(Ke))}function vt(Ne,Ke,ft){if(!ge(Ne))throw new $e(K,"Unexpected parent node type "+Ne.nodeType);if(ft&&ft.parentNode!==Ne)throw new $e(x,"child not in parent");if(!G(Ke)||ae(Ke)&&Ne.nodeType!==Rt.DOCUMENT_NODE)throw new $e(K,"Unexpected node type "+Ke.nodeType+" for parent node type "+Ne.nodeType)}function Lt(Ne,Ke,ft){var At=Ne.childNodes||[],un=Ke.childNodes||[];if(Ke.nodeType===Rt.DOCUMENT_FRAGMENT_NODE){var Qn=un.filter(_e);if(Qn.length>1||t(un,Ae))throw new $e(K,"More than one element or text in fragment");if(Qn.length===1&&!yt(Ne,ft))throw new $e(K,"Element in fragment can not be inserted before doctype")}if(_e(Ke)&&!yt(Ne,ft))throw new $e(K,"Only one element can be added and only after doctype");if(ae(Ke)){if(t(At,ae))throw new $e(K,"Only one doctype is allowed");var ai=t(At,_e);if(ft&&At.indexOf(ai)<At.indexOf(ft))throw new $e(K,"Doctype can only be inserted before an element");if(!ft&&ai)throw new $e(K,"Doctype can not be appended since element is present")}}function bt(Ne,Ke,ft){var At=Ne.childNodes||[],un=Ke.childNodes||[];if(Ke.nodeType===Rt.DOCUMENT_FRAGMENT_NODE){var Qn=un.filter(_e);if(Qn.length>1||t(un,Ae))throw new $e(K,"More than one element or text in fragment");if(Qn.length===1&&!zt(Ne,ft))throw new $e(K,"Element in fragment can not be inserted before doctype")}if(_e(Ke)&&!zt(Ne,ft))throw new $e(K,"Only one element can be added and only after doctype");if(ae(Ke)){let Xi=function(si){return ae(si)&&si!==ft};var vi=Xi;if(t(At,Xi))throw new $e(K,"Only one doctype is allowed");var ai=t(At,_e);if(ft&&At.indexOf(ai)<At.indexOf(ft))throw new $e(K,"Doctype can only be inserted before an element")}}function Mt(Ne,Ke,ft,At){vt(Ne,Ke,ft),Ne.nodeType===Rt.DOCUMENT_NODE&&(At||Lt)(Ne,Ke,ft);var un=Ke.parentNode;if(un&&un.removeChild(Ke),Ke.nodeType===Be){var Qn=Ke.firstChild;if(Qn==null)return Ke;var ai=Ke.lastChild}else Qn=ai=Ke;var vi=ft?ft.previousSibling:Ne.lastChild;Qn.previousSibling=vi,ai.nextSibling=ft,vi?vi.nextSibling=Qn:Ne.firstChild=Qn,ft==null?Ne.lastChild=ai:ft.previousSibling=ai;do Qn.parentNode=Ne;while(Qn!==ai&&(Qn=Qn.nextSibling));return nn(Ne.ownerDocument||Ne,Ne),Ke.nodeType==Be&&(Ke.firstChild=Ke.lastChild=null),Ke}function kt(Ne,Ke){return Ke.parentNode&&Ke.parentNode.removeChild(Ke),Ke.parentNode=Ne,Ke.previousSibling=Ne.lastChild,Ke.nextSibling=null,Ke.previousSibling?Ke.previousSibling.nextSibling=Ke:Ne.firstChild=Ke,Ne.lastChild=Ke,nn(Ne.ownerDocument,Ne,Ke),Ke}Qe.prototype={nodeName:"#document",nodeType:te,doctype:null,documentElement:null,_inc:1,insertBefore:function(Ne,Ke){if(Ne.nodeType==Be){for(var ft=Ne.firstChild;ft;){var At=ft.nextSibling;this.insertBefore(ft,Ke),ft=At}return Ne}return Mt(this,Ne,Ke),Ne.ownerDocument=this,this.documentElement===null&&Ne.nodeType===_&&(this.documentElement=Ne),Ne},removeChild:function(Ne){return this.documentElement==Ne&&(this.documentElement=null),ce(this,Ne)},replaceChild:function(Ne,Ke){Mt(this,Ne,Ke,bt),Ne.ownerDocument=this,Ke&&this.removeChild(Ke),_e(Ne)&&(this.documentElement=Ne)},importNode:function(Ne,Ke){return vn(this,Ne,Ke)},getElementById:function(Ne){var Ke=null;return Tn(this.documentElement,function(ft){if(ft.nodeType==_&&ft.getAttribute("id")==Ne)return Ke=ft,!0}),Ke},getElementsByClassName:function(Ne){var Ke=f(Ne);return new lt(this,function(ft){var At=[];return Ke.length>0&&Tn(ft.documentElement,function(un){if(un!==ft&&un.nodeType===_){var Qn=un.getAttribute("class");if(Qn){var ai=Ne===Qn;if(!ai){var vi=f(Qn);ai=Ke.every(p(vi))}ai&&At.push(un)}}}),At})},createElement:function(Ne){var Ke=new Bt;Ke.ownerDocument=this,Ke.nodeName=Ne,Ke.tagName=Ne,Ke.localName=Ne,Ke.childNodes=new xe;var ft=Ke.attributes=new Xe;return ft._ownerElement=Ke,Ke},createDocumentFragment:function(){var Ne=new Zr;return Ne.ownerDocument=this,Ne.childNodes=new xe,Ne},createTextNode:function(Ne){var Ke=new On;return Ke.ownerDocument=this,Ke.appendData(Ne),Ke},createComment:function(Ne){var Ke=new Vn;return Ke.ownerDocument=this,Ke.appendData(Ne),Ke},createCDATASection:function(Ne){var Ke=new Sn;return Ke.ownerDocument=this,Ke.appendData(Ne),Ke},createProcessingInstruction:function(Ne,Ke){var ft=new Zi;return ft.ownerDocument=this,ft.tagName=ft.nodeName=ft.target=Ne,ft.nodeValue=ft.data=Ke,ft},createAttribute:function(Ne){var Ke=new sn;return Ke.ownerDocument=this,Ke.name=Ne,Ke.nodeName=Ne,Ke.localName=Ne,Ke.specified=!0,Ke},createEntityReference:function(Ne){var Ke=new bs;return Ke.ownerDocument=this,Ke.nodeName=Ne,Ke},createElementNS:function(Ne,Ke){var ft=new Bt,At=Ke.split(":"),un=ft.attributes=new Xe;return ft.childNodes=new xe,ft.ownerDocument=this,ft.nodeName=Ke,ft.tagName=Ke,ft.namespaceURI=Ne,At.length==2?(ft.prefix=At[0],ft.localName=At[1]):ft.localName=Ke,un._ownerElement=ft,ft},createAttributeNS:function(Ne,Ke){var ft=new sn,At=Ke.split(":");return ft.ownerDocument=this,ft.nodeName=Ke,ft.name=Ke,ft.namespaceURI=Ne,ft.specified=!0,At.length==2?(ft.prefix=At[0],ft.localName=At[1]):ft.localName=Ke,ft}},y(Qe,Rt);function Bt(){this._nsMap={}}Bt.prototype={nodeType:_,hasAttribute:function(Ne){return this.getAttributeNode(Ne)!=null},getAttribute:function(Ne){var Ke=this.getAttributeNode(Ne);return Ke&&Ke.value||""},getAttributeNode:function(Ne){return this.attributes.getNamedItem(Ne)},setAttribute:function(Ne,Ke){var ft=this.ownerDocument.createAttribute(Ne);ft.value=ft.nodeValue=""+Ke,this.setAttributeNode(ft)},removeAttribute:function(Ne){var Ke=this.getAttributeNode(Ne);Ke&&this.removeAttributeNode(Ke)},appendChild:function(Ne){return Ne.nodeType===Be?this.insertBefore(Ne,null):kt(this,Ne)},setAttributeNode:function(Ne){return this.attributes.setNamedItem(Ne)},setAttributeNodeNS:function(Ne){return this.attributes.setNamedItemNS(Ne)},removeAttributeNode:function(Ne){return this.attributes.removeNamedItem(Ne.nodeName)},removeAttributeNS:function(Ne,Ke){var ft=this.getAttributeNodeNS(Ne,Ke);ft&&this.removeAttributeNode(ft)},hasAttributeNS:function(Ne,Ke){return this.getAttributeNodeNS(Ne,Ke)!=null},getAttributeNS:function(Ne,Ke){var ft=this.getAttributeNodeNS(Ne,Ke);return ft&&ft.value||""},setAttributeNS:function(Ne,Ke,ft){var At=this.ownerDocument.createAttributeNS(Ne,Ke);At.value=At.nodeValue=""+ft,this.setAttributeNode(At)},getAttributeNodeNS:function(Ne,Ke){return this.attributes.getNamedItemNS(Ne,Ke)},getElementsByTagName:function(Ne){return new lt(this,function(Ke){var ft=[];return Tn(Ke,function(At){At!==Ke&&At.nodeType==_&&(Ne==="*"||At.tagName==Ne)&&ft.push(At)}),ft})},getElementsByTagNameNS:function(Ne,Ke){return new lt(this,function(ft){var At=[];return Tn(ft,function(un){un!==ft&&un.nodeType===_&&(Ne==="*"||un.namespaceURI===Ne)&&(Ke==="*"||un.localName==Ke)&&At.push(un)}),At})}},Qe.prototype.getElementsByTagName=Bt.prototype.getElementsByTagName,Qe.prototype.getElementsByTagNameNS=Bt.prototype.getElementsByTagNameNS,y(Bt,Rt);function sn(){}sn.prototype.nodeType=A,y(sn,Rt);function ti(){}ti.prototype={data:"",substringData:function(Ne,Ke){return this.data.substring(Ne,Ne+Ke)},appendData:function(Ne){Ne=this.data+Ne,this.nodeValue=this.data=Ne,this.length=Ne.length},insertData:function(Ne,Ke){this.replaceData(Ne,0,Ke)},appendChild:function(Ne){throw new Error(Z[K])},deleteData:function(Ne,Ke){this.replaceData(Ne,Ke,"")},replaceData:function(Ne,Ke,ft){var At=this.data.substring(0,Ne),un=this.data.substring(Ne+Ke);ft=At+ft+un,this.nodeValue=this.data=ft,this.length=ft.length}},y(ti,Rt);function On(){}On.prototype={nodeName:"#text",nodeType:w,splitText:function(Ne){var Ke=this.data,ft=Ke.substring(Ne);Ke=Ke.substring(0,Ne),this.data=this.nodeValue=Ke,this.length=Ke.length;var At=this.ownerDocument.createTextNode(ft);return this.parentNode&&this.parentNode.insertBefore(At,this.nextSibling),At}},y(On,ti);function Vn(){}Vn.prototype={nodeName:"#comment",nodeType:se},y(Vn,ti);function Sn(){}Sn.prototype={nodeName:"#cdata-section",nodeType:T},y(Sn,ti);function ni(){}ni.prototype.nodeType=Re,y(ni,Rt);function dr(){}dr.prototype.nodeType=j,y(dr,Rt);function _r(){}_r.prototype.nodeType=U,y(_r,Rt);function bs(){}bs.prototype.nodeType=k,y(bs,Rt);function Zr(){}Zr.prototype.nodeName="#document-fragment",Zr.prototype.nodeType=Be,y(Zr,Rt);function Zi(){}Zi.prototype.nodeType=Y,y(Zi,Rt);function dn(){}dn.prototype.serializeToString=function(Ne,Ke,ft){return Mn.call(Ne,Ke,ft)},Rt.prototype.toString=Mn;function Mn(Ne,Ke){var ft=[],At=this.nodeType==9&&this.documentElement||this,un=At.prefix,Qn=At.namespaceURI;if(Qn&&un==null){var un=At.lookupPrefix(Qn);if(un==null)var ai=[{namespace:Qn,prefix:null}]}return Un(this,ft,Ne,Ke,ai),ft.join("")}function An(Ne,Ke,ft){var At=Ne.prefix||"",un=Ne.namespaceURI;if(!un||At==="xml"&&un===n.XML||un===n.XMLNS)return!1;for(var Qn=ft.length;Qn--;){var ai=ft[Qn];if(ai.prefix===At)return ai.namespace!==un}return!0}function on(Ne,Ke,ft){Ne.push(" ",Ke,'="',ft.replace(/[<>&"\t\n\r]/g,mn),'"')}function Un(Ne,Ke,ft,At,un){if(un||(un=[]),At)if(Ne=At(Ne),Ne){if(typeof Ne=="string"){Ke.push(Ne);return}}else return;switch(Ne.nodeType){case _:var Qn=Ne.attributes,ai=Qn.length,Ni=Ne.firstChild,vi=Ne.tagName;ft=n.isHTML(Ne.namespaceURI)||ft;var Xi=vi;if(!ft&&!Ne.prefix&&Ne.namespaceURI){for(var si,cn=0;cn<Qn.length;cn++)if(Qn.item(cn).name==="xmlns"){si=Qn.item(cn).value;break}if(!si)for(var Wt=un.length-1;Wt>=0;Wt--){var Ln=un[Wt];if(Ln.prefix===""&&Ln.namespace===Ne.namespaceURI){si=Ln.namespace;break}}if(si!==Ne.namespaceURI)for(var Wt=un.length-1;Wt>=0;Wt--){var Ln=un[Wt];if(Ln.namespace===Ne.namespaceURI){Ln.prefix&&(Xi=Ln.prefix+":"+vi);break}}}Ke.push("<",Xi);for(var Nn=0;Nn<ai;Nn++){var fi=Qn.item(Nn);fi.prefix=="xmlns"?un.push({prefix:fi.localName,namespace:fi.value}):fi.nodeName=="xmlns"&&un.push({prefix:"",namespace:fi.value})}for(var Nn=0;Nn<ai;Nn++){var fi=Qn.item(Nn);if(An(fi,ft,un)){var jn=fi.prefix||"",cr=fi.namespaceURI;on(Ke,jn?"xmlns:"+jn:"xmlns",cr),un.push({prefix:jn,namespace:cr})}Un(fi,Ke,ft,At,un)}if(vi===Xi&&An(Ne,ft,un)){var jn=Ne.prefix||"",cr=Ne.namespaceURI;on(Ke,jn?"xmlns:"+jn:"xmlns",cr),un.push({prefix:jn,namespace:cr})}if(Ni||ft&&!/^(?:meta|link|img|br|hr|input)$/i.test(vi)){if(Ke.push(">"),ft&&/^script$/i.test(vi))for(;Ni;)Ni.data?Ke.push(Ni.data):Un(Ni,Ke,ft,At,un.slice()),Ni=Ni.nextSibling;else for(;Ni;)Un(Ni,Ke,ft,At,un.slice()),Ni=Ni.nextSibling;Ke.push("</",Xi,">")}else Ke.push("/>");return;case te:case Be:for(var Ni=Ne.firstChild;Ni;)Un(Ni,Ke,ft,At,un.slice()),Ni=Ni.nextSibling;return;case A:return on(Ke,Ne.name,Ne.value);case w:return Ke.push(Ne.data.replace(/[<&>]/g,mn));case T:return Ke.push("<![CDATA[",Ne.data,"]]>");case se:return Ke.push("<!--",Ne.data,"-->");case Re:var Ir=Ne.publicId,it=Ne.systemId;if(Ke.push("<!DOCTYPE ",Ne.name),Ir)Ke.push(" PUBLIC ",Ir),it&&it!="."&&Ke.push(" ",it),Ke.push(">");else if(it&&it!=".")Ke.push(" SYSTEM ",it,">");else{var Br=Ne.internalSubset;Br&&Ke.push(" [",Br,"]"),Ke.push(">")}return;case Y:return Ke.push("<?",Ne.target," ",Ne.data,"?>");case k:return Ke.push("&",Ne.nodeName,";");default:Ke.push("??",Ne.nodeName)}}function vn(Ne,Ke,ft){var At;switch(Ke.nodeType){case _:At=Ke.cloneNode(!1),At.ownerDocument=Ne;case Be:break;case A:ft=!0;break}if(At||(At=Ke.cloneNode(!1)),At.ownerDocument=Ne,At.parentNode=null,ft)for(var un=Ke.firstChild;un;)At.appendChild(vn(Ne,un,ft)),un=un.nextSibling;return At}function Hn(Ne,Ke,ft){var At=new Ke.constructor;for(var un in Ke)if(Object.prototype.hasOwnProperty.call(Ke,un)){var Qn=Ke[un];typeof Qn!="object"&&Qn!=At[un]&&(At[un]=Qn)}switch(Ke.childNodes&&(At.childNodes=new xe),At.ownerDocument=Ne,At.nodeType){case _:var ai=Ke.attributes,vi=At.attributes=new Xe,Xi=ai.length;vi._ownerElement=At;for(var si=0;si<Xi;si++)At.setAttributeNode(Hn(Ne,ai.item(si),!0));break;case A:ft=!0}if(ft)for(var cn=Ke.firstChild;cn;)At.appendChild(Hn(Ne,cn,ft)),cn=cn.nextSibling;return At}function ei(Ne,Ke,ft){Ne[Ke]=ft}try{if(Object.defineProperty){let Ne=function(Ke){switch(Ke.nodeType){case _:case Be:var ft=[];for(Ke=Ke.firstChild;Ke;)Ke.nodeType!==7&&Ke.nodeType!==8&&ft.push(Ne(Ke)),Ke=Ke.nextSibling;return ft.join("");default:return Ke.nodeValue}};var wn=Ne;Object.defineProperty(lt.prototype,"length",{get:function(){return et(this),this.$$length}}),Object.defineProperty(Rt.prototype,"textContent",{get:function(){return Ne(this)},set:function(Ke){switch(this.nodeType){case _:case Be:for(;this.firstChild;)this.removeChild(this.firstChild);(Ke||String(Ke))&&this.appendChild(this.ownerDocument.createTextNode(Ke));break;default:this.data=Ke,this.value=Ke,this.nodeValue=Ke}}}),ei=function(Ke,ft,At){Ke["$$"+ft]=At}}}catch{}return kd.DocumentType=ni,kd.DOMException=$e,kd.DOMImplementation=Et,kd.Element=Bt,kd.Node=Rt,kd.NodeList=xe,kd.XMLSerializer=dn,kd}var ay={},qx={},OL;function d9(){return OL||(OL=1,function(u){var t=ME().freeze;u.XML_ENTITIES=t({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),u.HTML_ENTITIES=t({Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",AMP:"&",amp:"&",And:"",and:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",ap:"",apacir:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",Barwed:"",barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",Because:"",because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxDL:"",boxDl:"",boxdL:"",boxdl:"",boxDR:"",boxDr:"",boxdR:"",boxdr:"",boxH:"",boxh:"",boxHD:"",boxHd:"",boxhD:"",boxhd:"",boxHU:"",boxHu:"",boxhU:"",boxhu:"",boxminus:"",boxplus:"",boxtimes:"",boxUL:"",boxUl:"",boxuL:"",boxul:"",boxUR:"",boxUr:"",boxuR:"",boxur:"",boxV:"",boxv:"",boxVH:"",boxVh:"",boxvH:"",boxvh:"",boxVL:"",boxVl:"",boxvL:"",boxvl:"",boxVR:"",boxVr:"",boxvR:"",boxvr:"",bprime:"",Breve:"",breve:"",brvbar:"",Bscr:"",bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",Cap:"",cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",CenterDot:"",centerdot:"",Cfr:"",cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",Colon:"",colon:":",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",Conint:"",conint:"",ContourIntegral:"",Copf:"",copf:"",coprod:"",Coproduct:"",COPY:"",copy:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",Cross:"",cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",Cup:"",cup:"",cupbrcap:"",CupCap:"",cupcap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",Dagger:"",dagger:"",daleth:"",Darr:"",dArr:"",darr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",DD:"",dd:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",Diamond:"",diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrow:"",Downarrow:"",downarrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",ecir:"",Ecirc:"",ecirc:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",eDot:"",edot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",Escr:"",escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",ExponentialE:"",exponentiale:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",ForAll:"",forall:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",Fscr:"",fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",gE:"",ge:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",Gg:"",gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gnE:"",gne:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",Gt:"",GT:">",gt:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",hArr:"",harr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",Hfr:"",hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",Hopf:"",hopf:"",horbar:"",HorizontalLine:"",Hscr:"",hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",Ifr:"",ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Im:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",Int:"",int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",Iscr:"",iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",Lang:"",lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",Larr:"",lArr:"",larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",lAtail:"",latail:"",late:"",lates:"",lBarr:"",lbarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",lE:"",le:"",LeftAngleBracket:"",LeftArrow:"",Leftarrow:"",leftarrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",Ll:"",ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lnE:"",lne:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",LongLeftArrow:"",Longleftarrow:"",longleftarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longleftrightarrow:"",longmapsto:"",LongRightArrow:"",Longrightarrow:"",longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",Lscr:"",lscr:"",Lsh:"",lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",Lt:"",LT:"<",lt:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",Mscr:"",mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",ne:"",nearhk:"",neArr:"",nearr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nhArr:"",nharr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlArr:"",nlarr:"",nldr:"",nlE:"",nle:"",nLeftarrow:"",nleftarrow:"",nLeftrightarrow:"",nleftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",Nopf:"",nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrArr:"",nrarr:"",nrarrc:"",nrarrw:"",nRightarrow:"",nrightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nVDash:"",nVdash:"",nvDash:"",nvdash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwArr:"",nwarr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",ocir:"",Ocirc:"",ocirc:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",Or:"",or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",Otimes:"",otimes:"",otimesas:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",Popf:"",popf:"",pound:"",Pr:"",pr:"",prap:"",prcue:"",prE:"",pre:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",Prime:"",prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",Qopf:"",qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",QUOT:'"',quot:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",Rang:"",rang:"",rangd:"",range:"",rangle:"",raquo:"",Rarr:"",rArr:"",rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",rAtail:"",ratail:"",ratio:"",rationals:"",RBarr:"",rBarr:"",rbarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",REG:"",reg:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",Rfr:"",rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrow:"",Rightarrow:"",rightarrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",Ropf:"",ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",Rscr:"",rscr:"",Rsh:"",rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",Sc:"",sc:"",scap:"",Scaron:"",scaron:"",sccue:"",scE:"",sce:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",seArr:"",searr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",sol:"/",solb:"",solbar:"",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",Square:"",square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",Sub:"",sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",Subset:"",subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",Sum:"",sum:"",sung:"",Sup:"",sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",Supset:"",supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swArr:"",swarr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",TRADE:"",trade:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",Wedge:"",wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xhArr:"",xharr:"",Xi:"",xi:"",xlArr:"",xlarr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrArr:"",xrarr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",Yuml:"",yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",Zfr:"",zfr:"",ZHcy:"",zhcy:"",zigrarr:"",Zopf:"",zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}),u.entityMap=u.HTML_ENTITIES}(qx)),qx}var IT={},FL;function f9(){if(FL)return IT;FL=1;var u=ME().NAMESPACE,t=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,n=new RegExp("[\\-\\.0-9"+t.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),r=new RegExp("^"+t.source+n.source+"*(?::"+t.source+n.source+"*)?$"),l=0,d=1,f=2,p=3,m=4,y=5,b=6,_=7;function A(K,x){this.message=K,this.locator=x,Error.captureStackTrace&&Error.captureStackTrace(this,A)}A.prototype=new Error,A.prototype.name=A.name;function w(){}w.prototype={parse:function(K,x,ue){var $e=this.domBuilder;$e.startDocument(),Re(x,x={}),T(K,x,ue,$e,this.errorHandler),$e.endDocument()}};function T(K,x,ue,$e,xe){function lt(Bt){if(Bt>65535){Bt-=65536;var sn=55296+(Bt>>10),ti=56320+(Bt&1023);return String.fromCharCode(sn,ti)}else return String.fromCharCode(Bt)}function et(Bt){var sn=Bt.slice(1,-1);return Object.hasOwnProperty.call(ue,sn)?ue[sn]:sn.charAt(0)==="#"?lt(parseInt(sn.substr(1).replace("x","0x"))):(xe.error("entity not found:"+Bt),Bt)}function Xe(Bt){if(Bt>Qe){var sn=K.substring(Qe,Bt).replace(/&#?\w+;/g,et);Rt&&ut(Qe),$e.characters(sn,0,Bt-Qe),Qe=Bt}}function ut(Bt,sn){for(;Bt>=dt&&(sn=Et.exec(K));)Dt=sn.index,dt=Dt+sn[0].length,Rt.lineNumber++;Rt.columnNumber=Bt-Dt+1}for(var Dt=0,dt=0,Et=/.*(?:\r\n?|\n)|.*$/g,Rt=$e.locator,mn=[{currentNSMap:x}],Tn={},Qe=0;;){try{var Ze=K.indexOf("<",Qe);if(Ze<0){if(!K.substr(Qe).match(/^\s*$/)){var at=$e.doc,nn=at.createTextNode(K.substr(Qe));at.appendChild(nn),$e.currentElement=nn}return}switch(Ze>Qe&&Xe(Ze),K.charAt(Ze+1)){case"/":var vt=K.indexOf(">",Ze+3),ce=K.substring(Ze+2,vt).replace(/[ \t\n\r]+$/g,""),ge=mn.pop();vt<0?(ce=K.substring(Ze+2).replace(/[\s<].*/,""),xe.error("end tag name: "+ce+" is not complete:"+ge.tagName),vt=Ze+1+ce.length):ce.match(/\s</)&&(ce=ce.replace(/[\s<].*/,""),xe.error("end tag name: "+ce+" maybe not complete"),vt=Ze+1+ce.length);var G=ge.localNSMap,ae=ge.tagName==ce,_e=ae||ge.tagName&&ge.tagName.toLowerCase()==ce.toLowerCase();if(_e){if($e.endElement(ge.uri,ge.localName,ce),G)for(var Ae in G)Object.prototype.hasOwnProperty.call(G,Ae)&&$e.endPrefixMapping(Ae);ae||xe.fatalError("end tag name: "+ce+" is not match the current start tagName:"+ge.tagName)}else mn.push(ge);vt++;break;case"?":Rt&&ut(Ze),vt=j(K,Ze,$e);break;case"!":Rt&&ut(Ze),vt=Be(K,Ze,$e,xe);break;default:Rt&&ut(Ze);var yt=new M,zt=mn[mn.length-1].currentNSMap,vt=U(K,Ze,yt,zt,et,xe),Lt=yt.length;if(!yt.closed&&te(K,vt,yt.tagName,Tn)&&(yt.closed=!0,ue.nbsp||xe.warning("unclosed xml attribute")),Rt&&Lt){for(var bt=k(Rt,{}),Mt=0;Mt<Lt;Mt++){var kt=yt[Mt];ut(kt.offset),kt.locator=k(Rt,{})}$e.locator=bt,Y(yt,$e,zt)&&mn.push(yt),$e.locator=Rt}else Y(yt,$e,zt)&&mn.push(yt);u.isHTML(yt.uri)&&!yt.closed?vt=se(K,vt,yt.tagName,et,$e):vt++}}catch(Bt){if(Bt instanceof A)throw Bt;xe.error("element parse error: "+Bt),vt=-1}vt>Qe?Qe=vt:Xe(Math.max(Ze,Qe)+1)}}function k(K,x){return x.lineNumber=K.lineNumber,x.columnNumber=K.columnNumber,x}function U(K,x,ue,$e,xe,lt){function et(Rt,mn,Tn){ue.attributeNames.hasOwnProperty(Rt)&&lt.fatalError("Attribute "+Rt+" redefined"),ue.addValue(Rt,mn.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,xe),Tn)}for(var Xe,ut,Dt=++x,dt=l;;){var Et=K.charAt(Dt);switch(Et){case"=":if(dt===d)Xe=K.slice(x,Dt),dt=p;else if(dt===f)dt=p;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(dt===p||dt===d)if(dt===d&&(lt.warning('attribute value must after "="'),Xe=K.slice(x,Dt)),x=Dt+1,Dt=K.indexOf(Et,x),Dt>0)ut=K.slice(x,Dt),et(Xe,ut,x-1),dt=y;else throw new Error("attribute value no end '"+Et+"' match");else if(dt==m)ut=K.slice(x,Dt),et(Xe,ut,x),lt.warning('attribute "'+Xe+'" missed start quot('+Et+")!!"),x=Dt+1,dt=y;else throw new Error('attribute value must after "="');break;case"/":switch(dt){case l:ue.setTagName(K.slice(x,Dt));case y:case b:case _:dt=_,ue.closed=!0;case m:case d:break;case f:ue.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return lt.error("unexpected end of input"),dt==l&&ue.setTagName(K.slice(x,Dt)),Dt;case">":switch(dt){case l:ue.setTagName(K.slice(x,Dt));case y:case b:case _:break;case m:case d:ut=K.slice(x,Dt),ut.slice(-1)==="/"&&(ue.closed=!0,ut=ut.slice(0,-1));case f:dt===f&&(ut=Xe),dt==m?(lt.warning('attribute "'+ut+'" missed quot(")!'),et(Xe,ut,x)):((!u.isHTML($e[""])||!ut.match(/^(?:disabled|checked|selected)$/i))&&lt.warning('attribute "'+ut+'" missed value!! "'+ut+'" instead!!'),et(ut,ut,x));break;case p:throw new Error("attribute value missed!!")}return Dt;case"":Et=" ";default:if(Et<=" ")switch(dt){case l:ue.setTagName(K.slice(x,Dt)),dt=b;break;case d:Xe=K.slice(x,Dt),dt=f;break;case m:var ut=K.slice(x,Dt);lt.warning('attribute "'+ut+'" missed quot(")!!'),et(Xe,ut,x);case y:dt=b;break}else switch(dt){case f:ue.tagName,(!u.isHTML($e[""])||!Xe.match(/^(?:disabled|checked|selected)$/i))&&lt.warning('attribute "'+Xe+'" missed value!! "'+Xe+'" instead2!!'),et(Xe,Xe,x),x=Dt,dt=d;break;case y:lt.warning('attribute space is required"'+Xe+'"!!');case b:dt=d,x=Dt;break;case p:dt=m,x=Dt;break;case _:throw new Error("elements closed character '/' and '>' must be connected to")}}Dt++}}function Y(K,x,ue){for(var $e=K.tagName,xe=null,Et=K.length;Et--;){var lt=K[Et],et=lt.qName,Xe=lt.value,Rt=et.indexOf(":");if(Rt>0)var ut=lt.prefix=et.slice(0,Rt),Dt=et.slice(Rt+1),dt=ut==="xmlns"&&Dt;else Dt=et,ut=null,dt=et==="xmlns"&&"";lt.localName=Dt,dt!==!1&&(xe==null&&(xe={},Re(ue,ue={})),ue[dt]=xe[dt]=Xe,lt.uri=u.XMLNS,x.startPrefixMapping(dt,Xe))}for(var Et=K.length;Et--;){lt=K[Et];var ut=lt.prefix;ut&&(ut==="xml"&&(lt.uri=u.XML),ut!=="xmlns"&&(lt.uri=ue[ut||""]))}var Rt=$e.indexOf(":");Rt>0?(ut=K.prefix=$e.slice(0,Rt),Dt=K.localName=$e.slice(Rt+1)):(ut=null,Dt=K.localName=$e);var mn=K.uri=ue[ut||""];if(x.startElement(mn,Dt,$e,K),K.closed){if(x.endElement(mn,Dt,$e),xe)for(ut in xe)Object.prototype.hasOwnProperty.call(xe,ut)&&x.endPrefixMapping(ut)}else return K.currentNSMap=ue,K.localNSMap=xe,!0}function se(K,x,ue,$e,xe){if(/^(?:script|textarea)$/i.test(ue)){var lt=K.indexOf("</"+ue+">",x),et=K.substring(x+1,lt);if(/[&<]/.test(et))return/^script$/i.test(ue)?(xe.characters(et,0,et.length),lt):(et=et.replace(/&#?\w+;/g,$e),xe.characters(et,0,et.length),lt)}return x+1}function te(K,x,ue,$e){var xe=$e[ue];return xe==null&&(xe=K.lastIndexOf("</"+ue+">"),xe<x&&(xe=K.lastIndexOf("</"+ue)),$e[ue]=xe),xe<x}function Re(K,x){for(var ue in K)Object.prototype.hasOwnProperty.call(K,ue)&&(x[ue]=K[ue])}function Be(K,x,ue,$e){var xe=K.charAt(x+2);switch(xe){case"-":if(K.charAt(x+3)==="-"){var lt=K.indexOf("-->",x+4);return lt>x?(ue.comment(K,x+4,lt-x-4),lt+3):($e.error("Unclosed comment"),-1)}else return-1;default:if(K.substr(x+3,6)=="CDATA["){var lt=K.indexOf("]]>",x+9);return ue.startCDATA(),ue.characters(K,x+9,lt-x-9),ue.endCDATA(),lt+3}var et=Z(K,x),Xe=et.length;if(Xe>1&&/!doctype/i.test(et[0][0])){var ut=et[1][0],Dt=!1,dt=!1;Xe>3&&(/^public$/i.test(et[2][0])?(Dt=et[3][0],dt=Xe>4&&et[4][0]):/^system$/i.test(et[2][0])&&(dt=et[3][0]));var Et=et[Xe-1];return ue.startDTD(ut,Dt,dt),ue.endDTD(),Et.index+Et[0].length}}return-1}function j(K,x,ue){var $e=K.indexOf("?>",x);if($e){var xe=K.substring(x,$e).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return xe?(xe[0].length,ue.processingInstruction(xe[1],xe[2]),$e+2):-1}return-1}function M(){this.attributeNames={}}M.prototype={setTagName:function(K){if(!r.test(K))throw new Error("invalid tagName:"+K);this.tagName=K},addValue:function(K,x,ue){if(!r.test(K))throw new Error("invalid attribute:"+K);this.attributeNames[K]=this.length,this[this.length++]={qName:K,value:x,offset:ue}},length:0,getLocalName:function(K){return this[K].localName},getLocator:function(K){return this[K].locator},getQName:function(K){return this[K].qName},getURI:function(K){return this[K].uri},getValue:function(K){return this[K].value}};function Z(K,x){var ue,$e=[],xe=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(xe.lastIndex=x,xe.exec(K);ue=xe.exec(K);)if($e.push(ue),ue[1])return $e}return IT.XMLReader=w,IT.ParseError=A,IT}var UL;function h9(){if(UL)return ay;UL=1;var u=ME(),t=UN(),n=d9(),r=f9(),l=t.DOMImplementation,d=u.NAMESPACE,f=r.ParseError,p=r.XMLReader;function m(U){return U.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function y(U){this.options=U||{locator:{}}}y.prototype.parseFromString=function(U,Y){var se=this.options,te=new p,Re=se.domBuilder||new _,Be=se.errorHandler,j=se.locator,M=se.xmlns||{},Z=/\/x?html?$/.test(Y),K=Z?n.HTML_ENTITIES:n.XML_ENTITIES;j&&Re.setDocumentLocator(j),te.errorHandler=b(Be,Re,j),te.domBuilder=se.domBuilder||Re,Z&&(M[""]=d.HTML),M.xml=M.xml||d.XML;var x=se.normalizeLineEndings||m;return U&&typeof U=="string"?te.parse(x(U),M,K):te.errorHandler.error("invalid doc source"),Re.doc};function b(U,Y,se){if(!U){if(Y instanceof _)return Y;U=Y}var te={},Re=U instanceof Function;se=se||{};function Be(j){var M=U[j];!M&&Re&&(M=U.length==2?function(Z){U(j,Z)}:U),te[j]=M&&function(Z){M("[xmldom "+j+"]	"+Z+w(se))}||function(){}}return Be("warning"),Be("error"),Be("fatalError"),te}function _(){this.cdata=!1}function A(U,Y){Y.lineNumber=U.lineNumber,Y.columnNumber=U.columnNumber}_.prototype={startDocument:function(){this.doc=new l().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(U,Y,se,te){var Re=this.doc,Be=Re.createElementNS(U,se||Y),j=te.length;k(this,Be),this.currentElement=Be,this.locator&&A(this.locator,Be);for(var M=0;M<j;M++){var U=te.getURI(M),Z=te.getValue(M),se=te.getQName(M),K=Re.createAttributeNS(U,se);this.locator&&A(te.getLocator(M),K),K.value=K.nodeValue=Z,Be.setAttributeNode(K)}},endElement:function(U,Y,se){var te=this.currentElement;te.tagName,this.currentElement=te.parentNode},startPrefixMapping:function(U,Y){},endPrefixMapping:function(U){},processingInstruction:function(U,Y){var se=this.doc.createProcessingInstruction(U,Y);this.locator&&A(this.locator,se),k(this,se)},ignorableWhitespace:function(U,Y,se){},characters:function(U,Y,se){if(U=T.apply(this,arguments),U){if(this.cdata)var te=this.doc.createCDATASection(U);else var te=this.doc.createTextNode(U);this.currentElement?this.currentElement.appendChild(te):/^\s*$/.test(U)&&this.doc.appendChild(te),this.locator&&A(this.locator,te)}},skippedEntity:function(U){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(U){(this.locator=U)&&(U.lineNumber=0)},comment:function(U,Y,se){U=T.apply(this,arguments);var te=this.doc.createComment(U);this.locator&&A(this.locator,te),k(this,te)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(U,Y,se){var te=this.doc.implementation;if(te&&te.createDocumentType){var Re=te.createDocumentType(U,Y,se);this.locator&&A(this.locator,Re),k(this,Re),this.doc.doctype=Re}},warning:function(U){console.warn("[xmldom warning]	"+U,w(this.locator))},error:function(U){console.error("[xmldom error]	"+U,w(this.locator))},fatalError:function(U){throw new f(U,this.locator)}};function w(U){if(U)return`
@`+(U.systemId||"")+"#[line:"+U.lineNumber+",col:"+U.columnNumber+"]"}function T(U,Y,se){return typeof U=="string"?U.substr(Y,se):U.length>=Y+se||Y?new java.lang.String(U,Y,se)+"":U}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(U){_.prototype[U]=function(){return null}});function k(U,Y){U.currentElement?U.currentElement.appendChild(Y):U.doc.appendChild(Y)}return ay.__DOMHandler=_,ay.normalizeLineEndings=m,ay.DOMParser=y,ay}var BL;function p9(){if(BL)return sy;BL=1;var u=UN();return sy.DOMImplementation=u.DOMImplementation,sy.XMLSerializer=u.XMLSerializer,sy.DOMParser=h9().DOMParser,sy}var g9=p9();/*! @name mpd-parser @version 1.3.1 @license Apache-2.0 */const zL=u=>!!u&&typeof u=="object",Ga=(...u)=>u.reduce((t,n)=>(typeof n!="object"||Object.keys(n).forEach(r=>{Array.isArray(t[r])&&Array.isArray(n[r])?t[r]=t[r].concat(n[r]):zL(t[r])&&zL(n[r])?t[r]=Ga(t[r],n[r]):t[r]=n[r]}),t),{}),BN=u=>Object.keys(u).map(t=>u[t]),m9=(u,t)=>{const n=[];for(let r=u;r<t;r++)n.push(r);return n},bg=u=>u.reduce((t,n)=>t.concat(n),[]),zN=u=>{if(!u.length)return[];const t=[];for(let n=0;n<u.length;n++)t.push(u[n]);return t},y9=(u,t)=>u.reduce((n,r,l)=>(r[t]&&n.push(l),n),[]),v9=(u,t)=>BN(u.reduce((n,r)=>(r.forEach(l=>{n[t(l)]=l}),n),{}));var _g={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"};const My=({baseUrl:u="",source:t="",range:n="",indexRange:r=""})=>{const l={uri:t,resolvedUri:PE(u||"",t)};if(n||r){const f=(n||r).split("-");let p=St.BigInt?St.BigInt(f[0]):parseInt(f[0],10),m=St.BigInt?St.BigInt(f[1]):parseInt(f[1],10);p<Number.MAX_SAFE_INTEGER&&typeof p=="bigint"&&(p=Number(p)),m<Number.MAX_SAFE_INTEGER&&typeof m=="bigint"&&(m=Number(m));let y;typeof m=="bigint"||typeof p=="bigint"?y=St.BigInt(m)-St.BigInt(p)+St.BigInt(1):y=m-p+1,typeof y=="bigint"&&y<Number.MAX_SAFE_INTEGER&&(y=Number(y)),l.byterange={length:y,offset:p}}return l},T9=u=>{let t;return typeof u.offset=="bigint"||typeof u.length=="bigint"?t=St.BigInt(u.offset)+St.BigInt(u.length)-St.BigInt(1):t=u.offset+u.length-1,`${u.offset}-${t}`},jL=u=>(u&&typeof u!="number"&&(u=parseInt(u,10)),isNaN(u)?null:u),E9={static(u){const{duration:t,timescale:n=1,sourceDuration:r,periodDuration:l}=u,d=jL(u.endNumber),f=t/n;return typeof d=="number"?{start:0,end:d}:typeof l=="number"?{start:0,end:l/f}:{start:0,end:r/f}},dynamic(u){const{NOW:t,clientOffset:n,availabilityStartTime:r,timescale:l=1,duration:d,periodStart:f=0,minimumUpdatePeriod:p=0,timeShiftBufferDepth:m=1/0}=u,y=jL(u.endNumber),b=(t+n)/1e3,_=r+f,w=b+p-_,T=Math.ceil(w*l/d),k=Math.floor((b-_-m)*l/d),U=Math.floor((b-_)*l/d);return{start:Math.max(0,k),end:typeof y=="number"?y:Math.min(T,U)}}},b9=u=>t=>{const{duration:n,timescale:r=1,periodStart:l,startNumber:d=1}=u;return{number:d+t,duration:n/r,timeline:l,time:t*n}},kw=u=>{const{type:t,duration:n,timescale:r=1,periodDuration:l,sourceDuration:d}=u,{start:f,end:p}=E9[t](u),m=m9(f,p).map(b9(u));if(t==="static"){const y=m.length-1,b=typeof l=="number"?l:d;m[y].duration=b-n/r*y}return m},jN=u=>{const{baseUrl:t,initialization:n={},sourceDuration:r,indexRange:l="",periodStart:d,presentationTime:f,number:p=0,duration:m}=u;if(!t)throw new Error(_g.NO_BASE_URL);const y=My({baseUrl:t,source:n.sourceURL,range:n.range}),b=My({baseUrl:t,source:t,indexRange:l});if(b.map=y,m){const _=kw(u);_.length&&(b.duration=_[0].duration,b.timeline=_[0].timeline)}else r&&(b.duration=r,b.timeline=d);return b.presentationTime=f||d,b.number=p,[b]},Dw=(u,t,n)=>{const r=u.sidx.map?u.sidx.map:null,l=u.sidx.duration,d=u.timeline||0,f=u.sidx.byterange,p=f.offset+f.length,m=t.timescale,y=t.references.filter(U=>U.referenceType!==1),b=[],_=u.endList?"static":"dynamic",A=u.sidx.timeline;let w=A,T=u.mediaSequence||0,k;typeof t.firstOffset=="bigint"?k=St.BigInt(p)+t.firstOffset:k=p+t.firstOffset;for(let U=0;U<y.length;U++){const Y=t.references[U],se=Y.referencedSize,te=Y.subsegmentDuration;let Re;typeof k=="bigint"?Re=k+St.BigInt(se)-St.BigInt(1):Re=k+se-1;const Be=`${k}-${Re}`,M=jN({baseUrl:n,timescale:m,timeline:d,periodStart:A,presentationTime:w,number:T,duration:te,sourceDuration:l,indexRange:Be,type:_})[0];r&&(M.map=r),b.push(M),typeof k=="bigint"?k+=St.BigInt(se):k+=se,w+=te/m,T++}return u.segments=b,u},_9=["AUDIO","SUBTITLES"],S9=1/60,qN=u=>v9(u,({timeline:t})=>t).sort((t,n)=>t.timeline>n.timeline?1:-1),x9=(u,t)=>{for(let n=0;n<u.length;n++)if(u[n].attributes.NAME===t)return u[n];return null},qL=u=>{let t=[];return c9(u,_9,(n,r,l,d)=>{t=t.concat(n.playlists||[])}),t},HL=({playlist:u,mediaSequence:t})=>{u.mediaSequence=t,u.segments.forEach((n,r)=>{n.number=u.mediaSequence+r})},A9=({oldPlaylists:u,newPlaylists:t,timelineStarts:n})=>{t.forEach(r=>{r.discontinuitySequence=n.findIndex(function({timeline:m}){return m===r.timeline});const l=x9(u,r.attributes.NAME);if(!l||r.sidx)return;const d=r.segments[0],f=l.segments.findIndex(function(m){return Math.abs(m.presentationTime-d.presentationTime)<S9});if(f===-1){HL({playlist:r,mediaSequence:l.mediaSequence+l.segments.length}),r.segments[0].discontinuity=!0,r.discontinuityStarts.unshift(0),(!l.segments.length&&r.timeline>l.timeline||l.segments.length&&r.timeline>l.segments[l.segments.length-1].timeline)&&r.discontinuitySequence--;return}l.segments[f].discontinuity&&!d.discontinuity&&(d.discontinuity=!0,r.discontinuityStarts.unshift(0),r.discontinuitySequence--),HL({playlist:r,mediaSequence:l.segments[f].number})})},w9=({oldManifest:u,newManifest:t})=>{const n=u.playlists.concat(qL(u)),r=t.playlists.concat(qL(t));return t.timelineStarts=qN([u.timelineStarts,t.timelineStarts]),A9({oldPlaylists:n,newPlaylists:r,timelineStarts:t.timelineStarts}),t},NE=u=>u&&u.uri+"-"+T9(u.byterange),Hx=u=>{const t=u.reduce(function(r,l){return r[l.attributes.baseUrl]||(r[l.attributes.baseUrl]=[]),r[l.attributes.baseUrl].push(l),r},{});let n=[];return Object.values(t).forEach(r=>{const l=BN(r.reduce((d,f)=>{const p=f.attributes.id+(f.attributes.lang||"");return d[p]?(f.segments&&(f.segments[0]&&(f.segments[0].discontinuity=!0),d[p].segments.push(...f.segments)),f.attributes.contentProtection&&(d[p].attributes.contentProtection=f.attributes.contentProtection)):(d[p]=f,d[p].attributes.timelineStarts=[]),d[p].attributes.timelineStarts.push({start:f.attributes.periodStart,timeline:f.attributes.periodStart}),d},{}));n=n.concat(l)}),n.map(r=>(r.discontinuityStarts=y9(r.segments||[],"discontinuity"),r))},Rw=(u,t)=>{const n=NE(u.sidx),r=n&&t[n]&&t[n].sidx;return r&&Dw(u,r,u.sidx.resolvedUri),u},I9=(u,t={})=>{if(!Object.keys(t).length)return u;for(const n in u)u[n]=Rw(u[n],t);return u},C9=({attributes:u,segments:t,sidx:n,mediaSequence:r,discontinuitySequence:l,discontinuityStarts:d},f)=>{const p={attributes:{NAME:u.id,BANDWIDTH:u.bandwidth,CODECS:u.codecs,"PROGRAM-ID":1},uri:"",endList:u.type==="static",timeline:u.periodStart,resolvedUri:u.baseUrl||"",targetDuration:u.duration,discontinuitySequence:l,discontinuityStarts:d,timelineStarts:u.timelineStarts,mediaSequence:r,segments:t};return u.contentProtection&&(p.contentProtection=u.contentProtection),u.serviceLocation&&(p.attributes.serviceLocation=u.serviceLocation),n&&(p.sidx=n),f&&(p.attributes.AUDIO="audio",p.attributes.SUBTITLES="subs"),p},k9=({attributes:u,segments:t,mediaSequence:n,discontinuityStarts:r,discontinuitySequence:l})=>{typeof t>"u"&&(t=[{uri:u.baseUrl,timeline:u.periodStart,resolvedUri:u.baseUrl||"",duration:u.sourceDuration,number:0}],u.duration=u.sourceDuration);const d={NAME:u.id,BANDWIDTH:u.bandwidth,"PROGRAM-ID":1};u.codecs&&(d.CODECS=u.codecs);const f={attributes:d,uri:"",endList:u.type==="static",timeline:u.periodStart,resolvedUri:u.baseUrl||"",targetDuration:u.duration,timelineStarts:u.timelineStarts,discontinuityStarts:r,discontinuitySequence:l,mediaSequence:n,segments:t};return u.serviceLocation&&(f.attributes.serviceLocation=u.serviceLocation),f},D9=(u,t={},n=!1)=>{let r;const l=u.reduce((d,f)=>{const p=f.attributes.role&&f.attributes.role.value||"",m=f.attributes.lang||"";let y=f.attributes.label||"main";if(m&&!f.attributes.label){const _=p?` (${p})`:"";y=`${f.attributes.lang}${_}`}d[y]||(d[y]={language:m,autoselect:!0,default:p==="main",playlists:[],uri:""});const b=Rw(C9(f,n),t);return d[y].playlists.push(b),typeof r>"u"&&p==="main"&&(r=f,r.default=!0),d},{});if(!r){const d=Object.keys(l)[0];l[d].default=!0}return l},R9=(u,t={})=>u.reduce((n,r)=>{const l=r.attributes.label||r.attributes.lang||"text",d=r.attributes.lang||"und";return n[l]||(n[l]={language:d,default:!1,autoselect:!1,playlists:[],uri:""}),n[l].playlists.push(Rw(k9(r),t)),n},{}),L9=u=>u.reduce((t,n)=>(n&&n.forEach(r=>{const{channel:l,language:d}=r;t[d]={autoselect:!1,default:!1,instreamId:l,language:d},r.hasOwnProperty("aspectRatio")&&(t[d].aspectRatio=r.aspectRatio),r.hasOwnProperty("easyReader")&&(t[d].easyReader=r.easyReader),r.hasOwnProperty("3D")&&(t[d]["3D"]=r["3D"])}),t),{}),P9=({attributes:u,segments:t,sidx:n,discontinuityStarts:r})=>{const l={attributes:{NAME:u.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:u.width,height:u.height},CODECS:u.codecs,BANDWIDTH:u.bandwidth,"PROGRAM-ID":1},uri:"",endList:u.type==="static",timeline:u.periodStart,resolvedUri:u.baseUrl||"",targetDuration:u.duration,discontinuityStarts:r,timelineStarts:u.timelineStarts,segments:t};return u.frameRate&&(l.attributes["FRAME-RATE"]=u.frameRate),u.contentProtection&&(l.contentProtection=u.contentProtection),u.serviceLocation&&(l.attributes.serviceLocation=u.serviceLocation),n&&(l.sidx=n),l},M9=({attributes:u})=>u.mimeType==="video/mp4"||u.mimeType==="video/webm"||u.contentType==="video",N9=({attributes:u})=>u.mimeType==="audio/mp4"||u.mimeType==="audio/webm"||u.contentType==="audio",O9=({attributes:u})=>u.mimeType==="text/vtt"||u.contentType==="text",F9=(u,t)=>{u.forEach(n=>{n.mediaSequence=0,n.discontinuitySequence=t.findIndex(function({timeline:r}){return r===n.timeline}),n.segments&&n.segments.forEach((r,l)=>{r.number=l})})},GL=u=>u?Object.keys(u).reduce((t,n)=>{const r=u[n];return t.concat(r.playlists)},[]):[],U9=({dashPlaylists:u,locations:t,contentSteering:n,sidxMapping:r={},previousManifest:l,eventStream:d})=>{if(!u.length)return{};const{sourceDuration:f,type:p,suggestedPresentationDelay:m,minimumUpdatePeriod:y}=u[0].attributes,b=Hx(u.filter(M9)).map(P9),_=Hx(u.filter(N9)),A=Hx(u.filter(O9)),w=u.map(Re=>Re.attributes.captionServices).filter(Boolean),T={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:"",duration:f,playlists:I9(b,r)};y>=0&&(T.minimumUpdatePeriod=y*1e3),t&&(T.locations=t),n&&(T.contentSteering=n),p==="dynamic"&&(T.suggestedPresentationDelay=m),d&&d.length>0&&(T.eventStream=d);const k=T.playlists.length===0,U=_.length?D9(_,r,k):null,Y=A.length?R9(A,r):null,se=b.concat(GL(U),GL(Y)),te=se.map(({timelineStarts:Re})=>Re);return T.timelineStarts=qN(te),F9(se,T.timelineStarts),U&&(T.mediaGroups.AUDIO.audio=U),Y&&(T.mediaGroups.SUBTITLES.subs=Y),w.length&&(T.mediaGroups["CLOSED-CAPTIONS"].cc=L9(w)),l?w9({oldManifest:l,newManifest:T}):T},B9=(u,t,n)=>{const{NOW:r,clientOffset:l,availabilityStartTime:d,timescale:f=1,periodStart:p=0,minimumUpdatePeriod:m=0}=u,y=(r+l)/1e3,b=d+p,A=y+m-b;return Math.ceil((A*f-t)/n)},HN=(u,t)=>{const{type:n,minimumUpdatePeriod:r=0,media:l="",sourceDuration:d,timescale:f=1,startNumber:p=1,periodStart:m}=u,y=[];let b=-1;for(let _=0;_<t.length;_++){const A=t[_],w=A.d,T=A.r||0,k=A.t||0;b<0&&(b=k),k&&k>b&&(b=k);let U;if(T<0){const te=_+1;te===t.length?n==="dynamic"&&r>0&&l.indexOf("$Number$")>0?U=B9(u,b,w):U=(d*f-b)/w:U=(t[te].t-b)/w}else U=T+1;const Y=p+y.length+U;let se=p+y.length;for(;se<Y;)y.push({number:se,duration:w/f,time:b,timeline:m}),b+=w,se++}return y},z9=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,j9=u=>(t,n,r,l)=>{if(t==="$$")return"$";if(typeof u[n]>"u")return t;const d=""+u[n];return n==="RepresentationID"||(r?l=parseInt(l,10):l=1,d.length>=l)?d:`${new Array(l-d.length+1).join("0")}${d}`},VL=(u,t)=>u.replace(z9,j9(t)),q9=(u,t)=>!u.duration&&!t?[{number:u.startNumber||1,duration:u.sourceDuration,time:0,timeline:u.periodStart}]:u.duration?kw(u):HN(u,t),H9=(u,t)=>{const n={RepresentationID:u.id,Bandwidth:u.bandwidth||0},{initialization:r={sourceURL:"",range:""}}=u,l=My({baseUrl:u.baseUrl,source:VL(r.sourceURL,n),range:r.range});return q9(u,t).map(f=>{n.Number=f.number,n.Time=f.time;const p=VL(u.media||"",n),m=u.timescale||1,y=u.presentationTimeOffset||0,b=u.periodStart+(f.time-y)/m;return{uri:p,timeline:f.timeline,duration:f.duration,resolvedUri:PE(u.baseUrl||"",p),map:l,number:f.number,presentationTime:b}})},G9=(u,t)=>{const{baseUrl:n,initialization:r={}}=u,l=My({baseUrl:n,source:r.sourceURL,range:r.range}),d=My({baseUrl:n,source:t.media,range:t.mediaRange});return d.map=l,d},V9=(u,t)=>{const{duration:n,segmentUrls:r=[],periodStart:l}=u;if(!n&&!t||n&&t)throw new Error(_g.SEGMENT_TIME_UNSPECIFIED);const d=r.map(m=>G9(u,m));let f;return n&&(f=kw(u)),t&&(f=HN(u,t)),f.map((m,y)=>{if(d[y]){const b=d[y],_=u.timescale||1,A=u.presentationTimeOffset||0;return b.timeline=m.timeline,b.duration=m.duration,b.number=m.number,b.presentationTime=l+(m.time-A)/_,b}}).filter(m=>m)},$9=({attributes:u,segmentInfo:t})=>{let n,r;t.template?(r=H9,n=Ga(u,t.template)):t.base?(r=jN,n=Ga(u,t.base)):t.list&&(r=V9,n=Ga(u,t.list));const l={attributes:u};if(!r)return l;const d=r(n,t.segmentTimeline);if(n.duration){const{duration:f,timescale:p=1}=n;n.duration=f/p}else d.length?n.duration=d.reduce((f,p)=>Math.max(f,Math.ceil(p.duration)),0):n.duration=0;return l.attributes=n,l.segments=d,t.base&&n.indexRange&&(l.sidx=d[0],l.segments=[]),l},K9=u=>u.map($9),Fs=(u,t)=>zN(u.childNodes).filter(({tagName:n})=>n===t),qy=u=>u.textContent.trim(),Y9=u=>parseFloat(u.split("/").reduce((t,n)=>t/n)),Xp=u=>{const p=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(u);if(!p)return 0;const[m,y,b,_,A,w]=p.slice(1);return parseFloat(m||0)*31536e3+parseFloat(y||0)*2592e3+parseFloat(b||0)*86400+parseFloat(_||0)*3600+parseFloat(A||0)*60+parseFloat(w||0)},W9=u=>(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(u)&&(u+="Z"),Date.parse(u)),$L={mediaPresentationDuration(u){return Xp(u)},availabilityStartTime(u){return W9(u)/1e3},minimumUpdatePeriod(u){return Xp(u)},suggestedPresentationDelay(u){return Xp(u)},type(u){return u},timeShiftBufferDepth(u){return Xp(u)},start(u){return Xp(u)},width(u){return parseInt(u,10)},height(u){return parseInt(u,10)},bandwidth(u){return parseInt(u,10)},frameRate(u){return Y9(u)},startNumber(u){return parseInt(u,10)},timescale(u){return parseInt(u,10)},presentationTimeOffset(u){return parseInt(u,10)},duration(u){const t=parseInt(u,10);return isNaN(t)?Xp(u):t},d(u){return parseInt(u,10)},t(u){return parseInt(u,10)},r(u){return parseInt(u,10)},presentationTime(u){return parseInt(u,10)},DEFAULT(u){return u}},ya=u=>u&&u.attributes?zN(u.attributes).reduce((t,n)=>{const r=$L[n.name]||$L.DEFAULT;return t[n.name]=r(n.value),t},{}):{},X9={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime","urn:mpeg:dash:mp4protection:2011":"mp4protection"},OE=(u,t)=>t.length?bg(u.map(function(n){return t.map(function(r){const l=qy(r),d=PE(n.baseUrl,l),f=Ga(ya(r),{baseUrl:d});return d!==l&&!f.serviceLocation&&n.serviceLocation&&(f.serviceLocation=n.serviceLocation),f})})):u,Lw=u=>{const t=Fs(u,"SegmentTemplate")[0],n=Fs(u,"SegmentList")[0],r=n&&Fs(n,"SegmentURL").map(_=>Ga({tag:"SegmentURL"},ya(_))),l=Fs(u,"SegmentBase")[0],d=n||t,f=d&&Fs(d,"SegmentTimeline")[0],p=n||l||t,m=p&&Fs(p,"Initialization")[0],y=t&&ya(t);y&&m?y.initialization=m&&ya(m):y&&y.initialization&&(y.initialization={sourceURL:y.initialization});const b={template:y,segmentTimeline:f&&Fs(f,"S").map(_=>ya(_)),list:n&&Ga(ya(n),{segmentUrls:r,initialization:ya(m)}),base:l&&Ga(ya(l),{initialization:ya(m)})};return Object.keys(b).forEach(_=>{b[_]||delete b[_]}),b},Q9=(u,t,n)=>r=>{const l=Fs(r,"BaseURL"),d=OE(t,l),f=Ga(u,ya(r)),p=Lw(r);return d.map(m=>({segmentInfo:Ga(n,p),attributes:Ga(f,m)}))},J9=u=>u.reduce((t,n)=>{const r=ya(n);r.schemeIdUri&&(r.schemeIdUri=r.schemeIdUri.toLowerCase());const l=X9[r.schemeIdUri];if(l){t[l]={attributes:r};const d=Fs(n,"cenc:pssh")[0];if(d){const f=qy(d);t[l].pssh=f&&LN(f)}}return t},{}),Z9=u=>{if(u.schemeIdUri==="urn:scte:dash:cc:cea-608:2015")return(typeof u.value!="string"?[]:u.value.split(";")).map(n=>{let r,l;return l=n,/^CC\d=/.test(n)?[r,l]=n.split("="):/^CC\d$/.test(n)&&(r=n),{channel:r,language:l}});if(u.schemeIdUri==="urn:scte:dash:cc:cea-708:2015")return(typeof u.value!="string"?[]:u.value.split(";")).map(n=>{const r={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(n)){const[l,d=""]=n.split("=");r.channel=l,r.language=n,d.split(",").forEach(f=>{const[p,m]=f.split(":");p==="lang"?r.language=m:p==="er"?r.easyReader=Number(m):p==="war"?r.aspectRatio=Number(m):p==="3D"&&(r["3D"]=Number(m))})}else r.language=n;return r.channel&&(r.channel="SERVICE"+r.channel),r})},e$=u=>bg(Fs(u.node,"EventStream").map(t=>{const n=ya(t),r=n.schemeIdUri;return Fs(t,"Event").map(l=>{const d=ya(l),f=d.presentationTime||0,p=n.timescale||1,m=d.duration||0,y=f/p+u.attributes.start;return{schemeIdUri:r,value:n.value,id:d.id,start:y,end:y+m/p,messageData:qy(l)||d.messageData,contentEncoding:n.contentEncoding,presentationTimeOffset:n.presentationTimeOffset||0}})})),t$=(u,t,n)=>r=>{const l=ya(r),d=OE(t,Fs(r,"BaseURL")),f=Fs(r,"Role")[0],p={role:ya(f)};let m=Ga(u,l,p);const y=Fs(r,"Accessibility")[0],b=Z9(ya(y));b&&(m=Ga(m,{captionServices:b}));const _=Fs(r,"Label")[0];if(_&&_.childNodes.length){const U=_.childNodes[0].nodeValue.trim();m=Ga(m,{label:U})}const A=J9(Fs(r,"ContentProtection"));Object.keys(A).length&&(m=Ga(m,{contentProtection:A}));const w=Lw(r),T=Fs(r,"Representation"),k=Ga(n,w);return bg(T.map(Q9(m,d,k)))},n$=(u,t)=>(n,r)=>{const l=OE(t,Fs(n.node,"BaseURL")),d=Ga(u,{periodStart:n.attributes.start});typeof n.attributes.duration=="number"&&(d.periodDuration=n.attributes.duration);const f=Fs(n.node,"AdaptationSet"),p=Lw(n.node);return bg(f.map(t$(d,l,p)))},i$=(u,t)=>{if(u.length>1&&t({type:"warn",message:"The MPD manifest should contain no more than one ContentSteering tag"}),!u.length)return null;const n=Ga({serverURL:qy(u[0])},ya(u[0]));return n.queryBeforeStart=n.queryBeforeStart==="true",n},r$=({attributes:u,priorPeriodAttributes:t,mpdType:n})=>typeof u.start=="number"?u.start:t&&typeof t.start=="number"&&typeof t.duration=="number"?t.start+t.duration:!t&&n==="static"?0:null,s$=(u,t={})=>{const{manifestUri:n="",NOW:r=Date.now(),clientOffset:l=0,eventHandler:d=function(){}}=t,f=Fs(u,"Period");if(!f.length)throw new Error(_g.INVALID_NUMBER_OF_PERIOD);const p=Fs(u,"Location"),m=ya(u),y=OE([{baseUrl:n}],Fs(u,"BaseURL")),b=Fs(u,"ContentSteering");m.type=m.type||"static",m.sourceDuration=m.mediaPresentationDuration||0,m.NOW=r,m.clientOffset=l,p.length&&(m.locations=p.map(qy));const _=[];return f.forEach((A,w)=>{const T=ya(A),k=_[w-1];T.start=r$({attributes:T,priorPeriodAttributes:k?k.attributes:null,mpdType:m.type}),_.push({node:A,attributes:T})}),{locations:m.locations,contentSteeringInfo:i$(b,d),representationInfo:bg(_.map(n$(m,y))),eventStream:bg(_.map(e$))}},GN=u=>{if(u==="")throw new Error(_g.DASH_EMPTY_MANIFEST);const t=new g9.DOMParser;let n,r;try{n=t.parseFromString(u,"application/xml"),r=n&&n.documentElement.tagName==="MPD"?n.documentElement:null}catch{}if(!r||r&&r.getElementsByTagName("parsererror").length>0)throw new Error(_g.DASH_INVALID_XML);return r},a$=u=>{const t=Fs(u,"UTCTiming")[0];if(!t)return null;const n=ya(t);switch(n.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":n.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":n.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":n.method="DIRECT",n.value=Date.parse(n.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(_g.UNSUPPORTED_UTC_TIMING_SCHEME)}return n},o$=(u,t={})=>{const n=s$(GN(u),t),r=K9(n.representationInfo);return U9({dashPlaylists:r,locations:n.locations,contentSteering:n.contentSteeringInfo,sidxMapping:t.sidxMapping,previousManifest:t.previousManifest,eventStream:n.eventStream})},l$=u=>a$(GN(u));var Gx,KL;function u$(){if(KL)return Gx;KL=1;var u=Math.pow(2,32),t=function(n){var r=new DataView(n.buffer,n.byteOffset,n.byteLength),l;return r.getBigUint64?(l=r.getBigUint64(0),l<Number.MAX_SAFE_INTEGER?Number(l):l):r.getUint32(0)*u+r.getUint32(4)};return Gx={getUint64:t,MAX_UINT32:u},Gx}var Vx,YL;function c$(){if(YL)return Vx;YL=1;var u=u$().getUint64,t=function(n){var r=new DataView(n.buffer,n.byteOffset,n.byteLength),l={version:n[0],flags:new Uint8Array(n.subarray(1,4)),references:[],referenceId:r.getUint32(4),timescale:r.getUint32(8)},d=12;l.version===0?(l.earliestPresentationTime=r.getUint32(d),l.firstOffset=r.getUint32(d+4),d+=8):(l.earliestPresentationTime=u(n.subarray(d)),l.firstOffset=u(n.subarray(d+8)),d+=16),d+=2;var f=r.getUint16(d);for(d+=2;f>0;d+=12,f--)l.references.push({referenceType:(n[d]&128)>>>7,referencedSize:r.getUint32(d)&2147483647,subsegmentDuration:r.getUint32(d+4),startsWithSap:!!(n[d+8]&128),sapType:(n[d+8]&112)>>>4,sapDeltaTime:r.getUint32(d+8)&268435455});return l};return Vx=t,Vx}var d$=c$();const f$=Lg(d$);var h$=ir([73,68,51]),p$=function(t,n){n===void 0&&(n=0),t=ir(t);var r=t[n+5],l=t[n+6]<<21|t[n+7]<<14|t[n+8]<<7|t[n+9],d=(r&16)>>4;return d?l+20:l+10},dy=function u(t,n){return n===void 0&&(n=0),t=ir(t),t.length-n<10||!Os(t,h$,{offset:n})?n:(n+=p$(t,n),u(t,n))},WL=function(t){return typeof t=="string"?FN(t):t},g$=function(t){return Array.isArray(t)?t.map(function(n){return WL(n)}):[WL(t)]},m$=function u(t,n,r){r===void 0&&(r=!1),n=g$(n),t=ir(t);var l=[];if(!n.length)return l;for(var d=0;d<t.length;){var f=(t[d]<<24|t[d+1]<<16|t[d+2]<<8|t[d+3])>>>0,p=t.subarray(d+4,d+8);if(f===0)break;var m=d+f;if(m>t.length){if(r)break;m=t.length}var y=t.subarray(d+8,m);Os(p,n[0])&&(n.length===1?l.push(y):l.push.apply(l,u(y,n.slice(1),r))),d=m}return l},CT={EBML:ir([26,69,223,163]),DocType:ir([66,130]),Segment:ir([24,83,128,103]),SegmentInfo:ir([21,73,169,102]),Tracks:ir([22,84,174,107]),Track:ir([174]),TrackNumber:ir([215]),DefaultDuration:ir([35,227,131]),TrackEntry:ir([174]),TrackType:ir([131]),FlagDefault:ir([136]),CodecID:ir([134]),CodecPrivate:ir([99,162]),VideoTrack:ir([224]),AudioTrack:ir([225]),Cluster:ir([31,67,182,117]),Timestamp:ir([231]),TimestampScale:ir([42,215,177]),BlockGroup:ir([160]),BlockDuration:ir([155]),Block:ir([161]),SimpleBlock:ir([163])},RA=[128,64,32,16,8,4,2,1],y$=function(t){for(var n=1,r=0;r<RA.length&&!(t&RA[r]);r++)n++;return n},uE=function(t,n,r,l){r===void 0&&(r=!0),l===void 0&&(l=!1);var d=y$(t[n]),f=t.subarray(n,n+d);return r&&(f=Array.prototype.slice.call(t,n,n+d),f[0]^=RA[d-1]),{length:d,value:o9(f,{signed:l}),bytes:f}},XL=function u(t){return typeof t=="string"?t.match(/.{1,2}/g).map(function(n){return u(n)}):typeof t=="number"?l9(t):t},v$=function(t){return Array.isArray(t)?t.map(function(n){return XL(n)}):[XL(t)]},T$=function u(t,n,r){if(r>=n.length)return n.length;var l=uE(n,r,!1);if(Os(t.bytes,l.bytes))return r;var d=uE(n,r+l.length);return u(t,n,r+d.length+d.value+l.length)},QL=function u(t,n){n=v$(n),t=ir(t);var r=[];if(!n.length)return r;for(var l=0;l<t.length;){var d=uE(t,l,!1),f=uE(t,l+d.length),p=l+d.length+f.length;f.value===127&&(f.value=T$(d,t,p),f.value!==t.length&&(f.value-=p));var m=p+f.value>t.length?t.length:p+f.value,y=t.subarray(p,m);Os(n[0],d.bytes)&&(n.length===1?r.push(y):r=r.concat(u(y,n.slice(1))));var b=d.length+f.length+y.length;l+=b}return r},E$=ir([0,0,0,1]),b$=ir([0,0,1]),_$=ir([0,0,3]),S$=function(t){for(var n=[],r=1;r<t.length-2;)Os(t.subarray(r,r+3),_$)&&(n.push(r+2),r++),r++;if(n.length===0)return t;var l=t.length-n.length,d=new Uint8Array(l),f=0;for(r=0;r<l;f++,r++)f===n[0]&&(f++,n.shift()),d[r]=t[f];return d},VN=function(t,n,r,l){t=ir(t),r=[].concat(r);for(var d=0,f,p=0;d<t.length&&(p<l||f);){var m=void 0;if(Os(t.subarray(d),E$)?m=4:Os(t.subarray(d),b$)&&(m=3),!m){d++;continue}if(p++,f)return S$(t.subarray(f,d));var y=void 0;n==="h264"?y=t[d+m]&31:n==="h265"&&(y=t[d+m]>>1&63),r.indexOf(y)!==-1&&(f=d+m),d+=m+(n==="h264"?1:2)}return t.subarray(0,0)},x$=function(t,n,r){return VN(t,"h264",n,r)},A$=function(t,n,r){return VN(t,"h265",n,r)},Qo={webm:ir([119,101,98,109]),matroska:ir([109,97,116,114,111,115,107,97]),flac:ir([102,76,97,67]),ogg:ir([79,103,103,83]),ac3:ir([11,119]),riff:ir([82,73,70,70]),avi:ir([65,86,73]),wav:ir([87,65,86,69]),"3gp":ir([102,116,121,112,51,103]),mp4:ir([102,116,121,112]),fmp4:ir([115,116,121,112]),mov:ir([102,116,121,112,113,116]),moov:ir([109,111,111,118]),moof:ir([109,111,111,102])},Sg={aac:function(t){var n=dy(t);return Os(t,[255,16],{offset:n,mask:[255,22]})},mp3:function(t){var n=dy(t);return Os(t,[255,2],{offset:n,mask:[255,6]})},webm:function(t){var n=QL(t,[CT.EBML,CT.DocType])[0];return Os(n,Qo.webm)},mkv:function(t){var n=QL(t,[CT.EBML,CT.DocType])[0];return Os(n,Qo.matroska)},mp4:function(t){if(Sg["3gp"](t)||Sg.mov(t))return!1;if(Os(t,Qo.mp4,{offset:4})||Os(t,Qo.fmp4,{offset:4})||Os(t,Qo.moof,{offset:4})||Os(t,Qo.moov,{offset:4}))return!0},mov:function(t){return Os(t,Qo.mov,{offset:4})},"3gp":function(t){return Os(t,Qo["3gp"],{offset:4})},ac3:function(t){var n=dy(t);return Os(t,Qo.ac3,{offset:n})},ts:function(t){if(t.length<189&&t.length>=1)return t[0]===71;for(var n=0;n+188<t.length&&n<188;){if(t[n]===71&&t[n+188]===71)return!0;n+=1}return!1},flac:function(t){var n=dy(t);return Os(t,Qo.flac,{offset:n})},ogg:function(t){return Os(t,Qo.ogg)},avi:function(t){return Os(t,Qo.riff)&&Os(t,Qo.avi,{offset:8})},wav:function(t){return Os(t,Qo.riff)&&Os(t,Qo.wav,{offset:8})},h264:function(t){return x$(t,7,3).length},h265:function(t){return A$(t,[32,33],3).length}},LA=Object.keys(Sg).filter(function(u){return u!=="ts"&&u!=="h264"&&u!=="h265"}).concat(["ts","h264","h265"]);LA.forEach(function(u){var t=Sg[u];Sg[u]=function(n){return t(ir(n))}});var w$=Sg,Pw=function(t){t=ir(t);for(var n=0;n<LA.length;n++){var r=LA[n];if(w$[r](t))return r}return""},I$=function(t){return m$(t,["moof"]).length>0},$x,JL;function C$(){if(JL)return $x;JL=1;var u=9e4,t,n,r,l,d,f,p;return t=function(m){return m*u},n=function(m,y){return m*y},r=function(m){return m/u},l=function(m,y){return m/y},d=function(m,y){return t(l(m,y))},f=function(m,y){return n(r(m),y)},p=function(m,y,b){return r(b?m:m-y)},$x={ONE_SECOND_IN_TS:u,secondsToVideoTs:t,secondsToAudioTs:n,videoTsToSeconds:r,audioTsToSeconds:l,audioTsToVideoTs:d,videoTsToAudioTs:f,metadataTsToSeconds:p},$x}var Ch=C$();/**
 * @license
 * Video.js 8.23.3 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/main/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/main/LICENSE>
 */var PA="8.23.3";const Ld={},Rf=function(u,t){return Ld[u]=Ld[u]||[],t&&(Ld[u]=Ld[u].concat(t)),Ld[u]},k$=function(u,t){Rf(u,t)},$N=function(u,t){const n=Rf(u).indexOf(t);return n<=-1?!1:(Ld[u]=Ld[u].slice(),Ld[u].splice(n,1),!0)},D$=function(u,t){Rf(u,[].concat(t).map(n=>{const r=(...l)=>($N(u,r),n(...l));return r}))},cE={prefixed:!0},qT=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"]],ZL=qT[0];let fy;for(let u=0;u<qT.length;u++)if(qT[u][1]in li){fy=qT[u];break}if(fy){for(let u=0;u<fy.length;u++)cE[ZL[u]]=fy[u];cE.prefixed=fy[0]!==ZL[0]}let bl=[];const R$=(u,t,n)=>(r,l,d)=>{const f=t.levels[l],p=new RegExp(`^(${f})$`);let m=u;if(r!=="log"&&d.unshift(r.toUpperCase()+":"),n&&(m=`%c${u}`,d.unshift(n)),d.unshift(m+":"),bl){bl.push([].concat(d));const b=bl.length-1e3;bl.splice(0,b>0?b:0)}if(!St.console)return;let y=St.console[r];!y&&r==="debug"&&(y=St.console.info||St.console.log),!(!y||!f||!p.test(r))&&y[Array.isArray(d)?"apply":"call"](St.console,d)};function MA(u,t=":",n=""){let r="info",l;function d(...f){l("log",r,f)}return l=R$(u,d,n),d.createLogger=(f,p,m)=>{const y=p!==void 0?p:t,b=m!==void 0?m:n,_=`${u} ${y} ${f}`;return MA(_,y,b)},d.createNewLogger=(f,p,m)=>MA(f,p,m),d.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:r},d.level=f=>{if(typeof f=="string"){if(!d.levels.hasOwnProperty(f))throw new Error(`"${f}" in not a valid log level`);r=f}return r},d.history=()=>bl?[].concat(bl):[],d.history.filter=f=>(bl||[]).filter(p=>new RegExp(`.*${f}.*`).test(p[0])),d.history.clear=()=>{bl&&(bl.length=0)},d.history.disable=()=>{bl!==null&&(bl.length=0,bl=null)},d.history.enable=()=>{bl===null&&(bl=[])},d.error=(...f)=>l("error",r,f),d.warn=(...f)=>l("warn",r,f),d.debug=(...f)=>l("debug",r,f),d}const Mr=MA("VIDEOJS"),KN=Mr.createLogger,L$=Object.prototype.toString,YN=function(u){return Hc(u)?Object.keys(u):[]};function lg(u,t){YN(u).forEach(n=>t(u[n],n))}function WN(u,t,n=0){return YN(u).reduce((r,l)=>t(r,u[l],l),n)}function Hc(u){return!!u&&typeof u=="object"}function xg(u){return Hc(u)&&L$.call(u)==="[object Object]"&&u.constructor===Object}function gs(...u){const t={};return u.forEach(n=>{n&&lg(n,(r,l)=>{if(!xg(r)){t[l]=r;return}xg(t[l])||(t[l]={}),t[l]=gs(t[l],r)})}),t}function XN(u={}){const t=[];for(const n in u)if(u.hasOwnProperty(n)){const r=u[n];t.push(r)}return t}function FE(u,t,n,r=!0){const l=f=>Object.defineProperty(u,t,{value:f,enumerable:!0,writable:!0}),d={configurable:!0,enumerable:!0,get(){const f=n();return l(f),f}};return r&&(d.set=l),Object.defineProperty(u,t,d)}var P$=Object.freeze({__proto__:null,each:lg,reduce:WN,isObject:Hc,isPlain:xg,merge:gs,values:XN,defineLazyProperty:FE});let Mw=!1,QN=null,Qu=!1,JN,ZN=!1,ug=!1,cg=!1,Gc=!1,Nw=null,UE=null;const M$=!!(St.cast&&St.cast.framework&&St.cast.framework.CastReceiverContext);let eO=null,dE=!1,BE=!1,fE=!1,zE=!1,hE=!1,pE=!1,gE=!1;const Ny=!!(Pg()&&("ontouchstart"in St||St.navigator.maxTouchPoints||St.DocumentTouch&&St.document instanceof St.DocumentTouch)),_f=St.navigator&&St.navigator.userAgentData;_f&&_f.platform&&_f.brands&&(Qu=_f.platform==="Android",ug=!!_f.brands.find(u=>u.brand==="Microsoft Edge"),cg=!!_f.brands.find(u=>u.brand==="Chromium"),Gc=!ug&&cg,Nw=UE=(_f.brands.find(u=>u.brand==="Chromium")||{}).version||null,BE=_f.platform==="Windows");if(!cg){const u=St.navigator&&St.navigator.userAgent||"";Mw=/iPod/i.test(u),QN=function(){const t=u.match(/OS (\d+)_/i);return t&&t[1]?t[1]:null}(),Qu=/Android/i.test(u),JN=function(){const t=u.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!t)return null;const n=t[1]&&parseFloat(t[1]),r=t[2]&&parseFloat(t[2]);return n&&r?parseFloat(t[1]+"."+t[2]):n||null}(),ZN=/Firefox/i.test(u),ug=/Edg/i.test(u),cg=/Chrome/i.test(u)||/CriOS/i.test(u),Gc=!ug&&cg,Nw=UE=function(){const t=u.match(/(Chrome|CriOS)\/(\d+)/);return t&&t[2]?parseFloat(t[2]):null}(),eO=function(){const t=/MSIE\s(\d+)\.\d/.exec(u);let n=t&&parseFloat(t[1]);return!n&&/Trident\/7.0/i.test(u)&&/rv:11.0/.test(u)&&(n=11),n}(),hE=/Tizen/i.test(u),pE=/Web0S/i.test(u),gE=hE||pE,dE=/Safari/i.test(u)&&!Gc&&!Qu&&!ug&&!gE,BE=/Windows/i.test(u),fE=/iPad/i.test(u)||dE&&Ny&&!/iPhone/i.test(u),zE=/iPhone/i.test(u)&&!fE}const Do=zE||fE||Mw,jE=(dE||Do)&&!Gc;var tO=Object.freeze({__proto__:null,get IS_IPOD(){return Mw},get IOS_VERSION(){return QN},get IS_ANDROID(){return Qu},get ANDROID_VERSION(){return JN},get IS_FIREFOX(){return ZN},get IS_EDGE(){return ug},get IS_CHROMIUM(){return cg},get IS_CHROME(){return Gc},get CHROMIUM_VERSION(){return Nw},get CHROME_VERSION(){return UE},IS_CHROMECAST_RECEIVER:M$,get IE_VERSION(){return eO},get IS_SAFARI(){return dE},get IS_WINDOWS(){return BE},get IS_IPAD(){return fE},get IS_IPHONE(){return zE},get IS_TIZEN(){return hE},get IS_WEBOS(){return pE},get IS_SMART_TV(){return gE},TOUCH_ENABLED:Ny,IS_IOS:Do,IS_ANY_SAFARI:jE});function eP(u){return typeof u=="string"&&!!u.trim()}function N$(u){if(u.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function Pg(){return li===St.document}function Mg(u){return Hc(u)&&u.nodeType===1}function nO(){try{return St.parent!==St.self}catch{return!0}}function iO(u){return function(t,n){if(!eP(t))return li[u](null);eP(n)&&(n=li.querySelector(n));const r=Mg(n)?n:li;return r[u]&&r[u](t)}}function ar(u="div",t={},n={},r){const l=li.createElement(u);return Object.getOwnPropertyNames(t).forEach(function(d){const f=t[d];d==="textContent"?Nf(l,f):(l[d]!==f||d==="tabIndex")&&(l[d]=f)}),Object.getOwnPropertyNames(n).forEach(function(d){l.setAttribute(d,n[d])}),r&&Ow(l,r),l}function Nf(u,t){return typeof u.textContent>"u"?u.innerText=t:u.textContent=t,u}function NA(u,t){t.firstChild?t.insertBefore(u,t.firstChild):t.appendChild(u)}function vy(u,t){return N$(t),u.classList.contains(t)}function Ph(u,...t){return u.classList.add(...t.reduce((n,r)=>n.concat(r.split(/\s+/)),[])),u}function qE(u,...t){return u?(u.classList.remove(...t.reduce((n,r)=>n.concat(r.split(/\s+/)),[])),u):(Mr.warn("removeClass was called with an element that doesn't exist"),null)}function rO(u,t,n){return typeof n=="function"&&(n=n(u,t)),typeof n!="boolean"&&(n=void 0),t.split(/\s+/).forEach(r=>u.classList.toggle(r,n)),u}function sO(u,t){Object.getOwnPropertyNames(t).forEach(function(n){const r=t[n];r===null||typeof r>"u"||r===!1?u.removeAttribute(n):u.setAttribute(n,r===!0?"":r)})}function If(u){const t={},n=["autoplay","controls","playsinline","loop","muted","default","defaultMuted"];if(u&&u.attributes&&u.attributes.length>0){const r=u.attributes;for(let l=r.length-1;l>=0;l--){const d=r[l].name;let f=r[l].value;n.includes(d)&&(f=f!==null),t[d]=f}}return t}function aO(u,t){return u.getAttribute(t)}function Ag(u,t,n){u.setAttribute(t,n)}function HE(u,t){u.removeAttribute(t)}function oO(){li.body.focus(),li.onselectstart=function(){return!1}}function lO(){li.onselectstart=function(){return!0}}function wg(u){if(u&&u.getBoundingClientRect&&u.parentNode){const t=u.getBoundingClientRect(),n={};return["bottom","height","left","right","top","width"].forEach(r=>{t[r]!==void 0&&(n[r]=t[r])}),n.height||(n.height=parseFloat(Ig(u,"height"))),n.width||(n.width=parseFloat(Ig(u,"width"))),n}}function Oy(u){if(!u||u&&!u.offsetParent)return{left:0,top:0,width:0,height:0};const t=u.offsetWidth,n=u.offsetHeight;let r=0,l=0;for(;u.offsetParent&&u!==li[cE.fullscreenElement];)r+=u.offsetLeft,l+=u.offsetTop,u=u.offsetParent;return{left:r,top:l,width:t,height:n}}function GE(u,t){const n={x:0,y:0};if(Do){let b=u;for(;b&&b.nodeName.toLowerCase()!=="html";){const _=Ig(b,"transform");if(/^matrix/.test(_)){const A=_.slice(7,-1).split(/,\s/).map(Number);n.x+=A[4],n.y+=A[5]}else if(/^matrix3d/.test(_)){const A=_.slice(9,-1).split(/,\s/).map(Number);n.x+=A[12],n.y+=A[13]}if(b.assignedSlot&&b.assignedSlot.parentElement&&St.WebKitCSSMatrix){const A=St.getComputedStyle(b.assignedSlot.parentElement).transform,w=new St.WebKitCSSMatrix(A);n.x+=w.m41,n.y+=w.m42}b=b.parentNode||b.host}}const r={},l=Oy(t.target),d=Oy(u),f=d.width,p=d.height;let m=t.offsetY-(d.top-l.top),y=t.offsetX-(d.left-l.left);return t.changedTouches&&(y=t.changedTouches[0].pageX-d.left,m=t.changedTouches[0].pageY+d.top,Do&&(y-=n.x,m-=n.y)),r.y=1-Math.max(0,Math.min(1,m/p)),r.x=Math.max(0,Math.min(1,y/f)),r}function uO(u){return Hc(u)&&u.nodeType===3}function VE(u){for(;u.firstChild;)u.removeChild(u.firstChild);return u}function cO(u){return typeof u=="function"&&(u=u()),(Array.isArray(u)?u:[u]).map(t=>{if(typeof t=="function"&&(t=t()),Mg(t)||uO(t))return t;if(typeof t=="string"&&/\S/.test(t))return li.createTextNode(t)}).filter(t=>t)}function Ow(u,t){return cO(t).forEach(n=>u.appendChild(n)),u}function dO(u,t){return Ow(VE(u),t)}function Fy(u){return u.button===void 0&&u.buttons===void 0||u.button===0&&u.buttons===void 0||u.type==="mouseup"&&u.button===0&&u.buttons===0||u.type==="mousedown"&&u.button===0&&u.buttons===0?!0:!(u.button!==0||u.buttons!==1)}const Lf=iO("querySelector"),fO=iO("querySelectorAll");function Ig(u,t){if(!u||!t)return"";if(typeof St.getComputedStyle=="function"){let n;try{n=St.getComputedStyle(u)}catch{return""}return n?n.getPropertyValue(t)||n[t]:""}return""}function hO(u){[...li.styleSheets].forEach(t=>{try{const n=[...t.cssRules].map(l=>l.cssText).join(""),r=li.createElement("style");r.textContent=n,u.document.head.appendChild(r)}catch{const r=li.createElement("link");r.rel="stylesheet",r.type=t.type,r.media=t.media.mediaText,r.href=t.href,u.document.head.appendChild(r)}})}var pO=Object.freeze({__proto__:null,isReal:Pg,isEl:Mg,isInFrame:nO,createEl:ar,textContent:Nf,prependTo:NA,hasClass:vy,addClass:Ph,removeClass:qE,toggleClass:rO,setAttributes:sO,getAttributes:If,getAttribute:aO,setAttribute:Ag,removeAttribute:HE,blockTextSelection:oO,unblockTextSelection:lO,getBoundingClientRect:wg,findPosition:Oy,getPointerPosition:GE,isTextNode:uO,emptyEl:VE,normalizeContent:cO,appendContent:Ow,insertContent:dO,isSingleLeftClick:Fy,$:Lf,$$:fO,computedStyle:Ig,copyStyleSheetsToWindow:hO});let gO=!1,OA;const O$=function(){if(OA.options.autoSetup===!1)return;const u=Array.prototype.slice.call(li.getElementsByTagName("video")),t=Array.prototype.slice.call(li.getElementsByTagName("audio")),n=Array.prototype.slice.call(li.getElementsByTagName("video-js")),r=u.concat(t,n);if(r&&r.length>0)for(let l=0,d=r.length;l<d;l++){const f=r[l];if(f&&f.getAttribute)f.player===void 0&&f.getAttribute("data-setup")!==null&&OA(f);else{FA(1);break}}else gO||FA(1)};function FA(u,t){Pg()&&(t&&(OA=t),St.setTimeout(O$,u))}function UA(){gO=!0,St.removeEventListener("load",UA)}Pg()&&(li.readyState==="complete"?UA():St.addEventListener("load",UA));const mO=function(u){const t=li.createElement("style");return t.className=u,t},yO=function(u,t){u.styleSheet?u.styleSheet.cssText=t:u.textContent=t};var Zo=new WeakMap;const F$=3;let U$=F$;function Su(){return U$++}function tP(u,t){if(!Zo.has(u))return;const n=Zo.get(u);n.handlers[t].length===0&&(delete n.handlers[t],u.removeEventListener?u.removeEventListener(t,n.dispatcher,!1):u.detachEvent&&u.detachEvent("on"+t,n.dispatcher)),Object.getOwnPropertyNames(n.handlers).length<=0&&(delete n.handlers,delete n.dispatcher,delete n.disabled),Object.getOwnPropertyNames(n).length===0&&Zo.delete(u)}function Fw(u,t,n,r){n.forEach(function(l){u(t,l,r)})}function $E(u){if(u.fixed_)return u;function t(){return!0}function n(){return!1}if(!u||!u.isPropagationStopped||!u.isImmediatePropagationStopped){const r=u||St.event;u={};const l=["layerX","layerY","keyLocation","path","webkitMovementX","webkitMovementY","mozPressure","mozInputSource"];for(const d in r)l.includes(d)||d==="returnValue"&&r.preventDefault||(u[d]=r[d]);if(u.target||(u.target=u.srcElement||li),u.relatedTarget||(u.relatedTarget=u.fromElement===u.target?u.toElement:u.fromElement),u.preventDefault=function(){r.preventDefault&&r.preventDefault(),u.returnValue=!1,r.returnValue=!1,u.defaultPrevented=!0},u.defaultPrevented=!1,u.stopPropagation=function(){r.stopPropagation&&r.stopPropagation(),u.cancelBubble=!0,r.cancelBubble=!0,u.isPropagationStopped=t},u.isPropagationStopped=n,u.stopImmediatePropagation=function(){r.stopImmediatePropagation&&r.stopImmediatePropagation(),u.isImmediatePropagationStopped=t,u.stopPropagation()},u.isImmediatePropagationStopped=n,u.clientX!==null&&u.clientX!==void 0){const d=li.documentElement,f=li.body;u.pageX=u.clientX+(d&&d.scrollLeft||f&&f.scrollLeft||0)-(d&&d.clientLeft||f&&f.clientLeft||0),u.pageY=u.clientY+(d&&d.scrollTop||f&&f.scrollTop||0)-(d&&d.clientTop||f&&f.clientTop||0)}u.which=u.charCode||u.keyCode,u.button!==null&&u.button!==void 0&&(u.button=u.button&1?0:u.button&4?1:u.button&2?2:0)}return u.fixed_=!0,u}let kT;const B$=function(){if(typeof kT!="boolean"){kT=!1;try{const u=Object.defineProperty({},"passive",{get(){kT=!0}});St.addEventListener("test",null,u),St.removeEventListener("test",null,u)}catch{}}return kT},z$=["touchstart","touchmove"];function eu(u,t,n){if(Array.isArray(t))return Fw(eu,u,t,n);Zo.has(u)||Zo.set(u,{});const r=Zo.get(u);if(r.handlers||(r.handlers={}),r.handlers[t]||(r.handlers[t]=[]),n.guid||(n.guid=Su()),r.handlers[t].push(n),r.dispatcher||(r.disabled=!1,r.dispatcher=function(l,d){if(r.disabled)return;l=$E(l);const f=r.handlers[l.type];if(f){const p=f.slice(0);for(let m=0,y=p.length;m<y&&!l.isImmediatePropagationStopped();m++)try{p[m].call(u,l,d)}catch(b){Mr.error(b)}}}),r.handlers[t].length===1)if(u.addEventListener){let l=!1;B$()&&z$.indexOf(t)>-1&&(l={passive:!0}),u.addEventListener(t,r.dispatcher,l)}else u.attachEvent&&u.attachEvent("on"+t,r.dispatcher)}function Ro(u,t,n){if(!Zo.has(u))return;const r=Zo.get(u);if(!r.handlers)return;if(Array.isArray(t))return Fw(Ro,u,t,n);const l=function(f,p){r.handlers[p]=[],tP(f,p)};if(t===void 0){for(const f in r.handlers)Object.prototype.hasOwnProperty.call(r.handlers||{},f)&&l(u,f);return}const d=r.handlers[t];if(d){if(!n){l(u,t);return}if(n.guid)for(let f=0;f<d.length;f++)d[f].guid===n.guid&&d.splice(f--,1);tP(u,t)}}function Ng(u,t,n){const r=Zo.has(u)?Zo.get(u):{},l=u.parentNode||u.ownerDocument;if(typeof t=="string"?t={type:t,target:u}:t.target||(t.target=u),t=$E(t),r.dispatcher&&r.dispatcher.call(u,t,n),l&&!t.isPropagationStopped()&&t.bubbles===!0)Ng.call(null,l,t,n);else if(!l&&!t.defaultPrevented&&t.target&&t.target[t.type]){Zo.has(t.target)||Zo.set(t.target,{});const d=Zo.get(t.target);t.target[t.type]&&(d.disabled=!0,typeof t.target[t.type]=="function"&&t.target[t.type](),d.disabled=!1)}return!t.defaultPrevented}function KE(u,t,n){if(Array.isArray(t))return Fw(KE,u,t,n);const r=function(){Ro(u,t,r),n.apply(this,arguments)};r.guid=n.guid=n.guid||Su(),eu(u,t,r)}function Uw(u,t,n){const r=function(){Ro(u,t,r),n.apply(this,arguments)};r.guid=n.guid=n.guid||Su(),eu(u,t,r)}var j$=Object.freeze({__proto__:null,fixEvent:$E,on:eu,off:Ro,trigger:Ng,one:KE,any:Uw});const xu=30,ks=function(u,t,n){t.guid||(t.guid=Su());const r=t.bind(u);return r.guid=n?n+"_"+t.guid:t.guid,r},Vc=function(u,t){let n=St.performance.now();return function(...l){const d=St.performance.now();d-n>=t&&(u(...l),n=d)}},vO=function(u,t,n,r=St){let l;const d=()=>{r.clearTimeout(l),l=null},f=function(){const p=this,m=arguments;let y=function(){l=null,y=null,n||u.apply(p,m)};!l&&n&&u.apply(p,m),r.clearTimeout(l),l=r.setTimeout(y,t)};return f.cancel=d,f};var q$=Object.freeze({__proto__:null,UPDATE_REFRESH_INTERVAL:xu,bind_:ks,throttle:Vc,debounce:vO});let oy;class tu{on(t,n){const r=this.addEventListener;this.addEventListener=()=>{},eu(this,t,n),this.addEventListener=r}off(t,n){Ro(this,t,n)}one(t,n){const r=this.addEventListener;this.addEventListener=()=>{},KE(this,t,n),this.addEventListener=r}any(t,n){const r=this.addEventListener;this.addEventListener=()=>{},Uw(this,t,n),this.addEventListener=r}trigger(t){const n=t.type||t;typeof t=="string"&&(t={type:n}),t=$E(t),this.allowedEvents_[n]&&this["on"+n]&&this["on"+n](t),Ng(this,t)}queueTrigger(t){oy||(oy=new Map);const n=t.type||t;let r=oy.get(this);r||(r=new Map,oy.set(this,r));const l=r.get(n);r.delete(n),St.clearTimeout(l);const d=St.setTimeout(()=>{r.delete(n),r.size===0&&(r=null,oy.delete(this)),this.trigger(t)},0);r.set(n,d)}}tu.prototype.allowedEvents_={};tu.prototype.addEventListener=tu.prototype.on;tu.prototype.removeEventListener=tu.prototype.off;tu.prototype.dispatchEvent=tu.prototype.trigger;const YE=u=>typeof u.name=="function"?u.name():typeof u.name=="string"?u.name:u.name_?u.name_:u.constructor&&u.constructor.name?u.constructor.name:typeof u,Fd=u=>u instanceof tu||!!u.eventBusEl_&&["on","one","off","trigger"].every(t=>typeof u[t]=="function"),H$=(u,t)=>{Fd(u)?t():(u.eventedCallbacks||(u.eventedCallbacks=[]),u.eventedCallbacks.push(t))},BA=u=>typeof u=="string"&&/\S/.test(u)||Array.isArray(u)&&!!u.length,mE=(u,t,n)=>{if(!u||!u.nodeName&&!Fd(u))throw new Error(`Invalid target for ${YE(t)}#${n}; must be a DOM node or evented object.`)},TO=(u,t,n)=>{if(!BA(u))throw new Error(`Invalid event type for ${YE(t)}#${n}; must be a non-empty string or array.`)},EO=(u,t,n)=>{if(typeof u!="function")throw new Error(`Invalid listener for ${YE(t)}#${n}; must be a function.`)},Kx=(u,t,n)=>{const r=t.length<3||t[0]===u||t[0]===u.eventBusEl_;let l,d,f;return r?(l=u.eventBusEl_,t.length>=3&&t.shift(),[d,f]=t):(l=t[0],d=t[1],f=t[2]),mE(l,u,n),TO(d,u,n),EO(f,u,n),f=ks(u,f),{isTargetingSelf:r,target:l,type:d,listener:f}},xh=(u,t,n,r)=>{mE(u,u,t),u.nodeName?j$[t](u,n,r):u[t](n,r)},G$={on(...u){const{isTargetingSelf:t,target:n,type:r,listener:l}=Kx(this,u,"on");if(xh(n,"on",r,l),!t){const d=()=>this.off(n,r,l);d.guid=l.guid;const f=()=>this.off("dispose",d);f.guid=l.guid,xh(this,"on","dispose",d),xh(n,"on","dispose",f)}},one(...u){const{isTargetingSelf:t,target:n,type:r,listener:l}=Kx(this,u,"one");if(t)xh(n,"one",r,l);else{const d=(...f)=>{this.off(n,r,d),l.apply(null,f)};d.guid=l.guid,xh(n,"one",r,d)}},any(...u){const{isTargetingSelf:t,target:n,type:r,listener:l}=Kx(this,u,"any");if(t)xh(n,"any",r,l);else{const d=(...f)=>{this.off(n,r,d),l.apply(null,f)};d.guid=l.guid,xh(n,"any",r,d)}},off(u,t,n){if(!u||BA(u))Ro(this.eventBusEl_,u,t);else{const r=u,l=t;mE(r,this,"off"),TO(l,this,"off"),EO(n,this,"off"),n=ks(this,n),this.off("dispose",n),r.nodeName?(Ro(r,l,n),Ro(r,"dispose",n)):Fd(r)&&(r.off(l,n),r.off("dispose",n))}},trigger(u,t){mE(this.eventBusEl_,this,"trigger");const n=u&&typeof u!="string"?u.type:u;if(!BA(n))throw new Error(`Invalid event type for ${YE(this)}#trigger; must be a non-empty string or object with a type key that has a non-empty value.`);return Ng(this.eventBusEl_,u,t)}};function Bw(u,t={}){const{eventBusKey:n}=t;if(n){if(!u[n].nodeName)throw new Error(`The eventBusKey "${n}" does not refer to an element.`);u.eventBusEl_=u[n]}else u.eventBusEl_=ar("span",{className:"vjs-event-bus"});return Object.assign(u,G$),u.eventedCallbacks&&u.eventedCallbacks.forEach(r=>{r()}),u.on("dispose",()=>{u.off(),[u,u.el_,u.eventBusEl_].forEach(function(r){r&&Zo.has(r)&&Zo.delete(r)}),St.setTimeout(()=>{u.eventBusEl_=null},0)}),u}const V$={state:{},setState(u){typeof u=="function"&&(u=u());let t;return lg(u,(n,r)=>{this.state[r]!==n&&(t=t||{},t[r]={from:this.state[r],to:n}),this.state[r]=n}),t&&Fd(this)&&this.trigger({changes:t,type:"statechanged"}),t}};function bO(u,t){return Object.assign(u,V$),u.state=Object.assign({},u.state,t),typeof u.handleStateChanged=="function"&&Fd(u)&&u.on("statechanged",u.handleStateChanged),u}const Ty=function(u){return typeof u!="string"?u:u.replace(/./,t=>t.toLowerCase())},na=function(u){return typeof u!="string"?u:u.replace(/./,t=>t.toUpperCase())},_O=function(u,t){return na(u)===na(t)};var $$=Object.freeze({__proto__:null,toLowerCase:Ty,toTitleCase:na,titleCaseEquals:_O});class Rn{constructor(t,n,r){if(!t&&this.play?this.player_=t=this:this.player_=t,this.isDisposed_=!1,this.parentComponent_=null,this.options_=gs({},this.options_),n=this.options_=gs(this.options_,n),this.id_=n.id||n.el&&n.el.id,!this.id_){const l=t&&t.id&&t.id()||"no_player";this.id_=`${l}_component_${Su()}`}this.name_=n.name||null,n.el?this.el_=n.el:n.createEl!==!1&&(this.el_=this.createEl()),n.className&&this.el_&&n.className.split(" ").forEach(l=>this.addClass(l)),["on","off","one","any","trigger"].forEach(l=>{this[l]=void 0}),n.evented!==!1&&(Bw(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),bO(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Set,this.setIntervalIds_=new Set,this.rafIds_=new Set,this.namedRafs_=new Map,this.clearingTimersOnDispose_=!1,n.initChildren!==!1&&this.initChildren(),this.ready(r),n.reportTouchActivity!==!1&&this.enableTouchActivity()}dispose(t={}){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(let n=this.children_.length-1;n>=0;n--)this.children_[n].dispose&&this.children_[n].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(t.restoreEl?this.el_.parentNode.replaceChild(t.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}}isDisposed(){return!!this.isDisposed_}player(){return this.player_}options(t){return t?(this.options_=gs(this.options_,t),this.options_):this.options_}el(){return this.el_}createEl(t,n,r){return ar(t,n,r)}localize(t,n,r=t){const l=this.player_.language&&this.player_.language(),d=this.player_.languages&&this.player_.languages(),f=d&&d[l],p=l&&l.split("-")[0],m=d&&d[p];let y=r;return f&&f[t]?y=f[t]:m&&m[t]&&(y=m[t]),n&&(y=y.replace(/\{(\d+)\}/g,function(b,_){const A=n[_-1];let w=A;return typeof A>"u"&&(w=b),w})),y}handleLanguagechange(){}contentEl(){return this.contentEl_||this.el_}id(){return this.id_}name(){return this.name_}children(){return this.children_}getChildById(t){return this.childIndex_[t]}getChild(t){if(t)return this.childNameIndex_[t]}getDescendant(...t){t=t.reduce((r,l)=>r.concat(l),[]);let n=this;for(let r=0;r<t.length;r++)if(n=n.getChild(t[r]),!n||!n.getChild)return;return n}setIcon(t,n=this.el()){if(!this.player_.options_.experimentalSvgIcons)return;const r="http://www.w3.org/2000/svg",l=ar("span",{className:"vjs-icon-placeholder vjs-svg-icon"},{"aria-hidden":"true"}),d=li.createElementNS(r,"svg");d.setAttributeNS(null,"viewBox","0 0 512 512");const f=li.createElementNS(r,"use");return d.appendChild(f),f.setAttributeNS(null,"href",`#vjs-icon-${t}`),l.appendChild(d),this.iconIsSet_?n.replaceChild(l,n.querySelector(".vjs-icon-placeholder")):n.appendChild(l),this.iconIsSet_=!0,l}addChild(t,n={},r=this.children_.length){let l,d;if(typeof t=="string"){d=na(t);const f=n.componentClass||d;n.name=d;const p=Rn.getComponent(f);if(!p)throw new Error(`Component ${f} does not exist`);if(typeof p!="function")return null;l=new p(this.player_||this,n)}else l=t;if(l.parentComponent_&&l.parentComponent_.removeChild(l),this.children_.splice(r,0,l),l.parentComponent_=this,typeof l.id=="function"&&(this.childIndex_[l.id()]=l),d=d||l.name&&na(l.name()),d&&(this.childNameIndex_[d]=l,this.childNameIndex_[Ty(d)]=l),typeof l.el=="function"&&l.el()){let f=null;this.children_[r+1]&&(this.children_[r+1].el_?f=this.children_[r+1].el_:Mg(this.children_[r+1])&&(f=this.children_[r+1])),this.contentEl().insertBefore(l.el(),f)}return l}removeChild(t){if(typeof t=="string"&&(t=this.getChild(t)),!t||!this.children_)return;let n=!1;for(let l=this.children_.length-1;l>=0;l--)if(this.children_[l]===t){n=!0,this.children_.splice(l,1);break}if(!n)return;t.parentComponent_=null,this.childIndex_[t.id()]=null,this.childNameIndex_[na(t.name())]=null,this.childNameIndex_[Ty(t.name())]=null;const r=t.el();r&&r.parentNode===this.contentEl()&&this.contentEl().removeChild(t.el())}initChildren(){const t=this.options_.children;if(t){const n=this.options_,r=f=>{const p=f.name;let m=f.opts;if(n[p]!==void 0&&(m=n[p]),m===!1)return;m===!0&&(m={}),m.playerOptions=this.options_.playerOptions;const y=this.addChild(p,m);y&&(this[p]=y)};let l;const d=Rn.getComponent("Tech");Array.isArray(t)?l=t:l=Object.keys(t),l.concat(Object.keys(this.options_).filter(function(f){return!l.some(function(p){return typeof p=="string"?f===p:f===p.name})})).map(f=>{let p,m;return typeof f=="string"?(p=f,m=t[p]||this.options_[p]||{}):(p=f.name,m=f),{name:p,opts:m}}).filter(f=>{const p=Rn.getComponent(f.opts.componentClass||na(f.name));return p&&!d.isTech(p)}).forEach(r)}}buildCSSClass(){return""}ready(t,n=!1){if(t){if(!this.isReady_){this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(t);return}n?t.call(this):this.setTimeout(t,1)}}triggerReady(){this.isReady_=!0,this.setTimeout(function(){const t=this.readyQueue_;this.readyQueue_=[],t&&t.length>0&&t.forEach(function(n){n.call(this)},this),this.trigger("ready")},1)}$(t,n){return Lf(t,n||this.contentEl())}$$(t,n){return fO(t,n||this.contentEl())}hasClass(t){return vy(this.el_,t)}addClass(...t){Ph(this.el_,...t)}removeClass(...t){qE(this.el_,...t)}toggleClass(t,n){rO(this.el_,t,n)}show(){this.removeClass("vjs-hidden")}hide(){this.addClass("vjs-hidden")}lockShowing(){this.addClass("vjs-lock-showing")}unlockShowing(){this.removeClass("vjs-lock-showing")}getAttribute(t){return aO(this.el_,t)}setAttribute(t,n){Ag(this.el_,t,n)}removeAttribute(t){HE(this.el_,t)}width(t,n){return this.dimension("width",t,n)}height(t,n){return this.dimension("height",t,n)}dimensions(t,n){this.width(t,!0),this.height(n)}dimension(t,n,r){if(n!==void 0){(n===null||n!==n)&&(n=0),(""+n).indexOf("%")!==-1||(""+n).indexOf("px")!==-1?this.el_.style[t]=n:n==="auto"?this.el_.style[t]="":this.el_.style[t]=n+"px",r||this.trigger("componentresize");return}if(!this.el_)return 0;const l=this.el_.style[t],d=l.indexOf("px");return parseInt(d!==-1?l.slice(0,d):this.el_["offset"+na(t)],10)}currentDimension(t){let n=0;if(t!=="width"&&t!=="height")throw new Error("currentDimension only accepts width or height value");if(n=Ig(this.el_,t),n=parseFloat(n),n===0||isNaN(n)){const r=`offset${na(t)}`;n=this.el_[r]}return n}currentDimensions(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}}currentWidth(){return this.currentDimension("width")}currentHeight(){return this.currentDimension("height")}getPositions(){const t=this.el_.getBoundingClientRect(),n={x:t.x,y:t.y,width:t.width,height:t.height,top:t.top,right:t.right,bottom:t.bottom,left:t.left},r={x:t.left+t.width/2,y:t.top+t.height/2,width:0,height:0,top:t.top+t.height/2,right:t.left+t.width/2,bottom:t.top+t.height/2,left:t.left+t.width/2};return{boundingClientRect:n,center:r}}focus(){this.el_.focus()}blur(){this.el_.blur()}handleKeyDown(t){this.player_&&(t.key!=="Tab"&&!(this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled)&&t.stopPropagation(),this.player_.handleKeyDown(t))}handleKeyPress(t){this.handleKeyDown(t)}emitTapEvents(){let t=0,n=null;const r=10,l=200;let d;this.on("touchstart",function(p){p.touches.length===1&&(n={pageX:p.touches[0].pageX,pageY:p.touches[0].pageY},t=St.performance.now(),d=!0)}),this.on("touchmove",function(p){if(p.touches.length>1)d=!1;else if(n){const m=p.touches[0].pageX-n.pageX,y=p.touches[0].pageY-n.pageY;Math.sqrt(m*m+y*y)>r&&(d=!1)}});const f=function(){d=!1};this.on("touchleave",f),this.on("touchcancel",f),this.on("touchend",function(p){n=null,d===!0&&St.performance.now()-t<l&&(p.preventDefault(),this.trigger("tap"))})}enableTouchActivity(){if(!this.player()||!this.player().reportUserActivity)return;const t=ks(this.player(),this.player().reportUserActivity);let n;this.on("touchstart",function(){t(),this.clearInterval(n),n=this.setInterval(t,250)});const r=function(l){t(),this.clearInterval(n)};this.on("touchmove",t),this.on("touchend",r),this.on("touchcancel",r)}setTimeout(t,n){var r;return t=ks(this,t),this.clearTimersOnDispose_(),r=St.setTimeout(()=>{this.setTimeoutIds_.has(r)&&this.setTimeoutIds_.delete(r),t()},n),this.setTimeoutIds_.add(r),r}clearTimeout(t){return this.setTimeoutIds_.has(t)&&(this.setTimeoutIds_.delete(t),St.clearTimeout(t)),t}setInterval(t,n){t=ks(this,t),this.clearTimersOnDispose_();const r=St.setInterval(t,n);return this.setIntervalIds_.add(r),r}clearInterval(t){return this.setIntervalIds_.has(t)&&(this.setIntervalIds_.delete(t),St.clearInterval(t)),t}requestAnimationFrame(t){this.clearTimersOnDispose_();var n;return t=ks(this,t),n=St.requestAnimationFrame(()=>{this.rafIds_.has(n)&&this.rafIds_.delete(n),t()}),this.rafIds_.add(n),n}requestNamedAnimationFrame(t,n){this.namedRafs_.has(t)&&this.cancelNamedAnimationFrame(t),this.clearTimersOnDispose_(),n=ks(this,n);const r=this.requestAnimationFrame(()=>{n(),this.namedRafs_.has(t)&&this.namedRafs_.delete(t)});return this.namedRafs_.set(t,r),t}cancelNamedAnimationFrame(t){this.namedRafs_.has(t)&&(this.cancelAnimationFrame(this.namedRafs_.get(t)),this.namedRafs_.delete(t))}cancelAnimationFrame(t){return this.rafIds_.has(t)&&(this.rafIds_.delete(t),St.cancelAnimationFrame(t)),t}clearTimersOnDispose_(){this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",()=>{[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(([t,n])=>{this[t].forEach((r,l)=>this[n](l))}),this.clearingTimersOnDispose_=!1}))}getIsDisabled(){return!!this.el_.disabled}getIsExpresslyInert(){return this.el_.inert&&!this.el_.ownerDocument.documentElement.inert}getIsFocusable(t){return(t||this.el_).tabIndex>=0&&!(this.getIsDisabled()||this.getIsExpresslyInert())}getIsAvailableToBeFocused(t){function n(d){const f=St.getComputedStyle(d,null),p=f.getPropertyValue("visibility");return f.getPropertyValue("display")!=="none"&&!["hidden","collapse"].includes(p)}function r(d){return!(!n(d.parentElement)||!n(d)||d.style.opacity==="0"||St.getComputedStyle(d).height==="0px"||St.getComputedStyle(d).width==="0px")}function l(d){if(d.offsetWidth+d.offsetHeight+d.getBoundingClientRect().height+d.getBoundingClientRect().width===0)return!1;const f={x:d.getBoundingClientRect().left+d.offsetWidth/2,y:d.getBoundingClientRect().top+d.offsetHeight/2};if(f.x<0||f.x>(li.documentElement.clientWidth||St.innerWidth)||f.y<0||f.y>(li.documentElement.clientHeight||St.innerHeight))return!1;let p=li.elementFromPoint(f.x,f.y);for(;p;){if(p===d)return!0;if(p.parentNode)p=p.parentNode;else return!1}}return t||(t=this.el()),!!(l(t)&&r(t)&&(!t.parentElement||t.tabIndex>=0))}static registerComponent(t,n){if(typeof t!="string"||!t)throw new Error(`Illegal component name, "${t}"; must be a non-empty string.`);const r=Rn.getComponent("Tech"),l=r&&r.isTech(n),d=Rn===n||Rn.prototype.isPrototypeOf(n.prototype);if(l||!d){let p;throw l?p="techs must be registered using Tech.registerTech()":p="must be a Component subclass",new Error(`Illegal component, "${t}"; ${p}.`)}t=na(t),Rn.components_||(Rn.components_={});const f=Rn.getComponent("Player");if(t==="Player"&&f&&f.players){const p=f.players,m=Object.keys(p);if(p&&m.length>0){for(let y=0;y<m.length;y++)if(p[m[y]]!==null)throw new Error("Can not register Player component after player has been created.")}}return Rn.components_[t]=n,Rn.components_[Ty(t)]=n,n}static getComponent(t){if(!(!t||!Rn.components_))return Rn.components_[t]}}Rn.registerComponent("Component",Rn);function K$(u,t,n){if(typeof t!="number"||t<0||t>n)throw new Error(`Failed to execute '${u}' on 'TimeRanges': The index provided (${t}) is non-numeric or out of bounds (0-${n}).`)}function nP(u,t,n,r){return K$(u,r,n.length-1),n[r][t]}function Yx(u){let t;return u===void 0||u.length===0?t={length:0,start(){throw new Error("This TimeRanges object is empty")},end(){throw new Error("This TimeRanges object is empty")}}:t={length:u.length,start:nP.bind(null,"start",0,u),end:nP.bind(null,"end",1,u)},St.Symbol&&St.Symbol.iterator&&(t[St.Symbol.iterator]=()=>(u||[]).values()),t}function Wu(u,t){return Array.isArray(u)?Yx(u):u===void 0||t===void 0?Yx():Yx([[u,t]])}const SO=function(u,t){u=u<0?0:u;let n=Math.floor(u%60),r=Math.floor(u/60%60),l=Math.floor(u/3600);const d=Math.floor(t/60%60),f=Math.floor(t/3600);return(isNaN(u)||u===1/0)&&(l=r=n="-"),l=l>0||f>0?l+":":"",r=((l||d>=10)&&r<10?"0"+r:r)+":",n=n<10?"0"+n:n,l+r+n};let zw=SO;function xO(u){zw=u}function AO(){zw=SO}function Uh(u,t=u){return zw(u,t)}var Y$=Object.freeze({__proto__:null,createTimeRanges:Wu,createTimeRange:Wu,setFormatTime:xO,resetFormatTime:AO,formatTime:Uh});function wO(u,t){let n=0,r,l;if(!t)return 0;(!u||!u.length)&&(u=Wu(0,0));for(let d=0;d<u.length;d++)r=u.start(d),l=u.end(d),l>t&&(l=t),n+=l-r;return n/t}function Ys(u){if(u instanceof Ys)return u;typeof u=="number"?this.code=u:typeof u=="string"?this.message=u:Hc(u)&&(typeof u.code=="number"&&(this.code=u.code),Object.assign(this,u)),this.message||(this.message=Ys.defaultMessages[this.code]||"")}Ys.prototype.code=0;Ys.prototype.message="";Ys.prototype.status=null;Ys.prototype.metadata=null;Ys.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];Ys.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};Ys.MEDIA_ERR_CUSTOM=0;Ys.prototype.MEDIA_ERR_CUSTOM=0;Ys.MEDIA_ERR_ABORTED=1;Ys.prototype.MEDIA_ERR_ABORTED=1;Ys.MEDIA_ERR_NETWORK=2;Ys.prototype.MEDIA_ERR_NETWORK=2;Ys.MEDIA_ERR_DECODE=3;Ys.prototype.MEDIA_ERR_DECODE=3;Ys.MEDIA_ERR_SRC_NOT_SUPPORTED=4;Ys.prototype.MEDIA_ERR_SRC_NOT_SUPPORTED=4;Ys.MEDIA_ERR_ENCRYPTED=5;Ys.prototype.MEDIA_ERR_ENCRYPTED=5;function Ey(u){return u!=null&&typeof u.then=="function"}function Uc(u){Ey(u)&&u.then(null,t=>{})}const zA=function(u){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((n,r,l)=>(u[r]&&(n[r]=u[r]),n),{cues:u.cues&&Array.prototype.map.call(u.cues,function(n){return{startTime:n.startTime,endTime:n.endTime,text:n.text,id:n.id}})})},W$=function(u){const t=u.$$("track"),n=Array.prototype.map.call(t,l=>l.track);return Array.prototype.map.call(t,function(l){const d=zA(l.track);return l.src&&(d.src=l.src),d}).concat(Array.prototype.filter.call(u.textTracks(),function(l){return n.indexOf(l)===-1}).map(zA))},X$=function(u,t){return u.forEach(function(n){const r=t.addRemoteTextTrack(n).track;!n.src&&n.cues&&n.cues.forEach(l=>r.addCue(l))}),t.textTracks()};var jA={textTracksToJson:W$,jsonToTextTracks:X$,trackToJson:zA};const Wx="vjs-modal-dialog";class Og extends Rn{constructor(t,n){super(t,n),this.handleKeyDown_=r=>this.handleKeyDown(r),this.close_=r=>this.close(r),this.opened_=this.hasBeenOpened_=this.hasBeenFilled_=!1,this.closeable(!this.options_.uncloseable),this.content(this.options_.content),this.contentEl_=ar("div",{className:`${Wx}-content`},{role:"document"}),this.descEl_=ar("p",{className:`${Wx}-description vjs-control-text`,id:this.el().getAttribute("aria-describedby")}),Nf(this.descEl_,this.description()),this.el_.appendChild(this.descEl_),this.el_.appendChild(this.contentEl_)}createEl(){return super.createEl("div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":`${this.id()}_description`,"aria-hidden":"true","aria-label":this.label(),role:"dialog","aria-live":"polite"})}dispose(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,super.dispose()}buildCSSClass(){return`${Wx} vjs-hidden ${super.buildCSSClass()}`}label(){return this.localize(this.options_.label||"Modal Window")}description(){let t=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(t+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),t}open(){if(this.opened_){this.options_.fillAlways&&this.fill();return}const t=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!t.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&t.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=t.controls(),t.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}opened(t){return typeof t=="boolean"&&this[t?"open":"close"](),this.opened_}close(){if(!this.opened_)return;const t=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&t.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&t.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger({type:"modalclose",bubbles:!0}),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}closeable(t){if(typeof t=="boolean"){const n=this.closeable_=!!t;let r=this.getChild("closeButton");if(n&&!r){const l=this.contentEl_;this.contentEl_=this.el_,r=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=l,this.on(r,"close",this.close_)}!n&&r&&(this.off(r,"close",this.close_),this.removeChild(r),r.dispose())}return this.closeable_}fill(){this.fillWith(this.content())}fillWith(t){const n=this.contentEl(),r=n.parentNode,l=n.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,r.removeChild(n),this.empty(),dO(n,t),this.trigger("modalfill"),l?r.insertBefore(n,l):r.appendChild(n);const d=this.getChild("closeButton");d&&r.appendChild(d.el_),this.trigger("aftermodalfill")}empty(){this.trigger("beforemodalempty"),VE(this.contentEl()),this.trigger("modalempty")}content(t){return typeof t<"u"&&(this.content_=t),this.content_}conditionalFocus_(){const t=li.activeElement,n=this.player_.el_;this.previouslyActiveEl_=null,(n.contains(t)||n===t)&&(this.previouslyActiveEl_=t,this.focus())}conditionalBlur_(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)}handleKeyDown(t){if(this.trigger({type:"modalKeydown",originalEvent:t,target:this,bubbles:!0}),t.stopPropagation(),t.key==="Escape"&&this.closeable()){t.preventDefault(),this.close();return}if(t.key!=="Tab")return;const n=this.focusableEls_(),r=this.el_.querySelector(":focus");let l;for(let d=0;d<n.length;d++)if(r===n[d]){l=d;break}li.activeElement===this.el_&&(l=0),t.shiftKey&&l===0?(n[n.length-1].focus(),t.preventDefault()):!t.shiftKey&&l===n.length-1&&(n[0].focus(),t.preventDefault())}focusableEls_(){const t=this.el_.querySelectorAll("*");return Array.prototype.filter.call(t,n=>(n instanceof St.HTMLAnchorElement||n instanceof St.HTMLAreaElement)&&n.hasAttribute("href")||(n instanceof St.HTMLInputElement||n instanceof St.HTMLSelectElement||n instanceof St.HTMLTextAreaElement||n instanceof St.HTMLButtonElement)&&!n.hasAttribute("disabled")||n instanceof St.HTMLIFrameElement||n instanceof St.HTMLObjectElement||n instanceof St.HTMLEmbedElement||n.hasAttribute("tabindex")&&n.getAttribute("tabindex")!==-1||n.hasAttribute("contenteditable"))}}Og.prototype.options_={pauseOnOpen:!0,temporary:!0};Rn.registerComponent("ModalDialog",Og);class Bh extends tu{constructor(t=[]){super(),this.tracks_=[],Object.defineProperty(this,"length",{get(){return this.tracks_.length}});for(let n=0;n<t.length;n++)this.addTrack(t[n])}addTrack(t){const n=this.tracks_.length;""+n in this||Object.defineProperty(this,n,{get(){return this.tracks_[n]}}),this.tracks_.indexOf(t)===-1&&(this.tracks_.push(t),this.trigger({track:t,type:"addtrack",target:this})),t.labelchange_=()=>{this.trigger({track:t,type:"labelchange",target:this})},Fd(t)&&t.addEventListener("labelchange",t.labelchange_)}removeTrack(t){let n;for(let r=0,l=this.length;r<l;r++)if(this[r]===t){n=this[r],n.off&&n.off(),this.tracks_.splice(r,1);break}n&&this.trigger({track:n,type:"removetrack",target:this})}getTrackById(t){let n=null;for(let r=0,l=this.length;r<l;r++){const d=this[r];if(d.id===t){n=d;break}}return n}}Bh.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(const u in Bh.prototype.allowedEvents_)Bh.prototype["on"+u]=null;const Xx=function(u,t){for(let n=0;n<u.length;n++)!Object.keys(u[n]).length||t.id===u[n].id||(u[n].enabled=!1)};class IO extends Bh{constructor(t=[]){for(let n=t.length-1;n>=0;n--)if(t[n].enabled){Xx(t,t[n]);break}super(t),this.changing_=!1}addTrack(t){t.enabled&&Xx(this,t),super.addTrack(t),t.addEventListener&&(t.enabledChange_=()=>{this.changing_||(this.changing_=!0,Xx(this,t),this.changing_=!1,this.trigger("change"))},t.addEventListener("enabledchange",t.enabledChange_))}removeTrack(t){super.removeTrack(t),t.removeEventListener&&t.enabledChange_&&(t.removeEventListener("enabledchange",t.enabledChange_),t.enabledChange_=null)}}const Qx=function(u,t){for(let n=0;n<u.length;n++)!Object.keys(u[n]).length||t.id===u[n].id||(u[n].selected=!1)};class CO extends Bh{constructor(t=[]){for(let n=t.length-1;n>=0;n--)if(t[n].selected){Qx(t,t[n]);break}super(t),this.changing_=!1,Object.defineProperty(this,"selectedIndex",{get(){for(let n=0;n<this.length;n++)if(this[n].selected)return n;return-1},set(){}})}addTrack(t){t.selected&&Qx(this,t),super.addTrack(t),t.addEventListener&&(t.selectedChange_=()=>{this.changing_||(this.changing_=!0,Qx(this,t),this.changing_=!1,this.trigger("change"))},t.addEventListener("selectedchange",t.selectedChange_))}removeTrack(t){super.removeTrack(t),t.removeEventListener&&t.selectedChange_&&(t.removeEventListener("selectedchange",t.selectedChange_),t.selectedChange_=null)}}class jw extends Bh{addTrack(t){super.addTrack(t),this.queueChange_||(this.queueChange_=()=>this.queueTrigger("change")),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=()=>this.trigger("selectedlanguagechange")),t.addEventListener("modechange",this.queueChange_),["metadata","chapters"].indexOf(t.kind)===-1&&t.addEventListener("modechange",this.triggerSelectedlanguagechange_)}removeTrack(t){super.removeTrack(t),t.removeEventListener&&(this.queueChange_&&t.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&t.removeEventListener("modechange",this.triggerSelectedlanguagechange_))}toJSON(){return this.tracks_.map(t=>t.toJSON())}}class Q${constructor(t=[]){this.trackElements_=[],Object.defineProperty(this,"length",{get(){return this.trackElements_.length}});for(let n=0,r=t.length;n<r;n++)this.addTrackElement_(t[n])}addTrackElement_(t){const n=this.trackElements_.length;""+n in this||Object.defineProperty(this,n,{get(){return this.trackElements_[n]}}),this.trackElements_.indexOf(t)===-1&&this.trackElements_.push(t)}getTrackElementByTrack_(t){let n;for(let r=0,l=this.trackElements_.length;r<l;r++)if(t===this.trackElements_[r].track){n=this.trackElements_[r];break}return n}removeTrackElement_(t){for(let n=0,r=this.trackElements_.length;n<r;n++)if(t===this.trackElements_[n]){this.trackElements_[n].track&&typeof this.trackElements_[n].track.off=="function"&&this.trackElements_[n].track.off(),typeof this.trackElements_[n].off=="function"&&this.trackElements_[n].off(),this.trackElements_.splice(n,1);break}}}class yE{constructor(t){yE.prototype.setCues_.call(this,t),Object.defineProperty(this,"length",{get(){return this.length_}})}setCues_(t){const n=this.length||0;let r=0;const l=t.length;this.cues_=t,this.length_=t.length;const d=function(f){""+f in this||Object.defineProperty(this,""+f,{get(){return this.cues_[f]}})};if(n<l)for(r=n;r<l;r++)d.call(this,r)}getCueById(t){let n=null;for(let r=0,l=this.length;r<l;r++){const d=this[r];if(d.id===t){n=d;break}}return n}}const J$={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},Z$={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},e7={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},iP={disabled:"disabled",hidden:"hidden",showing:"showing"};class qw extends tu{constructor(t={}){super();const n={id:t.id||"vjs_track_"+Su(),kind:t.kind||"",language:t.language||""};let r=t.label||"";for(const l in n)Object.defineProperty(this,l,{get(){return n[l]},set(){}});Object.defineProperty(this,"label",{get(){return r},set(l){l!==r&&(r=l,this.trigger("labelchange"))}})}}const Hw=function(u){return new URL(u,li.baseURI)},kO=function(u){return new URL(u,li.baseURI).href},Gw=function(u){if(typeof u=="string"){const n=u.split("?")[0].replace(/\/+$/,"").match(/\.([^.\/]+)$/);return n?n[1].toLowerCase():""}return""},WE=function(u,t=St.location){return Hw(u).origin!==t.origin};var t7=Object.freeze({__proto__:null,parseUrl:Hw,getAbsoluteURL:kO,getFileExtension:Gw,isCrossOrigin:WE});const rP=function(u,t){const n=new St.WebVTT.Parser(St,St.vttjs,St.WebVTT.StringDecoder()),r=[];n.oncue=function(l){t.addCue(l)},n.onparsingerror=function(l){r.push(l)},n.onflush=function(){t.trigger({type:"loadeddata",target:t})},n.parse(u),r.length>0&&(St.console&&St.console.groupCollapsed&&St.console.groupCollapsed(`Text Track parsing errors for ${t.src}`),r.forEach(l=>Mr.error(l)),St.console&&St.console.groupEnd&&St.console.groupEnd()),n.flush()},sP=function(u,t){const n={uri:u},r=WE(u);r&&(n.cors=r);const l=t.tech_.crossOrigin()==="use-credentials";l&&(n.withCredentials=l),RN(n,ks(this,function(d,f,p){if(d)return Mr.error(d,f);t.loaded_=!0,typeof St.WebVTT!="function"?t.tech_&&t.tech_.any(["vttjsloaded","vttjserror"],m=>{if(m.type==="vttjserror"){Mr.error(`vttjs failed to load, stopping trying to process ${t.src}`);return}return rP(p,t)}):rP(p,t)}))};class Hy extends qw{constructor(t={}){if(!t.tech)throw new Error("A tech was not provided.");const n=gs(t,{kind:e7[t.kind]||"subtitles",language:t.language||t.srclang||""});let r=iP[n.mode]||"disabled";const l=n.default;(n.kind==="metadata"||n.kind==="chapters")&&(r="hidden"),super(n),this.tech_=n.tech,this.cues_=[],this.activeCues_=[],this.preload_=this.tech_.preloadTextTracks!==!1;const d=new yE(this.cues_),f=new yE(this.activeCues_);let p=!1;this.timeupdateHandler=ks(this,function(y={}){if(!this.tech_.isDisposed()){if(!this.tech_.isReady_){y.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler));return}this.activeCues=this.activeCues,p&&(this.trigger("cuechange"),p=!1),y.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}});const m=()=>{this.stopTracking()};this.tech_.one("dispose",m),r!=="disabled"&&this.startTracking(),Object.defineProperties(this,{default:{get(){return l},set(){}},mode:{get(){return r},set(y){iP[y]&&r!==y&&(r=y,!this.preload_&&r!=="disabled"&&this.cues.length===0&&sP(this.src,this),this.stopTracking(),r!=="disabled"&&this.startTracking(),this.trigger("modechange"))}},cues:{get(){return this.loaded_?d:null},set(){}},activeCues:{get(){if(!this.loaded_)return null;if(this.cues.length===0)return f;const y=this.tech_.currentTime(),b=[];for(let _=0,A=this.cues.length;_<A;_++){const w=this.cues[_];w.startTime<=y&&w.endTime>=y&&b.push(w)}if(p=!1,b.length!==this.activeCues_.length)p=!0;else for(let _=0;_<b.length;_++)this.activeCues_.indexOf(b[_])===-1&&(p=!0);return this.activeCues_=b,f.setCues_(this.activeCues_),f},set(){}}}),n.src?(this.src=n.src,this.preload_||(this.loaded_=!0),(this.preload_||n.kind!=="subtitles"&&n.kind!=="captions")&&sP(this.src,this)):this.loaded_=!0}startTracking(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)}stopTracking(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)}addCue(t){let n=t;if(!("getCueAsHTML"in n)){n=new St.vttjs.VTTCue(t.startTime,t.endTime,t.text);for(const l in t)l in n||(n[l]=t[l]);n.id=t.id,n.originalCue_=t}const r=this.tech_.textTracks();for(let l=0;l<r.length;l++)r[l]!==this&&r[l].removeCue(n);this.cues_.push(n),this.cues.setCues_(this.cues_)}toJSON(){return jA.trackToJson(this)}removeCue(t){let n=this.cues_.length;for(;n--;){const r=this.cues_[n];if(r===t||r.originalCue_&&r.originalCue_===t){this.cues_.splice(n,1),this.cues.setCues_(this.cues_);break}}}}Hy.prototype.allowedEvents_={cuechange:"cuechange"};class DO extends qw{constructor(t={}){const n=gs(t,{kind:Z$[t.kind]||""});super(n);let r=!1;Object.defineProperty(this,"enabled",{get(){return r},set(l){typeof l!="boolean"||l===r||(r=l,this.trigger("enabledchange"))}}),n.enabled&&(this.enabled=n.enabled),this.loaded_=!0}}class RO extends qw{constructor(t={}){const n=gs(t,{kind:J$[t.kind]||""});super(n);let r=!1;Object.defineProperty(this,"selected",{get(){return r},set(l){typeof l!="boolean"||l===r||(r=l,this.trigger("selectedchange"))}}),n.selected&&(this.selected=n.selected)}}class Ud extends tu{constructor(t={}){super();let n;const r=new Hy(t);this.kind=r.kind,this.src=r.src,this.srclang=r.language,this.label=r.label,this.default=r.default,Object.defineProperties(this,{readyState:{get(){return n}},track:{get(){return r}}}),n=Ud.NONE,r.addEventListener("loadeddata",()=>{n=Ud.LOADED,this.trigger({type:"load",target:this})})}}Ud.prototype.allowedEvents_={load:"load"};Ud.NONE=0;Ud.LOADING=1;Ud.LOADED=2;Ud.ERROR=3;const bu={audio:{ListClass:IO,TrackClass:DO,capitalName:"Audio"},video:{ListClass:CO,TrackClass:RO,capitalName:"Video"},text:{ListClass:jw,TrackClass:Hy,capitalName:"Text"}};Object.keys(bu).forEach(function(u){bu[u].getterName=`${u}Tracks`,bu[u].privateName=`${u}Tracks_`});const Cg={remoteText:{ListClass:jw,TrackClass:Hy,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:Q$,TrackClass:Ud,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Jo=Object.assign({},bu,Cg);Cg.names=Object.keys(Cg);bu.names=Object.keys(bu);Jo.names=[].concat(Cg.names).concat(bu.names);function n7(u,t,n,r,l={}){const d=u.textTracks();l.kind=t,n&&(l.label=n),r&&(l.language=r),l.tech=u;const f=new Jo.text.TrackClass(l);return d.addTrack(f),f}let Es=class Io extends Rn{constructor(t={},n=function(){}){t.reportTouchActivity=!1,super(null,t,n),this.onDurationChange_=r=>this.onDurationChange(r),this.trackProgress_=r=>this.trackProgress(r),this.trackCurrentTime_=r=>this.trackCurrentTime(r),this.stopTrackingCurrentTime_=r=>this.stopTrackingCurrentTime(r),this.disposeSourceHandler_=r=>this.disposeSourceHandler(r),this.queuedHanders_=new Set,this.hasStarted_=!1,this.on("playing",function(){this.hasStarted_=!0}),this.on("loadstart",function(){this.hasStarted_=!1}),Jo.names.forEach(r=>{const l=Jo[r];t&&t[l.getterName]&&(this[l.privateName]=t[l.getterName])}),this.featuresProgressEvents||this.manualProgressOn(),this.featuresTimeupdateEvents||this.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(r=>{t[`native${r}Tracks`]===!1&&(this[`featuresNative${r}Tracks`]=!1)}),t.nativeCaptions===!1||t.nativeTextTracks===!1?this.featuresNativeTextTracks=!1:(t.nativeCaptions===!0||t.nativeTextTracks===!0)&&(this.featuresNativeTextTracks=!0),this.featuresNativeTextTracks||this.emulateTextTracks(),this.preloadTextTracks=t.preloadTextTracks!==!1,this.autoRemoteTextTracks_=new Jo.text.ListClass,this.initTrackListeners(),t.nativeControlsForTouch||this.emitTapEvents(),this.constructor&&(this.name_=this.constructor.name||"Unknown Tech")}triggerSourceset(t){this.isReady_||this.one("ready",()=>this.setTimeout(()=>this.triggerSourceset(t),1)),this.trigger({src:t,type:"sourceset"})}manualProgressOn(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)}manualProgressOff(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)}trackProgress(t){this.stopTrackingProgress(),this.progressInterval=this.setInterval(ks(this,function(){const n=this.bufferedPercent();this.bufferedPercent_!==n&&this.trigger("progress"),this.bufferedPercent_=n,n===1&&this.stopTrackingProgress()}),500)}onDurationChange(t){this.duration_=this.duration()}buffered(){return Wu(0,0)}bufferedPercent(){return wO(this.buffered(),this.duration_)}stopTrackingProgress(){this.clearInterval(this.progressInterval)}manualTimeUpdatesOn(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)}manualTimeUpdatesOff(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)}trackCurrentTime(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)}stopTrackingCurrentTime(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}dispose(){this.clearTracks(bu.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),super.dispose()}clearTracks(t){t=[].concat(t),t.forEach(n=>{const r=this[`${n}Tracks`]()||[];let l=r.length;for(;l--;){const d=r[l];n==="text"&&this.removeRemoteTextTrack(d),r.removeTrack(d)}})}cleanupAutoTextTracks(){const t=this.autoRemoteTextTracks_||[];let n=t.length;for(;n--;){const r=t[n];this.removeRemoteTextTrack(r)}}reset(){}crossOrigin(){}setCrossOrigin(){}error(t){return t!==void 0&&(this.error_=new Ys(t),this.trigger("error")),this.error_}played(){return this.hasStarted_?Wu(0,0):Wu()}play(){}setScrubbing(t){}scrubbing(){}setCurrentTime(t){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}initTrackListeners(){bu.names.forEach(t=>{const n=bu[t],r=()=>{this.trigger(`${t}trackchange`)},l=this[n.getterName]();l.addEventListener("removetrack",r),l.addEventListener("addtrack",r),this.on("dispose",()=>{l.removeEventListener("removetrack",r),l.removeEventListener("addtrack",r)})})}addWebVttScript_(){if(!St.WebVTT)if(li.body.contains(this.el())){if(!this.options_["vtt.js"]&&xg(kL)&&Object.keys(kL).length>0){this.trigger("vttjsloaded");return}const t=li.createElement("script");t.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",t.onload=()=>{this.trigger("vttjsloaded")},t.onerror=()=>{this.trigger("vttjserror")},this.on("dispose",()=>{t.onload=null,t.onerror=null}),St.WebVTT=!0,this.el().parentNode.appendChild(t)}else this.ready(this.addWebVttScript_)}emulateTextTracks(){const t=this.textTracks(),n=this.remoteTextTracks(),r=p=>t.addTrack(p.track),l=p=>t.removeTrack(p.track);n.on("addtrack",r),n.on("removetrack",l),this.addWebVttScript_();const d=()=>this.trigger("texttrackchange"),f=()=>{d();for(let p=0;p<t.length;p++){const m=t[p];m.removeEventListener("cuechange",d),m.mode==="showing"&&m.addEventListener("cuechange",d)}};f(),t.addEventListener("change",f),t.addEventListener("addtrack",f),t.addEventListener("removetrack",f),this.on("dispose",function(){n.off("addtrack",r),n.off("removetrack",l),t.removeEventListener("change",f),t.removeEventListener("addtrack",f),t.removeEventListener("removetrack",f);for(let p=0;p<t.length;p++)t[p].removeEventListener("cuechange",d)})}addTextTrack(t,n,r){if(!t)throw new Error("TextTrack kind is required but was not provided");return n7(this,t,n,r)}createRemoteTextTrack(t){const n=gs(t,{tech:this});return new Cg.remoteTextEl.TrackClass(n)}addRemoteTextTrack(t={},n){const r=this.createRemoteTextTrack(t);return typeof n!="boolean"&&(n=!1),this.remoteTextTrackEls().addTrackElement_(r),this.remoteTextTracks().addTrack(r.track),n===!1&&this.ready(()=>this.autoRemoteTextTracks_.addTrack(r.track)),r}removeRemoteTextTrack(t){const n=this.remoteTextTrackEls().getTrackElementByTrack_(t);this.remoteTextTrackEls().removeTrackElement_(n),this.remoteTextTracks().removeTrack(t),this.autoRemoteTextTracks_.removeTrack(t)}getVideoPlaybackQuality(){return{}}requestPictureInPicture(){return Promise.reject()}disablePictureInPicture(){return!0}setDisablePictureInPicture(){}requestVideoFrameCallback(t){const n=Su();return!this.isReady_||this.paused()?(this.queuedHanders_.add(n),this.one("playing",()=>{this.queuedHanders_.has(n)&&(this.queuedHanders_.delete(n),t())})):this.requestNamedAnimationFrame(n,t),n}cancelVideoFrameCallback(t){this.queuedHanders_.has(t)?this.queuedHanders_.delete(t):this.cancelNamedAnimationFrame(t)}setPoster(){}playsinline(){}setPlaysinline(){}overrideNativeAudioTracks(t){}overrideNativeVideoTracks(t){}canPlayType(t){return""}static canPlayType(t){return""}static canPlaySource(t,n){return Io.canPlayType(t.type)}static isTech(t){return t.prototype instanceof Io||t instanceof Io||t===Io}static registerTech(t,n){if(Io.techs_||(Io.techs_={}),!Io.isTech(n))throw new Error(`Tech ${t} must be a Tech`);if(!Io.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!Io.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return t=na(t),Io.techs_[t]=n,Io.techs_[Ty(t)]=n,t!=="Tech"&&Io.defaultTechOrder_.push(t),n}static getTech(t){if(t){if(Io.techs_&&Io.techs_[t])return Io.techs_[t];if(t=na(t),St&&St.videojs&&St.videojs[t])return Mr.warn(`The ${t} tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)`),St.videojs[t]}}};Jo.names.forEach(function(u){const t=Jo[u];Es.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}});Es.prototype.featuresVolumeControl=!0;Es.prototype.featuresMuteControl=!0;Es.prototype.featuresFullscreenResize=!1;Es.prototype.featuresPlaybackRate=!1;Es.prototype.featuresProgressEvents=!1;Es.prototype.featuresSourceset=!1;Es.prototype.featuresTimeupdateEvents=!1;Es.prototype.featuresNativeTextTracks=!1;Es.prototype.featuresVideoFrameCallback=!1;Es.withSourceHandlers=function(u){u.registerSourceHandler=function(n,r){let l=u.sourceHandlers;l||(l=u.sourceHandlers=[]),r===void 0&&(r=l.length),l.splice(r,0,n)},u.canPlayType=function(n){const r=u.sourceHandlers||[];let l;for(let d=0;d<r.length;d++)if(l=r[d].canPlayType(n),l)return l;return""},u.selectSourceHandler=function(n,r){const l=u.sourceHandlers||[];let d;for(let f=0;f<l.length;f++)if(d=l[f].canHandleSource(n,r),d)return l[f];return null},u.canPlaySource=function(n,r){const l=u.selectSourceHandler(n,r);return l?l.canHandleSource(n,r):""},["seekable","seeking","duration"].forEach(function(n){const r=this[n];typeof r=="function"&&(this[n]=function(){return this.sourceHandler_&&this.sourceHandler_[n]?this.sourceHandler_[n].apply(this.sourceHandler_,arguments):r.apply(this,arguments)})},u.prototype),u.prototype.setSource=function(n){let r=u.selectSourceHandler(n,this.options_);r||(u.nativeSourceHandler?r=u.nativeSourceHandler:Mr.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),r!==u.nativeSourceHandler&&(this.currentSource_=n),this.sourceHandler_=r.handleSource(n,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},u.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};Rn.registerComponent("Tech",Es);Es.registerTech("Tech",Es);Es.defaultTechOrder_=[];const Mh={},vE={},TE={};function i7(u,t){Mh[u]=Mh[u]||[],Mh[u].push(t)}function r7(u,t,n){u.setTimeout(()=>wh(t,Mh[t.type],n,u),1)}function s7(u,t){u.forEach(n=>n.setTech&&n.setTech(t))}function a7(u,t,n){return u.reduceRight(Vw(n),t[n]())}function o7(u,t,n,r){return t[n](u.reduce(Vw(n),r))}function aP(u,t,n,r=null){const l="call"+na(n),d=u.reduce(Vw(l),r),f=d===TE,p=f?null:t[n](d);return c7(u,n,p,f),p}const l7={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},u7={setCurrentTime:1,setMuted:1,setVolume:1},oP={play:1,pause:1};function Vw(u){return(t,n)=>t===TE?TE:n[u]?n[u](t):t}function c7(u,t,n,r){for(let l=u.length-1;l>=0;l--){const d=u[l];d[t]&&d[t](r,n)}}function d7(u){vE.hasOwnProperty(u.id())&&delete vE[u.id()]}function f7(u,t){const n=vE[u.id()];let r=null;if(n==null)return r=t(u),vE[u.id()]=[[t,r]],r;for(let l=0;l<n.length;l++){const[d,f]=n[l];d===t&&(r=f)}return r===null&&(r=t(u),n.push([t,r])),r}function wh(u={},t=[],n,r,l=[],d=!1){const[f,...p]=t;if(typeof f=="string")wh(u,Mh[f],n,r,l,d);else if(f){const m=f7(r,f);if(!m.setSource)return l.push(m),wh(u,p,n,r,l,d);m.setSource(Object.assign({},u),function(y,b){if(y)return wh(u,p,n,r,l,d);l.push(m),wh(b,u.type===b.type?p:Mh[b.type],n,r,l,d)})}else p.length?wh(u,p,n,r,l,d):d?n(u,l):wh(u,Mh["*"],n,r,l,!0)}const h7={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},EE=function(u=""){const t=Gw(u);return h7[t.toLowerCase()]||""},p7=(u,t)=>{if(!t)return"";if(u.cache_.source.src===t&&u.cache_.source.type)return u.cache_.source.type;const n=u.cache_.sources.filter(l=>l.src===t);if(n.length)return n[0].type;const r=u.$$("source");for(let l=0;l<r.length;l++){const d=r[l];if(d.type&&d.src&&d.src===t)return d.type}return EE(t)},LO=function(u){if(Array.isArray(u)){let t=[];u.forEach(function(n){n=LO(n),Array.isArray(n)?t=t.concat(n):Hc(n)&&t.push(n)}),u=t}else typeof u=="string"&&u.trim()?u=[lP({src:u})]:Hc(u)&&typeof u.src=="string"&&u.src&&u.src.trim()?u=[lP(u)]:u=[];return u};function lP(u){if(!u.type){const t=EE(u.src);t&&(u.type=t)}return u}var g7=`<svg xmlns="http://www.w3.org/2000/svg">
  <defs>
    <symbol viewBox="0 0 48 48" id="vjs-icon-play">
      <path d="M16 10v28l22-14z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-pause">
      <path d="M12 38h8V10h-8v28zm16-28v28h8V10h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-audio">
      <path d="M24 2C14.06 2 6 10.06 6 20v14c0 3.31 2.69 6 6 6h6V24h-8v-4c0-7.73 6.27-14 14-14s14 6.27 14 14v4h-8v16h6c3.31 0 6-2.69 6-6V20c0-9.94-8.06-18-18-18z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-captions">
      <path d="M38 8H10c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h28c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM22 22h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2zm14 0h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-subtitles">
      <path d="M40 8H8c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM8 24h8v4H8v-4zm20 12H8v-4h20v4zm12 0h-8v-4h8v4zm0-8H20v-4h20v4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-enter">
      <path d="M14 28h-4v10h10v-4h-6v-6zm-4-8h4v-6h6v-4H10v10zm24 14h-6v4h10V28h-4v6zm-6-24v4h6v6h4V10H28z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-exit">
      <path d="M10 32h6v6h4V28H10v4zm6-16h-6v4h10V10h-4v6zm12 22h4v-6h6v-4H28v10zm4-22v-6h-4v10h10v-4h-6z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-play-circle">
      <path d="M20 33l12-9-12-9v18zm4-29C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-mute">
      <path d="M33 24c0-3.53-2.04-6.58-5-8.05v4.42l4.91 4.91c.06-.42.09-.85.09-1.28zm5 0c0 1.88-.41 3.65-1.08 5.28l3.03 3.03C41.25 29.82 42 27 42 24c0-8.56-5.99-15.72-14-17.54v4.13c5.78 1.72 10 7.07 10 13.41zM8.55 6L6 8.55 15.45 18H6v12h8l10 10V26.55l8.51 8.51c-1.34 1.03-2.85 1.86-4.51 2.36v4.13a17.94 17.94 0 0 0 7.37-3.62L39.45 42 42 39.45l-18-18L8.55 6zM24 8l-4.18 4.18L24 16.36V8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-low">
      <path d="M14 18v12h8l10 10V8L22 18h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-medium">
      <path d="M37 24c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zm-27-6v12h8l10 10V8L18 18h-8z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-high">
      <path d="M6 18v12h8l10 10V8L14 18H6zm27 6c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zM28 6.46v4.13c5.78 1.72 10 7.07 10 13.41s-4.22 11.69-10 13.41v4.13c8.01-1.82 14-8.97 14-17.54S36.01 8.28 28 6.46z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-spinner">
      <path d="M18.8 21l9.53-16.51C26.94 4.18 25.49 4 24 4c-4.8 0-9.19 1.69-12.64 4.51l7.33 12.69.11-.2zm24.28-3c-1.84-5.85-6.3-10.52-11.99-12.68L23.77 18h19.31zm.52 2H28.62l.58 1 9.53 16.5C41.99 33.94 44 29.21 44 24c0-1.37-.14-2.71-.4-4zm-26.53 4l-7.8-13.5C6.01 14.06 4 18.79 4 24c0 1.37.14 2.71.4 4h14.98l-2.31-4zM4.92 30c1.84 5.85 6.3 10.52 11.99 12.68L24.23 30H4.92zm22.54 0l-7.8 13.51c1.4.31 2.85.49 4.34.49 4.8 0 9.19-1.69 12.64-4.51L29.31 26.8 27.46 30z"></path>
    </symbol>
    <symbol viewBox="0 0 24 24" id="vjs-icon-hd">
      <path d="M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8 12H9.5v-2h-2v2H6V9h1.5v2.5h2V9H11v6zm2-6h4c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1h-4V9zm1.5 4.5h2v-3h-2v3z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-chapters">
      <path d="M6 26h4v-4H6v4zm0 8h4v-4H6v4zm0-16h4v-4H6v4zm8 8h28v-4H14v4zm0 8h28v-4H14v4zm0-20v4h28v-4H14z"></path>
    </symbol>
    <symbol viewBox="0 0 40 40" id="vjs-icon-downloading">
      <path d="M18.208 36.875q-3.208-.292-5.979-1.729-2.771-1.438-4.812-3.729-2.042-2.292-3.188-5.229-1.146-2.938-1.146-6.23 0-6.583 4.334-11.416 4.333-4.834 10.833-5.5v3.166q-5.167.75-8.583 4.646Q6.25 14.75 6.25 19.958q0 5.209 3.396 9.104 3.396 3.896 8.562 4.646zM20 28.417L11.542 20l2.083-2.083 4.917 4.916v-11.25h2.916v11.25l4.875-4.916L28.417 20zm1.792 8.458v-3.167q1.833-.25 3.541-.958 1.709-.708 3.167-1.875l2.333 2.292q-1.958 1.583-4.25 2.541-2.291.959-4.791 1.167zm6.791-27.792q-1.541-1.125-3.25-1.854-1.708-.729-3.541-1.021V3.042q2.5.25 4.77 1.208 2.271.958 4.271 2.5zm4.584 21.584l-2.25-2.25q1.166-1.5 1.854-3.209.687-1.708.937-3.541h3.209q-.292 2.5-1.229 4.791-.938 2.292-2.521 4.209zm.541-12.417q-.291-1.833-.958-3.562-.667-1.73-1.833-3.188l2.375-2.208q1.541 1.916 2.458 4.208.917 2.292 1.167 4.75z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download">
      <path d="M10.8 40.55q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h26.35v-7.7h3.4v7.7q0 1.4-1 2.4t-2.4 1zM24 32.1L13.9 22.05l2.45-2.45 5.95 5.95V7.15h3.4v18.4l5.95-5.95 2.45 2.45z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-done">
      <path d="M9.8 40.5v-3.45h28.4v3.45zm9.2-9.05L7.4 19.85l2.45-2.35L19 26.65l19.2-19.2 2.4 2.4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-off">
      <path d="M4.9 4.75L43.25 43.1 41 45.3l-4.75-4.75q-.05.05-.075.025-.025-.025-.075-.025H10.8q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h22.05l-7-7-1.85 1.8L13.9 21.9l1.85-1.85L2.7 7zm26.75 14.7l2.45 2.45-3.75 3.8-2.45-2.5zM25.7 7.15V21.1l-3.4-3.45V7.15z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-share">
      <path d="M36 32.17c-1.52 0-2.89.59-3.93 1.54L17.82 25.4c.11-.45.18-.92.18-1.4s-.07-.95-.18-1.4l14.1-8.23c1.07 1 2.5 1.62 4.08 1.62 3.31 0 6-2.69 6-6s-2.69-6-6-6-6 2.69-6 6c0 .48.07.95.18 1.4l-14.1 8.23c-1.07-1-2.5-1.62-4.08-1.62-3.31 0-6 2.69-6 6s2.69 6 6 6c1.58 0 3.01-.62 4.08-1.62l14.25 8.31c-.1.42-.16.86-.16 1.31A5.83 5.83 0 1 0 36 32.17z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cog">
      <path d="M38.86 25.95c.08-.64.14-1.29.14-1.95s-.06-1.31-.14-1.95l4.23-3.31c.38-.3.49-.84.24-1.28l-4-6.93c-.25-.43-.77-.61-1.22-.43l-4.98 2.01c-1.03-.79-2.16-1.46-3.38-1.97L29 4.84c-.09-.47-.5-.84-1-.84h-8c-.5 0-.91.37-.99.84l-.75 5.3a14.8 14.8 0 0 0-3.38 1.97L9.9 10.1a1 1 0 0 0-1.22.43l-4 6.93c-.25.43-.14.97.24 1.28l4.22 3.31C9.06 22.69 9 23.34 9 24s.06 1.31.14 1.95l-4.22 3.31c-.38.3-.49.84-.24 1.28l4 6.93c.25.43.77.61 1.22.43l4.98-2.01c1.03.79 2.16 1.46 3.38 1.97l.75 5.3c.08.47.49.84.99.84h8c.5 0 .91-.37.99-.84l.75-5.3a14.8 14.8 0 0 0 3.38-1.97l4.98 2.01a1 1 0 0 0 1.22-.43l4-6.93c.25-.43.14-.97-.24-1.28l-4.22-3.31zM24 31c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-square">
      <path d="M36 8H12c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h24c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zm0 28H12V12h24v24z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle">
      <circle cx="24" cy="24" r="20"></circle>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-outline">
      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-inner-circle">
      <path d="M24 4C12.97 4 4 12.97 4 24s8.97 20 20 20 20-8.97 20-20S35.03 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16zm6-16c0 3.31-2.69 6-6 6s-6-2.69-6-6 2.69-6 6-6 6 2.69 6 6z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cancel">
      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm10 27.17L31.17 34 24 26.83 16.83 34 14 31.17 21.17 24 14 16.83 16.83 14 24 21.17 31.17 14 34 16.83 26.83 24 34 31.17z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-replay">
      <path d="M24 10V2L14 12l10 10v-8c6.63 0 12 5.37 12 12s-5.37 12-12 12-12-5.37-12-12H8c0 8.84 7.16 16 16 16s16-7.16 16-16-7.16-16-16-16z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-repeat">
      <path d="M14 14h20v6l8-8-8-8v6H10v12h4v-8zm20 20H14v-6l-8 8 8 8v-6h24V26h-4v8z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-5">
      <path d="M17.689 98l-8.697 8.696 8.697 8.697 2.486-2.485-4.32-4.319h1.302c4.93 0 9.071 1.722 12.424 5.165 3.352 3.443 5.029 7.638 5.029 12.584h3.55c0-2.958-.553-5.73-1.658-8.313-1.104-2.583-2.622-4.841-4.555-6.774-1.932-1.932-4.19-3.45-6.773-4.555-2.584-1.104-5.355-1.657-8.313-1.657H15.5l4.615-4.615zm-8.08 21.659v13.861h11.357v5.008H9.609V143h12.7c.834 0 1.55-.298 2.146-.894.596-.597.895-1.31.895-2.145v-7.781c0-.835-.299-1.55-.895-2.147a2.929 2.929 0 0 0-2.147-.894h-8.227v-5.096H25.35v-4.384z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-10">
      <path d="M42.315 125.63c0-4.997-1.694-9.235-5.08-12.713-3.388-3.479-7.571-5.218-12.552-5.218h-1.315l4.363 4.363-2.51 2.51-8.787-8.786L25.221 97l2.45 2.45-4.662 4.663h1.375c2.988 0 5.788.557 8.397 1.673 2.61 1.116 4.892 2.65 6.844 4.602 1.953 1.953 3.487 4.234 4.602 6.844 1.116 2.61 1.674 5.41 1.674 8.398zM8.183 142v-19.657H3.176V117.8h9.643V142zm13.63 0c-1.156 0-2.127-.393-2.912-1.178-.778-.778-1.168-1.746-1.168-2.902v-16.04c0-1.156.393-2.127 1.178-2.912.779-.779 1.746-1.168 2.902-1.168h7.696c1.156 0 2.126.392 2.911 1.177.779.78 1.168 1.747 1.168 2.903v16.04c0 1.156-.392 2.127-1.177 2.912-.779.779-1.746 1.168-2.902 1.168zm.556-4.636h6.583v-15.02H22.37z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-30">
      <path d="M26.047 97l-8.733 8.732 8.733 8.733 2.496-2.494-4.336-4.338h1.307c4.95 0 9.108 1.73 12.474 5.187 3.367 3.458 5.051 7.668 5.051 12.635h3.565c0-2.97-.556-5.751-1.665-8.346-1.109-2.594-2.633-4.862-4.574-6.802-1.94-1.941-4.208-3.466-6.803-4.575-2.594-1.109-5.375-1.664-8.345-1.664H23.85l4.634-4.634zM2.555 117.531v4.688h10.297v5.25H5.873v4.687h6.979v5.156H2.555V142H13.36c1.061 0 1.95-.395 2.668-1.186.718-.79 1.076-1.772 1.076-2.94v-16.218c0-1.168-.358-2.149-1.076-2.94-.717-.79-1.607-1.185-2.668-1.185zm22.482.14c-1.149 0-2.11.39-2.885 1.165-.78.78-1.172 1.744-1.172 2.893v15.943c0 1.149.388 2.11 1.163 2.885.78.78 1.745 1.172 2.894 1.172h7.649c1.148 0 2.11-.388 2.884-1.163.78-.78 1.17-1.745 1.17-2.894v-15.943c0-1.15-.386-2.111-1.16-2.885-.78-.78-1.746-1.172-2.894-1.172zm.553 4.518h6.545v14.93H25.59z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-5">
      <path d="M29.508 97l-2.431 2.43 4.625 4.625h-1.364c-2.965 0-5.742.554-8.332 1.66-2.589 1.107-4.851 2.629-6.788 4.566-1.937 1.937-3.458 4.2-4.565 6.788-1.107 2.59-1.66 5.367-1.66 8.331h3.557c0-4.957 1.68-9.16 5.04-12.611 3.36-3.45 7.51-5.177 12.451-5.177h1.304l-4.326 4.33 2.49 2.49 8.715-8.716zm-9.783 21.61v13.89h11.382v5.018H19.725V142h12.727a2.93 2.93 0 0 0 2.15-.896 2.93 2.93 0 0 0 .896-2.15v-7.798c0-.837-.299-1.554-.896-2.152a2.93 2.93 0 0 0-2.15-.896h-8.245V123h11.29v-4.392z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-10">
      <path d="M23.119 97l-2.386 2.383 4.538 4.538h-1.339c-2.908 0-5.633.543-8.173 1.63-2.54 1.085-4.76 2.577-6.66 4.478-1.9 1.9-3.392 4.12-4.478 6.66-1.085 2.54-1.629 5.264-1.629 8.172h3.49c0-4.863 1.648-8.986 4.944-12.372 3.297-3.385 7.368-5.078 12.216-5.078h1.279l-4.245 4.247 2.443 2.442 8.55-8.55zm-9.52 21.45v4.42h4.871V142h4.513v-23.55zm18.136 0c-1.125 0-2.066.377-2.824 1.135-.764.764-1.148 1.709-1.148 2.834v15.612c0 1.124.38 2.066 1.139 2.824.764.764 1.708 1.145 2.833 1.145h7.489c1.125 0 2.066-.378 2.824-1.136.764-.764 1.145-1.709 1.145-2.833v-15.612c0-1.125-.378-2.067-1.136-2.825-.764-.764-1.708-1.145-2.833-1.145zm.54 4.42h6.408v14.617h-6.407z"></path>
    </symbol>
    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-30">
      <path d="M25.549 97l-2.437 2.434 4.634 4.635H26.38c-2.97 0-5.753.555-8.347 1.664-2.594 1.109-4.861 2.633-6.802 4.574-1.94 1.94-3.465 4.207-4.574 6.802-1.109 2.594-1.664 5.377-1.664 8.347h3.565c0-4.967 1.683-9.178 5.05-12.636 3.366-3.458 7.525-5.187 12.475-5.187h1.307l-4.335 4.338 2.495 2.494 8.732-8.732zm-11.553 20.53v4.689h10.297v5.249h-6.978v4.688h6.978v5.156H13.996V142h10.808c1.06 0 1.948-.395 2.666-1.186.718-.79 1.077-1.771 1.077-2.94v-16.217c0-1.169-.36-2.15-1.077-2.94-.718-.79-1.605-1.186-2.666-1.186zm21.174.168c-1.149 0-2.11.389-2.884 1.163-.78.78-1.172 1.745-1.172 2.894v15.942c0 1.15.388 2.11 1.162 2.885.78.78 1.745 1.17 2.894 1.17h7.649c1.149 0 2.11-.386 2.885-1.16.78-.78 1.17-1.746 1.17-2.895v-15.942c0-1.15-.387-2.11-1.161-2.885-.78-.78-1.745-1.172-2.894-1.172zm.552 4.516h6.542v14.931h-6.542z"></path>
    </symbol>
    <symbol viewBox="0 0 512 512" id="vjs-icon-audio-description">
      <g fill-rule="evenodd"><path d="M227.29 381.351V162.993c50.38-1.017 89.108-3.028 117.631 17.126 27.374 19.342 48.734 56.965 44.89 105.325-4.067 51.155-41.335 94.139-89.776 98.475-24.085 2.155-71.972 0-71.972 0s-.84-1.352-.773-2.568m48.755-54.804c31.43 1.26 53.208-16.633 56.495-45.386 4.403-38.51-21.188-63.552-58.041-60.796v103.612c-.036 1.466.575 2.22 1.546 2.57"></path><path d="M383.78 381.328c13.336 3.71 17.387-11.06 23.215-21.408 12.722-22.571 22.294-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.226 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M425.154 381.328c13.336 3.71 17.384-11.061 23.215-21.408 12.721-22.571 22.291-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.511c-.586 3.874 2.226 7.315 3.866 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M466.26 381.328c13.337 3.71 17.385-11.061 23.216-21.408 12.722-22.571 22.292-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.225 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894M4.477 383.005H72.58l18.573-28.484 64.169-.135s.065 19.413.065 28.62h48.756V160.307h-58.816c-5.653 9.537-140.85 222.697-140.85 222.697zm152.667-145.282v71.158l-40.453-.27 40.453-70.888z"></path></g>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-next-item">
      <path d="M12 36l17-12-17-12v24zm20-24v24h4V12h-4z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-previous-item">
      <path d="M12 12h4v24h-4zm7 12l17 12V12z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-shuffle">
      <path d="M21.17 18.34L10.83 8 8 10.83l10.34 10.34 2.83-2.83zM29 8l4.09 4.09L8 37.17 10.83 40l25.09-25.09L40 19V8H29zm.66 18.83l-2.83 2.83 6.26 6.26L29 40h11V29l-4.09 4.09-6.25-6.26z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-cast">
      <path d="M42 6H6c-2.21 0-4 1.79-4 4v6h4v-6h36v28H28v4h14c2.21 0 4-1.79 4-4V10c0-2.21-1.79-4-4-4zM2 36v6h6c0-3.31-2.69-6-6-6zm0-8v4c5.52 0 10 4.48 10 10h4c0-7.73-6.27-14-14-14zm0-8v4c9.94 0 18 8.06 18 18h4c0-12.15-9.85-22-22-22z"></path>
    </symbol>
    <symbol viewBox="0 0 48 48" id="vjs-icon-picture-in-picture-enter">
      <path d="M38 22H22v11.99h16V22zm8 16V9.96C46 7.76 44.2 6 42 6H6C3.8 6 2 7.76 2 9.96V38c0 2.2 1.8 4 4 4h36c2.2 0 4-1.8 4-4zm-4 .04H6V9.94h36v28.1z"></path>
    </symbol>
    <symbol viewBox="0 0 22 18" id="vjs-icon-picture-in-picture-exit">
      <path d="M18 4H4v10h14V4zm4 12V1.98C22 .88 21.1 0 20 0H2C.9 0 0 .88 0 1.98V16c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H2V1.97h18v14.05z"></path>
      <path fill="none" d="M-1-3h24v24H-1z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-facebook">
      <path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759H734V905H479V609h255V391q0-186 104-288.5T1115 0q147 0 228 12z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-linkedin">
      <path d="M477 625v991H147V625h330zm21-306q1 73-50.5 122T312 490h-2q-82 0-132-49t-50-122q0-74 51.5-122.5T314 148t133 48.5T498 319zm1166 729v568h-329v-530q0-105-40.5-164.5T1168 862q-63 0-105.5 34.5T999 982q-11 30-11 81v553H659q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5T1285 602q171 0 275 113.5t104 332.5z"></path>
    </symbol>
    <symbol viewBox="0 0 1200 1227" id="vjs-icon-twitter">
      <path d="M714.163 519.284L1160.89 0H1055.03L667.137 450.887L357.328 0H0L468.492 681.821L0 1226.37H105.866L515.491 750.218L842.672 1226.37H1200L714.137 519.284H714.163ZM569.165 687.828L521.697 619.934L144.011 79.6944H306.615L611.412 515.685L658.88 583.579L1055.08 1150.3H892.476L569.165 687.854V687.828Z"/>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-tumblr">
      <path d="M1328 1329l80 237q-23 35-111 66t-177 32q-104 2-190.5-26T787 1564t-95-106-55.5-120-16.5-118V676H452V461q72-26 129-69.5t91-90 58-102 34-99T779 12q1-5 4.5-8.5T791 0h244v424h333v252h-334v518q0 30 6.5 56t22.5 52.5 49.5 41.5 81.5 14q78-2 134-29z"></path>
    </symbol>
    <symbol viewBox="0 0 1792 1792" id="vjs-icon-pinterest">
      <path d="M1664 896q0 209-103 385.5T1281.5 1561 896 1664q-111 0-218-32 59-93 78-164 9-34 54-211 20 39 73 67.5t114 28.5q121 0 216-68.5t147-188.5 52-270q0-114-59.5-214T1180 449t-255-63q-105 0-196 29t-154.5 77-109 110.5-67 129.5T377 866q0 104 40 183t117 111q30 12 38-20 2-7 8-31t8-30q6-23-11-43-51-61-51-151 0-151 104.5-259.5T904 517q151 0 235.5 82t84.5 213q0 170-68.5 289T980 1220q-61 0-98-43.5T859 1072q8-35 26.5-93.5t30-103T927 800q0-50-27-83t-77-33q-62 0-105 57t-43 142q0 73 25 122l-99 418q-17 70-13 177-206-91-333-281T128 896q0-209 103-385.5T510.5 231 896 128t385.5 103T1561 510.5 1664 896z"></path>
    </symbol>
  </defs>
</svg>`;const uP=hE?10009:pE?461:8,Qp={codes:{play:415,pause:19,ff:417,rw:412,back:uP},names:{415:"play",19:"pause",417:"ff",412:"rw",[uP]:"back"},isEventKey(u,t){return t=t.toLowerCase(),!!(this.names[u.keyCode]&&this.names[u.keyCode]===t)},getEventName(u){if(this.names[u.keyCode])return this.names[u.keyCode];if(this.codes[u.code]){const t=this.codes[u.code];return this.names[t]}return null}},cP=5;class m7 extends tu{constructor(t){super(),this.player_=t,this.focusableComponents=[],this.isListening_=!1,this.isPaused_=!1,this.onKeyDown_=this.onKeyDown_.bind(this),this.lastFocusedComponent_=null}start(){this.isListening_||(this.player_.on("keydown",this.onKeyDown_),this.player_.on("modalKeydown",this.onKeyDown_),this.player_.on("loadedmetadata",()=>{this.focus(this.updateFocusableComponents()[0])}),this.player_.on("modalclose",()=>{this.refocusComponent()}),this.player_.on("focusin",this.handlePlayerFocus_.bind(this)),this.player_.on("focusout",this.handlePlayerBlur_.bind(this)),this.isListening_=!0,this.player_.errorDisplay&&this.player_.errorDisplay.on("aftermodalfill",()=>{this.updateFocusableComponents(),this.focusableComponents.length&&(this.focusableComponents.length>1?this.focusableComponents[1].focus():this.focusableComponents[0].focus())}))}stop(){this.player_.off("keydown",this.onKeyDown_),this.isListening_=!1}onKeyDown_(t){const n=t.originalEvent?t.originalEvent:t;if(["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(n.key)){if(this.isPaused_)return;n.preventDefault();const r=n.key.substring(5).toLowerCase();this.move(r)}else if(Qp.isEventKey(n,"play")||Qp.isEventKey(n,"pause")||Qp.isEventKey(n,"ff")||Qp.isEventKey(n,"rw")){n.preventDefault();const r=Qp.getEventName(n);this.performMediaAction_(r)}else Qp.isEventKey(n,"Back")&&t.target&&typeof t.target.closeable=="function"&&t.target.closeable()&&(n.preventDefault(),t.target.close())}performMediaAction_(t){if(this.player_)switch(t){case"play":this.player_.paused()&&this.player_.play();break;case"pause":this.player_.paused()||this.player_.pause();break;case"ff":this.userSeek_(this.player_.currentTime()+cP);break;case"rw":this.userSeek_(this.player_.currentTime()-cP);break}}userSeek_(t){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(t)}pause(){this.isPaused_=!0}resume(){this.isPaused_=!1}handlePlayerBlur_(t){const n=t.relatedTarget;let r=null;const l=this.getCurrentComponent(t.target);n&&(r=!!n.closest(".video-js"),n.classList.contains("vjs-text-track-settings")&&!this.isPaused_&&this.searchForTrackSelect_()),(!t.currentTarget.contains(t.relatedTarget)&&!r||!n)&&(l&&l.name()==="CloseButton"?this.refocusComponent():(this.pause(),l&&l.el()&&(this.lastFocusedComponent_=l)))}handlePlayerFocus_(){this.getCurrentComponent()&&this.getCurrentComponent().getIsFocusable()&&this.resume()}updateFocusableComponents(){const t=this.player_,n=[];function r(l){for(const d of l)d.hasOwnProperty("el_")&&d.getIsFocusable()&&d.getIsAvailableToBeFocused(d.el())&&n.push(d),d.hasOwnProperty("children_")&&d.children_.length>0&&r(d.children_)}return t.children_.forEach(l=>{if(l.hasOwnProperty("el_"))if(l.getIsFocusable&&l.getIsAvailableToBeFocused&&l.getIsFocusable()&&l.getIsAvailableToBeFocused(l.el())){n.push(l);return}else l.hasOwnProperty("children_")&&l.children_.length>0?r(l.children_):l.hasOwnProperty("items")&&l.items.length>0?r(l.items):this.findSuitableDOMChild(l)&&n.push(l);if(l.name_==="ErrorDisplay"&&l.opened_){const d=l.el_.querySelector(".vjs-errors-ok-button-container");d&&d.querySelectorAll("button").forEach((p,m)=>{n.push({name:()=>"ModalButton"+(m+1),el:()=>p,getPositions:()=>{const y=p.getBoundingClientRect(),b={x:y.x,y:y.y,width:y.width,height:y.height,top:y.top,right:y.right,bottom:y.bottom,left:y.left},_={x:y.left+y.width/2,y:y.top+y.height/2,width:0,height:0,top:y.top+y.height/2,right:y.left+y.width/2,bottom:y.top+y.height/2,left:y.left+y.width/2};return{boundingClientRect:b,center:_}},getIsAvailableToBeFocused:()=>!0,getIsFocusable:y=>!0,focus:()=>p.focus()})})}}),this.focusableComponents=n,this.focusableComponents}findSuitableDOMChild(t){function n(r){if(t.getIsFocusable(r)&&t.getIsAvailableToBeFocused(r))return r;for(let l=0;l<r.children.length;l++){const d=r.children[l],f=n(d);if(f)return f}return null}return t.el()?n(t.el()):null}getCurrentComponent(t){this.updateFocusableComponents();const n=t||document.activeElement;if(this.focusableComponents.length){for(const r of this.focusableComponents)if(r.el()===n)return r}}add(t){const n=[...this.focusableComponents];t.hasOwnProperty("el_")&&t.getIsFocusable()&&t.getIsAvailableToBeFocused(t.el())&&n.push(t),this.focusableComponents=n,this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents})}remove(t){for(let n=0;n<this.focusableComponents.length;n++)if(this.focusableComponents[n].name()===t.name()){this.focusableComponents.splice(n,1),this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents});return}}clear(){this.focusableComponents.length>0&&(this.focusableComponents=[],this.trigger({type:"focusableComponentsChanged",focusableComponents:this.focusableComponents}))}move(t){const n=this.getCurrentComponent();if(!n)return;const r=n.getPositions(),l=this.focusableComponents.filter(f=>f!==n&&this.isInDirection_(r.boundingClientRect,f.getPositions().boundingClientRect,t)),d=this.findBestCandidate_(r.center,l,t);d?this.focus(d):this.trigger({type:"endOfFocusableComponents",direction:t,focusedComponent:n})}findBestCandidate_(t,n,r){let l=1/0,d=null;for(const f of n){const p=f.getPositions().center,m=this.calculateDistance_(t,p,r);m<l&&(l=m,d=f)}return d}isInDirection_(t,n,r){switch(r){case"right":return n.left>=t.right;case"left":return n.right<=t.left;case"down":return n.top>=t.bottom;case"up":return n.bottom<=t.top;default:return!1}}refocusComponent(){if(this.lastFocusedComponent_){this.player_.userActive()||this.player_.userActive(!0),this.updateFocusableComponents();for(let t=0;t<this.focusableComponents.length;t++)if(this.focusableComponents[t].name()===this.lastFocusedComponent_.name()){this.focus(this.focusableComponents[t]);return}}else this.focus(this.updateFocusableComponents()[0])}focus(t){typeof t=="object"&&(t.getIsAvailableToBeFocused(t.el())?t.focus():this.findSuitableDOMChild(t)&&this.findSuitableDOMChild(t).focus())}calculateDistance_(t,n,r){const l=Math.abs(t.x-n.x),d=Math.abs(t.y-n.y);let f;switch(r){case"right":case"left":f=l+d*100;break;case"up":f=d*2+l*.5;break;case"down":f=d*5+l;break;default:f=l+d}return f}searchForTrackSelect_(){const t=this;for(const n of t.updateFocusableComponents())if(n.constructor.name==="TextTrackSelect"){t.focus(n);break}}}class y7 extends Rn{constructor(t,n,r){const l=gs({createEl:!1},n);if(super(t,l,r),!n.playerOptions.sources||n.playerOptions.sources.length===0)for(let d=0,f=n.playerOptions.techOrder;d<f.length;d++){const p=na(f[d]);let m=Es.getTech(p);if(p||(m=Rn.getComponent(p)),m&&m.isSupported()){t.loadTech_(p);break}}else t.src(n.playerOptions.sources)}}Rn.registerComponent("MediaLoader",y7);class XE extends Rn{constructor(t,n){super(t,n),this.options_.controlText&&this.controlText(this.options_.controlText),this.handleMouseOver_=r=>this.handleMouseOver(r),this.handleMouseOut_=r=>this.handleMouseOut(r),this.handleClick_=r=>this.handleClick(r),this.handleKeyDown_=r=>this.handleKeyDown(r),this.emitTapEvents(),this.enable()}createEl(t="div",n={},r={}){n=Object.assign({className:this.buildCSSClass(),tabIndex:0},n),t==="button"&&Mr.error(`Creating a ClickableComponent with an HTML element of ${t} is not supported; use a Button instead.`),r=Object.assign({role:"button"},r),this.tabIndex_=n.tabIndex;const l=ar(t,n,r);return this.player_.options_.experimentalSvgIcons||l.appendChild(ar("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(l),l}dispose(){this.controlTextEl_=null,super.dispose()}createControlTextEl(t){return this.controlTextEl_=ar("span",{className:"vjs-control-text"},{"aria-live":"polite"}),t&&t.appendChild(this.controlTextEl_),this.controlText(this.controlText_,t),this.controlTextEl_}controlText(t,n=this.el()){if(t===void 0)return this.controlText_||"Need Text";const r=this.localize(t);this.controlText_=t,Nf(this.controlTextEl_,r),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&n.setAttribute("title",r)}buildCSSClass(){return`vjs-control vjs-button ${super.buildCSSClass()}`}enable(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_<"u"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))}disable(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_<"u"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)}handleLanguagechange(){this.controlText(this.controlText_)}handleClick(t){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)}handleKeyDown(t){t.key===" "||t.key==="Enter"?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):super.handleKeyDown(t)}}Rn.registerComponent("ClickableComponent",XE);class qA extends XE{constructor(t,n){super(t,n),this.update(),this.update_=r=>this.update(r),t.on("posterchange",this.update_)}dispose(){this.player().off("posterchange",this.update_),super.dispose()}createEl(){return ar("div",{className:"vjs-poster"})}crossOrigin(t){if(typeof t>"u")return this.$("img")?this.$("img").crossOrigin:this.player_.tech_&&this.player_.tech_.isReady_?this.player_.crossOrigin():this.player_.options_.crossOrigin||this.player_.options_.crossorigin||null;if(t!==null&&t!=="anonymous"&&t!=="use-credentials"){this.player_.log.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${t}"`);return}this.$("img")&&(this.$("img").crossOrigin=t)}update(t){const n=this.player().poster();this.setSrc(n),n?this.show():this.hide()}setSrc(t){if(!t){this.el_.textContent="";return}this.$("img")||this.el_.appendChild(ar("picture",{className:"vjs-poster",tabIndex:-1},{},ar("img",{loading:"lazy",crossOrigin:this.crossOrigin()},{alt:""}))),this.$("img").src=t}handleClick(t){this.player_.controls()&&(this.player_.tech(!0)&&this.player_.tech(!0).focus(),this.player_.paused()?Uc(this.player_.play()):this.player_.pause())}}qA.prototype.crossorigin=qA.prototype.crossOrigin;Rn.registerComponent("PosterImage",qA);const vu="#222",dP="#ccc",v7={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function Jx(u,t){let n;if(u.length===4)n=u[1]+u[1]+u[2]+u[2]+u[3]+u[3];else if(u.length===7)n=u.slice(1);else throw new Error("Invalid color code provided, "+u+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(n.slice(0,2),16)+","+parseInt(n.slice(2,4),16)+","+parseInt(n.slice(4,6),16)+","+t+")"}function Cc(u,t,n){try{u.style[t]=n}catch{return}}function fP(u){return u?`${u}px`:""}class T7 extends Rn{constructor(t,n,r){super(t,n,r);const l=f=>this.updateDisplay(f),d=f=>{this.updateDisplayOverlay(),this.updateDisplay(f)};t.on("loadstart",f=>this.toggleDisplay(f)),t.on("useractive",l),t.on("userinactive",l),t.on("texttrackchange",l),t.on("loadedmetadata",f=>{this.updateDisplayOverlay(),this.preselectTrack(f)}),t.ready(ks(this,function(){if(t.tech_&&t.tech_.featuresNativeTextTracks){this.hide();return}t.on("fullscreenchange",d),t.on("playerresize",d);const f=St.screen.orientation||St,p=St.screen.orientation?"change":"orientationchange";f.addEventListener(p,d),t.on("dispose",()=>f.removeEventListener(p,d));const m=this.options_.playerOptions.tracks||[];for(let y=0;y<m.length;y++)this.player_.addRemoteTextTrack(m[y],!0);this.preselectTrack()}))}preselectTrack(){const t={captions:1,subtitles:1},n=this.player_.textTracks(),r=this.player_.cache_.selectedLanguage;let l,d,f;for(let p=0;p<n.length;p++){const m=n[p];r&&r.enabled&&r.language&&r.language===m.language&&m.kind in t?m.kind===r.kind?f=m:f||(f=m):r&&!r.enabled?(f=null,l=null,d=null):m.default&&(m.kind==="descriptions"&&!l?l=m:m.kind in t&&!d&&(d=m))}f?f.mode="showing":d?d.mode="showing":l&&(l.mode="showing")}toggleDisplay(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()}createEl(){return super.createEl("div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})}clearDisplay(){typeof St.WebVTT=="function"&&St.WebVTT.processCues(St,[],this.el_)}updateDisplay(){const t=this.player_.textTracks(),n=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),n){const f=[];for(let p=0;p<t.length;++p){const m=t[p];m.mode==="showing"&&f.push(m)}this.updateForTrack(f);return}let r=null,l=null,d=t.length;for(;d--;){const f=t[d];f.mode==="showing"&&(f.kind==="descriptions"?r=f:l=f)}if(l?(this.getAttribute("aria-live")!=="off"&&this.setAttribute("aria-live","off"),this.updateForTrack(l)):r&&(this.getAttribute("aria-live")!=="assertive"&&this.setAttribute("aria-live","assertive"),this.updateForTrack(r)),!St.CSS.supports("inset","10px")){const f=this.el_,p=f.querySelectorAll(".vjs-text-track-cue"),m=this.player_.controlBar.el_.getBoundingClientRect().height,y=this.player_.el_.getBoundingClientRect().height;f.style="",Cc(f,"position","relative"),Cc(f,"height",y-m+"px"),Cc(f,"top","unset"),gE?Cc(f,"bottom",y+"px"):Cc(f,"bottom","0px"),p.length>0&&p.forEach(b=>{if(b.style.inset){const _=b.style.inset.split(" ");_.length===3&&Object.assign(b.style,{top:_[0],right:_[1],bottom:_[2],left:"unset"})}})}}updateDisplayOverlay(){if(!this.player_.videoHeight()||!St.CSS.supports("inset-inline: 10px"))return;const t=this.player_.currentWidth(),n=this.player_.currentHeight(),r=t/n,l=this.player_.videoWidth()/this.player_.videoHeight();let d=0,f=0;Math.abs(r-l)>.1&&(r>l?d=Math.round((t-n*l)/2):f=Math.round((n-t/l)/2)),Cc(this.el_,"insetInline",fP(d)),Cc(this.el_,"insetBlock",fP(f))}updateDisplayState(t){const n=this.player_.textTrackSettings.getValues(),r=t.activeCues;let l=r.length;for(;l--;){const d=r[l];if(!d)continue;const f=d.displayState;if(n.color&&(f.firstChild.style.color=n.color),n.textOpacity&&Cc(f.firstChild,"color",Jx(n.color||"#fff",n.textOpacity)),n.backgroundColor&&(f.firstChild.style.backgroundColor=n.backgroundColor),n.backgroundOpacity&&Cc(f.firstChild,"backgroundColor",Jx(n.backgroundColor||"#000",n.backgroundOpacity)),n.windowColor&&(n.windowOpacity?Cc(f,"backgroundColor",Jx(n.windowColor,n.windowOpacity)):f.style.backgroundColor=n.windowColor),n.edgeStyle&&(n.edgeStyle==="dropshadow"?f.firstChild.style.textShadow=`2px 2px 3px ${vu}, 2px 2px 4px ${vu}, 2px 2px 5px ${vu}`:n.edgeStyle==="raised"?f.firstChild.style.textShadow=`1px 1px ${vu}, 2px 2px ${vu}, 3px 3px ${vu}`:n.edgeStyle==="depressed"?f.firstChild.style.textShadow=`1px 1px ${dP}, 0 1px ${dP}, -1px -1px ${vu}, 0 -1px ${vu}`:n.edgeStyle==="uniform"&&(f.firstChild.style.textShadow=`0 0 4px ${vu}, 0 0 4px ${vu}, 0 0 4px ${vu}, 0 0 4px ${vu}`)),n.fontPercent&&n.fontPercent!==1){const p=St.parseFloat(f.style.fontSize);f.style.fontSize=p*n.fontPercent+"px",f.style.height="auto",f.style.top="auto"}n.fontFamily&&n.fontFamily!=="default"&&(n.fontFamily==="small-caps"?f.firstChild.style.fontVariant="small-caps":f.firstChild.style.fontFamily=v7[n.fontFamily])}}updateForTrack(t){if(Array.isArray(t)||(t=[t]),typeof St.WebVTT!="function"||t.every(r=>!r.activeCues))return;const n=[];for(let r=0;r<t.length;++r){const l=t[r];for(let d=0;d<l.activeCues.length;++d)n.push(l.activeCues[d])}St.WebVTT.processCues(St,n,this.el_);for(let r=0;r<t.length;++r){const l=t[r];for(let d=0;d<l.activeCues.length;++d){const f=l.activeCues[d].displayState;Ph(f,"vjs-text-track-cue","vjs-text-track-cue-"+(l.language?l.language:r)),l.language&&Ag(f,"lang",l.language)}this.player_.textTrackSettings&&this.updateDisplayState(l)}}}Rn.registerComponent("TextTrackDisplay",T7);class E7 extends Rn{createEl(){const t=this.player_.isAudio(),n=this.localize(t?"Audio Player":"Video Player"),r=ar("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[n])}),l=super.createEl("div",{className:"vjs-loading-spinner",dir:"ltr"});return l.appendChild(r),l}handleLanguagechange(){this.$(".vjs-control-text").textContent=this.localize("{1} is loading.",[this.player_.isAudio()?"Audio Player":"Video Player"])}}Rn.registerComponent("LoadingSpinner",E7);class Lo extends XE{createEl(t,n={},r={}){t="button",n=Object.assign({className:this.buildCSSClass()},n),r=Object.assign({type:"button"},r);const l=ar(t,n,r);return this.player_.options_.experimentalSvgIcons||l.appendChild(ar("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(l),l}addChild(t,n={}){const r=this.constructor.name;return Mr.warn(`Adding an actionable (user controllable) child to a Button (${r}) is not supported; use a ClickableComponent instead.`),Rn.prototype.addChild.call(this,t,n)}enable(){super.enable(),this.el_.removeAttribute("disabled")}disable(){super.disable(),this.el_.setAttribute("disabled","disabled")}handleKeyDown(t){if(t.key===" "||t.key==="Enter"){t.stopPropagation();return}super.handleKeyDown(t)}}Rn.registerComponent("Button",Lo);class PO extends Lo{constructor(t,n){super(t,n),this.mouseused_=!1,this.setIcon("play"),this.on("mousedown",r=>this.handleMouseDown(r))}buildCSSClass(){return"vjs-big-play-button"}handleClick(t){const n=this.player_.play();if(t.type==="tap"||this.mouseused_&&"clientX"in t&&"clientY"in t){Uc(n),this.player_.tech(!0)&&this.player_.tech(!0).focus();return}const r=this.player_.getChild("controlBar"),l=r&&r.getChild("playToggle");if(!l){this.player_.tech(!0).focus();return}const d=()=>l.focus();Ey(n)?n.then(d,()=>{}):this.setTimeout(d,1)}handleKeyDown(t){this.mouseused_=!1,super.handleKeyDown(t)}handleMouseDown(t){this.mouseused_=!0}}PO.prototype.controlText_="Play Video";Rn.registerComponent("BigPlayButton",PO);class b7 extends Lo{constructor(t,n){super(t,n),this.setIcon("cancel"),this.controlText(n&&n.controlText||this.localize("Close"))}buildCSSClass(){return`vjs-close-button ${super.buildCSSClass()}`}handleClick(t){this.trigger({type:"close",bubbles:!1})}handleKeyDown(t){t.key==="Escape"?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):super.handleKeyDown(t)}}Rn.registerComponent("CloseButton",b7);class MO extends Lo{constructor(t,n={}){super(t,n),n.replay=n.replay===void 0||n.replay,this.setIcon("play"),this.on(t,"play",r=>this.handlePlay(r)),this.on(t,"pause",r=>this.handlePause(r)),n.replay&&this.on(t,"ended",r=>this.handleEnded(r))}buildCSSClass(){return`vjs-play-control ${super.buildCSSClass()}`}handleClick(t){this.player_.paused()?Uc(this.player_.play()):this.player_.pause()}handleSeeked(t){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(t):this.handlePlay(t)}handlePlay(t){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.setIcon("pause"),this.controlText("Pause")}handlePause(t){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.setIcon("play"),this.controlText("Play")}handleEnded(t){this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.setIcon("replay"),this.controlText("Replay"),this.one(this.player_,"seeked",n=>this.handleSeeked(n))}}MO.prototype.controlText_="Play";Rn.registerComponent("PlayToggle",MO);class Fg extends Rn{constructor(t,n){super(t,n),this.on(t,["timeupdate","ended","seeking"],r=>this.update(r)),this.updateTextNode_()}createEl(){const t=this.buildCSSClass(),n=super.createEl("div",{className:`${t} vjs-time-control vjs-control`}),r=ar("span",{className:"vjs-control-text",textContent:`${this.localize(this.labelText_)}`},{role:"presentation"});return n.appendChild(r),this.contentEl_=ar("span",{className:`${t}-display`},{role:"presentation"}),n.appendChild(this.contentEl_),n}dispose(){this.contentEl_=null,this.textNode_=null,super.dispose()}update(t){!this.player_.options_.enableSmoothSeeking&&t.type==="seeking"||this.updateContent(t)}updateTextNode_(t=0){t=Uh(t),this.formattedTime_!==t&&(this.formattedTime_=t,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",()=>{if(!this.contentEl_)return;let n=this.textNode_;n&&this.contentEl_.firstChild!==n&&(n=null,Mr.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),this.textNode_=li.createTextNode(this.formattedTime_),this.textNode_&&(n?this.contentEl_.replaceChild(this.textNode_,n):this.contentEl_.appendChild(this.textNode_))}))}updateContent(t){}}Fg.prototype.labelText_="Time";Fg.prototype.controlText_="Time";Rn.registerComponent("TimeDisplay",Fg);class $w extends Fg{buildCSSClass(){return"vjs-current-time"}updateContent(t){let n;this.player_.ended()?n=this.player_.duration():t&&t.target&&typeof t.target.pendingSeekTime=="function"?n=t.target.pendingSeekTime():n=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(n)}}$w.prototype.labelText_="Current Time";$w.prototype.controlText_="Current Time";Rn.registerComponent("CurrentTimeDisplay",$w);class Kw extends Fg{constructor(t,n){super(t,n);const r=l=>this.updateContent(l);this.on(t,"durationchange",r),this.on(t,"loadstart",r),this.on(t,"loadedmetadata",r)}buildCSSClass(){return"vjs-duration"}updateContent(t){const n=this.player_.duration();this.updateTextNode_(n)}}Kw.prototype.labelText_="Duration";Kw.prototype.controlText_="Duration";Rn.registerComponent("DurationDisplay",Kw);class _7 extends Rn{createEl(){const t=super.createEl("div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),n=super.createEl("div"),r=super.createEl("span",{textContent:"/"});return n.appendChild(r),t.appendChild(n),t}}Rn.registerComponent("TimeDivider",_7);class Yw extends Fg{constructor(t,n){super(t,n),this.on(t,"durationchange",r=>this.updateContent(r))}buildCSSClass(){return"vjs-remaining-time"}createEl(){const t=super.createEl();return this.options_.displayNegative!==!1&&t.insertBefore(ar("span",{},{"aria-hidden":!0},"-"),this.contentEl_),t}updateContent(t){if(typeof this.player_.duration()!="number")return;let n;this.player_.ended()?n=0:this.player_.remainingTimeDisplay?n=this.player_.remainingTimeDisplay():n=this.player_.remainingTime(),this.updateTextNode_(n)}}Yw.prototype.labelText_="Remaining Time";Yw.prototype.controlText_="Remaining Time";Rn.registerComponent("RemainingTimeDisplay",Yw);class S7 extends Rn{constructor(t,n){super(t,n),this.updateShowing(),this.on(this.player(),"durationchange",r=>this.updateShowing(r))}createEl(){const t=super.createEl("div",{className:"vjs-live-control vjs-control"});return this.contentEl_=ar("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(ar("span",{className:"vjs-control-text",textContent:`${this.localize("Stream Type")}`})),this.contentEl_.appendChild(li.createTextNode(this.localize("LIVE"))),t.appendChild(this.contentEl_),t}dispose(){this.contentEl_=null,super.dispose()}updateShowing(t){this.player().duration()===1/0?this.show():this.hide()}}Rn.registerComponent("LiveDisplay",S7);class NO extends Lo{constructor(t,n){super(t,n),this.updateLiveEdgeStatus(),this.player_.liveTracker&&(this.updateLiveEdgeStatusHandler_=r=>this.updateLiveEdgeStatus(r),this.on(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_))}createEl(){const t=super.createEl("button",{className:"vjs-seek-to-live-control vjs-control"});return this.setIcon("circle",t),this.textEl_=ar("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),t.appendChild(this.textEl_),t}updateLiveEdgeStatus(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))}handleClick(){this.player_.liveTracker.seekToLiveEdge()}dispose(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,super.dispose()}}NO.prototype.controlText_="Seek to live, currently playing live";Rn.registerComponent("SeekToLive",NO);function Gy(u,t,n){return u=Number(u),Math.min(n,Math.max(t,isNaN(u)?t:u))}var x7=Object.freeze({__proto__:null,clamp:Gy});class Ww extends Rn{constructor(t,n){super(t,n),this.handleMouseDown_=r=>this.handleMouseDown(r),this.handleMouseUp_=r=>this.handleMouseUp(r),this.handleKeyDown_=r=>this.handleKeyDown(r),this.handleClick_=r=>this.handleClick(r),this.handleMouseMove_=r=>this.handleMouseMove(r),this.update_=r=>this.update(r),this.bar=this.getChild(this.options_.barName),this.vertical(!!this.options_.vertical),this.enable()}enabled(){return this.enabled_}enable(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)}disable(){if(!this.enabled())return;const t=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(t,"mousemove",this.handleMouseMove_),this.off(t,"mouseup",this.handleMouseUp_),this.off(t,"touchmove",this.handleMouseMove_),this.off(t,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}createEl(t,n={},r={}){return n.className=n.className+" vjs-slider",n=Object.assign({tabIndex:0},n),r=Object.assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100},r),super.createEl(t,n,r)}handleMouseDown(t){const n=this.bar.el_.ownerDocument;t.type==="mousedown"&&t.preventDefault(),t.type==="touchstart"&&!Gc&&t.preventDefault(),oO(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(n,"mousemove",this.handleMouseMove_),this.on(n,"mouseup",this.handleMouseUp_),this.on(n,"touchmove",this.handleMouseMove_),this.on(n,"touchend",this.handleMouseUp_),this.handleMouseMove(t,!0)}handleMouseMove(t){}handleMouseUp(t){const n=this.bar.el_.ownerDocument;lO(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(n,"mousemove",this.handleMouseMove_),this.off(n,"mouseup",this.handleMouseUp_),this.off(n,"touchmove",this.handleMouseMove_),this.off(n,"touchend",this.handleMouseUp_),this.update()}update(){if(!this.el_||!this.bar)return;const t=this.getProgress();return t===this.progress_||(this.progress_=t,this.requestNamedAnimationFrame("Slider#update",()=>{const n=this.vertical()?"height":"width";this.bar.el().style[n]=(t*100).toFixed(2)+"%"})),t}getProgress(){return Number(Gy(this.getPercent(),0,1).toFixed(4))}calculateDistance(t){const n=GE(this.el_,t);return this.vertical()?n.y:n.x}handleKeyDown(t){const n=this.options_.playerOptions.spatialNavigation,r=n&&n.enabled,l=n&&n.horizontalSeek;r?l&&t.key==="ArrowLeft"||!l&&t.key==="ArrowDown"?(t.preventDefault(),t.stopPropagation(),this.stepBack()):l&&t.key==="ArrowRight"||!l&&t.key==="ArrowUp"?(t.preventDefault(),t.stopPropagation(),this.stepForward()):(this.pendingSeekTime()&&(this.pendingSeekTime(null),this.userSeek_(this.player_.currentTime())),super.handleKeyDown(t)):t.key==="ArrowLeft"||t.key==="ArrowDown"?(t.preventDefault(),t.stopPropagation(),this.stepBack()):t.key==="ArrowUp"||t.key==="ArrowRight"?(t.preventDefault(),t.stopPropagation(),this.stepForward()):super.handleKeyDown(t)}handleClick(t){t.stopPropagation(),t.preventDefault()}vertical(t){if(t===void 0)return this.vertical_||!1;this.vertical_=!!t,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")}}Rn.registerComponent("Slider",Ww);const Zx=(u,t)=>Gy(u/t*100,0,100).toFixed(2)+"%";class A7 extends Rn{constructor(t,n){super(t,n),this.partEls_=[],this.on(t,"progress",r=>this.update(r))}createEl(){const t=super.createEl("div",{className:"vjs-load-progress"}),n=ar("span",{className:"vjs-control-text"}),r=ar("span",{textContent:this.localize("Loaded")}),l=li.createTextNode(": ");return this.percentageEl_=ar("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),t.appendChild(n),n.appendChild(r),n.appendChild(l),n.appendChild(this.percentageEl_),t}dispose(){this.partEls_=null,this.percentageEl_=null,super.dispose()}update(t){this.requestNamedAnimationFrame("LoadProgressBar#update",()=>{const n=this.player_.liveTracker,r=this.player_.buffered(),l=n&&n.isLive()?n.seekableEnd():this.player_.duration(),d=this.player_.bufferedEnd(),f=this.partEls_,p=Zx(d,l);this.percent_!==p&&(this.el_.style.width=p,Nf(this.percentageEl_,p),this.percent_=p);for(let m=0;m<r.length;m++){const y=r.start(m),b=r.end(m);let _=f[m];_||(_=this.el_.appendChild(ar()),f[m]=_),!(_.dataset.start===y&&_.dataset.end===b)&&(_.dataset.start=y,_.dataset.end=b,_.style.left=Zx(y,d),_.style.width=Zx(b-y,d))}for(let m=f.length;m>r.length;m--)this.el_.removeChild(f[m-1]);f.length=r.length})}}Rn.registerComponent("LoadProgressBar",A7);class w7 extends Rn{constructor(t,n){super(t,n),this.update=Vc(ks(this,this.update),xu)}createEl(){return super.createEl("div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})}update(t,n,r){const l=Oy(this.el_),d=wg(this.player_.el()),f=t.width*n;if(!d||!l)return;let p=t.left-d.left+f,m=t.width-f+(d.right-t.right);m||(m=t.width-f,p=f);let y=l.width/2;p<y?y+=y-p:m<y&&(y=m),y<0?y=0:y>l.width&&(y=l.width),y=Math.round(y),this.el_.style.right=`-${y}px`,this.write(r)}write(t){Nf(this.el_,t)}updateTime(t,n,r,l){this.requestNamedAnimationFrame("TimeTooltip#updateTime",()=>{let d;const f=this.player_.duration();if(this.player_.liveTracker&&this.player_.liveTracker.isLive()){const p=this.player_.liveTracker.liveWindow(),m=p-n*p;d=(m<1?"":"-")+Uh(m,p)}else d=Uh(r,f);this.update(t,n,d),l&&l()})}}Rn.registerComponent("TimeTooltip",w7);class Xw extends Rn{constructor(t,n){super(t,n),this.setIcon("circle"),this.update=Vc(ks(this,this.update),xu)}createEl(){return super.createEl("div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})}update(t,n,r){const l=this.getChild("timeTooltip");if(!l)return;const d=r&&r.target&&typeof r.target.pendingSeekTime=="function"?r.target.pendingSeekTime():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();l.updateTime(t,n,d)}}Xw.prototype.options_={children:[]};!Do&&!Qu&&Xw.prototype.options_.children.push("timeTooltip");Rn.registerComponent("PlayProgressBar",Xw);class OO extends Rn{constructor(t,n){super(t,n),this.update=Vc(ks(this,this.update),xu)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(t,n){const r=n*this.player_.duration();this.getChild("timeTooltip").updateTime(t,n,r,()=>{this.el_.style.left=`${t.width*n}px`})}}OO.prototype.options_={children:["timeTooltip"]};Rn.registerComponent("MouseTimeDisplay",OO);class QE extends Ww{constructor(t,n){n=gs(QE.prototype.options_,n),n.children=[...n.children];const r=t.options_.disableSeekWhileScrubbingOnMobile&&(Do||Qu)||t.options_.disableSeekWhileScrubbingOnSTV;(!Do&&!Qu||r)&&n.children.splice(1,0,"mouseTimeDisplay"),super(t,n),this.shouldDisableSeekWhileScrubbing_=r,this.pendingSeekTime_=null,this.setEventHandlers_()}setEventHandlers_(){this.update_=ks(this,this.update),this.update=Vc(this.update_,xu),this.on(this.player_,["durationchange","timeupdate"],this.update),this.on(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=t=>this.enableInterval_(t),this.disableIntervalHandler_=t=>this.disableInterval_(t),this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in li&&"visibilityState"in li&&this.on(li,"visibilitychange",this.toggleVisibility_)}toggleVisibility_(t){li.visibilityState==="hidden"?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(t)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())}enableInterval_(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,xu))}disableInterval_(t){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&t&&t.type!=="ended"||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)}createEl(){return super.createEl("div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})}update(t){if(li.visibilityState==="hidden")return;const n=super.update();return this.requestNamedAnimationFrame("SeekBar#update",()=>{const r=this.player_.ended()?this.player_.duration():this.getCurrentTime_(),l=this.player_.liveTracker;let d=this.player_.duration();l&&l.isLive()&&(d=this.player_.liveTracker.liveCurrentTime()),this.percent_!==n&&(this.el_.setAttribute("aria-valuenow",(n*100).toFixed(2)),this.percent_=n),(this.currentTime_!==r||this.duration_!==d)&&(this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[Uh(r,d),Uh(d,d)],"{1} of {2}")),this.currentTime_=r,this.duration_=d),this.bar&&this.bar.update(wg(this.el()),this.getProgress(),t)}),n}userSeek_(t){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(t)}getCurrentTime_(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()}pendingSeekTime(t){if(t!==void 0)if(t!==null){const n=this.player_.duration();this.pendingSeekTime_=Math.max(0,Math.min(t,n))}else this.pendingSeekTime_=null;return this.pendingSeekTime_}getPercent(){if(this.pendingSeekTime()!==null)return this.pendingSeekTime()/this.player_.duration();const t=this.getCurrentTime_();let n;const r=this.player_.liveTracker;return r&&r.isLive()?(n=(t-r.seekableStart())/r.liveWindow(),r.atLiveEdge()&&(n=1)):n=t/this.player_.duration(),n}handleMouseDown(t){Fy(t)&&(t.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.shouldDisableSeekWhileScrubbing_||this.player_.pause(),super.handleMouseDown(t))}handleMouseMove(t,n=!1){if(!Fy(t)||isNaN(this.player_.duration()))return;!n&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);let r;const l=this.calculateDistance(t),d=this.player_.liveTracker;if(!d||!d.isLive())r=l*this.player_.duration(),r===this.player_.duration()&&(r=r-.1);else{if(l>=.99){d.seekToLiveEdge();return}const f=d.seekableStart(),p=d.liveCurrentTime();if(r=f+l*d.liveWindow(),r>=p&&(r=p),r<=f&&(r=f+.1),r===1/0)return}this.shouldDisableSeekWhileScrubbing_?this.pendingSeekTime(r):this.userSeek_(r),this.player_.options_.enableSmoothSeeking&&this.update()}enable(){super.enable();const t=this.getChild("mouseTimeDisplay");t&&t.show()}disable(){super.disable();const t=this.getChild("mouseTimeDisplay");t&&t.hide()}handleMouseUp(t){super.handleMouseUp(t),t&&t.stopPropagation(),this.player_.scrubbing(!1),this.pendingSeekTime()!==null&&(this.userSeek_(this.pendingSeekTime()),this.pendingSeekTime(null)),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?Uc(this.player_.play()):this.update_()}handlePendingSeek_(t){this.player_.paused()||this.player_.pause();const n=this.pendingSeekTime()!==null?this.pendingSeekTime():this.player_.currentTime();this.pendingSeekTime(n+t),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}stepForward(){this.shouldDisableSeekWhileScrubbing_?this.handlePendingSeek_(this.options().stepSeconds):this.userSeek_(this.player_.currentTime()+this.options().stepSeconds)}stepBack(){this.shouldDisableSeekWhileScrubbing_?this.handlePendingSeek_(-this.options().stepSeconds):this.userSeek_(this.player_.currentTime()-this.options().stepSeconds)}handleAction(t){this.pendingSeekTime()!==null&&(this.userSeek_(this.pendingSeekTime()),this.pendingSeekTime(null)),this.player_.paused()?this.player_.play():this.player_.pause()}handleKeyDown(t){const n=this.player_.liveTracker;if(t.key===" "||t.key==="Enter")t.preventDefault(),t.stopPropagation(),this.handleAction(t);else if(t.key==="Home")t.preventDefault(),t.stopPropagation(),this.userSeek_(0);else if(t.key==="End")t.preventDefault(),t.stopPropagation(),n&&n.isLive()?this.userSeek_(n.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(t.key)){t.preventDefault(),t.stopPropagation();const r=parseInt(t.key,10)*.1;n&&n.isLive()?this.userSeek_(n.seekableStart()+n.liveWindow()*r):this.userSeek_(this.player_.duration()*r)}else t.key==="PageDown"?(t.preventDefault(),t.stopPropagation(),this.userSeek_(this.player_.currentTime()-this.options().stepSeconds*this.options().pageMultiplier)):t.key==="PageUp"?(t.preventDefault(),t.stopPropagation(),this.userSeek_(this.player_.currentTime()+this.options().stepSeconds*this.options().pageMultiplier)):super.handleKeyDown(t)}dispose(){this.disableInterval_(),this.off(this.player_,["durationchange","timeupdate"],this.update),this.off(this.player_,["ended"],this.update_),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in li&&"visibilityState"in li&&this.off(li,"visibilitychange",this.toggleVisibility_),super.dispose()}}QE.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar",stepSeconds:5,pageMultiplier:12};Rn.registerComponent("SeekBar",QE);class FO extends Rn{constructor(t,n){super(t,n),this.handleMouseMove=Vc(ks(this,this.handleMouseMove),xu),this.throttledHandleMouseSeek=Vc(ks(this,this.handleMouseSeek),xu),this.handleMouseUpHandler_=r=>this.handleMouseUp(r),this.handleMouseDownHandler_=r=>this.handleMouseDown(r),this.enable()}createEl(){return super.createEl("div",{className:"vjs-progress-control vjs-control"})}handleMouseMove(t){const n=this.getChild("seekBar");if(!n)return;const r=n.getChild("playProgressBar"),l=n.getChild("mouseTimeDisplay");if(!r&&!l)return;const d=n.el(),f=Oy(d);let p=GE(d,t).x;p=Gy(p,0,1),l&&l.update(f,p),r&&r.update(f,n.getProgress())}handleMouseSeek(t){const n=this.getChild("seekBar");n&&n.handleMouseMove(t)}enabled(){return this.enabled_}disable(){if(this.children().forEach(t=>t.disable&&t.disable()),!!this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,["mousemove","touchmove"],this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){const t=this.getChild("seekBar");this.player_.scrubbing(!1),t.videoWasPlaying&&Uc(this.player_.play())}}enable(){this.children().forEach(t=>t.enable&&t.enable()),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,["mousemove","touchmove"],this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)}removeListenersAddedOnMousedownAndTouchstart(){const t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseSeek),this.off(t,"touchmove",this.throttledHandleMouseSeek),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)}handleMouseDown(t){const n=this.el_.ownerDocument,r=this.getChild("seekBar");r&&r.handleMouseDown(t),this.on(n,"mousemove",this.throttledHandleMouseSeek),this.on(n,"touchmove",this.throttledHandleMouseSeek),this.on(n,"mouseup",this.handleMouseUpHandler_),this.on(n,"touchend",this.handleMouseUpHandler_)}handleMouseUp(t){const n=this.getChild("seekBar");n&&n.handleMouseUp(t),this.removeListenersAddedOnMousedownAndTouchstart()}}FO.prototype.options_={children:["seekBar"]};Rn.registerComponent("ProgressControl",FO);class UO extends Lo{constructor(t,n){super(t,n),this.setIcon("picture-in-picture-enter"),this.on(t,["enterpictureinpicture","leavepictureinpicture"],r=>this.handlePictureInPictureChange(r)),this.on(t,["disablepictureinpicturechanged","loadedmetadata"],r=>this.handlePictureInPictureEnabledChange(r)),this.on(t,["loadedmetadata","audioonlymodechange","audiopostermodechange"],()=>this.handlePictureInPictureAudioModeChange()),this.disable()}buildCSSClass(){return`vjs-picture-in-picture-control vjs-hidden ${super.buildCSSClass()}`}handlePictureInPictureAudioModeChange(){if(!(this.player_.currentType().substring(0,5)==="audio"||this.player_.audioPosterMode()||this.player_.audioOnlyMode())){this.show();return}this.player_.isInPictureInPicture()&&this.player_.exitPictureInPicture(),this.hide()}handlePictureInPictureEnabledChange(){li.pictureInPictureEnabled&&this.player_.disablePictureInPicture()===!1||this.player_.options_.enableDocumentPictureInPicture&&"documentPictureInPicture"in St?this.enable():this.disable()}handlePictureInPictureChange(t){this.player_.isInPictureInPicture()?(this.setIcon("picture-in-picture-exit"),this.controlText("Exit Picture-in-Picture")):(this.setIcon("picture-in-picture-enter"),this.controlText("Picture-in-Picture")),this.handlePictureInPictureEnabledChange()}handleClick(t){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()}show(){typeof li.exitPictureInPicture=="function"&&super.show()}}UO.prototype.controlText_="Picture-in-Picture";Rn.registerComponent("PictureInPictureToggle",UO);class BO extends Lo{constructor(t,n){super(t,n),this.setIcon("fullscreen-enter"),this.on(t,"fullscreenchange",r=>this.handleFullscreenChange(r)),li[t.fsApi_.fullscreenEnabled]===!1&&this.disable()}buildCSSClass(){return`vjs-fullscreen-control ${super.buildCSSClass()}`}handleFullscreenChange(t){this.player_.isFullscreen()?(this.controlText("Exit Fullscreen"),this.setIcon("fullscreen-exit")):(this.controlText("Fullscreen"),this.setIcon("fullscreen-enter"))}handleClick(t){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()}}BO.prototype.controlText_="Fullscreen";Rn.registerComponent("FullscreenToggle",BO);const I7=function(u,t){t.tech_&&!t.tech_.featuresVolumeControl&&u.addClass("vjs-hidden"),u.on(t,"loadstart",function(){t.tech_.featuresVolumeControl?u.removeClass("vjs-hidden"):u.addClass("vjs-hidden")})};class C7 extends Rn{createEl(){const t=super.createEl("div",{className:"vjs-volume-level"});return this.setIcon("circle",t),t.appendChild(super.createEl("span",{className:"vjs-control-text"})),t}}Rn.registerComponent("VolumeLevel",C7);class k7 extends Rn{constructor(t,n){super(t,n),this.update=Vc(ks(this,this.update),xu)}createEl(){return super.createEl("div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})}update(t,n,r,l){if(!r){const d=wg(this.el_),f=wg(this.player_.el()),p=t.width*n;if(!f||!d)return;const m=t.left-f.left+p,y=t.width-p+(f.right-t.right);let b=d.width/2;m<b?b+=b-m:y<b&&(b=y),b<0?b=0:b>d.width&&(b=d.width),this.el_.style.right=`-${b}px`}this.write(`${l}%`)}write(t){Nf(this.el_,t)}updateVolume(t,n,r,l,d){this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",()=>{this.update(t,n,r,l.toFixed(0)),d&&d()})}}Rn.registerComponent("VolumeLevelTooltip",k7);class zO extends Rn{constructor(t,n){super(t,n),this.update=Vc(ks(this,this.update),xu)}createEl(){return super.createEl("div",{className:"vjs-mouse-display"})}update(t,n,r){const l=100*n;this.getChild("volumeLevelTooltip").updateVolume(t,n,r,l,()=>{r?this.el_.style.bottom=`${t.height*n}px`:this.el_.style.left=`${t.width*n}px`})}}zO.prototype.options_={children:["volumeLevelTooltip"]};Rn.registerComponent("MouseVolumeLevelDisplay",zO);class JE extends Ww{constructor(t,n){super(t,n),this.on("slideractive",r=>this.updateLastVolume_(r)),this.on(t,"volumechange",r=>this.updateARIAAttributes(r)),t.ready(()=>this.updateARIAAttributes())}createEl(){return super.createEl("div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})}handleMouseDown(t){Fy(t)&&super.handleMouseDown(t)}handleMouseMove(t){const n=this.getChild("mouseVolumeLevelDisplay");if(n){const r=this.el(),l=wg(r),d=this.vertical();let f=GE(r,t);f=d?f.y:f.x,f=Gy(f,0,1),n.update(l,f,d)}Fy(t)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(t)))}checkMuted(){this.player_.muted()&&this.player_.muted(!1)}getPercent(){return this.player_.muted()?0:this.player_.volume()}stepForward(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)}stepBack(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)}updateARIAAttributes(t){const n=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",n),this.el_.setAttribute("aria-valuetext",n+"%")}volumeAsPercentage_(){return Math.round(this.player_.volume()*100)}updateLastVolume_(){const t=this.player_.volume();this.one("sliderinactive",()=>{this.player_.volume()===0&&this.player_.lastVolume_(t)})}}JE.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};!Do&&!Qu&&JE.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay");JE.prototype.playerEvent="volumechange";Rn.registerComponent("VolumeBar",JE);class jO extends Rn{constructor(t,n={}){n.vertical=n.vertical||!1,(typeof n.volumeBar>"u"||xg(n.volumeBar))&&(n.volumeBar=n.volumeBar||{},n.volumeBar.vertical=n.vertical),super(t,n),I7(this,t),this.throttledHandleMouseMove=Vc(ks(this,this.handleMouseMove),xu),this.handleMouseUpHandler_=r=>this.handleMouseUp(r),this.on("mousedown",r=>this.handleMouseDown(r)),this.on("touchstart",r=>this.handleMouseDown(r)),this.on("mousemove",r=>this.handleMouseMove(r)),this.on(this.volumeBar,["focus","slideractive"],()=>{this.volumeBar.addClass("vjs-slider-active"),this.addClass("vjs-slider-active"),this.trigger("slideractive")}),this.on(this.volumeBar,["blur","sliderinactive"],()=>{this.volumeBar.removeClass("vjs-slider-active"),this.removeClass("vjs-slider-active"),this.trigger("sliderinactive")})}createEl(){let t="vjs-volume-horizontal";return this.options_.vertical&&(t="vjs-volume-vertical"),super.createEl("div",{className:`vjs-volume-control vjs-control ${t}`})}handleMouseDown(t){const n=this.el_.ownerDocument;this.on(n,"mousemove",this.throttledHandleMouseMove),this.on(n,"touchmove",this.throttledHandleMouseMove),this.on(n,"mouseup",this.handleMouseUpHandler_),this.on(n,"touchend",this.handleMouseUpHandler_)}handleMouseUp(t){const n=this.el_.ownerDocument;this.off(n,"mousemove",this.throttledHandleMouseMove),this.off(n,"touchmove",this.throttledHandleMouseMove),this.off(n,"mouseup",this.handleMouseUpHandler_),this.off(n,"touchend",this.handleMouseUpHandler_)}handleMouseMove(t){this.volumeBar.handleMouseMove(t)}}jO.prototype.options_={children:["volumeBar"]};Rn.registerComponent("VolumeControl",jO);const D7=function(u,t){t.tech_&&!t.tech_.featuresMuteControl&&u.addClass("vjs-hidden"),u.on(t,"loadstart",function(){t.tech_.featuresMuteControl?u.removeClass("vjs-hidden"):u.addClass("vjs-hidden")})};class qO extends Lo{constructor(t,n){super(t,n),D7(this,t),this.on(t,["loadstart","volumechange"],r=>this.update(r))}buildCSSClass(){return`vjs-mute-control ${super.buildCSSClass()}`}handleClick(t){const n=this.player_.volume(),r=this.player_.lastVolume_();if(n===0){const l=r<.1?.1:r;this.player_.volume(l),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())}update(t){this.updateIcon_(),this.updateControlText_()}updateIcon_(){const t=this.player_.volume();let n=3;this.setIcon("volume-high"),Do&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),t===0||this.player_.muted()?(this.setIcon("volume-mute"),n=0):t<.33?(this.setIcon("volume-low"),n=1):t<.67&&(this.setIcon("volume-medium"),n=2),qE(this.el_,[0,1,2,3].reduce((r,l)=>r+`${l?" ":""}vjs-vol-${l}`,"")),Ph(this.el_,`vjs-vol-${n}`)}updateControlText_(){const n=this.player_.muted()||this.player_.volume()===0?"Unmute":"Mute";this.controlText()!==n&&this.controlText(n)}}qO.prototype.controlText_="Mute";Rn.registerComponent("MuteToggle",qO);class HO extends Rn{constructor(t,n={}){typeof n.inline<"u"?n.inline=n.inline:n.inline=!0,(typeof n.volumeControl>"u"||xg(n.volumeControl))&&(n.volumeControl=n.volumeControl||{},n.volumeControl.vertical=!n.inline),super(t,n),this.handleKeyPressHandler_=r=>this.handleKeyPress(r),this.on(t,["loadstart"],r=>this.volumePanelState_(r)),this.on(this.muteToggle,"keyup",r=>this.handleKeyPress(r)),this.on(this.volumeControl,"keyup",r=>this.handleVolumeControlKeyUp(r)),this.on("keydown",r=>this.handleKeyPress(r)),this.on("mouseover",r=>this.handleMouseOver(r)),this.on("mouseout",r=>this.handleMouseOut(r)),this.on(this.volumeControl,["slideractive"],this.sliderActive_),this.on(this.volumeControl,["sliderinactive"],this.sliderInactive_)}sliderActive_(){this.addClass("vjs-slider-active")}sliderInactive_(){this.removeClass("vjs-slider-active")}volumePanelState_(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")}createEl(){let t="vjs-volume-panel-horizontal";return this.options_.inline||(t="vjs-volume-panel-vertical"),super.createEl("div",{className:`vjs-volume-panel vjs-control ${t}`})}dispose(){this.handleMouseOut(),super.dispose()}handleVolumeControlKeyUp(t){t.key==="Escape"&&this.muteToggle.focus()}handleMouseOver(t){this.addClass("vjs-hover"),eu(li,"keyup",this.handleKeyPressHandler_)}handleMouseOut(t){this.removeClass("vjs-hover"),Ro(li,"keyup",this.handleKeyPressHandler_)}handleKeyPress(t){t.key==="Escape"&&this.handleMouseOut()}}HO.prototype.options_={children:["muteToggle","volumeControl"]};Rn.registerComponent("VolumePanel",HO);class GO extends Lo{constructor(t,n){super(t,n),this.validOptions=[5,10,30],this.skipTime=this.getSkipForwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`forward-${this.skipTime}`),this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime.toLocaleString(t.language())])),this.show()):this.hide()}getSkipForwardTime(){const t=this.options_.playerOptions;return t.controlBar&&t.controlBar.skipButtons&&t.controlBar.skipButtons.forward}buildCSSClass(){return`vjs-skip-forward-${this.getSkipForwardTime()} ${super.buildCSSClass()}`}handleClick(t){if(isNaN(this.player_.duration()))return;const n=this.player_.currentTime(),r=this.player_.liveTracker,l=r&&r.isLive()?r.seekableEnd():this.player_.duration();let d;n+this.skipTime<=l?d=n+this.skipTime:d=l,this.player_.currentTime(d)}handleLanguagechange(){this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime]))}}GO.prototype.controlText_="Skip Forward";Rn.registerComponent("SkipForward",GO);class VO extends Lo{constructor(t,n){super(t,n),this.validOptions=[5,10,30],this.skipTime=this.getSkipBackwardTime(),this.skipTime&&this.validOptions.includes(this.skipTime)?(this.setIcon(`replay-${this.skipTime}`),this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime.toLocaleString(t.language())])),this.show()):this.hide()}getSkipBackwardTime(){const t=this.options_.playerOptions;return t.controlBar&&t.controlBar.skipButtons&&t.controlBar.skipButtons.backward}buildCSSClass(){return`vjs-skip-backward-${this.getSkipBackwardTime()} ${super.buildCSSClass()}`}handleClick(t){const n=this.player_.currentTime(),r=this.player_.liveTracker,l=r&&r.isLive()&&r.seekableStart();let d;l&&n-this.skipTime<=l?d=l:n>=this.skipTime?d=n-this.skipTime:d=0,this.player_.currentTime(d)}handleLanguagechange(){this.controlText(this.localize("Skip backward {1} seconds",[this.skipTime]))}}VO.prototype.controlText_="Skip Backward";Rn.registerComponent("SkipBackward",VO);class $O extends Rn{constructor(t,n){super(t,n),n&&(this.menuButton_=n.menuButton),this.focusedChild_=-1,this.on("keydown",r=>this.handleKeyDown(r)),this.boundHandleBlur_=r=>this.handleBlur(r),this.boundHandleTapClick_=r=>this.handleTapClick(r)}addEventListenerForItem(t){t instanceof Rn&&(this.on(t,"blur",this.boundHandleBlur_),this.on(t,["tap","click"],this.boundHandleTapClick_))}removeEventListenerForItem(t){t instanceof Rn&&(this.off(t,"blur",this.boundHandleBlur_),this.off(t,["tap","click"],this.boundHandleTapClick_))}removeChild(t){typeof t=="string"&&(t=this.getChild(t)),this.removeEventListenerForItem(t),super.removeChild(t)}addItem(t){const n=this.addChild(t);n&&this.addEventListenerForItem(n)}createEl(){const t=this.options_.contentElType||"ul";this.contentEl_=ar(t,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");const n=super.createEl("div",{append:this.contentEl_,className:"vjs-menu"});return n.appendChild(this.contentEl_),eu(n,"click",function(r){r.preventDefault(),r.stopImmediatePropagation()}),n}dispose(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,super.dispose()}handleBlur(t){const n=t.relatedTarget||li.activeElement;if(!this.children().some(r=>r.el()===n)){const r=this.menuButton_;r&&r.buttonPressed_&&n!==r.el().firstChild&&r.unpressButton()}}handleTapClick(t){if(this.menuButton_){this.menuButton_.unpressButton();const n=this.children();if(!Array.isArray(n))return;const r=n.filter(l=>l.el()===t.target)[0];if(!r)return;r.name()!=="CaptionSettingsMenuItem"&&this.menuButton_.focus()}}handleKeyDown(t){t.key==="ArrowLeft"||t.key==="ArrowDown"?(t.preventDefault(),t.stopPropagation(),this.stepForward()):(t.key==="ArrowRight"||t.key==="ArrowUp")&&(t.preventDefault(),t.stopPropagation(),this.stepBack())}stepForward(){let t=0;this.focusedChild_!==void 0&&(t=this.focusedChild_+1),this.focus(t)}stepBack(){let t=0;this.focusedChild_!==void 0&&(t=this.focusedChild_-1),this.focus(t)}focus(t=0){const n=this.children().slice();n.length&&n[0].hasClass("vjs-menu-title")&&n.shift(),n.length>0&&(t<0?t=0:t>=n.length&&(t=n.length-1),this.focusedChild_=t,n[t].el_.focus())}}Rn.registerComponent("Menu",$O);class Qw extends Rn{constructor(t,n={}){super(t,n),this.menuButton_=new Lo(t,n),this.menuButton_.controlText(this.controlText_),this.menuButton_.el_.setAttribute("aria-haspopup","true");const r=Lo.prototype.buildCSSClass();this.menuButton_.el_.className=this.buildCSSClass()+" "+r,this.menuButton_.removeClass("vjs-control"),this.addChild(this.menuButton_),this.update(),this.enabled_=!0;const l=d=>this.handleClick(d);this.handleMenuKeyUp_=d=>this.handleMenuKeyUp(d),this.on(this.menuButton_,"tap",l),this.on(this.menuButton_,"click",l),this.on(this.menuButton_,"keydown",d=>this.handleKeyDown(d)),this.on(this.menuButton_,"mouseenter",()=>{this.addClass("vjs-hover"),this.menu.show(),eu(li,"keyup",this.handleMenuKeyUp_)}),this.on("mouseleave",d=>this.handleMouseLeave(d)),this.on("keydown",d=>this.handleSubmenuKeyDown(d))}update(){const t=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=t,this.addChild(t),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))}createMenu(){const t=new $O(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){const n=ar("li",{className:"vjs-menu-title",textContent:na(this.options_.title),tabIndex:-1}),r=new Rn(this.player_,{el:n});t.addItem(r)}if(this.items=this.createItems(),this.items)for(let n=0;n<this.items.length;n++)t.addItem(this.items[n]);return t}createItems(){}createEl(){return super.createEl("div",{className:this.buildWrapperCSSClass()},{})}setIcon(t){super.setIcon(t,this.menuButton_.el_)}buildWrapperCSSClass(){let t="vjs-menu-button";this.options_.inline===!0?t+="-inline":t+="-popup";const n=Lo.prototype.buildCSSClass();return`vjs-menu-button ${t} ${n} ${super.buildCSSClass()}`}buildCSSClass(){let t="vjs-menu-button";return this.options_.inline===!0?t+="-inline":t+="-popup",`vjs-menu-button ${t} ${super.buildCSSClass()}`}controlText(t,n=this.menuButton_.el()){return this.menuButton_.controlText(t,n)}dispose(){this.handleMouseLeave(),super.dispose()}handleClick(t){this.buttonPressed_?this.unpressButton():this.pressButton()}handleMouseLeave(t){this.removeClass("vjs-hover"),Ro(li,"keyup",this.handleMenuKeyUp_)}focus(){this.menuButton_.focus()}blur(){this.menuButton_.blur()}handleKeyDown(t){t.key==="Escape"||t.key==="Tab"?(this.buttonPressed_&&this.unpressButton(),!t.key==="Tab"&&(t.preventDefault(),this.menuButton_.focus())):(t.key==="Up"||t.key==="Down"&&!(this.player_.options_.playerOptions.spatialNavigation&&this.player_.options_.playerOptions.spatialNavigation.enabled))&&(this.buttonPressed_||(t.preventDefault(),this.pressButton()))}handleMenuKeyUp(t){(t.key==="Escape"||t.key==="Tab")&&this.removeClass("vjs-hover")}handleSubmenuKeyPress(t){this.handleSubmenuKeyDown(t)}handleSubmenuKeyDown(t){(t.key==="Escape"||t.key==="Tab")&&(this.buttonPressed_&&this.unpressButton(),!t.key==="Tab"&&(t.preventDefault(),this.menuButton_.focus()))}pressButton(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),Do&&nO())return;this.menu.focus()}}unpressButton(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))}disable(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()}enable(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()}}Rn.registerComponent("MenuButton",Qw);class Jw extends Qw{constructor(t,n){const r=n.tracks;if(super(t,n),this.items.length<=1&&this.hide(),!r)return;const l=ks(this,this.update);r.addEventListener("removetrack",l),r.addEventListener("addtrack",l),r.addEventListener("labelchange",l),this.player_.on("ready",l),this.player_.on("dispose",function(){r.removeEventListener("removetrack",l),r.removeEventListener("addtrack",l),r.removeEventListener("labelchange",l)})}}Rn.registerComponent("TrackButton",Jw);class Vy extends XE{constructor(t,n){super(t,n),this.selectable=n.selectable,this.isSelected_=n.selected||!1,this.multiSelectable=n.multiSelectable,this.selected(this.isSelected_),this.selectable?this.multiSelectable?this.el_.setAttribute("role","menuitemcheckbox"):this.el_.setAttribute("role","menuitemradio"):this.el_.setAttribute("role","menuitem")}createEl(t,n,r){this.nonIconControl=!0;const l=super.createEl("li",Object.assign({className:"vjs-menu-item",tabIndex:-1},n),r),d=ar("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)});return this.player_.options_.experimentalSvgIcons?l.appendChild(d):l.replaceChild(d,l.querySelector(".vjs-icon-placeholder")),l}handleKeyDown(t){["Tab","Escape","ArrowUp","ArrowLeft","ArrowRight","ArrowDown"].includes(t.key)||super.handleKeyDown(t)}handleClick(t){this.selected(!0)}selected(t){this.selectable&&(t?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))}}Rn.registerComponent("MenuItem",Vy);class $y extends Vy{constructor(t,n){const r=n.track,l=t.textTracks();n.label=r.label||r.language||"Unknown",n.selected=r.mode==="showing",super(t,n),this.track=r,this.kinds=(n.kinds||[n.kind||this.track.kind]).filter(Boolean);const d=(...p)=>{this.handleTracksChange.apply(this,p)},f=(...p)=>{this.handleSelectedLanguageChange.apply(this,p)};if(t.on(["loadstart","texttrackchange"],d),l.addEventListener("change",d),l.addEventListener("selectedlanguagechange",f),this.on("dispose",function(){t.off(["loadstart","texttrackchange"],d),l.removeEventListener("change",d),l.removeEventListener("selectedlanguagechange",f)}),l.onchange===void 0){let p;this.on(["tap","click"],function(){if(typeof St.Event!="object")try{p=new St.Event("change")}catch{}p||(p=li.createEvent("Event"),p.initEvent("change",!0,!0)),l.dispatchEvent(p)})}this.handleTracksChange()}handleClick(t){const n=this.track,r=this.player_.textTracks();if(super.handleClick(t),!!r)for(let l=0;l<r.length;l++){const d=r[l];this.kinds.indexOf(d.kind)!==-1&&(d===n?d.mode!=="showing"&&(d.mode="showing"):d.mode!=="disabled"&&(d.mode="disabled"))}}handleTracksChange(t){const n=this.track.mode==="showing";n!==this.isSelected_&&this.selected(n)}handleSelectedLanguageChange(t){if(this.track.mode==="showing"){const n=this.player_.cache_.selectedLanguage;if(n&&n.enabled&&n.language===this.track.language&&n.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}}dispose(){this.track=null,super.dispose()}}Rn.registerComponent("TextTrackMenuItem",$y);class KO extends $y{constructor(t,n){n.track={player:t,kind:n.kind,kinds:n.kinds,default:!1,mode:"disabled"},n.kinds||(n.kinds=[n.kind]),n.label?n.track.label=n.label:n.track.label=n.kinds.join(" and ")+" off",n.selectable=!0,n.multiSelectable=!1,super(t,n)}handleTracksChange(t){const n=this.player().textTracks();let r=!0;for(let l=0,d=n.length;l<d;l++){const f=n[l];if(this.options_.kinds.indexOf(f.kind)>-1&&f.mode==="showing"){r=!1;break}}r!==this.isSelected_&&this.selected(r)}handleSelectedLanguageChange(t){const n=this.player().textTracks();let r=!0;for(let l=0,d=n.length;l<d;l++){const f=n[l];if(["captions","descriptions","subtitles"].indexOf(f.kind)>-1&&f.mode==="showing"){r=!1;break}}r&&(this.player_.cache_.selectedLanguage={enabled:!1})}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.label),super.handleLanguagechange()}}Rn.registerComponent("OffTextTrackMenuItem",KO);class Ug extends Jw{constructor(t,n={}){n.tracks=t.textTracks(),super(t,n)}createItems(t=[],n=$y){let r;this.label_&&(r=`${this.label_} off`),t.push(new KO(this.player_,{kinds:this.kinds_,kind:this.kind_,label:r})),this.hideThreshold_+=1;const l=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(let d=0;d<l.length;d++){const f=l[d];if(this.kinds_.indexOf(f.kind)>-1){const p=new n(this.player_,{track:f,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});p.addClass(`vjs-${f.kind}-menu-item`),t.push(p)}}return t}}Rn.registerComponent("TextTrackButton",Ug);class YO extends Vy{constructor(t,n){const r=n.track,l=n.cue,d=t.currentTime();n.selectable=!0,n.multiSelectable=!1,n.label=l.text,n.selected=l.startTime<=d&&d<l.endTime,super(t,n),this.track=r,this.cue=l}handleClick(t){super.handleClick(),this.player_.currentTime(this.cue.startTime)}}Rn.registerComponent("ChaptersTrackMenuItem",YO);class Zw extends Ug{constructor(t,n,r){super(t,n,r),this.setIcon("chapters"),this.selectCurrentItem_=()=>{this.items.forEach(l=>{l.selected(this.track_.activeCues[0]===l.cue)})}}buildCSSClass(){return`vjs-chapters-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-chapters-button ${super.buildWrapperCSSClass()}`}update(t){if(t&&t.track&&t.track.kind!=="chapters")return;const n=this.findChaptersTrack();n!==this.track_?(this.setTrack(n),super.update()):(!this.items||n&&n.cues&&n.cues.length!==this.items.length)&&super.update()}setTrack(t){if(this.track_!==t){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){const n=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);n&&n.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=t,this.track_){this.track_.mode="hidden";const n=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);n&&n.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}}findChaptersTrack(){const t=this.player_.textTracks()||[];for(let n=t.length-1;n>=0;n--){const r=t[n];if(r.kind===this.kind_)return r}}getMenuCaption(){return this.track_&&this.track_.label?this.track_.label:this.localize(na(this.kind_))}createMenu(){return this.options_.title=this.getMenuCaption(),super.createMenu()}createItems(){const t=[];if(!this.track_)return t;const n=this.track_.cues;if(!n)return t;for(let r=0,l=n.length;r<l;r++){const d=n[r],f=new YO(this.player_,{track:this.track_,cue:d});t.push(f)}return t}}Zw.prototype.kind_="chapters";Zw.prototype.controlText_="Chapters";Rn.registerComponent("ChaptersButton",Zw);class e1 extends Ug{constructor(t,n,r){super(t,n,r),this.setIcon("audio-description");const l=t.textTracks(),d=ks(this,this.handleTracksChange);l.addEventListener("change",d),this.on("dispose",function(){l.removeEventListener("change",d)})}handleTracksChange(t){const n=this.player().textTracks();let r=!1;for(let l=0,d=n.length;l<d;l++){const f=n[l];if(f.kind!==this.kind_&&f.mode==="showing"){r=!0;break}}r?this.disable():this.enable()}buildCSSClass(){return`vjs-descriptions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-descriptions-button ${super.buildWrapperCSSClass()}`}}e1.prototype.kind_="descriptions";e1.prototype.controlText_="Descriptions";Rn.registerComponent("DescriptionsButton",e1);class t1 extends Ug{constructor(t,n,r){super(t,n,r),this.setIcon("subtitles")}buildCSSClass(){return`vjs-subtitles-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subtitles-button ${super.buildWrapperCSSClass()}`}}t1.prototype.kind_="subtitles";t1.prototype.controlText_="Subtitles";Rn.registerComponent("SubtitlesButton",t1);class n1 extends $y{constructor(t,n){n.track={player:t,kind:n.kind,label:n.kind+" settings",selectable:!1,default:!1,mode:"disabled"},n.selectable=!1,n.name="CaptionSettingsMenuItem",super(t,n),this.addClass("vjs-texttrack-settings"),this.controlText(", opens "+n.kind+" settings dialog")}handleClick(t){this.player().getChild("textTrackSettings").open()}handleLanguagechange(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.kind+" settings"),super.handleLanguagechange()}}Rn.registerComponent("CaptionSettingsMenuItem",n1);class i1 extends Ug{constructor(t,n,r){super(t,n,r),this.setIcon("captions")}buildCSSClass(){return`vjs-captions-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-captions-button ${super.buildWrapperCSSClass()}`}createItems(){const t=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(t.push(new n1(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),super.createItems(t)}}i1.prototype.kind_="captions";i1.prototype.controlText_="Captions";Rn.registerComponent("CaptionsButton",i1);class WO extends $y{createEl(t,n,r){const l=super.createEl(t,n,r),d=l.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="captions"&&(this.player_.options_.experimentalSvgIcons?this.setIcon("captions",l):d.appendChild(ar("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),d.appendChild(ar("span",{className:"vjs-control-text",textContent:` ${this.localize("Captions")}`}))),l}}Rn.registerComponent("SubsCapsMenuItem",WO);class r1 extends Ug{constructor(t,n={}){super(t,n),this.label_="subtitles",this.setIcon("subtitles"),["en","en-us","en-ca","fr-ca"].indexOf(this.player_.language_)>-1&&(this.label_="captions",this.setIcon("captions")),this.menuButton_.controlText(na(this.label_))}buildCSSClass(){return`vjs-subs-caps-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-subs-caps-button ${super.buildWrapperCSSClass()}`}createItems(){let t=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(t.push(new n1(this.player_,{kind:this.label_})),this.hideThreshold_+=1),t=super.createItems(t,WO),t}}r1.prototype.kinds_=["captions","subtitles"];r1.prototype.controlText_="Subtitles";Rn.registerComponent("SubsCapsButton",r1);class XO extends Vy{constructor(t,n){const r=n.track,l=t.audioTracks();n.label=r.label||r.language||"Unknown",n.selected=r.enabled,super(t,n),this.track=r,this.addClass(`vjs-${r.kind}-menu-item`);const d=(...f)=>{this.handleTracksChange.apply(this,f)};l.addEventListener("change",d),this.on("dispose",()=>{l.removeEventListener("change",d)})}createEl(t,n,r){const l=super.createEl(t,n,r),d=l.querySelector(".vjs-menu-item-text");return["main-desc","descriptions"].indexOf(this.options_.track.kind)>=0&&(d.appendChild(ar("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),d.appendChild(ar("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),l}handleClick(t){if(super.handleClick(t),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks){const n=this.player_.audioTracks();for(let r=0;r<n.length;r++){const l=n[r];l!==this.track&&(l.enabled=l===this.track)}}}handleTracksChange(t){this.selected(this.track.enabled)}}Rn.registerComponent("AudioTrackMenuItem",XO);class QO extends Jw{constructor(t,n={}){n.tracks=t.audioTracks(),super(t,n),this.setIcon("audio")}buildCSSClass(){return`vjs-audio-button ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-audio-button ${super.buildWrapperCSSClass()}`}createItems(t=[]){this.hideThreshold_=1;const n=this.player_.audioTracks();for(let r=0;r<n.length;r++){const l=n[r];t.push(new XO(this.player_,{track:l,selectable:!0,multiSelectable:!1}))}return t}}QO.prototype.controlText_="Audio Track";Rn.registerComponent("AudioTrackButton",QO);class s1 extends Vy{constructor(t,n){const r=n.rate,l=parseFloat(r,10);n.label=r,n.selected=l===t.playbackRate(),n.selectable=!0,n.multiSelectable=!1,super(t,n),this.label=r,this.rate=l,this.on(t,"ratechange",d=>this.update(d))}handleClick(t){super.handleClick(),this.player().playbackRate(this.rate)}update(t){this.selected(this.player().playbackRate()===this.rate)}}s1.prototype.contentElType="button";Rn.registerComponent("PlaybackRateMenuItem",s1);class JO extends Qw{constructor(t,n){super(t,n),this.menuButton_.el_.setAttribute("aria-describedby",this.labelElId_),this.updateVisibility(),this.updateLabel(),this.on(t,"loadstart",r=>this.updateVisibility(r)),this.on(t,"ratechange",r=>this.updateLabel(r)),this.on(t,"playbackrateschange",r=>this.handlePlaybackRateschange(r))}createEl(){const t=super.createEl();return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=ar("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),t.appendChild(this.labelEl_),t}dispose(){this.labelEl_=null,super.dispose()}buildCSSClass(){return`vjs-playback-rate ${super.buildCSSClass()}`}buildWrapperCSSClass(){return`vjs-playback-rate ${super.buildWrapperCSSClass()}`}createItems(){const t=this.playbackRates(),n=[];for(let r=t.length-1;r>=0;r--)n.push(new s1(this.player(),{rate:t[r]+"x"}));return n}handlePlaybackRateschange(t){this.update()}playbackRates(){const t=this.player();return t.playbackRates&&t.playbackRates()||[]}playbackRateSupported(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0}updateVisibility(t){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")}updateLabel(t){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")}}JO.prototype.controlText_="Playback Rate";Rn.registerComponent("PlaybackRateMenuButton",JO);class ZO extends Rn{buildCSSClass(){return`vjs-spacer ${super.buildCSSClass()}`}createEl(t="div",n={},r={}){return n.className||(n.className=this.buildCSSClass()),super.createEl(t,n,r)}}Rn.registerComponent("Spacer",ZO);class R7 extends ZO{buildCSSClass(){return`vjs-custom-control-spacer ${super.buildCSSClass()}`}createEl(){return super.createEl("div",{className:this.buildCSSClass(),textContent:""})}}Rn.registerComponent("CustomControlSpacer",R7);class eF extends Rn{createEl(){return super.createEl("div",{className:"vjs-control-bar",dir:"ltr"})}}eF.prototype.options_={children:["playToggle","skipBackward","skipForward","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","pictureInPictureToggle","fullscreenToggle"]};Rn.registerComponent("ControlBar",eF);class tF extends Og{constructor(t,n){super(t,n),this.on(t,"error",r=>{this.open(r)})}buildCSSClass(){return`vjs-error-display ${super.buildCSSClass()}`}content(){const t=this.player().error();return t?this.localize(t.message):""}}tF.prototype.options_=Object.assign({},Og.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});Rn.registerComponent("ErrorDisplay",tF);class nF extends Rn{constructor(t,n={}){super(t,n),this.el_.setAttribute("aria-labelledby",this.selectLabelledbyIds)}createEl(){return this.selectLabelledbyIds=[this.options_.legendId,this.options_.labelId].join(" ").trim(),ar("select",{id:this.options_.id},{},this.options_.SelectOptions.map(n=>{const r=(this.options_.labelId?this.options_.labelId:`vjs-track-option-${Su()}`)+"-"+n[1].replace(/\W+/g,""),l=ar("option",{id:r,value:this.localize(n[0]),textContent:this.localize(n[1])});return l.setAttribute("aria-labelledby",`${this.selectLabelledbyIds} ${r}`),l}))}}Rn.registerComponent("TextTrackSelect",nF);class Nh extends Rn{constructor(t,n={}){super(t,n);const r=ar("legend",{textContent:this.localize(this.options_.legendText),id:this.options_.legendId});this.el().appendChild(r);const l=this.options_.selects;for(const d of l){const f=this.options_.selectConfigs[d],p=f.className,m=f.id.replace("%s",this.options_.id_);let y=null;const b=`vjs_select_${Su()}`;if(this.options_.type==="colors"){y=ar("span",{className:p});const A=ar("label",{id:m,className:"vjs-label",textContent:this.localize(f.label)});A.setAttribute("for",b),y.appendChild(A)}const _=new nF(t,{SelectOptions:f.options,legendId:this.options_.legendId,id:b,labelId:m});this.addChild(_),this.options_.type==="colors"&&(y.appendChild(_.el()),this.el().appendChild(y))}}createEl(){return ar("fieldset",{className:this.options_.className})}}Rn.registerComponent("TextTrackFieldset",Nh);class iF extends Rn{constructor(t,n={}){super(t,n);const r=this.options_.textTrackComponentid,l=new Nh(t,{id_:r,legendId:`captions-text-legend-${r}`,legendText:this.localize("Text"),className:"vjs-fg vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(l);const d=new Nh(t,{id_:r,legendId:`captions-background-${r}`,legendText:this.localize("Text Background"),className:"vjs-bg vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(d);const f=new Nh(t,{id_:r,legendId:`captions-window-${r}`,legendText:this.localize("Caption Area Background"),className:"vjs-window vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"colors"});this.addChild(f)}createEl(){return ar("div",{className:"vjs-track-settings-colors"})}}Rn.registerComponent("TextTrackSettingsColors",iF);class rF extends Rn{constructor(t,n={}){super(t,n);const r=this.options_.textTrackComponentid,l=new Nh(t,{id_:r,legendId:`captions-font-size-${r}`,legendText:"Font Size",className:"vjs-font-percent vjs-track-setting",selects:this.options_.fieldSets[0],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(l);const d=new Nh(t,{id_:r,legendId:`captions-edge-style-${r}`,legendText:this.localize("Text Edge Style"),className:"vjs-edge-style vjs-track-setting",selects:this.options_.fieldSets[1],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(d);const f=new Nh(t,{id_:r,legendId:`captions-font-family-${r}`,legendText:this.localize("Font Family"),className:"vjs-font-family vjs-track-setting",selects:this.options_.fieldSets[2],selectConfigs:this.options_.selectConfigs,type:"font"});this.addChild(f)}createEl(){return ar("div",{className:"vjs-track-settings-font"})}}Rn.registerComponent("TextTrackSettingsFont",rF);class sF extends Rn{constructor(t,n={}){super(t,n);const r=new Lo(t,{controlText:this.localize("restore all settings to the default values"),className:"vjs-default-button"});r.el().classList.remove("vjs-control","vjs-button"),r.el().textContent=this.localize("Reset"),this.addChild(r);const l=this.localize("Done"),d=new Lo(t,{controlText:l,className:"vjs-done-button"});d.el().classList.remove("vjs-control","vjs-button"),d.el().textContent=l,this.addChild(d)}createEl(){return ar("div",{className:"vjs-track-settings-controls"})}}Rn.registerComponent("TrackSettingsControls",sF);const eA="vjs-text-track-settings",hP=["#000","Black"],pP=["#00F","Blue"],gP=["#0FF","Cyan"],mP=["#0F0","Green"],yP=["#F0F","Magenta"],vP=["#F00","Red"],TP=["#FFF","White"],EP=["#FF0","Yellow"],tA=["1","Opaque"],nA=["0.5","Semi-Transparent"],bP=["0","Transparent"],Cf={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[hP,TP,vP,mP,pP,EP,yP,gP],className:"vjs-bg-color"},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Opacity",options:[tA,nA,bP],className:"vjs-bg-opacity vjs-opacity"},color:{selector:".vjs-text-color > select",id:"captions-foreground-color-%s",label:"Color",options:[TP,hP,vP,mP,pP,EP,yP,gP],className:"vjs-text-color"},edgeStyle:{selector:".vjs-edge-style > select",id:"",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Drop shadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:u=>u==="1.00"?null:Number(u)},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Opacity",options:[tA,nA],className:"vjs-text-opacity vjs-opacity"},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color",className:"vjs-window-color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Opacity",options:[bP,nA,tA],className:"vjs-window-opacity vjs-opacity"}};Cf.windowColor.options=Cf.backgroundColor.options;function aF(u,t){if(t&&(u=t(u)),u&&u!=="none")return u}function L7(u,t){const n=u.options[u.options.selectedIndex].value;return aF(n,t)}function P7(u,t,n){if(t){for(let r=0;r<u.options.length;r++)if(aF(u.options[r].value,n)===t){u.selectedIndex=r;break}}}class M7 extends Og{constructor(t,n){n.temporary=!1,super(t,n),this.updateDisplay=this.updateDisplay.bind(this),this.fill(),this.hasBeenOpened_=this.hasBeenFilled_=!0,this.renderModalComponents(t),this.endDialog=ar("p",{className:"vjs-control-text",textContent:this.localize("End of dialog window.")}),this.el().appendChild(this.endDialog),this.setDefaults(),n.persistTextTrackSettings===void 0&&(this.options_.persistTextTrackSettings=this.options_.playerOptions.persistTextTrackSettings),this.bindFunctionsToSelectsAndButtons(),this.options_.persistTextTrackSettings&&this.restoreSettings()}renderModalComponents(t){const n=new iF(t,{textTrackComponentid:this.id_,selectConfigs:Cf,fieldSets:[["color","textOpacity"],["backgroundColor","backgroundOpacity"],["windowColor","windowOpacity"]]});this.addChild(n);const r=new rF(t,{textTrackComponentid:this.id_,selectConfigs:Cf,fieldSets:[["fontPercent"],["edgeStyle"],["fontFamily"]]});this.addChild(r);const l=new sF(t);this.addChild(l)}bindFunctionsToSelectsAndButtons(){this.on(this.$(".vjs-done-button"),["click","tap"],()=>{this.saveSettings(),this.close()}),this.on(this.$(".vjs-default-button"),["click","tap"],()=>{this.setDefaults(),this.updateDisplay()}),lg(Cf,t=>{this.on(this.$(t.selector),"change",this.updateDisplay)})}dispose(){this.endDialog=null,super.dispose()}label(){return this.localize("Caption Settings Dialog")}description(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")}buildCSSClass(){return super.buildCSSClass()+" vjs-text-track-settings"}getValues(){return WN(Cf,(t,n,r)=>{const l=L7(this.$(n.selector),n.parser);return l!==void 0&&(t[r]=l),t},{})}setValues(t){lg(Cf,(n,r)=>{P7(this.$(n.selector),t[r],n.parser)})}setDefaults(){lg(Cf,t=>{const n=t.hasOwnProperty("default")?t.default:0;this.$(t.selector).selectedIndex=n})}restoreSettings(){let t;try{t=JSON.parse(St.localStorage.getItem(eA))}catch(n){Mr.warn(n)}t&&this.setValues(t)}saveSettings(){if(!this.options_.persistTextTrackSettings)return;const t=this.getValues();try{Object.keys(t).length?St.localStorage.setItem(eA,JSON.stringify(t)):St.localStorage.removeItem(eA)}catch(n){Mr.warn(n)}}updateDisplay(){const t=this.player_.getChild("textTrackDisplay");t&&t.updateDisplay()}handleLanguagechange(){this.fill(),this.renderModalComponents(this.player_),this.bindFunctionsToSelectsAndButtons()}}Rn.registerComponent("TextTrackSettings",M7);class N7 extends Rn{constructor(t,n){let r=n.ResizeObserver||St.ResizeObserver;n.ResizeObserver===null&&(r=!1);const l=gs({createEl:!r,reportTouchActivity:!1},n);super(t,l),this.ResizeObserver=n.ResizeObserver||St.ResizeObserver,this.loadListener_=null,this.resizeObserver_=null,this.debouncedHandler_=vO(()=>{this.resizeHandler()},100,!1,this),r?(this.resizeObserver_=new this.ResizeObserver(this.debouncedHandler_),this.resizeObserver_.observe(t.el())):(this.loadListener_=()=>{if(!this.el_||!this.el_.contentWindow)return;const d=this.debouncedHandler_;let f=this.unloadListener_=function(){Ro(this,"resize",d),Ro(this,"unload",f),f=null};eu(this.el_.contentWindow,"unload",f),eu(this.el_.contentWindow,"resize",d)},this.one("load",this.loadListener_))}createEl(){return super.createEl("iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})}resizeHandler(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")}dispose(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,super.dispose()}}Rn.registerComponent("ResizeManager",N7);const O7={trackingThreshold:20,liveTolerance:15};class F7 extends Rn{constructor(t,n){const r=gs(O7,n,{createEl:!1});super(t,r),this.trackLiveHandler_=()=>this.trackLive_(),this.handlePlay_=l=>this.handlePlay(l),this.handleFirstTimeupdate_=l=>this.handleFirstTimeupdate(l),this.handleSeeked_=l=>this.handleSeeked(l),this.seekToLiveEdge_=l=>this.seekToLiveEdge(l),this.reset_(),this.on(this.player_,"durationchange",l=>this.handleDurationchange(l)),this.on(this.player_,"canplay",()=>this.toggleTracking())}trackLive_(){const t=this.player_.seekable();if(!t||!t.length)return;const n=Number(St.performance.now().toFixed(4)),r=this.lastTime_===-1?0:(n-this.lastTime_)/1e3;this.lastTime_=n,this.pastSeekEnd_=this.pastSeekEnd()+r;const l=this.liveCurrentTime(),d=this.player_.currentTime();let f=this.player_.paused()||this.seekedBehindLive_||Math.abs(l-d)>this.options_.liveTolerance;(!this.timeupdateSeen_||l===1/0)&&(f=!1),f!==this.behindLiveEdge_&&(this.behindLiveEdge_=f,this.trigger("liveedgechange"))}handleDurationchange(){this.toggleTracking()}toggleTracking(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())}startTracking(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,xu),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))}handleFirstTimeupdate(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)}handleSeeked(){const t=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&t>2,this.nextSeekedFromUser_=!1,this.trackLive_()}handlePlay(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)}reset_(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)}nextSeekedFromUser(){this.nextSeekedFromUser_=!0}stopTracking(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))}seekableEnd(){const t=this.player_.seekable(),n=[];let r=t?t.length:0;for(;r--;)n.push(t.end(r));return n.length?n.sort()[n.length-1]:1/0}seekableStart(){const t=this.player_.seekable(),n=[];let r=t?t.length:0;for(;r--;)n.push(t.start(r));return n.length?n.sort()[0]:0}liveWindow(){const t=this.liveCurrentTime();return t===1/0?0:t-this.seekableStart()}isLive(){return this.isTracking()}atLiveEdge(){return!this.behindLiveEdge()}liveCurrentTime(){return this.pastSeekEnd()+this.seekableEnd()}pastSeekEnd(){const t=this.seekableEnd();return this.lastSeekEnd_!==-1&&t!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=t,this.pastSeekEnd_}behindLiveEdge(){return this.behindLiveEdge_}isTracking(){return typeof this.trackingInterval_=="number"}seekToLiveEdge(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))}dispose(){this.stopTracking(),super.dispose()}}Rn.registerComponent("LiveTracker",F7);class U7 extends Rn{constructor(t,n){super(t,n),this.on("statechanged",r=>this.updateDom_()),this.updateDom_()}createEl(){return this.els={title:ar("div",{className:"vjs-title-bar-title",id:`vjs-title-bar-title-${Su()}`}),description:ar("div",{className:"vjs-title-bar-description",id:`vjs-title-bar-description-${Su()}`})},ar("div",{className:"vjs-title-bar"},{},XN(this.els))}updateDom_(){const t=this.player_.tech_,n=t&&t.el_,r={title:"aria-labelledby",description:"aria-describedby"};["title","description"].forEach(l=>{const d=this.state[l],f=this.els[l],p=r[l];VE(f),d&&Nf(f,d),n&&(n.removeAttribute(p),d&&n.setAttribute(p,f.id))}),this.state.title||this.state.description?this.show():this.hide()}update(t){this.setState(t)}dispose(){const t=this.player_.tech_,n=t&&t.el_;n&&(n.removeAttribute("aria-labelledby"),n.removeAttribute("aria-describedby")),super.dispose(),this.els=null}}Rn.registerComponent("TitleBar",U7);const B7={initialDisplay:4e3,position:[],takeFocus:!1};class z7 extends Lo{constructor(t,n){n=gs(B7,n),super(t,n),this.controlText(n.controlText),this.hide(),this.on(this.player_,["useractive","userinactive"],r=>{this.removeClass("force-display")})}buildCSSClass(){return`vjs-transient-button focus-visible ${this.options_.position.map(t=>`vjs-${t}`).join(" ")}`}createEl(){const t=ar("button",{},{type:"button",class:this.buildCSSClass()},ar("span"));return this.controlTextEl_=t.querySelector("span"),t}show(){super.show(),this.addClass("force-display"),this.options_.takeFocus&&this.el().focus({preventScroll:!0}),this.forceDisplayTimeout=this.player_.setTimeout(()=>{this.removeClass("force-display")},this.options_.initialDisplay)}hide(){this.removeClass("force-display"),super.hide()}dispose(){this.player_.clearTimeout(this.forceDisplayTimeout),super.dispose()}}Rn.registerComponent("TransientButton",z7);const HA=u=>{const t=u.el();if(t.hasAttribute("src"))return u.triggerSourceset(t.src),!0;const n=u.$$("source"),r=[];let l="";if(!n.length)return!1;for(let d=0;d<n.length;d++){const f=n[d].src;f&&r.indexOf(f)===-1&&r.push(f)}return r.length?(r.length===1&&(l=r[0]),u.triggerSourceset(l),!0):!1},j7=Object.defineProperty({},"innerHTML",{get(){return this.cloneNode(!0).innerHTML},set(u){const t=li.createElement(this.nodeName.toLowerCase());t.innerHTML=u;const n=li.createDocumentFragment();for(;t.childNodes.length;)n.appendChild(t.childNodes[0]);return this.innerText="",St.Element.prototype.appendChild.call(this,n),this.innerHTML}}),oF=(u,t)=>{let n={};for(let r=0;r<u.length&&(n=Object.getOwnPropertyDescriptor(u[r],t),!(n&&n.set&&n.get));r++);return n.enumerable=!0,n.configurable=!0,n},q7=u=>oF([u.el(),St.HTMLMediaElement.prototype,St.Element.prototype,j7],"innerHTML"),_P=function(u){const t=u.el();if(t.resetSourceWatch_)return;const n={},r=q7(u),l=d=>(...f)=>{const p=d.apply(t,f);return HA(u),p};["append","appendChild","insertAdjacentHTML"].forEach(d=>{t[d]&&(n[d]=t[d],t[d]=l(n[d]))}),Object.defineProperty(t,"innerHTML",gs(r,{set:l(r.set)})),t.resetSourceWatch_=()=>{t.resetSourceWatch_=null,Object.keys(n).forEach(d=>{t[d]=n[d]}),Object.defineProperty(t,"innerHTML",r)},u.one("sourceset",t.resetSourceWatch_)},H7=Object.defineProperty({},"src",{get(){return this.hasAttribute("src")?kO(St.Element.prototype.getAttribute.call(this,"src")):""},set(u){return St.Element.prototype.setAttribute.call(this,"src",u),u}}),G7=u=>oF([u.el(),St.HTMLMediaElement.prototype,H7],"src"),V7=function(u){if(!u.featuresSourceset)return;const t=u.el();if(t.resetSourceset_)return;const n=G7(u),r=t.setAttribute,l=t.load;Object.defineProperty(t,"src",gs(n,{set:d=>{const f=n.set.call(t,d);return u.triggerSourceset(t.src),f}})),t.setAttribute=(d,f)=>{const p=r.call(t,d,f);return/src/i.test(d)&&u.triggerSourceset(t.src),p},t.load=()=>{const d=l.call(t);return HA(u)||(u.triggerSourceset(""),_P(u)),d},t.currentSrc?u.triggerSourceset(t.currentSrc):HA(u)||_P(u),t.resetSourceset_=()=>{t.resetSourceset_=null,t.load=l,t.setAttribute=r,Object.defineProperty(t,"src",n),t.resetSourceWatch_&&t.resetSourceWatch_()}};let Mi=class HT extends Es{constructor(t,n){super(t,n);const r=t.source;let l=!1;if(this.featuresVideoFrameCallback=this.featuresVideoFrameCallback&&this.el_.tagName==="VIDEO",r&&(this.el_.currentSrc!==r.src||t.tag&&t.tag.initNetworkState_===3)?this.setSource(r):this.handleLateInit_(this.el_),t.enableSourceset&&this.setupSourcesetHandling_(),this.isScrubbing_=!1,this.el_.hasChildNodes()){const d=this.el_.childNodes;let f=d.length;const p=[];for(;f--;){const m=d[f];m.nodeName.toLowerCase()==="track"&&(this.featuresNativeTextTracks?(this.remoteTextTrackEls().addTrackElement_(m),this.remoteTextTracks().addTrack(m.track),this.textTracks().addTrack(m.track),!l&&!this.el_.hasAttribute("crossorigin")&&WE(m.src)&&(l=!0)):p.push(m))}for(let m=0;m<p.length;m++)this.el_.removeChild(p[m])}this.proxyNativeTracks_(),this.featuresNativeTextTracks&&l&&Mr.warn(`Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.
This may prevent text tracks from loading.`),this.restoreMetadataTracksInIOSNativePlayer_(),(Ny||zE)&&t.nativeControlsForTouch===!0&&this.setControls(!0),this.proxyWebkitFullscreen_(),this.triggerReady()}dispose(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),HT.disposeMediaElement(this.el_),this.options_=null,super.dispose()}setupSourcesetHandling_(){V7(this)}restoreMetadataTracksInIOSNativePlayer_(){const t=this.textTracks();let n;const r=()=>{n=[];for(let d=0;d<t.length;d++){const f=t[d];f.kind==="metadata"&&n.push({track:f,storedMode:f.mode})}};r(),t.addEventListener("change",r),this.on("dispose",()=>t.removeEventListener("change",r));const l=()=>{for(let d=0;d<n.length;d++){const f=n[d];f.track.mode==="disabled"&&f.track.mode!==f.storedMode&&(f.track.mode=f.storedMode)}t.removeEventListener("change",l)};this.on("webkitbeginfullscreen",()=>{t.removeEventListener("change",r),t.removeEventListener("change",l),t.addEventListener("change",l)}),this.on("webkitendfullscreen",()=>{t.removeEventListener("change",r),t.addEventListener("change",r),t.removeEventListener("change",l)})}overrideNative_(t,n){if(n!==this[`featuresNative${t}Tracks`])return;const r=t.toLowerCase();this[`${r}TracksListeners_`]&&Object.keys(this[`${r}TracksListeners_`]).forEach(l=>{this.el()[`${r}Tracks`].removeEventListener(l,this[`${r}TracksListeners_`][l])}),this[`featuresNative${t}Tracks`]=!n,this[`${r}TracksListeners_`]=null,this.proxyNativeTracksForType_(r)}overrideNativeAudioTracks(t){this.overrideNative_("Audio",t)}overrideNativeVideoTracks(t){this.overrideNative_("Video",t)}proxyNativeTracksForType_(t){const n=bu[t],r=this.el()[n.getterName],l=this[n.getterName]();if(!this[`featuresNative${n.capitalName}Tracks`]||!r||!r.addEventListener)return;const d={change:p=>{const m={type:"change",target:l,currentTarget:l,srcElement:l};l.trigger(m),t==="text"&&this[Cg.remoteText.getterName]().trigger(m)},addtrack(p){l.addTrack(p.track)},removetrack(p){l.removeTrack(p.track)}},f=function(){const p=[];for(let m=0;m<l.length;m++){let y=!1;for(let b=0;b<r.length;b++)if(r[b]===l[m]){y=!0;break}y||p.push(l[m])}for(;p.length;)l.removeTrack(p.shift())};this[n.getterName+"Listeners_"]=d,Object.keys(d).forEach(p=>{const m=d[p];r.addEventListener(p,m),this.on("dispose",y=>r.removeEventListener(p,m))}),this.on("loadstart",f),this.on("dispose",p=>this.off("loadstart",f))}proxyNativeTracks_(){bu.names.forEach(t=>{this.proxyNativeTracksForType_(t)})}createEl(){let t=this.options_.tag;if(!t||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(t){const r=t.cloneNode(!0);t.parentNode&&t.parentNode.insertBefore(r,t),HT.disposeMediaElement(t),t=r}else{t=li.createElement("video");const r=this.options_.tag&&If(this.options_.tag),l=gs({},r);(!Ny||this.options_.nativeControlsForTouch!==!0)&&delete l.controls,sO(t,Object.assign(l,{id:this.options_.techId,class:"vjs-tech"}))}t.playerId=this.options_.playerId}typeof this.options_.preload<"u"&&Ag(t,"preload",this.options_.preload),this.options_.disablePictureInPicture!==void 0&&(t.disablePictureInPicture=this.options_.disablePictureInPicture);const n=["loop","muted","playsinline","autoplay"];for(let r=0;r<n.length;r++){const l=n[r],d=this.options_[l];typeof d<"u"&&(d?Ag(t,l,l):HE(t,l),t[l]=d)}return t}handleLateInit_(t){if(t.networkState===0||t.networkState===3)return;if(t.readyState===0){let r=!1;const l=function(){r=!0};this.on("loadstart",l);const d=function(){r||this.trigger("loadstart")};this.on("loadedmetadata",d),this.ready(function(){this.off("loadstart",l),this.off("loadedmetadata",d),r||this.trigger("loadstart")});return}const n=["loadstart"];n.push("loadedmetadata"),t.readyState>=2&&n.push("loadeddata"),t.readyState>=3&&n.push("canplay"),t.readyState>=4&&n.push("canplaythrough"),this.ready(function(){n.forEach(function(r){this.trigger(r)},this)})}setScrubbing(t){this.isScrubbing_=t}scrubbing(){return this.isScrubbing_}setCurrentTime(t){try{this.isScrubbing_&&this.el_.fastSeek&&jE?this.el_.fastSeek(t):this.el_.currentTime=t}catch(n){Mr(n,"Video is not ready. (Video.js)")}}duration(){if(this.el_.duration===1/0&&Qu&&Gc&&this.el_.currentTime===0){const t=()=>{this.el_.currentTime>0&&(this.el_.duration===1/0&&this.trigger("durationchange"),this.off("timeupdate",t))};return this.on("timeupdate",t),NaN}return this.el_.duration||NaN}width(){return this.el_.offsetWidth}height(){return this.el_.offsetHeight}proxyWebkitFullscreen_(){if(!("webkitDisplayingFullscreen"in this.el_))return;const t=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},n=function(){"webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"&&(this.one("webkitendfullscreen",t),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",n),this.on("dispose",()=>{this.off("webkitbeginfullscreen",n),this.off("webkitendfullscreen",t)})}supportsFullScreen(){return typeof this.el_.webkitEnterFullScreen=="function"}enterFullScreen(){const t=this.el_;if(t.paused&&t.networkState<=t.HAVE_METADATA)Uc(this.el_.play()),this.setTimeout(function(){t.pause();try{t.webkitEnterFullScreen()}catch(n){this.trigger("fullscreenerror",n)}},0);else try{t.webkitEnterFullScreen()}catch(n){this.trigger("fullscreenerror",n)}}exitFullScreen(){if(!this.el_.webkitDisplayingFullscreen){this.trigger("fullscreenerror",new Error("The video is not fullscreen"));return}this.el_.webkitExitFullScreen()}requestPictureInPicture(){return this.el_.requestPictureInPicture()}requestVideoFrameCallback(t){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(t):super.requestVideoFrameCallback(t)}cancelVideoFrameCallback(t){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(t):super.cancelVideoFrameCallback(t)}src(t){if(t===void 0)return this.el_.src;this.setSrc(t)}addSourceElement(t,n){if(!t)return Mr.error("Invalid source URL."),!1;const r={src:t};n&&(r.type=n);const l=ar("source",{},r);return this.el_.appendChild(l),!0}removeSourceElement(t){if(!t)return Mr.error("Source URL is required to remove the source element."),!1;const n=this.el_.querySelectorAll("source");for(const r of n)if(r.src===t)return this.el_.removeChild(r),!0;return Mr.warn(`No matching source element found with src: ${t}`),!1}reset(){HT.resetMediaElement(this.el_)}currentSrc(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc}setControls(t){this.el_.controls=!!t}addTextTrack(t,n,r){return this.featuresNativeTextTracks?this.el_.addTextTrack(t,n,r):super.addTextTrack(t,n,r)}createRemoteTextTrack(t){if(!this.featuresNativeTextTracks)return super.createRemoteTextTrack(t);const n=li.createElement("track");return t.kind&&(n.kind=t.kind),t.label&&(n.label=t.label),(t.language||t.srclang)&&(n.srclang=t.language||t.srclang),t.default&&(n.default=t.default),t.id&&(n.id=t.id),t.src&&(n.src=t.src),n}addRemoteTextTrack(t,n){const r=super.addRemoteTextTrack(t,n);return this.featuresNativeTextTracks&&this.el().appendChild(r),r}removeRemoteTextTrack(t){if(super.removeRemoteTextTrack(t),this.featuresNativeTextTracks){const n=this.$$("track");let r=n.length;for(;r--;)(t===n[r]||t===n[r].track)&&this.el().removeChild(n[r])}}getVideoPlaybackQuality(){if(typeof this.el().getVideoPlaybackQuality=="function")return this.el().getVideoPlaybackQuality();const t={};return typeof this.el().webkitDroppedFrameCount<"u"&&typeof this.el().webkitDecodedFrameCount<"u"&&(t.droppedVideoFrames=this.el().webkitDroppedFrameCount,t.totalVideoFrames=this.el().webkitDecodedFrameCount),St.performance&&(t.creationTime=St.performance.now()),t}};FE(Mi,"TEST_VID",function(){if(!Pg())return;const u=li.createElement("video"),t=li.createElement("track");return t.kind="captions",t.srclang="en",t.label="English",u.appendChild(t),u});Mi.isSupported=function(){try{Mi.TEST_VID.volume=.5}catch{return!1}return!!(Mi.TEST_VID&&Mi.TEST_VID.canPlayType)};Mi.canPlayType=function(u){return Mi.TEST_VID.canPlayType(u)};Mi.canPlaySource=function(u,t){return Mi.canPlayType(u.type)};Mi.canControlVolume=function(){try{const u=Mi.TEST_VID.volume;Mi.TEST_VID.volume=u/2+.1;const t=u!==Mi.TEST_VID.volume;return t&&Do?(St.setTimeout(()=>{Mi&&Mi.prototype&&(Mi.prototype.featuresVolumeControl=u!==Mi.TEST_VID.volume)}),!1):t}catch{return!1}};Mi.canMuteVolume=function(){try{const u=Mi.TEST_VID.muted;return Mi.TEST_VID.muted=!u,Mi.TEST_VID.muted?Ag(Mi.TEST_VID,"muted","muted"):HE(Mi.TEST_VID,"muted","muted"),u!==Mi.TEST_VID.muted}catch{return!1}};Mi.canControlPlaybackRate=function(){if(Qu&&Gc&&UE<58)return!1;try{const u=Mi.TEST_VID.playbackRate;return Mi.TEST_VID.playbackRate=u/2+.1,u!==Mi.TEST_VID.playbackRate}catch{return!1}};Mi.canOverrideAttributes=function(){try{const u=()=>{};Object.defineProperty(li.createElement("video"),"src",{get:u,set:u}),Object.defineProperty(li.createElement("audio"),"src",{get:u,set:u}),Object.defineProperty(li.createElement("video"),"innerHTML",{get:u,set:u}),Object.defineProperty(li.createElement("audio"),"innerHTML",{get:u,set:u})}catch{return!1}return!0};Mi.supportsNativeTextTracks=function(){return jE||Do&&Gc};Mi.supportsNativeVideoTracks=function(){return!!(Mi.TEST_VID&&Mi.TEST_VID.videoTracks)};Mi.supportsNativeAudioTracks=function(){return!!(Mi.TEST_VID&&Mi.TEST_VID.audioTracks)};Mi.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"];[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function([u,t]){FE(Mi.prototype,u,()=>Mi[t](),!0)});Mi.prototype.featuresVolumeControl=Mi.canControlVolume();Mi.prototype.movingMediaElementInDOM=!Do;Mi.prototype.featuresFullscreenResize=!0;Mi.prototype.featuresProgressEvents=!0;Mi.prototype.featuresTimeupdateEvents=!0;Mi.prototype.featuresVideoFrameCallback=!!(Mi.TEST_VID&&Mi.TEST_VID.requestVideoFrameCallback);Mi.disposeMediaElement=function(u){if(u){for(u.parentNode&&u.parentNode.removeChild(u);u.hasChildNodes();)u.removeChild(u.firstChild);u.removeAttribute("src"),typeof u.load=="function"&&function(){try{u.load()}catch{}}()}};Mi.resetMediaElement=function(u){if(!u)return;const t=u.querySelectorAll("source");let n=t.length;for(;n--;)u.removeChild(t[n]);u.removeAttribute("src"),typeof u.load=="function"&&function(){try{u.load()}catch{}}()};["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(u){Mi.prototype[u]=function(){return this.el_[u]||this.el_.hasAttribute(u)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(u){Mi.prototype["set"+na(u)]=function(t){this.el_[u]=t,t?this.el_.setAttribute(u,u):this.el_.removeAttribute(u)}});["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(u){Mi.prototype[u]=function(){return this.el_[u]}});["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(u){Mi.prototype["set"+na(u)]=function(t){this.el_[u]=t}});["pause","load","play"].forEach(function(u){Mi.prototype[u]=function(){return this.el_[u]()}});Es.withSourceHandlers(Mi);Mi.nativeSourceHandler={};Mi.nativeSourceHandler.canPlayType=function(u){try{return Mi.TEST_VID.canPlayType(u)}catch{return""}};Mi.nativeSourceHandler.canHandleSource=function(u,t){if(u.type)return Mi.nativeSourceHandler.canPlayType(u.type);if(u.src){const n=Gw(u.src);return Mi.nativeSourceHandler.canPlayType(`video/${n}`)}return""};Mi.nativeSourceHandler.handleSource=function(u,t,n){t.setSrc(u.src)};Mi.nativeSourceHandler.dispose=function(){};Mi.registerSourceHandler(Mi.nativeSourceHandler);Es.registerTech("Html5",Mi);const lF=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],iA={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},GA=["tiny","xsmall","small","medium","large","xlarge","huge"],GT={};GA.forEach(u=>{const t=u.charAt(0)==="x"?`x-${u.substring(1)}`:u;GT[u]=`vjs-layout-${t}`});const $7={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0};class us extends Rn{constructor(t,n,r){if(t.id=t.id||n.id||`vjs_video_${Su()}`,n=Object.assign(us.getTagSettings(t),n),n.initChildren=!1,n.createEl=!1,n.evented=!1,n.reportTouchActivity=!1,!n.language){const f=t.closest("[lang]");f&&(n.language=f.getAttribute("lang"))}if(super(null,n,r),this.boundDocumentFullscreenChange_=f=>this.documentFullscreenChange_(f),this.boundFullWindowOnEscKey_=f=>this.fullWindowOnEscKey(f),this.boundUpdateStyleEl_=f=>this.updateStyleEl_(f),this.boundApplyInitTime_=f=>this.applyInitTime_(f),this.boundUpdateCurrentBreakpoint_=f=>this.updateCurrentBreakpoint_(f),this.boundHandleTechClick_=f=>this.handleTechClick_(f),this.boundHandleTechDoubleClick_=f=>this.handleTechDoubleClick_(f),this.boundHandleTechTouchStart_=f=>this.handleTechTouchStart_(f),this.boundHandleTechTouchMove_=f=>this.handleTechTouchMove_(f),this.boundHandleTechTouchEnd_=f=>this.handleTechTouchEnd_(f),this.boundHandleTechTap_=f=>this.handleTechTap_(f),this.boundUpdatePlayerHeightOnAudioOnlyMode_=f=>this.updatePlayerHeightOnAudioOnlyMode_(f),this.isFullscreen_=!1,this.log=KN(this.id_),this.fsApi_=cE,this.isPosterFromTech_=!1,this.queuedCallbacks_=[],this.isReady_=!1,this.hasStarted_=!1,this.userActive_=!1,this.debugEnabled_=!1,this.audioOnlyMode_=!1,this.audioPosterMode_=!1,this.audioOnlyCache_={controlBarHeight:null,playerHeight:null,hiddenChildren:[]},!this.options_||!this.options_.techOrder||!this.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(this.tag=t,this.tagAttributes=t&&If(t),this.language(this.options_.language),n.languages){const f={};Object.getOwnPropertyNames(n.languages).forEach(function(p){f[p.toLowerCase()]=n.languages[p]}),this.languages_=f}else this.languages_=us.prototype.options_.languages;this.resetCache_(),this.poster_=n.poster||"",this.controls_=!!n.controls,t.controls=!1,t.removeAttribute("controls"),this.changingSrc_=!1,this.playCallbacks_=[],this.playTerminatedQueue_=[],t.hasAttribute("autoplay")?this.autoplay(!0):this.autoplay(this.options_.autoplay),n.plugins&&Object.keys(n.plugins).forEach(f=>{if(typeof this[f]!="function")throw new Error(`plugin "${f}" does not exist`)}),this.scrubbing_=!1,this.el_=this.createEl(),Bw(this,{eventBusKey:"el_"}),this.fsApi_.requestFullscreen&&(eu(li,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),this.on(this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_)),this.fluid_&&this.on(["playerreset","resize"],this.boundUpdateStyleEl_);const l=gs(this.options_);if(n.plugins&&Object.keys(n.plugins).forEach(f=>{this[f](n.plugins[f])}),n.debug&&this.debug(!0),this.options_.playerOptions=l,this.middleware_=[],this.playbackRates(n.playbackRates),n.experimentalSvgIcons){const p=new St.DOMParser().parseFromString(g7,"image/svg+xml");if(p.querySelector("parsererror"))Mr.warn("Failed to load SVG Icons. Falling back to Font Icons."),this.options_.experimentalSvgIcons=null;else{const y=p.documentElement;y.style.display="none",this.el_.appendChild(y),this.addClass("vjs-svg-icons-enabled")}}this.initChildren(),this.isAudio(t.nodeName.toLowerCase()==="audio"),this.controls()?this.addClass("vjs-controls-enabled"):this.addClass("vjs-controls-disabled"),this.el_.setAttribute("role","region"),this.isAudio()?this.el_.setAttribute("aria-label",this.localize("Audio Player")):this.el_.setAttribute("aria-label",this.localize("Video Player")),this.isAudio()&&this.addClass("vjs-audio"),n.spatialNavigation&&n.spatialNavigation.enabled&&(this.spatialNavigation=new m7(this),this.addClass("vjs-spatial-navigation-enabled")),Ny&&this.addClass("vjs-touch-enabled"),Do||this.addClass("vjs-workinghover"),us.players[this.id_]=this;const d=PA.split(".")[0];this.addClass(`vjs-v${d}`),this.userActive(!0),this.reportUserActivity(),this.one("play",f=>this.listenForUserActivity_(f)),this.on("keydown",f=>this.handleKeyDown(f)),this.on("languagechange",f=>this.handleLanguagechange(f)),this.breakpoints(this.options_.breakpoints),this.responsive(this.options_.responsive),this.on("ready",()=>{this.audioPosterMode(this.options_.audioPosterMode),this.audioOnlyMode(this.options_.audioOnlyMode)})}dispose(){this.trigger("dispose"),this.off("dispose"),Ro(li,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),Ro(li,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),us.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),d7(this),Jo.names.forEach(t=>{const n=Jo[t],r=this[n.getterName]();r&&r.off&&r.off()}),super.dispose({restoreEl:this.options_.restoreEl})}createEl(){let t=this.tag,n,r=this.playerElIngest_=t.parentNode&&t.parentNode.hasAttribute&&t.parentNode.hasAttribute("data-vjs-player");const l=this.tag.tagName.toLowerCase()==="video-js";r?n=this.el_=t.parentNode:l||(n=this.el_=super.createEl("div"));const d=If(t);if(l){for(n=this.el_=t,t=this.tag=li.createElement("video");n.children.length;)t.appendChild(n.firstChild);vy(n,"video-js")||Ph(n,"video-js"),n.appendChild(t),r=this.playerElIngest_=n,Object.keys(n).forEach(m=>{try{t[m]=n[m]}catch{}})}t.setAttribute("tabindex","-1"),d.tabindex="-1",Gc&&BE&&(t.setAttribute("role","application"),d.role="application"),t.removeAttribute("width"),t.removeAttribute("height"),"width"in d&&delete d.width,"height"in d&&delete d.height,Object.getOwnPropertyNames(d).forEach(function(m){l&&m==="class"||n.setAttribute(m,d[m]),l&&t.setAttribute(m,d[m])}),t.playerId=t.id,t.id+="_html5_api",t.className="vjs-tech",t.player=n.player=this,this.addClass("vjs-paused");const f=["IS_SMART_TV","IS_TIZEN","IS_WEBOS","IS_ANDROID","IS_IPAD","IS_IPHONE","IS_CHROMECAST_RECEIVER"].filter(m=>tO[m]).map(m=>"vjs-device-"+m.substring(3).toLowerCase().replace(/\_/g,"-"));if(this.addClass(...f),St.VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=mO("vjs-styles-dimensions");const m=Lf(".vjs-styles-defaults"),y=Lf("head");y.insertBefore(this.styleEl_,m?m.nextSibling:y.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);const p=t.getElementsByTagName("a");for(let m=0;m<p.length;m++){const y=p.item(m);Ph(y,"vjs-hidden"),y.setAttribute("hidden","hidden")}return t.initNetworkState_=t.networkState,t.parentNode&&!r&&t.parentNode.insertBefore(n,t),NA(t,n),this.children_.unshift(t),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=n,n}crossOrigin(t){if(typeof t>"u")return this.techGet_("crossOrigin");if(t!==null&&t!=="anonymous"&&t!=="use-credentials"){Mr.warn(`crossOrigin must be null,  "anonymous" or "use-credentials", given "${t}"`);return}this.techCall_("setCrossOrigin",t),this.posterImage&&this.posterImage.crossOrigin(t)}width(t){return this.dimension("width",t)}height(t){return this.dimension("height",t)}dimension(t,n){const r=t+"_";if(n===void 0)return this[r]||0;if(n===""||n==="auto"){this[r]=void 0,this.updateStyleEl_();return}const l=parseFloat(n);if(isNaN(l)){Mr.error(`Improper value "${n}" supplied for for ${t}`);return}this[r]=l,this.updateStyleEl_()}fluid(t){if(t===void 0)return!!this.fluid_;this.fluid_=!!t,Fd(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),t?(this.addClass("vjs-fluid"),this.fill(!1),H$(this,()=>{this.on(["playerreset","resize"],this.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()}fill(t){if(t===void 0)return!!this.fill_;this.fill_=!!t,t?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")}aspectRatio(t){if(t===void 0)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(t))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=t,this.fluid(!0),this.updateStyleEl_()}updateStyleEl_(){if(St.VIDEOJS_NO_DYNAMIC_STYLE===!0){const p=typeof this.width_=="number"?this.width_:this.options_.width,m=typeof this.height_=="number"?this.height_:this.options_.height,y=this.tech_&&this.tech_.el();y&&(p>=0&&(y.width=p),m>=0&&(y.height=m));return}let t,n,r,l;this.aspectRatio_!==void 0&&this.aspectRatio_!=="auto"?r=this.aspectRatio_:this.videoWidth()>0?r=this.videoWidth()+":"+this.videoHeight():r="16:9";const d=r.split(":"),f=d[1]/d[0];this.width_!==void 0?t=this.width_:this.height_!==void 0?t=this.height_/f:t=this.videoWidth()||300,this.height_!==void 0?n=this.height_:n=t*f,/^[^a-zA-Z]/.test(this.id())?l="dimensions-"+this.id():l=this.id()+"-dimensions",this.addClass(l),yO(this.styleEl_,`
      .${l} {
        width: ${t}px;
        height: ${n}px;
      }

      .${l}.vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: ${f*100}%;
      }
    `)}loadTech_(t,n){this.tech_&&this.unloadTech_();const r=na(t),l=t.charAt(0).toLowerCase()+t.slice(1);r!=="Html5"&&this.tag&&(Es.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=r,this.isReady_=!1;let d=this.autoplay();(typeof this.autoplay()=="string"||this.autoplay()===!0&&this.options_.normalizeAutoplay)&&(d=!1);const f={source:n,autoplay:d,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:`${this.id()}_${l}_api`,playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};Jo.names.forEach(m=>{const y=Jo[m];f[y.getterName]=this[y.privateName]}),Object.assign(f,this.options_[r]),Object.assign(f,this.options_[l]),Object.assign(f,this.options_[t.toLowerCase()]),this.tag&&(f.tag=this.tag),n&&n.src===this.cache_.src&&this.cache_.currentTime>0&&(f.startTime=this.cache_.currentTime);const p=Es.getTech(t);if(!p)throw new Error(`No Tech named '${r}' exists! '${r}' should be registered using videojs.registerTech()'`);this.tech_=new p(f),this.tech_.ready(ks(this,this.handleTechReady_),!0),jA.jsonToTextTracks(this.textTracksJson_||[],this.tech_),lF.forEach(m=>{this.on(this.tech_,m,y=>this[`handleTech${na(m)}_`](y))}),Object.keys(iA).forEach(m=>{this.on(this.tech_,m,y=>{if(this.tech_.playbackRate()===0&&this.tech_.seeking()){this.queuedCallbacks_.push({callback:this[`handleTech${iA[m]}_`].bind(this),event:y});return}this[`handleTech${iA[m]}_`](y)})}),this.on(this.tech_,"loadstart",m=>this.handleTechLoadStart_(m)),this.on(this.tech_,"sourceset",m=>this.handleTechSourceset_(m)),this.on(this.tech_,"waiting",m=>this.handleTechWaiting_(m)),this.on(this.tech_,"ended",m=>this.handleTechEnded_(m)),this.on(this.tech_,"seeking",m=>this.handleTechSeeking_(m)),this.on(this.tech_,"play",m=>this.handleTechPlay_(m)),this.on(this.tech_,"pause",m=>this.handleTechPause_(m)),this.on(this.tech_,"durationchange",m=>this.handleTechDurationChange_(m)),this.on(this.tech_,"fullscreenchange",(m,y)=>this.handleTechFullscreenChange_(m,y)),this.on(this.tech_,"fullscreenerror",(m,y)=>this.handleTechFullscreenError_(m,y)),this.on(this.tech_,"enterpictureinpicture",m=>this.handleTechEnterPictureInPicture_(m)),this.on(this.tech_,"leavepictureinpicture",m=>this.handleTechLeavePictureInPicture_(m)),this.on(this.tech_,"error",m=>this.handleTechError_(m)),this.on(this.tech_,"posterchange",m=>this.handleTechPosterChange_(m)),this.on(this.tech_,"textdata",m=>this.handleTechTextData_(m)),this.on(this.tech_,"ratechange",m=>this.handleTechRateChange_(m)),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&(r!=="Html5"||!this.tag)&&NA(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)}unloadTech_(){Jo.names.forEach(t=>{const n=Jo[t];this[n.privateName]=this[n.getterName]()}),this.textTracksJson_=jA.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1}tech(t){return t===void 0&&Mr.warn(`Using the tech directly can be dangerous. I hope you know what you're doing.
See https://github.com/videojs/video.js/issues/2617 for more info.
`),this.tech_}version(){return{"video.js":PA}}addTechControlsListeners_(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)}removeTechControlsListeners_(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)}handleTechReady_(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()}handleTechLoadStart_(){this.removeClass("vjs-ended","vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):this.trigger("loadstart"),this.manualAutoplay_(this.autoplay()===!0&&this.options_.normalizeAutoplay?"play":this.autoplay())}manualAutoplay_(t){if(!this.tech_||typeof t!="string")return;const n=()=>{const l=this.muted();this.muted(!0);const d=()=>{this.muted(l)};this.playTerminatedQueue_.push(d);const f=this.play();if(Ey(f))return f.catch(p=>{throw d(),new Error(`Rejection at manualAutoplay. Restoring muted value. ${p||""}`)})};let r;if(t==="any"&&!this.muted()?(r=this.play(),Ey(r)&&(r=r.catch(n))):t==="muted"&&!this.muted()?r=n():r=this.play(),!!Ey(r))return r.then(()=>{this.trigger({type:"autoplay-success",autoplay:t})}).catch(()=>{this.trigger({type:"autoplay-failure",autoplay:t})})}updateSourceCaches_(t=""){let n=t,r="";typeof n!="string"&&(n=t.src,r=t.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],n&&!r&&(r=p7(this,n)),this.cache_.source=gs({},t,{src:n,type:r});const l=this.cache_.sources.filter(m=>m.src&&m.src===n),d=[],f=this.$$("source"),p=[];for(let m=0;m<f.length;m++){const y=If(f[m]);d.push(y),y.src&&y.src===n&&p.push(y.src)}p.length&&!l.length?this.cache_.sources=d:l.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=n}handleTechSourceset_(t){if(!this.changingSrc_){let n=d=>this.updateSourceCaches_(d);const r=this.currentSource().src,l=t.src;r&&!/^blob:/.test(r)&&/^blob:/.test(l)&&(!this.lastSource_||this.lastSource_.tech!==l&&this.lastSource_.player!==r)&&(n=()=>{}),n(l),t.src||this.tech_.any(["sourceset","loadstart"],d=>{if(d.type==="sourceset")return;const f=this.techGet_("currentSrc");this.lastSource_.tech=f,this.updateSourceCaches_(f)})}this.lastSource_={player:this.currentSource().src,tech:t.src},this.trigger({src:t.src,type:"sourceset"})}hasStarted(t){if(t===void 0)return this.hasStarted_;t!==this.hasStarted_&&(this.hasStarted_=t,this.hasStarted_?this.addClass("vjs-has-started"):this.removeClass("vjs-has-started"))}handleTechPlay_(){this.removeClass("vjs-ended","vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")}handleTechRateChange_(){this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0&&(this.queuedCallbacks_.forEach(t=>t.callback(t.event)),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")}handleTechWaiting_(){this.addClass("vjs-waiting"),this.trigger("waiting");const t=this.currentTime(),n=()=>{t!==this.currentTime()&&(this.removeClass("vjs-waiting"),this.off("timeupdate",n))};this.on("timeupdate",n)}handleTechCanPlay_(){this.removeClass("vjs-waiting"),this.trigger("canplay")}handleTechCanPlayThrough_(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")}handleTechPlaying_(){this.removeClass("vjs-waiting"),this.trigger("playing")}handleTechSeeking_(){this.addClass("vjs-seeking"),this.trigger("seeking")}handleTechSeeked_(){this.removeClass("vjs-seeking","vjs-ended"),this.trigger("seeked")}handleTechPause_(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")}handleTechEnded_(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")}handleTechDurationChange_(){this.duration(this.techGet_("duration"))}handleTechClick_(t){this.controls_&&(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.click===void 0||this.options_.userActions.click!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.click=="function"?this.options_.userActions.click.call(this,t):this.paused()?Uc(this.play()):this.pause())}handleTechDoubleClick_(t){if(!this.controls_)return;Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),r=>r.contains(t.target))||(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.doubleClick===void 0||this.options_.userActions.doubleClick!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.doubleClick=="function"?this.options_.userActions.doubleClick.call(this,t):this.isInPictureInPicture()&&!li.pictureInPictureElement?this.exitPictureInPicture():this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}handleTechTap_(){this.userActive(!this.userActive())}handleTechTouchStart_(){this.userWasActive=this.userActive()}handleTechTouchMove_(){this.userWasActive&&this.reportUserActivity()}handleTechTouchEnd_(t){t.cancelable&&t.preventDefault()}toggleFullscreenClass_(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")}documentFullscreenChange_(t){const n=t.target.player;if(n&&n!==this)return;const r=this.el();let l=li[this.fsApi_.fullscreenElement]===r;!l&&r.matches&&(l=r.matches(":"+this.fsApi_.fullscreen)),this.isFullscreen(l)}handleTechFullscreenChange_(t,n){n&&(n.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",()=>{this.removeClass("vjs-ios-native-fs")})),this.isFullscreen(n.isFullscreen))}handleTechFullscreenError_(t,n){this.trigger("fullscreenerror",n)}togglePictureInPictureClass_(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")}handleTechEnterPictureInPicture_(t){this.isInPictureInPicture(!0)}handleTechLeavePictureInPicture_(t){this.isInPictureInPicture(!1)}handleTechError_(){const t=this.tech_.error();t&&this.error(t)}handleTechTextData_(){let t=null;arguments.length>1&&(t=arguments[1]),this.trigger("textdata",t)}getCache(){return this.cache_}resetCache_(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}}techCall_(t,n){this.ready(function(){if(t in u7)return o7(this.middleware_,this.tech_,t,n);if(t in oP)return aP(this.middleware_,this.tech_,t,n);try{this.tech_&&this.tech_[t](n)}catch(r){throw Mr(r),r}},!0)}techGet_(t){if(!(!this.tech_||!this.tech_.isReady_)){if(t in l7)return a7(this.middleware_,this.tech_,t);if(t in oP)return aP(this.middleware_,this.tech_,t);try{return this.tech_[t]()}catch(n){throw this.tech_[t]===void 0?(Mr(`Video.js: ${t} method not defined for ${this.techName_} playback technology.`,n),n):n.name==="TypeError"?(Mr(`Video.js: ${t} unavailable on ${this.techName_} playback technology element.`,n),this.tech_.isReady_=!1,n):(Mr(n),n)}}}play(){return new Promise(t=>{this.play_(t)})}play_(t=Uc){this.playCallbacks_.push(t);const n=!!(!this.changingSrc_&&(this.src()||this.currentSrc())),r=!!(jE||Do);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!n){this.waitToPlay_=f=>{this.play_()},this.one(["ready","loadstart"],this.waitToPlay_),!n&&r&&this.load();return}const l=this.techGet_("play");r&&this.hasClass("vjs-ended")&&this.resetProgressBar_(),l===null?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(l)}runPlayTerminatedQueue_(){const t=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],t.forEach(function(n){n()})}runPlayCallbacks_(t){const n=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],n.forEach(function(r){r(t)})}pause(){this.techCall_("pause")}paused(){return this.techGet_("paused")!==!1}played(){return this.techGet_("played")||Wu(0,0)}scrubbing(t){if(typeof t>"u")return this.scrubbing_;this.scrubbing_=!!t,this.techCall_("setScrubbing",this.scrubbing_),t?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")}currentTime(t){if(t===void 0)return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime;if(t<0&&(t=0),!this.isReady_||this.changingSrc_||!this.tech_||!this.tech_.isReady_){this.cache_.initTime=t,this.off("canplay",this.boundApplyInitTime_),this.one("canplay",this.boundApplyInitTime_);return}this.techCall_("setCurrentTime",t),this.cache_.initTime=0,isFinite(t)&&(this.cache_.currentTime=Number(t))}applyInitTime_(){this.currentTime(this.cache_.initTime)}duration(t){if(t===void 0)return this.cache_.duration!==void 0?this.cache_.duration:NaN;t=parseFloat(t),t<0&&(t=1/0),t!==this.cache_.duration&&(this.cache_.duration=t,t===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(t)||this.trigger("durationchange"))}remainingTime(){return this.duration()-this.currentTime()}remainingTimeDisplay(){return Math.floor(this.duration())-Math.floor(this.currentTime())}buffered(){let t=this.techGet_("buffered");return(!t||!t.length)&&(t=Wu(0,0)),t}seekable(){let t=this.techGet_("seekable");return(!t||!t.length)&&(t=Wu(0,0)),t}seeking(){return this.techGet_("seeking")}ended(){return this.techGet_("ended")}networkState(){return this.techGet_("networkState")}readyState(){return this.techGet_("readyState")}bufferedPercent(){return wO(this.buffered(),this.duration())}bufferedEnd(){const t=this.buffered(),n=this.duration();let r=t.end(t.length-1);return r>n&&(r=n),r}volume(t){let n;if(t!==void 0){n=Math.max(0,Math.min(1,t)),this.cache_.volume=n,this.techCall_("setVolume",n),n>0&&this.lastVolume_(n);return}return n=parseFloat(this.techGet_("volume")),isNaN(n)?1:n}muted(t){if(t!==void 0){this.techCall_("setMuted",t);return}return this.techGet_("muted")||!1}defaultMuted(t){return t!==void 0&&this.techCall_("setDefaultMuted",t),this.techGet_("defaultMuted")||!1}lastVolume_(t){if(t!==void 0&&t!==0){this.cache_.lastVolume=t;return}return this.cache_.lastVolume}supportsFullScreen(){return this.techGet_("supportsFullScreen")||!1}isFullscreen(t){if(t!==void 0){const n=this.isFullscreen_;this.isFullscreen_=!!t,this.isFullscreen_!==n&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),this.toggleFullscreenClass_();return}return this.isFullscreen_}requestFullscreen(t){this.isInPictureInPicture()&&this.exitPictureInPicture();const n=this;return new Promise((r,l)=>{function d(){n.off("fullscreenerror",p),n.off("fullscreenchange",f)}function f(){d(),r()}function p(y,b){d(),l(b)}n.one("fullscreenchange",f),n.one("fullscreenerror",p);const m=n.requestFullscreenHelper_(t);m&&(m.then(d,d),m.then(r,l))})}requestFullscreenHelper_(t){let n;if(this.fsApi_.prefixed||(n=this.options_.fullscreen&&this.options_.fullscreen.options||{},t!==void 0&&(n=t)),this.fsApi_.requestFullscreen){const r=this.el_[this.fsApi_.requestFullscreen](n);return r&&r.then(()=>this.isFullscreen(!0),()=>this.isFullscreen(!1)),r}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()}exitFullscreen(){const t=this;return new Promise((n,r)=>{function l(){t.off("fullscreenerror",f),t.off("fullscreenchange",d)}function d(){l(),n()}function f(m,y){l(),r(y)}t.one("fullscreenchange",d),t.one("fullscreenerror",f);const p=t.exitFullscreenHelper_();p&&(p.then(l,l),p.then(n,r))})}exitFullscreenHelper_(){if(this.fsApi_.requestFullscreen){const t=li[this.fsApi_.exitFullscreen]();return t&&Uc(t.then(()=>this.isFullscreen(!1))),t}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()}enterFullWindow(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=li.documentElement.style.overflow,eu(li,"keydown",this.boundFullWindowOnEscKey_),li.documentElement.style.overflow="hidden",Ph(li.body,"vjs-full-window"),this.trigger("enterFullWindow")}fullWindowOnEscKey(t){t.key==="Escape"&&this.isFullscreen()===!0&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())}exitFullWindow(){this.isFullscreen(!1),this.isFullWindow=!1,Ro(li,"keydown",this.boundFullWindowOnEscKey_),li.documentElement.style.overflow=this.docOrigOverflow,qE(li.body,"vjs-full-window"),this.trigger("exitFullWindow")}disablePictureInPicture(t){if(t===void 0)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",t),this.options_.disablePictureInPicture=t,this.trigger("disablepictureinpicturechanged")}isInPictureInPicture(t){if(t!==void 0){this.isInPictureInPicture_=!!t,this.togglePictureInPictureClass_();return}return!!this.isInPictureInPicture_}requestPictureInPicture(){if(this.options_.enableDocumentPictureInPicture&&St.documentPictureInPicture){const t=li.createElement(this.el().tagName);return t.classList=this.el().classList,t.classList.add("vjs-pip-container"),this.posterImage&&t.appendChild(this.posterImage.el().cloneNode(!0)),this.titleBar&&t.appendChild(this.titleBar.el().cloneNode(!0)),t.appendChild(ar("p",{className:"vjs-pip-text"},{},this.localize("Playing in picture-in-picture"))),St.documentPictureInPicture.requestWindow({width:this.videoWidth(),height:this.videoHeight()}).then(n=>(hO(n),this.el_.parentNode.insertBefore(t,this.el_),n.document.body.appendChild(this.el_),n.document.body.classList.add("vjs-pip-window"),this.player_.isInPictureInPicture(!0),this.player_.trigger({type:"enterpictureinpicture",pipWindow:n}),n.addEventListener("pagehide",r=>{const l=r.target.querySelector(".video-js");t.parentNode.replaceChild(l,t),this.player_.isInPictureInPicture(!1),this.player_.trigger("leavepictureinpicture")}),n))}return"pictureInPictureEnabled"in li&&this.disablePictureInPicture()===!1?this.techGet_("requestPictureInPicture"):Promise.reject("No PiP mode is available")}exitPictureInPicture(){if(St.documentPictureInPicture&&St.documentPictureInPicture.window)return St.documentPictureInPicture.window.close(),Promise.resolve();if("pictureInPictureEnabled"in li)return li.exitPictureInPicture()}handleKeyDown(t){const{userActions:n}=this.options_;!n||!n.hotkeys||(l=>{const d=l.tagName.toLowerCase();if(l.isContentEditable)return!0;const f=["button","checkbox","hidden","radio","reset","submit"];return d==="input"?f.indexOf(l.type)===-1:["textarea"].indexOf(d)!==-1})(this.el_.ownerDocument.activeElement)||(typeof n.hotkeys=="function"?n.hotkeys.call(this,t):this.handleHotkeys(t))}handleHotkeys(t){const n=this.options_.userActions?this.options_.userActions.hotkeys:{},{fullscreenKey:r=f=>t.key.toLowerCase()==="f",muteKey:l=f=>t.key.toLowerCase()==="m",playPauseKey:d=f=>t.key.toLowerCase()==="k"||t.key.toLowerCase()===" "}=n;if(r.call(this,t)){t.preventDefault(),t.stopPropagation();const f=Rn.getComponent("FullscreenToggle");li[this.fsApi_.fullscreenEnabled]!==!1&&f.prototype.handleClick.call(this,t)}else l.call(this,t)?(t.preventDefault(),t.stopPropagation(),Rn.getComponent("MuteToggle").prototype.handleClick.call(this,t)):d.call(this,t)&&(t.preventDefault(),t.stopPropagation(),Rn.getComponent("PlayToggle").prototype.handleClick.call(this,t))}canPlayType(t){let n;for(let r=0,l=this.options_.techOrder;r<l.length;r++){const d=l[r];let f=Es.getTech(d);if(f||(f=Rn.getComponent(d)),!f){Mr.error(`The "${d}" tech is undefined. Skipped browser support check for that tech.`);continue}if(f.isSupported()&&(n=f.canPlayType(t),n))return n}return""}selectSource(t){const n=this.options_.techOrder.map(p=>[p,Es.getTech(p)]).filter(([p,m])=>m?m.isSupported():(Mr.error(`The "${p}" tech is undefined. Skipped browser support check for that tech.`),!1)),r=function(p,m,y){let b;return p.some(_=>m.some(A=>{if(b=y(_,A),b)return!0})),b};let l;const d=p=>(m,y)=>p(y,m),f=([p,m],y)=>{if(m.canPlaySource(y,this.options_[p.toLowerCase()]))return{source:y,tech:p}};return this.options_.sourceOrder?l=r(t,n,d(f)):l=r(n,t,f),l||!1}handleSrc_(t,n){if(typeof t>"u")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();const r=LO(t);if(!r.length){this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0);return}if(this.changingSrc_=!0,n||(this.cache_.sources=r),this.updateSourceCaches_(r[0]),r7(this,r[0],(l,d)=>{if(this.middleware_=d,n||(this.cache_.sources=r),this.updateSourceCaches_(l),this.src_(l)){if(r.length>1)return this.handleSrc_(r.slice(1));this.changingSrc_=!1,this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),this.triggerReady();return}s7(d,this.tech_)}),r.length>1){const l=()=>{this.error(null),this.handleSrc_(r.slice(1),!0)},d=()=>{this.off("error",l)};this.one("error",l),this.one("playing",d),this.resetRetryOnError_=()=>{this.off("error",l),this.off("playing",d)}}}src(t){return this.handleSrc_(t,!1)}src_(t){const n=this.selectSource([t]);return n?_O(n.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",t):this.techCall_("src",t.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(n.tech,n.source),this.tech_.ready(()=>{this.changingSrc_=!1}),!1):!0}addSourceElement(t,n){return this.tech_?this.tech_.addSourceElement(t,n):!1}removeSourceElement(t){return this.tech_?this.tech_.removeSourceElement(t):!1}load(){if(this.tech_&&this.tech_.vhs){this.src(this.currentSource());return}this.techCall_("load")}reset(){if(this.paused())this.doReset_();else{const t=this.play();Uc(t.then(()=>this.doReset_()))}}doReset_(){this.tech_&&this.tech_.clearTracks("text"),this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),this.error(null),this.titleBar&&this.titleBar.update({title:void 0,description:void 0}),Fd(this)&&this.trigger("playerreset")}resetControlBarUI_(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()}resetProgressBar_(){this.currentTime(0);const{currentTimeDisplay:t,durationDisplay:n,progressControl:r,remainingTimeDisplay:l}=this.controlBar||{},{seekBar:d}=r||{};t&&t.updateContent(),n&&n.updateContent(),l&&l.updateContent(),d&&(d.update(),d.loadProgressBar&&d.loadProgressBar.update())}resetPlaybackRate_(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()}resetVolumeBar_(){this.volume(1),this.trigger("volumechange")}currentSources(){const t=this.currentSource(),n=[];return Object.keys(t).length!==0&&n.push(t),this.cache_.sources||n}currentSource(){return this.cache_.source||{}}currentSrc(){return this.currentSource()&&this.currentSource().src||""}currentType(){return this.currentSource()&&this.currentSource().type||""}preload(t){if(t!==void 0){this.techCall_("setPreload",t),this.options_.preload=t;return}return this.techGet_("preload")}autoplay(t){if(t===void 0)return this.options_.autoplay||!1;let n;typeof t=="string"&&/(any|play|muted)/.test(t)||t===!0&&this.options_.normalizeAutoplay?(this.options_.autoplay=t,this.manualAutoplay_(typeof t=="string"?t:"play"),n=!1):t?this.options_.autoplay=!0:this.options_.autoplay=!1,n=typeof n>"u"?this.options_.autoplay:n,this.tech_&&this.techCall_("setAutoplay",n)}playsinline(t){return t!==void 0&&(this.techCall_("setPlaysinline",t),this.options_.playsinline=t),this.techGet_("playsinline")}loop(t){if(t!==void 0){this.techCall_("setLoop",t),this.options_.loop=t;return}return this.techGet_("loop")}poster(t){if(t===void 0)return this.poster_;t||(t=""),t!==this.poster_&&(this.poster_=t,this.techCall_("setPoster",t),this.isPosterFromTech_=!1,this.trigger("posterchange"))}handleTechPosterChange_(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){const t=this.tech_.poster()||"";t!==this.poster_&&(this.poster_=t,this.isPosterFromTech_=!0,this.trigger("posterchange"))}}controls(t){if(t===void 0)return!!this.controls_;t=!!t,this.controls_!==t&&(this.controls_=t,this.usingNativeControls()&&this.techCall_("setControls",t),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))}usingNativeControls(t){if(t===void 0)return!!this.usingNativeControls_;t=!!t,this.usingNativeControls_!==t&&(this.usingNativeControls_=t,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))}error(t){if(t===void 0)return this.error_||null;if(Rf("beforeerror").forEach(n=>{const r=n(this,t);if(!(Hc(r)&&!Array.isArray(r)||typeof r=="string"||typeof r=="number"||r===null)){this.log.error("please return a value that MediaError expects in beforeerror hooks");return}t=r}),this.options_.suppressNotSupportedError&&t&&t.code===4){const n=function(){this.error(t)};this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],n),this.one("loadstart",function(){this.off(["click","touchstart"],n)});return}if(t===null){this.error_=null,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close();return}this.error_=new Ys(t),this.addClass("vjs-error"),Mr.error(`(CODE:${this.error_.code} ${Ys.errorTypes[this.error_.code]})`,this.error_.message,this.error_),this.trigger("error"),Rf("error").forEach(n=>n(this,this.error_))}reportUserActivity(t){this.userActivity_=!0}userActive(t){if(t===void 0)return this.userActive_;if(t=!!t,t!==this.userActive_){if(this.userActive_=t,this.userActive_){this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");return}this.tech_&&this.tech_.one("mousemove",function(n){n.stopPropagation(),n.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}}listenForUserActivity_(){let t,n,r;const l=ks(this,this.reportUserActivity),d=function(_){(_.screenX!==n||_.screenY!==r)&&(n=_.screenX,r=_.screenY,l())},f=function(){l(),this.clearInterval(t),t=this.setInterval(l,250)},p=function(_){l(),this.clearInterval(t)};this.on("mousedown",f),this.on("mousemove",d),this.on("mouseup",p),this.on("mouseleave",p);const m=this.getChild("controlBar");m&&!Do&&!Qu&&(m.on("mouseenter",function(_){this.player().options_.inactivityTimeout!==0&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),m.on("mouseleave",function(_){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",l),this.on("keyup",l);let y;const b=function(){if(!this.userActivity_)return;this.userActivity_=!1,this.userActive(!0),this.clearTimeout(y);const _=this.options_.inactivityTimeout;_<=0||(y=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},_))};this.setInterval(b,250)}playbackRate(t){if(t!==void 0){this.techCall_("setPlaybackRate",t);return}return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1}defaultPlaybackRate(t){return t!==void 0?this.techCall_("setDefaultPlaybackRate",t):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1}isAudio(t){if(t!==void 0){this.isAudio_=!!t;return}return!!this.isAudio_}updatePlayerHeightOnAudioOnlyMode_(){const t=this.getChild("ControlBar");!t||this.audioOnlyCache_.controlBarHeight===t.currentHeight()||(this.audioOnlyCache_.controlBarHeight=t.currentHeight(),this.height(this.audioOnlyCache_.controlBarHeight))}enableAudioOnlyUI_(){this.addClass("vjs-audio-only-mode");const t=this.children(),n=this.getChild("ControlBar"),r=n&&n.currentHeight();t.forEach(l=>{l!==n&&l.el_&&!l.hasClass("vjs-hidden")&&(l.hide(),this.audioOnlyCache_.hiddenChildren.push(l))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.audioOnlyCache_.controlBarHeight=r,this.on("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.height(r),this.trigger("audioonlymodechange")}disableAudioOnlyUI_(){this.removeClass("vjs-audio-only-mode"),this.off("playerresize",this.boundUpdatePlayerHeightOnAudioOnlyMode_),this.audioOnlyCache_.hiddenChildren.forEach(t=>t.show()),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")}audioOnlyMode(t){if(typeof t!="boolean"||t===this.audioOnlyMode_)return this.audioOnlyMode_;if(this.audioOnlyMode_=t,t){const n=[];return this.isInPictureInPicture()&&n.push(this.exitPictureInPicture()),this.isFullscreen()&&n.push(this.exitFullscreen()),this.audioPosterMode()&&n.push(this.audioPosterMode(!1)),Promise.all(n).then(()=>this.enableAudioOnlyUI_())}return Promise.resolve().then(()=>this.disableAudioOnlyUI_())}enablePosterModeUI_(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}disablePosterModeUI_(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}audioPosterMode(t){return typeof t!="boolean"||t===this.audioPosterMode_?this.audioPosterMode_:(this.audioPosterMode_=t,t?this.audioOnlyMode()?this.audioOnlyMode(!1).then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.enablePosterModeUI_()}):Promise.resolve().then(()=>{this.disablePosterModeUI_()}))}addTextTrack(t,n,r){if(this.tech_)return this.tech_.addTextTrack(t,n,r)}addRemoteTextTrack(t,n){if(this.tech_)return this.tech_.addRemoteTextTrack(t,n)}removeRemoteTextTrack(t={}){let{track:n}=t;if(n||(n=t),this.tech_)return this.tech_.removeRemoteTextTrack(n)}getVideoPlaybackQuality(){return this.techGet_("getVideoPlaybackQuality")}videoWidth(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0}videoHeight(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0}language(t){if(t===void 0)return this.language_;this.language_!==String(t).toLowerCase()&&(this.language_=String(t).toLowerCase(),Fd(this)&&this.trigger("languagechange"))}languages(){return gs(us.prototype.options_.languages,this.languages_)}toJSON(){const t=gs(this.options_),n=t.tracks;t.tracks=[];for(let r=0;r<n.length;r++){let l=n[r];l=gs(l),l.player=void 0,t.tracks[r]=l}return t}createModal(t,n){n=n||{},n.content=t||"";const r=new Og(this,n);return this.addChild(r),r.on("dispose",()=>{this.removeChild(r)}),r.open(),r}updateCurrentBreakpoint_(){if(!this.responsive())return;const t=this.currentBreakpoint(),n=this.currentWidth();for(let r=0;r<GA.length;r++){const l=GA[r],d=this.breakpoints_[l];if(n<=d){if(t===l)return;t&&this.removeClass(GT[t]),this.addClass(GT[l]),this.breakpoint_=l;break}}}removeCurrentBreakpoint_(){const t=this.currentBreakpointClass();this.breakpoint_="",t&&this.removeClass(t)}breakpoints(t){return t===void 0?Object.assign(this.breakpoints_):(this.breakpoint_="",this.breakpoints_=Object.assign({},$7,t),this.updateCurrentBreakpoint_(),Object.assign(this.breakpoints_))}responsive(t){if(t===void 0)return this.responsive_;t=!!t;const n=this.responsive_;if(t!==n)return this.responsive_=t,t?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),t}currentBreakpoint(){return this.breakpoint_}currentBreakpointClass(){return GT[this.breakpoint_]||""}loadMedia(t,n){if(!t||typeof t!="object")return;const r=this.crossOrigin();this.reset(),this.cache_.media=gs(t);const{artist:l,artwork:d,description:f,poster:p,src:m,textTracks:y,title:b}=this.cache_.media;!d&&p&&(this.cache_.media.artwork=[{src:p,type:EE(p)}]),r&&this.crossOrigin(r),m&&this.src(m),p&&this.poster(p),Array.isArray(y)&&y.forEach(_=>this.addRemoteTextTrack(_,!1)),this.titleBar&&this.titleBar.update({title:b,description:f||l||""}),this.ready(n)}getMedia(){if(!this.cache_.media){const t=this.poster(),n=this.currentSources(),r=Array.prototype.map.call(this.remoteTextTracks(),d=>({kind:d.kind,label:d.label,language:d.language,src:d.src})),l={src:n,textTracks:r};return t&&(l.poster=t,l.artwork=[{src:l.poster,type:EE(l.poster)}]),l}return gs(this.cache_.media)}static getTagSettings(t){const n={sources:[],tracks:[]},r=If(t),l=r["data-setup"];if(vy(t,"vjs-fill")&&(r.fill=!0),vy(t,"vjs-fluid")&&(r.fluid=!0),l!==null)try{Object.assign(r,JSON.parse(l||"{}"))}catch(d){Mr.error("data-setup",d)}if(Object.assign(n,r),t.hasChildNodes()){const d=t.childNodes;for(let f=0,p=d.length;f<p;f++){const m=d[f],y=m.nodeName.toLowerCase();y==="source"?n.sources.push(If(m)):y==="track"&&n.tracks.push(If(m))}}return n}debug(t){if(t===void 0)return this.debugEnabled_;t?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)}playbackRates(t){if(t===void 0)return this.cache_.playbackRates;Array.isArray(t)&&t.every(n=>typeof n=="number")&&(this.cache_.playbackRates=t,this.trigger("playbackrateschange"))}}us.prototype.videoTracks=()=>{};us.prototype.audioTracks=()=>{};us.prototype.textTracks=()=>{};us.prototype.remoteTextTracks=()=>{};us.prototype.remoteTextTrackEls=()=>{};Jo.names.forEach(function(u){const t=Jo[u];us.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}});us.prototype.crossorigin=us.prototype.crossOrigin;us.players={};const ly=St.navigator;us.prototype.options_={techOrder:Es.defaultTechOrder_,html5:{},enableSourceset:!0,inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","titleBar","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:ly&&(ly.languages&&ly.languages[0]||ly.userLanguage||ly.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1,spatialNavigation:{enabled:!1,horizontalSeek:!1},enableSmoothSeeking:!1,disableSeekWhileScrubbingOnMobile:!1,disableSeekWhileScrubbingOnSTV:!1};lF.forEach(function(u){us.prototype[`handleTech${na(u)}_`]=function(){return this.trigger(u)}});Rn.registerComponent("Player",us);const bE="plugin",dg="activePlugins_",tg={},_E=u=>tg.hasOwnProperty(u),VT=u=>_E(u)?tg[u]:void 0,uF=(u,t)=>{u[dg]=u[dg]||{},u[dg][t]=!0},SE=(u,t,n)=>{const r=(n?"before":"")+"pluginsetup";u.trigger(r,t),u.trigger(r+":"+t.name,t)},K7=function(u,t){const n=function(){SE(this,{name:u,plugin:t,instance:null},!0);const r=t.apply(this,arguments);return uF(this,u),SE(this,{name:u,plugin:t,instance:r}),r};return Object.keys(t).forEach(function(r){n[r]=t[r]}),n},SP=(u,t)=>(t.prototype.name=u,function(...n){SE(this,{name:u,plugin:t,instance:null},!0);const r=new t(this,...n);return this[u]=()=>r,SE(this,r.getEventHash()),r});class wl{constructor(t){if(this.constructor===wl)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=t,this.log||(this.log=this.player.log.createLogger(this.name)),Bw(this),delete this.trigger,bO(this,this.constructor.defaultState),uF(t,this.name),this.dispose=this.dispose.bind(this),t.on("dispose",this.dispose)}version(){return this.constructor.VERSION}getEventHash(t={}){return t.name=this.name,t.plugin=this.constructor,t.instance=this,t}trigger(t,n={}){return Ng(this.eventBusEl_,t,this.getEventHash(n))}handleStateChanged(t){}dispose(){const{name:t,player:n}=this;this.trigger("dispose"),this.off(),n.off("dispose",this.dispose),n[dg][t]=!1,this.player=this.state=null,n[t]=SP(t,tg[t])}static isBasic(t){const n=typeof t=="string"?VT(t):t;return typeof n=="function"&&!wl.prototype.isPrototypeOf(n.prototype)}static registerPlugin(t,n){if(typeof t!="string")throw new Error(`Illegal plugin name, "${t}", must be a string, was ${typeof t}.`);if(_E(t))Mr.warn(`A plugin named "${t}" already exists. You may want to avoid re-registering plugins!`);else if(us.prototype.hasOwnProperty(t))throw new Error(`Illegal plugin name, "${t}", cannot share a name with an existing player method!`);if(typeof n!="function")throw new Error(`Illegal plugin for "${t}", must be a function, was ${typeof n}.`);return tg[t]=n,t!==bE&&(wl.isBasic(n)?us.prototype[t]=K7(t,n):us.prototype[t]=SP(t,n)),n}static deregisterPlugin(t){if(t===bE)throw new Error("Cannot de-register base plugin.");_E(t)&&(delete tg[t],delete us.prototype[t])}static getPlugins(t=Object.keys(tg)){let n;return t.forEach(r=>{const l=VT(r);l&&(n=n||{},n[r]=l)}),n}static getPluginVersion(t){const n=VT(t);return n&&n.VERSION||""}}wl.getPlugin=VT;wl.BASE_PLUGIN_NAME=bE;wl.registerPlugin(bE,wl);us.prototype.usingPlugin=function(u){return!!this[dg]&&this[dg][u]===!0};us.prototype.hasPlugin=function(u){return!!_E(u)};function Y7(u,t){let n=!1;return function(...r){return n||Mr.warn(u),n=!0,t.apply(this,r)}}function Ju(u,t,n,r){return Y7(`${t} is deprecated and will be removed in ${u}.0; please use ${n} instead.`,r)}var W7={NetworkBadStatus:"networkbadstatus",NetworkRequestFailed:"networkrequestfailed",NetworkRequestAborted:"networkrequestaborted",NetworkRequestTimeout:"networkrequesttimeout",NetworkBodyParserFailed:"networkbodyparserfailed",StreamingHlsPlaylistParserError:"streaminghlsplaylistparsererror",StreamingDashManifestParserError:"streamingdashmanifestparsererror",StreamingContentSteeringParserError:"streamingcontentsteeringparsererror",StreamingVttParserError:"streamingvttparsererror",StreamingFailedToSelectNextSegment:"streamingfailedtoselectnextsegment",StreamingFailedToDecryptSegment:"streamingfailedtodecryptsegment",StreamingFailedToTransmuxSegment:"streamingfailedtotransmuxsegment",StreamingFailedToAppendSegment:"streamingfailedtoappendsegment",StreamingCodecsChangeError:"streamingcodecschangeerror"};const cF=u=>u.indexOf("#")===0?u.slice(1):u;function Qt(u,t,n){let r=Qt.getPlayer(u);if(r)return t&&Mr.warn(`Player "${u}" is already initialised. Options will not be applied.`),n&&r.ready(n),r;const l=typeof u=="string"?Lf("#"+cF(u)):u;if(!Mg(l))throw new TypeError("The element or ID supplied is not valid. (videojs)");const f=("getRootNode"in l?l.getRootNode()instanceof St.ShadowRoot:!1)?l.getRootNode():l.ownerDocument.body;(!l.ownerDocument.defaultView||!f.contains(l))&&Mr.warn("The element supplied is not included in the DOM"),t=t||{},t.restoreEl===!0&&(t.restoreEl=(l.parentNode&&l.parentNode.hasAttribute&&l.parentNode.hasAttribute("data-vjs-player")?l.parentNode:l).cloneNode(!0)),Rf("beforesetup").forEach(m=>{const y=m(l,gs(t));if(!Hc(y)||Array.isArray(y)){Mr.error("please return an object in beforesetup hooks");return}t=gs(t,y)});const p=Rn.getComponent("Player");return r=new p(l,t,n),Rf("setup").forEach(m=>m(r)),r}Qt.hooks_=Ld;Qt.hooks=Rf;Qt.hook=k$;Qt.hookOnce=D$;Qt.removeHook=$N;if(St.VIDEOJS_NO_DYNAMIC_STYLE!==!0&&Pg()){let u=Lf(".vjs-styles-defaults");if(!u){u=mO("vjs-styles-defaults");const t=Lf("head");t&&t.insertBefore(u,t.firstChild),yO(u,`
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: 56.25%
      }
    `)}}FA(1,Qt);Qt.VERSION=PA;Qt.options=us.prototype.options_;Qt.getPlayers=()=>us.players;Qt.getPlayer=u=>{const t=us.players;let n;if(typeof u=="string"){const r=cF(u),l=t[r];if(l)return l;n=Lf("#"+r)}else n=u;if(Mg(n)){const{player:r,playerId:l}=n;if(r||t[l])return r||t[l]}};Qt.getAllPlayers=()=>Object.keys(us.players).map(u=>us.players[u]).filter(Boolean);Qt.players=us.players;Qt.getComponent=Rn.getComponent;Qt.registerComponent=(u,t)=>(Es.isTech(t)&&Mr.warn(`The ${u} tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)`),Rn.registerComponent.call(Rn,u,t));Qt.getTech=Es.getTech;Qt.registerTech=Es.registerTech;Qt.use=i7;Object.defineProperty(Qt,"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty(Qt.middleware,"TERMINATOR",{value:TE,writeable:!1,enumerable:!0});Qt.browser=tO;Qt.obj=P$;Qt.mergeOptions=Ju(9,"videojs.mergeOptions","videojs.obj.merge",gs);Qt.defineLazyProperty=Ju(9,"videojs.defineLazyProperty","videojs.obj.defineLazyProperty",FE);Qt.bind=Ju(9,"videojs.bind","native Function.prototype.bind",ks);Qt.registerPlugin=wl.registerPlugin;Qt.deregisterPlugin=wl.deregisterPlugin;Qt.plugin=(u,t)=>(Mr.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),wl.registerPlugin(u,t));Qt.getPlugins=wl.getPlugins;Qt.getPlugin=wl.getPlugin;Qt.getPluginVersion=wl.getPluginVersion;Qt.addLanguage=function(u,t){return u=(""+u).toLowerCase(),Qt.options.languages=gs(Qt.options.languages,{[u]:t}),Qt.options.languages[u]};Qt.log=Mr;Qt.createLogger=KN;Qt.time=Y$;Qt.createTimeRange=Ju(9,"videojs.createTimeRange","videojs.time.createTimeRanges",Wu);Qt.createTimeRanges=Ju(9,"videojs.createTimeRanges","videojs.time.createTimeRanges",Wu);Qt.formatTime=Ju(9,"videojs.formatTime","videojs.time.formatTime",Uh);Qt.setFormatTime=Ju(9,"videojs.setFormatTime","videojs.time.setFormatTime",xO);Qt.resetFormatTime=Ju(9,"videojs.resetFormatTime","videojs.time.resetFormatTime",AO);Qt.parseUrl=Ju(9,"videojs.parseUrl","videojs.url.parseUrl",Hw);Qt.isCrossOrigin=Ju(9,"videojs.isCrossOrigin","videojs.url.isCrossOrigin",WE);Qt.EventTarget=tu;Qt.any=Uw;Qt.on=eu;Qt.one=KE;Qt.off=Ro;Qt.trigger=Ng;Qt.xhr=RN;Qt.TrackList=Bh;Qt.TextTrack=Hy;Qt.TextTrackList=jw;Qt.AudioTrack=DO;Qt.AudioTrackList=IO;Qt.VideoTrack=RO;Qt.VideoTrackList=CO;["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(u=>{Qt[u]=function(){return Mr.warn(`videojs.${u}() is deprecated; use videojs.dom.${u}() instead`),pO[u].apply(null,arguments)}});Qt.computedStyle=Ju(9,"videojs.computedStyle","videojs.dom.computedStyle",Ig);Qt.dom=pO;Qt.fn=q$;Qt.num=x7;Qt.str=$$;Qt.url=t7;Qt.Error=W7;/*! @name videojs-contrib-quality-levels @version 4.1.0 @license Apache-2.0 */class X7{constructor(t){let n=this;return n.id=t.id,n.label=n.id,n.width=t.width,n.height=t.height,n.bitrate=t.bandwidth,n.frameRate=t.frameRate,n.enabled_=t.enabled,Object.defineProperty(n,"enabled",{get(){return n.enabled_()},set(r){n.enabled_(r)}}),n}}class xE extends Qt.EventTarget{constructor(){super();let t=this;return t.levels_=[],t.selectedIndex_=-1,Object.defineProperty(t,"selectedIndex",{get(){return t.selectedIndex_}}),Object.defineProperty(t,"length",{get(){return t.levels_.length}}),t[Symbol.iterator]=()=>t.levels_.values(),t}addQualityLevel(t){let n=this.getQualityLevelById(t.id);if(n)return n;const r=this.levels_.length;return n=new X7(t),""+r in this||Object.defineProperty(this,r,{get(){return this.levels_[r]}}),this.levels_.push(n),this.trigger({qualityLevel:n,type:"addqualitylevel"}),n}removeQualityLevel(t){let n=null;for(let r=0,l=this.length;r<l;r++)if(this[r]===t){n=this.levels_.splice(r,1)[0],this.selectedIndex_===r?this.selectedIndex_=-1:this.selectedIndex_>r&&this.selectedIndex_--;break}return n&&this.trigger({qualityLevel:t,type:"removequalitylevel"}),n}getQualityLevelById(t){for(let n=0,r=this.length;n<r;n++){const l=this[n];if(l.id===t)return l}return null}dispose(){this.selectedIndex_=-1,this.levels_.length=0}}xE.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(const u in xE.prototype.allowedEvents_)xE.prototype["on"+u]=null;var dF="4.1.0";const Q7=function(u,t){const n=u.qualityLevels,r=new xE,l=function(){r.dispose(),u.qualityLevels=n,u.off("dispose",l)};return u.on("dispose",l),u.qualityLevels=()=>r,u.qualityLevels.VERSION=dF,r},fF=function(u){return Q7(this,Qt.obj.merge({},u))};Qt.registerPlugin("qualityLevels",fF);fF.VERSION=dF;/*! @name @videojs/http-streaming @version 3.17.0 @license Apache-2.0 */const Sl=PE,AE=(u,t)=>t&&t.responseURL&&u!==t.responseURL?t.responseURL:u,Au=u=>Qt.log.debug?Qt.log.debug.bind(Qt,"VHS:",`${u} >`):function(){};function cs(...u){const t=Qt.obj||Qt;return(t.merge||t.mergeOptions).apply(t,u)}function $a(...u){const t=Qt.time||Qt;return(t.createTimeRanges||t.createTimeRanges).apply(t,u)}function J7(u){if(u.length===0)return"Buffered Ranges are empty";let t=`Buffered Ranges: 
`;for(let n=0;n<u.length;n++){const r=u.start(n),l=u.end(n);t+=`${r} --> ${l}. Duration (${l-r})
`}return t}const Bc=1/30,zc=Bc*3,hF=function(u,t){const n=[];let r;if(u&&u.length)for(r=0;r<u.length;r++)t(u.start(r),u.end(r))&&n.push([u.start(r),u.end(r)]);return $a(n)},ng=function(u,t){return hF(u,function(n,r){return n-zc<=t&&r+zc>=t})},DT=function(u,t){return hF(u,function(n){return n-Bc>=t})},Z7=function(u){if(u.length<2)return $a();const t=[];for(let n=1;n<u.length;n++){const r=u.end(n-1),l=u.start(n);t.push([r,l])}return $a(t)},eK=function(u,t){let n=null,r=null,l=0;const d=[],f=[];if(!u||!u.length||!t||!t.length)return $a();let p=u.length;for(;p--;)d.push({time:u.start(p),type:"start"}),d.push({time:u.end(p),type:"end"});for(p=t.length;p--;)d.push({time:t.start(p),type:"start"}),d.push({time:t.end(p),type:"end"});for(d.sort(function(m,y){return m.time-y.time}),p=0;p<d.length;p++)d[p].type==="start"?(l++,l===2&&(n=d[p].time)):d[p].type==="end"&&(l--,l===1&&(r=d[p].time)),n!==null&&r!==null&&(f.push([n,r]),n=null,r=null);return $a(f)},pF=u=>{const t=[];if(!u||!u.length)return"";for(let n=0;n<u.length;n++)t.push(u.start(n)+" => "+u.end(n));return t.join(", ")},tK=function(u,t,n=1){return((u.length?u.end(u.length-1):0)-t)/n},kh=u=>{const t=[];for(let n=0;n<u.length;n++)t.push({start:u.start(n),end:u.end(n)});return t},nK=function(u,t){if(u===t)return!1;if(!u&&t||!t&&u||u.length!==t.length)return!0;for(let n=0;n<u.length;n++)if(u.start(n)!==t.start(n)||u.end(n)!==t.end(n))return!0;return!1},rA=function(u){if(!(!u||!u.length||!u.end))return u.end(u.length-1)},a1=function(u,t){let n=0;if(!u||!u.length)return n;for(let r=0;r<u.length;r++){const l=u.start(r),d=u.end(r);if(!(t>d)){if(t>l&&t<=d){n+=d-t;continue}n+=d-l}}return n},o1=(u,t)=>{if(!t.preload)return t.duration;let n=0;return(t.parts||[]).forEach(function(r){n+=r.duration}),(t.preloadHints||[]).forEach(function(r){r.type==="PART"&&(n+=u.partTargetDuration)}),n},VA=u=>(u.segments||[]).reduce((t,n,r)=>(n.parts?n.parts.forEach(function(l,d){t.push({duration:l.duration,segmentIndex:r,partIndex:d,part:l,segment:n})}):t.push({duration:n.duration,segmentIndex:r,partIndex:null,segment:n,part:null}),t),[]),gF=u=>{const t=u.segments&&u.segments.length&&u.segments[u.segments.length-1];return t&&t.parts||[]},mF=({preloadSegment:u})=>{if(!u)return;const{parts:t,preloadHints:n}=u;let r=(n||[]).reduce((l,d)=>l+(d.type==="PART"?1:0),0);return r+=t&&t.length?t.length:0,r},yF=(u,t)=>{if(t.endList)return 0;if(u&&u.suggestedPresentationDelay)return u.suggestedPresentationDelay;const n=gF(t).length>0;return n&&t.serverControl&&t.serverControl.partHoldBack?t.serverControl.partHoldBack:n&&t.partTargetDuration?t.partTargetDuration*3:t.serverControl&&t.serverControl.holdBack?t.serverControl.holdBack:t.targetDuration?t.targetDuration*3:0},iK=function(u,t){let n=0,r=t-u.mediaSequence,l=u.segments[r];if(l){if(typeof l.start<"u")return{result:l.start,precise:!0};if(typeof l.end<"u")return{result:l.end-l.duration,precise:!0}}for(;r--;){if(l=u.segments[r],typeof l.end<"u")return{result:n+l.end,precise:!0};if(n+=o1(u,l),typeof l.start<"u")return{result:n+l.start,precise:!0}}return{result:n,precise:!1}},rK=function(u,t){let n=0,r,l=t-u.mediaSequence;for(;l<u.segments.length;l++){if(r=u.segments[l],typeof r.start<"u")return{result:r.start-n,precise:!0};if(n+=o1(u,r),typeof r.end<"u")return{result:r.end-n,precise:!0}}return{result:-1,precise:!1}},vF=function(u,t,n){if(typeof t>"u"&&(t=u.mediaSequence+u.segments.length),t<u.mediaSequence)return 0;const r=iK(u,t);if(r.precise)return r.result;const l=rK(u,t);return l.precise?l.result:r.result+n},TF=function(u,t,n){if(!u)return 0;if(typeof n!="number"&&(n=0),typeof t>"u"){if(u.totalDuration)return u.totalDuration;if(!u.endList)return St.Infinity}return vF(u,t,n)},by=function({defaultDuration:u,durationList:t,startIndex:n,endIndex:r}){let l=0;if(n>r&&([n,r]=[r,n]),n<0){for(let d=n;d<Math.min(0,r);d++)l+=u;n=0}for(let d=n;d<r;d++)l+=t[d].duration;return l},EF=function(u,t,n,r){if(!u||!u.segments)return null;if(u.endList)return TF(u);if(t===null)return null;t=t||0;let l=vF(u,u.mediaSequence+u.segments.length,t);return n&&(r=typeof r=="number"?r:yF(null,u),l-=r),Math.max(0,l)},sK=function(u,t,n){const l=t||0;let d=EF(u,t,!0,n);return d===null?$a():(d<l&&(d=l),$a(l,d))},aK=function({playlist:u,currentTime:t,startingSegmentIndex:n,startingPartIndex:r,startTime:l,exactManifestTimings:d}){let f=t-l;const p=VA(u);let m=0;for(let y=0;y<p.length;y++){const b=p[y];if(n===b.segmentIndex&&!(typeof r=="number"&&typeof b.partIndex=="number"&&r!==b.partIndex)){m=y;break}}if(f<0){if(m>0)for(let y=m-1;y>=0;y--){const b=p[y];if(f+=b.duration,d){if(f<0)continue}else if(f+Bc<=0)continue;return{partIndex:b.partIndex,segmentIndex:b.segmentIndex,startTime:l-by({defaultDuration:u.targetDuration,durationList:p,startIndex:m,endIndex:y})}}return{partIndex:p[0]&&p[0].partIndex||null,segmentIndex:p[0]&&p[0].segmentIndex||0,startTime:t}}if(m<0){for(let y=m;y<0;y++)if(f-=u.targetDuration,f<0)return{partIndex:p[0]&&p[0].partIndex||null,segmentIndex:p[0]&&p[0].segmentIndex||0,startTime:t};m=0}for(let y=m;y<p.length;y++){const b=p[y];f-=b.duration;const _=b.duration>Bc,A=f===0,w=_&&f+Bc>=0;if(!((A||w)&&y!==p.length-1)){if(d){if(f>0)continue}else if(f-Bc>=0)continue;return{partIndex:b.partIndex,segmentIndex:b.segmentIndex,startTime:l+by({defaultDuration:u.targetDuration,durationList:p,startIndex:m,endIndex:y})}}}return{segmentIndex:p[p.length-1].segmentIndex,partIndex:p[p.length-1].partIndex,startTime:t}},bF=function(u){return u.excludeUntil&&u.excludeUntil>Date.now()},l1=function(u){return u.excludeUntil&&u.excludeUntil===1/0},ZE=function(u){const t=bF(u);return!u.disabled&&!t},oK=function(u){return u.disabled},lK=function(u){for(let t=0;t<u.segments.length;t++)if(u.segments[t].key)return!0;return!1},_F=function(u,t){return t.attributes&&t.attributes[u]},uK=function(u,t,n,r=0){return _F("BANDWIDTH",n)?(u*n.attributes.BANDWIDTH-r*8)/t:NaN},$A=(u,t)=>{if(u.playlists.length===1)return!0;const n=t.attributes.BANDWIDTH||Number.MAX_VALUE;return u.playlists.filter(r=>ZE(r)?(r.attributes.BANDWIDTH||0)<n:!1).length===0},u1=(u,t)=>!u&&!t||!u&&t||u&&!t?!1:!!(u===t||u.id&&t.id&&u.id===t.id||u.resolvedUri&&t.resolvedUri&&u.resolvedUri===t.resolvedUri||u.uri&&t.uri&&u.uri===t.uri),xP=function(u,t){const n=u&&u.mediaGroups&&u.mediaGroups.AUDIO||{};let r=!1;for(const l in n){for(const d in n[l])if(r=t(n[l][d]),r)break;if(r)break}return!!r},Ky=u=>{if(!u||!u.playlists||!u.playlists.length)return xP(u,n=>n.playlists&&n.playlists.length||n.uri);for(let t=0;t<u.playlists.length;t++){const n=u.playlists[t],r=n.attributes&&n.attributes.CODECS;if(!(r&&r.split(",").every(d=>MN(d))||xP(u,d=>u1(n,d))))return!1}return!0};var Al={liveEdgeDelay:yF,duration:TF,seekable:sK,getMediaInfoForTime:aK,isEnabled:ZE,isDisabled:oK,isExcluded:bF,isIncompatible:l1,playlistEnd:EF,isAes:lK,hasAttribute:_F,estimateSegmentRequestTime:uK,isLowestEnabledRendition:$A,isAudioOnly:Ky,playlistMatch:u1,segmentDurationWithParts:o1};const{log:SF}=Qt,fg=(u,t)=>`${u}-${t}`,xF=(u,t,n)=>`placeholder-uri-${u}-${t}-${n}`,cK=({onwarn:u,oninfo:t,manifestString:n,customTagParsers:r=[],customTagMappers:l=[],llhls:d})=>{const f=new QV;u&&f.on("warn",u),t&&f.on("info",t),r.forEach(y=>f.addParser(y)),l.forEach(y=>f.addTagMapper(y)),f.push(n),f.end();const p=f.manifest;if(d||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(y){p.hasOwnProperty(y)&&delete p[y]}),p.segments&&p.segments.forEach(function(y){["parts","preloadHints"].forEach(function(b){y.hasOwnProperty(b)&&delete y[b]})})),!p.targetDuration){let y=10;p.segments&&p.segments.length&&(y=p.segments.reduce((b,_)=>Math.max(b,_.duration),0)),u&&u({message:`manifest has no targetDuration defaulting to ${y}`}),p.targetDuration=y}const m=gF(p);if(m.length&&!p.partTargetDuration){const y=m.reduce((b,_)=>Math.max(b,_.duration),0);u&&(u({message:`manifest has no partTargetDuration defaulting to ${y}`}),SF.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),p.partTargetDuration=y}return p},Bg=(u,t)=>{u.mediaGroups&&["AUDIO","SUBTITLES"].forEach(n=>{if(u.mediaGroups[n])for(const r in u.mediaGroups[n])for(const l in u.mediaGroups[n][r]){const d=u.mediaGroups[n][r][l];t(d,n,r,l)}})},AF=({playlist:u,uri:t,id:n})=>{u.id=n,u.playlistErrors_=0,t&&(u.uri=t),u.attributes=u.attributes||{}},dK=u=>{let t=u.playlists.length;for(;t--;){const n=u.playlists[t];AF({playlist:n,id:fg(t,n.uri)}),n.resolvedUri=Sl(u.uri,n.uri),u.playlists[n.id]=n,u.playlists[n.uri]=n,n.attributes.BANDWIDTH||SF.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},fK=u=>{Bg(u,t=>{t.uri&&(t.resolvedUri=Sl(u.uri,t.uri))})},hK=(u,t)=>{const n=fg(0,t),r={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:St.location.href,resolvedUri:St.location.href,playlists:[{uri:t,id:n,resolvedUri:t,attributes:{}}]};return r.playlists[n]=r.playlists[0],r.playlists[t]=r.playlists[0],r},wF=(u,t,n=xF)=>{u.uri=t;for(let l=0;l<u.playlists.length;l++)if(!u.playlists[l].uri){const d=`placeholder-uri-${l}`;u.playlists[l].uri=d}const r=Ky(u);Bg(u,(l,d,f,p)=>{if(!l.playlists||!l.playlists.length){if(r&&d==="AUDIO"&&!l.uri)for(let m=0;m<u.playlists.length;m++){const y=u.playlists[m];if(y.attributes&&y.attributes.AUDIO&&y.attributes.AUDIO===f)return}l.playlists=[Us({},l)]}l.playlists.forEach(function(m,y){const b=n(d,f,p,m),_=fg(y,b);m.uri?m.resolvedUri=m.resolvedUri||Sl(u.uri,m.uri):(m.uri=y===0?b:_,m.resolvedUri=m.uri),m.id=m.id||_,m.attributes=m.attributes||{},u.playlists[m.id]=m,u.playlists[m.uri]=m})}),dK(u),fK(u)};class AP{constructor(){this.offset_=null,this.pendingDateRanges_=new Map,this.processedDateRanges_=new Map}setOffset(t=[]){if(this.offset_!==null||!t.length)return;const[n]=t;n.programDateTime!==void 0&&(this.offset_=n.programDateTime/1e3)}setPendingDateRanges(t=[]){if(!t.length)return;const[n]=t,r=n.startDate.getTime();this.trimProcessedDateRanges_(r),this.pendingDateRanges_=t.reduce((l,d)=>(l.set(d.id,d),l),new Map)}processDateRange(t){this.pendingDateRanges_.delete(t.id),this.processedDateRanges_.set(t.id,t)}getDateRangesToProcess(){if(this.offset_===null)return[];const t={},n=[];this.pendingDateRanges_.forEach((r,l)=>{if(!this.processedDateRanges_.has(l)&&(r.startTime=r.startDate.getTime()/1e3-this.offset_,r.processDateRange=()=>this.processDateRange(r),n.push(r),!!r.class))if(t[r.class]){const d=t[r.class].push(r);r.classListIndex=d-1}else t[r.class]=[r],r.classListIndex=0});for(const r of n){const l=t[r.class]||[];r.endDate?r.endTime=r.endDate.getTime()/1e3-this.offset_:r.endOnNext&&l[r.classListIndex+1]?r.endTime=l[r.classListIndex+1].startTime:r.duration?r.endTime=r.startTime+r.duration:r.plannedDuration?r.endTime=r.startTime+r.plannedDuration:r.endTime=r.startTime}return n}trimProcessedDateRanges_(t){new Map(this.processedDateRanges_).forEach((r,l)=>{r.startDate.getTime()<t&&this.processedDateRanges_.delete(l)})}}const IF=22,Oh=({requestType:u,request:t,error:n,parseFailure:r})=>{const l=t.status<200||t.status>299,d=t.status>=400&&t.status<=499,f={uri:t.uri,requestType:u},p=l&&!d||r;if(n&&d)f.error=Us({},n),f.errorType=Qt.Error.NetworkRequestFailed;else if(t.aborted)f.errorType=Qt.Error.NetworkRequestAborted;else if(t.timedout)f.erroType=Qt.Error.NetworkRequestTimeout;else if(p){const m=r?Qt.Error.NetworkBodyParserFailed:Qt.Error.NetworkBadStatus;f.errorType=m,f.status=t.status,f.headers=t.headers}return f},pK=Au("CodecUtils"),CF=function(u){const t=u.attributes||{};if(t.CODECS)return Rc(t.CODECS)},kF=(u,t)=>{const n=t.attributes||{};return u&&u.mediaGroups&&u.mediaGroups.AUDIO&&n.AUDIO&&u.mediaGroups.AUDIO[n.AUDIO]},gK=(u,t)=>{if(!kF(u,t))return!0;const n=t.attributes||{},r=u.mediaGroups.AUDIO[n.AUDIO];for(const l in r)if(!r[l].uri&&!r[l].playlists)return!0;return!1},Uy=function(u){const t={};return u.forEach(({mediaType:n,type:r,details:l})=>{t[n]=t[n]||[],t[n].push(PN(`${r}${l}`))}),Object.keys(t).forEach(function(n){if(t[n].length>1){pK(`multiple ${n} codecs found as attributes: ${t[n].join(", ")}. Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.`),t[n]=null;return}t[n]=t[n][0]}),t},wP=function(u){let t=0;return u.audio&&t++,u.video&&t++,t},_y=function(u,t){const n=t.attributes||{},r=Uy(CF(t)||[]);if(kF(u,t)&&!r.audio&&!gK(u,t)){const l=Uy(ZV(u,n.AUDIO)||[]);l.audio&&(r.audio=l.audio)}return r},{EventTarget:mK}=Qt,yK=(u,t)=>{if(t.endList||!t.serverControl)return u;const n={};if(t.serverControl.canBlockReload){const{preloadSegment:r}=t;let l=t.mediaSequence+t.segments.length;if(r){const d=r.parts||[],f=mF(t)-1;f>-1&&f!==d.length-1&&(n._HLS_part=f),(f>-1||d.length)&&l--}n._HLS_msn=l}if(t.serverControl&&t.serverControl.canSkipUntil&&(n._HLS_skip=t.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(n).length){const r=new St.URL(u);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(l){n.hasOwnProperty(l)&&r.searchParams.set(l,n[l])}),u=r.toString()}return u},vK=(u,t)=>{if(!u)return t;const n=cs(u,t);if(u.preloadHints&&!t.preloadHints&&delete n.preloadHints,u.parts&&!t.parts)delete n.parts;else if(u.parts&&t.parts)for(let r=0;r<t.parts.length;r++)u.parts&&u.parts[r]&&(n.parts[r]=cs(u.parts[r],t.parts[r]));return!u.skipped&&t.skipped&&(n.skipped=!1),u.preload&&!t.preload&&(n.preload=!1),n},TK=(u,t,n)=>{const r=u.slice(),l=t.slice();n=n||0;const d=[];let f;for(let p=0;p<l.length;p++){const m=r[p+n],y=l[p];m?(f=m.map||f,d.push(vK(m,y))):(f&&!y.map&&(y.map=f),d.push(y))}return d},DF=(u,t)=>{!u.resolvedUri&&u.uri&&(u.resolvedUri=Sl(t,u.uri)),u.key&&!u.key.resolvedUri&&(u.key.resolvedUri=Sl(t,u.key.uri)),u.map&&!u.map.resolvedUri&&(u.map.resolvedUri=Sl(t,u.map.uri)),u.map&&u.map.key&&!u.map.key.resolvedUri&&(u.map.key.resolvedUri=Sl(t,u.map.key.uri)),u.parts&&u.parts.length&&u.parts.forEach(n=>{n.resolvedUri||(n.resolvedUri=Sl(t,n.uri))}),u.preloadHints&&u.preloadHints.length&&u.preloadHints.forEach(n=>{n.resolvedUri||(n.resolvedUri=Sl(t,n.uri))})},RF=function(u){const t=u.segments||[],n=u.preloadSegment;if(n&&n.parts&&n.parts.length){if(n.preloadHints){for(let r=0;r<n.preloadHints.length;r++)if(n.preloadHints[r].type==="MAP")return t}n.duration=u.targetDuration,n.preload=!0,t.push(n)}return t},LF=(u,t)=>u===t||u.segments&&t.segments&&u.segments.length===t.segments.length&&u.endList===t.endList&&u.mediaSequence===t.mediaSequence&&u.preloadSegment===t.preloadSegment,KA=(u,t,n=LF)=>{const r=cs(u,{}),l=r.playlists[t.id];if(!l||n(l,t))return null;t.segments=RF(t);const d=cs(l,t);if(d.preloadSegment&&!t.preloadSegment&&delete d.preloadSegment,l.segments){if(t.skip){t.segments=t.segments||[];for(let f=0;f<t.skip.skippedSegments;f++)t.segments.unshift({skipped:!0})}d.segments=TK(l.segments,t.segments,t.mediaSequence-l.mediaSequence)}d.segments.forEach(f=>{DF(f,d.resolvedUri)});for(let f=0;f<r.playlists.length;f++)r.playlists[f].id===t.id&&(r.playlists[f]=d);return r.playlists[t.id]=d,r.playlists[t.uri]=d,Bg(u,(f,p,m,y)=>{if(f.playlists)for(let b=0;b<f.playlists.length;b++)t.id===f.playlists[b].id&&(f.playlists[b]=d)}),r},YA=(u,t)=>{const n=u.segments||[],r=n[n.length-1],l=r&&r.parts&&r.parts[r.parts.length-1],d=l&&l.duration||r&&r.duration;return t&&d?d*1e3:(u.partTargetDuration||u.targetDuration||10)*500},IP=(u,t,n)=>{if(!u)return;const r=[];return u.forEach(l=>{if(!l.attributes)return;const{BANDWIDTH:d,RESOLUTION:f,CODECS:p}=l.attributes;r.push({id:l.id,bandwidth:d,resolution:f,codecs:p})}),{type:t,isLive:n,renditions:r}};class ig extends mK{constructor(t,n,r={}){if(super(),!t)throw new Error("A non-empty playlist URL or object is required");this.logger_=Au("PlaylistLoader");const{withCredentials:l=!1}=r;this.src=t,this.vhs_=n,this.withCredentials=l,this.addDateRangesToTextTrack_=r.addDateRangesToTextTrack;const d=n.options_;this.customTagParsers=d&&d.customTagParsers||[],this.customTagMappers=d&&d.customTagMappers||[],this.llhls=d&&d.llhls,this.dateRangesStorage_=new AP,this.state="HAVE_NOTHING",this.handleMediaupdatetimeout_=this.handleMediaupdatetimeout_.bind(this),this.on("mediaupdatetimeout",this.handleMediaupdatetimeout_),this.on("loadedplaylist",this.handleLoadedPlaylist_.bind(this))}handleLoadedPlaylist_(){const t=this.media();if(!t)return;this.dateRangesStorage_.setOffset(t.segments),this.dateRangesStorage_.setPendingDateRanges(t.dateRanges);const n=this.dateRangesStorage_.getDateRangesToProcess();!n.length||!this.addDateRangesToTextTrack_||this.addDateRangesToTextTrack_(n)}handleMediaupdatetimeout_(){if(this.state!=="HAVE_METADATA")return;const t=this.media();let n=Sl(this.main.uri,t.uri);this.llhls&&(n=yK(n,t)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:n,withCredentials:this.withCredentials,requestType:"hls-playlist"},(r,l)=>{if(this.request){if(r)return this.playlistRequestError(this.request,this.media(),"HAVE_METADATA");this.haveMetadata({playlistString:this.request.responseText,url:this.media().uri,id:this.media().id})}})}playlistRequestError(t,n,r){const{uri:l,id:d}=n;this.request=null,r&&(this.state=r),this.error={playlist:this.main.playlists[d],status:t.status,message:`HLS playlist request error at URL: ${l}.`,responseText:t.responseText,code:t.status>=500?4:2,metadata:Oh({requestType:t.requestType,request:t,error:t.error})},this.trigger("error")}parseManifest_({url:t,manifestString:n}){try{const r=cK({onwarn:({message:l})=>this.logger_(`m3u8-parser warn for ${t}: ${l}`),oninfo:({message:l})=>this.logger_(`m3u8-parser info for ${t}: ${l}`),manifestString:n,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,llhls:this.llhls});return!r.playlists||!r.playlists.length||this.excludeAudioOnlyVariants(r.playlists),r}catch(r){this.error=r,this.error.metadata={errorType:Qt.Error.StreamingHlsPlaylistParserError,error:r}}}excludeAudioOnlyVariants(t){const n=r=>{const l=r.attributes||{},{width:d,height:f}=l.RESOLUTION||{};if(d&&f)return!0;const p=CF(r)||[];return!!Uy(p).video};t.some(n)&&t.forEach(r=>{n(r)||(r.excludeUntil=1/0)})}haveMetadata({playlistString:t,playlistObject:n,url:r,id:l}){this.request=null,this.state="HAVE_METADATA";const d={playlistInfo:{type:"media",uri:r}};this.trigger({type:"playlistparsestart",metadata:d});const f=n||this.parseManifest_({url:r,manifestString:t});f.lastRequest=Date.now(),AF({playlist:f,uri:r,id:l});const p=KA(this.main,f);this.targetDuration=f.partTargetDuration||f.targetDuration,this.pendingMedia_=null,p?(this.main=p,this.media_=this.main.playlists[l]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(YA(this.media(),!!p)),d.parsedPlaylist=IP(this.main.playlists,d.playlistInfo.type,!this.media_.endList),this.trigger({type:"playlistparsecomplete",metadata:d}),this.trigger("loadedplaylist")}dispose(){this.trigger("dispose"),this.stopRequest(),St.clearTimeout(this.mediaUpdateTimeout),St.clearTimeout(this.finalRenditionTimeout),this.dateRangesStorage_=new AP,this.off()}stopRequest(){if(this.request){const t=this.request;this.request=null,t.onreadystatechange=null,t.abort()}}media(t,n){if(!t)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(typeof t=="string"){if(!this.main.playlists[t])throw new Error("Unknown playlist URI: "+t);t=this.main.playlists[t]}if(St.clearTimeout(this.finalRenditionTimeout),n){const p=(t.partTargetDuration||t.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=St.setTimeout(this.media.bind(this,t,!1),p);return}const r=this.state,l=!this.media_||t.id!==this.media_.id,d=this.main.playlists[t.id];if(d&&d.endList||t.endList&&t.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=t,l&&(this.trigger("mediachanging"),r==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_(YA(t,!0)),!l)return;if(this.state="SWITCHING_MEDIA",this.request){if(t.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=t;const f={playlistInfo:{type:"media",uri:t.uri}};this.trigger({type:"playlistrequeststart",metadata:f}),this.request=this.vhs_.xhr({uri:t.resolvedUri,withCredentials:this.withCredentials,requestType:"hls-playlist"},(p,m)=>{if(this.request){if(t.lastRequest=Date.now(),t.resolvedUri=AE(t.resolvedUri,m),p)return this.playlistRequestError(this.request,t,r);this.trigger({type:"playlistrequestcomplete",metadata:f}),this.haveMetadata({playlistString:m.responseText,url:t.uri,id:t.id}),r==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}})}pause(){this.mediaUpdateTimeout&&(St.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),this.state==="HAVE_NOTHING"&&(this.started=!1),this.state==="SWITCHING_MEDIA"?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MAIN_MANIFEST":this.state==="HAVE_CURRENT_METADATA"&&(this.state="HAVE_METADATA")}load(t){this.mediaUpdateTimeout&&(St.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);const n=this.media();if(t){const r=n?(n.partTargetDuration||n.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=St.setTimeout(()=>{this.mediaUpdateTimeout=null,this.load()},r);return}if(!this.started){this.start();return}n&&!n.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")}updateMediaUpdateTimeout_(t){this.mediaUpdateTimeout&&(St.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),!(!this.media()||this.media().endList)&&(this.mediaUpdateTimeout=St.setTimeout(()=>{this.mediaUpdateTimeout=null,this.trigger("mediaupdatetimeout"),this.updateMediaUpdateTimeout_(t)},t))}start(){if(this.started=!0,typeof this.src=="object"){this.src.uri||(this.src.uri=St.location.href),this.src.resolvedUri=this.src.uri,setTimeout(()=>{this.setupInitialPlaylist(this.src)},0);return}const t={playlistInfo:{type:"multivariant",uri:this.src}};this.trigger({type:"playlistrequeststart",metadata:t}),this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials,requestType:"hls-playlist"},(n,r)=>{if(!this.request)return;if(this.request=null,n)return this.error={status:r.status,message:`HLS playlist request error at URL: ${this.src}.`,responseText:r.responseText,code:2,metadata:Oh({requestType:r.requestType,request:r,error:n})},this.state==="HAVE_NOTHING"&&(this.started=!1),this.trigger("error");this.trigger({type:"playlistrequestcomplete",metadata:t}),this.src=AE(this.src,r),this.trigger({type:"playlistparsestart",metadata:t});const l=this.parseManifest_({manifestString:r.responseText,url:this.src});t.parsedPlaylist=IP(l.playlists,t.playlistInfo.type,!1),this.trigger({type:"playlistparsecomplete",metadata:t}),this.setupInitialPlaylist(l)})}srcUri(){return typeof this.src=="string"?this.src:this.src.uri}setupInitialPlaylist(t){if(this.state="HAVE_MAIN_MANIFEST",t.playlists){this.main=t,wF(this.main,this.srcUri()),t.playlists.forEach(r=>{r.segments=RF(r),r.segments.forEach(l=>{DF(l,r.resolvedUri)})}),this.trigger("loadedplaylist"),this.request||this.media(this.main.playlists[0]);return}const n=this.srcUri()||St.location.href;this.main=hK(t,n),this.haveMetadata({playlistObject:t,url:n,id:this.main.playlists[0].id}),this.trigger("loadedmetadata")}updateOrDeleteClone(t,n){const r=this.main,l=t.ID;let d=r.playlists.length;for(;d--;){const f=r.playlists[d];if(f.attributes["PATHWAY-ID"]===l){const p=f.resolvedUri,m=f.id;if(n){const y=this.createCloneURI_(f.resolvedUri,t),b=fg(l,y),_=this.createCloneAttributes_(l,f.attributes),A=this.createClonePlaylist_(f,b,t,_);r.playlists[d]=A,r.playlists[b]=A,r.playlists[y]=A}else r.playlists.splice(d,1);delete r.playlists[m],delete r.playlists[p]}}this.updateOrDeleteCloneMedia(t,n)}updateOrDeleteCloneMedia(t,n){const r=this.main,l=t.ID;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(d=>{if(!(!r.mediaGroups[d]||!r.mediaGroups[d][l])){for(const f in r.mediaGroups[d])if(f===l){for(const p in r.mediaGroups[d][f])r.mediaGroups[d][f][p].playlists.forEach((y,b)=>{const _=r.playlists[y.id],A=_.id,w=_.resolvedUri;delete r.playlists[A],delete r.playlists[w]});delete r.mediaGroups[d][f]}}}),n&&this.createClonedMediaGroups_(t)}addClonePathway(t,n={}){const r=this.main,l=r.playlists.length,d=this.createCloneURI_(n.resolvedUri,t),f=fg(t.ID,d),p=this.createCloneAttributes_(t.ID,n.attributes),m=this.createClonePlaylist_(n,f,t,p);r.playlists[l]=m,r.playlists[f]=m,r.playlists[d]=m,this.createClonedMediaGroups_(t)}createClonedMediaGroups_(t){const n=t.ID,r=t["BASE-ID"],l=this.main;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(d=>{if(!(!l.mediaGroups[d]||l.mediaGroups[d][n]))for(const f in l.mediaGroups[d]){if(f===r)l.mediaGroups[d][n]={};else continue;for(const p in l.mediaGroups[d][f]){const m=l.mediaGroups[d][f][p];l.mediaGroups[d][n][p]=Us({},m);const y=l.mediaGroups[d][n][p],b=this.createCloneURI_(m.resolvedUri,t);y.resolvedUri=b,y.uri=b,y.playlists=[],m.playlists.forEach((_,A)=>{const w=l.playlists[_.id],T=xF(d,n,p),k=fg(n,T);if(w&&!l.playlists[k]){const U=this.createClonePlaylist_(w,k,t),Y=U.resolvedUri;l.playlists[k]=U,l.playlists[Y]=U}y.playlists[A]=this.createClonePlaylist_(_,k,t)})}}})}createClonePlaylist_(t,n,r,l){const d=this.createCloneURI_(t.resolvedUri,r),f={resolvedUri:d,uri:d,id:n};return t.segments&&(f.segments=[]),l&&(f.attributes=l),cs(t,f)}createCloneURI_(t,n){const r=new URL(t);r.hostname=n["URI-REPLACEMENT"].HOST;const l=n["URI-REPLACEMENT"].PARAMS;for(const d of Object.keys(l))r.searchParams.set(d,l[d]);return r.href}createCloneAttributes_(t,n){const r={"PATHWAY-ID":t};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(l=>{n[l]&&(r[l]=t)}),r}getKeyIdSet(t){if(t.contentProtection){const n=new Set;for(const r in t.contentProtection){const l=t.contentProtection[r].attributes.keyId;l&&n.add(l.toLowerCase())}return n}}}const WA=function(u,t,n,r){const l=u.responseType==="arraybuffer"?u.response:u.responseText;!t&&l&&(u.responseTime=Date.now(),u.roundTripTime=u.responseTime-u.requestTime,u.bytesReceived=l.byteLength||l.length,u.bandwidth||(u.bandwidth=Math.floor(u.bytesReceived/u.roundTripTime*8*1e3))),n.headers&&(u.responseHeaders=n.headers),t&&t.code==="ETIMEDOUT"&&(u.timedout=!0),!t&&!u.aborted&&n.statusCode!==200&&n.statusCode!==206&&n.statusCode!==0&&(t=new Error("XHR Failed with a response of: "+(u&&(l||u.responseText)))),r(t,u)},EK=(u,t)=>{if(!u||!u.size)return;let n=t;return u.forEach(r=>{n=r(n)}),n},bK=(u,t,n,r)=>{!u||!u.size||u.forEach(l=>{l(t,n,r)})},PF=function(){const u=function t(n,r){n=cs({timeout:45e3},n);const l=t.beforeRequest||Qt.Vhs.xhr.beforeRequest,d=t._requestCallbackSet||Qt.Vhs.xhr._requestCallbackSet||new Set,f=t._responseCallbackSet||Qt.Vhs.xhr._responseCallbackSet;l&&typeof l=="function"&&(Qt.log.warn("beforeRequest is deprecated, use onRequest instead."),d.add(l));const p=Qt.Vhs.xhr.original===!0?Qt.xhr:Qt.Vhs.xhr,m=EK(d,n);d.delete(l);const y=p(m||n,function(_,A){return bK(f,y,_,A),WA(y,_,A,r)}),b=y.abort;return y.abort=function(){return y.aborted=!0,b.apply(y,arguments)},y.uri=n.uri,y.requestType=n.requestType,y.requestTime=Date.now(),y};return u.original=!0,u},_K=function(u){let t;const n=u.offset;return typeof u.offset=="bigint"||typeof u.length=="bigint"?t=St.BigInt(u.offset)+St.BigInt(u.length)-St.BigInt(1):t=u.offset+u.length-1,"bytes="+n+"-"+t},XA=function(u){const t={};return u.byterange&&(t.Range=_K(u.byterange)),t},SK=function(u,t){return u.start(t)+"-"+u.end(t)},xK=function(u,t){const n=u.toString(16);return"00".substring(0,2-n.length)+n+(t%2?" ":"")},AK=function(u){return u>=32&&u<126?String.fromCharCode(u):"."},MF=function(u){const t={};return Object.keys(u).forEach(n=>{const r=u[n];ON(r)?t[n]={bytes:r.buffer,byteOffset:r.byteOffset,byteLength:r.byteLength}:t[n]=r}),t},wE=function(u){const t=u.byterange||{length:1/0,offset:0};return[t.length,t.offset,u.resolvedUri].join(",")},NF=function(u){return u.resolvedUri},OF=u=>{const t=Array.prototype.slice.call(u),n=16;let r="",l,d;for(let f=0;f<t.length/n;f++)l=t.slice(f*n,f*n+n).map(xK).join(""),d=t.slice(f*n,f*n+n).map(AK).join(""),r+=l+" "+d+`
`;return r},wK=({bytes:u})=>OF(u),IK=u=>{let t="",n;for(n=0;n<u.length;n++)t+=SK(u,n)+" ";return t};var CK=Object.freeze({__proto__:null,createTransferableMessage:MF,initSegmentId:wE,segmentKeyId:NF,hexDump:OF,tagDump:wK,textRanges:IK});const FF=.25,kK=(u,t)=>{if(!t.dateTimeObject)return null;const n=t.videoTimingInfo.transmuxerPrependedSeconds,l=t.videoTimingInfo.transmuxedPresentationStart+n,d=u-l;return new Date(t.dateTimeObject.getTime()+d*1e3)},DK=u=>u.transmuxedPresentationEnd-u.transmuxedPresentationStart-u.transmuxerPrependedSeconds,RK=(u,t)=>{let n;try{n=new Date(u)}catch{return null}if(!t||!t.segments||t.segments.length===0)return null;let r=t.segments[0];if(n<new Date(r.dateTimeObject))return null;for(let m=0;m<t.segments.length-1;m++){r=t.segments[m];const y=new Date(t.segments[m+1].dateTimeObject);if(n<y)break}const l=t.segments[t.segments.length-1],d=l.dateTimeObject,f=l.videoTimingInfo?DK(l.videoTimingInfo):l.duration+l.duration*FF,p=new Date(d.getTime()+f*1e3);return n>p?null:(n>new Date(d)&&(r=l),{segment:r,estimatedStart:r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationStart:Al.duration(t,t.mediaSequence+t.segments.indexOf(r)),type:r.videoTimingInfo?"accurate":"estimate"})},LK=(u,t)=>{if(!t||!t.segments||t.segments.length===0)return null;let n=0,r;for(let d=0;d<t.segments.length&&(r=t.segments[d],n=r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationEnd:n+r.duration,!(u<=n));d++);const l=t.segments[t.segments.length-1];if(l.videoTimingInfo&&l.videoTimingInfo.transmuxedPresentationEnd<u)return null;if(u>n){if(u>n+l.duration*FF)return null;r=l}return{segment:r,estimatedStart:r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationStart:n-r.duration,type:r.videoTimingInfo?"accurate":"estimate"}},PK=(u,t)=>{let n,r;try{n=new Date(u),r=new Date(t)}catch{}const l=n.getTime();return(r.getTime()-l)/1e3},MK=u=>{if(!u.segments||u.segments.length===0)return!1;for(let t=0;t<u.segments.length;t++)if(!u.segments[t].dateTimeObject)return!1;return!0},NK=({playlist:u,time:t=void 0,callback:n})=>{if(!n)throw new Error("getProgramTime: callback must be provided");if(!u||t===void 0)return n({message:"getProgramTime: playlist and time must be provided"});const r=LK(t,u);if(!r)return n({message:"valid programTime was not found"});if(r.type==="estimate")return n({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:r.estimatedStart});const l={mediaSeconds:t},d=kK(t,r.segment);return d&&(l.programDateTime=d.toISOString()),n(null,l)},UF=({programTime:u,playlist:t,retryCount:n=2,seekTo:r,pauseAfterSeek:l=!0,tech:d,callback:f})=>{if(!f)throw new Error("seekToProgramTime: callback must be provided");if(typeof u>"u"||!t||!r)return f({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!t.endList&&!d.hasStarted_)return f({message:"player must be playing a live stream to start buffering"});if(!MK(t))return f({message:"programDateTime tags must be provided in the manifest "+t.resolvedUri});const p=RK(u,t);if(!p)return f({message:`${u} was not found in the stream`});const m=p.segment,y=PK(m.dateTimeObject,u);if(p.type==="estimate"){if(n===0)return f({message:`${u} is not buffered yet. Try again`});r(p.estimatedStart+y),d.one("seeked",()=>{UF({programTime:u,playlist:t,retryCount:n-1,seekTo:r,pauseAfterSeek:l,tech:d,callback:f})});return}const b=m.start+y,_=()=>f(null,d.currentTime());d.one("seeked",_),l&&d.pause(),r(b)},sA=(u,t)=>{if(u.readyState===4)return t()},OK=(u,t,n,r)=>{let l=[],d,f=!1;const p=function(_,A,w,T){return A.abort(),f=!0,n(_,A,w,T)},m=function(_,A){if(f)return;if(_)return _.metadata=Oh({requestType:r,request:A,error:_}),p(_,A,"",l);const w=A.responseText.substring(l&&l.byteLength||0,A.responseText.length);if(l=u9(l,FN(w,!0)),d=d||dy(l),l.length<10||d&&l.length<d+2)return sA(A,()=>p(_,A,"",l));const T=Pw(l);return T==="ts"&&l.length<188?sA(A,()=>p(_,A,"",l)):!T&&l.length<376?sA(A,()=>p(_,A,"",l)):p(null,A,T,l)},b=t({uri:u,beforeSend(_){_.overrideMimeType("text/plain; charset=x-user-defined"),_.addEventListener("progress",function({total:A,loaded:w}){return WA(_,null,{statusCode:_.status},m)})}},function(_,A){return WA(b,_,A,m)});return b},{EventTarget:FK}=Qt,CP=function(u,t){if(!LF(u,t)||u.sidx&&t.sidx&&(u.sidx.offset!==t.sidx.offset||u.sidx.length!==t.sidx.length))return!1;if(!u.sidx&&t.sidx||u.sidx&&!t.sidx||u.segments&&!t.segments||!u.segments&&t.segments)return!1;if(!u.segments&&!t.segments)return!0;for(let n=0;n<u.segments.length;n++){const r=u.segments[n],l=t.segments[n];if(r.uri!==l.uri)return!1;if(!r.byterange&&!l.byterange)continue;const d=r.byterange,f=l.byterange;if(d&&!f||!d&&f||d.offset!==f.offset||d.length!==f.length)return!1}return!0},UK=(u,t,n,r)=>{const l=r.attributes.NAME||n;return`placeholder-uri-${u}-${t}-${l}`},BK=({mainXml:u,srcUrl:t,clientOffset:n,sidxMapping:r,previousManifest:l})=>{const d=o$(u,{manifestUri:t,clientOffset:n,sidxMapping:r,previousManifest:l});return wF(d,t,UK),d},zK=(u,t)=>{Bg(u,(n,r,l,d)=>{(!t.mediaGroups[r][l]||!(d in t.mediaGroups[r][l]))&&delete u.mediaGroups[r][l][d]})},jK=(u,t,n)=>{let r=!0,l=cs(u,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod,timelineStarts:t.timelineStarts});for(let d=0;d<t.playlists.length;d++){const f=t.playlists[d];if(f.sidx){const m=NE(f.sidx);n&&n[m]&&n[m].sidx&&Dw(f,n[m].sidx,f.sidx.resolvedUri)}const p=KA(l,f,CP);p&&(l=p,r=!1)}return Bg(t,(d,f,p,m)=>{if(d.playlists&&d.playlists.length){const y=d.playlists[0].id,b=KA(l,d.playlists[0],CP);b&&(l=b,m in l.mediaGroups[f][p]||(l.mediaGroups[f][p][m]=d),l.mediaGroups[f][p][m].playlists[0]=l.playlists[y],r=!1)}}),zK(l,t),t.minimumUpdatePeriod!==u.minimumUpdatePeriod&&(r=!1),r?null:l},qK=(u,t)=>(!u.map&&!t.map||!!(u.map&&t.map&&u.map.byterange.offset===t.map.byterange.offset&&u.map.byterange.length===t.map.byterange.length))&&u.uri===t.uri&&u.byterange.offset===t.byterange.offset&&u.byterange.length===t.byterange.length,kP=(u,t)=>{const n={};for(const r in u){const d=u[r].sidx;if(d){const f=NE(d);if(!t[f])break;const p=t[f].sidxInfo;qK(p,d)&&(n[f]=t[f])}}return n},HK=(u,t)=>{let r=kP(u.playlists,t);return Bg(u,(l,d,f,p)=>{if(l.playlists&&l.playlists.length){const m=l.playlists;r=cs(r,kP(m,t))}}),r};class QA extends FK{constructor(t,n,r={},l){super(),this.isPaused_=!0,this.mainPlaylistLoader_=l||this,l||(this.isMain_=!0);const{withCredentials:d=!1}=r;if(this.vhs_=n,this.withCredentials=d,this.addMetadataToTextTrack=r.addMetadataToTextTrack,!t)throw new Error("A non-empty playlist URL or object is required");this.on("minimumUpdatePeriod",()=>{this.refreshXml_()}),this.on("mediaupdatetimeout",()=>{this.refreshMedia_(this.media().id)}),this.state="HAVE_NOTHING",this.loadedPlaylists_={},this.logger_=Au("DashPlaylistLoader"),this.isMain_?(this.mainPlaylistLoader_.srcUrl=t,this.mainPlaylistLoader_.sidxMapping_={}):this.childPlaylist_=t}get isPaused(){return this.isPaused_}requestErrored_(t,n,r){if(!this.request)return!0;if(this.request=null,t)return this.error=typeof t=="object"&&!(t instanceof Error)?t:{status:n.status,message:"DASH request error at URL: "+n.uri,response:n.response,code:2,metadata:t.metadata},r&&(this.state=r),this.trigger("error"),!0}addSidxSegments_(t,n,r){const l=t.sidx&&NE(t.sidx);if(!t.sidx||!l||this.mainPlaylistLoader_.sidxMapping_[l]){St.clearTimeout(this.mediaRequest_),this.mediaRequest_=St.setTimeout(()=>r(!1),0);return}const d=AE(t.sidx.resolvedUri),f=(m,y)=>{if(this.requestErrored_(m,y,n))return;const b=this.mainPlaylistLoader_.sidxMapping_,{requestType:_}=y;let A;try{A=f$(ir(y.response).subarray(8))}catch(w){w.metadata=Oh({requestType:_,request:y,parseFailure:!0}),this.requestErrored_(w,y,n);return}return b[l]={sidxInfo:t.sidx,sidx:A},Dw(t,A,t.sidx.resolvedUri),r(!0)},p="dash-sidx";this.request=OK(d,this.vhs_.xhr,(m,y,b,_)=>{if(m)return f(m,y);if(!b||b!=="mp4"){const T=b||"unknown";return f({status:y.status,message:`Unsupported ${T} container type for sidx segment at URL: ${d}`,response:"",playlist:t,internal:!0,playlistExclusionDuration:1/0,code:2},y)}const{offset:A,length:w}=t.sidx.byterange;if(_.length>=w+A)return f(m,{response:_.subarray(A,A+w),status:y.status,uri:y.uri});this.request=this.vhs_.xhr({uri:d,responseType:"arraybuffer",requestType:"dash-sidx",headers:XA({byterange:t.sidx.byterange})},f)},p)}dispose(){this.isPaused_=!0,this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},St.clearTimeout(this.minimumUpdatePeriodTimeout_),St.clearTimeout(this.mediaRequest_),St.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.off()}hasPendingRequest(){return this.request||this.mediaRequest_}stopRequest(){if(this.request){const t=this.request;this.request=null,t.onreadystatechange=null,t.abort()}}media(t){if(!t)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);const n=this.state;if(typeof t=="string"){if(!this.mainPlaylistLoader_.main.playlists[t])throw new Error("Unknown playlist URI: "+t);t=this.mainPlaylistLoader_.main.playlists[t]}const r=!this.media_||t.id!==this.media_.id;if(r&&this.loadedPlaylists_[t.id]&&this.loadedPlaylists_[t.id].endList){this.state="HAVE_METADATA",this.media_=t,r&&(this.trigger("mediachanging"),this.trigger("mediachange"));return}r&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(t,n,l=>{this.haveMetadata({startingState:n,playlist:t})}))}haveMetadata({startingState:t,playlist:n}){this.state="HAVE_METADATA",this.loadedPlaylists_[n.id]=n,St.clearTimeout(this.mediaRequest_),this.mediaRequest_=null,this.refreshMedia_(n.id),t==="HAVE_MAIN_MANIFEST"?this.trigger("loadedmetadata"):this.trigger("mediachange")}pause(){this.isPaused_=!0,this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),St.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMain_&&(St.clearTimeout(this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_),this.mainPlaylistLoader_.minimumUpdatePeriodTimeout_=null),this.state==="HAVE_NOTHING"&&(this.started=!1)}load(t){this.isPaused_=!1,St.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;const n=this.media();if(t){const r=n?n.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=St.setTimeout(()=>this.load(),r);return}if(!this.started){this.start();return}n&&!n.endList?(this.isMain_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist")}start(){if(this.started=!0,!this.isMain_){St.clearTimeout(this.mediaRequest_),this.mediaRequest_=St.setTimeout(()=>this.haveMain_(),0);return}this.requestMain_((t,n)=>{this.haveMain_(),!this.hasPendingRequest()&&!this.media_&&this.media(this.mainPlaylistLoader_.main.playlists[0])})}requestMain_(t){const n={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestrequeststart",metadata:n}),this.request=this.vhs_.xhr({uri:this.mainPlaylistLoader_.srcUrl,withCredentials:this.withCredentials,requestType:"dash-manifest"},(r,l)=>{if(r){const{requestType:f}=l;r.metadata=Oh({requestType:f,request:l,error:r})}if(this.requestErrored_(r,l)){this.state==="HAVE_NOTHING"&&(this.started=!1);return}this.trigger({type:"manifestrequestcomplete",metadata:n});const d=l.responseText!==this.mainPlaylistLoader_.mainXml_;if(this.mainPlaylistLoader_.mainXml_=l.responseText,l.responseHeaders&&l.responseHeaders.date?this.mainLoaded_=Date.parse(l.responseHeaders.date):this.mainLoaded_=Date.now(),this.mainPlaylistLoader_.srcUrl=AE(this.mainPlaylistLoader_.srcUrl,l),d){this.handleMain_(),this.syncClientServerClock_(()=>t(l,d));return}return t(l,d)})}syncClientServerClock_(t){const n=l$(this.mainPlaylistLoader_.mainXml_);if(n===null)return this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),t();if(n.method==="DIRECT")return this.mainPlaylistLoader_.clientOffset_=n.value-Date.now(),t();this.request=this.vhs_.xhr({uri:Sl(this.mainPlaylistLoader_.srcUrl,n.value),method:n.method,withCredentials:this.withCredentials,requestType:"dash-clock-sync"},(r,l)=>{if(!this.request)return;if(r){const{requestType:f}=l;return this.error.metadata=Oh({requestType:f,request:l,error:r}),this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),t()}let d;n.method==="HEAD"?!l.responseHeaders||!l.responseHeaders.date?d=this.mainLoaded_:d=Date.parse(l.responseHeaders.date):d=Date.parse(l.responseText),this.mainPlaylistLoader_.clientOffset_=d-Date.now(),t()})}haveMain_(){this.state="HAVE_MAIN_MANIFEST",this.isMain_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)}handleMain_(){St.clearTimeout(this.mediaRequest_),this.mediaRequest_=null;const t=this.mainPlaylistLoader_.main,n={manifestInfo:{uri:this.mainPlaylistLoader_.srcUrl}};this.trigger({type:"manifestparsestart",metadata:n});let r;try{r=BK({mainXml:this.mainPlaylistLoader_.mainXml_,srcUrl:this.mainPlaylistLoader_.srcUrl,clientOffset:this.mainPlaylistLoader_.clientOffset_,sidxMapping:this.mainPlaylistLoader_.sidxMapping_,previousManifest:t})}catch(d){this.error=d,this.error.metadata={errorType:Qt.Error.StreamingDashManifestParserError,error:d},this.trigger("error")}t&&(r=jK(t,r,this.mainPlaylistLoader_.sidxMapping_)),this.mainPlaylistLoader_.main=r||t;const l=this.mainPlaylistLoader_.main.locations&&this.mainPlaylistLoader_.main.locations[0];if(l&&l!==this.mainPlaylistLoader_.srcUrl&&(this.mainPlaylistLoader_.srcUrl=l),(!t||r&&r.minimumUpdatePeriod!==t.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),this.addEventStreamToMetadataTrack_(r),r){const{duration:d,endList:f}=r,p=[];r.playlists.forEach(y=>{p.push({id:y.id,bandwidth:y.attributes.BANDWIDTH,resolution:y.attributes.RESOLUTION,codecs:y.attributes.CODECS})});const m={duration:d,isLive:!f,renditions:p};n.parsedManifest=m,this.trigger({type:"manifestparsecomplete",metadata:n})}return!!r}updateMinimumUpdatePeriodTimeout_(){const t=this.mainPlaylistLoader_;t.createMupOnMedia_&&(t.off("loadedmetadata",t.createMupOnMedia_),t.createMupOnMedia_=null),t.minimumUpdatePeriodTimeout_&&(St.clearTimeout(t.minimumUpdatePeriodTimeout_),t.minimumUpdatePeriodTimeout_=null);let n=t.main&&t.main.minimumUpdatePeriod;if(n===0&&(t.media()?n=t.media().targetDuration*1e3:(t.createMupOnMedia_=t.updateMinimumUpdatePeriodTimeout_,t.one("loadedmetadata",t.createMupOnMedia_))),typeof n!="number"||n<=0){n<0&&this.logger_(`found invalid minimumUpdatePeriod of ${n}, not setting a timeout`);return}this.createMUPTimeout_(n)}createMUPTimeout_(t){const n=this.mainPlaylistLoader_;n.minimumUpdatePeriodTimeout_=St.setTimeout(()=>{n.minimumUpdatePeriodTimeout_=null,n.trigger("minimumUpdatePeriod"),n.createMUPTimeout_(t)},t)}refreshXml_(){this.requestMain_((t,n)=>{n&&(this.media_&&(this.media_=this.mainPlaylistLoader_.main.playlists[this.media_.id]),this.mainPlaylistLoader_.sidxMapping_=HK(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.sidxMapping_),this.addSidxSegments_(this.media(),this.state,r=>{this.refreshMedia_(this.media().id)}))})}refreshMedia_(t){if(!t)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMain_&&this.handleMain_();const n=this.mainPlaylistLoader_.main.playlists,r=!this.media_||this.media_!==n[t];if(r?this.media_=n[t]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){const l=()=>{this.media().endList||(this.mediaUpdateTimeout=St.setTimeout(()=>{this.trigger("mediaupdatetimeout"),l()},YA(this.media(),!!r)))};l()}this.trigger("loadedplaylist")}addEventStreamToMetadataTrack_(t){if(t&&this.mainPlaylistLoader_.main.eventStream){const n=this.mainPlaylistLoader_.main.eventStream.map(r=>({cueTime:r.start,frames:[{data:r.messageData}]}));this.addMetadataToTextTrack("EventStream",n,this.mainPlaylistLoader_.main.duration)}}getKeyIdSet(t){if(t.contentProtection){const n=new Set;for(const r in t.contentProtection){const l=t.contentProtection[r].attributes["cenc:default_KID"];l&&n.add(l.replace(/-/g,"").toLowerCase())}return n}}}var qa={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30};const GK=u=>{const t=new Uint8Array(new ArrayBuffer(u.length));for(let n=0;n<u.length;n++)t[n]=u.charCodeAt(n);return t.buffer},BF=function(u){return u.on=u.addEventListener,u.off=u.removeEventListener,u},VK=function(u){try{return URL.createObjectURL(new Blob([u],{type:"application/javascript"}))}catch{const n=new BlobBuilder;return n.append(u),URL.createObjectURL(n.getBlob())}},zF=function(u){return function(){const t=VK(u),n=BF(new Worker(t));n.objURL=t;const r=n.terminate;return n.on=n.addEventListener,n.off=n.removeEventListener,n.terminate=function(){return URL.revokeObjectURL(t),r.call(this)},n}},jF=function(u){return`var browserWorkerPolyFill = ${BF.toString()};
browserWorkerPolyFill(self);
`+u},qF=function(u){return u.toString().replace(/^function.+?{/,"").slice(0,-1)},$K=jF(qF(function(){var u=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},t=function(){this.init=function(){var N={};this.on=function(H,ee){N[H]||(N[H]=[]),N[H]=N[H].concat(ee)},this.off=function(H,ee){var J;return N[H]?(J=N[H].indexOf(ee),N[H]=N[H].slice(),N[H].splice(J,1),J>-1):!1},this.trigger=function(H){var ee,J,be,Oe;if(ee=N[H],!!ee)if(arguments.length===2)for(be=ee.length,J=0;J<be;++J)ee[J].call(this,arguments[1]);else{for(Oe=[],J=arguments.length,J=1;J<arguments.length;++J)Oe.push(arguments[J]);for(be=ee.length,J=0;J<be;++J)ee[J].apply(this,Oe)}},this.dispose=function(){N={}}}};t.prototype.pipe=function(N){return this.on("data",function(H){N.push(H)}),this.on("done",function(H){N.flush(H)}),this.on("partialdone",function(H){N.partialFlush(H)}),this.on("endedtimeline",function(H){N.endTimeline(H)}),this.on("reset",function(H){N.reset(H)}),N},t.prototype.push=function(N){this.trigger("data",N)},t.prototype.flush=function(N){this.trigger("done",N)},t.prototype.partialFlush=function(N){this.trigger("partialdone",N)},t.prototype.endTimeline=function(N){this.trigger("endedtimeline",N)},t.prototype.reset=function(N){this.trigger("reset",N)};var n=t,r=Math.pow(2,32),l=function(N){var H=new DataView(N.buffer,N.byteOffset,N.byteLength),ee;return H.getBigUint64?(ee=H.getBigUint64(0),ee<Number.MAX_SAFE_INTEGER?Number(ee):ee):H.getUint32(0)*r+H.getUint32(4)},d={getUint64:l,MAX_UINT32:r},f=d.MAX_UINT32,p,m,y,b,_,A,w,T,k,U,Y,se,te,Re,Be,j,M,Z,K,x,ue,$e,xe,lt,et,Xe,ut,Dt,dt,Et,Rt,mn,Tn,Qe,Ze,at;(function(){var N;if(xe={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(N in xe)xe.hasOwnProperty(N)&&(xe[N]=[N.charCodeAt(0),N.charCodeAt(1),N.charCodeAt(2),N.charCodeAt(3)]);lt=new Uint8Array([105,115,111,109]),Xe=new Uint8Array([97,118,99,49]),et=new Uint8Array([0,0,0,1]),ut=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),Dt=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),dt={video:ut,audio:Dt},mn=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),Rt=new Uint8Array([0,0,0,0,0,0,0,0]),Tn=new Uint8Array([0,0,0,0,0,0,0,0]),Qe=Tn,Ze=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),at=Tn,Et=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),p=function(N){var H=[],ee=0,J,be,Oe;for(J=1;J<arguments.length;J++)H.push(arguments[J]);for(J=H.length;J--;)ee+=H[J].byteLength;for(be=new Uint8Array(ee+8),Oe=new DataView(be.buffer,be.byteOffset,be.byteLength),Oe.setUint32(0,be.byteLength),be.set(N,4),J=0,ee=8;J<H.length;J++)be.set(H[J],ee),ee+=H[J].byteLength;return be},m=function(){return p(xe.dinf,p(xe.dref,mn))},y=function(N){return p(xe.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,N.audioobjecttype<<3|N.samplingfrequencyindex>>>1,N.samplingfrequencyindex<<7|N.channelcount<<3,6,1,2]))},b=function(){return p(xe.ftyp,lt,et,lt,Xe)},j=function(N){return p(xe.hdlr,dt[N])},_=function(N){return p(xe.mdat,N)},Be=function(N){var H=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,N.duration>>>24&255,N.duration>>>16&255,N.duration>>>8&255,N.duration&255,85,196,0,0]);return N.samplerate&&(H[12]=N.samplerate>>>24&255,H[13]=N.samplerate>>>16&255,H[14]=N.samplerate>>>8&255,H[15]=N.samplerate&255),p(xe.mdhd,H)},Re=function(N){return p(xe.mdia,Be(N),j(N.type),w(N))},A=function(N){return p(xe.mfhd,new Uint8Array([0,0,0,0,(N&4278190080)>>24,(N&16711680)>>16,(N&65280)>>8,N&255]))},w=function(N){return p(xe.minf,N.type==="video"?p(xe.vmhd,Et):p(xe.smhd,Rt),m(),Z(N))},T=function(N,H){for(var ee=[],J=H.length;J--;)ee[J]=x(H[J]);return p.apply(null,[xe.moof,A(N)].concat(ee))},k=function(N){for(var H=N.length,ee=[];H--;)ee[H]=se(N[H]);return p.apply(null,[xe.moov,Y(4294967295)].concat(ee).concat(U(N)))},U=function(N){for(var H=N.length,ee=[];H--;)ee[H]=ue(N[H]);return p.apply(null,[xe.mvex].concat(ee))},Y=function(N){var H=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(N&4278190080)>>24,(N&16711680)>>16,(N&65280)>>8,N&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return p(xe.mvhd,H)},M=function(N){var H=N.samples||[],ee=new Uint8Array(4+H.length),J,be;for(be=0;be<H.length;be++)J=H[be].flags,ee[be+4]=J.dependsOn<<4|J.isDependedOn<<2|J.hasRedundancy;return p(xe.sdtp,ee)},Z=function(N){return p(xe.stbl,K(N),p(xe.stts,at),p(xe.stsc,Qe),p(xe.stsz,Ze),p(xe.stco,Tn))},function(){var N,H;K=function(ee){return p(xe.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),ee.type==="video"?N(ee):H(ee))},N=function(ee){var J=ee.sps||[],be=ee.pps||[],Oe=[],ct=[],pt,wt;for(pt=0;pt<J.length;pt++)Oe.push((J[pt].byteLength&65280)>>>8),Oe.push(J[pt].byteLength&255),Oe=Oe.concat(Array.prototype.slice.call(J[pt]));for(pt=0;pt<be.length;pt++)ct.push((be[pt].byteLength&65280)>>>8),ct.push(be[pt].byteLength&255),ct=ct.concat(Array.prototype.slice.call(be[pt]));if(wt=[xe.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(ee.width&65280)>>8,ee.width&255,(ee.height&65280)>>8,ee.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),p(xe.avcC,new Uint8Array([1,ee.profileIdc,ee.profileCompatibility,ee.levelIdc,255].concat([J.length],Oe,[be.length],ct))),p(xe.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],ee.sarRatio){var Ct=ee.sarRatio[0],$t=ee.sarRatio[1];wt.push(p(xe.pasp,new Uint8Array([(Ct&4278190080)>>24,(Ct&16711680)>>16,(Ct&65280)>>8,Ct&255,($t&4278190080)>>24,($t&16711680)>>16,($t&65280)>>8,$t&255])))}return p.apply(null,wt)},H=function(ee){return p(xe.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(ee.channelcount&65280)>>8,ee.channelcount&255,(ee.samplesize&65280)>>8,ee.samplesize&255,0,0,0,0,(ee.samplerate&65280)>>8,ee.samplerate&255,0,0]),y(ee))}}(),te=function(N){var H=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(N.id&4278190080)>>24,(N.id&16711680)>>16,(N.id&65280)>>8,N.id&255,0,0,0,0,(N.duration&4278190080)>>24,(N.duration&16711680)>>16,(N.duration&65280)>>8,N.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(N.width&65280)>>8,N.width&255,0,0,(N.height&65280)>>8,N.height&255,0,0]);return p(xe.tkhd,H)},x=function(N){var H,ee,J,be,Oe,ct,pt;return H=p(xe.tfhd,new Uint8Array([0,0,0,58,(N.id&4278190080)>>24,(N.id&16711680)>>16,(N.id&65280)>>8,N.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),ct=Math.floor(N.baseMediaDecodeTime/f),pt=Math.floor(N.baseMediaDecodeTime%f),ee=p(xe.tfdt,new Uint8Array([1,0,0,0,ct>>>24&255,ct>>>16&255,ct>>>8&255,ct&255,pt>>>24&255,pt>>>16&255,pt>>>8&255,pt&255])),Oe=92,N.type==="audio"?(J=$e(N,Oe),p(xe.traf,H,ee,J)):(be=M(N),J=$e(N,be.length+Oe),p(xe.traf,H,ee,J,be))},se=function(N){return N.duration=N.duration||4294967295,p(xe.trak,te(N),Re(N))},ue=function(N){var H=new Uint8Array([0,0,0,0,(N.id&4278190080)>>24,(N.id&16711680)>>16,(N.id&65280)>>8,N.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return N.type!=="video"&&(H[H.length-1]=0),p(xe.trex,H)},function(){var N,H,ee;ee=function(J,be){var Oe=0,ct=0,pt=0,wt=0;return J.length&&(J[0].duration!==void 0&&(Oe=1),J[0].size!==void 0&&(ct=2),J[0].flags!==void 0&&(pt=4),J[0].compositionTimeOffset!==void 0&&(wt=8)),[0,0,Oe|ct|pt|wt,1,(J.length&4278190080)>>>24,(J.length&16711680)>>>16,(J.length&65280)>>>8,J.length&255,(be&4278190080)>>>24,(be&16711680)>>>16,(be&65280)>>>8,be&255]},H=function(J,be){var Oe,ct,pt,wt,Ct,$t;for(wt=J.samples||[],be+=20+16*wt.length,pt=ee(wt,be),ct=new Uint8Array(pt.length+wt.length*16),ct.set(pt),Oe=pt.length,$t=0;$t<wt.length;$t++)Ct=wt[$t],ct[Oe++]=(Ct.duration&4278190080)>>>24,ct[Oe++]=(Ct.duration&16711680)>>>16,ct[Oe++]=(Ct.duration&65280)>>>8,ct[Oe++]=Ct.duration&255,ct[Oe++]=(Ct.size&4278190080)>>>24,ct[Oe++]=(Ct.size&16711680)>>>16,ct[Oe++]=(Ct.size&65280)>>>8,ct[Oe++]=Ct.size&255,ct[Oe++]=Ct.flags.isLeading<<2|Ct.flags.dependsOn,ct[Oe++]=Ct.flags.isDependedOn<<6|Ct.flags.hasRedundancy<<4|Ct.flags.paddingValue<<1|Ct.flags.isNonSyncSample,ct[Oe++]=Ct.flags.degradationPriority&61440,ct[Oe++]=Ct.flags.degradationPriority&15,ct[Oe++]=(Ct.compositionTimeOffset&4278190080)>>>24,ct[Oe++]=(Ct.compositionTimeOffset&16711680)>>>16,ct[Oe++]=(Ct.compositionTimeOffset&65280)>>>8,ct[Oe++]=Ct.compositionTimeOffset&255;return p(xe.trun,ct)},N=function(J,be){var Oe,ct,pt,wt,Ct,$t;for(wt=J.samples||[],be+=20+8*wt.length,pt=ee(wt,be),Oe=new Uint8Array(pt.length+wt.length*8),Oe.set(pt),ct=pt.length,$t=0;$t<wt.length;$t++)Ct=wt[$t],Oe[ct++]=(Ct.duration&4278190080)>>>24,Oe[ct++]=(Ct.duration&16711680)>>>16,Oe[ct++]=(Ct.duration&65280)>>>8,Oe[ct++]=Ct.duration&255,Oe[ct++]=(Ct.size&4278190080)>>>24,Oe[ct++]=(Ct.size&16711680)>>>16,Oe[ct++]=(Ct.size&65280)>>>8,Oe[ct++]=Ct.size&255;return p(xe.trun,Oe)},$e=function(J,be){return J.type==="audio"?N(J,be):H(J,be)}}();var nn={ftyp:b,mdat:_,moof:T,moov:k,initSegment:function(N){var H=b(),ee=k(N),J;return J=new Uint8Array(H.byteLength+ee.byteLength),J.set(H),J.set(ee,H.byteLength),J}},ce=function(N){var H,ee,J=[],be=[];for(be.byteLength=0,be.nalCount=0,be.duration=0,J.byteLength=0,H=0;H<N.length;H++)ee=N[H],ee.nalUnitType==="access_unit_delimiter_rbsp"?(J.length&&(J.duration=ee.dts-J.dts,be.byteLength+=J.byteLength,be.nalCount+=J.length,be.duration+=J.duration,be.push(J)),J=[ee],J.byteLength=ee.data.byteLength,J.pts=ee.pts,J.dts=ee.dts):(ee.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&(J.keyFrame=!0),J.duration=ee.dts-J.dts,J.byteLength+=ee.data.byteLength,J.push(ee));return be.length&&(!J.duration||J.duration<=0)&&(J.duration=be[be.length-1].duration),be.byteLength+=J.byteLength,be.nalCount+=J.length,be.duration+=J.duration,be.push(J),be},ge=function(N){var H,ee,J=[],be=[];for(J.byteLength=0,J.nalCount=0,J.duration=0,J.pts=N[0].pts,J.dts=N[0].dts,be.byteLength=0,be.nalCount=0,be.duration=0,be.pts=N[0].pts,be.dts=N[0].dts,H=0;H<N.length;H++)ee=N[H],ee.keyFrame?(J.length&&(be.push(J),be.byteLength+=J.byteLength,be.nalCount+=J.nalCount,be.duration+=J.duration),J=[ee],J.nalCount=ee.length,J.byteLength=ee.byteLength,J.pts=ee.pts,J.dts=ee.dts,J.duration=ee.duration):(J.duration+=ee.duration,J.nalCount+=ee.length,J.byteLength+=ee.byteLength,J.push(ee));return be.length&&J.duration<=0&&(J.duration=be[be.length-1].duration),be.byteLength+=J.byteLength,be.nalCount+=J.nalCount,be.duration+=J.duration,be.push(J),be},G=function(N){var H;return!N[0][0].keyFrame&&N.length>1&&(H=N.shift(),N.byteLength-=H.byteLength,N.nalCount-=H.nalCount,N[0][0].dts=H.dts,N[0][0].pts=H.pts,N[0][0].duration+=H.duration),N},ae=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},_e=function(N,H){var ee=ae();return ee.dataOffset=H,ee.compositionTimeOffset=N.pts-N.dts,ee.duration=N.duration,ee.size=4*N.length,ee.size+=N.byteLength,N.keyFrame&&(ee.flags.dependsOn=2,ee.flags.isNonSyncSample=0),ee},Ae=function(N,H){var ee,J,be,Oe,ct,pt=H||0,wt=[];for(ee=0;ee<N.length;ee++)for(Oe=N[ee],J=0;J<Oe.length;J++)ct=Oe[J],be=_e(ct,pt),pt+=be.size,wt.push(be);return wt},yt=function(N){var H,ee,J,be,Oe,ct,pt=0,wt=N.byteLength,Ct=N.nalCount,$t=wt+4*Ct,xn=new Uint8Array($t),hi=new DataView(xn.buffer);for(H=0;H<N.length;H++)for(be=N[H],ee=0;ee<be.length;ee++)for(Oe=be[ee],J=0;J<Oe.length;J++)ct=Oe[J],hi.setUint32(pt,ct.data.byteLength),pt+=4,xn.set(ct.data,pt),pt+=ct.data.byteLength;return xn},zt=function(N,H){var ee,J=H||0,be=[];return ee=_e(N,J),be.push(ee),be},vt=function(N){var H,ee,J=0,be=N.byteLength,Oe=N.length,ct=be+4*Oe,pt=new Uint8Array(ct),wt=new DataView(pt.buffer);for(H=0;H<N.length;H++)ee=N[H],wt.setUint32(J,ee.data.byteLength),J+=4,pt.set(ee.data,J),J+=ee.data.byteLength;return pt},Lt={groupNalsIntoFrames:ce,groupFramesIntoGops:ge,extendFirstKeyFrame:G,generateSampleTable:Ae,concatenateNalData:yt,generateSampleTableForFrame:zt,concatenateNalDataForFrame:vt},bt=[33,16,5,32,164,27],Mt=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],kt=function(N){for(var H=[];N--;)H.push(0);return H},Bt=function(N){return Object.keys(N).reduce(function(H,ee){return H[ee]=new Uint8Array(N[ee].reduce(function(J,be){return J.concat(be)},[])),H},{})},sn,ti=function(){if(!sn){var N={96e3:[bt,[227,64],kt(154),[56]],88200:[bt,[231],kt(170),[56]],64e3:[bt,[248,192],kt(240),[56]],48e3:[bt,[255,192],kt(268),[55,148,128],kt(54),[112]],44100:[bt,[255,192],kt(268),[55,163,128],kt(84),[112]],32e3:[bt,[255,192],kt(268),[55,234],kt(226),[112]],24e3:[bt,[255,192],kt(268),[55,255,128],kt(268),[111,112],kt(126),[224]],16e3:[bt,[255,192],kt(268),[55,255,128],kt(268),[111,255],kt(269),[223,108],kt(195),[1,192]],12e3:[Mt,kt(268),[3,127,248],kt(268),[6,255,240],kt(268),[13,255,224],kt(268),[27,253,128],kt(259),[56]],11025:[Mt,kt(268),[3,127,248],kt(268),[6,255,240],kt(268),[13,255,224],kt(268),[27,255,192],kt(268),[55,175,128],kt(108),[112]],8e3:[Mt,kt(268),[3,121,16],kt(47),[7]]};sn=Bt(N)}return sn},On=9e4,Vn,Sn,ni,dr,_r,bs,Zr;Vn=function(N){return N*On},Sn=function(N,H){return N*H},ni=function(N){return N/On},dr=function(N,H){return N/H},_r=function(N,H){return Vn(dr(N,H))},bs=function(N,H){return Sn(ni(N),H)},Zr=function(N,H,ee){return ni(ee?N:N-H)};var Zi={ONE_SECOND_IN_TS:On,secondsToVideoTs:Vn,secondsToAudioTs:Sn,videoTsToSeconds:ni,audioTsToSeconds:dr,audioTsToVideoTs:_r,videoTsToAudioTs:bs,metadataTsToSeconds:Zr},dn=ti,Mn=Zi,An=function(N){var H,ee,J=0;for(H=0;H<N.length;H++)ee=N[H],J+=ee.data.byteLength;return J},on=function(N,H,ee,J){var be,Oe=0,ct=0,pt=0,wt=0,Ct,$t,xn;if(H.length&&(be=Mn.audioTsToVideoTs(N.baseMediaDecodeTime,N.samplerate),Oe=Math.ceil(Mn.ONE_SECOND_IN_TS/(N.samplerate/1024)),ee&&J&&(ct=be-Math.max(ee,J),pt=Math.floor(ct/Oe),wt=pt*Oe),!(pt<1||wt>Mn.ONE_SECOND_IN_TS/2))){for(Ct=dn()[N.samplerate],Ct||(Ct=H[0].data),$t=0;$t<pt;$t++)xn=H[0],H.splice(0,0,{data:Ct,dts:xn.dts-Oe,pts:xn.pts-Oe});return N.baseMediaDecodeTime-=Math.floor(Mn.videoTsToAudioTs(wt,N.samplerate)),wt}},Un=function(N,H,ee){return H.minSegmentDts>=ee?N:(H.minSegmentDts=1/0,N.filter(function(J){return J.dts>=ee?(H.minSegmentDts=Math.min(H.minSegmentDts,J.dts),H.minSegmentPts=H.minSegmentDts,!0):!1}))},vn=function(N){var H,ee,J=[];for(H=0;H<N.length;H++)ee=N[H],J.push({size:ee.data.byteLength,duration:1024});return J},Hn=function(N){var H,ee,J=0,be=new Uint8Array(An(N));for(H=0;H<N.length;H++)ee=N[H],be.set(ee.data,J),J+=ee.data.byteLength;return be},ei={prefixWithSilence:on,trimAdtsFramesByEarliestDts:Un,generateSampleTable:vn,concatenateFrameData:Hn},wn=Zi.ONE_SECOND_IN_TS,Ne=function(N,H){typeof H.pts=="number"&&(N.timelineStartInfo.pts===void 0&&(N.timelineStartInfo.pts=H.pts),N.minSegmentPts===void 0?N.minSegmentPts=H.pts:N.minSegmentPts=Math.min(N.minSegmentPts,H.pts),N.maxSegmentPts===void 0?N.maxSegmentPts=H.pts:N.maxSegmentPts=Math.max(N.maxSegmentPts,H.pts)),typeof H.dts=="number"&&(N.timelineStartInfo.dts===void 0&&(N.timelineStartInfo.dts=H.dts),N.minSegmentDts===void 0?N.minSegmentDts=H.dts:N.minSegmentDts=Math.min(N.minSegmentDts,H.dts),N.maxSegmentDts===void 0?N.maxSegmentDts=H.dts:N.maxSegmentDts=Math.max(N.maxSegmentDts,H.dts))},Ke=function(N){delete N.minSegmentDts,delete N.maxSegmentDts,delete N.minSegmentPts,delete N.maxSegmentPts},ft=function(N,H){var ee,J,be=N.minSegmentDts;return H||(be-=N.timelineStartInfo.dts),ee=N.timelineStartInfo.baseMediaDecodeTime,ee+=be,ee=Math.max(0,ee),N.type==="audio"&&(J=N.samplerate/wn,ee*=J,ee=Math.floor(ee)),ee},At={clearDtsInfo:Ke,calculateTrackBaseMediaDecodeTime:ft,collectDtsInfo:Ne},un=4,Qn=128,ai=function(N){for(var H=0,ee={payloadType:-1,payloadSize:0},J=0,be=0;H<N.byteLength&&N[H]!==Qn;){for(;N[H]===255;)J+=255,H++;for(J+=N[H++];N[H]===255;)be+=255,H++;if(be+=N[H++],!ee.payload&&J===un){var Oe=String.fromCharCode(N[H+3],N[H+4],N[H+5],N[H+6]);if(Oe==="GA94"){ee.payloadType=J,ee.payloadSize=be,ee.payload=N.subarray(H,H+be);break}else ee.payload=void 0}H+=be,J=0,be=0}return ee},vi=function(N){return N.payload[0]!==181||(N.payload[1]<<8|N.payload[2])!==49||String.fromCharCode(N.payload[3],N.payload[4],N.payload[5],N.payload[6])!=="GA94"||N.payload[7]!==3?null:N.payload.subarray(8,N.payload.length-1)},Xi=function(N,H){var ee=[],J,be,Oe,ct;if(!(H[0]&64))return ee;for(be=H[0]&31,J=0;J<be;J++)Oe=J*3,ct={type:H[Oe+2]&3,pts:N},H[Oe+2]&4&&(ct.ccData=H[Oe+3]<<8|H[Oe+4],ee.push(ct));return ee},si=function(N){for(var H=N.byteLength,ee=[],J=1,be,Oe;J<H-2;)N[J]===0&&N[J+1]===0&&N[J+2]===3?(ee.push(J+2),J+=2):J++;if(ee.length===0)return N;be=H-ee.length,Oe=new Uint8Array(be);var ct=0;for(J=0;J<be;ct++,J++)ct===ee[0]&&(ct++,ee.shift()),Oe[J]=N[ct];return Oe},cn={parseSei:ai,parseUserData:vi,parseCaptionPackets:Xi,discardEmulationPreventionBytes:si,USER_DATA_REGISTERED_ITU_T_T35:un},Wt=n,Ln=cn,Nn=function(N){N=N||{},Nn.prototype.init.call(this),this.parse708captions_=typeof N.parse708captions=="boolean"?N.parse708captions:!0,this.captionPackets_=[],this.ccStreams_=[new Tr(0,0),new Tr(0,1),new Tr(1,0),new Tr(1,1)],this.parse708captions_&&(this.cc708Stream_=new it({captionServices:N.captionServices})),this.reset(),this.ccStreams_.forEach(function(H){H.on("data",this.trigger.bind(this,"data")),H.on("partialdone",this.trigger.bind(this,"partialdone")),H.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};Nn.prototype=new Wt,Nn.prototype.push=function(N){var H,ee,J;if(N.nalUnitType==="sei_rbsp"&&(H=Ln.parseSei(N.escapedRBSP),!!H.payload&&H.payloadType===Ln.USER_DATA_REGISTERED_ITU_T_T35&&(ee=Ln.parseUserData(H),!!ee))){if(N.dts<this.latestDts_){this.ignoreNextEqualDts_=!0;return}else if(N.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1);return}J=Ln.parseCaptionPackets(N.pts,ee),this.captionPackets_=this.captionPackets_.concat(J),this.latestDts_!==N.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=N.dts}},Nn.prototype.flushCCStreams=function(N){this.ccStreams_.forEach(function(H){return N==="flush"?H.flush():H.partialFlush()},this)},Nn.prototype.flushStream=function(N){if(!this.captionPackets_.length){this.flushCCStreams(N);return}this.captionPackets_.forEach(function(H,ee){H.presortIndex=ee}),this.captionPackets_.sort(function(H,ee){return H.pts===ee.pts?H.presortIndex-ee.presortIndex:H.pts-ee.pts}),this.captionPackets_.forEach(function(H){H.type<2?this.dispatchCea608Packet(H):this.dispatchCea708Packet(H)},this),this.captionPackets_.length=0,this.flushCCStreams(N)},Nn.prototype.flush=function(){return this.flushStream("flush")},Nn.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Nn.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(N){N.reset()})},Nn.prototype.dispatchCea608Packet=function(N){this.setsTextOrXDSActive(N)?this.activeCea608Channel_[N.type]=null:this.setsChannel1Active(N)?this.activeCea608Channel_[N.type]=0:this.setsChannel2Active(N)&&(this.activeCea608Channel_[N.type]=1),this.activeCea608Channel_[N.type]!==null&&this.ccStreams_[(N.type<<1)+this.activeCea608Channel_[N.type]].push(N)},Nn.prototype.setsChannel1Active=function(N){return(N.ccData&30720)===4096},Nn.prototype.setsChannel2Active=function(N){return(N.ccData&30720)===6144},Nn.prototype.setsTextOrXDSActive=function(N){return(N.ccData&28928)===256||(N.ccData&30974)===4138||(N.ccData&30974)===6186},Nn.prototype.dispatchCea708Packet=function(N){this.parse708captions_&&this.cc708Stream_.push(N)};var fi={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},jn=function(N){var H=fi[N]||N;return N&4096&&N===H?"":String.fromCharCode(H)},cr=function(N){return 32<=N&&N<=127||160<=N&&N<=255},Ni=function(N){this.windowNum=N,this.reset()};Ni.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},Ni.prototype.getText=function(){return this.rows.join(`
`)},Ni.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},Ni.prototype.newLine=function(N){for(this.rows.length>=this.virtualRowCount&&typeof this.beforeRowOverflow=="function"&&this.beforeRowOverflow(N),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},Ni.prototype.isEmpty=function(){return this.rows.length===0?!0:this.rows.length===1?this.rows[0]==="":!1},Ni.prototype.addText=function(N){this.rows[this.rowIdx]+=N},Ni.prototype.backspace=function(){if(!this.isEmpty()){var N=this.rows[this.rowIdx];this.rows[this.rowIdx]=N.substr(0,N.length-1)}};var Ir=function(N,H,ee){this.serviceNum=N,this.text="",this.currentWindow=new Ni(-1),this.windows=[],this.stream=ee,typeof H=="string"&&this.createTextDecoder(H)};Ir.prototype.init=function(N,H){this.startPts=N;for(var ee=0;ee<8;ee++)this.windows[ee]=new Ni(ee),typeof H=="function"&&(this.windows[ee].beforeRowOverflow=H)},Ir.prototype.setCurrentWindow=function(N){this.currentWindow=this.windows[N]},Ir.prototype.createTextDecoder=function(N){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(N)}catch(H){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+N+" encoding. "+H})}};var it=function(N){N=N||{},it.prototype.init.call(this);var H=this,ee=N.captionServices||{},J={},be;Object.keys(ee).forEach(Oe=>{be=ee[Oe],/^SERVICE/.test(Oe)&&(J[Oe]=be.encoding)}),this.serviceEncodings=J,this.current708Packet=null,this.services={},this.push=function(Oe){Oe.type===3?(H.new708Packet(),H.add708Bytes(Oe)):(H.current708Packet===null&&H.new708Packet(),H.add708Bytes(Oe))}};it.prototype=new Wt,it.prototype.new708Packet=function(){this.current708Packet!==null&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},it.prototype.add708Bytes=function(N){var H=N.ccData,ee=H>>>8,J=H&255;this.current708Packet.ptsVals.push(N.pts),this.current708Packet.data.push(ee),this.current708Packet.data.push(J)},it.prototype.push708Packet=function(){var N=this.current708Packet,H=N.data,ee=null,J=null,be=0,Oe=H[be++];for(N.seq=Oe>>6,N.sizeCode=Oe&63;be<H.length;be++)Oe=H[be++],ee=Oe>>5,J=Oe&31,ee===7&&J>0&&(Oe=H[be++],ee=Oe),this.pushServiceBlock(ee,be,J),J>0&&(be+=J-1)},it.prototype.pushServiceBlock=function(N,H,ee){var J,be=H,Oe=this.current708Packet.data,ct=this.services[N];for(ct||(ct=this.initService(N,be));be<H+ee&&be<Oe.length;be++)J=Oe[be],cr(J)?be=this.handleText(be,ct):J===24?be=this.multiByteCharacter(be,ct):J===16?be=this.extendedCommands(be,ct):128<=J&&J<=135?be=this.setCurrentWindow(be,ct):152<=J&&J<=159?be=this.defineWindow(be,ct):J===136?be=this.clearWindows(be,ct):J===140?be=this.deleteWindows(be,ct):J===137?be=this.displayWindows(be,ct):J===138?be=this.hideWindows(be,ct):J===139?be=this.toggleWindows(be,ct):J===151?be=this.setWindowAttributes(be,ct):J===144?be=this.setPenAttributes(be,ct):J===145?be=this.setPenColor(be,ct):J===146?be=this.setPenLocation(be,ct):J===143?ct=this.reset(be,ct):J===8?ct.currentWindow.backspace():J===12?ct.currentWindow.clearText():J===13?ct.currentWindow.pendingNewLine=!0:J===14?ct.currentWindow.clearText():J===141&&be++},it.prototype.extendedCommands=function(N,H){var ee=this.current708Packet.data,J=ee[++N];return cr(J)&&(N=this.handleText(N,H,{isExtended:!0})),N},it.prototype.getPts=function(N){return this.current708Packet.ptsVals[Math.floor(N/2)]},it.prototype.initService=function(N,H){var J="SERVICE"+N,ee=this,J,be;return J in this.serviceEncodings&&(be=this.serviceEncodings[J]),this.services[N]=new Ir(N,be,ee),this.services[N].init(this.getPts(H),function(Oe){ee.flushDisplayed(Oe,ee.services[N])}),this.services[N]},it.prototype.handleText=function(N,H,ee){var J=ee&&ee.isExtended,be=ee&&ee.isMultiByte,Oe=this.current708Packet.data,ct=J?4096:0,pt=Oe[N],wt=Oe[N+1],Ct=H.currentWindow,$t,xn;function hi(Pn){return Pn.map(Oi=>("0"+(Oi&255).toString(16)).slice(-2)).join("")}if(be?(xn=[pt,wt],N++):xn=[pt],H.textDecoder_&&!J)$t=H.textDecoder_.decode(new Uint8Array(xn));else if(be){const Pn=hi(xn);$t=String.fromCharCode(parseInt(Pn,16))}else $t=jn(ct|pt);return Ct.pendingNewLine&&!Ct.isEmpty()&&Ct.newLine(this.getPts(N)),Ct.pendingNewLine=!1,Ct.addText($t),N},it.prototype.multiByteCharacter=function(N,H){var ee=this.current708Packet.data,J=ee[N+1],be=ee[N+2];return cr(J)&&cr(be)&&(N=this.handleText(++N,H,{isMultiByte:!0})),N},it.prototype.setCurrentWindow=function(N,H){var ee=this.current708Packet.data,J=ee[N],be=J&7;return H.setCurrentWindow(be),N},it.prototype.defineWindow=function(N,H){var ee=this.current708Packet.data,J=ee[N],be=J&7;H.setCurrentWindow(be);var Oe=H.currentWindow;return J=ee[++N],Oe.visible=(J&32)>>5,Oe.rowLock=(J&16)>>4,Oe.columnLock=(J&8)>>3,Oe.priority=J&7,J=ee[++N],Oe.relativePositioning=(J&128)>>7,Oe.anchorVertical=J&127,J=ee[++N],Oe.anchorHorizontal=J,J=ee[++N],Oe.anchorPoint=(J&240)>>4,Oe.rowCount=J&15,J=ee[++N],Oe.columnCount=J&63,J=ee[++N],Oe.windowStyle=(J&56)>>3,Oe.penStyle=J&7,Oe.virtualRowCount=Oe.rowCount+1,N},it.prototype.setWindowAttributes=function(N,H){var ee=this.current708Packet.data,J=ee[N],be=H.currentWindow.winAttr;return J=ee[++N],be.fillOpacity=(J&192)>>6,be.fillRed=(J&48)>>4,be.fillGreen=(J&12)>>2,be.fillBlue=J&3,J=ee[++N],be.borderType=(J&192)>>6,be.borderRed=(J&48)>>4,be.borderGreen=(J&12)>>2,be.borderBlue=J&3,J=ee[++N],be.borderType+=(J&128)>>5,be.wordWrap=(J&64)>>6,be.printDirection=(J&48)>>4,be.scrollDirection=(J&12)>>2,be.justify=J&3,J=ee[++N],be.effectSpeed=(J&240)>>4,be.effectDirection=(J&12)>>2,be.displayEffect=J&3,N},it.prototype.flushDisplayed=function(N,H){for(var ee=[],J=0;J<8;J++)H.windows[J].visible&&!H.windows[J].isEmpty()&&ee.push(H.windows[J].getText());H.endPts=N,H.text=ee.join(`

`),this.pushCaption(H),H.startPts=N},it.prototype.pushCaption=function(N){N.text!==""&&(this.trigger("data",{startPts:N.startPts,endPts:N.endPts,text:N.text,stream:"cc708_"+N.serviceNum}),N.text="",N.startPts=N.endPts)},it.prototype.displayWindows=function(N,H){var ee=this.current708Packet.data,J=ee[++N],be=this.getPts(N);this.flushDisplayed(be,H);for(var Oe=0;Oe<8;Oe++)J&1<<Oe&&(H.windows[Oe].visible=1);return N},it.prototype.hideWindows=function(N,H){var ee=this.current708Packet.data,J=ee[++N],be=this.getPts(N);this.flushDisplayed(be,H);for(var Oe=0;Oe<8;Oe++)J&1<<Oe&&(H.windows[Oe].visible=0);return N},it.prototype.toggleWindows=function(N,H){var ee=this.current708Packet.data,J=ee[++N],be=this.getPts(N);this.flushDisplayed(be,H);for(var Oe=0;Oe<8;Oe++)J&1<<Oe&&(H.windows[Oe].visible^=1);return N},it.prototype.clearWindows=function(N,H){var ee=this.current708Packet.data,J=ee[++N],be=this.getPts(N);this.flushDisplayed(be,H);for(var Oe=0;Oe<8;Oe++)J&1<<Oe&&H.windows[Oe].clearText();return N},it.prototype.deleteWindows=function(N,H){var ee=this.current708Packet.data,J=ee[++N],be=this.getPts(N);this.flushDisplayed(be,H);for(var Oe=0;Oe<8;Oe++)J&1<<Oe&&H.windows[Oe].reset();return N},it.prototype.setPenAttributes=function(N,H){var ee=this.current708Packet.data,J=ee[N],be=H.currentWindow.penAttr;return J=ee[++N],be.textTag=(J&240)>>4,be.offset=(J&12)>>2,be.penSize=J&3,J=ee[++N],be.italics=(J&128)>>7,be.underline=(J&64)>>6,be.edgeType=(J&56)>>3,be.fontStyle=J&7,N},it.prototype.setPenColor=function(N,H){var ee=this.current708Packet.data,J=ee[N],be=H.currentWindow.penColor;return J=ee[++N],be.fgOpacity=(J&192)>>6,be.fgRed=(J&48)>>4,be.fgGreen=(J&12)>>2,be.fgBlue=J&3,J=ee[++N],be.bgOpacity=(J&192)>>6,be.bgRed=(J&48)>>4,be.bgGreen=(J&12)>>2,be.bgBlue=J&3,J=ee[++N],be.edgeRed=(J&48)>>4,be.edgeGreen=(J&12)>>2,be.edgeBlue=J&3,N},it.prototype.setPenLocation=function(N,H){var ee=this.current708Packet.data,J=ee[N],be=H.currentWindow.penLoc;return H.currentWindow.pendingNewLine=!0,J=ee[++N],be.row=J&15,J=ee[++N],be.column=J&63,N},it.prototype.reset=function(N,H){var ee=this.getPts(N);return this.flushDisplayed(ee,H),this.initService(H.serviceNum,N)};var Br={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Ws=function(N){return N===null?"":(N=Br[N]||N,String.fromCharCode(N))},Xs=14,Po=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],es=function(){for(var N=[],H=Xs+1;H--;)N.push({text:"",indent:0,offset:0});return N},Tr=function(N,H){Tr.prototype.init.call(this),this.field_=N||0,this.dataChannel_=H||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(ee){var J,be,Oe,ct,pt;if(J=ee.ccData&32639,J===this.lastControlCode_){this.lastControlCode_=null;return}if((J&61440)===4096?this.lastControlCode_=J:J!==this.PADDING_&&(this.lastControlCode_=null),Oe=J>>>8,ct=J&255,J!==this.PADDING_)if(J===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(J===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(ee.pts),this.flushDisplayed(ee.pts),be=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=be,this.startPts_=ee.pts;else if(J===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(ee.pts);else if(J===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(ee.pts);else if(J===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(ee.pts);else if(J===this.CARRIAGE_RETURN_)this.clearFormatting(ee.pts),this.flushDisplayed(ee.pts),this.shiftRowsUp_(),this.startPts_=ee.pts;else if(J===this.BACKSPACE_)this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1);else if(J===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(ee.pts),this.displayed_=es();else if(J===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=es();else if(J===this.RESUME_DIRECT_CAPTIONING_)this.mode_!=="paintOn"&&(this.flushDisplayed(ee.pts),this.displayed_=es()),this.mode_="paintOn",this.startPts_=ee.pts;else if(this.isSpecialCharacter(Oe,ct))Oe=(Oe&3)<<8,pt=Ws(Oe|ct),this[this.mode_](ee.pts,pt),this.column_++;else if(this.isExtCharacter(Oe,ct))this.mode_==="popOn"?this.nonDisplayed_[this.row_].text=this.nonDisplayed_[this.row_].text.slice(0,-1):this.displayed_[this.row_].text=this.displayed_[this.row_].text.slice(0,-1),Oe=(Oe&3)<<8,pt=Ws(Oe|ct),this[this.mode_](ee.pts,pt),this.column_++;else if(this.isMidRowCode(Oe,ct))this.clearFormatting(ee.pts),this[this.mode_](ee.pts," "),this.column_++,(ct&14)===14&&this.addFormatting(ee.pts,["i"]),(ct&1)===1&&this.addFormatting(ee.pts,["u"]);else if(this.isOffsetControlCode(Oe,ct)){const Ct=ct&3;this.nonDisplayed_[this.row_].offset=Ct,this.column_+=Ct}else if(this.isPAC(Oe,ct)){var wt=Po.indexOf(J&7968);if(this.mode_==="rollUp"&&(wt-this.rollUpRows_+1<0&&(wt=this.rollUpRows_-1),this.setRollUp(ee.pts,wt)),wt!==this.row_&&wt>=0&&wt<=14&&(this.clearFormatting(ee.pts),this.row_=wt),ct&1&&this.formatting_.indexOf("u")===-1&&this.addFormatting(ee.pts,["u"]),(J&16)===16){const Ct=(J&14)>>1;this.column_=Ct*4,this.nonDisplayed_[this.row_].indent+=Ct}this.isColorPAC(ct)&&(ct&14)===14&&this.addFormatting(ee.pts,["i"])}else this.isNormalChar(Oe)&&(ct===0&&(ct=null),pt=Ws(Oe),pt+=Ws(ct),this[this.mode_](ee.pts,pt),this.column_+=pt.length)}};Tr.prototype=new Wt,Tr.prototype.flushDisplayed=function(N){const H=J=>{this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+J+"."})},ee=[];this.displayed_.forEach((J,be)=>{if(J&&J.text&&J.text.length){try{J.text=J.text.trim()}catch{H(be)}J.text.length&&ee.push({text:J.text,line:be+1,position:10+Math.min(70,J.indent*10)+J.offset*2.5})}else J==null&&H(be)}),ee.length&&this.trigger("data",{startPts:this.startPts_,endPts:N,content:ee,stream:this.name_})},Tr.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=es(),this.nonDisplayed_=es(),this.lastControlCode_=null,this.column_=0,this.row_=Xs,this.rollUpRows_=2,this.formatting_=[]},Tr.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=this.CONTROL_|32,this.END_OF_CAPTION_=this.CONTROL_|47,this.ROLL_UP_2_ROWS_=this.CONTROL_|37,this.ROLL_UP_3_ROWS_=this.CONTROL_|38,this.ROLL_UP_4_ROWS_=this.CONTROL_|39,this.CARRIAGE_RETURN_=this.CONTROL_|45,this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41,this.BACKSPACE_=this.CONTROL_|33,this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44,this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46},Tr.prototype.isSpecialCharacter=function(N,H){return N===this.EXT_&&H>=48&&H<=63},Tr.prototype.isExtCharacter=function(N,H){return(N===this.EXT_+1||N===this.EXT_+2)&&H>=32&&H<=63},Tr.prototype.isMidRowCode=function(N,H){return N===this.EXT_&&H>=32&&H<=47},Tr.prototype.isOffsetControlCode=function(N,H){return N===this.OFFSET_&&H>=33&&H<=35},Tr.prototype.isPAC=function(N,H){return N>=this.BASE_&&N<this.BASE_+8&&H>=64&&H<=127},Tr.prototype.isColorPAC=function(N){return N>=64&&N<=79||N>=96&&N<=127},Tr.prototype.isNormalChar=function(N){return N>=32&&N<=127},Tr.prototype.setRollUp=function(N,H){if(this.mode_!=="rollUp"&&(this.row_=Xs,this.mode_="rollUp",this.flushDisplayed(N),this.nonDisplayed_=es(),this.displayed_=es()),H!==void 0&&H!==this.row_)for(var ee=0;ee<this.rollUpRows_;ee++)this.displayed_[H-ee]=this.displayed_[this.row_-ee],this.displayed_[this.row_-ee]={text:"",indent:0,offset:0};H===void 0&&(H=this.row_),this.topRow_=H-this.rollUpRows_+1},Tr.prototype.addFormatting=function(N,H){this.formatting_=this.formatting_.concat(H);var ee=H.reduce(function(J,be){return J+"<"+be+">"},"");this[this.mode_](N,ee)},Tr.prototype.clearFormatting=function(N){if(this.formatting_.length){var H=this.formatting_.reverse().reduce(function(ee,J){return ee+"</"+J+">"},"");this.formatting_=[],this[this.mode_](N,H)}},Tr.prototype.popOn=function(N,H){var ee=this.nonDisplayed_[this.row_].text;ee+=H,this.nonDisplayed_[this.row_].text=ee},Tr.prototype.rollUp=function(N,H){var ee=this.displayed_[this.row_].text;ee+=H,this.displayed_[this.row_].text=ee},Tr.prototype.shiftRowsUp_=function(){var N;for(N=0;N<this.topRow_;N++)this.displayed_[N]={text:"",indent:0,offset:0};for(N=this.row_+1;N<Xs+1;N++)this.displayed_[N]={text:"",indent:0,offset:0};for(N=this.topRow_;N<this.row_;N++)this.displayed_[N]=this.displayed_[N+1];this.displayed_[this.row_]={text:"",indent:0,offset:0}},Tr.prototype.paintOn=function(N,H){var ee=this.displayed_[this.row_].text;ee+=H,this.displayed_[this.row_].text=ee};var ia={CaptionStream:Nn,Cea608Stream:Tr,Cea708Stream:it},Da={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Li=n,Ya=8589934592,nu=4294967296,el="shared",ca=function(N,H){var ee=1;for(N>H&&(ee=-1);Math.abs(H-N)>nu;)N+=ee*Ya;return N},In=function(N){var H,ee;In.prototype.init.call(this),this.type_=N||el,this.push=function(J){if(J.type==="metadata"){this.trigger("data",J);return}this.type_!==el&&J.type!==this.type_||(ee===void 0&&(ee=J.dts),J.dts=ca(J.dts,ee),J.pts=ca(J.pts,ee),H=J.dts,this.trigger("data",J))},this.flush=function(){ee=H,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){ee=void 0,H=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};In.prototype=new Li;var ii={TimestampRolloverStream:In,handleRollover:ca},Si=(N,H,ee)=>{if(!N)return-1;for(var J=ee;J<N.length;J++)if(N[J]===H)return J;return-1},hr={typedArrayIndexOf:Si},Bi=hr.typedArrayIndexOf,ms={Utf8:3},er=function(N,H,ee){var J,be="";for(J=H;J<ee;J++)be+="%"+("00"+N[J].toString(16)).slice(-2);return be},sr=function(N,H,ee){return decodeURIComponent(er(N,H,ee))},Qi=function(N,H,ee){return unescape(er(N,H,ee))},ur=function(N){return N[0]<<21|N[1]<<14|N[2]<<7|N[3]},Ur={APIC:function(N){var H=1,ee,J,be="-->";N.data[0]===ms.Utf8&&(ee=Bi(N.data,0,H),!(ee<0)&&(N.mimeType=Qi(N.data,H,ee),H=ee+1,N.pictureType=N.data[H],H++,J=Bi(N.data,0,H),!(J<0)&&(N.description=sr(N.data,H,J),H=J+1,N.mimeType===be?N.url=Qi(N.data,H,N.data.length):N.pictureData=N.data.subarray(H,N.data.length))))},"T*":function(N){N.data[0]===ms.Utf8&&(N.value=sr(N.data,1,N.data.length).replace(/\0*$/,""),N.values=N.value.split("\0"))},TXXX:function(N){var H;N.data[0]===ms.Utf8&&(H=Bi(N.data,0,1),H!==-1&&(N.description=sr(N.data,1,H),N.value=sr(N.data,H+1,N.data.length).replace(/\0*$/,""),N.data=N.value))},"W*":function(N){N.url=Qi(N.data,0,N.data.length).replace(/\0.*$/,"")},WXXX:function(N){var H;N.data[0]===ms.Utf8&&(H=Bi(N.data,0,1),H!==-1&&(N.description=sr(N.data,1,H),N.url=Qi(N.data,H+1,N.data.length).replace(/\0.*$/,"")))},PRIV:function(N){var H;for(H=0;H<N.data.length;H++)if(N.data[H]===0){N.owner=Qi(N.data,0,H);break}N.privateData=N.data.subarray(H+1),N.data=N.privateData}},fo=function(N){var H,ee,J=10,be=0,Oe=[];if(!(N.length<10||N[0]!==73||N[1]!==68||N[2]!==51)){be=ur(N.subarray(6,10)),be+=10;var ct=N[5]&64;ct&&(J+=4,J+=ur(N.subarray(10,14)),be-=ur(N.subarray(16,20)));do{if(H=ur(N.subarray(J+4,J+8)),H<1)break;ee=String.fromCharCode(N[J],N[J+1],N[J+2],N[J+3]);var pt={id:ee,data:N.subarray(J+10,J+H+10)};pt.key=pt.id,Ur[pt.id]?Ur[pt.id](pt):pt.id[0]==="T"?Ur["T*"](pt):pt.id[0]==="W"&&Ur["W*"](pt),Oe.push(pt),J+=10,J+=H}while(J<be);return Oe}},Ms={parseId3Frames:fo,parseSyncSafeInteger:ur,frameParsers:Ur},Mo=n,Qs=Da,Cr=Ms,Ra;Ra=function(N){var H={descriptor:N&&N.descriptor},ee=0,J=[],be=0,Oe;if(Ra.prototype.init.call(this),this.dispatchType=Qs.METADATA_STREAM_TYPE.toString(16),H.descriptor)for(Oe=0;Oe<H.descriptor.length;Oe++)this.dispatchType+=("00"+H.descriptor[Oe].toString(16)).slice(-2);this.push=function(ct){var pt,wt,Ct,$t,xn,hi;if(ct.type==="timed-metadata"){if(ct.dataAlignmentIndicator&&(be=0,J.length=0),J.length===0&&(ct.data.length<10||ct.data[0]!==73||ct.data[1]!==68||ct.data[2]!==51)){this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});return}if(J.push(ct),be+=ct.data.byteLength,J.length===1&&(ee=Cr.parseSyncSafeInteger(ct.data.subarray(6,10)),ee+=10),!(be<ee)){for(pt={data:new Uint8Array(ee),frames:[],pts:J[0].pts,dts:J[0].dts},xn=0;xn<ee;)pt.data.set(J[0].data.subarray(0,ee-xn),xn),xn+=J[0].data.byteLength,be-=J[0].data.byteLength,J.shift();wt=10,pt.data[5]&64&&(wt+=4,wt+=Cr.parseSyncSafeInteger(pt.data.subarray(10,14)),ee-=Cr.parseSyncSafeInteger(pt.data.subarray(16,20)));do{if(Ct=Cr.parseSyncSafeInteger(pt.data.subarray(wt+4,wt+8)),Ct<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}if(hi=String.fromCharCode(pt.data[wt],pt.data[wt+1],pt.data[wt+2],pt.data[wt+3]),$t={id:hi,data:pt.data.subarray(wt+10,wt+Ct+10)},$t.key=$t.id,Cr.frameParsers[$t.id]?Cr.frameParsers[$t.id]($t):$t.id[0]==="T"?Cr.frameParsers["T*"]($t):$t.id[0]==="W"&&Cr.frameParsers["W*"]($t),$t.owner==="com.apple.streaming.transportStreamTimestamp"){var Pn=$t.data,Oi=(Pn[3]&1)<<30|Pn[4]<<22|Pn[5]<<14|Pn[6]<<6|Pn[7]>>>2;Oi*=4,Oi+=Pn[7]&3,$t.timeStamp=Oi,pt.pts===void 0&&pt.dts===void 0&&(pt.pts=$t.timeStamp,pt.dts=$t.timeStamp),this.trigger("timestamp",$t)}pt.frames.push($t),wt+=10,wt+=Ct}while(wt<ee);this.trigger("data",pt)}}}},Ra.prototype=new Mo;var Zu=Ra,ec=n,La=ia,Js=Da,tc=ii.TimestampRolloverStream,Ns,Pa,Er,ra=188,da=71;Ns=function(){var N=new Uint8Array(ra),H=0;Ns.prototype.init.call(this),this.push=function(ee){var J=0,be=ra,Oe;for(H?(Oe=new Uint8Array(ee.byteLength+H),Oe.set(N.subarray(0,H)),Oe.set(ee,H),H=0):Oe=ee;be<Oe.byteLength;){if(Oe[J]===da&&Oe[be]===da){this.trigger("data",Oe.subarray(J,be)),J+=ra,be+=ra;continue}J++,be++}J<Oe.byteLength&&(N.set(Oe.subarray(J),0),H=Oe.byteLength-J)},this.flush=function(){H===ra&&N[0]===da&&(this.trigger("data",N),H=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){H=0,this.trigger("reset")}},Ns.prototype=new ec,Pa=function(){var N,H,ee,J;Pa.prototype.init.call(this),J=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,N=function(be,Oe){var ct=0;Oe.payloadUnitStartIndicator&&(ct+=be[ct]+1),Oe.type==="pat"?H(be.subarray(ct),Oe):ee(be.subarray(ct),Oe)},H=function(be,Oe){Oe.section_number=be[7],Oe.last_section_number=be[8],J.pmtPid=(be[10]&31)<<8|be[11],Oe.pmtPid=J.pmtPid},ee=function(be,Oe){var ct,pt,wt,Ct;if(be[5]&1){for(J.programMapTable={video:null,audio:null,"timed-metadata":{}},ct=(be[1]&15)<<8|be[2],pt=3+ct-4,wt=(be[10]&15)<<8|be[11],Ct=12+wt;Ct<pt;){var $t=be[Ct],xn=(be[Ct+1]&31)<<8|be[Ct+2];$t===Js.H264_STREAM_TYPE&&J.programMapTable.video===null?J.programMapTable.video=xn:$t===Js.ADTS_STREAM_TYPE&&J.programMapTable.audio===null?J.programMapTable.audio=xn:$t===Js.METADATA_STREAM_TYPE&&(J.programMapTable["timed-metadata"][xn]=$t),Ct+=((be[Ct+3]&15)<<8|be[Ct+4])+5}Oe.programMapTable=J.programMapTable}},this.push=function(be){var Oe={},ct=4;if(Oe.payloadUnitStartIndicator=!!(be[1]&64),Oe.pid=be[1]&31,Oe.pid<<=8,Oe.pid|=be[2],(be[3]&48)>>>4>1&&(ct+=be[ct]+1),Oe.pid===0)Oe.type="pat",N(be.subarray(ct),Oe),this.trigger("data",Oe);else if(Oe.pid===this.pmtPid)for(Oe.type="pmt",N(be.subarray(ct),Oe),this.trigger("data",Oe);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===void 0?this.packetsWaitingForPmt.push([be,ct,Oe]):this.processPes_(be,ct,Oe)},this.processPes_=function(be,Oe,ct){ct.pid===this.programMapTable.video?ct.streamType=Js.H264_STREAM_TYPE:ct.pid===this.programMapTable.audio?ct.streamType=Js.ADTS_STREAM_TYPE:ct.streamType=this.programMapTable["timed-metadata"][ct.pid],ct.type="pes",ct.data=be.subarray(Oe),this.trigger("data",ct)}},Pa.prototype=new ec,Pa.STREAM_TYPES={h264:27,adts:15},Er=function(){var N=this,H=!1,ee={data:[],size:0},J={data:[],size:0},be={data:[],size:0},Oe,ct=function(wt,Ct){var $t;const xn=wt[0]<<16|wt[1]<<8|wt[2];Ct.data=new Uint8Array,xn===1&&(Ct.packetLength=6+(wt[4]<<8|wt[5]),Ct.dataAlignmentIndicator=(wt[6]&4)!==0,$t=wt[7],$t&192&&(Ct.pts=(wt[9]&14)<<27|(wt[10]&255)<<20|(wt[11]&254)<<12|(wt[12]&255)<<5|(wt[13]&254)>>>3,Ct.pts*=4,Ct.pts+=(wt[13]&6)>>>1,Ct.dts=Ct.pts,$t&64&&(Ct.dts=(wt[14]&14)<<27|(wt[15]&255)<<20|(wt[16]&254)<<12|(wt[17]&255)<<5|(wt[18]&254)>>>3,Ct.dts*=4,Ct.dts+=(wt[18]&6)>>>1)),Ct.data=wt.subarray(9+wt[8]))},pt=function(wt,Ct,$t){var xn=new Uint8Array(wt.size),hi={type:Ct},Pn=0,Oi=0,lr=!1,Rs;if(!(!wt.data.length||wt.size<9)){for(hi.trackId=wt.data[0].pid,Pn=0;Pn<wt.data.length;Pn++)Rs=wt.data[Pn],xn.set(Rs.data,Oi),Oi+=Rs.data.byteLength;ct(xn,hi),lr=Ct==="video"||hi.packetLength<=wt.size,($t||lr)&&(wt.size=0,wt.data.length=0),lr&&N.trigger("data",hi)}};Er.prototype.init.call(this),this.push=function(wt){({pat:function(){},pes:function(){var Ct,$t;switch(wt.streamType){case Js.H264_STREAM_TYPE:Ct=ee,$t="video";break;case Js.ADTS_STREAM_TYPE:Ct=J,$t="audio";break;case Js.METADATA_STREAM_TYPE:Ct=be,$t="timed-metadata";break;default:return}wt.payloadUnitStartIndicator&&pt(Ct,$t,!0),Ct.data.push(wt),Ct.size+=wt.data.byteLength},pmt:function(){var Ct={type:"metadata",tracks:[]};Oe=wt.programMapTable,Oe.video!==null&&Ct.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+Oe.video,codec:"avc",type:"video"}),Oe.audio!==null&&Ct.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+Oe.audio,codec:"adts",type:"audio"}),H=!0,N.trigger("data",Ct)}})[wt.type]()},this.reset=function(){ee.size=0,ee.data.length=0,J.size=0,J.data.length=0,this.trigger("reset")},this.flushStreams_=function(){pt(ee,"video"),pt(J,"audio"),pt(be,"timed-metadata")},this.flush=function(){if(!H&&Oe){var wt={type:"metadata",tracks:[]};Oe.video!==null&&wt.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+Oe.video,codec:"avc",type:"video"}),Oe.audio!==null&&wt.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+Oe.audio,codec:"adts",type:"audio"}),N.trigger("data",wt)}H=!1,this.flushStreams_(),this.trigger("done")}},Er.prototype=new ec;var sa={PAT_PID:0,MP2T_PACKET_LENGTH:ra,TransportPacketStream:Ns,TransportParseStream:Pa,ElementaryStream:Er,TimestampRolloverStream:tc,CaptionStream:La.CaptionStream,Cea608Stream:La.Cea608Stream,Cea708Stream:La.Cea708Stream,MetadataStream:Zu};for(var iu in Js)Js.hasOwnProperty(iu)&&(sa[iu]=Js[iu]);var jr=sa,ys=n,ru=Zi.ONE_SECOND_IN_TS,Wr,ho=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];Wr=function(N){var H,ee=0;Wr.prototype.init.call(this),this.skipWarn_=function(J,be){this.trigger("log",{level:"warn",message:`adts skiping bytes ${J} to ${be} in frame ${ee} outside syncword`})},this.push=function(J){var be=0,Oe,ct,pt,wt,Ct;if(N||(ee=0),J.type==="audio"){H&&H.length?(pt=H,H=new Uint8Array(pt.byteLength+J.data.byteLength),H.set(pt),H.set(J.data,pt.byteLength)):H=J.data;for(var $t;be+7<H.length;){if(H[be]!==255||(H[be+1]&246)!==240){typeof $t!="number"&&($t=be),be++;continue}if(typeof $t=="number"&&(this.skipWarn_($t,be),$t=null),ct=(~H[be+1]&1)*2,Oe=(H[be+3]&3)<<11|H[be+4]<<3|(H[be+5]&224)>>5,wt=((H[be+6]&3)+1)*1024,Ct=wt*ru/ho[(H[be+2]&60)>>>2],H.byteLength-be<Oe)break;this.trigger("data",{pts:J.pts+ee*Ct,dts:J.dts+ee*Ct,sampleCount:wt,audioobjecttype:(H[be+2]>>>6&3)+1,channelcount:(H[be+2]&1)<<2|(H[be+3]&192)>>>6,samplerate:ho[(H[be+2]&60)>>>2],samplingfrequencyindex:(H[be+2]&60)>>>2,samplesize:16,data:H.subarray(be+7+ct,be+Oe)}),ee++,be+=Oe}typeof $t=="number"&&(this.skipWarn_($t,be),$t=null),H=H.subarray(be)}},this.flush=function(){ee=0,this.trigger("done")},this.reset=function(){H=void 0,this.trigger("reset")},this.endTimeline=function(){H=void 0,this.trigger("endedtimeline")}},Wr.prototype=new ys;var _s=Wr,aa;aa=function(N){var H=N.byteLength,ee=0,J=0;this.length=function(){return 8*H},this.bitsAvailable=function(){return 8*H+J},this.loadWord=function(){var be=N.byteLength-H,Oe=new Uint8Array(4),ct=Math.min(4,H);if(ct===0)throw new Error("no bytes available");Oe.set(N.subarray(be,be+ct)),ee=new DataView(Oe.buffer).getUint32(0),J=ct*8,H-=ct},this.skipBits=function(be){var Oe;J>be?(ee<<=be,J-=be):(be-=J,Oe=Math.floor(be/8),be-=Oe*8,H-=Oe,this.loadWord(),ee<<=be,J-=be)},this.readBits=function(be){var Oe=Math.min(J,be),ct=ee>>>32-Oe;return J-=Oe,J>0?ee<<=Oe:H>0&&this.loadWord(),Oe=be-Oe,Oe>0?ct<<Oe|this.readBits(Oe):ct},this.skipLeadingZeros=function(){var be;for(be=0;be<J;++be)if((ee&2147483648>>>be)!==0)return ee<<=be,J-=be,be;return this.loadWord(),be+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var be=this.skipLeadingZeros();return this.readBits(be+1)-1},this.readExpGolomb=function(){var be=this.readUnsignedExpGolomb();return 1&be?1+be>>>1:-1*(be>>>1)},this.readBoolean=function(){return this.readBits(1)===1},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var oa=aa,No=n,qr=oa,ts,Wa,$c;Wa=function(){var N=0,H,ee;Wa.prototype.init.call(this),this.push=function(J){var be;ee?(be=new Uint8Array(ee.byteLength+J.data.byteLength),be.set(ee),be.set(J.data,ee.byteLength),ee=be):ee=J.data;for(var Oe=ee.byteLength;N<Oe-3;N++)if(ee[N+2]===1){H=N+5;break}for(;H<Oe;)switch(ee[H]){case 0:if(ee[H-1]!==0){H+=2;break}else if(ee[H-2]!==0){H++;break}N+3!==H-2&&this.trigger("data",ee.subarray(N+3,H-2));do H++;while(ee[H]!==1&&H<Oe);N=H-2,H+=3;break;case 1:if(ee[H-1]!==0||ee[H-2]!==0){H+=3;break}this.trigger("data",ee.subarray(N+3,H-2)),N=H-2,H+=3;break;default:H+=3;break}ee=ee.subarray(N),H-=N,N=0},this.reset=function(){ee=null,N=0,this.trigger("reset")},this.flush=function(){ee&&ee.byteLength>3&&this.trigger("data",ee.subarray(N+3)),ee=null,N=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},Wa.prototype=new No,$c={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},ts=function(){var N=new Wa,H,ee,J,be,Oe,ct,pt;ts.prototype.init.call(this),H=this,this.push=function(wt){wt.type==="video"&&(ee=wt.trackId,J=wt.pts,be=wt.dts,N.push(wt))},N.on("data",function(wt){var Ct={trackId:ee,pts:J,dts:be,data:wt,nalUnitTypeCode:wt[0]&31};switch(Ct.nalUnitTypeCode){case 5:Ct.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:Ct.nalUnitType="sei_rbsp",Ct.escapedRBSP=Oe(wt.subarray(1));break;case 7:Ct.nalUnitType="seq_parameter_set_rbsp",Ct.escapedRBSP=Oe(wt.subarray(1)),Ct.config=ct(Ct.escapedRBSP);break;case 8:Ct.nalUnitType="pic_parameter_set_rbsp";break;case 9:Ct.nalUnitType="access_unit_delimiter_rbsp";break}H.trigger("data",Ct)}),N.on("done",function(){H.trigger("done")}),N.on("partialdone",function(){H.trigger("partialdone")}),N.on("reset",function(){H.trigger("reset")}),N.on("endedtimeline",function(){H.trigger("endedtimeline")}),this.flush=function(){N.flush()},this.partialFlush=function(){N.partialFlush()},this.reset=function(){N.reset()},this.endTimeline=function(){N.endTimeline()},pt=function(wt,Ct){var $t=8,xn=8,hi,Pn;for(hi=0;hi<wt;hi++)xn!==0&&(Pn=Ct.readExpGolomb(),xn=($t+Pn+256)%256),$t=xn===0?$t:xn},Oe=function(wt){for(var Ct=wt.byteLength,$t=[],xn=1,hi,Pn;xn<Ct-2;)wt[xn]===0&&wt[xn+1]===0&&wt[xn+2]===3?($t.push(xn+2),xn+=2):xn++;if($t.length===0)return wt;hi=Ct-$t.length,Pn=new Uint8Array(hi);var Oi=0;for(xn=0;xn<hi;Oi++,xn++)Oi===$t[0]&&(Oi++,$t.shift()),Pn[xn]=wt[Oi];return Pn},ct=function(wt){var Ct=0,$t=0,xn=0,hi=0,Pn,Oi,lr,Rs,ga,Ol,cu,Bu,Fl,Ul,Bl,Qr=[1,1],mc,eo;if(Pn=new qr(wt),Oi=Pn.readUnsignedByte(),Rs=Pn.readUnsignedByte(),lr=Pn.readUnsignedByte(),Pn.skipUnsignedExpGolomb(),$c[Oi]&&(ga=Pn.readUnsignedExpGolomb(),ga===3&&Pn.skipBits(1),Pn.skipUnsignedExpGolomb(),Pn.skipUnsignedExpGolomb(),Pn.skipBits(1),Pn.readBoolean()))for(Bl=ga!==3?8:12,eo=0;eo<Bl;eo++)Pn.readBoolean()&&(eo<6?pt(16,Pn):pt(64,Pn));if(Pn.skipUnsignedExpGolomb(),Ol=Pn.readUnsignedExpGolomb(),Ol===0)Pn.readUnsignedExpGolomb();else if(Ol===1)for(Pn.skipBits(1),Pn.skipExpGolomb(),Pn.skipExpGolomb(),cu=Pn.readUnsignedExpGolomb(),eo=0;eo<cu;eo++)Pn.skipExpGolomb();if(Pn.skipUnsignedExpGolomb(),Pn.skipBits(1),Bu=Pn.readUnsignedExpGolomb(),Fl=Pn.readUnsignedExpGolomb(),Ul=Pn.readBits(1),Ul===0&&Pn.skipBits(1),Pn.skipBits(1),Pn.readBoolean()&&(Ct=Pn.readUnsignedExpGolomb(),$t=Pn.readUnsignedExpGolomb(),xn=Pn.readUnsignedExpGolomb(),hi=Pn.readUnsignedExpGolomb()),Pn.readBoolean()&&Pn.readBoolean()){switch(mc=Pn.readUnsignedByte(),mc){case 1:Qr=[1,1];break;case 2:Qr=[12,11];break;case 3:Qr=[10,11];break;case 4:Qr=[16,11];break;case 5:Qr=[40,33];break;case 6:Qr=[24,11];break;case 7:Qr=[20,11];break;case 8:Qr=[32,11];break;case 9:Qr=[80,33];break;case 10:Qr=[18,11];break;case 11:Qr=[15,11];break;case 12:Qr=[64,33];break;case 13:Qr=[160,99];break;case 14:Qr=[4,3];break;case 15:Qr=[3,2];break;case 16:Qr=[2,1];break;case 255:{Qr=[Pn.readUnsignedByte()<<8|Pn.readUnsignedByte(),Pn.readUnsignedByte()<<8|Pn.readUnsignedByte()];break}}Qr&&Qr[0]/Qr[1]}return{profileIdc:Oi,levelIdc:lr,profileCompatibility:Rs,width:(Bu+1)*16-Ct*2-$t*2,height:(2-Ul)*(Fl+1)*16-xn*2-hi*2,sarRatio:Qr}}},ts.prototype=new No;var wu={H264Stream:ts},zs=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],Iu=function(N,H){var ee=N[H+6]<<21|N[H+7]<<14|N[H+8]<<7|N[H+9],J=N[H+5],be=(J&16)>>4;return ee=ee>=0?ee:0,be?ee+20:ee+10},zi=function(N,H){return N.length-H<10||N[H]!==73||N[H+1]!==68||N[H+2]!==51?H:(H+=Iu(N,H),zi(N,H))},ds=function(N){var H=zi(N,0);return N.length>=H+2&&(N[H]&255)===255&&(N[H+1]&240)===240&&(N[H+1]&22)===16},qh=function(N){return N[0]<<21|N[1]<<14|N[2]<<7|N[3]},zd=function(N,H,ee){var J,be="";for(J=H;J<ee;J++)be+="%"+("00"+N[J].toString(16)).slice(-2);return be},nc=function(N,H,ee){return unescape(zd(N,H,ee))},Of=function(N,H){var ee=(N[H+5]&224)>>5,J=N[H+4]<<3,be=N[H+3]&6144;return be|J|ee},Hh=function(N,H){return N[H]===73&&N[H+1]===68&&N[H+2]===51?"timed-metadata":N[H]&!0&&(N[H+1]&240)===240?"audio":null},Ff=function(N){for(var H=0;H+5<N.length;){if(N[H]!==255||(N[H+1]&246)!==240){H++;continue}return zs[(N[H+2]&60)>>>2]}return null},Ss=function(N){var H,ee,J,be;H=10,N[5]&64&&(H+=4,H+=qh(N.subarray(10,14)));do{if(ee=qh(N.subarray(H+4,H+8)),ee<1)return null;if(be=String.fromCharCode(N[H],N[H+1],N[H+2],N[H+3]),be==="PRIV"){J=N.subarray(H+10,H+ee+10);for(var Oe=0;Oe<J.byteLength;Oe++)if(J[Oe]===0){var ct=nc(J,0,Oe);if(ct==="com.apple.streaming.transportStreamTimestamp"){var pt=J.subarray(Oe+1),wt=(pt[3]&1)<<30|pt[4]<<22|pt[5]<<14|pt[6]<<6|pt[7]>>>2;return wt*=4,wt+=pt[7]&3,wt}break}}H+=10,H+=ee}while(H<N.byteLength);return null},tl={isLikelyAacData:ds,parseId3TagSize:Iu,parseAdtsSize:Of,parseType:Hh,parseSampleRate:Ff,parseAacTimestamp:Ss},ic=n,Kc=tl,Oo;Oo=function(){var N=new Uint8Array,H=0;Oo.prototype.init.call(this),this.setTimestamp=function(ee){H=ee},this.push=function(ee){var J=0,be=0,Oe,ct,pt,wt;for(N.length?(wt=N.length,N=new Uint8Array(ee.byteLength+wt),N.set(N.subarray(0,wt)),N.set(ee,wt)):N=ee;N.length-be>=3;){if(N[be]===73&&N[be+1]===68&&N[be+2]===51){if(N.length-be<10||(J=Kc.parseId3TagSize(N,be),be+J>N.length))break;ct={type:"timed-metadata",data:N.subarray(be,be+J)},this.trigger("data",ct),be+=J;continue}else if((N[be]&255)===255&&(N[be+1]&240)===240){if(N.length-be<7||(J=Kc.parseAdtsSize(N,be),be+J>N.length))break;pt={type:"audio",data:N.subarray(be,be+J),pts:H,dts:H},this.trigger("data",pt),be+=J;continue}be++}Oe=N.length-be,Oe>0?N=N.subarray(be):N=new Uint8Array},this.reset=function(){N=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){N=new Uint8Array,this.trigger("endedtimeline")}},Oo.prototype=new ic;var Kr=Oo,su=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Yr=su,Yc=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],Uf=Yc,Cu=n,Fo=nn,po=Lt,js=ei,Ma=At,Uo=jr,fa=Zi,jd=_s,rc=wu.H264Stream,sc=Kr,au=tl.isLikelyAacData,ku=Zi.ONE_SECOND_IN_TS,Il=Yr,Du=Uf,nl,ac,Na,Oa,qd=function(N,H){H.stream=N,this.trigger("log",H)},Ru=function(N,H){for(var ee=Object.keys(H),J=0;J<ee.length;J++){var be=ee[J];be==="headOfPipeline"||!H[be].on||H[be].on("log",qd.bind(N,be))}},Cl=function(N,H){var ee;if(N.length!==H.length)return!1;for(ee=0;ee<N.length;ee++)if(N[ee]!==H[ee])return!1;return!0},oc=function(N,H,ee,J,be,Oe){var ct=ee-H,pt=J-H,wt=be-ee;return{start:{dts:N,pts:N+ct},end:{dts:N+pt,pts:N+wt},prependedContentDuration:Oe,baseMediaDecodeTime:N}};ac=function(N,H){var ee=[],J,be=0,Oe=0,ct=1/0;H=H||{},J=H.firstSequenceNumber||0,ac.prototype.init.call(this),this.push=function(pt){Ma.collectDtsInfo(N,pt),N&&Il.forEach(function(wt){N[wt]=pt[wt]}),ee.push(pt)},this.setEarliestDts=function(pt){be=pt},this.setVideoBaseMediaDecodeTime=function(pt){ct=pt},this.setAudioAppendStart=function(pt){Oe=pt},this.flush=function(){var pt,wt,Ct,$t,xn,hi,Pn;if(ee.length===0){this.trigger("done","AudioSegmentStream");return}pt=js.trimAdtsFramesByEarliestDts(ee,N,be),N.baseMediaDecodeTime=Ma.calculateTrackBaseMediaDecodeTime(N,H.keepOriginalTimestamps),Pn=js.prefixWithSilence(N,pt,Oe,ct),N.samples=js.generateSampleTable(pt),Ct=Fo.mdat(js.concatenateFrameData(pt)),ee=[],wt=Fo.moof(J,[N]),$t=new Uint8Array(wt.byteLength+Ct.byteLength),J++,$t.set(wt),$t.set(Ct,wt.byteLength),Ma.clearDtsInfo(N),xn=Math.ceil(ku*1024/N.samplerate),pt.length&&(hi=pt.length*xn,this.trigger("segmentTimingInfo",oc(fa.audioTsToVideoTs(N.baseMediaDecodeTime,N.samplerate),pt[0].dts,pt[0].pts,pt[0].dts+hi,pt[0].pts+hi,Pn||0)),this.trigger("timingInfo",{start:pt[0].pts,end:pt[0].pts+hi})),this.trigger("data",{track:N,boxes:$t}),this.trigger("done","AudioSegmentStream")},this.reset=function(){Ma.clearDtsInfo(N),ee=[],this.trigger("reset")}},ac.prototype=new Cu,nl=function(N,H){var ee,J=[],be=[],Oe,ct;H=H||{},ee=H.firstSequenceNumber||0,nl.prototype.init.call(this),delete N.minPTS,this.gopCache_=[],this.push=function(pt){Ma.collectDtsInfo(N,pt),pt.nalUnitType==="seq_parameter_set_rbsp"&&!Oe&&(Oe=pt.config,N.sps=[pt.data],Du.forEach(function(wt){N[wt]=Oe[wt]},this)),pt.nalUnitType==="pic_parameter_set_rbsp"&&!ct&&(ct=pt.data,N.pps=[pt.data]),J.push(pt)},this.flush=function(){for(var pt,wt,Ct,$t,xn,hi,Pn=0,Oi,lr;J.length&&J[0].nalUnitType!=="access_unit_delimiter_rbsp";)J.shift();if(J.length===0){this.resetStream_(),this.trigger("done","VideoSegmentStream");return}if(pt=po.groupNalsIntoFrames(J),Ct=po.groupFramesIntoGops(pt),Ct[0][0].keyFrame||(wt=this.getGopForFusion_(J[0],N),wt?(Pn=wt.duration,Ct.unshift(wt),Ct.byteLength+=wt.byteLength,Ct.nalCount+=wt.nalCount,Ct.pts=wt.pts,Ct.dts=wt.dts,Ct.duration+=wt.duration):Ct=po.extendFirstKeyFrame(Ct)),be.length){var Rs;if(H.alignGopsAtEnd?Rs=this.alignGopsAtEnd_(Ct):Rs=this.alignGopsAtStart_(Ct),!Rs){this.gopCache_.unshift({gop:Ct.pop(),pps:N.pps,sps:N.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),J=[],this.resetStream_(),this.trigger("done","VideoSegmentStream");return}Ma.clearDtsInfo(N),Ct=Rs}Ma.collectDtsInfo(N,Ct),N.samples=po.generateSampleTable(Ct),xn=Fo.mdat(po.concatenateNalData(Ct)),N.baseMediaDecodeTime=Ma.calculateTrackBaseMediaDecodeTime(N,H.keepOriginalTimestamps),this.trigger("processedGopsInfo",Ct.map(function(ga){return{pts:ga.pts,dts:ga.dts,byteLength:ga.byteLength}})),Oi=Ct[0],lr=Ct[Ct.length-1],this.trigger("segmentTimingInfo",oc(N.baseMediaDecodeTime,Oi.dts,Oi.pts,lr.dts+lr.duration,lr.pts+lr.duration,Pn)),this.trigger("timingInfo",{start:Ct[0].pts,end:Ct[Ct.length-1].pts+Ct[Ct.length-1].duration}),this.gopCache_.unshift({gop:Ct.pop(),pps:N.pps,sps:N.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),J=[],this.trigger("baseMediaDecodeTime",N.baseMediaDecodeTime),this.trigger("timelineStartInfo",N.timelineStartInfo),$t=Fo.moof(ee,[N]),hi=new Uint8Array($t.byteLength+xn.byteLength),ee++,hi.set($t),hi.set(xn,$t.byteLength),this.trigger("data",{track:N,boxes:hi}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),J=[],this.gopCache_.length=0,be.length=0,this.trigger("reset")},this.resetStream_=function(){Ma.clearDtsInfo(N),Oe=void 0,ct=void 0},this.getGopForFusion_=function(pt){var wt=45e3,Ct=1/0,$t,xn,hi,Pn,Oi;for(Oi=0;Oi<this.gopCache_.length;Oi++)Pn=this.gopCache_[Oi],hi=Pn.gop,!(!(N.pps&&Cl(N.pps[0],Pn.pps[0]))||!(N.sps&&Cl(N.sps[0],Pn.sps[0])))&&(hi.dts<N.timelineStartInfo.dts||($t=pt.dts-hi.dts-hi.duration,$t>=-1e4&&$t<=wt&&(!xn||Ct>$t)&&(xn=Pn,Ct=$t)));return xn?xn.gop:null},this.alignGopsAtStart_=function(pt){var wt,Ct,$t,xn,hi,Pn,Oi,lr;for(hi=pt.byteLength,Pn=pt.nalCount,Oi=pt.duration,wt=Ct=0;wt<be.length&&Ct<pt.length&&($t=be[wt],xn=pt[Ct],$t.pts!==xn.pts);){if(xn.pts>$t.pts){wt++;continue}Ct++,hi-=xn.byteLength,Pn-=xn.nalCount,Oi-=xn.duration}return Ct===0?pt:Ct===pt.length?null:(lr=pt.slice(Ct),lr.byteLength=hi,lr.duration=Oi,lr.nalCount=Pn,lr.pts=lr[0].pts,lr.dts=lr[0].dts,lr)},this.alignGopsAtEnd_=function(pt){var wt,Ct,$t,xn,hi,Pn;for(wt=be.length-1,Ct=pt.length-1,hi=null,Pn=!1;wt>=0&&Ct>=0;){if($t=be[wt],xn=pt[Ct],$t.pts===xn.pts){Pn=!0;break}if($t.pts>xn.pts){wt--;continue}wt===be.length-1&&(hi=Ct),Ct--}if(!Pn&&hi===null)return null;var Oi;if(Pn?Oi=Ct:Oi=hi,Oi===0)return pt;var lr=pt.slice(Oi),Rs=lr.reduce(function(ga,Ol){return ga.byteLength+=Ol.byteLength,ga.duration+=Ol.duration,ga.nalCount+=Ol.nalCount,ga},{byteLength:0,duration:0,nalCount:0});return lr.byteLength=Rs.byteLength,lr.duration=Rs.duration,lr.nalCount=Rs.nalCount,lr.pts=lr[0].pts,lr.dts=lr[0].dts,lr},this.alignGopsWith=function(pt){be=pt}},nl.prototype=new Cu,Oa=function(N,H){this.numberOfTracks=0,this.metadataStream=H,N=N||{},typeof N.remux<"u"?this.remuxTracks=!!N.remux:this.remuxTracks=!0,typeof N.keepOriginalTimestamps=="boolean"?this.keepOriginalTimestamps=N.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,Oa.prototype.init.call(this),this.push=function(ee){if(ee.content||ee.text)return this.pendingCaptions.push(ee);if(ee.frames)return this.pendingMetadata.push(ee);this.pendingTracks.push(ee.track),this.pendingBytes+=ee.boxes.byteLength,ee.track.type==="video"&&(this.videoTrack=ee.track,this.pendingBoxes.push(ee.boxes)),ee.track.type==="audio"&&(this.audioTrack=ee.track,this.pendingBoxes.unshift(ee.boxes))}},Oa.prototype=new Cu,Oa.prototype.flush=function(N){var H=0,ee={captions:[],captionStreams:{},metadata:[],info:{}},J,be,Oe,ct=0,pt;if(this.pendingTracks.length<this.numberOfTracks){if(N!=="VideoSegmentStream"&&N!=="AudioSegmentStream")return;if(this.remuxTracks)return;if(this.pendingTracks.length===0){this.emittedTracks++,this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}if(this.videoTrack?(ct=this.videoTrack.timelineStartInfo.pts,Du.forEach(function(wt){ee.info[wt]=this.videoTrack[wt]},this)):this.audioTrack&&(ct=this.audioTrack.timelineStartInfo.pts,Il.forEach(function(wt){ee.info[wt]=this.audioTrack[wt]},this)),this.videoTrack||this.audioTrack){for(this.pendingTracks.length===1?ee.type=this.pendingTracks[0].type:ee.type="combined",this.emittedTracks+=this.pendingTracks.length,Oe=Fo.initSegment(this.pendingTracks),ee.initSegment=new Uint8Array(Oe.byteLength),ee.initSegment.set(Oe),ee.data=new Uint8Array(this.pendingBytes),pt=0;pt<this.pendingBoxes.length;pt++)ee.data.set(this.pendingBoxes[pt],H),H+=this.pendingBoxes[pt].byteLength;for(pt=0;pt<this.pendingCaptions.length;pt++)J=this.pendingCaptions[pt],J.startTime=fa.metadataTsToSeconds(J.startPts,ct,this.keepOriginalTimestamps),J.endTime=fa.metadataTsToSeconds(J.endPts,ct,this.keepOriginalTimestamps),ee.captionStreams[J.stream]=!0,ee.captions.push(J);for(pt=0;pt<this.pendingMetadata.length;pt++)be=this.pendingMetadata[pt],be.cueTime=fa.metadataTsToSeconds(be.pts,ct,this.keepOriginalTimestamps),ee.metadata.push(be);for(ee.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",ee),pt=0;pt<ee.captions.length;pt++)J=ee.captions[pt],this.trigger("caption",J);for(pt=0;pt<ee.metadata.length;pt++)be=ee.metadata[pt],this.trigger("id3Frame",be)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},Oa.prototype.setRemux=function(N){this.remuxTracks=N},Na=function(N){var H=this,ee=!0,J,be;Na.prototype.init.call(this),N=N||{},this.baseMediaDecodeTime=N.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var Oe={};this.transmuxPipeline_=Oe,Oe.type="aac",Oe.metadataStream=new Uo.MetadataStream,Oe.aacStream=new sc,Oe.audioTimestampRolloverStream=new Uo.TimestampRolloverStream("audio"),Oe.timedMetadataTimestampRolloverStream=new Uo.TimestampRolloverStream("timed-metadata"),Oe.adtsStream=new jd,Oe.coalesceStream=new Oa(N,Oe.metadataStream),Oe.headOfPipeline=Oe.aacStream,Oe.aacStream.pipe(Oe.audioTimestampRolloverStream).pipe(Oe.adtsStream),Oe.aacStream.pipe(Oe.timedMetadataTimestampRolloverStream).pipe(Oe.metadataStream).pipe(Oe.coalesceStream),Oe.metadataStream.on("timestamp",function(ct){Oe.aacStream.setTimestamp(ct.timeStamp)}),Oe.aacStream.on("data",function(ct){ct.type!=="timed-metadata"&&ct.type!=="audio"||Oe.audioSegmentStream||(be=be||{timelineStartInfo:{baseMediaDecodeTime:H.baseMediaDecodeTime},codec:"adts",type:"audio"},Oe.coalesceStream.numberOfTracks++,Oe.audioSegmentStream=new ac(be,N),Oe.audioSegmentStream.on("log",H.getLogTrigger_("audioSegmentStream")),Oe.audioSegmentStream.on("timingInfo",H.trigger.bind(H,"audioTimingInfo")),Oe.adtsStream.pipe(Oe.audioSegmentStream).pipe(Oe.coalesceStream),H.trigger("trackinfo",{hasAudio:!!be,hasVideo:!!J}))}),Oe.coalesceStream.on("data",this.trigger.bind(this,"data")),Oe.coalesceStream.on("done",this.trigger.bind(this,"done")),Ru(this,Oe)},this.setupTsPipeline=function(){var Oe={};this.transmuxPipeline_=Oe,Oe.type="ts",Oe.metadataStream=new Uo.MetadataStream,Oe.packetStream=new Uo.TransportPacketStream,Oe.parseStream=new Uo.TransportParseStream,Oe.elementaryStream=new Uo.ElementaryStream,Oe.timestampRolloverStream=new Uo.TimestampRolloverStream,Oe.adtsStream=new jd,Oe.h264Stream=new rc,Oe.captionStream=new Uo.CaptionStream(N),Oe.coalesceStream=new Oa(N,Oe.metadataStream),Oe.headOfPipeline=Oe.packetStream,Oe.packetStream.pipe(Oe.parseStream).pipe(Oe.elementaryStream).pipe(Oe.timestampRolloverStream),Oe.timestampRolloverStream.pipe(Oe.h264Stream),Oe.timestampRolloverStream.pipe(Oe.adtsStream),Oe.timestampRolloverStream.pipe(Oe.metadataStream).pipe(Oe.coalesceStream),Oe.h264Stream.pipe(Oe.captionStream).pipe(Oe.coalesceStream),Oe.elementaryStream.on("data",function(ct){var pt;if(ct.type==="metadata"){for(pt=ct.tracks.length;pt--;)!J&&ct.tracks[pt].type==="video"?(J=ct.tracks[pt],J.timelineStartInfo.baseMediaDecodeTime=H.baseMediaDecodeTime):!be&&ct.tracks[pt].type==="audio"&&(be=ct.tracks[pt],be.timelineStartInfo.baseMediaDecodeTime=H.baseMediaDecodeTime);J&&!Oe.videoSegmentStream&&(Oe.coalesceStream.numberOfTracks++,Oe.videoSegmentStream=new nl(J,N),Oe.videoSegmentStream.on("log",H.getLogTrigger_("videoSegmentStream")),Oe.videoSegmentStream.on("timelineStartInfo",function(wt){be&&!N.keepOriginalTimestamps&&(be.timelineStartInfo=wt,Oe.audioSegmentStream.setEarliestDts(wt.dts-H.baseMediaDecodeTime))}),Oe.videoSegmentStream.on("processedGopsInfo",H.trigger.bind(H,"gopInfo")),Oe.videoSegmentStream.on("segmentTimingInfo",H.trigger.bind(H,"videoSegmentTimingInfo")),Oe.videoSegmentStream.on("baseMediaDecodeTime",function(wt){be&&Oe.audioSegmentStream.setVideoBaseMediaDecodeTime(wt)}),Oe.videoSegmentStream.on("timingInfo",H.trigger.bind(H,"videoTimingInfo")),Oe.h264Stream.pipe(Oe.videoSegmentStream).pipe(Oe.coalesceStream)),be&&!Oe.audioSegmentStream&&(Oe.coalesceStream.numberOfTracks++,Oe.audioSegmentStream=new ac(be,N),Oe.audioSegmentStream.on("log",H.getLogTrigger_("audioSegmentStream")),Oe.audioSegmentStream.on("timingInfo",H.trigger.bind(H,"audioTimingInfo")),Oe.audioSegmentStream.on("segmentTimingInfo",H.trigger.bind(H,"audioSegmentTimingInfo")),Oe.adtsStream.pipe(Oe.audioSegmentStream).pipe(Oe.coalesceStream)),H.trigger("trackinfo",{hasAudio:!!be,hasVideo:!!J})}}),Oe.coalesceStream.on("data",this.trigger.bind(this,"data")),Oe.coalesceStream.on("id3Frame",function(ct){ct.dispatchType=Oe.metadataStream.dispatchType,H.trigger("id3Frame",ct)}),Oe.coalesceStream.on("caption",this.trigger.bind(this,"caption")),Oe.coalesceStream.on("done",this.trigger.bind(this,"done")),Ru(this,Oe)},this.setBaseMediaDecodeTime=function(Oe){var ct=this.transmuxPipeline_;N.keepOriginalTimestamps||(this.baseMediaDecodeTime=Oe),be&&(be.timelineStartInfo.dts=void 0,be.timelineStartInfo.pts=void 0,Ma.clearDtsInfo(be),ct.audioTimestampRolloverStream&&ct.audioTimestampRolloverStream.discontinuity()),J&&(ct.videoSegmentStream&&(ct.videoSegmentStream.gopCache_=[]),J.timelineStartInfo.dts=void 0,J.timelineStartInfo.pts=void 0,Ma.clearDtsInfo(J),ct.captionStream.reset()),ct.timestampRolloverStream&&ct.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(Oe){be&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(Oe)},this.setRemux=function(Oe){var ct=this.transmuxPipeline_;N.remux=Oe,ct&&ct.coalesceStream&&ct.coalesceStream.setRemux(Oe)},this.alignGopsWith=function(Oe){J&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(Oe)},this.getLogTrigger_=function(Oe){var ct=this;return function(pt){pt.stream=Oe,ct.trigger("log",pt)}},this.push=function(Oe){if(ee){var ct=au(Oe);ct&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():!ct&&this.transmuxPipeline_.type!=="ts"&&this.setupTsPipeline(),ee=!1}this.transmuxPipeline_.headOfPipeline.push(Oe)},this.flush=function(){ee=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},Na.prototype=new Cu;var Bf={Transmuxer:Na},Wc=function(N){return N>>>0},Gh=function(N){return("00"+N.toString(16)).slice(-2)},or={toUnsigned:Wc,toHexString:Gh},ns=function(N){var H="";return H+=String.fromCharCode(N[0]),H+=String.fromCharCode(N[1]),H+=String.fromCharCode(N[2]),H+=String.fromCharCode(N[3]),H},ha=ns,pa=or.toUnsigned,is=ha,Fa=function(N,H){var ee=[],J,be,Oe,ct,pt;if(!H.length)return null;for(J=0;J<N.byteLength;)be=pa(N[J]<<24|N[J+1]<<16|N[J+2]<<8|N[J+3]),Oe=is(N.subarray(J+4,J+8)),ct=be>1?J+be:N.byteLength,Oe===H[0]&&(H.length===1?ee.push(N.subarray(J+8,ct)):(pt=Fa(N.subarray(J+8,ct),H.slice(1)),pt.length&&(ee=ee.concat(pt)))),J=ct;return ee},Ri=Fa,il=or.toUnsigned,Vh=d.getUint64,rl=function(N){var H={version:N[0],flags:new Uint8Array(N.subarray(1,4))};return H.version===1?H.baseMediaDecodeTime=Vh(N.subarray(4)):H.baseMediaDecodeTime=il(N[4]<<24|N[5]<<16|N[6]<<8|N[7]),H},sl=rl,go=function(N){var H=new DataView(N.buffer,N.byteOffset,N.byteLength),ee={version:N[0],flags:new Uint8Array(N.subarray(1,4)),trackId:H.getUint32(4)},J=ee.flags[2]&1,be=ee.flags[2]&2,Oe=ee.flags[2]&8,ct=ee.flags[2]&16,pt=ee.flags[2]&32,wt=ee.flags[0]&65536,Ct=ee.flags[0]&131072,$t;return $t=8,J&&($t+=4,ee.baseDataOffset=H.getUint32(12),$t+=4),be&&(ee.sampleDescriptionIndex=H.getUint32($t),$t+=4),Oe&&(ee.defaultSampleDuration=H.getUint32($t),$t+=4),ct&&(ee.defaultSampleSize=H.getUint32($t),$t+=4),pt&&(ee.defaultSampleFlags=H.getUint32($t)),wt&&(ee.durationIsEmpty=!0),!J&&Ct&&(ee.baseDataOffsetIsMoof=!0),ee},Xc=go,Zs=function(N){return{isLeading:(N[0]&12)>>>2,dependsOn:N[0]&3,isDependedOn:(N[1]&192)>>>6,hasRedundancy:(N[1]&48)>>>4,paddingValue:(N[1]&14)>>>1,isNonSyncSample:N[1]&1,degradationPriority:N[2]<<8|N[3]}},kl=Zs,vs=kl,Lu=function(N){var H={version:N[0],flags:new Uint8Array(N.subarray(1,4)),samples:[]},ee=new DataView(N.buffer,N.byteOffset,N.byteLength),J=H.flags[2]&1,be=H.flags[2]&4,Oe=H.flags[1]&1,ct=H.flags[1]&2,pt=H.flags[1]&4,wt=H.flags[1]&8,Ct=ee.getUint32(4),$t=8,xn;for(J&&(H.dataOffset=ee.getInt32($t),$t+=4),be&&Ct&&(xn={flags:vs(N.subarray($t,$t+4))},$t+=4,Oe&&(xn.duration=ee.getUint32($t),$t+=4),ct&&(xn.size=ee.getUint32($t),$t+=4),wt&&(H.version===1?xn.compositionTimeOffset=ee.getInt32($t):xn.compositionTimeOffset=ee.getUint32($t),$t+=4),H.samples.push(xn),Ct--);Ct--;)xn={},Oe&&(xn.duration=ee.getUint32($t),$t+=4),ct&&(xn.size=ee.getUint32($t),$t+=4),pt&&(xn.flags=vs(N.subarray($t,$t+4)),$t+=4),wt&&(H.version===1?xn.compositionTimeOffset=ee.getInt32($t):xn.compositionTimeOffset=ee.getUint32($t),$t+=4),H.samples.push(xn);return H},lc=Lu,Qc={tfdt:sl,trun:lc},uc={parseTfdt:Qc.tfdt,parseTrun:Qc.trun},$h=function(N){for(var H=0,ee=String.fromCharCode(N[H]),J="";ee!=="\0";)J+=ee,H++,ee=String.fromCharCode(N[H]);return J+=ee,J},zf={uint8ToCString:$h},Jc=zf.uint8ToCString,jf=d.getUint64,Zc=function(N){var H=4,ee=N[0],J,be,Oe,ct,pt,wt,Ct,$t;if(ee===0){J=Jc(N.subarray(H)),H+=J.length,be=Jc(N.subarray(H)),H+=be.length;var xn=new DataView(N.buffer);Oe=xn.getUint32(H),H+=4,pt=xn.getUint32(H),H+=4,wt=xn.getUint32(H),H+=4,Ct=xn.getUint32(H),H+=4}else if(ee===1){var xn=new DataView(N.buffer);Oe=xn.getUint32(H),H+=4,ct=jf(N.subarray(H)),H+=8,wt=xn.getUint32(H),H+=4,Ct=xn.getUint32(H),H+=4,J=Jc(N.subarray(H)),H+=J.length,be=Jc(N.subarray(H)),H+=be.length}$t=new Uint8Array(N.subarray(H,N.byteLength));var hi={scheme_id_uri:J,value:be,timescale:Oe||1,presentation_time:ct,presentation_time_delta:pt,event_duration:wt,id:Ct,message_data:$t};return Hd(ee,hi)?hi:void 0},qf=function(N,H,ee,J){return N||N===0?N/H:J+ee/H},Hd=function(N,H){var ee=H.scheme_id_uri!=="\0",J=N===0&&kr(H.presentation_time_delta)&&ee,be=N===1&&kr(H.presentation_time)&&ee;return!(N>1)&&J||be},kr=function(N){return N!==void 0||N!==null},Kh={parseEmsgBox:Zc,scaleTime:qf},ou;typeof window<"u"?ou=window:typeof u<"u"?ou=u:typeof self<"u"?ou=self:ou={};var cc=ou,Pu=or.toUnsigned,dc=or.toHexString,xs=Ri,Bo=ha,Mu=Kh,mo=Xc,ed=lc,td=sl,Hf=d.getUint64,fc,Dl,hc,Xa,nd,id,Gd,rd=cc,Nu=Ms.parseId3Frames;fc=function(N){var H={},ee=xs(N,["moov","trak"]);return ee.reduce(function(J,be){var Oe,ct,pt,wt,Ct;return Oe=xs(be,["tkhd"])[0],!Oe||(ct=Oe[0],pt=ct===0?12:20,wt=Pu(Oe[pt]<<24|Oe[pt+1]<<16|Oe[pt+2]<<8|Oe[pt+3]),Ct=xs(be,["mdia","mdhd"])[0],!Ct)?null:(ct=Ct[0],pt=ct===0?12:20,J[wt]=Pu(Ct[pt]<<24|Ct[pt+1]<<16|Ct[pt+2]<<8|Ct[pt+3]),J)},H)},Dl=function(N,H){var ee;ee=xs(H,["moof","traf"]);var J=ee.reduce(function(be,Oe){var ct=xs(Oe,["tfhd"])[0],pt=Pu(ct[4]<<24|ct[5]<<16|ct[6]<<8|ct[7]),wt=N[pt]||9e4,Ct=xs(Oe,["tfdt"])[0],$t=new DataView(Ct.buffer,Ct.byteOffset,Ct.byteLength),xn;Ct[0]===1?xn=Hf(Ct.subarray(4,12)):xn=$t.getUint32(4);let hi;return typeof xn=="bigint"?hi=xn/rd.BigInt(wt):typeof xn=="number"&&!isNaN(xn)&&(hi=xn/wt),hi<Number.MAX_SAFE_INTEGER&&(hi=Number(hi)),hi<be&&(be=hi),be},1/0);return typeof J=="bigint"||isFinite(J)?J:0},hc=function(N,H){var ee=xs(H,["moof","traf"]),J=0,be=0,Oe;if(ee&&ee.length){var ct=xs(ee[0],["tfhd"])[0],pt=xs(ee[0],["trun"])[0],wt=xs(ee[0],["tfdt"])[0];if(ct){var Ct=mo(ct);Oe=Ct.trackId}if(wt){var $t=td(wt);J=$t.baseMediaDecodeTime}if(pt){var xn=ed(pt);xn.samples&&xn.samples.length&&(be=xn.samples[0].compositionTimeOffset||0)}}var hi=N[Oe]||9e4;typeof J=="bigint"&&(be=rd.BigInt(be),hi=rd.BigInt(hi));var Pn=(J+be)/hi;return typeof Pn=="bigint"&&Pn<Number.MAX_SAFE_INTEGER&&(Pn=Number(Pn)),Pn},Xa=function(N){var H=xs(N,["moov","trak"]),ee=[];return H.forEach(function(J){var be=xs(J,["mdia","hdlr"]),Oe=xs(J,["tkhd"]);be.forEach(function(ct,pt){var wt=Bo(ct.subarray(8,12)),Ct=Oe[pt],$t,xn,hi;wt==="vide"&&($t=new DataView(Ct.buffer,Ct.byteOffset,Ct.byteLength),xn=$t.getUint8(0),hi=xn===0?$t.getUint32(12):$t.getUint32(20),ee.push(hi))})}),ee},id=function(N){var H=N[0],ee=H===0?12:20;return Pu(N[ee]<<24|N[ee+1]<<16|N[ee+2]<<8|N[ee+3])},nd=function(N){var H=xs(N,["moov","trak"]),ee=[];return H.forEach(function(J){var be={},Oe=xs(J,["tkhd"])[0],ct,pt;Oe&&(ct=new DataView(Oe.buffer,Oe.byteOffset,Oe.byteLength),pt=ct.getUint8(0),be.id=pt===0?ct.getUint32(12):ct.getUint32(20));var wt=xs(J,["mdia","hdlr"])[0];if(wt){var Ct=Bo(wt.subarray(8,12));Ct==="vide"?be.type="video":Ct==="soun"?be.type="audio":be.type=Ct}var $t=xs(J,["mdia","minf","stbl","stsd"])[0];if($t){var xn=$t.subarray(8);be.codec=Bo(xn.subarray(4,8));var hi=xs(xn,[be.codec])[0],Pn,Oi;hi&&(/^[asm]vc[1-9]$/i.test(be.codec)?(Pn=hi.subarray(78),Oi=Bo(Pn.subarray(4,8)),Oi==="avcC"&&Pn.length>11?(be.codec+=".",be.codec+=dc(Pn[9]),be.codec+=dc(Pn[10]),be.codec+=dc(Pn[11])):be.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(be.codec)?(Pn=hi.subarray(28),Oi=Bo(Pn.subarray(4,8)),Oi==="esds"&&Pn.length>20&&Pn[19]!==0?(be.codec+="."+dc(Pn[19]),be.codec+="."+dc(Pn[20]>>>2&63).replace(/^0/,"")):be.codec="mp4a.40.2"):be.codec=be.codec.toLowerCase())}var lr=xs(J,["mdia","mdhd"])[0];lr&&(be.timescale=id(lr)),ee.push(be)}),ee},Gd=function(N,H=0){var ee=xs(N,["emsg"]);return ee.map(J=>{var be=Mu.parseEmsgBox(new Uint8Array(J)),Oe=Nu(be.message_data);return{cueTime:Mu.scaleTime(be.presentation_time,be.timescale,be.presentation_time_delta,H),duration:Mu.scaleTime(be.event_duration,be.timescale),frames:Oe}})};var Ou={findBox:xs,parseType:Bo,timescale:fc,startTime:Dl,compositionStartTime:hc,videoTrackIds:Xa,tracks:nd,getTimescaleFromMediaHeader:id,getEmsgID3:Gd};const{parseTrun:Fu}=uc,{findBox:Gf}=Ou;var al=cc,Yh=function(N){var H=Gf(N,["moof","traf"]),ee=Gf(N,["mdat"]),J=[];return ee.forEach(function(be,Oe){var ct=H[Oe];J.push({mdat:be,traf:ct})}),J},Rl=function(N,H,ee){var J=H,be=ee.defaultSampleDuration||0,Oe=ee.defaultSampleSize||0,ct=ee.trackId,pt=[];return N.forEach(function(wt){var Ct=Fu(wt),$t=Ct.samples;$t.forEach(function(xn){xn.duration===void 0&&(xn.duration=be),xn.size===void 0&&(xn.size=Oe),xn.trackId=ct,xn.dts=J,xn.compositionTimeOffset===void 0&&(xn.compositionTimeOffset=0),typeof J=="bigint"?(xn.pts=J+al.BigInt(xn.compositionTimeOffset),J+=al.BigInt(xn.duration)):(xn.pts=J+xn.compositionTimeOffset,J+=xn.duration)}),pt=pt.concat($t)}),pt},zo={getMdatTrafPairs:Yh,parseSamples:Rl},lu=cn.discardEmulationPreventionBytes,Ll=ia.CaptionStream,Ts=Ri,uu=sl,ol=Xc,{getMdatTrafPairs:Wh,parseSamples:Vd}=zo,Xr=function(N,H){for(var ee=N,J=0;J<H.length;J++){var be=H[J];if(ee<be.size)return be;ee-=be.size}return null},Qa=function(N,H,ee){var J=new DataView(N.buffer,N.byteOffset,N.byteLength),be={logs:[],seiNals:[]},Oe,ct,pt,wt;for(ct=0;ct+4<N.length;ct+=pt)if(pt=J.getUint32(ct),ct+=4,!(pt<=0))switch(N[ct]&31){case 6:var Ct=N.subarray(ct+1,ct+1+pt),$t=Xr(ct,H);if(Oe={nalUnitType:"sei_rbsp",size:pt,data:Ct,escapedRBSP:lu(Ct),trackId:ee},$t)Oe.pts=$t.pts,Oe.dts=$t.dts,wt=$t;else if(wt)Oe.pts=wt.pts,Oe.dts=wt.dts;else{be.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+ct+" for trackId "+ee+". See mux.js#223."});break}be.seiNals.push(Oe);break}return be},Vf=function(N,H){var ee={},J=Wh(N);return J.forEach(function(be){var Oe=be.mdat,ct=be.traf,pt=Ts(ct,["tfhd"]),wt=ol(pt[0]),Ct=wt.trackId,$t=Ts(ct,["tfdt"]),xn=$t.length>0?uu($t[0]).baseMediaDecodeTime:0,hi=Ts(ct,["trun"]),Pn,Oi;H===Ct&&hi.length>0&&(Pn=Vd(hi,xn,wt),Oi=Qa(Oe,Pn,Ct),ee[Ct]||(ee[Ct]={seiNals:[],logs:[]}),ee[Ct].seiNals=ee[Ct].seiNals.concat(Oi.seiNals),ee[Ct].logs=ee[Ct].logs.concat(Oi.logs))}),ee},$f=function(N,H,ee){var J;if(H===null)return null;J=Vf(N,H);var be=J[H]||{};return{seiNals:be.seiNals,logs:be.logs,timescale:ee}},sd=function(){var N=!1,H,ee,J,be,Oe,ct;this.isInitialized=function(){return N},this.init=function(pt){H=new Ll,N=!0,ct=pt?pt.isPartial:!1,H.on("data",function(wt){wt.startTime=wt.startPts/be,wt.endTime=wt.endPts/be,Oe.captions.push(wt),Oe.captionStreams[wt.stream]=!0}),H.on("log",function(wt){Oe.logs.push(wt)})},this.isNewInit=function(pt,wt){return pt&&pt.length===0||wt&&typeof wt=="object"&&Object.keys(wt).length===0?!1:J!==pt[0]||be!==wt[J]},this.parse=function(pt,wt,Ct){var $t;if(this.isInitialized()){if(!wt||!Ct)return null;if(this.isNewInit(wt,Ct))J=wt[0],be=Ct[J];else if(J===null||!be)return ee.push(pt),null}else return null;for(;ee.length>0;){var xn=ee.shift();this.parse(xn,wt,Ct)}return $t=$f(pt,J,be),$t&&$t.logs&&(Oe.logs=Oe.logs.concat($t.logs)),$t===null||!$t.seiNals?Oe.logs.length?{logs:Oe.logs,captions:[],captionStreams:[]}:null:(this.pushNals($t.seiNals),this.flushStream(),Oe)},this.pushNals=function(pt){if(!this.isInitialized()||!pt||pt.length===0)return null;pt.forEach(function(wt){H.push(wt)})},this.flushStream=function(){if(!this.isInitialized())return null;ct?H.partialFlush():H.flush()},this.clearParsedCaptions=function(){Oe.captions=[],Oe.captionStreams={},Oe.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;H.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){ee=[],J=null,be=null,Oe?this.clearParsedCaptions():Oe={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},Ds=sd;const{parseTfdt:yo}=uc,ps=Ri,{getTimescaleFromMediaHeader:ea}=Ou,{parseSamples:pc,getMdatTrafPairs:ad}=zo;var ll=function(){let N=9e4;this.init=function(H){const ee=ps(H,["moov","trak","mdia","mdhd"])[0];ee&&(N=ea(ee))},this.parseSegment=function(H){const ee=[],J=ad(H);let be=0;return J.forEach(function(Oe){const ct=Oe.mdat,pt=Oe.traf,wt=ps(pt,["tfdt"])[0],Ct=ps(pt,["tfhd"])[0],$t=ps(pt,["trun"]);if(wt&&(be=yo(wt).baseMediaDecodeTime),$t.length&&Ct){const xn=pc($t,be,Ct);let hi=0;xn.forEach(function(Pn){const Oi="utf-8",lr=new TextDecoder(Oi),Rs=ct.slice(hi,hi+Pn.size);if(ps(Rs,["vtte"])[0]){hi+=Pn.size;return}ps(Rs,["vttc"]).forEach(function(cu){const Bu=ps(cu,["payl"])[0],Fl=ps(cu,["sttg"])[0],Ul=Pn.pts/N,Bl=(Pn.pts+Pn.duration)/N;let Qr,mc;if(Bu)try{Qr=lr.decode(Bu)}catch(eo){console.error(eo)}if(Fl)try{mc=lr.decode(Fl)}catch(eo){console.error(eo)}Pn.duration&&Qr&&ee.push({cueText:Qr,start:Ul,end:Bl,settings:mc})}),hi+=Pn.size})}}),ee}},vo=Da,As=function(N){var H=N[1]&31;return H<<=8,H|=N[2],H},Uu=function(N){return!!(N[1]&64)},Pl=function(N){var H=0;return(N[3]&48)>>>4>1&&(H+=N[4]+1),H},Xh=function(N,H){var ee=As(N);return ee===0?"pat":ee===H?"pmt":H?"pes":null},Yf=function(N){var H=Uu(N),ee=4+Pl(N);return H&&(ee+=N[ee]+1),(N[ee+10]&31)<<8|N[ee+11]},$d=function(N){var H={},ee=Uu(N),J=4+Pl(N);if(ee&&(J+=N[J]+1),!!(N[J+5]&1)){var be,Oe,ct;be=(N[J+1]&15)<<8|N[J+2],Oe=3+be-4,ct=(N[J+10]&15)<<8|N[J+11];for(var pt=12+ct;pt<Oe;){var wt=J+pt;H[(N[wt+1]&31)<<8|N[wt+2]]=N[wt],pt+=((N[wt+3]&15)<<8|N[wt+4])+5}return H}},Wf=function(N,H){var ee=As(N),J=H[ee];switch(J){case vo.H264_STREAM_TYPE:return"video";case vo.ADTS_STREAM_TYPE:return"audio";case vo.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},zg=function(N){var H=Uu(N);if(!H)return null;var ee=4+Pl(N);if(ee>=N.byteLength)return null;var J=null,be;return be=N[ee+7],be&192&&(J={},J.pts=(N[ee+9]&14)<<27|(N[ee+10]&255)<<20|(N[ee+11]&254)<<12|(N[ee+12]&255)<<5|(N[ee+13]&254)>>>3,J.pts*=4,J.pts+=(N[ee+13]&6)>>>1,J.dts=J.pts,be&64&&(J.dts=(N[ee+14]&14)<<27|(N[ee+15]&255)<<20|(N[ee+16]&254)<<12|(N[ee+17]&255)<<5|(N[ee+18]&254)>>>3,J.dts*=4,J.dts+=(N[ee+18]&6)>>>1)),J},ul=function(N){switch(N){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},Qh=function(N){for(var H=4+Pl(N),ee=N.subarray(H),J=0,be=0,Oe=!1,ct;be<ee.byteLength-3;be++)if(ee[be+2]===1){J=be+5;break}for(;J<ee.byteLength;)switch(ee[J]){case 0:if(ee[J-1]!==0){J+=2;break}else if(ee[J-2]!==0){J++;break}be+3!==J-2&&(ct=ul(ee[be+3]&31),ct==="slice_layer_without_partitioning_rbsp_idr"&&(Oe=!0));do J++;while(ee[J]!==1&&J<ee.length);be=J-2,J+=3;break;case 1:if(ee[J-1]!==0||ee[J-2]!==0){J+=3;break}ct=ul(ee[be+3]&31),ct==="slice_layer_without_partitioning_rbsp_idr"&&(Oe=!0),be=J-2,J+=3;break;default:J+=3;break}return ee=ee.subarray(be),J-=be,be=0,ee&&ee.byteLength>3&&(ct=ul(ee[be+3]&31),ct==="slice_layer_without_partitioning_rbsp_idr"&&(Oe=!0)),Oe},Jh={parseType:Xh,parsePat:Yf,parsePmt:$d,parsePayloadUnitStartIndicator:Uu,parsePesType:Wf,parsePesTime:zg,videoPacketContainsKeyFrame:Qh},Ml=Da,jo=ii.handleRollover,gr={};gr.ts=Jh,gr.aac=tl;var Ja=Zi.ONE_SECOND_IN_TS,qs=188,Za=71,Sr=function(N,H){for(var ee=0,J=qs,be,Oe;J<N.byteLength;){if(N[ee]===Za&&N[J]===Za){switch(be=N.subarray(ee,J),Oe=gr.ts.parseType(be,H.pid),Oe){case"pat":H.pid=gr.ts.parsePat(be);break;case"pmt":var ct=gr.ts.parsePmt(be);H.table=H.table||{},Object.keys(ct).forEach(function(pt){H.table[pt]=ct[pt]});break}ee+=qs,J+=qs;continue}ee++,J++}},Nl=function(N,H,ee){for(var J=0,be=qs,Oe,ct,pt,wt,Ct,$t=!1;be<=N.byteLength;){if(N[J]===Za&&(N[be]===Za||be===N.byteLength)){switch(Oe=N.subarray(J,be),ct=gr.ts.parseType(Oe,H.pid),ct){case"pes":pt=gr.ts.parsePesType(Oe,H.table),wt=gr.ts.parsePayloadUnitStartIndicator(Oe),pt==="audio"&&wt&&(Ct=gr.ts.parsePesTime(Oe),Ct&&(Ct.type="audio",ee.audio.push(Ct),$t=!0));break}if($t)break;J+=qs,be+=qs;continue}J++,be++}for(be=N.byteLength,J=be-qs,$t=!1;J>=0;){if(N[J]===Za&&(N[be]===Za||be===N.byteLength)){switch(Oe=N.subarray(J,be),ct=gr.ts.parseType(Oe,H.pid),ct){case"pes":pt=gr.ts.parsePesType(Oe,H.table),wt=gr.ts.parsePayloadUnitStartIndicator(Oe),pt==="audio"&&wt&&(Ct=gr.ts.parsePesTime(Oe),Ct&&(Ct.type="audio",ee.audio.push(Ct),$t=!0));break}if($t)break;J-=qs,be-=qs;continue}J--,be--}},Xf=function(N,H,ee){for(var J=0,be=qs,Oe,ct,pt,wt,Ct,$t,xn,hi,Pn=!1,Oi={data:[],size:0};be<N.byteLength;){if(N[J]===Za&&N[be]===Za){switch(Oe=N.subarray(J,be),ct=gr.ts.parseType(Oe,H.pid),ct){case"pes":if(pt=gr.ts.parsePesType(Oe,H.table),wt=gr.ts.parsePayloadUnitStartIndicator(Oe),pt==="video"&&(wt&&!Pn&&(Ct=gr.ts.parsePesTime(Oe),Ct&&(Ct.type="video",ee.video.push(Ct),Pn=!0)),!ee.firstKeyFrame)){if(wt&&Oi.size!==0){for($t=new Uint8Array(Oi.size),xn=0;Oi.data.length;)hi=Oi.data.shift(),$t.set(hi,xn),xn+=hi.byteLength;if(gr.ts.videoPacketContainsKeyFrame($t)){var lr=gr.ts.parsePesTime($t);lr?(ee.firstKeyFrame=lr,ee.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}Oi.size=0}Oi.data.push(Oe),Oi.size+=Oe.byteLength}break}if(Pn&&ee.firstKeyFrame)break;J+=qs,be+=qs;continue}J++,be++}for(be=N.byteLength,J=be-qs,Pn=!1;J>=0;){if(N[J]===Za&&N[be]===Za){switch(Oe=N.subarray(J,be),ct=gr.ts.parseType(Oe,H.pid),ct){case"pes":pt=gr.ts.parsePesType(Oe,H.table),wt=gr.ts.parsePayloadUnitStartIndicator(Oe),pt==="video"&&wt&&(Ct=gr.ts.parsePesTime(Oe),Ct&&(Ct.type="video",ee.video.push(Ct),Pn=!0));break}if(Pn)break;J-=qs,be-=qs;continue}J--,be--}},Kd=function(N,H){if(N.audio&&N.audio.length){var ee=H;(typeof ee>"u"||isNaN(ee))&&(ee=N.audio[0].dts),N.audio.forEach(function(Oe){Oe.dts=jo(Oe.dts,ee),Oe.pts=jo(Oe.pts,ee),Oe.dtsTime=Oe.dts/Ja,Oe.ptsTime=Oe.pts/Ja})}if(N.video&&N.video.length){var J=H;if((typeof J>"u"||isNaN(J))&&(J=N.video[0].dts),N.video.forEach(function(Oe){Oe.dts=jo(Oe.dts,J),Oe.pts=jo(Oe.pts,J),Oe.dtsTime=Oe.dts/Ja,Oe.ptsTime=Oe.pts/Ja}),N.firstKeyFrame){var be=N.firstKeyFrame;be.dts=jo(be.dts,J),be.pts=jo(be.pts,J),be.dtsTime=be.dts/Ja,be.ptsTime=be.pts/Ja}}},Yd=function(N){for(var H=!1,ee=0,J=null,be=null,Oe=0,ct=0,pt;N.length-ct>=3;){var wt=gr.aac.parseType(N,ct);switch(wt){case"timed-metadata":if(N.length-ct<10){H=!0;break}if(Oe=gr.aac.parseId3TagSize(N,ct),Oe>N.length){H=!0;break}be===null&&(pt=N.subarray(ct,ct+Oe),be=gr.aac.parseAacTimestamp(pt)),ct+=Oe;break;case"audio":if(N.length-ct<7){H=!0;break}if(Oe=gr.aac.parseAdtsSize(N,ct),Oe>N.length){H=!0;break}J===null&&(pt=N.subarray(ct,ct+Oe),J=gr.aac.parseSampleRate(pt)),ee++,ct+=Oe;break;default:ct++;break}if(H)return null}if(J===null||be===null)return null;var Ct=Ja/J,$t={audio:[{type:"audio",dts:be,pts:be},{type:"audio",dts:be+ee*1024*Ct,pts:be+ee*1024*Ct}]};return $t},Qf=function(N){var H={pid:null,table:null},ee={};Sr(N,H);for(var J in H.table)if(H.table.hasOwnProperty(J)){var be=H.table[J];switch(be){case Ml.H264_STREAM_TYPE:ee.video=[],Xf(N,H,ee),ee.video.length===0&&delete ee.video;break;case Ml.ADTS_STREAM_TYPE:ee.audio=[],Nl(N,H,ee),ee.audio.length===0&&delete ee.audio;break}}return ee},Jf=function(N,H){var ee=gr.aac.isLikelyAacData(N),J;return ee?J=Yd(N):J=Qf(N),!J||!J.audio&&!J.video?null:(Kd(J,H),J)},Zh={inspect:Jf,parseAudioPes_:Nl};const gc=function(N,H){H.on("data",function(ee){const J=ee.initSegment;ee.initSegment={data:J.buffer,byteOffset:J.byteOffset,byteLength:J.byteLength};const be=ee.data;ee.data=be.buffer,N.postMessage({action:"data",segment:ee,byteOffset:be.byteOffset,byteLength:be.byteLength},[ee.data])}),H.on("done",function(ee){N.postMessage({action:"done"})}),H.on("gopInfo",function(ee){N.postMessage({action:"gopInfo",gopInfo:ee})}),H.on("videoSegmentTimingInfo",function(ee){const J={start:{decode:Zi.videoTsToSeconds(ee.start.dts),presentation:Zi.videoTsToSeconds(ee.start.pts)},end:{decode:Zi.videoTsToSeconds(ee.end.dts),presentation:Zi.videoTsToSeconds(ee.end.pts)},baseMediaDecodeTime:Zi.videoTsToSeconds(ee.baseMediaDecodeTime)};ee.prependedContentDuration&&(J.prependedContentDuration=Zi.videoTsToSeconds(ee.prependedContentDuration)),N.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:J})}),H.on("audioSegmentTimingInfo",function(ee){const J={start:{decode:Zi.videoTsToSeconds(ee.start.dts),presentation:Zi.videoTsToSeconds(ee.start.pts)},end:{decode:Zi.videoTsToSeconds(ee.end.dts),presentation:Zi.videoTsToSeconds(ee.end.pts)},baseMediaDecodeTime:Zi.videoTsToSeconds(ee.baseMediaDecodeTime)};ee.prependedContentDuration&&(J.prependedContentDuration=Zi.videoTsToSeconds(ee.prependedContentDuration)),N.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:J})}),H.on("id3Frame",function(ee){N.postMessage({action:"id3Frame",id3Frame:ee})}),H.on("caption",function(ee){N.postMessage({action:"caption",caption:ee})}),H.on("trackinfo",function(ee){N.postMessage({action:"trackinfo",trackInfo:ee})}),H.on("audioTimingInfo",function(ee){N.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:Zi.videoTsToSeconds(ee.start),end:Zi.videoTsToSeconds(ee.end)}})}),H.on("videoTimingInfo",function(ee){N.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:Zi.videoTsToSeconds(ee.start),end:Zi.videoTsToSeconds(ee.end)}})}),H.on("log",function(ee){N.postMessage({action:"log",log:ee})})};class Zf{constructor(H,ee){this.options=ee||{},this.self=H,this.init()}init(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new Bf.Transmuxer(this.options),gc(this.self,this.transmuxer)}pushMp4Captions(H){this.captionParser||(this.captionParser=new Ds,this.captionParser.init());const ee=new Uint8Array(H.data,H.byteOffset,H.byteLength),J=this.captionParser.parse(ee,H.trackIds,H.timescales);this.self.postMessage({action:"mp4Captions",captions:J&&J.captions||[],logs:J&&J.logs||[],data:ee.buffer},[ee.buffer])}initMp4WebVttParser(H){this.webVttParser||(this.webVttParser=new ll);const ee=new Uint8Array(H.data,H.byteOffset,H.byteLength);this.webVttParser.init(ee)}getMp4WebVttText(H){this.webVttParser||(this.webVttParser=new ll);const ee=new Uint8Array(H.data,H.byteOffset,H.byteLength),J=this.webVttParser.parseSegment(ee);this.self.postMessage({action:"getMp4WebVttText",mp4VttCues:J||[],data:ee.buffer},[ee.buffer])}probeMp4StartTime({timescales:H,data:ee}){const J=Ou.startTime(H,ee);this.self.postMessage({action:"probeMp4StartTime",startTime:J,data:ee},[ee.buffer])}probeMp4Tracks({data:H}){const ee=Ou.tracks(H);this.self.postMessage({action:"probeMp4Tracks",tracks:ee,data:H},[H.buffer])}probeEmsgID3({data:H,offset:ee}){const J=Ou.getEmsgID3(H,ee);this.self.postMessage({action:"probeEmsgID3",id3Frames:J,emsgData:H},[H.buffer])}probeTs({data:H,baseStartTime:ee}){const J=typeof ee=="number"&&!isNaN(ee)?ee*Zi.ONE_SECOND_IN_TS:void 0,be=Zh.inspect(H,J);let Oe=null;be&&(Oe={hasVideo:be.video&&be.video.length===2||!1,hasAudio:be.audio&&be.audio.length===2||!1},Oe.hasVideo&&(Oe.videoStart=be.video[0].ptsTime),Oe.hasAudio&&(Oe.audioStart=be.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:Oe,data:H},[H.buffer])}clearAllMp4Captions(){this.captionParser&&this.captionParser.clearAllCaptions()}clearParsedMp4Captions(){this.captionParser&&this.captionParser.clearParsedCaptions()}push(H){const ee=new Uint8Array(H.data,H.byteOffset,H.byteLength);this.transmuxer.push(ee)}reset(){this.transmuxer.reset()}setTimestampOffset(H){const ee=H.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(Zi.secondsToVideoTs(ee)))}setAudioAppendStart(H){this.transmuxer.setAudioAppendStart(Math.ceil(Zi.secondsToVideoTs(H.appendStart)))}setRemux(H){this.transmuxer.setRemux(H.remux)}flush(H){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})}endTimeline(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})}alignGopsWith(H){this.transmuxer.alignGopsWith(H.gopsToAlignWith.slice())}}self.onmessage=function(N){if(N.data.action==="init"&&N.data.options){this.messageHandlers=new Zf(self,N.data.options);return}this.messageHandlers||(this.messageHandlers=new Zf(self)),N.data&&N.data.action&&N.data.action!=="init"&&this.messageHandlers[N.data.action]&&this.messageHandlers[N.data.action](N.data)}}));var KK=zF($K);const YK=(u,t,n)=>{const{type:r,initSegment:l,captions:d,captionStreams:f,metadata:p,videoFrameDtsTime:m,videoFramePtsTime:y}=u.data.segment;t.buffer.push({captions:d,captionStreams:f,metadata:p});const b=u.data.segment.boxes||{data:u.data.segment.data},_={type:r,data:new Uint8Array(b.data,b.data.byteOffset,b.data.byteLength),initSegment:new Uint8Array(l.data,l.byteOffset,l.byteLength)};typeof m<"u"&&(_.videoFrameDtsTime=m),typeof y<"u"&&(_.videoFramePtsTime=y),n(_)},WK=({transmuxedData:u,callback:t})=>{u.buffer=[],t(u)},XK=(u,t)=>{t.gopInfo=u.data.gopInfo},HF=u=>{const{transmuxer:t,bytes:n,audioAppendStart:r,gopsToAlignWith:l,remux:d,onData:f,onTrackInfo:p,onAudioTimingInfo:m,onVideoTimingInfo:y,onVideoSegmentTimingInfo:b,onAudioSegmentTimingInfo:_,onId3:A,onCaptions:w,onDone:T,onEndedTimeline:k,onTransmuxerLog:U,isEndOfTimeline:Y,segment:se,triggerSegmentEventFn:te}=u,Re={buffer:[]};let Be=Y;const j=Z=>{t.currentTransmux===u&&(Z.data.action==="data"&&YK(Z,Re,f),Z.data.action==="trackinfo"&&p(Z.data.trackInfo),Z.data.action==="gopInfo"&&XK(Z,Re),Z.data.action==="audioTimingInfo"&&m(Z.data.audioTimingInfo),Z.data.action==="videoTimingInfo"&&y(Z.data.videoTimingInfo),Z.data.action==="videoSegmentTimingInfo"&&b(Z.data.videoSegmentTimingInfo),Z.data.action==="audioSegmentTimingInfo"&&_(Z.data.audioSegmentTimingInfo),Z.data.action==="id3Frame"&&A([Z.data.id3Frame],Z.data.id3Frame.dispatchType),Z.data.action==="caption"&&w(Z.data.caption),Z.data.action==="endedtimeline"&&(Be=!1,k()),Z.data.action==="log"&&U(Z.data.log),Z.data.type==="transmuxed"&&(Be||(t.onmessage=null,WK({transmuxedData:Re,callback:T}),GF(t))))},M=()=>{const Z={message:"Received an error message from the transmuxer worker",metadata:{errorType:Qt.Error.StreamingFailedToTransmuxSegment,segmentInfo:Ih({segment:se})}};T(null,Z)};if(t.onmessage=j,t.onerror=M,r&&t.postMessage({action:"setAudioAppendStart",appendStart:r}),Array.isArray(l)&&t.postMessage({action:"alignGopsWith",gopsToAlignWith:l}),typeof d<"u"&&t.postMessage({action:"setRemux",remux:d}),n.byteLength){const Z=n instanceof ArrayBuffer?n:n.buffer,K=n instanceof ArrayBuffer?0:n.byteOffset;te({type:"segmenttransmuxingstart",segment:se}),t.postMessage({action:"push",data:Z,byteOffset:K,byteLength:n.byteLength},[Z])}Y&&t.postMessage({action:"endTimeline"}),t.postMessage({action:"flush"})},GF=u=>{u.currentTransmux=null,u.transmuxQueue.length&&(u.currentTransmux=u.transmuxQueue.shift(),typeof u.currentTransmux=="function"?u.currentTransmux():HF(u.currentTransmux))},DP=(u,t)=>{u.postMessage({action:t}),GF(u)},VF=(u,t)=>{if(!t.currentTransmux){t.currentTransmux=u,DP(t,u);return}t.transmuxQueue.push(DP.bind(null,t,u))},QK=u=>{VF("reset",u)},JK=u=>{VF("endTimeline",u)},$F=u=>{if(!u.transmuxer.currentTransmux){u.transmuxer.currentTransmux=u,HF(u);return}u.transmuxer.transmuxQueue.push(u)},ZK=u=>{const t=new KK;t.currentTransmux=null,t.transmuxQueue=[];const n=t.terminate;return t.terminate=()=>(t.currentTransmux=null,t.transmuxQueue.length=0,n.call(t)),t.postMessage({action:"init",options:u}),t};var aA={reset:QK,endTimeline:JK,transmux:$F,createTransmuxer:ZK};const hg=function(u){const t=u.transmuxer,n=u.endAction||u.action,r=u.callback,l=Us({},u,{endAction:null,transmuxer:null,callback:null}),d=f=>{f.data.action===n&&(t.removeEventListener("message",d),f.data.data&&(f.data.data=new Uint8Array(f.data.data,u.byteOffset||0,u.byteLength||f.data.data.byteLength),u.data&&(u.data=f.data.data)),r(f.data))};if(t.addEventListener("message",d),u.data){const f=u.data instanceof ArrayBuffer;l.byteOffset=f?0:u.data.byteOffset,l.byteLength=u.data.byteLength;const p=[f?u.data:u.data.buffer];t.postMessage(l,p)}else t.postMessage(l)},jc={FAILURE:2,TIMEOUT:-101,ABORTED:-102},KF="wvtt",JA=u=>{u.forEach(t=>{t.abort()})},eY=u=>({bandwidth:u.bandwidth,bytesReceived:u.bytesReceived||0,roundTripTime:u.roundTripTime||0}),tY=u=>{const t=u.target,r={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-t.requestTime||0};return r.bytesReceived=u.loaded,r.bandwidth=Math.floor(r.bytesReceived/r.roundTripTime*8*1e3),r},c1=(u,t)=>{const{requestType:n}=t,r=Oh({requestType:n,request:t,error:u});return t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:jc.TIMEOUT,xhr:t,metadata:r}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:jc.ABORTED,xhr:t,metadata:r}:u?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:jc.FAILURE,xhr:t,metadata:r}:t.responseType==="arraybuffer"&&t.response.byteLength===0?{status:t.status,message:"Empty HLS response at URL: "+t.uri,code:jc.FAILURE,xhr:t,metadata:r}:null},RP=(u,t,n,r)=>(l,d)=>{const f=d.response,p=c1(l,d);if(p)return n(p,u);if(f.byteLength!==16)return n({status:d.status,message:"Invalid HLS key at URL: "+d.uri,code:jc.FAILURE,xhr:d},u);const m=new DataView(f),y=new Uint32Array([m.getUint32(0),m.getUint32(4),m.getUint32(8),m.getUint32(12)]);for(let _=0;_<t.length;_++)t[_].bytes=y;const b={uri:d.uri};return r({type:"segmentkeyloadcomplete",segment:u,keyInfo:b}),n(null,u)},nY=(u,t)=>{t===KF&&u.transmuxer.postMessage({action:"initMp4WebVttParser",data:u.map.bytes})},iY=(u,t,n)=>{t===KF&&hg({action:"getMp4WebVttText",data:u.bytes,transmuxer:u.transmuxer,callback:({data:r,mp4VttCues:l})=>{u.bytes=r,n(null,u,{mp4VttCues:l})}})},YF=(u,t)=>{const n=Pw(u.map.bytes);if(n!=="mp4"){const r=u.map.resolvedUri||u.map.uri,l=n||"unknown";return t({internal:!0,message:`Found unsupported ${l} container for initialization segment at URL: ${r}`,code:jc.FAILURE,metadata:{mediaType:l}})}hg({action:"probeMp4Tracks",data:u.map.bytes,transmuxer:u.transmuxer,callback:({tracks:r,data:l})=>(u.map.bytes=l,r.forEach(function(d){u.map.tracks=u.map.tracks||{},!u.map.tracks[d.type]&&(u.map.tracks[d.type]=d,typeof d.id=="number"&&d.timescale&&(u.map.timescales=u.map.timescales||{},u.map.timescales[d.id]=d.timescale),d.type==="text"&&nY(u,d.codec))}),t(null))})},rY=({segment:u,finishProcessingFn:t,triggerSegmentEventFn:n})=>(r,l)=>{const d=c1(r,l);if(d)return t(d,u);const f=new Uint8Array(l.response);if(n({type:"segmentloaded",segment:u}),u.map.key)return u.map.encryptedBytes=f,t(null,u);u.map.bytes=f,YF(u,function(p){if(p)return p.xhr=l,p.status=l.status,t(p,u);t(null,u)})},sY=({segment:u,finishProcessingFn:t,responseType:n,triggerSegmentEventFn:r})=>(l,d)=>{const f=c1(l,d);if(f)return t(f,u);r({type:"segmentloaded",segment:u});const p=n==="arraybuffer"||!d.responseText?d.response:GK(d.responseText.substring(u.lastReachedChar||0));return u.stats=eY(d),u.key?u.encryptedBytes=new Uint8Array(p):u.bytes=new Uint8Array(p),t(null,u)},aY=({segment:u,bytes:t,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:d,id3Fn:f,captionsFn:p,isEndOfTimeline:m,endedTimelineFn:y,dataFn:b,doneFn:_,onTransmuxerLog:A,triggerSegmentEventFn:w})=>{const T=u.map&&u.map.tracks||{},k=!!(T.audio&&T.video);let U=r.bind(null,u,"audio","start");const Y=r.bind(null,u,"audio","end");let se=r.bind(null,u,"video","start");const te=r.bind(null,u,"video","end"),Re=()=>$F({bytes:t,transmuxer:u.transmuxer,audioAppendStart:u.audioAppendStart,gopsToAlignWith:u.gopsToAlignWith,remux:k,onData:Be=>{Be.type=Be.type==="combined"?"video":Be.type,b(u,Be)},onTrackInfo:Be=>{n&&(k&&(Be.isMuxed=!0),n(u,Be))},onAudioTimingInfo:Be=>{U&&typeof Be.start<"u"&&(U(Be.start),U=null),Y&&typeof Be.end<"u"&&Y(Be.end)},onVideoTimingInfo:Be=>{se&&typeof Be.start<"u"&&(se(Be.start),se=null),te&&typeof Be.end<"u"&&te(Be.end)},onVideoSegmentTimingInfo:Be=>{const j={pts:{start:Be.start.presentation,end:Be.end.presentation},dts:{start:Be.start.decode,end:Be.end.decode}};w({type:"segmenttransmuxingtiminginfoavailable",segment:u,timingInfo:j}),l(Be)},onAudioSegmentTimingInfo:Be=>{const j={pts:{start:Be.start.pts,end:Be.end.pts},dts:{start:Be.start.dts,end:Be.end.dts}};w({type:"segmenttransmuxingtiminginfoavailable",segment:u,timingInfo:j}),d(Be)},onId3:(Be,j)=>{f(u,Be,j)},onCaptions:Be=>{p(u,[Be])},isEndOfTimeline:m,onEndedTimeline:()=>{y()},onTransmuxerLog:A,onDone:(Be,j)=>{_&&(Be.type=Be.type==="combined"?"video":Be.type,w({type:"segmenttransmuxingcomplete",segment:u}),_(j,u,Be))},segment:u,triggerSegmentEventFn:w});hg({action:"probeTs",transmuxer:u.transmuxer,data:t,baseStartTime:u.baseStartTime,callback:Be=>{u.bytes=t=Be.data;const j=Be.result;j&&(n(u,{hasAudio:j.hasAudio,hasVideo:j.hasVideo,isMuxed:k}),n=null),Re()}})},WF=({segment:u,bytes:t,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:d,id3Fn:f,captionsFn:p,isEndOfTimeline:m,endedTimelineFn:y,dataFn:b,doneFn:_,onTransmuxerLog:A,triggerSegmentEventFn:w})=>{let T=new Uint8Array(t);if(I$(T)){u.isFmp4=!0;const{tracks:k}=u.map;if(k.text&&(!k.audio||!k.video)){b(u,{data:T,type:"text"}),iY(u,k.text.codec,_);return}const Y={isFmp4:!0,hasVideo:!!k.video,hasAudio:!!k.audio};k.audio&&k.audio.codec&&k.audio.codec!=="enca"&&(Y.audioCodec=k.audio.codec),k.video&&k.video.codec&&k.video.codec!=="encv"&&(Y.videoCodec=k.video.codec),k.video&&k.audio&&(Y.isMuxed=!0),n(u,Y);const se=(te,Re)=>{b(u,{data:T,type:Y.hasAudio&&!Y.isMuxed?"audio":"video"}),Re&&Re.length&&f(u,Re),te&&te.length&&p(u,te),_(null,u,{})};hg({action:"probeMp4StartTime",timescales:u.map.timescales,data:T,transmuxer:u.transmuxer,callback:({data:te,startTime:Re})=>{t=te.buffer,u.bytes=T=te,Y.hasAudio&&!Y.isMuxed&&r(u,"audio","start",Re),Y.hasVideo&&r(u,"video","start",Re),hg({action:"probeEmsgID3",data:T,transmuxer:u.transmuxer,offset:Re,callback:({emsgData:Be,id3Frames:j})=>{if(t=Be.buffer,u.bytes=T=Be,!k.video||!Be.byteLength||!u.transmuxer){se(void 0,j);return}hg({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:u.transmuxer,data:T,timescales:u.map.timescales,trackIds:[k.video.id],callback:M=>{t=M.data.buffer,u.bytes=T=M.data,M.logs.forEach(function(Z){A(cs(Z,{stream:"mp4CaptionParser"}))}),se(M.captions,j)}})}})}});return}if(!u.transmuxer){_(null,u,{});return}if(typeof u.container>"u"&&(u.container=Pw(T)),u.container!=="ts"&&u.container!=="aac"){n(u,{hasAudio:!1,hasVideo:!1}),_(null,u,{});return}aY({segment:u,bytes:t,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:d,id3Fn:f,captionsFn:p,isEndOfTimeline:m,endedTimelineFn:y,dataFn:b,doneFn:_,onTransmuxerLog:A,triggerSegmentEventFn:w})},XF=function({id:u,key:t,encryptedBytes:n,decryptionWorker:r,segment:l,doneFn:d},f){const p=y=>{if(y.data.source===u){r.removeEventListener("message",p);const b=y.data.decrypted;f(new Uint8Array(b.bytes,b.byteOffset,b.byteLength))}};r.onerror=()=>{const y="An error occurred in the decryption worker",b=Ih({segment:l}),_={message:y,metadata:{error:new Error(y),errorType:Qt.Error.StreamingFailedToDecryptSegment,segmentInfo:b,keyInfo:{uri:l.key.resolvedUri||l.map.key.resolvedUri}}};d(_,l)},r.addEventListener("message",p);let m;t.bytes.slice?m=t.bytes.slice():m=new Uint32Array(Array.prototype.slice.call(t.bytes)),r.postMessage(MF({source:u,encrypted:n,key:m,iv:t.iv}),[n.buffer,m.buffer])},oY=({decryptionWorker:u,segment:t,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:d,id3Fn:f,captionsFn:p,isEndOfTimeline:m,endedTimelineFn:y,dataFn:b,doneFn:_,onTransmuxerLog:A,triggerSegmentEventFn:w})=>{w({type:"segmentdecryptionstart"}),XF({id:t.requestId,key:t.key,encryptedBytes:t.encryptedBytes,decryptionWorker:u,segment:t,doneFn:_},T=>{t.bytes=T,w({type:"segmentdecryptioncomplete",segment:t}),WF({segment:t,bytes:t.bytes,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:d,id3Fn:f,captionsFn:p,isEndOfTimeline:m,endedTimelineFn:y,dataFn:b,doneFn:_,onTransmuxerLog:A,triggerSegmentEventFn:w})})},lY=({activeXhrs:u,decryptionWorker:t,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:d,id3Fn:f,captionsFn:p,isEndOfTimeline:m,endedTimelineFn:y,dataFn:b,doneFn:_,onTransmuxerLog:A,triggerSegmentEventFn:w})=>{let T=0,k=!1;return(U,Y)=>{if(!k){if(U)return k=!0,JA(u),_(U,Y);if(T+=1,T===u.length){const se=function(){if(Y.encryptedBytes)return oY({decryptionWorker:t,segment:Y,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:d,id3Fn:f,captionsFn:p,isEndOfTimeline:m,endedTimelineFn:y,dataFn:b,doneFn:_,onTransmuxerLog:A,triggerSegmentEventFn:w});WF({segment:Y,bytes:Y.bytes,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:d,id3Fn:f,captionsFn:p,isEndOfTimeline:m,endedTimelineFn:y,dataFn:b,doneFn:_,onTransmuxerLog:A,triggerSegmentEventFn:w})};if(Y.endOfAllRequests=Date.now(),Y.map&&Y.map.encryptedBytes&&!Y.map.bytes)return w({type:"segmentdecryptionstart",segment:Y}),XF({decryptionWorker:t,id:Y.requestId+"-init",encryptedBytes:Y.map.encryptedBytes,key:Y.map.key,segment:Y,doneFn:_},te=>{Y.map.bytes=te,w({type:"segmentdecryptioncomplete",segment:Y}),YF(Y,Re=>{if(Re)return JA(u),_(Re,Y);se()})});se()}}}},uY=({loadendState:u,abortFn:t})=>n=>{n.target.aborted&&t&&!u.calledAbortFn&&(t(),u.calledAbortFn=!0)},cY=({segment:u,progressFn:t,trackInfoFn:n,timingInfoFn:r,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:d,id3Fn:f,captionsFn:p,isEndOfTimeline:m,endedTimelineFn:y,dataFn:b})=>_=>{if(!_.target.aborted)return u.stats=cs(u.stats,tY(_)),!u.stats.firstBytesReceivedAt&&u.stats.bytesReceived&&(u.stats.firstBytesReceivedAt=Date.now()),t(_,u)},dY=({xhr:u,xhrOptions:t,decryptionWorker:n,segment:r,abortFn:l,progressFn:d,trackInfoFn:f,timingInfoFn:p,videoSegmentTimingInfoFn:m,audioSegmentTimingInfoFn:y,id3Fn:b,captionsFn:_,isEndOfTimeline:A,endedTimelineFn:w,dataFn:T,doneFn:k,onTransmuxerLog:U,triggerSegmentEventFn:Y})=>{const se=[],te=lY({activeXhrs:se,decryptionWorker:n,trackInfoFn:f,timingInfoFn:p,videoSegmentTimingInfoFn:m,audioSegmentTimingInfoFn:y,id3Fn:b,captionsFn:_,isEndOfTimeline:A,endedTimelineFn:w,dataFn:T,doneFn:k,onTransmuxerLog:U,triggerSegmentEventFn:Y});if(r.key&&!r.key.bytes){const Z=[r.key];r.map&&!r.map.bytes&&r.map.key&&r.map.key.resolvedUri===r.key.resolvedUri&&Z.push(r.map.key);const K=cs(t,{uri:r.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),x=RP(r,Z,te,Y),ue={uri:r.key.resolvedUri};Y({type:"segmentkeyloadstart",segment:r,keyInfo:ue});const $e=u(K,x);se.push($e)}if(r.map&&!r.map.bytes){if(r.map.key&&(!r.key||r.key.resolvedUri!==r.map.key.resolvedUri)){const $e=cs(t,{uri:r.map.key.resolvedUri,responseType:"arraybuffer",requestType:"segment-key"}),xe=RP(r,[r.map.key],te,Y),lt={uri:r.map.key.resolvedUri};Y({type:"segmentkeyloadstart",segment:r,keyInfo:lt});const et=u($e,xe);se.push(et)}const K=cs(t,{uri:r.map.resolvedUri,responseType:"arraybuffer",headers:XA(r.map),requestType:"segment-media-initialization"}),x=rY({segment:r,finishProcessingFn:te,triggerSegmentEventFn:Y});Y({type:"segmentloadstart",segment:r});const ue=u(K,x);se.push(ue)}const Re=cs(t,{uri:r.part&&r.part.resolvedUri||r.resolvedUri,responseType:"arraybuffer",headers:XA(r),requestType:"segment"}),Be=sY({segment:r,finishProcessingFn:te,responseType:Re.responseType,triggerSegmentEventFn:Y});Y({type:"segmentloadstart",segment:r});const j=u(Re,Be);j.addEventListener("progress",cY({segment:r,progressFn:d,trackInfoFn:f,timingInfoFn:p,videoSegmentTimingInfoFn:m,audioSegmentTimingInfoFn:y,id3Fn:b,captionsFn:_,isEndOfTimeline:A,endedTimelineFn:w,dataFn:T})),se.push(j);const M={};return se.forEach(Z=>{Z.addEventListener("loadend",uY({loadendState:M,abortFn:l}))}),()=>JA(se)},RT=Au("PlaylistSelector"),LP=function(u){if(!u||!u.playlist)return;const t=u.playlist;return JSON.stringify({id:t.id,bandwidth:u.bandwidth,width:u.width,height:u.height,codecs:t.attributes&&t.attributes.CODECS||""})},pg=function(u,t){if(!u)return"";const n=St.getComputedStyle(u);return n?n[t]:""},gg=function(u,t){const n=u.slice();u.sort(function(r,l){const d=t(r,l);return d===0?n.indexOf(r)-n.indexOf(l):d})},d1=function(u,t){let n,r;return u.attributes.BANDWIDTH&&(n=u.attributes.BANDWIDTH),n=n||St.Number.MAX_VALUE,t.attributes.BANDWIDTH&&(r=t.attributes.BANDWIDTH),r=r||St.Number.MAX_VALUE,n-r},fY=function(u,t){let n,r;return u.attributes.RESOLUTION&&u.attributes.RESOLUTION.width&&(n=u.attributes.RESOLUTION.width),n=n||St.Number.MAX_VALUE,t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(r=t.attributes.RESOLUTION.width),r=r||St.Number.MAX_VALUE,n===r&&u.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?u.attributes.BANDWIDTH-t.attributes.BANDWIDTH:n-r};let QF=function(u){const{main:t,bandwidth:n,playerWidth:r,playerHeight:l,playerObjectFit:d,limitRenditionByPlayerDimensions:f,playlistController:p}=u;if(!t)return;const m={bandwidth:n,width:r,height:l,limitRenditionByPlayerDimensions:f};let y=t.playlists;Al.isAudioOnly(t)&&(y=p.getAudioTrackPlaylists_(),m.audioOnly=!0);let b=y.map(M=>{let Z;const K=M.attributes&&M.attributes.RESOLUTION&&M.attributes.RESOLUTION.width,x=M.attributes&&M.attributes.RESOLUTION&&M.attributes.RESOLUTION.height;return Z=M.attributes&&M.attributes.BANDWIDTH,Z=Z||St.Number.MAX_VALUE,{bandwidth:Z,width:K,height:x,playlist:M}});gg(b,(M,Z)=>M.bandwidth-Z.bandwidth),b=b.filter(M=>!Al.isIncompatible(M.playlist));let _=b.filter(M=>Al.isEnabled(M.playlist));_.length||(_=b.filter(M=>!Al.isDisabled(M.playlist)));const A=_.filter(M=>M.bandwidth*qa.BANDWIDTH_VARIANCE<n);let w=A[A.length-1];const T=A.filter(M=>M.bandwidth===w.bandwidth)[0];if(f===!1){const M=T||_[0]||b[0];if(M&&M.playlist){let Z="sortedPlaylistReps";return T&&(Z="bandwidthBestRep"),_[0]&&(Z="enabledPlaylistReps"),RT(`choosing ${LP(M)} using ${Z} with options`,m),M.playlist}return RT("could not choose a playlist with options",m),null}const k=A.filter(M=>M.width&&M.height);gg(k,(M,Z)=>M.width-Z.width);const U=k.filter(M=>M.width===r&&M.height===l);w=U[U.length-1];const Y=U.filter(M=>M.bandwidth===w.bandwidth)[0];let se,te,Re;Y||(se=k.filter(M=>d==="cover"?M.width>r&&M.height>l:M.width>r||M.height>l),te=se.filter(M=>M.width===se[0].width&&M.height===se[0].height),w=te[te.length-1],Re=te.filter(M=>M.bandwidth===w.bandwidth)[0]);let Be;if(p.leastPixelDiffSelector){const M=k.map(Z=>(Z.pixelDiff=Math.abs(Z.width-r)+Math.abs(Z.height-l),Z));gg(M,(Z,K)=>Z.pixelDiff===K.pixelDiff?K.bandwidth-Z.bandwidth:Z.pixelDiff-K.pixelDiff),Be=M[0]}const j=Be||Re||Y||T||_[0]||b[0];if(j&&j.playlist){let M="sortedPlaylistReps";return Be?M="leastPixelDiffRep":Re?M="resolutionPlusOneRep":Y?M="resolutionBestRep":T?M="bandwidthBestRep":_[0]&&(M="enabledPlaylistReps"),RT(`choosing ${LP(j)} using ${M} with options`,m),j.playlist}return RT("could not choose a playlist with options",m),null};const PP=function(){let u=this.useDevicePixelRatio&&St.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(u=this.customPixelRatio),QF({main:this.playlists.main,bandwidth:this.systemBandwidth,playerWidth:parseInt(pg(this.tech_.el(),"width"),10)*u,playerHeight:parseInt(pg(this.tech_.el(),"height"),10)*u,playerObjectFit:this.usePlayerObjectFit?pg(this.tech_.el(),"objectFit"):"",limitRenditionByPlayerDimensions:this.limitRenditionByPlayerDimensions,playlistController:this.playlistController_})},hY=function(u){let t=-1,n=-1;if(u<0||u>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){let r=this.useDevicePixelRatio&&St.devicePixelRatio||1;return isNaN(this.customPixelRatio)||(r=this.customPixelRatio),t<0&&(t=this.systemBandwidth,n=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==n&&(t=u*this.systemBandwidth+(1-u)*t,n=this.systemBandwidth),QF({main:this.playlists.main,bandwidth:t,playerWidth:parseInt(pg(this.tech_.el(),"width"),10)*r,playerHeight:parseInt(pg(this.tech_.el(),"height"),10)*r,playerObjectFit:this.usePlayerObjectFit?pg(this.tech_.el(),"objectFit"):"",limitRenditionByPlayerDimensions:this.limitRenditionByPlayerDimensions,playlistController:this.playlistController_})}},pY=function(u){const{main:t,currentTime:n,bandwidth:r,duration:l,segmentDuration:d,timeUntilRebuffer:f,currentTimeline:p,syncController:m}=u,y=t.playlists.filter(T=>!Al.isIncompatible(T));let b=y.filter(Al.isEnabled);b.length||(b=y.filter(T=>!Al.isDisabled(T)));const A=b.filter(Al.hasAttribute.bind(null,"BANDWIDTH")).map(T=>{const U=m.getSyncPoint(T,l,p,n)?1:2,se=Al.estimateSegmentRequestTime(d,r,T)*U-f;return{playlist:T,rebufferingImpact:se}}),w=A.filter(T=>T.rebufferingImpact<=0);return gg(w,(T,k)=>d1(k.playlist,T.playlist)),w.length?w[0]:(gg(A,(T,k)=>T.rebufferingImpact-k.rebufferingImpact),A[0]||null)},gY=function(){const u=this.playlists.main.playlists.filter(Al.isEnabled);return gg(u,(n,r)=>d1(n,r)),u.filter(n=>!!_y(this.playlists.main,n).video)[0]||null},mY=u=>{let t=0,n;return u.bytes&&(n=new Uint8Array(u.bytes),u.segments.forEach(r=>{n.set(r,t),t+=r.byteLength})),n};function JF(u){try{return new URL(u).pathname.split("/").slice(-2).join("/")}catch{return""}}const yY=function(u,t,n){if(!u[n]){t.trigger({type:"usage",name:"vhs-608"});let r=n;/^cc708_/.test(n)&&(r="SERVICE"+n.split("_")[1]);const l=t.textTracks().getTrackById(r);if(l)u[n]=l;else{const d=t.options_.vhs&&t.options_.vhs.captionServices||{};let f=n,p=n,m=!1;const y=d[r];y&&(f=y.label,p=y.language,m=y.default),u[n]=t.addRemoteTextTrack({kind:"captions",id:r,default:m,label:f,language:p},!1).track}}},vY=function({inbandTextTracks:u,captionArray:t,timestampOffset:n}){if(!t)return;const r=St.WebKitDataCue||St.VTTCue;t.forEach(l=>{const d=l.stream;l.content?l.content.forEach(f=>{const p=new r(l.startTime+n,l.endTime+n,f.text);p.line=f.line,p.align="left",p.position=f.position,p.positionAlign="line-left",u[d].addCue(p)}):u[d].addCue(new r(l.startTime+n,l.endTime+n,l.text))})},TY=function(u){Object.defineProperties(u.frame,{id:{get(){return Qt.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),u.value.key}},value:{get(){return Qt.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),u.value.data}},privateData:{get(){return Qt.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),u.value.data}}})},EY=({inbandTextTracks:u,metadataArray:t,timestampOffset:n,videoDuration:r})=>{if(!t)return;const l=St.WebKitDataCue||St.VTTCue,d=u.metadataTrack_;if(!d||(t.forEach(b=>{const _=b.cueTime+n;typeof _!="number"||St.isNaN(_)||_<0||!(_<1/0)||!b.frames||!b.frames.length||b.frames.forEach(A=>{const w=new l(_,_,A.value||A.url||A.data||"");w.frame=A,w.value=A,TY(w),d.addCue(w)})}),!d.cues||!d.cues.length))return;const f=d.cues,p=[];for(let b=0;b<f.length;b++)f[b]&&p.push(f[b]);const m=p.reduce((b,_)=>{const A=b[_.startTime]||[];return A.push(_),b[_.startTime]=A,b},{}),y=Object.keys(m).sort((b,_)=>Number(b)-Number(_));y.forEach((b,_)=>{const A=m[b],w=isFinite(r)?r:b,T=Number(y[_+1])||w;A.forEach(k=>{k.endTime=T})})},bY={id:"ID",class:"CLASS",startDate:"START-DATE",duration:"DURATION",endDate:"END-DATE",endOnNext:"END-ON-NEXT",plannedDuration:"PLANNED-DURATION",scte35Out:"SCTE35-OUT",scte35In:"SCTE35-IN"},_Y=new Set(["id","class","startDate","duration","endDate","endOnNext","startTime","endTime","processDateRange"]),SY=({inbandTextTracks:u,dateRanges:t})=>{const n=u.metadataTrack_;if(!n)return;const r=St.WebKitDataCue||St.VTTCue;t.forEach(l=>{for(const d of Object.keys(l)){if(_Y.has(d))continue;const f=new r(l.startTime,l.endTime,"");f.id=l.id,f.type="com.apple.quicktime.HLS",f.value={key:bY[d],data:l[d]},(d==="scte35Out"||d==="scte35In")&&(f.value.data=new Uint8Array(f.value.data.match(/[\da-f]{2}/gi)).buffer),n.addCue(f)}l.processDateRange()})},MP=(u,t,n)=>{u.metadataTrack_||(u.metadataTrack_=n.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,Qt.browser.IS_ANY_SAFARI||(u.metadataTrack_.inBandMetadataTrackDispatchType=t))},hy=function(u,t,n){let r,l;if(n&&n.cues)for(r=n.cues.length;r--;)l=n.cues[r],l.startTime>=u&&l.endTime<=t&&n.removeCue(l)},xY=function(u){const t=u.cues;if(!t)return;const n={};for(let r=t.length-1;r>=0;r--){const l=t[r],d=`${l.startTime}-${l.endTime}-${l.text}`;n[d]?u.removeCue(l):n[d]=l}},AY=(u,t,n)=>{if(typeof t>"u"||t===null||!u.length)return[];const r=Math.ceil((t-n+3)*Ch.ONE_SECOND_IN_TS);let l;for(l=0;l<u.length&&!(u[l].pts>r);l++);return u.slice(l)},wY=(u,t,n)=>{if(!t.length)return u;if(n)return t.slice();const r=t[0].pts;let l=0;for(l;l<u.length&&!(u[l].pts>=r);l++);return u.slice(0,l).concat(t)},IY=(u,t,n,r)=>{const l=Math.ceil((t-r)*Ch.ONE_SECOND_IN_TS),d=Math.ceil((n-r)*Ch.ONE_SECOND_IN_TS),f=u.slice();let p=u.length;for(;p--&&!(u[p].pts<=d););if(p===-1)return f;let m=p+1;for(;m--&&!(u[m].pts<=l););return m=Math.max(m,0),f.splice(m,p-m+1),f},CY=function(u,t){if(!u&&!t||!u&&t||u&&!t)return!1;if(u===t)return!0;const n=Object.keys(u).sort(),r=Object.keys(t).sort();if(n.length!==r.length)return!1;for(let l=0;l<n.length;l++){const d=n[l];if(d!==r[l]||u[d]!==t[d])return!1}return!0},kY=function(u,t,n){t=t||[];const r=[];let l=0;for(let d=0;d<t.length;d++){const f=t[d];if(u===f.timeline&&(r.push(d),l+=f.duration,l>n))return d}return r.length===0?0:r[r.length-1]},uy=1,DY=500,NP=u=>typeof u=="number"&&isFinite(u),LT=1/60,RY=(u,t,n)=>u!=="main"||!t||!n?null:!n.hasAudio&&!n.hasVideo?"Neither audio nor video found in segment.":t.hasVideo&&!n.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!t.hasVideo&&n.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null,LY=(u,t,n)=>{let r=t-qa.BACK_BUFFER_LENGTH;u.length&&(r=Math.max(r,u.start(0)));const l=t-n;return Math.min(l,r)},Jp=u=>{const{startOfSegment:t,duration:n,segment:r,part:l,playlist:{mediaSequence:d,id:f,segments:p=[]},mediaIndex:m,partIndex:y,timeline:b}=u,_=p.length-1;let A="mediaIndex/partIndex increment";u.getMediaInfoForTime?A=`getMediaInfoForTime (${u.getMediaInfoForTime})`:u.isSyncRequest&&(A="getSyncSegmentCandidate (isSyncRequest)"),u.independent&&(A+=` with independent ${u.independent}`);const w=typeof y=="number",T=u.segment.uri?"segment":"pre-segment",k=w?mF({preloadSegment:r})-1:0;return`${T} [${d+m}/${d+_}]`+(w?` part [${y}/${k}]`:"")+` segment start/end [${r.start} => ${r.end}]`+(w?` part start/end [${l.start} => ${l.end}]`:"")+` startOfSegment [${t}] duration [${n}] timeline [${b}] selected by [${A}] playlist [${f}]`},OP=u=>`${u}TimingInfo`,PY=({segmentTimeline:u,currentTimeline:t,startOfSegment:n,buffered:r,overrideCheck:l})=>!l&&u===t?null:u<t?n:r.length?r.end(r.length-1):n,ZA=({timelineChangeController:u,currentTimeline:t,segmentTimeline:n,loaderType:r,audioDisabled:l})=>{if(t===n)return!1;if(r==="audio"){const d=u.lastTimelineChange({type:"main"});return!d||d.to!==n}if(r==="main"&&l){const d=u.pendingTimelineChange({type:"audio"});return!(d&&d.to===n)}return!1},MY=u=>{if(!u)return!1;const t=u.pendingTimelineChange({type:"audio"}),n=u.pendingTimelineChange({type:"main"}),r=t&&n,l=r&&t.to!==n.to;return!!(r&&t.from!==-1&&n.from!==-1&&l)},NY=u=>{const t=u.timelineChangeController_.pendingTimelineChange({type:"audio"}),n=u.timelineChangeController_.pendingTimelineChange({type:"main"});return t&&n&&t.to<n.to},Sf=u=>{const t=u.pendingSegment_;if(!t)return;if(ZA({timelineChangeController:u.timelineChangeController_,currentTimeline:u.currentTimeline_,segmentTimeline:t.timeline,loaderType:u.loaderType_,audioDisabled:u.audioDisabled_})&&MY(u.timelineChangeController_)){if(NY(u)){u.timelineChangeController_.trigger("audioTimelineBehind");return}u.timelineChangeController_.trigger("fixBadTimelineChange")}},OY=u=>{let t=0;return["video","audio"].forEach(function(n){const r=u[`${n}TimingInfo`];if(!r)return;const{start:l,end:d}=r;let f;typeof l=="bigint"||typeof d=="bigint"?f=St.BigInt(d)-St.BigInt(l):typeof l=="number"&&typeof d=="number"&&(f=d-l),typeof f<"u"&&f>t&&(t=f)}),typeof t=="bigint"&&t<Number.MAX_SAFE_INTEGER&&(t=Number(t)),t},FP=({segmentDuration:u,maxDuration:t})=>u?Math.round(u)>t+Bc:!1,FY=(u,t)=>{if(t!=="hls")return null;const n=OY({audioTimingInfo:u.audioTimingInfo,videoTimingInfo:u.videoTimingInfo});if(!n)return null;const r=u.playlist.targetDuration,l=FP({segmentDuration:n,maxDuration:r*2}),d=FP({segmentDuration:n,maxDuration:r}),f=`Segment with index ${u.mediaIndex} from playlist ${u.playlist.id} has a duration of ${n} when the reported duration is ${u.duration} and the target duration is ${r}. For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1`;return l||d?{severity:l?"warn":"info",message:f}:null},Ih=({type:u,segment:t})=>{if(!t)return;const n=!!(t.key||t.map&&t.map.ke),r=!!(t.map&&!t.map.bytes),l=t.startOfSegment===void 0?t.start:t.startOfSegment;return{type:u||t.type,uri:t.resolvedUri||t.uri,start:l,duration:t.duration,isEncrypted:n,isMediaInitialization:r}};class ew extends Qt.EventTarget{constructor(t,n={}){if(super(),!t)throw new TypeError("Initialization settings are required");if(typeof t.currentTime!="function")throw new TypeError("No currentTime getter specified");if(!t.mediaSource)throw new TypeError("No MediaSource specified");this.bandwidth=t.bandwidth,this.throughput={rate:0,count:0},this.roundTrip=NaN,this.resetStats_(),this.mediaIndex=null,this.partIndex=null,this.hasPlayed_=t.hasPlayed,this.currentTime_=t.currentTime,this.seekable_=t.seekable,this.seeking_=t.seeking,this.duration_=t.duration,this.mediaSource_=t.mediaSource,this.vhs_=t.vhs,this.loaderType_=t.loaderType,this.currentMediaInfo_=void 0,this.startingMediaInfo_=void 0,this.segmentMetadataTrack_=t.segmentMetadataTrack,this.goalBufferLength_=t.goalBufferLength,this.sourceType_=t.sourceType,this.sourceUpdater_=t.sourceUpdater,this.inbandTextTracks_=t.inbandTextTracks,this.state_="INIT",this.timelineChangeController_=t.timelineChangeController,this.shouldSaveSegmentTimingInfo_=!0,this.parse708captions_=t.parse708captions,this.useDtsForTimestampOffset_=t.useDtsForTimestampOffset,this.captionServices_=t.captionServices,this.exactManifestTimings=t.exactManifestTimings,this.addMetadataToTextTrack=t.addMetadataToTextTrack,this.checkBufferTimeout_=null,this.error_=void 0,this.currentTimeline_=-1,this.shouldForceTimestampOffsetAfterResync_=!1,this.pendingSegment_=null,this.xhrOptions_=null,this.pendingSegments_=[],this.audioDisabled_=!1,this.isPendingTimestampOffset_=!1,this.gopBuffer_=[],this.timeMapping_=0,this.safeAppend_=!1,this.appendInitSegment_={audio:!0,video:!0},this.playlistOfLastInitSegment_={audio:null,video:null},this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_={id3:[],caption:[]},this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=null,this.activeInitSegmentId_=null,this.initSegments_={},this.cacheEncryptionKeys_=t.cacheEncryptionKeys,this.keyCache_={},this.decrypter_=t.decrypter,this.syncController_=t.syncController,this.syncPoint_={segmentIndex:0,time:0},this.transmuxer_=this.createTransmuxer_(),this.triggerSyncInfoUpdate_=()=>this.trigger("syncinfoupdate"),this.syncController_.on("syncinfoupdate",this.triggerSyncInfoUpdate_),this.mediaSource_.addEventListener("sourceopen",()=>{this.isEndOfStream_()||(this.ended_=!1)}),this.fetchAtBuffer_=!1,this.logger_=Au(`SegmentLoader[${this.loaderType_}]`),Object.defineProperty(this,"state",{get(){return this.state_},set(r){r!==this.state_&&(this.logger_(`${this.state_} -> ${r}`),this.state_=r,this.trigger("statechange"))}}),this.sourceUpdater_.on("ready",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():Sf(this)}),this.sourceUpdater_.on("codecschange",r=>{this.trigger(Us({type:"codecschange"},r))}),this.loaderType_==="main"&&this.timelineChangeController_.on("pendingtimelinechange",()=>{this.hasEnoughInfoToAppend_()?this.processCallQueue_():Sf(this)}),this.loaderType_==="audio"&&this.timelineChangeController_.on("timelinechange",r=>{this.trigger(Us({type:"timelinechange"},r)),this.hasEnoughInfoToLoad_()?this.processLoadQueue_():Sf(this),this.hasEnoughInfoToAppend_()?this.processCallQueue_():Sf(this)})}get mediaSequenceSync_(){return this.syncController_.getMediaSequenceSync(this.loaderType_)}createTransmuxer_(){return aA.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})}resetStats_(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0}dispose(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&St.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}setAudio(t){this.audioDisabled_=!t,t?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())}abort(){if(this.state!=="WAITING"){this.pendingSegment_&&(this.pendingSegment_=null),this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_);return}this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()}abort_(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,St.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null}checkForAbort_(t){return this.state==="APPENDING"&&!this.pendingSegment_?(this.state="READY",!0):!this.pendingSegment_||this.pendingSegment_.requestId!==t}error(t){return typeof t<"u"&&(this.logger_("error occurred:",t),this.error_=t),this.pendingSegment_=null,this.error_}endOfStream(){this.ended_=!0,this.transmuxer_&&aA.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")}buffered_(){const t=this.getMediaInfo_();if(!this.sourceUpdater_||!t)return $a();if(this.loaderType_==="main"){const{hasAudio:n,hasVideo:r,isMuxed:l}=t;if(r&&n&&!this.audioDisabled_&&!l)return this.sourceUpdater_.buffered();if(r)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()}initSegmentForMap(t,n=!1){if(!t)return null;const r=wE(t);let l=this.initSegments_[r];return n&&!l&&t.bytes&&(this.initSegments_[r]=l={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:t.bytes,tracks:t.tracks,timescales:t.timescales}),l||t}segmentKey(t,n=!1){if(!t)return null;const r=NF(t);let l=this.keyCache_[r];this.cacheEncryptionKeys_&&n&&!l&&t.bytes&&(this.keyCache_[r]=l={resolvedUri:t.resolvedUri,bytes:t.bytes});const d={resolvedUri:(l||t).resolvedUri};return l&&(d.bytes=l.bytes),d}couldBeginLoading_(){return this.playlist_&&!this.paused()}load(){if(this.monitorBuffer_(),!!this.playlist_){if(this.state==="INIT"&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"||(this.state="READY")}}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}playlist(t,n={}){if(!t||this.playlist_&&this.playlist_.endList&&t.endList&&this.playlist_.uri===t.uri)return;const r=this.playlist_,l=this.pendingSegment_;this.playlist_=t,this.xhrOptions_=n,this.state==="INIT"&&(t.syncInfo={mediaSequence:t.mediaSequence,time:0},this.loaderType_==="main"&&this.syncController_.setDateTimeMappingForStart(t));let d=null;if(r&&(r.id?d=r.id:r.uri&&(d=r.uri)),this.logger_(`playlist update [${d} => ${t.id||t.uri}]`),this.mediaSequenceSync_&&(this.mediaSequenceSync_.update(t,this.currentTime_()),this.logger_(`Playlist update:
currentTime: ${this.currentTime_()}
bufferedEnd: ${rA(this.buffered_())}
`,this.mediaSequenceSync_.diagnostics)),this.trigger("syncinfoupdate"),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();if(!r||r.uri!==t.uri){this.mediaIndex!==null&&(!t.endList&&typeof t.partTargetDuration=="number"?this.resetLoader():this.resyncLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate");return}const f=t.mediaSequence-r.mediaSequence;if(this.logger_(`live window shift [${f}]`),this.mediaIndex!==null)if(this.mediaIndex-=f,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{const p=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!p.parts||!p.parts.length||!p.parts[this.partIndex])){const m=this.mediaIndex;this.logger_(`currently processing part (index ${this.partIndex}) no longer exists.`),this.resetLoader(),this.mediaIndex=m}}l&&(l.mediaIndex-=f,l.mediaIndex<0?(l.mediaIndex=null,l.partIndex=null):(l.mediaIndex>=0&&(l.segment=t.segments[l.mediaIndex]),l.partIndex>=0&&l.segment.parts&&(l.part=l.segment.parts[l.partIndex]))),this.syncController_.saveExpiredSegmentInfo(r,t)}pause(){this.checkBufferTimeout_&&(St.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}paused(){return this.checkBufferTimeout_===null}resetEverything(t){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,t),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))}resetLoader(){this.fetchAtBuffer_=!1,this.mediaSequenceSync_&&this.mediaSequenceSync_.resetAppendedStatus(),this.resyncLoader()}resyncLoader(){this.transmuxer_&&aA.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1;const t=this.currentMediaInfo_&&this.currentMediaInfo_.isFmp4;this.sourceType_==="hls"&&!t&&(this.shouldForceTimestampOffsetAfterResync_=!0),this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}remove(t,n,r=()=>{},l=!1){if(n===1/0&&(n=this.duration_()),n<=t){this.logger_("skipping remove because end ${end} is <= start ${start}");return}if(!this.sourceUpdater_||!this.getMediaInfo_()){this.logger_("skipping remove because no source updater or starting media info");return}let d=1;const f=()=>{d--,d===0&&r()};(l||!this.audioDisabled_)&&(d++,this.sourceUpdater_.removeAudio(t,n,f)),(l||this.loaderType_==="main")&&(this.gopBuffer_=IY(this.gopBuffer_,t,n,this.timeMapping_),d++,this.sourceUpdater_.removeVideo(t,n,f));for(const p in this.inbandTextTracks_)hy(t,n,this.inbandTextTracks_[p]);hy(t,n,this.segmentMetadataTrack_),f()}monitorBuffer_(){this.checkBufferTimeout_&&St.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=St.setTimeout(this.monitorBufferTick_.bind(this),1)}monitorBufferTick_(){this.state==="READY"&&this.fillBuffer_(),this.checkBufferTimeout_&&St.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=St.setTimeout(this.monitorBufferTick_.bind(this),DY)}fillBuffer_(){if(this.sourceUpdater_.updating())return;const t=this.chooseNextRequest_();if(!t)return;const n={segmentInfo:Ih({type:this.loaderType_,segment:t})};this.trigger({type:"segmentselected",metadata:n}),typeof t.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:t.timeline})),this.loadSegment_(t)}isEndOfStream_(t=this.mediaIndex,n=this.playlist_,r=this.partIndex){if(!n||!this.mediaSource_)return!1;const l=typeof t=="number"&&n.segments[t],d=t+1===n.segments.length,f=!l||!l.parts||r+1===l.parts.length;return n.endList&&this.mediaSource_.readyState==="open"&&d&&f}chooseNextRequest_(){const t=this.buffered_(),n=rA(t)||0,r=a1(t,this.currentTime_()),l=!this.hasPlayed_()&&r>=1,d=r>=this.goalBufferLength_(),f=this.playlist_.segments;if(!f.length||l||d)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_(),this.loaderType_);const p={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:!this.syncPoint_};if(p.isSyncRequest)p.mediaIndex=kY(this.currentTimeline_,f,n),this.logger_(`choose next request. Can not find sync point. Fallback to media Index: ${p.mediaIndex}`);else if(this.mediaIndex!==null){const A=f[this.mediaIndex],w=typeof this.partIndex=="number"?this.partIndex:-1;p.startOfSegment=A.end?A.end:n,A.parts&&A.parts[w+1]?(p.mediaIndex=this.mediaIndex,p.partIndex=w+1):p.mediaIndex=this.mediaIndex+1}else{let A,w,T;const k=this.fetchAtBuffer_?n:this.currentTime_();if(this.mediaSequenceSync_&&this.logger_(`chooseNextRequest_ request after Quality Switch:
For TargetTime: ${k}.
CurrentTime: ${this.currentTime_()}
BufferedEnd: ${n}
Fetch At Buffer: ${this.fetchAtBuffer_}
`,this.mediaSequenceSync_.diagnostics),this.mediaSequenceSync_&&this.mediaSequenceSync_.isReliable){const U=this.getSyncInfoFromMediaSequenceSync_(k);if(!U){const Y="No sync info found while using media sequence sync";return this.error({message:Y,metadata:{errorType:Qt.Error.StreamingFailedToSelectNextSegment,error:new Error(Y)}}),this.logger_("chooseNextRequest_ - no sync info found using media sequence sync"),null}this.logger_(`chooseNextRequest_ mediaSequence syncInfo (${U.start} --> ${U.end})`),A=U.segmentIndex,w=U.partIndex,T=U.start}else{this.logger_("chooseNextRequest_ - fallback to a regular segment selection algorithm, based on a syncPoint.");const U=Al.getMediaInfoForTime({exactManifestTimings:this.exactManifestTimings,playlist:this.playlist_,currentTime:k,startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time});A=U.segmentIndex,w=U.partIndex,T=U.startTime}p.getMediaInfoForTime=this.fetchAtBuffer_?`bufferedEnd ${k}`:`currentTime ${k}`,p.mediaIndex=A,p.startOfSegment=T,p.partIndex=w,this.logger_(`choose next request. Playlist switched and we have a sync point. Media Index: ${p.mediaIndex} `)}const m=f[p.mediaIndex];let y=m&&typeof p.partIndex=="number"&&m.parts&&m.parts[p.partIndex];if(!m||typeof p.partIndex=="number"&&!y)return null;typeof p.partIndex!="number"&&m.parts&&(p.partIndex=0,y=m.parts[0]);const b=this.vhs_.playlists&&this.vhs_.playlists.main&&this.vhs_.playlists.main.independentSegments||this.playlist_.independentSegments;if(!r&&y&&!b&&!y.independent)if(p.partIndex===0){const A=f[p.mediaIndex-1],w=A.parts&&A.parts.length&&A.parts[A.parts.length-1];w&&w.independent&&(p.mediaIndex-=1,p.partIndex=A.parts.length-1,p.independent="previous segment")}else m.parts[p.partIndex-1].independent&&(p.partIndex-=1,p.independent="previous part");const _=this.mediaSource_&&this.mediaSource_.readyState==="ended";return p.mediaIndex>=f.length-1&&_&&!this.seeking_()?null:(this.shouldForceTimestampOffsetAfterResync_&&(this.shouldForceTimestampOffsetAfterResync_=!1,p.forceTimestampOffset=!0,this.logger_("choose next request. Force timestamp offset after loader resync")),this.generateSegmentInfo_(p))}getSyncInfoFromMediaSequenceSync_(t){if(!this.mediaSequenceSync_)return null;const n=Math.max(t,this.mediaSequenceSync_.start);t!==n&&this.logger_(`getSyncInfoFromMediaSequenceSync_. Pulled target time from ${t} to ${n}`);const r=this.mediaSequenceSync_.getSyncInfoForTime(n);if(!r)return null;if(!r.isAppended)return r;const l=this.mediaSequenceSync_.getSyncInfoForTime(r.end);return l?(l.isAppended&&this.logger_("getSyncInfoFromMediaSequenceSync_: We encounter unexpected scenario where next media sequence sync info is also appended!"),l):null}generateSegmentInfo_(t){const{independent:n,playlist:r,mediaIndex:l,startOfSegment:d,isSyncRequest:f,partIndex:p,forceTimestampOffset:m,getMediaInfoForTime:y}=t,b=r.segments[l],_=typeof p=="number"&&b.parts[p],A={requestId:"segment-loader-"+Math.random(),uri:_&&_.resolvedUri||b.resolvedUri,mediaIndex:l,partIndex:_?p:null,isSyncRequest:f,startOfSegment:d,playlist:r,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:b.timeline,duration:_&&_.duration||b.duration,segment:b,part:_,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:y,independent:n},w=typeof m<"u"?m:this.isPendingTimestampOffset_;A.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:b.timeline,currentTimeline:this.currentTimeline_,startOfSegment:d,buffered:this.buffered_(),overrideCheck:w});const T=rA(this.sourceUpdater_.audioBuffered());return typeof T=="number"&&(A.audioAppendStart=T-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(A.gopsToAlignWith=AY(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),A}timestampOffsetForSegment_(t){return PY(t)}earlyAbortWhenNeeded_(t){if(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||Date.now()-(t.firstBytesReceivedAt||Date.now())<1e3)return;const n=this.currentTime_(),r=t.bandwidth,l=this.pendingSegment_.duration,d=Al.estimateSegmentRequestTime(l,r,this.playlist_,t.bytesReceived),f=tK(this.buffered_(),n,this.vhs_.tech_.playbackRate())-1;if(d<=f)return;const p=pY({main:this.vhs_.playlists.main,currentTime:n,bandwidth:r,duration:this.duration_(),segmentDuration:l,timeUntilRebuffer:f,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(!p)return;const y=d-f-p.rebufferingImpact;let b=.5;f<=Bc&&(b=1),!(!p.playlist||p.playlist.uri===this.playlist_.uri||y<b)&&(this.bandwidth=p.playlist.attributes.BANDWIDTH*qa.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}handleAbort_(t){this.logger_(`Aborting ${Jp(t)}`),this.mediaRequestsAborted+=1}handleProgress_(t,n){this.earlyAbortWhenNeeded_(n.stats),!this.checkForAbort_(n.requestId)&&this.trigger("progress")}handleTrackInfo_(t,n){const{hasAudio:r,hasVideo:l}=n,d={segmentInfo:Ih({type:this.loaderType_,segment:t}),trackInfo:{hasAudio:r,hasVideo:l}};this.trigger({type:"segmenttransmuxingtrackinfoavailable",metadata:d}),this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)&&(this.checkForIllegalMediaSwitch(n)||(n=n||{},CY(this.currentMediaInfo_,n)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=n,this.currentMediaInfo_=n,this.logger_("trackinfo update",n),this.trigger("trackinfo")),!this.checkForAbort_(t.requestId)&&(this.pendingSegment_.trackInfo=n,this.hasEnoughInfoToAppend_()?this.processCallQueue_():Sf(this))))}handleTimingInfo_(t,n,r,l){if(this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId))return;const d=this.pendingSegment_,f=OP(n);d[f]=d[f]||{},d[f][r]=l,this.logger_(`timinginfo: ${n} - ${r} - ${l}`),this.hasEnoughInfoToAppend_()?this.processCallQueue_():Sf(this)}handleCaptions_(t,n){if(this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId))return;if(n.length===0){this.logger_("SegmentLoader received no captions from a caption event");return}if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,t,n));return}const l=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),d={};n.forEach(f=>{d[f.stream]=d[f.stream]||{startTime:1/0,captions:[],endTime:0};const p=d[f.stream];p.startTime=Math.min(p.startTime,f.startTime+l),p.endTime=Math.max(p.endTime,f.endTime+l),p.captions.push(f)}),Object.keys(d).forEach(f=>{const{startTime:p,endTime:m,captions:y}=d[f],b=this.inbandTextTracks_;this.logger_(`adding cues from ${p} -> ${m} for ${f}`),yY(b,this.vhs_.tech_,f),hy(p,m,b[f]),vY({captionArray:y,inbandTextTracks:b,timestampOffset:l})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}handleId3_(t,n,r){if(this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId))return;if(!this.pendingSegment_.hasAppendedData_){this.metadataQueue_.id3.push(this.handleId3_.bind(this,t,n,r));return}this.addMetadataToTextTrack(r,n,this.duration_())}processMetadataQueue_(){this.metadataQueue_.id3.forEach(t=>t()),this.metadataQueue_.caption.forEach(t=>t()),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]}processCallQueue_(){const t=this.callQueue_;this.callQueue_=[],t.forEach(n=>n())}processLoadQueue_(){const t=this.loadQueue_;this.loadQueue_=[],t.forEach(n=>n())}hasEnoughInfoToLoad_(){if(this.loaderType_!=="audio")return!0;const t=this.pendingSegment_;return t?this.getCurrentMediaInfo_()?!ZA({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:t.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}):!0:!1}getCurrentMediaInfo_(t=this.pendingSegment_){return t&&t.trackInfo||this.currentMediaInfo_}getMediaInfo_(t=this.pendingSegment_){return this.getCurrentMediaInfo_(t)||this.startingMediaInfo_}getPendingSegmentPlaylist(){return this.pendingSegment_?this.pendingSegment_.playlist:null}hasEnoughInfoToAppend_(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;const t=this.pendingSegment_,n=this.getCurrentMediaInfo_();if(!t||!n)return!1;const{hasAudio:r,hasVideo:l,isMuxed:d}=n;return!(l&&!t.videoTimingInfo||r&&!this.audioDisabled_&&!d&&!t.audioTimingInfo||ZA({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:t.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}handleData_(t,n){if(this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId))return;if(this.callQueue_.length||!this.hasEnoughInfoToAppend_()){Sf(this),this.callQueue_.push(this.handleData_.bind(this,t,n));return}const r=this.pendingSegment_;if(this.setTimeMapping_(r.timeline),this.updateMediaSecondsLoaded_(r.part||r.segment),this.mediaSource_.readyState!=="closed"){if(t.map&&(t.map=this.initSegmentForMap(t.map,!0),r.segment.map=t.map),t.key&&this.segmentKey(t.key,!0),r.isFmp4=t.isFmp4,r.timingInfo=r.timingInfo||{},r.isFmp4)this.trigger("fmp4"),r.timingInfo.start=r[OP(n.type)].start;else{const l=this.getCurrentMediaInfo_(),d=this.loaderType_==="main"&&l&&l.hasVideo;let f;d&&(f=r.videoTimingInfo.start),r.timingInfo.start=this.trueSegmentStart_({currentStart:r.timingInfo.start,playlist:r.playlist,mediaIndex:r.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:d,firstVideoFrameTimeForData:f,videoTimingInfo:r.videoTimingInfo,audioTimingInfo:r.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(r,n.type),this.updateSourceBufferTimestampOffset_(r),r.isSyncRequest){this.updateTimingInfoEnd_(r),this.syncController_.saveSegmentTimingInfo({segmentInfo:r,shouldSaveTimelineMapping:this.loaderType_==="main"});const l=this.chooseNextRequest_();if(l.mediaIndex!==r.mediaIndex||l.partIndex!==r.partIndex){this.logger_("sync segment was incorrect, not appending");return}this.logger_("sync segment was correct, appending")}r.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(r,n)}}updateAppendInitSegmentStatus(t,n){this.loaderType_==="main"&&typeof t.timestampOffset=="number"&&!t.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[n]!==t.playlist&&(this.appendInitSegment_[n]=!0)}getInitSegmentAndUpdateState_({type:t,initSegment:n,map:r,playlist:l}){if(r){const d=wE(r);if(this.activeInitSegmentId_===d)return null;n=this.initSegmentForMap(r,!0).bytes,this.activeInitSegmentId_=d}return n&&this.appendInitSegment_[t]?(this.playlistOfLastInitSegment_[t]=l,this.appendInitSegment_[t]=!1,this.activeInitSegmentId_=null,n):null}handleQuotaExceededError_({segmentInfo:t,type:n,bytes:r},l){const d=this.sourceUpdater_.audioBuffered(),f=this.sourceUpdater_.videoBuffered();d.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+kh(d).join(", ")),f.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+kh(f).join(", "));const p=d.length?d.start(0):0,m=d.length?d.end(d.length-1):0,y=f.length?f.start(0):0,b=f.length?f.end(f.length-1):0;if(m-p<=uy&&b-y<=uy){this.logger_(`On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: ${r.byteLength}, audio buffer: ${kh(d).join(", ")}, video buffer: ${kh(f).join(", ")}, `),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),this.trigger("error");return}this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:t,type:n,bytes:r}));const A=this.currentTime_()-uy;this.logger_(`On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to ${A}`),this.remove(0,A,()=>{this.logger_(`On QUOTA_EXCEEDED_ERR, retrying append in ${uy}s`),this.waitingOnRemove_=!1,this.quotaExceededErrorRetryTimeout_=St.setTimeout(()=>{this.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),this.quotaExceededErrorRetryTimeout_=null,this.processCallQueue_()},uy*1e3)},!0)}handleAppendError_({segmentInfo:t,type:n,bytes:r},l){if(l){if(l.code===IF){this.handleQuotaExceededError_({segmentInfo:t,type:n,bytes:r});return}this.logger_("Received non QUOTA_EXCEEDED_ERR on append",l),this.error({message:`${n} append of ${r.length}b failed for segment #${t.mediaIndex} in playlist ${t.playlist.id}`,metadata:{errorType:Qt.Error.StreamingFailedToAppendSegment}}),this.trigger("appenderror")}}appendToSourceBuffer_({segmentInfo:t,type:n,initSegment:r,data:l,bytes:d}){if(!d){const p=[l];let m=l.byteLength;r&&(p.unshift(r),m+=r.byteLength),d=mY({bytes:m,segments:p})}const f={segmentInfo:Ih({type:this.loaderType_,segment:t})};this.trigger({type:"segmentappendstart",metadata:f}),this.sourceUpdater_.appendBuffer({segmentInfo:t,type:n,bytes:d},this.handleAppendError_.bind(this,{segmentInfo:t,type:n,bytes:d}))}handleSegmentTimingInfo_(t,n,r){if(!this.pendingSegment_||n!==this.pendingSegment_.requestId)return;const l=this.pendingSegment_.segment,d=`${t}TimingInfo`;l[d]||(l[d]={}),l[d].transmuxerPrependedSeconds=r.prependedContentDuration||0,l[d].transmuxedPresentationStart=r.start.presentation,l[d].transmuxedDecodeStart=r.start.decode,l[d].transmuxedPresentationEnd=r.end.presentation,l[d].transmuxedDecodeEnd=r.end.decode,l[d].baseMediaDecodeTime=r.baseMediaDecodeTime}appendData_(t,n){const{type:r,data:l}=n;if(!l||!l.byteLength||r==="audio"&&this.audioDisabled_)return;const d=this.getInitSegmentAndUpdateState_({type:r,initSegment:n.initSegment,playlist:t.playlist,map:t.isFmp4?t.segment.map:null});this.appendToSourceBuffer_({segmentInfo:t,type:r,initSegment:d,data:l})}loadSegment_(t){if(this.state="WAITING",this.pendingSegment_=t,this.trimBackBuffer_(t),typeof t.timestampOffset=="number"&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),!this.hasEnoughInfoToLoad_()){Sf(this),this.loadQueue_.push(()=>{const n=Us({},t,{forceTimestampOffset:!0});Us(t,this.generateSegmentInfo_(n)),this.isPendingTimestampOffset_=!1,this.updateTransmuxerAndRequestSegment_(t)});return}this.updateTransmuxerAndRequestSegment_(t)}updateTransmuxerAndRequestSegment_(t){this.shouldUpdateTransmuxerTimestampOffset_(t.timestampOffset)&&(this.gopBuffer_.length=0,t.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:t.timestampOffset}));const n=this.createSimplifiedSegmentObj_(t),r=this.isEndOfStream_(t.mediaIndex,t.playlist,t.partIndex),l=this.mediaIndex!==null,d=t.timeline!==this.currentTimeline_&&t.timeline>0,f=r||l&&d;this.logger_(`Requesting
${JF(t.uri)}
${Jp(t)}`),n.map&&!n.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),t.abortRequests=dY({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:n,abortFn:this.handleAbort_.bind(this,t),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",t.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",t.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:f,endedTimelineFn:()=>{this.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:({message:p,level:m,stream:y})=>{this.logger_(`${Jp(t)} logged from transmuxer stream ${y} as a ${m}: ${p}`)},triggerSegmentEventFn:({type:p,segment:m,keyInfo:y,trackInfo:b,timingInfo:_})=>{const w={segmentInfo:Ih({segment:m})};y&&(w.keyInfo=y),b&&(w.trackInfo=b),_&&(w.timingInfo=_),this.trigger({type:p,metadata:w})}})}trimBackBuffer_(t){const n=LY(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);n>0&&this.remove(0,n)}createSimplifiedSegmentObj_(t){const n=t.segment,r=t.part,l=t.segment.key||t.segment.map&&t.segment.map.key,d=t.segment.map&&!t.segment.map.bytes,f={resolvedUri:r?r.resolvedUri:n.resolvedUri,byterange:r?r.byterange:n.byterange,requestId:t.requestId,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith,part:t.part,type:this.loaderType_,start:t.startOfSegment,duration:t.duration,isEncrypted:l,isMediaInitialization:d},p=t.playlist.segments[t.mediaIndex-1];if(p&&p.timeline===n.timeline&&(p.videoTimingInfo?f.baseStartTime=p.videoTimingInfo.transmuxedDecodeEnd:p.audioTimingInfo&&(f.baseStartTime=p.audioTimingInfo.transmuxedDecodeEnd)),n.key){const m=n.key.iv||new Uint32Array([0,0,0,t.mediaIndex+t.playlist.mediaSequence]);f.key=this.segmentKey(n.key),f.key.iv=m}return n.map&&(f.map=this.initSegmentForMap(n.map)),f}saveTransferStats_(t){this.mediaRequests+=1,t&&(this.mediaBytesTransferred+=t.bytesReceived,this.mediaTransferDuration+=t.roundTripTime)}saveBandwidthRelatedStats_(t,n){if(this.pendingSegment_.byteLength=n.bytesReceived,t<LT){this.logger_(`Ignoring segment's bandwidth because its duration of ${t} is less than the min to record ${LT}`);return}const r={bandwidthInfo:{from:this.bandwidth,to:n.bandwidth}};this.trigger({type:"bandwidthupdated",metadata:r}),this.bandwidth=n.bandwidth,this.roundTrip=n.roundTripTime}handleTimeout_(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")}segmentRequestFinished_(t,n,r){if(this.callQueue_.length){this.callQueue_.push(this.segmentRequestFinished_.bind(this,t,n,r));return}if(this.saveTransferStats_(n.stats),!this.pendingSegment_||n.requestId!==this.pendingSegment_.requestId)return;if(t){if(this.pendingSegment_=null,this.state="READY",t.code===jc.ABORTED)return;if(this.pause(),t.code===jc.TIMEOUT){this.handleTimeout_();return}this.mediaRequestsErrored+=1,this.error(t),this.trigger("error");return}const l=this.pendingSegment_;this.saveBandwidthRelatedStats_(l.duration,n.stats),l.endOfAllRequests=n.endOfAllRequests,r.gopInfo&&(this.gopBuffer_=wY(this.gopBuffer_,r.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(l)}setTimeMapping_(t){const n=this.syncController_.mappingForTimeline(t);n!==null&&(this.timeMapping_=n)}updateMediaSecondsLoaded_(t){typeof t.start=="number"&&typeof t.end=="number"?this.mediaSecondsLoaded+=t.end-t.start:this.mediaSecondsLoaded+=t.duration}shouldUpdateTransmuxerTimestampOffset_(t){return t===null?!1:this.loaderType_==="main"&&t!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&t!==this.sourceUpdater_.audioTimestampOffset()}trueSegmentStart_({currentStart:t,playlist:n,mediaIndex:r,firstVideoFrameTimeForData:l,currentVideoTimestampOffset:d,useVideoTimingInfo:f,videoTimingInfo:p,audioTimingInfo:m}){if(typeof t<"u")return t;if(!f)return m.start;const y=n.segments[r-1];return r===0||!y||typeof y.start>"u"||y.end!==l+d?l:p.start}waitForAppendsToComplete_(t){const n=this.getCurrentMediaInfo_(t);if(!n){this.error({message:"No starting media returned, likely due to an unsupported media format.",playlistExclusionDuration:1/0}),this.trigger("error");return}const{hasAudio:r,hasVideo:l,isMuxed:d}=n,f=this.loaderType_==="main"&&l,p=!this.audioDisabled_&&r&&!d;if(t.waitingOnAppends=0,!t.hasAppendedData_){!t.timingInfo&&typeof t.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!0),t.timingInfo={start:0},t.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(t),this.processMetadataQueue_()),this.checkAppendsDone_(t);return}f&&t.waitingOnAppends++,p&&t.waitingOnAppends++,f&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,t)),p&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,t))}checkAppendsDone_(t){this.checkForAbort_(t.requestId)||(t.waitingOnAppends--,t.waitingOnAppends===0&&this.handleAppendsDone_())}checkForIllegalMediaSwitch(t){const n=RY(this.loaderType_,this.getCurrentMediaInfo_(),t);return n?(this.error({message:n,playlistExclusionDuration:1/0}),this.trigger("error"),!0):!1}updateSourceBufferTimestampOffset_(t){if(t.timestampOffset===null||typeof t.timingInfo.start!="number"||t.changedTimestampOffset||this.loaderType_!=="main")return;let n=!1;t.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:t.segment.videoTimingInfo,audioTimingInfo:t.segment.audioTimingInfo,timingInfo:t.timingInfo}),t.changedTimestampOffset=!0,t.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(t.timestampOffset),n=!0),t.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(t.timestampOffset),n=!0),n&&this.trigger("timestampoffset")}getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:t,audioTimingInfo:n,timingInfo:r}){return this.useDtsForTimestampOffset_?t&&typeof t.transmuxedDecodeStart=="number"?t.transmuxedDecodeStart:n&&typeof n.transmuxedDecodeStart=="number"?n.transmuxedDecodeStart:r.start:r.start}updateTimingInfoEnd_(t){t.timingInfo=t.timingInfo||{};const n=this.getMediaInfo_(),l=this.loaderType_==="main"&&n&&n.hasVideo&&t.videoTimingInfo?t.videoTimingInfo:t.audioTimingInfo;l&&(t.timingInfo.end=typeof l.end=="number"?l.end:l.start+t.duration)}handleAppendsDone_(){if(this.pendingSegment_){const m={segmentInfo:Ih({type:this.loaderType_,segment:this.pendingSegment_})};this.trigger({type:"appendsdone",metadata:m})}if(!this.pendingSegment_){this.state="READY",this.paused()||this.monitorBuffer_();return}const t=this.pendingSegment_;t.part&&t.part.syncInfo?t.part.syncInfo.markAppended():t.segment.syncInfo&&t.segment.syncInfo.markAppended(),this.updateTimingInfoEnd_(t),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:t,shouldSaveTimelineMapping:this.loaderType_==="main"});const n=FY(t,this.sourceType_);if(n&&(n.severity==="warn"?Qt.log.warn(n.message):this.logger_(n.message)),this.recordThroughput_(t),this.pendingSegment_=null,this.state="READY",t.isSyncRequest&&(this.trigger("syncinfoupdate"),!t.hasAppendedData_)){this.logger_(`Throwing away un-appended sync request ${Jp(t)}`);return}this.logger_(`Appended ${Jp(t)}`),this.addSegmentMetadataCue_(t),this.fetchAtBuffer_=!0,this.currentTimeline_!==t.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:t.timeline}),this.loaderType_==="main"&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:t.timeline})),this.currentTimeline_=t.timeline,this.trigger("syncinfoupdate");const r=t.segment,l=t.part,d=r.end&&this.currentTime_()-r.end>t.playlist.targetDuration*3,f=l&&l.end&&this.currentTime_()-l.end>t.playlist.partTargetDuration*3;if(d||f){this.logger_(`bad ${d?"segment":"part"} ${Jp(t)}`),this.resetEverything();return}this.mediaIndex!==null&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=t.mediaIndex,this.partIndex=t.partIndex,this.isEndOfStream_(t.mediaIndex,t.playlist,t.partIndex)&&this.endOfStream(),this.trigger("appended"),t.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}recordThroughput_(t){if(t.duration<LT){this.logger_(`Ignoring segment's throughput because its duration of ${t.duration} is less than the min to record ${LT}`);return}const n=this.throughput.rate,r=Date.now()-t.endOfAllRequests+1,l=Math.floor(t.byteLength/r*8*1e3);this.throughput.rate+=(l-n)/++this.throughput.count}addSegmentMetadataCue_(t){if(!this.segmentMetadataTrack_)return;const n=t.segment,r=n.start,l=n.end;if(!NP(r)||!NP(l))return;hy(r,l,this.segmentMetadataTrack_);const d=St.WebKitDataCue||St.VTTCue,f={custom:n.custom,dateTimeObject:n.dateTimeObject,dateTimeString:n.dateTimeString,programDateTime:n.programDateTime,bandwidth:t.playlist.attributes.BANDWIDTH,resolution:t.playlist.attributes.RESOLUTION,codecs:t.playlist.attributes.CODECS,byteLength:t.byteLength,uri:t.uri,timeline:t.timeline,playlist:t.playlist.id,start:r,end:l},p=JSON.stringify(f),m=new d(r,l,p);m.value=f,this.segmentMetadataTrack_.addCue(m)}}function Pd(){}const ZF=function(u){return typeof u!="string"?u:u.replace(/./,t=>t.toUpperCase())},UY=["video","audio"],tw=(u,t)=>{const n=t[`${u}Buffer`];return n&&n.updating||t.queuePending[u]},BY=(u,t)=>{for(let n=0;n<t.length;n++){const r=t[n];if(r.type==="mediaSource")return null;if(r.type===u)return n}return null},mg=(u,t)=>{if(t.queue.length===0)return;let n=0,r=t.queue[n];if(r.type==="mediaSource"){!t.updating()&&t.mediaSource.readyState!=="closed"&&(t.queue.shift(),r.action(t),r.doneFn&&r.doneFn(),mg("audio",t),mg("video",t));return}if(u!=="mediaSource"&&!(!t.ready()||t.mediaSource.readyState==="closed"||tw(u,t))){if(r.type!==u){if(n=BY(u,t.queue),n===null)return;r=t.queue[n]}if(t.queue.splice(n,1),t.queuePending[u]=r,r.action(u,t),!r.doneFn){t.queuePending[u]=null,mg(u,t);return}}},eU=(u,t)=>{const n=t[`${u}Buffer`],r=ZF(u);n&&(n.removeEventListener("updateend",t[`on${r}UpdateEnd_`]),n.removeEventListener("error",t[`on${r}Error_`]),t.codecs[u]=null,t[`${u}Buffer`]=null)},Pc=(u,t)=>u&&t&&Array.prototype.indexOf.call(u.sourceBuffers,t)!==-1,Xl={appendBuffer:(u,t,n)=>(r,l)=>{const d=l[`${r}Buffer`];if(Pc(l.mediaSource,d)){l.logger_(`Appending segment ${t.mediaIndex}'s ${u.length} bytes to ${r}Buffer`);try{d.appendBuffer(u)}catch(f){l.logger_(`Error with code ${f.code} `+(f.code===IF?"(QUOTA_EXCEEDED_ERR) ":"")+`when appending segment ${t.mediaIndex} to ${r}Buffer`),l.queuePending[r]=null,n(f)}}},remove:(u,t)=>(n,r)=>{const l=r[`${n}Buffer`];if(Pc(r.mediaSource,l)){r.logger_(`Removing ${u} to ${t} from ${n}Buffer`);try{l.remove(u,t)}catch{r.logger_(`Remove ${u} to ${t} from ${n}Buffer failed`)}}},timestampOffset:u=>(t,n)=>{const r=n[`${t}Buffer`];Pc(n.mediaSource,r)&&(n.logger_(`Setting ${t}timestampOffset to ${u}`),r.timestampOffset=u)},callback:u=>(t,n)=>{u()},endOfStream:u=>t=>{if(t.mediaSource.readyState==="open"){t.logger_(`Calling mediaSource endOfStream(${u||""})`);try{t.mediaSource.endOfStream(u)}catch(n){Qt.log.warn("Failed to call media source endOfStream",n)}}},duration:u=>t=>{t.logger_(`Setting mediaSource duration to ${u}`);try{t.mediaSource.duration=u}catch(n){Qt.log.warn("Failed to set media source duration",n)}},abort:()=>(u,t)=>{if(t.mediaSource.readyState!=="open")return;const n=t[`${u}Buffer`];if(Pc(t.mediaSource,n)){t.logger_(`calling abort on ${u}Buffer`);try{n.abort()}catch(r){Qt.log.warn(`Failed to abort on ${u}Buffer`,r)}}},addSourceBuffer:(u,t)=>n=>{const r=ZF(u),l=Eg(t);n.logger_(`Adding ${u}Buffer with codec ${t} to mediaSource`);const d=n.mediaSource.addSourceBuffer(l);d.addEventListener("updateend",n[`on${r}UpdateEnd_`]),d.addEventListener("error",n[`on${r}Error_`]),n.codecs[u]=t,n[`${u}Buffer`]=d},removeSourceBuffer:u=>t=>{const n=t[`${u}Buffer`];if(eU(u,t),!!Pc(t.mediaSource,n)){t.logger_(`Removing ${u}Buffer with codec ${t.codecs[u]} from mediaSource`);try{t.mediaSource.removeSourceBuffer(n)}catch(r){Qt.log.warn(`Failed to removeSourceBuffer ${u}Buffer`,r)}}},changeType:u=>(t,n)=>{const r=n[`${t}Buffer`],l=Eg(u);if(!Pc(n.mediaSource,r))return;const d=u.substring(0,u.indexOf(".")),f=n.codecs[t];if(f.substring(0,f.indexOf("."))===d)return;const m={codecsChangeInfo:{from:f,to:u}};n.trigger({type:"codecschange",metadata:m}),n.logger_(`changing ${t}Buffer codec from ${f} to ${u}`);try{r.changeType(l),n.codecs[t]=u}catch(y){m.errorType=Qt.Error.StreamingCodecsChangeError,m.error=y,y.metadata=m,n.error_=y,n.trigger("error"),Qt.log.warn(`Failed to changeType on ${t}Buffer`,y)}}},Ql=({type:u,sourceUpdater:t,action:n,doneFn:r,name:l})=>{t.queue.push({type:u,action:n,doneFn:r,name:l}),mg(u,t)},UP=(u,t)=>n=>{const r=t[`${u}Buffered`](),l=J7(r);if(t.logger_(`received "updateend" event for ${u} Source Buffer: `,l),t.queuePending[u]){const d=t.queuePending[u].doneFn;t.queuePending[u]=null,d&&d(t[`${u}Error_`])}mg(u,t)};class tU extends Qt.EventTarget{constructor(t){super(),this.mediaSource=t,this.sourceopenListener_=()=>mg("mediaSource",this),this.mediaSource.addEventListener("sourceopen",this.sourceopenListener_),this.logger_=Au("SourceUpdater"),this.audioTimestampOffset_=0,this.videoTimestampOffset_=0,this.queue=[],this.queuePending={audio:null,video:null},this.delayedAudioAppendQueue_=[],this.videoAppendQueued_=!1,this.codecs={},this.onVideoUpdateEnd_=UP("video",this),this.onAudioUpdateEnd_=UP("audio",this),this.onVideoError_=n=>{this.videoError_=n},this.onAudioError_=n=>{this.audioError_=n},this.createdSourceBuffers_=!1,this.initializedEme_=!1,this.triggeredReady_=!1}initializedEme(){this.initializedEme_=!0,this.triggerReady()}hasCreatedSourceBuffers(){return this.createdSourceBuffers_}hasInitializedAnyEme(){return this.initializedEme_}ready(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()}createSourceBuffers(t){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(t),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())}triggerReady(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))}addSourceBuffer(t,n){Ql({type:"mediaSource",sourceUpdater:this,action:Xl.addSourceBuffer(t,n),name:"addSourceBuffer"})}abort(t){Ql({type:t,sourceUpdater:this,action:Xl.abort(t),name:"abort"})}removeSourceBuffer(t){if(!this.canRemoveSourceBuffer()){Qt.log.error("removeSourceBuffer is not supported!");return}Ql({type:"mediaSource",sourceUpdater:this,action:Xl.removeSourceBuffer(t),name:"removeSourceBuffer"})}canRemoveSourceBuffer(){return!Qt.browser.IS_FIREFOX&&St.MediaSource&&St.MediaSource.prototype&&typeof St.MediaSource.prototype.removeSourceBuffer=="function"}static canChangeType(){return St.SourceBuffer&&St.SourceBuffer.prototype&&typeof St.SourceBuffer.prototype.changeType=="function"}canChangeType(){return this.constructor.canChangeType()}changeType(t,n){if(!this.canChangeType()){Qt.log.error("changeType is not supported!");return}Ql({type:t,sourceUpdater:this,action:Xl.changeType(n),name:"changeType"})}addOrChangeSourceBuffers(t){if(!t||typeof t!="object"||Object.keys(t).length===0)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(t).forEach(n=>{const r=t[n];if(!this.hasCreatedSourceBuffers())return this.addSourceBuffer(n,r);this.canChangeType()&&this.changeType(n,r)})}appendBuffer(t,n){const{segmentInfo:r,type:l,bytes:d}=t;if(this.processedAppend_=!0,l==="audio"&&this.videoBuffer&&!this.videoAppendQueued_){this.delayedAudioAppendQueue_.push([t,n]),this.logger_(`delayed audio append of ${d.length} until video append`);return}const f=n;if(Ql({type:l,sourceUpdater:this,action:Xl.appendBuffer(d,r||{mediaIndex:-1},f),doneFn:n,name:"appendBuffer"}),l==="video"){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;const p=this.delayedAudioAppendQueue_.slice();this.logger_(`queuing delayed audio ${p.length} appendBuffers`),this.delayedAudioAppendQueue_.length=0,p.forEach(m=>{this.appendBuffer.apply(this,m)})}}audioBuffered(){return Pc(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:$a()}videoBuffered(){return Pc(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:$a()}buffered(){const t=Pc(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,n=Pc(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return n&&!t?this.audioBuffered():t&&!n?this.videoBuffered():eK(this.audioBuffered(),this.videoBuffered())}setDuration(t,n=Pd){Ql({type:"mediaSource",sourceUpdater:this,action:Xl.duration(t),name:"duration",doneFn:n})}endOfStream(t=null,n=Pd){typeof t!="string"&&(t=void 0),Ql({type:"mediaSource",sourceUpdater:this,action:Xl.endOfStream(t),name:"endOfStream",doneFn:n})}removeAudio(t,n,r=Pd){if(!this.audioBuffered().length||this.audioBuffered().end(0)===0){r();return}Ql({type:"audio",sourceUpdater:this,action:Xl.remove(t,n),doneFn:r,name:"remove"})}removeVideo(t,n,r=Pd){if(!this.videoBuffered().length||this.videoBuffered().end(0)===0){r();return}Ql({type:"video",sourceUpdater:this,action:Xl.remove(t,n),doneFn:r,name:"remove"})}updating(){return!!(tw("audio",this)||tw("video",this))}audioTimestampOffset(t){return typeof t<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==t&&(Ql({type:"audio",sourceUpdater:this,action:Xl.timestampOffset(t),name:"timestampOffset"}),this.audioTimestampOffset_=t),this.audioTimestampOffset_}videoTimestampOffset(t){return typeof t<"u"&&this.videoBuffer&&this.videoTimestampOffset_!==t&&(Ql({type:"video",sourceUpdater:this,action:Xl.timestampOffset(t),name:"timestampOffset"}),this.videoTimestampOffset_=t),this.videoTimestampOffset_}audioQueueCallback(t){this.audioBuffer&&Ql({type:"audio",sourceUpdater:this,action:Xl.callback(t),name:"callback"})}videoQueueCallback(t){this.videoBuffer&&Ql({type:"video",sourceUpdater:this,action:Xl.callback(t),name:"callback"})}dispose(){this.trigger("dispose"),UY.forEach(t=>{this.abort(t),this.canRemoveSourceBuffer()?this.removeSourceBuffer(t):this[`${t}QueueCallback`](()=>eU(t,this))}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()}}const BP=u=>decodeURIComponent(escape(String.fromCharCode.apply(null,u))),zY=u=>{const t=new Uint8Array(u);return Array.from(t).map(n=>n.toString(16).padStart(2,"0")).join("")},zP=new Uint8Array(`

`.split("").map(u=>u.charCodeAt(0)));class jY extends Error{constructor(){super("Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")}}class qY extends ew{constructor(t,n={}){super(t,n),this.mediaSource_=null,this.subtitlesTrack_=null,this.featuresNativeTextTracks_=t.featuresNativeTextTracks,this.loadVttJs=t.loadVttJs,this.shouldSaveSegmentTimingInfo_=!1}buffered_(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return $a();const t=this.subtitlesTrack_.cues,n=t[0].startTime,r=t[t.length-1].startTime;return $a([[n,r]])}initSegmentForMap(t,n=!1){if(!t)return null;const r=wE(t);let l=this.initSegments_[r];if(n&&!l&&t.bytes){const d=zP.byteLength+t.bytes.byteLength,f=new Uint8Array(d);f.set(t.bytes),f.set(zP,t.bytes.byteLength),this.initSegments_[r]=l={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:f}}return l||t}couldBeginLoading_(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}init_(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()}track(t){return typeof t>"u"?this.subtitlesTrack_:(this.subtitlesTrack_=t,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)}remove(t,n){hy(t,n,this.subtitlesTrack_)}fillBuffer_(){const t=this.chooseNextRequest_();if(t){if(this.syncController_.timestampOffsetForTimeline(t.timeline)===null){const n=()=>{this.state="READY",this.paused()||this.monitorBuffer_()};this.syncController_.one("timestampoffset",n),this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(t)}}timestampOffsetForSegment_(){return null}chooseNextRequest_(){return this.skipEmptySegments_(super.chooseNextRequest_())}skipEmptySegments_(t){for(;t&&t.segment.empty;){if(t.mediaIndex+1>=t.playlist.segments.length){t=null;break}t=this.generateSegmentInfo_({playlist:t.playlist,mediaIndex:t.mediaIndex+1,startOfSegment:t.startOfSegment+t.duration,isSyncRequest:t.isSyncRequest})}return t}stopForError(t){this.error(t),this.state="READY",this.pause(),this.trigger("error")}segmentRequestFinished_(t,n,r){if(!this.subtitlesTrack_){this.state="READY";return}if(this.saveTransferStats_(n.stats),!this.pendingSegment_){this.state="READY",this.mediaRequestsAborted+=1;return}if(t){t.code===jc.TIMEOUT&&this.handleTimeout_(),t.code===jc.ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(t);return}const l=this.pendingSegment_,d=r.mp4VttCues&&r.mp4VttCues.length;d&&(l.mp4VttCues=r.mp4VttCues),this.saveBandwidthRelatedStats_(l.duration,n.stats),n.key&&this.segmentKey(n.key,!0),this.state="APPENDING",this.trigger("appending");const f=l.segment;if(f.map&&(f.map.bytes=n.map.bytes),l.bytes=n.bytes,typeof St.WebVTT!="function"&&typeof this.loadVttJs=="function"){this.state="WAITING_ON_VTTJS",this.loadVttJs().then(()=>this.segmentRequestFinished_(t,n,r),()=>this.stopForError({message:"Error loading vtt.js"}));return}f.requested=!0;try{this.parseVTTCues_(l)}catch(p){this.stopForError({message:p.message,metadata:{errorType:Qt.Error.StreamingVttParserError,error:p}});return}if(d||this.updateTimeMapping_(l,this.syncController_.timelines[l.timeline],this.playlist_),l.cues.length?l.timingInfo={start:l.cues[0].startTime,end:l.cues[l.cues.length-1].endTime}:l.timingInfo={start:l.startOfSegment,end:l.startOfSegment+l.duration},l.isSyncRequest){this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";return}l.byteLength=l.bytes.byteLength,this.mediaSecondsLoaded+=f.duration,l.cues.forEach(p=>{this.subtitlesTrack_.addCue(this.featuresNativeTextTracks_?new St.VTTCue(p.startTime,p.endTime,p.text):p)}),xY(this.subtitlesTrack_),this.handleAppendsDone_()}handleData_(t,n){const r=t&&t.type==="vtt",l=n&&n.type==="text";r&&l&&super.handleData_(t,n)}updateTimingInfoEnd_(){}parseMp4VttCues_(t){const n=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();t.mp4VttCues.forEach(r=>{const l=r.start+n,d=r.end+n,f=new St.VTTCue(l,d,r.cueText);r.settings&&r.settings.split(" ").forEach(p=>{const m=p.split(":"),y=m[0],b=m[1];f[y]=isNaN(b)?b:Number(b)}),t.cues.push(f)})}parseVTTCues_(t){let n,r=!1;if(typeof St.WebVTT!="function")throw new jY;if(t.cues=[],t.timestampmap={MPEGTS:0,LOCAL:0},t.mp4VttCues){this.parseMp4VttCues_(t);return}typeof St.TextDecoder=="function"?n=new St.TextDecoder("utf8"):(n=St.WebVTT.StringDecoder(),r=!0);const l=new St.WebVTT.Parser(St,St.vttjs,n);if(l.oncue=t.cues.push.bind(t.cues),l.ontimestampmap=f=>{t.timestampmap=f},l.onparsingerror=f=>{Qt.log.warn("Error encountered when parsing cues: "+f.message)},t.segment.map){let f=t.segment.map.bytes;r&&(f=BP(f)),l.parse(f)}let d=t.bytes;r&&(d=BP(d)),l.parse(d),l.flush()}updateTimeMapping_(t,n,r){const l=t.segment;if(!n)return;if(!t.cues.length){l.empty=!0;return}const{MPEGTS:d,LOCAL:f}=t.timestampmap,m=d/Ch.ONE_SECOND_IN_TS-f+n.mapping;if(t.cues.forEach(y=>{const b=y.endTime-y.startTime,_=this.handleRollover_(y.startTime+m,n.time);y.startTime=Math.max(_,0),y.endTime=Math.max(_+b,0)}),!r.syncInfo){const y=t.cues[0].startTime,b=t.cues[t.cues.length-1].startTime;r.syncInfo={mediaSequence:r.mediaSequence+t.mediaIndex,time:Math.min(y,b-l.duration)}}}handleRollover_(t,n){if(n===null)return t;let r=t*Ch.ONE_SECOND_IN_TS;const l=n*Ch.ONE_SECOND_IN_TS;let d;for(l<r?d=-8589934592:d=8589934592;Math.abs(r-l)>4294967296;)r+=d;return r/Ch.ONE_SECOND_IN_TS}}const HY=function(u,t){const n=u.cues;for(let r=0;r<n.length;r++){const l=n[r];if(t>=l.adStartTime&&t<=l.adEndTime)return l}return null},GY=function(u,t,n=0){if(!u.segments)return;let r=n,l;for(let d=0;d<u.segments.length;d++){const f=u.segments[d];if(l||(l=HY(t,r+f.duration/2)),l){if("cueIn"in f){l.endTime=r,l.adEndTime=r,r+=f.duration,l=null;continue}if(r<l.endTime){r+=f.duration;continue}l.endTime+=f.duration}else if("cueOut"in f&&(l=new St.VTTCue(r,r+f.duration,f.cueOut),l.adStartTime=r,l.adEndTime=r+parseFloat(f.cueOut),t.addCue(l)),"cueOutCont"in f){const[p,m]=f.cueOutCont.split("/").map(parseFloat);l=new St.VTTCue(r,r+f.duration,""),l.adStartTime=r-p,l.adEndTime=l.adStartTime+m,t.addCue(l)}r+=f.duration}};class jP{constructor({start:t,end:n,segmentIndex:r,partIndex:l=null,appended:d=!1}){this.start_=t,this.end_=n,this.segmentIndex_=r,this.partIndex_=l,this.appended_=d}isInRange(t){return t>=this.start&&t<this.end}markAppended(){this.appended_=!0}resetAppendedStatus(){this.appended_=!1}get isAppended(){return this.appended_}get start(){return this.start_}get end(){return this.end_}get segmentIndex(){return this.segmentIndex_}get partIndex(){return this.partIndex_}}class VY{constructor(t,n=[]){this.segmentSyncInfo_=t,this.partsSyncInfo_=n}get segmentSyncInfo(){return this.segmentSyncInfo_}get partsSyncInfo(){return this.partsSyncInfo_}get hasPartsSyncInfo(){return this.partsSyncInfo_.length>0}resetAppendStatus(){this.segmentSyncInfo_.resetAppendedStatus(),this.partsSyncInfo_.forEach(t=>t.resetAppendedStatus())}}class nU{constructor(){this.storage_=new Map,this.diagnostics_="",this.isReliable_=!1,this.start_=-1/0,this.end_=1/0}get start(){return this.start_}get end(){return this.end_}get diagnostics(){return this.diagnostics_}get isReliable(){return this.isReliable_}resetAppendedStatus(){this.storage_.forEach(t=>t.resetAppendStatus())}update(t,n){const{mediaSequence:r,segments:l}=t;if(this.isReliable_=this.isReliablePlaylist_(r,l),!!this.isReliable_)return this.updateStorage_(l,r,this.calculateBaseTime_(r,l,n))}getSyncInfoForTime(t){for(const{segmentSyncInfo:n,partsSyncInfo:r}of this.storage_.values())if(r.length){for(const l of r)if(l.isInRange(t))return l}else if(n.isInRange(t))return n;return null}getSyncInfoForMediaSequence(t){return this.storage_.get(t)}updateStorage_(t,n,r){const l=new Map;let d=`
`,f=r,p=n;this.start_=f,t.forEach((m,y)=>{const b=this.storage_.get(p),_=f,A=_+m.duration,w=!!(b&&b.segmentSyncInfo&&b.segmentSyncInfo.isAppended),T=new jP({start:_,end:A,appended:w,segmentIndex:y});m.syncInfo=T;let k=f;const U=(m.parts||[]).map((Y,se)=>{const te=k,Re=k+Y.duration,Be=!!(b&&b.partsSyncInfo&&b.partsSyncInfo[se]&&b.partsSyncInfo[se].isAppended),j=new jP({start:te,end:Re,appended:Be,segmentIndex:y,partIndex:se});return k=Re,d+=`Media Sequence: ${p}.${se} | Range: ${te} --> ${Re} | Appended: ${Be}
`,Y.syncInfo=j,j});l.set(p,new VY(T,U)),d+=`${JF(m.resolvedUri)} | Media Sequence: ${p} | Range: ${_} --> ${A} | Appended: ${w}
`,p++,f=A}),this.end_=f,this.storage_=l,this.diagnostics_=d}calculateBaseTime_(t,n,r){if(!this.storage_.size)return 0;if(this.storage_.has(t))return this.storage_.get(t).segmentSyncInfo.start;const l=Math.min(...this.storage_.keys());if(t<l){const d=l-t;let f=this.storage_.get(l).segmentSyncInfo.start;for(let p=0;p<d;p++){const m=n[p];f-=m.duration}return f}return r}isReliablePlaylist_(t,n){return t!=null&&Array.isArray(n)&&n.length}}class qP extends nU{constructor(t){super(),this.parent_=t}calculateBaseTime_(t,n,r){if(!this.storage_.size){const l=this.parent_.getSyncInfoForMediaSequence(t);return l?l.segmentSyncInfo.start:0}return super.calculateBaseTime_(t,n,r)}}const $Y=86400,oA=[{name:"VOD",run:(u,t,n,r,l)=>n!==1/0?{time:0,segmentIndex:0,partIndex:null}:null},{name:"MediaSequence",run:(u,t,n,r,l,d)=>{const f=u.getMediaSequenceSync(d);if(!f||!f.isReliable)return null;const p=f.getSyncInfoForTime(l);return p?{time:p.start,partIndex:p.partIndex,segmentIndex:p.segmentIndex}:null}},{name:"ProgramDateTime",run:(u,t,n,r,l)=>{if(!Object.keys(u.timelineToDatetimeMappings).length)return null;let d=null,f=null;const p=VA(t);l=l||0;for(let m=0;m<p.length;m++){const y=t.endList||l===0?m:p.length-(m+1),b=p[y],_=b.segment,A=u.timelineToDatetimeMappings[_.timeline];if(!A||!_.dateTimeObject)continue;let T=_.dateTimeObject.getTime()/1e3+A;if(_.parts&&typeof b.partIndex=="number")for(let U=0;U<b.partIndex;U++)T+=_.parts[U].duration;const k=Math.abs(l-T);if(f!==null&&(k===0||f<k))break;f=k,d={time:T,segmentIndex:b.segmentIndex,partIndex:b.partIndex}}return d}},{name:"Segment",run:(u,t,n,r,l)=>{let d=null,f=null;l=l||0;const p=VA(t);for(let m=0;m<p.length;m++){const y=t.endList||l===0?m:p.length-(m+1),b=p[y],_=b.segment,A=b.part&&b.part.start||_&&_.start;if(_.timeline===r&&typeof A<"u"){const w=Math.abs(l-A);if(f!==null&&f<w)break;(!d||f===null||f>=w)&&(f=w,d={time:A,segmentIndex:b.segmentIndex,partIndex:b.partIndex})}}return d}},{name:"Discontinuity",run:(u,t,n,r,l)=>{let d=null;if(l=l||0,t.discontinuityStarts&&t.discontinuityStarts.length){let f=null;for(let p=0;p<t.discontinuityStarts.length;p++){const m=t.discontinuityStarts[p],y=t.discontinuitySequence+p+1,b=u.discontinuities[y];if(b){const _=Math.abs(l-b.time);if(f!==null&&f<_)break;(!d||f===null||f>=_)&&(f=_,d={time:b.time,segmentIndex:m,partIndex:null})}}}return d}},{name:"Playlist",run:(u,t,n,r,l)=>t.syncInfo?{time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence,partIndex:null}:null}];class KY extends Qt.EventTarget{constructor(t={}){super(),this.timelines=[],this.discontinuities=[],this.timelineToDatetimeMappings={};const n=new nU,r=new qP(n),l=new qP(n);this.mediaSequenceStorage_={main:n,audio:r,vtt:l},this.logger_=Au("SyncController")}getMediaSequenceSync(t){return this.mediaSequenceStorage_[t]||null}getSyncPoint(t,n,r,l,d){if(n!==1/0)return oA.find(({name:m})=>m==="VOD").run(this,t,n);const f=this.runStrategies_(t,n,r,l,d);if(!f.length)return null;for(const p of f){const{syncPoint:m,strategy:y}=p,{segmentIndex:b,time:_}=m;if(b<0)continue;const A=t.segments[b],w=_,T=w+A.duration;if(this.logger_(`Strategy: ${y}. Current time: ${l}. selected segment: ${b}. Time: [${w} -> ${T}]}`),l>=w&&l<T)return this.logger_("Found sync point with exact match: ",m),m}return this.selectSyncPoint_(f,{key:"time",value:l})}getExpiredTime(t,n){if(!t||!t.segments)return null;const r=this.runStrategies_(t,n,t.discontinuitySequence,0);if(!r.length)return null;const l=this.selectSyncPoint_(r,{key:"segmentIndex",value:0});return l.segmentIndex>0&&(l.time*=-1),Math.abs(l.time+by({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:l.segmentIndex,endIndex:0}))}runStrategies_(t,n,r,l,d){const f=[];for(let p=0;p<oA.length;p++){const m=oA[p],y=m.run(this,t,n,r,l,d);y&&(y.strategy=m.name,f.push({strategy:m.name,syncPoint:y}))}return f}selectSyncPoint_(t,n){let r=t[0].syncPoint,l=Math.abs(t[0].syncPoint[n.key]-n.value),d=t[0].strategy;for(let f=1;f<t.length;f++){const p=Math.abs(t[f].syncPoint[n.key]-n.value);p<l&&(l=p,r=t[f].syncPoint,d=t[f].strategy)}return this.logger_(`syncPoint for [${n.key}: ${n.value}] chosen with strategy [${d}]: [time:${r.time}, segmentIndex:${r.segmentIndex}`+(typeof r.partIndex=="number"?`,partIndex:${r.partIndex}`:"")+"]"),r}saveExpiredSegmentInfo(t,n){const r=n.mediaSequence-t.mediaSequence;if(r>$Y){Qt.log.warn(`Not saving expired segment info. Media sequence gap ${r} is too large.`);return}for(let l=r-1;l>=0;l--){const d=t.segments[l];if(d&&typeof d.start<"u"){n.syncInfo={mediaSequence:t.mediaSequence+l,time:d.start},this.logger_(`playlist refresh sync: [time:${n.syncInfo.time}, mediaSequence: ${n.syncInfo.mediaSequence}]`),this.trigger("syncinfoupdate");break}}}setDateTimeMappingForStart(t){if(this.timelineToDatetimeMappings={},t.segments&&t.segments.length&&t.segments[0].dateTimeObject){const n=t.segments[0],r=n.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[n.timeline]=-r}}saveSegmentTimingInfo({segmentInfo:t,shouldSaveTimelineMapping:n}){const r=this.calculateSegmentTimeMapping_(t,t.timingInfo,n),l=t.segment;r&&(this.saveDiscontinuitySyncInfo_(t),t.playlist.syncInfo||(t.playlist.syncInfo={mediaSequence:t.playlist.mediaSequence+t.mediaIndex,time:l.start}));const d=l.dateTimeObject;l.discontinuity&&n&&d&&(this.timelineToDatetimeMappings[l.timeline]=-(d.getTime()/1e3))}timestampOffsetForTimeline(t){return typeof this.timelines[t]>"u"?null:this.timelines[t].time}mappingForTimeline(t){return typeof this.timelines[t]>"u"?null:this.timelines[t].mapping}calculateSegmentTimeMapping_(t,n,r){const l=t.segment,d=t.part;let f=this.timelines[t.timeline],p,m;if(typeof t.timestampOffset=="number")f={time:t.startOfSegment,mapping:t.startOfSegment-n.start},r&&(this.timelines[t.timeline]=f,this.trigger("timestampoffset"),this.logger_(`time mapping for timeline ${t.timeline}: [time: ${f.time}] [mapping: ${f.mapping}]`)),p=t.startOfSegment,m=n.end+f.mapping;else if(f)p=n.start+f.mapping,m=n.end+f.mapping;else return!1;return d&&(d.start=p,d.end=m),(!l.start||p<l.start)&&(l.start=p),l.end=m,!0}saveDiscontinuitySyncInfo_(t){const n=t.playlist,r=t.segment;if(r.discontinuity)this.discontinuities[r.timeline]={time:r.start,accuracy:0};else if(n.discontinuityStarts&&n.discontinuityStarts.length)for(let l=0;l<n.discontinuityStarts.length;l++){const d=n.discontinuityStarts[l],f=n.discontinuitySequence+l+1,p=d-t.mediaIndex,m=Math.abs(p);if(!this.discontinuities[f]||this.discontinuities[f].accuracy>m){let y;p<0?y=r.start-by({defaultDuration:n.targetDuration,durationList:n.segments,startIndex:t.mediaIndex,endIndex:d}):y=r.end+by({defaultDuration:n.targetDuration,durationList:n.segments,startIndex:t.mediaIndex+1,endIndex:d}),this.discontinuities[f]={time:y,accuracy:m}}}}dispose(){this.trigger("dispose"),this.off()}}class YY extends Qt.EventTarget{constructor(){super(),this.pendingTimelineChanges_={},this.lastTimelineChanges_={}}clearPendingTimelineChange(t){this.pendingTimelineChanges_[t]=null,this.trigger("pendingtimelinechange")}pendingTimelineChange({type:t,from:n,to:r}){return typeof n=="number"&&typeof r=="number"&&(this.pendingTimelineChanges_[t]={type:t,from:n,to:r},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[t]}lastTimelineChange({type:t,from:n,to:r}){if(typeof n=="number"&&typeof r=="number"){this.lastTimelineChanges_[t]={type:t,from:n,to:r},delete this.pendingTimelineChanges_[t];const l={timelineChangeInfo:{from:n,to:r}};this.trigger({type:"timelinechange",metadata:l})}return this.lastTimelineChanges_[t]}dispose(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()}}const WY=jF(qF(function(){var u=function(){function k(){this.listeners={}}var U=k.prototype;return U.on=function(se,te){this.listeners[se]||(this.listeners[se]=[]),this.listeners[se].push(te)},U.off=function(se,te){if(!this.listeners[se])return!1;var Re=this.listeners[se].indexOf(te);return this.listeners[se]=this.listeners[se].slice(0),this.listeners[se].splice(Re,1),Re>-1},U.trigger=function(se){var te=this.listeners[se];if(te)if(arguments.length===2)for(var Re=te.length,Be=0;Be<Re;++Be)te[Be].call(this,arguments[1]);else for(var j=Array.prototype.slice.call(arguments,1),M=te.length,Z=0;Z<M;++Z)te[Z].apply(this,j)},U.dispose=function(){this.listeners={}},U.pipe=function(se){this.on("data",function(te){se.push(te)})},k}();/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */function t(k){return k.subarray(0,k.byteLength-k[k.byteLength-1])}/*! @name aes-decrypter @version 4.0.2 @license Apache-2.0 */const n=function(){const k=[[[],[],[],[],[]],[[],[],[],[],[]]],U=k[0],Y=k[1],se=U[4],te=Y[4];let Re,Be,j;const M=[],Z=[];let K,x,ue,$e,xe,lt;for(Re=0;Re<256;Re++)Z[(M[Re]=Re<<1^(Re>>7)*283)^Re]=Re;for(Be=j=0;!se[Be];Be^=K||1,j=Z[j]||1)for($e=j^j<<1^j<<2^j<<3^j<<4,$e=$e>>8^$e&255^99,se[Be]=$e,te[$e]=Be,ue=M[x=M[K=M[Be]]],lt=ue*16843009^x*65537^K*257^Be*16843008,xe=M[$e]*257^$e*16843008,Re=0;Re<4;Re++)U[Re][Be]=xe=xe<<24^xe>>>8,Y[Re][$e]=lt=lt<<24^lt>>>8;for(Re=0;Re<5;Re++)U[Re]=U[Re].slice(0),Y[Re]=Y[Re].slice(0);return k};let r=null;class l{constructor(U){r||(r=n()),this._tables=[[r[0][0].slice(),r[0][1].slice(),r[0][2].slice(),r[0][3].slice(),r[0][4].slice()],[r[1][0].slice(),r[1][1].slice(),r[1][2].slice(),r[1][3].slice(),r[1][4].slice()]];let Y,se,te;const Re=this._tables[0][4],Be=this._tables[1],j=U.length;let M=1;if(j!==4&&j!==6&&j!==8)throw new Error("Invalid aes key size");const Z=U.slice(0),K=[];for(this._key=[Z,K],Y=j;Y<4*j+28;Y++)te=Z[Y-1],(Y%j===0||j===8&&Y%j===4)&&(te=Re[te>>>24]<<24^Re[te>>16&255]<<16^Re[te>>8&255]<<8^Re[te&255],Y%j===0&&(te=te<<8^te>>>24^M<<24,M=M<<1^(M>>7)*283)),Z[Y]=Z[Y-j]^te;for(se=0;Y;se++,Y--)te=Z[se&3?Y:Y-4],Y<=4||se<4?K[se]=te:K[se]=Be[0][Re[te>>>24]]^Be[1][Re[te>>16&255]]^Be[2][Re[te>>8&255]]^Be[3][Re[te&255]]}decrypt(U,Y,se,te,Re,Be){const j=this._key[1];let M=U^j[0],Z=te^j[1],K=se^j[2],x=Y^j[3],ue,$e,xe;const lt=j.length/4-2;let et,Xe=4;const ut=this._tables[1],Dt=ut[0],dt=ut[1],Et=ut[2],Rt=ut[3],mn=ut[4];for(et=0;et<lt;et++)ue=Dt[M>>>24]^dt[Z>>16&255]^Et[K>>8&255]^Rt[x&255]^j[Xe],$e=Dt[Z>>>24]^dt[K>>16&255]^Et[x>>8&255]^Rt[M&255]^j[Xe+1],xe=Dt[K>>>24]^dt[x>>16&255]^Et[M>>8&255]^Rt[Z&255]^j[Xe+2],x=Dt[x>>>24]^dt[M>>16&255]^Et[Z>>8&255]^Rt[K&255]^j[Xe+3],Xe+=4,M=ue,Z=$e,K=xe;for(et=0;et<4;et++)Re[(3&-et)+Be]=mn[M>>>24]<<24^mn[Z>>16&255]<<16^mn[K>>8&255]<<8^mn[x&255]^j[Xe++],ue=M,M=Z,Z=K,K=x,x=ue}}class d extends u{constructor(){super(u),this.jobs=[],this.delay=1,this.timeout_=null}processJob_(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null}push(U){this.jobs.push(U),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))}}const f=function(k){return k<<24|(k&65280)<<8|(k&16711680)>>8|k>>>24},p=function(k,U,Y){const se=new Int32Array(k.buffer,k.byteOffset,k.byteLength>>2),te=new l(Array.prototype.slice.call(U)),Re=new Uint8Array(k.byteLength),Be=new Int32Array(Re.buffer);let j,M,Z,K,x,ue,$e,xe,lt;for(j=Y[0],M=Y[1],Z=Y[2],K=Y[3],lt=0;lt<se.length;lt+=4)x=f(se[lt]),ue=f(se[lt+1]),$e=f(se[lt+2]),xe=f(se[lt+3]),te.decrypt(x,ue,$e,xe,Be,lt),Be[lt]=f(Be[lt]^j),Be[lt+1]=f(Be[lt+1]^M),Be[lt+2]=f(Be[lt+2]^Z),Be[lt+3]=f(Be[lt+3]^K),j=x,M=ue,Z=$e,K=xe;return Re};class m{constructor(U,Y,se,te){const Re=m.STEP,Be=new Int32Array(U.buffer),j=new Uint8Array(U.byteLength);let M=0;for(this.asyncStream_=new d,this.asyncStream_.push(this.decryptChunk_(Be.subarray(M,M+Re),Y,se,j)),M=Re;M<Be.length;M+=Re)se=new Uint32Array([f(Be[M-4]),f(Be[M-3]),f(Be[M-2]),f(Be[M-1])]),this.asyncStream_.push(this.decryptChunk_(Be.subarray(M,M+Re),Y,se,j));this.asyncStream_.push(function(){te(null,t(j))})}static get STEP(){return 32e3}decryptChunk_(U,Y,se,te){return function(){const Re=p(U,Y,se);te.set(Re,U.byteOffset)}}}var y=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},b;typeof window<"u"?b=window:typeof y<"u"?b=y:typeof self<"u"?b=self:b={};var _=b,A=function(U){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(U):U&&U.buffer instanceof ArrayBuffer},w=_.BigInt||Number;w("0x1"),w("0x100"),w("0x10000"),w("0x1000000"),w("0x100000000"),w("0x10000000000"),w("0x1000000000000"),w("0x100000000000000"),w("0x10000000000000000"),function(){var k=new Uint16Array([65484]),U=new Uint8Array(k.buffer,k.byteOffset,k.byteLength);return U[0]===255?"big":U[0]===204?"little":"unknown"}();const T=function(k){const U={};return Object.keys(k).forEach(Y=>{const se=k[Y];A(se)?U[Y]={bytes:se.buffer,byteOffset:se.byteOffset,byteLength:se.byteLength}:U[Y]=se}),U};self.onmessage=function(k){const U=k.data,Y=new Uint8Array(U.encrypted.bytes,U.encrypted.byteOffset,U.encrypted.byteLength),se=new Uint32Array(U.key.bytes,U.key.byteOffset,U.key.byteLength/4),te=new Uint32Array(U.iv.bytes,U.iv.byteOffset,U.iv.byteLength/4);new m(Y,se,te,function(Re,Be){self.postMessage(T({source:U.source,decrypted:Be}),[Be.buffer])})}}));var XY=zF(WY);const QY=u=>{let t=u.default?"main":"alternative";return u.characteristics&&u.characteristics.indexOf("public.accessibility.describes-video")>=0&&(t="main-desc"),t},iU=(u,t)=>{u.abort(),u.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)},nw=(u,t)=>{t.activePlaylistLoader=u,u.load()},JY=(u,t)=>()=>{const{segmentLoaders:{[u]:n,main:r},mediaTypes:{[u]:l}}=t,d=l.activeTrack(),f=l.getActiveGroup(),p=l.activePlaylistLoader,m=l.lastGroup_;if(!(f&&m&&f.id===m.id)&&(l.lastGroup_=f,l.lastTrack_=d,iU(n,l),!(!f||f.isMainPlaylist))){if(!f.playlistLoader){p&&r.resetEverything();return}n.resyncLoader(),nw(f.playlistLoader,l)}},ZY=(u,t)=>()=>{const{segmentLoaders:{[u]:n},mediaTypes:{[u]:r}}=t;r.lastGroup_=null,n.abort(),n.pause()},eW=(u,t)=>()=>{const{mainPlaylistLoader:n,segmentLoaders:{[u]:r,main:l},mediaTypes:{[u]:d}}=t,f=d.activeTrack(),p=d.getActiveGroup(),m=d.activePlaylistLoader,y=d.lastTrack_;if(!(y&&f&&y.id===f.id)&&(d.lastGroup_=p,d.lastTrack_=f,iU(r,d),!!p)){if(p.isMainPlaylist){if(!f||!y||f.id===y.id)return;const b=t.vhs.playlistController_,_=b.selectPlaylist();if(b.media()===_)return;d.logger_(`track change. Switching main audio from ${y.id} to ${f.id}`),n.pause(),l.resetEverything(),b.fastQualityChange_(_);return}if(u==="AUDIO"){if(!p.playlistLoader){l.setAudio(!0),l.resetEverything();return}r.setAudio(!0),l.setAudio(!1)}if(m===p.playlistLoader){nw(p.playlistLoader,d);return}r.track&&r.track(f),r.resetEverything(),nw(p.playlistLoader,d)}},IE={AUDIO:(u,t)=>()=>{const{mediaTypes:{[u]:n},excludePlaylist:r}=t,l=n.activeTrack(),d=n.activeGroup(),f=(d.filter(m=>m.default)[0]||d[0]).id,p=n.tracks[f];if(l===p){r({error:{message:"Problem encountered loading the default audio track."}});return}Qt.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(const m in n.tracks)n.tracks[m].enabled=n.tracks[m]===p;n.onTrackChanged()},SUBTITLES:(u,t)=>()=>{const{mediaTypes:{[u]:n}}=t;Qt.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");const r=n.activeTrack();r&&(r.mode="disabled"),n.onTrackChanged()}},HP={AUDIO:(u,t,n)=>{if(!t)return;const{tech:r,requestOptions:l,segmentLoaders:{[u]:d}}=n;t.on("loadedmetadata",()=>{const f=t.media();d.playlist(f,l),(!r.paused()||f.endList&&r.preload()!=="none")&&d.load()}),t.on("loadedplaylist",()=>{d.playlist(t.media(),l),r.paused()||d.load()}),t.on("error",IE[u](u,n))},SUBTITLES:(u,t,n)=>{const{tech:r,requestOptions:l,segmentLoaders:{[u]:d},mediaTypes:{[u]:f}}=n;t.on("loadedmetadata",()=>{const p=t.media();d.playlist(p,l),d.track(f.activeTrack()),(!r.paused()||p.endList&&r.preload()!=="none")&&d.load()}),t.on("loadedplaylist",()=>{d.playlist(t.media(),l),r.paused()||d.load()}),t.on("error",IE[u](u,n))}},tW={AUDIO:(u,t)=>{const{vhs:n,sourceType:r,segmentLoaders:{[u]:l},requestOptions:d,main:{mediaGroups:f},mediaTypes:{[u]:{groups:p,tracks:m,logger_:y}},mainPlaylistLoader:b}=t,_=Ky(b.main);(!f[u]||Object.keys(f[u]).length===0)&&(f[u]={main:{default:{default:!0}}},_&&(f[u].main.default.playlists=b.main.playlists));for(const A in f[u]){p[A]||(p[A]=[]);for(const w in f[u][A]){let T=f[u][A][w],k;if(_?(y(`AUDIO group '${A}' label '${w}' is a main playlist`),T.isMainPlaylist=!0,k=null):r==="vhs-json"&&T.playlists?k=new ig(T.playlists[0],n,d):T.resolvedUri?k=new ig(T.resolvedUri,n,d):T.playlists&&r==="dash"?k=new QA(T.playlists[0],n,d,b):k=null,T=cs({id:w,playlistLoader:k},T),HP[u](u,T.playlistLoader,t),p[A].push(T),typeof m[w]>"u"){const U=new Qt.AudioTrack({id:w,kind:QY(T),enabled:!1,language:T.language,default:T.default,label:w});m[w]=U}}}l.on("error",IE[u](u,t))},SUBTITLES:(u,t)=>{const{tech:n,vhs:r,sourceType:l,segmentLoaders:{[u]:d},requestOptions:f,main:{mediaGroups:p},mediaTypes:{[u]:{groups:m,tracks:y}},mainPlaylistLoader:b}=t;for(const _ in p[u]){m[_]||(m[_]=[]);for(const A in p[u][_]){if(!r.options_.useForcedSubtitles&&p[u][_][A].forced)continue;let w=p[u][_][A],T;if(l==="hls")T=new ig(w.resolvedUri,r,f);else if(l==="dash"){if(!w.playlists.filter(U=>U.excludeUntil!==1/0).length)return;T=new QA(w.playlists[0],r,f,b)}else l==="vhs-json"&&(T=new ig(w.playlists?w.playlists[0]:w.resolvedUri,r,f));if(w=cs({id:A,playlistLoader:T},w),HP[u](u,w.playlistLoader,t),m[_].push(w),typeof y[A]>"u"){const k=n.addRemoteTextTrack({id:A,kind:"subtitles",default:w.default&&w.autoselect,language:w.language,label:A},!1).track;y[A]=k}}}d.on("error",IE[u](u,t))},"CLOSED-CAPTIONS":(u,t)=>{const{tech:n,main:{mediaGroups:r},mediaTypes:{[u]:{groups:l,tracks:d}}}=t;for(const f in r[u]){l[f]||(l[f]=[]);for(const p in r[u][f]){const m=r[u][f][p];if(!/^(?:CC|SERVICE)/.test(m.instreamId))continue;const y=n.options_.vhs&&n.options_.vhs.captionServices||{};let b={label:p,language:m.language,instreamId:m.instreamId,default:m.default&&m.autoselect};if(y[b.instreamId]&&(b=cs(b,y[b.instreamId])),b.default===void 0&&delete b.default,l[f].push(cs({id:p},m)),typeof d[p]>"u"){const _=n.addRemoteTextTrack({id:b.instreamId,kind:"captions",default:b.default,language:b.language,label:b.label},!1).track;d[p]=_}}}}},rU=(u,t)=>{for(let n=0;n<u.length;n++)if(u1(t,u[n])||u[n].playlists&&rU(u[n].playlists,t))return!0;return!1},nW=(u,t)=>n=>{const{mainPlaylistLoader:r,mediaTypes:{[u]:{groups:l}}}=t,d=r.media();if(!d)return null;let f=null;d.attributes[u]&&(f=l[d.attributes[u]]);const p=Object.keys(l);if(!f)if(u==="AUDIO"&&p.length>1&&Ky(t.main))for(let m=0;m<p.length;m++){const y=l[p[m]];if(rU(y,d)){f=y;break}}else l.main?f=l.main:p.length===1&&(f=l[p[0]]);return typeof n>"u"?f:n===null||!f?null:f.filter(m=>m.id===n.id)[0]||null},iW={AUDIO:(u,t)=>()=>{const{mediaTypes:{[u]:{tracks:n}}}=t;for(const r in n)if(n[r].enabled)return n[r];return null},SUBTITLES:(u,t)=>()=>{const{mediaTypes:{[u]:{tracks:n}}}=t;for(const r in n)if(n[r].mode==="showing"||n[r].mode==="hidden")return n[r];return null}},rW=(u,{mediaTypes:t})=>()=>{const n=t[u].activeTrack();return n?t[u].activeGroup(n):null},sW=u=>{["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(y=>{tW[y](y,u)});const{mediaTypes:t,mainPlaylistLoader:n,tech:r,vhs:l,segmentLoaders:{["AUDIO"]:d,main:f}}=u;["AUDIO","SUBTITLES"].forEach(y=>{t[y].activeGroup=nW(y,u),t[y].activeTrack=iW[y](y,u),t[y].onGroupChanged=JY(y,u),t[y].onGroupChanging=ZY(y,u),t[y].onTrackChanged=eW(y,u),t[y].getActiveGroup=rW(y,u)});const p=t.AUDIO.activeGroup();if(p){const y=(p.filter(_=>_.default)[0]||p[0]).id;t.AUDIO.tracks[y].enabled=!0,t.AUDIO.onGroupChanged(),t.AUDIO.onTrackChanged(),t.AUDIO.getActiveGroup().playlistLoader?(f.setAudio(!1),d.setAudio(!0)):f.setAudio(!0)}n.on("mediachange",()=>{["AUDIO","SUBTITLES"].forEach(y=>t[y].onGroupChanged())}),n.on("mediachanging",()=>{["AUDIO","SUBTITLES"].forEach(y=>t[y].onGroupChanging())});const m=()=>{t.AUDIO.onTrackChanged(),r.trigger({type:"usage",name:"vhs-audio-change"})};r.audioTracks().addEventListener("change",m),r.remoteTextTracks().addEventListener("change",t.SUBTITLES.onTrackChanged),l.on("dispose",()=>{r.audioTracks().removeEventListener("change",m),r.remoteTextTracks().removeEventListener("change",t.SUBTITLES.onTrackChanged)}),r.clearTracks("audio");for(const y in t.AUDIO.tracks)r.audioTracks().addTrack(t.AUDIO.tracks[y])},aW=()=>{const u={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(t=>{u[t]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Pd,activeTrack:Pd,getActiveGroup:Pd,onGroupChanged:Pd,onTrackChanged:Pd,lastTrack_:null,logger_:Au(`MediaGroups[${t}]`)}}),u};class GP{constructor(){this.priority_=[],this.pathwayClones_=new Map}set version(t){t===1&&(this.version_=t)}set ttl(t){this.ttl_=t||300}set reloadUri(t){t&&(this.reloadUri_=Sl(this.reloadUri_,t))}set priority(t){t&&t.length&&(this.priority_=t)}set pathwayClones(t){t&&t.length&&(this.pathwayClones_=new Map(t.map(n=>[n.ID,n])))}get version(){return this.version_}get ttl(){return this.ttl_}get reloadUri(){return this.reloadUri_}get priority(){return this.priority_}get pathwayClones(){return this.pathwayClones_}}class oW extends Qt.EventTarget{constructor(t,n){super(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=!1,this.availablePathways_=new Set,this.steeringManifest=new GP,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.currentPathwayClones=new Map,this.nextPathwayClones=new Map,this.excludedSteeringManifestURLs=new Set,this.logger_=Au("Content Steering"),this.xhr_=t,this.getBandwidth_=n}assignTagProperties(t,n){this.manifestType_=n.serverUri?"HLS":"DASH";const r=n.serverUri||n.serverURL;if(!r){this.logger_(`steering manifest URL is ${r}, cannot request steering manifest.`),this.trigger("error");return}if(r.startsWith("data:")){this.decodeDataUriManifest_(r.substring(r.indexOf(",")+1));return}this.steeringManifest.reloadUri=Sl(t,r),this.defaultPathway=n.pathwayId||n.defaultServiceLocation,this.queryBeforeStart=n.queryBeforeStart,this.proxyServerUrl_=n.proxyServerURL,this.defaultPathway&&!this.queryBeforeStart&&this.trigger("content-steering")}requestSteeringManifest(t){const n=this.steeringManifest.reloadUri;if(!n)return;const r=t?n:this.getRequestURI(n);if(!r){this.logger_("No valid content steering manifest URIs. Stopping content steering."),this.trigger("error"),this.dispose();return}const l={contentSteeringInfo:{uri:r}};this.trigger({type:"contentsteeringloadstart",metadata:l}),this.request_=this.xhr_({uri:r,requestType:"content-steering-manifest"},(d,f)=>{if(d){if(f.status===410){this.logger_(`manifest request 410 ${d}.`),this.logger_(`There will be no more content steering requests to ${r} this session.`),this.excludedSteeringManifestURLs.add(r);return}if(f.status===429){const y=f.responseHeaders["retry-after"];this.logger_(`manifest request 429 ${d}.`),this.logger_(`content steering will retry in ${y} seconds.`),this.startTTLTimeout_(parseInt(y,10));return}this.logger_(`manifest failed to load ${d}.`),this.startTTLTimeout_();return}this.trigger({type:"contentsteeringloadcomplete",metadata:l});let p;try{p=JSON.parse(this.request_.responseText)}catch(y){const b={errorType:Qt.Error.StreamingContentSteeringParserError,error:y};this.trigger({type:"error",metadata:b})}this.assignSteeringProperties_(p);const m={contentSteeringInfo:l.contentSteeringInfo,contentSteeringManifest:{version:this.steeringManifest.version,reloadUri:this.steeringManifest.reloadUri,priority:this.steeringManifest.priority}};this.trigger({type:"contentsteeringparsed",metadata:m}),this.startTTLTimeout_()})}setProxyServerUrl_(t){const n=new St.URL(t),r=new St.URL(this.proxyServerUrl_);return r.searchParams.set("url",encodeURI(n.toString())),this.setSteeringParams_(r.toString())}decodeDataUriManifest_(t){const n=JSON.parse(St.atob(t));this.assignSteeringProperties_(n)}setSteeringParams_(t){const n=new St.URL(t),r=this.getPathway(),l=this.getBandwidth_();if(r){const d=`_${this.manifestType_}_pathway`;n.searchParams.set(d,r)}if(l){const d=`_${this.manifestType_}_throughput`;n.searchParams.set(d,l)}return n.toString()}assignSteeringProperties_(t){if(this.steeringManifest.version=t.VERSION,!this.steeringManifest.version){this.logger_(`manifest version is ${t.VERSION}, which is not supported.`),this.trigger("error");return}this.steeringManifest.ttl=t.TTL,this.steeringManifest.reloadUri=t["RELOAD-URI"],this.steeringManifest.priority=t["PATHWAY-PRIORITY"]||t["SERVICE-LOCATION-PRIORITY"],this.steeringManifest.pathwayClones=t["PATHWAY-CLONES"],this.nextPathwayClones=this.steeringManifest.pathwayClones,this.availablePathways_.size||(this.logger_("There are no available pathways for content steering. Ending content steering."),this.trigger("error"),this.dispose());const r=(l=>{for(const d of l)if(this.availablePathways_.has(d))return d;return[...this.availablePathways_][0]})(this.steeringManifest.priority);this.currentPathway!==r&&(this.currentPathway=r,this.trigger("content-steering"))}getPathway(){return this.currentPathway||this.defaultPathway}getRequestURI(t){if(!t)return null;const n=l=>this.excludedSteeringManifestURLs.has(l);if(this.proxyServerUrl_){const l=this.setProxyServerUrl_(t);if(!n(l))return l}const r=this.setSteeringParams_(t);return n(r)?null:r}startTTLTimeout_(t=this.steeringManifest.ttl){const n=t*1e3;this.ttlTimeout_=St.setTimeout(()=>{this.requestSteeringManifest()},n)}clearTTLTimeout_(){St.clearTimeout(this.ttlTimeout_),this.ttlTimeout_=null}abort(){this.request_&&this.request_.abort(),this.request_=null}dispose(){this.off("content-steering"),this.off("error"),this.abort(),this.clearTTLTimeout_(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=null,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.excludedSteeringManifestURLs=new Set,this.availablePathways_=new Set,this.steeringManifest=new GP}addAvailablePathway(t){t&&this.availablePathways_.add(t)}clearAvailablePathways(){this.availablePathways_.clear()}excludePathway(t){return this.availablePathways_.delete(t)}didDASHTagChange(t,n){return!n&&this.steeringManifest.reloadUri||n&&(Sl(t,n.serverURL)!==this.steeringManifest.reloadUri||n.defaultServiceLocation!==this.defaultPathway||n.queryBeforeStart!==this.queryBeforeStart||n.proxyServerURL!==this.proxyServerUrl_)}getAvailablePathways(){return this.availablePathways_}}const lW=(u,t)=>{let n=null;return(...r)=>{clearTimeout(n),n=setTimeout(()=>{u.apply(null,r)},t)}},uW=10;let xf;const cW=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],dW=function(u){return this.audioSegmentLoader_[u]+this.mainSegmentLoader_[u]},fW=function({currentPlaylist:u,buffered:t,currentTime:n,nextPlaylist:r,bufferLowWaterLine:l,bufferHighWaterLine:d,duration:f,bufferBasedABR:p,log:m}){if(!r)return Qt.log.warn("We received no playlist to switch to. Please check your stream."),!1;const y=`allowing switch ${u&&u.id||"null"} -> ${r.id}`;if(!u)return m(`${y} as current playlist is not set`),!0;if(r.id===u.id)return!1;const b=!!ng(t,n).length;if(!u.endList)return!b&&typeof u.partTargetDuration=="number"?(m(`not ${y} as current playlist is live llhls, but currentTime isn't in buffered.`),!1):(m(`${y} as current playlist is live`),!0);const _=a1(t,n),A=p?qa.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:qa.MAX_BUFFER_LOW_WATER_LINE;if(f<A)return m(`${y} as duration < max low water line (${f} < ${A})`),!0;const w=r.attributes.BANDWIDTH,T=u.attributes.BANDWIDTH;if(w<T&&(!p||_<d)){let k=`${y} as next bandwidth < current bandwidth (${w} < ${T})`;return p&&(k+=` and forwardBuffer < bufferHighWaterLine (${_} < ${d})`),m(k),!0}if((!p||w>T)&&_>=l){let k=`${y} as forwardBuffer >= bufferLowWaterLine (${_} >= ${l})`;return p&&(k+=` and next bandwidth > current bandwidth (${w} > ${T})`),m(k),!0}return m(`not ${y} as no switching criteria met`),!1};class hW extends Qt.EventTarget{constructor(t){super(),this.fastQualityChange_=lW(this.fastQualityChange_.bind(this),100);const{src:n,withCredentials:r,tech:l,bandwidth:d,externVhs:f,useCueTags:p,playlistExclusionDuration:m,enableLowInitialPlaylist:y,sourceType:b,cacheEncryptionKeys:_,bufferBasedABR:A,leastPixelDiffSelector:w,captionServices:T,experimentalUseMMS:k}=t;if(!n)throw new Error("A non-empty playlist URL or JSON manifest string is required");let{maxPlaylistRetries:U}=t;(U===null||typeof U>"u")&&(U=1/0),xf=f,this.bufferBasedABR=!!A,this.leastPixelDiffSelector=!!w,this.withCredentials=r,this.tech_=l,this.vhs_=l.vhs,this.player_=t.player_,this.sourceType_=b,this.useCueTags_=p,this.playlistExclusionDuration=m,this.maxPlaylistRetries=U,this.enableLowInitialPlaylist=y,this.usingManagedMediaSource_=!1,this.useCueTags_&&(this.cueTagsTrack_=this.tech_.addTextTrack("metadata","ad-cues"),this.cueTagsTrack_.inBandMetadataTrackDispatchType=""),this.requestOptions_={withCredentials:r,maxPlaylistRetries:U,timeout:null},this.on("error",this.pauseLoading),this.mediaTypes_=aW(),k&&St.ManagedMediaSource?(this.tech_.el_.disableRemotePlayback=!0,this.mediaSource=new St.ManagedMediaSource,this.usingManagedMediaSource_=!0,Qt.log("Using ManagedMediaSource")):St.MediaSource&&(this.mediaSource=new St.MediaSource),this.handleDurationChange_=this.handleDurationChange_.bind(this),this.handleSourceOpen_=this.handleSourceOpen_.bind(this),this.handleSourceEnded_=this.handleSourceEnded_.bind(this),this.load=this.load.bind(this),this.pause=this.pause.bind(this),this.mediaSource.addEventListener("durationchange",this.handleDurationChange_),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.addEventListener("sourceended",this.handleSourceEnded_),this.mediaSource.addEventListener("startstreaming",this.load),this.mediaSource.addEventListener("endstreaming",this.pause),this.seekable_=$a(),this.hasPlayed_=!1,this.syncController_=new KY(t),this.segmentMetadataTrack_=l.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,this.segmentMetadataTrack_.mode="hidden",this.decrypter_=new XY,this.sourceUpdater_=new tU(this.mediaSource),this.inbandTextTracks_={},this.timelineChangeController_=new YY,this.keyStatusMap_=new Map;const Y={vhs:this.vhs_,parse708captions:t.parse708captions,useDtsForTimestampOffset:t.useDtsForTimestampOffset,captionServices:T,mediaSource:this.mediaSource,currentTime:this.tech_.currentTime.bind(this.tech_),seekable:()=>this.seekable(),seeking:()=>this.tech_.seeking(),duration:()=>this.duration(),hasPlayed:()=>this.hasPlayed_,goalBufferLength:()=>this.goalBufferLength(),bandwidth:d,syncController:this.syncController_,decrypter:this.decrypter_,sourceType:this.sourceType_,inbandTextTracks:this.inbandTextTracks_,cacheEncryptionKeys:_,sourceUpdater:this.sourceUpdater_,timelineChangeController:this.timelineChangeController_,exactManifestTimings:t.exactManifestTimings,addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)};this.mainPlaylistLoader_=this.sourceType_==="dash"?new QA(n,this.vhs_,cs(this.requestOptions_,{addMetadataToTextTrack:this.addMetadataToTextTrack.bind(this)})):new ig(n,this.vhs_,cs(this.requestOptions_,{addDateRangesToTextTrack:this.addDateRangesToTextTrack_.bind(this)})),this.setupMainPlaylistLoaderListeners_(),this.mainSegmentLoader_=new ew(cs(Y,{segmentMetadataTrack:this.segmentMetadataTrack_,loaderType:"main"}),t),this.audioSegmentLoader_=new ew(cs(Y,{loaderType:"audio"}),t),this.subtitleSegmentLoader_=new qY(cs(Y,{loaderType:"vtt",featuresNativeTextTracks:this.tech_.featuresNativeTextTracks,loadVttJs:()=>new Promise((Re,Be)=>{function j(){l.off("vttjserror",M),Re()}function M(){l.off("vttjsloaded",j),Be()}l.one("vttjsloaded",j),l.one("vttjserror",M),l.addWebVttScript_()})}),t);const se=()=>this.mainSegmentLoader_.bandwidth;this.contentSteeringController_=new oW(this.vhs_.xhr,se),this.setupSegmentLoaderListeners_(),this.bufferBasedABR&&(this.mainPlaylistLoader_.one("loadedplaylist",()=>this.startABRTimer_()),this.tech_.on("pause",()=>this.stopABRTimer_()),this.tech_.on("play",()=>this.startABRTimer_())),cW.forEach(Re=>{this[Re+"_"]=dW.bind(this,Re)}),this.logger_=Au("pc"),this.triggeredFmp4Usage=!1,this.tech_.preload()==="none"?(this.loadOnPlay_=()=>{this.loadOnPlay_=null,this.mainPlaylistLoader_.load()},this.tech_.one("play",this.loadOnPlay_)):this.mainPlaylistLoader_.load(),this.timeToLoadedData__=-1,this.mainAppendsToLoadedData__=-1,this.audioAppendsToLoadedData__=-1;const te=this.tech_.preload()==="none"?"play":"loadstart";this.tech_.one(te,()=>{const Re=Date.now();this.tech_.one("loadeddata",()=>{this.timeToLoadedData__=Date.now()-Re,this.mainAppendsToLoadedData__=this.mainSegmentLoader_.mediaAppends,this.audioAppendsToLoadedData__=this.audioSegmentLoader_.mediaAppends})})}mainAppendsToLoadedData_(){return this.mainAppendsToLoadedData__}audioAppendsToLoadedData_(){return this.audioAppendsToLoadedData__}appendsToLoadedData_(){const t=this.mainAppendsToLoadedData_(),n=this.audioAppendsToLoadedData_();return t===-1||n===-1?-1:t+n}timeToLoadedData_(){return this.timeToLoadedData__}checkABR_(t="abr"){const n=this.selectPlaylist();n&&this.shouldSwitchToMedia_(n)&&this.switchMedia_(n,t)}switchMedia_(t,n,r){const l=this.media(),d=l&&(l.id||l.uri),f=t&&(t.id||t.uri);if(d&&d!==f){this.logger_(`switch media ${d} -> ${f} from ${n}`);const p={renditionInfo:{id:f,bandwidth:t.attributes.BANDWIDTH,resolution:t.attributes.RESOLUTION,codecs:t.attributes.CODECS},cause:n};this.trigger({type:"renditionselected",metadata:p}),this.tech_.trigger({type:"usage",name:`vhs-rendition-change-${n}`})}this.mainPlaylistLoader_.media(t,r)}switchMediaForDASHContentSteering_(){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(t=>{const n=this.mediaTypes_[t],r=n?n.activeGroup():null,l=this.contentSteeringController_.getPathway();if(r&&l){const f=(r.length?r[0].playlists:r.playlists).filter(p=>p.attributes.serviceLocation===l);f.length&&this.mediaTypes_[t].activePlaylistLoader.media(f[0])}})}startABRTimer_(){this.stopABRTimer_(),this.abrTimer_=St.setInterval(()=>this.checkABR_(),250)}stopABRTimer_(){this.tech_.scrubbing&&this.tech_.scrubbing()||(St.clearInterval(this.abrTimer_),this.abrTimer_=null)}getAudioTrackPlaylists_(){const t=this.main(),n=t&&t.playlists||[];if(!t||!t.mediaGroups||!t.mediaGroups.AUDIO)return n;const r=t.mediaGroups.AUDIO,l=Object.keys(r);let d;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)d=this.mediaTypes_.AUDIO.activeTrack();else{const p=r.main||l.length&&r[l[0]];for(const m in p)if(p[m].default){d={label:m};break}}if(!d)return n;const f=[];for(const p in r)if(r[p][d.label]){const m=r[p][d.label];if(m.playlists&&m.playlists.length)f.push.apply(f,m.playlists);else if(m.uri)f.push(m);else if(t.playlists.length)for(let y=0;y<t.playlists.length;y++){const b=t.playlists[y];b.attributes&&b.attributes.AUDIO&&b.attributes.AUDIO===p&&f.push(b)}}return f.length?f:n}setupMainPlaylistLoaderListeners_(){this.mainPlaylistLoader_.on("loadedmetadata",()=>{const n=this.mainPlaylistLoader_.media(),r=n.targetDuration*1.5*1e3;$A(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=r,n.endList&&this.tech_.preload()!=="none"&&(this.mainSegmentLoader_.playlist(n,this.requestOptions_),this.mainSegmentLoader_.load()),sW({sourceType:this.sourceType_,segmentLoaders:{AUDIO:this.audioSegmentLoader_,SUBTITLES:this.subtitleSegmentLoader_,main:this.mainSegmentLoader_},tech:this.tech_,requestOptions:this.requestOptions_,mainPlaylistLoader:this.mainPlaylistLoader_,vhs:this.vhs_,main:this.main(),mediaTypes:this.mediaTypes_,excludePlaylist:this.excludePlaylist.bind(this)}),this.triggerPresenceUsage_(this.main(),n),this.setupFirstPlay(),!this.mediaTypes_.AUDIO.activePlaylistLoader||this.mediaTypes_.AUDIO.activePlaylistLoader.media()?this.trigger("selectedinitialmedia"):this.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",()=>{this.trigger("selectedinitialmedia")})}),this.mainPlaylistLoader_.on("loadedplaylist",()=>{this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_);let n=this.mainPlaylistLoader_.media();if(!n){this.attachContentSteeringListeners_(),this.initContentSteeringController_(),this.excludeUnsupportedVariants_();let r;if(this.enableLowInitialPlaylist&&(r=this.selectInitialPlaylist()),r||(r=this.selectPlaylist()),!r||!this.shouldSwitchToMedia_(r)||(this.initialMedia_=r,this.switchMedia_(this.initialMedia_,"initial"),!(this.sourceType_==="vhs-json"&&this.initialMedia_.segments)))return;n=this.initialMedia_}this.handleUpdatedMediaPlaylist(n)}),this.mainPlaylistLoader_.on("error",()=>{const n=this.mainPlaylistLoader_.error;this.excludePlaylist({playlistToExclude:n.playlist,error:n})}),this.mainPlaylistLoader_.on("mediachanging",()=>{this.mainSegmentLoader_.abort(),this.mainSegmentLoader_.pause()}),this.mainPlaylistLoader_.on("mediachange",()=>{const n=this.mainPlaylistLoader_.media(),r=n.targetDuration*1.5*1e3;$A(this.mainPlaylistLoader_.main,this.mainPlaylistLoader_.media())?this.requestOptions_.timeout=0:this.requestOptions_.timeout=r,this.sourceType_==="dash"&&this.mainPlaylistLoader_.isPaused&&this.mainPlaylistLoader_.load(),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(n,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_?this.runFastQualitySwitch_():this.mainSegmentLoader_.load(),this.tech_.trigger({type:"mediachange",bubbles:!0})}),this.mainPlaylistLoader_.on("playlistunchanged",()=>{const n=this.mainPlaylistLoader_.media();if(n.lastExcludeReason_==="playlist-unchanged")return;this.stuckAtPlaylistEnd_(n)&&(this.excludePlaylist({error:{message:"Playlist no longer updating.",reason:"playlist-unchanged"}}),this.tech_.trigger("playliststuck"))}),this.mainPlaylistLoader_.on("renditiondisabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"})}),this.mainPlaylistLoader_.on("renditionenabled",()=>{this.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"})}),["manifestrequeststart","manifestrequestcomplete","manifestparsestart","manifestparsecomplete","playlistrequeststart","playlistrequestcomplete","playlistparsestart","playlistparsecomplete","renditiondisabled","renditionenabled"].forEach(n=>{this.mainPlaylistLoader_.on(n,r=>{this.player_.trigger(Us({},r))})})}handleUpdatedMediaPlaylist(t){this.useCueTags_&&this.updateAdCues_(t),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.waitingForFastQualityPlaylistReceived_&&this.runFastQualitySwitch_(),this.updateDuration(!t.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())}triggerPresenceUsage_(t,n){const r=t.mediaGroups||{};let l=!0;const d=Object.keys(r.AUDIO);for(const f in r.AUDIO)for(const p in r.AUDIO[f])r.AUDIO[f][p].uri||(l=!1);l&&this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),Object.keys(r.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),xf.Playlist.isAes(n)&&this.tech_.trigger({type:"usage",name:"vhs-aes"}),d.length&&Object.keys(r.AUDIO[d[0]]).length>1&&this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.useCueTags_&&this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"})}shouldSwitchToMedia_(t){const n=this.mainPlaylistLoader_.media()||this.mainPlaylistLoader_.pendingMedia_,r=this.tech_.currentTime(),l=this.bufferLowWaterLine(),d=this.bufferHighWaterLine(),f=this.tech_.buffered();return fW({buffered:f,currentTime:r,currentPlaylist:n,nextPlaylist:t,bufferLowWaterLine:l,bufferHighWaterLine:d,duration:this.duration(),bufferBasedABR:this.bufferBasedABR,log:this.logger_})}setupSegmentLoaderListeners_(){this.mainSegmentLoader_.on("bandwidthupdate",()=>{this.checkABR_("bandwidthupdate"),this.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",()=>{this.bufferBasedABR&&this.mainSegmentLoader_.load()}),this.bufferBasedABR||this.mainSegmentLoader_.on("progress",()=>{this.trigger("progress")}),this.mainSegmentLoader_.on("error",()=>{const r=this.mainSegmentLoader_.error();this.excludePlaylist({playlistToExclude:r.playlist,error:r})}),this.mainSegmentLoader_.on("appenderror",()=>{this.error=this.mainSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",()=>{this.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",()=>{this.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",()=>{this.error=this.audioSegmentLoader_.error_,this.trigger("error")}),this.mainSegmentLoader_.on("ended",()=>{this.logger_("main segment loader ended"),this.onEndOfStream()}),this.timelineChangeController_.on("audioTimelineBehind",()=>{const r=this.audioSegmentLoader_.pendingSegment_;if(!r||!r.segment||!r.segment.syncInfo)return;const l=r.segment.syncInfo.end+.01;this.tech_.setCurrentTime(l)}),this.timelineChangeController_.on("fixBadTimelineChange",()=>{this.logger_("Fix bad timeline change. Restarting al segment loaders..."),this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}),this.mainSegmentLoader_.on("earlyabort",r=>{this.bufferBasedABR||(this.delegateLoaders_("all",["abort"]),this.excludePlaylist({error:{message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},playlistExclusionDuration:uW}))});const t=()=>{if(!this.sourceUpdater_.hasCreatedSourceBuffers())return this.tryToCreateSourceBuffers_();const r=this.getCodecsOrExclude_();r&&this.sourceUpdater_.addOrChangeSourceBuffers(r)};this.mainSegmentLoader_.on("trackinfo",t),this.audioSegmentLoader_.on("trackinfo",t),this.mainSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",()=>{this.triggeredFmp4Usage||(this.tech_.trigger({type:"usage",name:"vhs-fmp4"}),this.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",()=>{this.logger_("audioSegmentLoader ended"),this.onEndOfStream()}),["segmentselected","segmentloadstart","segmentloaded","segmentkeyloadstart","segmentkeyloadcomplete","segmentdecryptionstart","segmentdecryptioncomplete","segmenttransmuxingstart","segmenttransmuxingcomplete","segmenttransmuxingtrackinfoavailable","segmenttransmuxingtiminginfoavailable","segmentappendstart","appendsdone","bandwidthupdated","timelinechange","codecschange"].forEach(r=>{this.mainSegmentLoader_.on(r,l=>{this.player_.trigger(Us({},l))}),this.audioSegmentLoader_.on(r,l=>{this.player_.trigger(Us({},l))}),this.subtitleSegmentLoader_.on(r,l=>{this.player_.trigger(Us({},l))})})}mediaSecondsLoaded_(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}load(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}pause(){this.mainSegmentLoader_.pause(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}fastQualityChange_(t=this.selectPlaylist()){if(t&&t===this.mainPlaylistLoader_.media()){this.logger_("skipping fastQualityChange because new media is same as old");return}this.switchMedia_(t,"fast-quality"),this.waitingForFastQualityPlaylistReceived_=!0}runFastQualitySwitch_(){this.waitingForFastQualityPlaylistReceived_=!1,this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}play(){if(this.setupFirstPlay())return;this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();const t=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<t.start(0))return this.tech_.setCurrentTime(t.end(t.length-1))}setupFirstPlay(){const t=this.mainPlaylistLoader_.media();if(!t||this.tech_.paused()||this.hasPlayed_)return!1;if(!t.endList||t.start){const n=this.seekable();if(!n.length)return!1;const r=n.end(0);let l=r;if(t.start){const d=t.start.timeOffset;d<0?l=Math.max(r+d,n.start(0)):l=Math.min(r,d)}this.trigger("firstplay"),this.tech_.setCurrentTime(l)}return this.hasPlayed_=!0,this.load(),!0}handleSourceOpen_(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){const t=this.tech_.play();typeof t<"u"&&typeof t.then=="function"&&t.then(null,n=>{})}this.trigger("sourceopen")}handleSourceEnded_(){if(!this.inbandTextTracks_.metadataTrack_)return;const t=this.inbandTextTracks_.metadataTrack_.cues;if(!t||!t.length)return;const n=this.duration();t[t.length-1].endTime=isNaN(n)||Math.abs(n)===1/0?Number.MAX_VALUE:n}handleDurationChange_(){this.tech_.trigger("durationchange")}onEndOfStream(){let t=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){const n=this.mainSegmentLoader_.getCurrentMediaInfo_();!n||n.hasVideo?t=t&&this.audioSegmentLoader_.ended_:t=this.audioSegmentLoader_.ended_}t&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())}stuckAtPlaylistEnd_(t){if(!this.seekable().length)return!1;const r=this.syncController_.getExpiredTime(t,this.duration());if(r===null)return!1;const l=xf.Playlist.playlistEnd(t,r),d=this.tech_.currentTime(),f=this.tech_.buffered();if(!f.length)return l-d<=zc;const p=f.end(f.length-1);return p-d<=zc&&l-p<=zc}excludePlaylist({playlistToExclude:t=this.mainPlaylistLoader_.media(),error:n={},playlistExclusionDuration:r}){if(t=t||this.mainPlaylistLoader_.media(),r=r||n.playlistExclusionDuration||this.playlistExclusionDuration,!t){this.error=n,this.mediaSource.readyState!=="open"?this.trigger("error"):this.sourceUpdater_.endOfStream("network");return}t.playlistErrors_++;const l=this.mainPlaylistLoader_.main.playlists,d=l.filter(ZE),f=d.length===1&&d[0]===t;if(l.length===1&&r!==1/0)return Qt.log.warn(`Problem encountered with playlist ${t.id}. Trying again since it is the only playlist.`),this.tech_.trigger("retryplaylist"),this.mainPlaylistLoader_.load(f);if(f){if(this.main().contentSteering){const T=this.pathwayAttribute_(t),k=this.contentSteeringController_.steeringManifest.ttl*1e3;this.contentSteeringController_.excludePathway(T),this.excludeThenChangePathway_(),setTimeout(()=>{this.contentSteeringController_.addAvailablePathway(T)},k);return}let w=!1;l.forEach(T=>{if(T===t)return;const k=T.excludeUntil;typeof k<"u"&&k!==1/0&&(w=!0,delete T.excludeUntil)}),w&&(Qt.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}let p;t.playlistErrors_>this.maxPlaylistRetries?p=1/0:p=Date.now()+r*1e3,t.excludeUntil=p,n.reason&&(t.lastExcludeReason_=n.reason),this.tech_.trigger("excludeplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-excluded"});const m=this.selectPlaylist();if(!m){this.error="Playback cannot continue. No available working or supported playlists.",this.trigger("error");return}const y=n.internal?this.logger_:Qt.log.warn,b=n.message?" "+n.message:"";y(`${n.internal?"Internal problem":"Problem"} encountered with playlist ${t.id}.${b} Switching to playlist ${m.id}.`),m.attributes.AUDIO!==t.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),m.attributes.SUBTITLES!==t.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);const _=m.targetDuration/2*1e3||5*1e3,A=typeof m.lastRequest=="number"&&Date.now()-m.lastRequest<=_;return this.switchMedia_(m,"exclude",f||A)}pauseLoading(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()}delegateLoaders_(t,n){const r=[],l=t==="all";(l||t==="main")&&r.push(this.mainPlaylistLoader_);const d=[];(l||t==="audio")&&d.push("AUDIO"),(l||t==="subtitle")&&(d.push("CLOSED-CAPTIONS"),d.push("SUBTITLES")),d.forEach(f=>{const p=this.mediaTypes_[f]&&this.mediaTypes_[f].activePlaylistLoader;p&&r.push(p)}),["main","audio","subtitle"].forEach(f=>{const p=this[`${f}SegmentLoader_`];p&&(t===f||t==="all")&&r.push(p)}),r.forEach(f=>n.forEach(p=>{typeof f[p]=="function"&&f[p]()}))}setCurrentTime(t){const n=ng(this.tech_.buffered(),t);if(!(this.mainPlaylistLoader_&&this.mainPlaylistLoader_.media())||!this.mainPlaylistLoader_.media().segments)return 0;if(n&&n.length)return t;this.mainSegmentLoader_.pause(),this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.pause(),this.audioSegmentLoader_.resetEverything()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.pause(),this.subtitleSegmentLoader_.resetEverything()),this.load()}duration(){if(!this.mainPlaylistLoader_)return 0;const t=this.mainPlaylistLoader_.media();return t?t.endList?this.mediaSource?this.mediaSource.duration:xf.Playlist.duration(t):1/0:0}seekable(){return this.seekable_}getSeekableRange_(t,n){const r=t.media();if(!r)return null;const l=this.syncController_.getMediaSequenceSync(n);if(l&&l.isReliable){const p=l.start,m=l.end;if(!isFinite(p)||!isFinite(m))return null;const y=xf.Playlist.liveEdgeDelay(this.mainPlaylistLoader_.main,r),b=Math.max(p,m-y);return $a([[p,b]])}const d=this.syncController_.getExpiredTime(r,this.duration());if(d===null)return null;const f=xf.Playlist.seekable(r,d,xf.Playlist.liveEdgeDelay(this.mainPlaylistLoader_.main,r));return f.length?f:null}computeFinalSeekable_(t,n){if(!n)return t;const r=t.start(0),l=t.end(0),d=n.start(0),f=n.end(0);return d>l||r>f?t:$a([[Math.max(r,d),Math.min(l,f)]])}onSyncInfoUpdate_(){if(!this.mainPlaylistLoader_)return;const t=this.getSeekableRange_(this.mainPlaylistLoader_,"main");if(!t)return;let n;if(this.mediaTypes_.AUDIO.activePlaylistLoader&&(n=this.getSeekableRange_(this.mediaTypes_.AUDIO.activePlaylistLoader,"audio"),!n))return;const r=this.seekable_;if(this.seekable_=this.computeFinalSeekable_(t,n),!this.seekable_||r&&r.length&&this.seekable_.length&&r.start(0)===this.seekable_.start(0)&&r.end(0)===this.seekable_.end(0))return;this.logger_(`seekable updated [${pF(this.seekable_)}]`);const l={seekableRanges:this.seekable_};this.trigger({type:"seekablerangeschanged",metadata:l}),this.tech_.trigger("seekablechanged")}updateDuration(t){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),this.mediaSource.readyState!=="open"){this.updateDuration_=this.updateDuration.bind(this,t),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);return}if(t){const l=this.seekable();if(!l.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<l.end(l.length-1))&&this.sourceUpdater_.setDuration(l.end(l.length-1));return}const n=this.tech_.buffered();let r=xf.Playlist.duration(this.mainPlaylistLoader_.media());n.length>0&&(r=Math.max(r,n.end(n.length-1))),this.mediaSource.duration!==r&&this.sourceUpdater_.setDuration(r)}dispose(){this.trigger("dispose"),this.decrypter_.terminate(),this.mainPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.contentSteeringController_.dispose(),this.keyStatusMap_.clear(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(t=>{const n=this.mediaTypes_[t].groups;for(const r in n)n[r].forEach(l=>{l.playlistLoader&&l.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()}main(){return this.mainPlaylistLoader_.main}media(){return this.mainPlaylistLoader_.media()||this.initialMedia_}areMediaTypesKnown_(){const t=!!this.mediaTypes_.AUDIO.activePlaylistLoader,n=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),r=t?!!this.audioSegmentLoader_.getCurrentMediaInfo_():!0;return!(!n||!r)}getCodecsOrExclude_(){const t={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},n=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();t.video=t.main;const r=_y(this.main(),n),l={},d=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(t.main.hasVideo&&(l.video=r.video||t.main.videoCodec||t9),t.main.isMuxed&&(l.video+=`,${r.audio||t.main.audioCodec||PL}`),(t.main.hasAudio&&!t.main.isMuxed||t.audio.hasAudio||d)&&(l.audio=r.audio||t.main.audioCodec||t.audio.audioCodec||PL,t.audio.isFmp4=t.main.hasAudio&&!t.main.isMuxed?t.main.isFmp4:t.audio.isFmp4),!l.audio&&!l.video){this.excludePlaylist({playlistToExclude:n,error:{message:"Could not determine codecs for playlist."},playlistExclusionDuration:1/0});return}const f=(y,b)=>y?yy(b,this.usingManagedMediaSource_):jx(b),p={};let m;if(["video","audio"].forEach(function(y){if(l.hasOwnProperty(y)&&!f(t[y].isFmp4,l[y])){const b=t[y].isFmp4?"browser":"muxer";p[b]=p[b]||[],p[b].push(l[y]),y==="audio"&&(m=b)}}),d&&m&&n.attributes.AUDIO){const y=n.attributes.AUDIO;this.main().playlists.forEach(b=>{(b.attributes&&b.attributes.AUDIO)===y&&b!==n&&(b.excludeUntil=1/0)}),this.logger_(`excluding audio group ${y} as ${m} does not support codec(s): "${l.audio}"`)}if(Object.keys(p).length){const y=Object.keys(p).reduce((b,_)=>(b&&(b+=", "),b+=`${_} does not support codec(s): "${p[_].join(",")}"`,b),"")+".";this.excludePlaylist({playlistToExclude:n,error:{internal:!0,message:y},playlistExclusionDuration:1/0});return}if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){const y=[];if(["video","audio"].forEach(b=>{const _=(Rc(this.sourceUpdater_.codecs[b]||"")[0]||{}).type,A=(Rc(l[b]||"")[0]||{}).type;_&&A&&_.toLowerCase()!==A.toLowerCase()&&y.push(`"${this.sourceUpdater_.codecs[b]}" -> "${l[b]}"`)}),y.length){this.excludePlaylist({playlistToExclude:n,error:{message:`Codec switching not supported: ${y.join(", ")}.`,internal:!0},playlistExclusionDuration:1/0});return}}return l}tryToCreateSourceBuffers_(){if(this.mediaSource.readyState!=="open"||this.sourceUpdater_.hasCreatedSourceBuffers()||!this.areMediaTypesKnown_())return;const t=this.getCodecsOrExclude_();if(!t)return;this.sourceUpdater_.createSourceBuffers(t);const n=[t.video,t.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(n)}excludeUnsupportedVariants_(){const t=this.main().playlists,n=[];Object.keys(t).forEach(r=>{const l=t[r];if(n.indexOf(l.id)!==-1)return;n.push(l.id);const d=_y(this.main,l),f=[];d.audio&&!jx(d.audio)&&!yy(d.audio,this.usingManagedMediaSource_)&&f.push(`audio codec ${d.audio}`),d.video&&!jx(d.video)&&!yy(d.video,this.usingManagedMediaSource_)&&f.push(`video codec ${d.video}`),d.text&&d.text==="stpp.ttml.im1t"&&f.push(`text codec ${d.text}`),f.length&&(l.excludeUntil=1/0,this.logger_(`excluding ${l.id} for unsupported: ${f.join(", ")}`))})}excludeIncompatibleVariants_(t){const n=[],r=this.main().playlists,l=Uy(Rc(t)),d=wP(l),f=l.video&&Rc(l.video)[0]||null,p=l.audio&&Rc(l.audio)[0]||null;Object.keys(r).forEach(m=>{const y=r[m];if(n.indexOf(y.id)!==-1||y.excludeUntil===1/0)return;n.push(y.id);const b=[],_=_y(this.mainPlaylistLoader_.main,y),A=wP(_);if(!(!_.audio&&!_.video)){if(A!==d&&b.push(`codec count "${A}" !== "${d}"`),!this.sourceUpdater_.canChangeType()){const w=_.video&&Rc(_.video)[0]||null,T=_.audio&&Rc(_.audio)[0]||null;w&&f&&w.type.toLowerCase()!==f.type.toLowerCase()&&b.push(`video codec "${w.type}" !== "${f.type}"`),T&&p&&T.type.toLowerCase()!==p.type.toLowerCase()&&b.push(`audio codec "${T.type}" !== "${p.type}"`)}b.length&&(y.excludeUntil=1/0,this.logger_(`excluding ${y.id}: ${b.join(" && ")}`))}})}updateAdCues_(t){let n=0;const r=this.seekable();r.length&&(n=r.start(0)),GY(t,this.cueTagsTrack_,n)}goalBufferLength(){const t=this.tech_.currentTime(),n=qa.GOAL_BUFFER_LENGTH,r=qa.GOAL_BUFFER_LENGTH_RATE,l=Math.max(n,qa.MAX_GOAL_BUFFER_LENGTH);return Math.min(n+t*r,l)}bufferLowWaterLine(){const t=this.tech_.currentTime(),n=qa.BUFFER_LOW_WATER_LINE,r=qa.BUFFER_LOW_WATER_LINE_RATE,l=Math.max(n,qa.MAX_BUFFER_LOW_WATER_LINE),d=Math.max(n,qa.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(n+t*r,this.bufferBasedABR?d:l)}bufferHighWaterLine(){return qa.BUFFER_HIGH_WATER_LINE}addDateRangesToTextTrack_(t){MP(this.inbandTextTracks_,"com.apple.streaming",this.tech_),SY({inbandTextTracks:this.inbandTextTracks_,dateRanges:t})}addMetadataToTextTrack(t,n,r){const l=this.sourceUpdater_.videoBuffer?this.sourceUpdater_.videoTimestampOffset():this.sourceUpdater_.audioTimestampOffset();MP(this.inbandTextTracks_,t,this.tech_),EY({inbandTextTracks:this.inbandTextTracks_,metadataArray:n,timestampOffset:l,videoDuration:r})}pathwayAttribute_(t){return t.attributes["PATHWAY-ID"]||t.attributes.serviceLocation}initContentSteeringController_(){const t=this.main();if(t.contentSteering){for(const n of t.playlists)this.contentSteeringController_.addAvailablePathway(this.pathwayAttribute_(n));if(this.contentSteeringController_.assignTagProperties(t.uri,t.contentSteering),this.contentSteeringController_.queryBeforeStart){this.contentSteeringController_.requestSteeringManifest(!0);return}this.tech_.one("canplay",()=>{this.contentSteeringController_.requestSteeringManifest()})}}resetContentSteeringController_(){this.contentSteeringController_.clearAvailablePathways(),this.contentSteeringController_.dispose(),this.initContentSteeringController_()}attachContentSteeringListeners_(){this.contentSteeringController_.on("content-steering",this.excludeThenChangePathway_.bind(this)),["contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"].forEach(n=>{this.contentSteeringController_.on(n,r=>{this.trigger(Us({},r))})}),this.sourceType_==="dash"&&this.mainPlaylistLoader_.on("loadedplaylist",()=>{const n=this.main();(this.contentSteeringController_.didDASHTagChange(n.uri,n.contentSteering)||(()=>{const d=this.contentSteeringController_.getAvailablePathways(),f=[];for(const p of n.playlists){const m=p.attributes.serviceLocation;if(m&&(f.push(m),!d.has(m)))return!0}return!!(!f.length&&d.size)})())&&this.resetContentSteeringController_()})}excludeThenChangePathway_(){const t=this.contentSteeringController_.getPathway();if(!t)return;this.handlePathwayClones_();const r=this.main().playlists,l=new Set;let d=!1;Object.keys(r).forEach(f=>{const p=r[f],m=this.pathwayAttribute_(p),y=m&&t!==m;p.excludeUntil===1/0&&p.lastExcludeReason_==="content-steering"&&!y&&(delete p.excludeUntil,delete p.lastExcludeReason_,d=!0);const _=!p.excludeUntil&&p.excludeUntil!==1/0;!l.has(p.id)&&y&&_&&(l.add(p.id),p.excludeUntil=1/0,p.lastExcludeReason_="content-steering",this.logger_(`excluding ${p.id} for ${p.lastExcludeReason_}`))}),this.contentSteeringController_.manifestType_==="DASH"&&Object.keys(this.mediaTypes_).forEach(f=>{const p=this.mediaTypes_[f];if(p.activePlaylistLoader){const m=p.activePlaylistLoader.media_;m&&m.attributes.serviceLocation!==t&&(d=!0)}}),d&&this.changeSegmentPathway_()}handlePathwayClones_(){const n=this.main().playlists,r=this.contentSteeringController_.currentPathwayClones,l=this.contentSteeringController_.nextPathwayClones;if(r&&r.size||l&&l.size){for(const[f,p]of r.entries())l.get(f)||(this.mainPlaylistLoader_.updateOrDeleteClone(p),this.contentSteeringController_.excludePathway(f));for(const[f,p]of l.entries()){const m=r.get(f);if(!m){n.filter(b=>b.attributes["PATHWAY-ID"]===p["BASE-ID"]).forEach(b=>{this.mainPlaylistLoader_.addClonePathway(p,b)}),this.contentSteeringController_.addAvailablePathway(f);continue}this.equalPathwayClones_(m,p)||(this.mainPlaylistLoader_.updateOrDeleteClone(p,!0),this.contentSteeringController_.addAvailablePathway(f))}this.contentSteeringController_.currentPathwayClones=new Map(JSON.parse(JSON.stringify([...l])))}}equalPathwayClones_(t,n){if(t["BASE-ID"]!==n["BASE-ID"]||t.ID!==n.ID||t["URI-REPLACEMENT"].HOST!==n["URI-REPLACEMENT"].HOST)return!1;const r=t["URI-REPLACEMENT"].PARAMS,l=n["URI-REPLACEMENT"].PARAMS;for(const d in r)if(r[d]!==l[d])return!1;for(const d in l)if(r[d]!==l[d])return!1;return!0}changeSegmentPathway_(){const t=this.selectPlaylist();this.pauseLoading(),this.contentSteeringController_.manifestType_==="DASH"&&this.switchMediaForDASHContentSteering_(),this.switchMedia_(t,"content-steering")}excludeNonUsablePlaylistsByKeyId_(){if(!this.mainPlaylistLoader_||!this.mainPlaylistLoader_.main)return;let t=0;const n="non-usable";this.mainPlaylistLoader_.main.playlists.forEach(r=>{const l=this.mainPlaylistLoader_.getKeyIdSet(r);!l||!l.size||l.forEach(d=>{const f="usable",p=this.keyStatusMap_.has(d)&&this.keyStatusMap_.get(d)===f,m=r.lastExcludeReason_===n&&r.excludeUntil===1/0;p?p&&m&&(delete r.excludeUntil,delete r.lastExcludeReason_,this.logger_(`enabling playlist ${r.id} because key ID ${d} is ${f}`)):(r.excludeUntil!==1/0&&r.lastExcludeReason_!==n&&(r.excludeUntil=1/0,r.lastExcludeReason_=n,this.logger_(`excluding playlist ${r.id} because the key ID ${d} doesn't exist in the keyStatusMap or is not ${f}`)),t++)})}),t>=this.mainPlaylistLoader_.main.playlists.length&&this.mainPlaylistLoader_.main.playlists.forEach(r=>{const l=r&&r.attributes&&r.attributes.RESOLUTION&&r.attributes.RESOLUTION.height<720,d=r.excludeUntil===1/0&&r.lastExcludeReason_===n;l&&d&&(delete r.excludeUntil,Qt.log.warn(`enabling non-HD playlist ${r.id} because all playlists were excluded due to ${n} key IDs`))})}addKeyStatus_(t,n){const d=(typeof t=="string"?t:zY(t)).slice(0,32).toLowerCase();this.logger_(`KeyStatus '${n}' with key ID ${d} added to the keyStatusMap`),this.keyStatusMap_.set(d,n)}updatePlaylistByKeyStatus(t,n){this.addKeyStatus_(t,n),this.waitingForFastQualityPlaylistReceived_||this.excludeNonUsableThenChangePlaylist_(),this.mainPlaylistLoader_.off("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this)),this.mainPlaylistLoader_.on("loadedplaylist",this.excludeNonUsableThenChangePlaylist_.bind(this))}excludeNonUsableThenChangePlaylist_(){this.excludeNonUsablePlaylistsByKeyId_(),this.fastQualityChange_()}}const pW=(u,t,n)=>r=>{const l=u.main.playlists[t],d=l1(l),f=ZE(l);if(typeof r>"u")return f;r?delete l.disabled:l.disabled=!0;const p={renditionInfo:{id:t,bandwidth:l.attributes.BANDWIDTH,resolution:l.attributes.RESOLUTION,codecs:l.attributes.CODECS},cause:"fast-quality"};return r!==f&&!d&&(r?(n(l),u.trigger({type:"renditionenabled",metadata:p})):u.trigger({type:"renditiondisabled",metadata:p})),r};class gW{constructor(t,n,r){const{playlistController_:l}=t,d=l.fastQualityChange_.bind(l);if(n.attributes){const f=n.attributes.RESOLUTION;this.width=f&&f.width,this.height=f&&f.height,this.bandwidth=n.attributes.BANDWIDTH,this.frameRate=n.attributes["FRAME-RATE"]}this.codecs=_y(l.main(),n),this.playlist=n,this.id=r,this.enabled=pW(t.playlists,n.id,d)}}const mW=function(u){u.representations=()=>{const t=u.playlistController_.main(),n=Ky(t)?u.playlistController_.getAudioTrackPlaylists_():t.playlists;return n?n.filter(r=>!l1(r)).map((r,l)=>new gW(u,r,r.id)):[]}},VP=["seeking","seeked","pause","playing","error"];class yW extends Qt.EventTarget{constructor(t){super(),this.playlistController_=t.playlistController,this.tech_=t.tech,this.seekable=t.seekable,this.allowSeeksWithinUnsafeLiveWindow=t.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=t.liveRangeSafeTimeDelta,this.media=t.media,this.playedRanges_=[],this.consecutiveUpdates=0,this.lastRecordedTime=null,this.checkCurrentTimeTimeout_=null,this.logger_=Au("PlaybackWatcher"),this.logger_("initialize");const n=()=>this.monitorCurrentTime_(),r=()=>this.monitorCurrentTime_(),l=()=>this.techWaiting_(),d=()=>this.resetTimeUpdate_(),f=this.playlistController_,p=["main","subtitle","audio"],m={};p.forEach(b=>{m[b]={reset:()=>this.resetSegmentDownloads_(b),updateend:()=>this.checkSegmentDownloads_(b)},f[`${b}SegmentLoader_`].on("appendsdone",m[b].updateend),f[`${b}SegmentLoader_`].on("playlistupdate",m[b].reset),this.tech_.on(["seeked","seeking"],m[b].reset)});const y=b=>{["main","audio"].forEach(_=>{f[`${_}SegmentLoader_`][b]("appended",this.seekingAppendCheck_)})};this.seekingAppendCheck_=()=>{this.fixesBadSeeks_()&&(this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime(),y("off"))},this.clearSeekingAppendCheck_=()=>y("off"),this.watchForBadSeeking_=()=>{this.clearSeekingAppendCheck_(),y("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",l),this.tech_.on(VP,d),this.tech_.on("canplay",r),this.tech_.one("play",n),this.dispose=()=>{this.clearSeekingAppendCheck_(),this.logger_("dispose"),this.tech_.off("waiting",l),this.tech_.off(VP,d),this.tech_.off("canplay",r),this.tech_.off("play",n),this.tech_.off("seeking",this.watchForBadSeeking_),this.tech_.off("seeked",this.clearSeekingAppendCheck_),p.forEach(b=>{f[`${b}SegmentLoader_`].off("appendsdone",m[b].updateend),f[`${b}SegmentLoader_`].off("playlistupdate",m[b].reset),this.tech_.off(["seeked","seeking"],m[b].reset)}),this.checkCurrentTimeTimeout_&&St.clearTimeout(this.checkCurrentTimeTimeout_),this.resetTimeUpdate_()}}monitorCurrentTime_(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&St.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=St.setTimeout(this.monitorCurrentTime_.bind(this),250)}resetSegmentDownloads_(t){const n=this.playlistController_[`${t}SegmentLoader_`];this[`${t}StalledDownloads_`]>0&&this.logger_(`resetting possible stalled download count for ${t} loader`),this[`${t}StalledDownloads_`]=0,this[`${t}Buffered_`]=n.buffered_()}checkSegmentDownloads_(t){const n=this.playlistController_,r=n[`${t}SegmentLoader_`],l=r.buffered_(),d=nK(this[`${t}Buffered_`],l);if(this[`${t}Buffered_`]=l,d){const f={bufferedRanges:l};n.trigger({type:"bufferedrangeschanged",metadata:f}),this.resetSegmentDownloads_(t);return}this[`${t}StalledDownloads_`]++,this.logger_(`found #${this[`${t}StalledDownloads_`]} ${t} appends that did not increase buffer (possible stalled download)`,{playlistId:r.playlist_&&r.playlist_.id,buffered:kh(l)}),!(this[`${t}StalledDownloads_`]<10)&&(this.logger_(`${t} loader stalled download exclusion`),this.resetSegmentDownloads_(t),this.tech_.trigger({type:"usage",name:`vhs-${t}-download-exclusion`}),t!=="subtitle"&&n.excludePlaylist({error:{message:`Excessive ${t} segment downloading detected.`},playlistExclusionDuration:1/0}))}checkCurrentTime_(){if(this.tech_.paused()||this.tech_.seeking())return;const t=this.tech_.currentTime(),n=this.tech_.buffered();if(this.lastRecordedTime===t&&(!n.length||t+zc>=n.end(n.length-1)))return this.techWaiting_();if(this.consecutiveUpdates>=5&&t===this.lastRecordedTime)this.consecutiveUpdates++,this.waiting_();else if(t===this.lastRecordedTime)this.consecutiveUpdates++;else{this.playedRanges_.push($a([this.lastRecordedTime,t]));const r={playedRanges:this.playedRanges_};this.playlistController_.trigger({type:"playedrangeschanged",metadata:r}),this.consecutiveUpdates=0,this.lastRecordedTime=t}}resetTimeUpdate_(){this.consecutiveUpdates=0}fixesBadSeeks_(){if(!this.tech_.seeking())return!1;const n=this.seekable(),r=this.tech_.currentTime(),l=this.afterSeekableWindow_(n,r,this.media(),this.allowSeeksWithinUnsafeLiveWindow);let d;if(l&&(d=n.end(n.length-1)),this.beforeSeekableWindow_(n,r)){const T=n.start(0);d=T+(T===n.end(0)?0:zc)}if(typeof d<"u")return this.logger_(`Trying to seek outside of seekable at time ${r} with seekable range ${pF(n)}. Seeking to ${d}.`),this.tech_.setCurrentTime(d),!0;const f=this.playlistController_.sourceUpdater_,p=this.tech_.buffered(),m=f.audioBuffer?f.audioBuffered():null,y=f.videoBuffer?f.videoBuffered():null,b=this.media(),_=b.partTargetDuration?b.partTargetDuration:(b.targetDuration-Bc)*2,A=[m,y];for(let T=0;T<A.length;T++){if(!A[T])continue;if(a1(A[T],r)<_)return!1}const w=DT(p,r);return w.length===0?!1:(d=w.start(0)+zc,this.logger_(`Buffered region starts (${w.start(0)})  just beyond seek point (${r}). Seeking to ${d}.`),this.tech_.setCurrentTime(d),!0)}waiting_(){if(this.techWaiting_())return;const t=this.tech_.currentTime(),n=this.tech_.buffered(),r=ng(n,t);if(r.length&&t+3<=r.end(0)){this.resetTimeUpdate_(),this.tech_.setCurrentTime(t),this.logger_(`Stopped at ${t} while inside a buffered region [${r.start(0)} -> ${r.end(0)}]. Attempting to resume playback by seeking to the current time.`),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"});return}}techWaiting_(){const t=this.seekable(),n=this.tech_.currentTime();if(this.tech_.seeking())return!0;if(this.beforeSeekableWindow_(t,n)){const p=t.end(t.length-1);return this.logger_(`Fell out of live window at time ${n}. Seeking to live point (seekable end) ${p}`),this.resetTimeUpdate_(),this.tech_.setCurrentTime(p),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),!0}const r=this.tech_.vhs.playlistController_.sourceUpdater_,l=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:r.audioBuffered(),videoBuffered:r.videoBuffered(),currentTime:n}))return this.resetTimeUpdate_(),this.tech_.setCurrentTime(n),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),!0;const f=DT(l,n);return f.length>0?(this.logger_(`Stopped at ${n} and seeking to ${f.start(0)}`),this.resetTimeUpdate_(),this.skipTheGap_(n),!0):!1}afterSeekableWindow_(t,n,r,l=!1){if(!t.length)return!1;let d=t.end(t.length-1)+zc;const f=!r.endList,p=typeof r.partTargetDuration=="number";return f&&(p||l)&&(d=t.end(t.length-1)+r.targetDuration*3),n>d}beforeSeekableWindow_(t,n){return!!(t.length&&t.start(0)>0&&n<t.start(0)-this.liveRangeSafeTimeDelta)}videoUnderflow_({videoBuffered:t,audioBuffered:n,currentTime:r}){if(!t)return;let l;if(t.length&&n.length){const d=ng(t,r-3),f=ng(t,r),p=ng(n,r);p.length&&!f.length&&d.length&&(l={start:d.end(0),end:p.end(0)})}else DT(t,r).length||(l=this.gapFromVideoUnderflow_(t,r));return l?(this.logger_(`Encountered a gap in video from ${l.start} to ${l.end}. Seeking to current time ${r}`),!0):!1}skipTheGap_(t){const n=this.tech_.buffered(),r=this.tech_.currentTime(),l=DT(n,r);if(this.resetTimeUpdate_(),l.length===0||r!==t)return;this.logger_("skipTheGap_:","currentTime:",r,"scheduled currentTime:",t,"nextRange start:",l.start(0)),this.tech_.setCurrentTime(l.start(0)+Bc);const d={gapInfo:{from:r,to:l.start(0)}};this.playlistController_.trigger({type:"gapjumped",metadata:d}),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"})}gapFromVideoUnderflow_(t,n){const r=Z7(t);for(let l=0;l<r.length;l++){const d=r.start(l),f=r.end(l);if(n-d<4&&n-d>2)return{start:d,end:f}}return null}}const vW={errorInterval:30,getSource(u){const n=this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource();return u(n)}},sU=function(u,t){let n=0,r=0;const l=cs(vW,t);u.ready(()=>{u.trigger({type:"usage",name:"vhs-error-reload-initialized"})});const d=function(){r&&u.currentTime(r)},f=function(b){b!=null&&(r=u.duration()!==1/0&&u.currentTime()||0,u.one("loadedmetadata",d),u.src(b),u.trigger({type:"usage",name:"vhs-error-reload"}),u.play())},p=function(){if(Date.now()-n<l.errorInterval*1e3){u.trigger({type:"usage",name:"vhs-error-reload-canceled"});return}if(!l.getSource||typeof l.getSource!="function"){Qt.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}return n=Date.now(),l.getSource.call(u,f)},m=function(){u.off("loadedmetadata",d),u.off("error",p),u.off("dispose",m)},y=function(b){m(),sU(u,b)};u.on("error",p),u.on("dispose",m),u.reloadSourceOnError=y},TW=function(u){sU(this,u)};var aU="3.17.0",EW="7.1.0",bW="1.3.1",_W="7.2.0",SW="4.0.2";const Ks={PlaylistLoader:ig,Playlist:Al,utils:CK,STANDARD_PLAYLIST_SELECTOR:PP,INITIAL_PLAYLIST_SELECTOR:gY,lastBandwidthSelector:PP,movingAverageBandwidthSelector:hY,comparePlaylistBandwidth:d1,comparePlaylistResolution:fY,xhr:PF()};Object.keys(qa).forEach(u=>{Object.defineProperty(Ks,u,{get(){return Qt.log.warn(`using Vhs.${u} is UNSAFE be sure you know what you are doing`),qa[u]},set(t){if(Qt.log.warn(`using Vhs.${u} is UNSAFE be sure you know what you are doing`),typeof t!="number"||t<0){Qt.log.warn(`value of Vhs.${u} must be greater than or equal to 0`);return}qa[u]=t}})});const oU="videojs-vhs",lU=function(u,t){const n=t.media();let r=-1;for(let l=0;l<u.length;l++)if(u[l].id===n.id){r=l;break}u.selectedIndex_=r,u.trigger({selectedIndex:r,type:"change"})},xW=function(u,t){t.representations().forEach(n=>{u.addQualityLevel(n)}),lU(u,t.playlists)};Ks.canPlaySource=function(){return Qt.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};const AW=(u,t,n)=>{if(!u)return u;let r={};t&&t.attributes&&t.attributes.CODECS&&(r=Uy(Rc(t.attributes.CODECS))),n&&n.attributes&&n.attributes.CODECS&&(r.audio=n.attributes.CODECS);const l=Eg(r.video),d=Eg(r.audio),f={};for(const p in u)f[p]={},d&&(f[p].audioContentType=d),l&&(f[p].videoContentType=l),t.contentProtection&&t.contentProtection[p]&&t.contentProtection[p].pssh&&(f[p].pssh=t.contentProtection[p].pssh),typeof u[p]=="string"&&(f[p].url=u[p]);return cs(u,f)},wW=(u,t)=>u.reduce((n,r)=>{if(!r.contentProtection)return n;const l=t.reduce((d,f)=>{const p=r.contentProtection[f];return p&&p.pssh&&(d[f]={pssh:p.pssh}),d},{});return Object.keys(l).length&&n.push(l),n},[]),IW=({player:u,sourceKeySystems:t,audioMedia:n,mainPlaylists:r})=>{if(!u.eme.initializeMediaKeys)return Promise.resolve();const l=n?r.concat([n]):r,d=wW(l,Object.keys(t)),f=[],p=[];return d.forEach(m=>{p.push(new Promise((y,b)=>{u.tech_.one("keysessioncreated",y)})),f.push(new Promise((y,b)=>{u.eme.initializeMediaKeys({keySystems:m},_=>{if(_){b(_);return}y()})}))}),Promise.race([Promise.all(f),Promise.race(p)])},CW=({player:u,sourceKeySystems:t,media:n,audioMedia:r})=>{const l=AW(t,n,r);return l?(u.currentSource().keySystems=l,l&&!u.eme?(Qt.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1):!0):!1},uU=()=>{if(!St.localStorage)return null;const u=St.localStorage.getItem(oU);if(!u)return null;try{return JSON.parse(u)}catch{return null}},kW=u=>{if(!St.localStorage)return!1;let t=uU();t=t?cs(t,u):u;try{St.localStorage.setItem(oU,JSON.stringify(t))}catch{return!1}return t},DW=u=>u.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")===0?JSON.parse(u.substring(u.indexOf(",")+1)):u,cU=(u,t)=>{u._requestCallbackSet||(u._requestCallbackSet=new Set),u._requestCallbackSet.add(t)},dU=(u,t)=>{u._responseCallbackSet||(u._responseCallbackSet=new Set),u._responseCallbackSet.add(t)},fU=(u,t)=>{u._requestCallbackSet&&(u._requestCallbackSet.delete(t),u._requestCallbackSet.size||delete u._requestCallbackSet)},hU=(u,t)=>{u._responseCallbackSet&&(u._responseCallbackSet.delete(t),u._responseCallbackSet.size||delete u._responseCallbackSet)};Ks.supportsNativeHls=function(){if(!li||!li.createElement)return!1;const u=li.createElement("video");return Qt.getTech("Html5").isSupported()?["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some(function(n){return/maybe|probably/i.test(u.canPlayType(n))}):!1}();Ks.supportsNativeDash=function(){return!li||!li.createElement||!Qt.getTech("Html5").isSupported()?!1:/maybe|probably/i.test(li.createElement("video").canPlayType("application/dash+xml"))}();Ks.supportsTypeNatively=u=>u==="hls"?Ks.supportsNativeHls:u==="dash"?Ks.supportsNativeDash:!1;Ks.isSupported=function(){return Qt.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")};Ks.xhr.onRequest=function(u){cU(Ks.xhr,u)};Ks.xhr.onResponse=function(u){dU(Ks.xhr,u)};Ks.xhr.offRequest=function(u){fU(Ks.xhr,u)};Ks.xhr.offResponse=function(u){hU(Ks.xhr,u)};const RW=Qt.getComponent("Component");class pU extends RW{constructor(t,n,r){if(super(n,r.vhs),typeof r.initialBandwidth=="number"&&(this.options_.bandwidth=r.initialBandwidth),this.logger_=Au("VhsHandler"),n.options_&&n.options_.playerId){const l=Qt.getPlayer(n.options_.playerId);this.player_=l}if(this.tech_=n,this.source_=t,this.stats={},this.ignoreNextSeekingEvent_=!1,this.setOptions_(),this.options_.overrideNative&&n.overrideNativeAudioTracks&&n.overrideNativeVideoTracks)n.overrideNativeAudioTracks(!0),n.overrideNativeVideoTracks(!0);else if(this.options_.overrideNative&&(n.featuresNativeVideoTracks||n.featuresNativeAudioTracks))throw new Error("Overriding native VHS requires emulated tracks. See https://git.io/vMpjB");this.on(li,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],l=>{const d=li.fullscreenElement||li.webkitFullscreenElement||li.mozFullScreenElement||li.msFullscreenElement;d&&d.contains(this.tech_.el())?this.playlistController_.fastQualityChange_():this.playlistController_.checkABR_()}),this.on(this.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=!1;return}this.setCurrentTime(this.tech_.currentTime())}),this.on(this.tech_,"error",function(){this.tech_.error()&&this.playlistController_&&this.playlistController_.pauseLoading()}),this.on(this.tech_,"play",this.play)}setOptions_(t={}){if(this.options_=cs(this.options_,t),this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions!==!1,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.usePlayerObjectFit=this.options_.usePlayerObjectFit||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useForcedSubtitles=this.options_.useForcedSubtitles||!1,this.options_.useNetworkInformationApi=typeof this.options_.useNetworkInformationApi<"u"?this.options_.useNetworkInformationApi:!0,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,this.options_.llhls=this.options_.llhls!==!1,this.options_.bufferBasedABR=this.options_.bufferBasedABR||!1,typeof this.options_.playlistExclusionDuration!="number"&&(this.options_.playlistExclusionDuration=60),typeof this.options_.bandwidth!="number"&&this.options_.useBandwidthFromLocalStorage){const r=uU();r&&r.bandwidth&&(this.options_.bandwidth=r.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"})),r&&r.throughput&&(this.options_.throughput=r.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}))}typeof this.options_.bandwidth!="number"&&(this.options_.bandwidth=qa.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===qa.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","usePlayerObjectFit","customPixelRatio","limitRenditionByPlayerDimensions","bandwidth","customTagParsers","customTagMappers","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","bufferBasedABR","liveRangeSafeTimeDelta","llhls","useForcedSubtitles","useNetworkInformationApi","useDtsForTimestampOffset","exactManifestTimings","leastPixelDiffSelector"].forEach(r=>{typeof this.source_[r]<"u"&&(this.options_[r]=this.source_[r])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio,this.usePlayerObjectFit=this.options_.usePlayerObjectFit;const n=this.options_.customPixelRatio;typeof n=="number"&&n>=0&&(this.customPixelRatio=n)}setOptions(t={}){this.setOptions_(t)}src(t,n){if(!t)return;this.setOptions_(),this.options_.src=DW(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=Ks,this.options_.sourceType=NN(n),this.options_.seekTo=d=>{this.tech_.setCurrentTime(d)},this.options_.player_=this.player_,this.playlistController_=new hW(this.options_);const r=cs({liveRangeSafeTimeDelta:zc},this.options_,{seekable:()=>this.seekable(),media:()=>this.playlistController_.media(),playlistController:this.playlistController_});this.playbackWatcher_=new yW(r),this.attachStreamingEventListeners_(),this.playlistController_.on("error",()=>{const d=Qt.players[this.tech_.options_.playerId];let f=this.playlistController_.error;typeof f=="object"&&!f.code?f.code=3:typeof f=="string"&&(f={message:f,code:3}),d.error(f)});const l=this.options_.bufferBasedABR?Ks.movingAverageBandwidthSelector(.55):Ks.STANDARD_PLAYLIST_SELECTOR;this.playlistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):l.bind(this),this.playlistController_.selectInitialPlaylist=Ks.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.playlistController_.mainPlaylistLoader_,this.mediaSource=this.playlistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get(){return this.playlistController_.selectPlaylist},set(d){this.playlistController_.selectPlaylist=d.bind(this)}},throughput:{get(){return this.playlistController_.mainSegmentLoader_.throughput.rate},set(d){this.playlistController_.mainSegmentLoader_.throughput.rate=d,this.playlistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get(){let d=this.playlistController_.mainSegmentLoader_.bandwidth;const f=St.navigator.connection||St.navigator.mozConnection||St.navigator.webkitConnection,p=1e7;if(this.options_.useNetworkInformationApi&&f){const m=f.downlink*1e3*1e3;m>=p&&d>=p?d=Math.max(d,m):d=m}return d},set(d){this.playlistController_.mainSegmentLoader_.bandwidth=d,this.playlistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get(){const d=1/(this.bandwidth||1);let f;return this.throughput>0?f=1/this.throughput:f=0,Math.floor(1/(d+f))},set(){Qt.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:()=>this.bandwidth||0,enumerable:!0},mediaRequests:{get:()=>this.playlistController_.mediaRequests_()||0,enumerable:!0},mediaRequestsAborted:{get:()=>this.playlistController_.mediaRequestsAborted_()||0,enumerable:!0},mediaRequestsTimedout:{get:()=>this.playlistController_.mediaRequestsTimedout_()||0,enumerable:!0},mediaRequestsErrored:{get:()=>this.playlistController_.mediaRequestsErrored_()||0,enumerable:!0},mediaTransferDuration:{get:()=>this.playlistController_.mediaTransferDuration_()||0,enumerable:!0},mediaBytesTransferred:{get:()=>this.playlistController_.mediaBytesTransferred_()||0,enumerable:!0},mediaSecondsLoaded:{get:()=>this.playlistController_.mediaSecondsLoaded_()||0,enumerable:!0},mediaAppends:{get:()=>this.playlistController_.mediaAppends_()||0,enumerable:!0},mainAppendsToLoadedData:{get:()=>this.playlistController_.mainAppendsToLoadedData_()||0,enumerable:!0},audioAppendsToLoadedData:{get:()=>this.playlistController_.audioAppendsToLoadedData_()||0,enumerable:!0},appendsToLoadedData:{get:()=>this.playlistController_.appendsToLoadedData_()||0,enumerable:!0},timeToLoadedData:{get:()=>this.playlistController_.timeToLoadedData_()||0,enumerable:!0},buffered:{get:()=>kh(this.tech_.buffered()),enumerable:!0},currentTime:{get:()=>this.tech_.currentTime(),enumerable:!0},currentSource:{get:()=>this.tech_.currentSource_,enumerable:!0},currentTech:{get:()=>this.tech_.name_,enumerable:!0},duration:{get:()=>this.tech_.duration(),enumerable:!0},main:{get:()=>this.playlists.main,enumerable:!0},playerDimensions:{get:()=>this.tech_.currentDimensions(),enumerable:!0},seekable:{get:()=>kh(this.tech_.seekable()),enumerable:!0},timestamp:{get:()=>Date.now(),enumerable:!0},videoPlaybackQuality:{get:()=>this.tech_.getVideoPlaybackQuality(),enumerable:!0}}),this.tech_.one("canplay",this.playlistController_.setupFirstPlay.bind(this.playlistController_)),this.tech_.on("bandwidthupdate",()=>{this.options_.useBandwidthFromLocalStorage&&kW({bandwidth:this.bandwidth,throughput:Math.round(this.throughput)})}),this.playlistController_.on("selectedinitialmedia",()=>{mW(this)}),this.playlistController_.sourceUpdater_.on("createdsourcebuffers",()=>{this.setupEme_()}),this.on(this.playlistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.playlistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=St.URL.createObjectURL(this.playlistController_.mediaSource),(Qt.browser.IS_ANY_SAFARI||Qt.browser.IS_IOS)&&this.options_.overrideNative&&this.options_.sourceType==="hls"&&typeof this.tech_.addSourceElement=="function"?(this.tech_.addSourceElement(this.mediaSourceUrl_),this.tech_.addSourceElement(this.source_.src)):this.tech_.src(this.mediaSourceUrl_))}createKeySessions_(){const t=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),IW({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:t&&t.media(),mainPlaylists:this.playlists.main.playlists}).then(()=>{this.logger_("created EME key session"),this.playlistController_.sourceUpdater_.initializedEme()}).catch(n=>{this.logger_("error while creating EME key session",n),this.player_.error({message:"Failed to initialize media keys for EME",code:3})})}handleWaitingForKey_(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()}setupEme_(){const t=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader,n=CW({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:t&&t.media()});if(this.player_.tech_.on("keystatuschange",r=>{this.playlistController_.updatePlaylistByKeyStatus(r.keyId,r.status)}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),!n){this.playlistController_.sourceUpdater_.initializedEme();return}this.createKeySessions_()}setupQualityLevels_(){const t=Qt.players[this.tech_.options_.playerId];!t||!t.qualityLevels||this.qualityLevels_||(this.qualityLevels_=t.qualityLevels(),this.playlistController_.on("selectedinitialmedia",()=>{xW(this.qualityLevels_,this)}),this.playlists.on("mediachange",()=>{lU(this.qualityLevels_,this.playlists)}))}static version(){return{"@videojs/http-streaming":aU,"mux.js":EW,"mpd-parser":bW,"m3u8-parser":_W,"aes-decrypter":SW}}version(){return this.constructor.version()}canChangeType(){return tU.canChangeType()}play(){this.playlistController_.play()}setCurrentTime(t){this.playlistController_.setCurrentTime(t)}duration(){return this.playlistController_.duration()}seekable(){return this.playlistController_.seekable()}dispose(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.playlistController_&&this.playlistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.mediaSourceUrl_&&St.URL.revokeObjectURL&&(St.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),super.dispose()}convertToProgramTime(t,n){return NK({playlist:this.playlistController_.media(),time:t,callback:n})}seekToProgramTime(t,n,r=!0,l=2){return UF({programTime:t,playlist:this.playlistController_.media(),retryCount:l,pauseAfterSeek:r,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:n})}setupXhrHooks_(){this.xhr.onRequest=t=>{cU(this.xhr,t)},this.xhr.onResponse=t=>{dU(this.xhr,t)},this.xhr.offRequest=t=>{fU(this.xhr,t)},this.xhr.offResponse=t=>{hU(this.xhr,t)},this.player_.trigger("xhr-hooks-ready")}attachStreamingEventListeners_(){const t=["seekablerangeschanged","bufferedrangeschanged","contentsteeringloadstart","contentsteeringloadcomplete","contentsteeringparsed"],n=["gapjumped","playedrangeschanged"];t.forEach(r=>{this.playlistController_.on(r,l=>{this.player_.trigger(Us({},l))})}),n.forEach(r=>{this.playbackWatcher_.on(r,l=>{this.player_.trigger(Us({},l))})})}}const CE={name:"videojs-http-streaming",VERSION:aU,canHandleSource(u,t={}){const n=cs(Qt.options,t);return!n.vhs.experimentalUseMMS&&!yy("avc1.4d400d,mp4a.40.2",!1)?!1:CE.canPlayType(u.type,n)},handleSource(u,t,n={}){const r=cs(Qt.options,n);return t.vhs=new pU(u,t,r),t.vhs.xhr=PF(),t.vhs.setupXhrHooks_(),t.vhs.src(u.src,u.type),t.vhs},canPlayType(u,t){const n=NN(u);if(!n)return"";const r=CE.getOverrideNative(t);return!Ks.supportsTypeNatively(n)||r?"maybe":""},getOverrideNative(u={}){const{vhs:t={}}=u,n=!(Qt.browser.IS_ANY_SAFARI||Qt.browser.IS_IOS),{overrideNative:r=n}=t;return r}},LW=()=>yy("avc1.4d400d,mp4a.40.2",!0);LW()&&Qt.getTech("Html5").registerSourceHandler(CE,0);Qt.VhsHandler=pU;Qt.VhsSourceHandler=CE;Qt.Vhs=Ks;Qt.use||Qt.registerComponent("Vhs",Ks);Qt.options.vhs=Qt.options.vhs||{};(!Qt.getPlugin||!Qt.getPlugin("reloadSourceOnError"))&&Qt.registerPlugin("reloadSourceOnError",TW);const $P=()=>{const u={};return u.promise=new Promise((t,n)=>{u.resolve=t,u.reject=n}),u.promise.catch(()=>{}),u};Aa.polyfill.installAll();const PW=Qt.getTech("Html5"),MW={};class kg extends PW{constructor(t,n){super(t,n),this.player_=Qt(t.playerId),this.shaka_=this.initShaka(),this.addClass("vjs-shaka")}initShaka(){Aa.log&&(this.options_.debug?Aa.log.setLevel(Aa.log.Level.DEBUG):Aa.log.setLevel(Aa.log.Level.ERROR));const t=new Aa.Player;return t.configure({...MW,...this.options_.configuration}),this.attached_==null&&(this.attached_=$P()),t.attach(this.el_).then(this.attached_.resolve).catch(n=>this.proxyError(n)),t.addEventListener("buffering",n=>{var r,l;n.buffering?(r=this.player_)==null||r.trigger("waiting"):(l=this.player_)==null||l.trigger("playing")}),t.addEventListener("error",n=>{this.proxyError(n.detail)}),t}setSource(t){let n,r,l;if(t==null){this.shaka_.unload();return}if(typeof t=="string"?n=t:typeof t=="object"&&(n=t.src,r=t.type,t.keySystems!=null&&typeof t.keySystems=="object"&&(l={servers:t.keySystems})),n==null){this.shaka_.unload();return}this.attached_==null&&(this.attached_=$P()),this.attached_.promise.then(()=>l!=null&&this.shaka_.configure({drm:l})).then(()=>this.shaka_.load(n,void 0,r)).catch(d=>this.proxyError(d))}mapErrorCode(t){const{message:n,category:r}=t;if(typeof n=="string"&&(n.includes("UNSUPPORTED")||n.includes("NOT_SUPPORTED")))return 4;if(typeof r=="number")switch(r){case Aa.util.Error.Category.NETWORK:return 2;case Aa.util.Error.Category.TEXT:case Aa.util.Error.Category.MEDIA:case Aa.util.Error.Category.MANIFEST:return 3;case Aa.util.Error.Category.STREAMING:return 1;case Aa.util.Error.Category.DRM:return 5;case Aa.util.Error.Category.PLAYER:case Aa.util.Error.Category.CAST:case Aa.util.Error.Category.STORAGE:case Aa.util.Error.Category.ADS:return 0}return 0}proxyError(t){var n;(n=this.player_)==null||n.error({code:this.mapErrorCode(t),message:`${t.code} - ${t.message}`})}dispose(){var t;super.dispose(),(t=this.attached_)==null||t.reject(),this.attached_=void 0,this.shaka_.unload(),this.shaka_.destroy()}}kg.VERSION=Aa.Player.version;kg.isSupported=function(){return Aa.Player.isBrowserSupported()};kg.canPlayType=function(u,t){u=u.toLowerCase();const n=["application/dash+xml"],r=["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"];return(t==null?void 0:t.dash)!==!1&&n.includes(u)||(t==null?void 0:t.hls)!==!1&&r.includes(u)?"probably":""};kg.canPlaySource=function(u,t){return kg.canPlayType(u.type,t)};const NW=Qt.getTech("Tech");NW.registerTech("Shaka",kg);var OW=Ka('<div class=player-container><div class="player-label player-name-label">VideoJS w/Shaka</div><div class="player-label player-status-label"></div><div class="player-label player-time-label"></div><div data-vjs-player><video muted width=320 height=240>'),FW=Ka("<div>");const UW={muted:!0,autoplay:!0,controls:!1,techOrder:["shaka"],children:[],shaka:{configuration:{}}};function BW(u){let t,n;const[r,l]=Va(null);let d=null,f=null,p=null;const[m,y]=Va([]),b=async()=>{n=Qt(t,UW,()=>{t=n.el_.querySelector("video"),t.addEventListener("loadeddata",()=>{if(d!==null){const T=((performance.now()-d)/1e3).toFixed(2);y(k=>[` loaded in ${T}s`,...k])}})}),n.on("error",()=>{const w=n.error();console.error("VideoJS: Error code",w==null?void 0:w.code,"object",w),l(`error: ${(w==null?void 0:w.code)??"unknown"}`)});for(const w of["suspend","loadedmetadata","loadeddata","durationchange","liveedgechange","timeupdate","progress","stalled","abort","canplay","canplaythrough","seeking","seeked","play","playing","pause","ended","waiting","error"])n.on(w,()=>{const T=(()=>{var U;if(n.error())return`error ${((U=n.error())==null?void 0:U.code)??"unknown"}`;if(n.readyState()<3&&!n.paused())return"buffering";if(n.hasStarted())return n.ended()?"ended":n.paused()?n.currentTime()!==0?"paused":void 0:"playing"})();if(T==null||T===p)return;const k=performance.now();if(p!=="playing"&&f!=null){const U=((k-f)/1e3).toFixed(2);y(Y=>[`${p} for ${U}s`,...Y])}f=k,p=T,l(T)});t.muted=!0},_=async(w,T)=>{if(y([]),l("loading"),f=null,p=null,!!n){if(w==null){l(null),n.reset();return}try{d=performance.now();const k={src:w};T&&(k.keySystems={"com.widevine.alpha":T}),n.src(k),n.play()}catch(k){console.error("VideoJS: Error code",k.code,"object",k),l(`error: ${k.code||"unknown"}`)}}},A=async()=>{try{n==null||n.dispose()}catch(w){console.error("VideoJS: Error destroying VideoJS player:",w)}};return Mf(()=>b()),zh(()=>_(u.playbackUrl,u.licenseUrl)),jh(()=>A()),(()=>{var w=OW(),T=w.firstChild,k=T.nextSibling,U=k.nextSibling,Y=U.nextSibling,se=Y.firstChild;T.style.setProperty("background","purple"),ls(k,r),ls(U,xl(Od,{get each(){return m()},children:Re=>(()=>{var Be=FW();return ls(Be,Re),Be})()}));var te=t;return typeof te=="function"?jy(te,se):t=se,w})()}/*! @name videojs-contrib-eme @version 5.5.1 @license Apache-2.0 */const zW=u=>{const t=new ArrayBuffer(u.length*2),n=new Uint16Array(t);for(let r=0;r<u.length;r++)n[r]=u.charCodeAt(r);return n},jW=u=>String.fromCharCode.apply(null,new Uint8Array(u.buffer||u)),qW=u=>String.fromCharCode.apply(null,new Uint16Array(u.buffer||u)),HW=u=>{const t=li.createElement("a");return t.href=u,t.hostname},GW=(u,t)=>{if(u===t)return!0;if(u.byteLength!==t.byteLength)return!1;const n=new DataView(u),r=new DataView(t);for(let l=0;l<n.byteLength;l++)if(n.getUint8(l)!==r.getUint8(l))return!1;return!0},KP=u=>u instanceof Uint8Array||u instanceof Uint16Array?u.buffer:u,f1=(...u)=>{const t=Qt.obj||Qt;return(t.merge||t.mergeOptions).apply(t,u)},eb=(...u)=>{const t=f1(...u);return Object.keys(t).forEach(n=>{t[n]===null&&delete t[n]}),t},gU=u=>{const t=[];return Object.keys(u).forEach(n=>{const r=EU(n,u[n])[0];t.push(r)}),t};let Dg=Qt.xhr.httpHandler;Dg||(Dg=(u,t)=>(n,r,l)=>{if(n){u(n);return}if(r.statusCode>=400&&r.statusCode<=599){let d=l;t&&(d=String.fromCharCode.apply(null,new Uint8Array(l))),u({cause:d});return}u(null,l)});const VW=u=>{const t=String.fromCharCode.apply(null,new Uint16Array(u)),n=new St.DOMParser().parseFromString(t,"application/xml"),r=n.getElementsByTagName("HttpHeaders")[0];let l={};if(r){const p=r.getElementsByTagName("name"),m=r.getElementsByTagName("value");for(let y=0;y<p.length;y++)l[p[y].childNodes[0].nodeValue]=m[y].childNodes[0].nodeValue}const d=n.getElementsByTagName("Challenge")[0];let f;return d&&(f=St.atob(d.childNodes[0].nodeValue)),n.querySelector("parsererror")&&(l={"Content-Type":"text/xml; charset=utf-8",SOAPAction:'"http://schemas.microsoft.com/DRM/2007/03/protocols/AcquireLicense"'},f=u),{headers:l,message:f}},mU=(u,t,n,r,l)=>{const d=VW(n),f=d.message,p=eb(d.headers,r.emeHeaders,t.licenseHeaders);Qt.xhr({uri:t.url,method:"post",headers:p,body:f,responseType:"arraybuffer",requestType:"license",metadata:{keySystem:u}},Dg(l,!0))},ka={EMEFailedToRequestMediaKeySystemAccess:"eme-failed-request-media-key-system-access",EMEFailedToCreateMediaKeys:"eme-failed-create-media-keys",EMEFailedToAttachMediaKeysToVideoElement:"eme-failed-attach-media-keys-to-video",EMEFailedToCreateMediaKeySession:"eme-failed-create-media-key-session",EMEFailedToSetServerCertificate:"eme-failed-set-server-certificate",EMEFailedToGenerateLicenseRequest:"eme-failed-generate-license-request",EMEFailedToUpdateSessionWithReceivedLicenseKeys:"eme-failed-update-session",EMEFailedToCloseSession:"eme-failed-close-session",EMEFailedToRemoveKeysFromSession:"eme-failed-remove-keys",EMEFailedToLoadSessionBySessionId:"eme-failed-load-session"},Eu="com.apple.fps.1_0",$W=({initData:u,id:t,cert:n})=>{typeof t=="string"&&(t=zW(t));let r=0;const l=new ArrayBuffer(u.byteLength+4+t.byteLength+4+n.byteLength),d=new DataView(l);new Uint8Array(l,r,u.byteLength).set(u),r+=u.byteLength,d.setUint32(r,t.byteLength,!0),r+=4;const p=new Uint16Array(l,r,t.length);return p.set(t),r+=p.byteLength,d.setUint32(r,n.byteLength,!0),r+=4,new Uint8Array(l,r,n.byteLength).set(n),new Uint8Array(l,0,l.byteLength)},KW=({video:u,contentId:t,initData:n,cert:r,options:l,getLicense:d,eventBus:f,emeError:p})=>new Promise((m,y)=>{if(!u.webkitKeys)try{u.webkitSetMediaKeys(new St.WebKitMediaKeys(Eu))}catch(_){const A={errorType:ka.EMEFailedToCreateMediaKeys,keySystem:Eu};p(_,A),y("Could not create MediaKeys");return}let b;try{b=u.webkitKeys.createSession("video/mp4",$W({id:t,initData:n,cert:r}))}catch(_){const A={errorType:ka.EMEFailedToCreateMediaKeySession,keySystem:Eu};p(_,A),y("Could not create key session");return}va(f,{type:"keysessioncreated",keySession:b}),b.contentId=t,b.addEventListener("webkitkeymessage",_=>{va(f,{type:"keymessage",messageEvent:_}),d(l,t,_.message,(A,w)=>{if(f&&va(f,{type:"licenserequestattempted"}),A){const T={errortype:ka.EMEFailedToGenerateLicenseRequest,keySystem:Eu};p(A,T),y(A);return}b.update(new Uint8Array(w)),va(f,{type:"keysessionupdated",keySession:b})})}),b.addEventListener("webkitkeyadded",()=>{m()}),b.addEventListener("webkitkeyerror",()=>{const _=b.error,A={errorType:ka.EMEFailedToUpdateSessionWithReceivedLicenseKeys,keySystem:Eu};p(_,A),y(`KeySession error: code ${_.code}, systemCode ${_.systemCode}`)})}),yU=(u,t)=>(n,r)=>{const l=eb(n.emeHeaders,t.certificateHeaders);Qt.xhr({uri:t.certificateUri,responseType:"arraybuffer",requestType:"license",metadata:{keySystem:u},headers:l},Dg((d,f)=>{if(d){r(d);return}r(null,new Uint8Array(f))}))},vU=(u,t)=>HW(t),TU=(u,t)=>(n,r,l,d)=>{const f=eb({"Content-type":"application/octet-stream"},n.emeHeaders,t.licenseHeaders);Qt.xhr({uri:t.licenseUri||t.url,method:"POST",responseType:"arraybuffer",requestType:"license",metadata:{keySystem:u,contentId:r},body:l,headers:f},Dg(d,!0))},YW=({video:u,initData:t,options:n,eventBus:r,emeError:l})=>{const d=n.keySystems[Eu],f=d.getCertificate||yU(Eu,d),p=d.getContentId||vU,m=d.getLicense||TU(Eu,d);return new Promise((y,b)=>{f(n,(_,A)=>{if(_){const w={errorType:ka.EMEFailedToSetServerCertificate,keySystem:Eu};l(_,w),b(_);return}y(A)})}).then(y=>KW({video:u,cert:y,initData:t,getLicense:m,options:n,contentId:p(n,qW(t)),eventBus:r,emeError:l}))},h1=u=>u.startsWith("com.apple.fps"),va=(u,t)=>{u.isDisposed()||u.trigger(Us({},t))},EU=(u,t)=>{if(t.supportedConfigurations)return t.supportedConfigurations;const n=h1(u),r={},l=t.initDataTypes||(n?["sinf"]:null),d=t.audioContentType,f=t.audioRobustness,p=t.videoContentType||(n?"video/mp4":null),m=t.videoRobustness,y=t.persistentState;return(d||f)&&(r.audioCapabilities=[Us({},d?{contentType:d}:{},f?{robustness:f}:{})]),(p||m)&&(r.videoCapabilities=[Us({},p?{contentType:p}:{},m?{robustness:m}:{})]),y&&(r.persistentState=y),l&&(r.initDataTypes=l),[r]},WW=u=>{let t;return Object.keys(u).forEach(n=>{const r=EU(n,u[n]);t?t=t.catch(l=>St.navigator.requestMediaKeySystemAccess(n,r)):t=St.navigator.requestMediaKeySystemAccess(n,r)}),t},bU=(u,t)=>{const{mediaKeys:n,initDataType:r,initData:l,options:d,getLicense:f,removeSession:p,eventBus:m,contentId:y,emeError:b,keySystem:_}=t;let A=0,w;u.on("pause",()=>{d.limitRenewalsMaxPauseDuration&&typeof d.limitRenewalsMaxPauseDuration=="number"&&(w=setInterval(()=>{A++,A>=d.limitRenewalsMaxPauseDuration&&clearInterval(w)},1e3),u.on("play",()=>{clearInterval(w),A=0}))});try{const T=n.createSession(),k=()=>{Qt.log.debug("Session expired, closing the session."),T.close().then(()=>{m.isDisposed()||(va(m,{type:"keysessionclosed",keySession:T}),p(l))}).catch(U=>{const Y={errorType:ka.EMEFailedToCloseSession,keySystem:_};b(U,Y)})};return va(m,{type:"keysessioncreated",keySession:T}),u.on("dispose",()=>{k()}),new Promise((U,Y)=>{T.addEventListener("message",te=>{if(va(m,{type:"keymessage",messageEvent:te}),!(te.messageType!=="license-request"&&te.messageType!=="license-renewal")){if(te.messageType==="license-renewal"){const Re=d.limitRenewalsBeforePlay,Be=d.limitRenewalsMaxPauseDuration,j=typeof Be=="number",M=!u.hasStarted()&&Re,Z=u.paused()&&j&&A>=Be,K=u.ended();if(M||Z||K){k();return}}f(d,te.message,y).then(Re=>{U(T.update(Re).then(()=>{va(m,{type:"keysessionupdated",keySession:T})}).catch(Be=>{const j={errorType:ka.EMEFailedToUpdateSessionWithReceivedLicenseKeys,keySystem:_};b(Be,j)}))}).catch(Re=>{Y(Re)})}},!1);const se="keystatuseschange";T.addEventListener(se,te=>{let Re=!1;m.isDisposed()||(va(m,{type:se,keyStatuses:T.keyStatuses}),T.keyStatuses.forEach((Be,j)=>{switch(va(m,{keyId:j,status:Be,target:T,type:"keystatuschange"}),Be){case"expired":Re=!0;break;case"internal-error":Qt.log.warn(`Key status reported as "internal-error." Leaving the session open since we don't have enough details to know if this error is fatal.`,te);break}}),Re&&k())},!1),T.generateRequest(r,l).catch(te=>{const Re={errorType:ka.EMEFailedToGenerateLicenseRequest,keySystem:_};b(te,Re),Y("Unable to create or initialize key session")})})}catch(T){const k={errorType:ka.EMEFailedToCreateMediaKeySession,keySystem:_};b(T,k)}},XW=({player:u,video:t,initDataType:n,initData:r,options:l,getLicense:d,contentId:f,removeSession:p,eventBus:m,emeError:y})=>{const b={initDataType:n,initData:r,options:l,getLicense:d,removeSession:p,eventBus:m,contentId:f,emeError:y,keySystem:t.keySystem};return t.mediaKeysObject?(b.mediaKeys=t.mediaKeysObject,bU(u,b)):(t.pendingSessionData.push(b),Promise.resolve())},QW=({player:u,video:t,certificate:n,createdMediaKeys:r,emeError:l})=>{t.mediaKeysObject=r;const d=[];n&&d.push(r.setServerCertificate(n).catch(f=>{const p={errorType:ka.EMEFailedToSetServerCertificate,keySystem:t.keySystem};l(f,p)}));for(let f=0;f<t.pendingSessionData.length;f++){const p=t.pendingSessionData[f];d.push(bU(u,{mediaKeys:t.mediaKeysObject,initDataType:p.initDataType,initData:p.initData,options:p.options,getLicense:p.getLicense,removeSession:p.removeSession,eventBus:p.eventBus,contentId:p.contentId,emeError:p.emeError,keySystem:t.keySystem}))}return t.pendingSessionData=[],d.push(t.setMediaKeys(r).catch(f=>{const p={errorType:ka.EMEFailedToAttachMediaKeysToVideoElement,keySystem:t.keySystem};l(f,p)})),Promise.all(d)},JW=(u,t)=>(n,r,l)=>{mU(u,t,r,n,l)},ZW=(u,t)=>(n,r,l)=>{const d=eb({"Content-type":"application/octet-stream"},n.emeHeaders,t.licenseHeaders);Qt.xhr({uri:t.url,method:"POST",responseType:"arraybuffer",requestType:"license",metadata:{keySystem:u},body:r,headers:d},Dg(l,!0))},eX=(u,t,n)=>(r,l,d)=>new Promise((f,p)=>{const m=function(y,b){if(n&&va(n,{type:"licenserequestattempted"}),y){p(y);return}f(b)};h1(u)?t(r,d,new Uint8Array(l),m):t(r,l,m)}),tX=(u,t)=>{if(typeof t=="string"&&(t={url:t}),!t.url&&t.licenseUri&&(t.url=t.licenseUri),!t.url&&!t.getLicense)throw new Error(`Missing url/licenseUri or getLicense in ${u} keySystem configuration.`);const n=h1(u);if(n&&t.certificateUri&&!t.getCertificate&&(t.getCertificate=yU(u,t)),n&&!t.getCertificate)throw new Error(`Missing getCertificate or certificateUri in ${u} keySystem configuration.`);return n&&!t.getContentId&&(t.getContentId=vU),t.url&&!t.getLicense&&(u==="com.microsoft.playready"?t.getLicense=JW(u,t):n?t.getLicense=TU(u,t):t.getLicense=ZW(u,t)),t},nX=({player:u,video:t,initDataType:n,initData:r,keySystemAccess:l,options:d,removeSession:f,eventBus:p,emeError:m})=>{let y=Promise.resolve();const b=l.keySystem;let _;try{_=tX(b,d.keySystems[b])}catch(w){return Promise.reject(w)}const A=_.getContentId?_.getContentId(d,jW(r)):null;if(typeof t.mediaKeysObject>"u"){t.mediaKeysObject=null,t.pendingSessionData=[];let w;y=new Promise((T,k)=>{if(t.keySystem=b,!_.getCertificate){T(l);return}_.getCertificate(d,(U,Y)=>{if(U){k(U);return}w=Y,T()})}).then(()=>l.createMediaKeys()).then(T=>(va(p,{type:"keysystemaccesscomplete",mediaKeys:T}),QW({player:u,video:t,certificate:w,createdMediaKeys:T,emeError:m}))).catch(T=>{const k={errorType:ka.EMEFailedToCreateMediaKeys,keySystem:b};return m(T,k),T?Promise.reject(T):Promise.reject("Failed to create and initialize a MediaKeys object")})}return y.then(()=>{const w=t.keySystem?eX(b,_.getLicense,p):null;return XW({player:u,video:t,initDataType:n,initData:r,options:d,getLicense:w,contentId:A,removeSession:f,eventBus:p,emeError:m})})},Yu="com.microsoft.playready",iX=(u,t,n,r,l)=>{let d=u.keySystems[Yu];if(typeof d.getKey=="function"){d.getKey(u,n.destinationURL,n.message.buffer,(p,m)=>{if(p){const y={errorType:ka.EMEFailedToRequestMediaKeySystemAccess,config:gU(u.keySystems)};l(p,y),va(r,{message:"Unable to get key: "+p,target:t,type:"mskeyerror"});return}t.update(m),va(r,{type:"keysessionupdated",keySession:t})});return}typeof d=="string"?d={url:d}:typeof d=="boolean"&&(d={}),d.url||(d.url=n.destinationURL);const f=(p,m)=>{if(r&&va(r,{type:"licenserequestattempted"}),p){const y={errorType:ka.EMEFailedToGenerateLicenseRequest,keySystem:Yu};l(p,y),va(r,{message:"Unable to request key from url: "+d.url,target:t,type:"mskeyerror"});return}t.update(new Uint8Array(m))};d.getLicense?d.getLicense(u,n.message.buffer,f):mU(Yu,d,n.message.buffer,u,f)},rX=(u,t,n,r,l)=>{const d=u.msKeys.createSession("video/mp4",t);if(!d){const f=new Error("Could not create key session."),p={errorType:ka.EMEFailedToCreateMediaKeySession,keySystem:Yu};throw l(f,p),f}va(r,{type:"keysessioncreated",keySession:d}),d.addEventListener("mskeymessage",f=>{va(r,{type:"keymessage",messageEvent:f}),iX(n,d,f,r,l)}),d.addEventListener("mskeyerror",f=>{const p={errorType:ka.EMEFailedToCreateMediaKeySession,keySystem:Yu};l(d.error,p),va(r,{message:`Unexpected key error from key session with code: ${d.error.code} and systemCode: ${d.error.systemCode}`,target:d,type:"mskeyerror"})}),d.addEventListener("mskeyadded",()=>{va(r,{target:d,type:"mskeyadded"})})};var sX=({video:u,initData:t,options:n,eventBus:r,emeError:l})=>{u.msKeys&&delete u.msKeys;try{u.msSetMediaKeys(new St.MSMediaKeys(Yu))}catch(d){const f={errorType:ka.EMEFailedToCreateMediaKeys,keySystem:Yu};throw l(d,f),new Error("Unable to create media keys for PlayReady key system. Error: "+d.message)}rX(u,t,n,r,l)};const lA=[{initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/mp4;codecs="mp4a.40.2"'}],videoCapabilities:[{contentType:'video/mp4;codecs="avc1.42E01E"'}]}],aX=[{keySystem:"com.apple.fps",supportedConfig:[{initDataTypes:["sinf"],videoCapabilities:[{contentType:"video/mp4"}]}]},{keySystem:"com.microsoft.playready.recommendation",supportedConfig:lA},{keySystem:"com.widevine.alpha",supportedConfig:lA},{keySystem:"org.w3.clearkey",supportedConfig:lA}],oX=()=>{const u=St.Promise,t={fairplay:!!St.WebKitMediaKeys,playready:!1,widevine:!1,clearkey:!1};return!St.MediaKeys||!St.navigator.requestMediaKeySystemAccess?u.resolve(t):u.all(aX.map(({keySystem:n,supportedConfig:r})=>St.navigator.requestMediaKeySystemAccess(n,r).catch(()=>{}))).then(([n,r,l,d])=>(t.fairplay=!!n,t.playready=!!r,t.widevine=!!l,t.clearkey=!!d,t))};var lX="5.5.1";const uX=(u,t)=>{for(let n=0;n<u.length;n++){if(!u[n].initData)continue;const r=KP(u[n].initData),l=KP(t);if(GW(r,l))return!0}return!1},cX=(u,t)=>{for(let n=0;n<u.length;n++)if(u[n].initData===t){u.splice(n,1);return}};function iw(u,t,n,r,l,d){if(!n||!n.keySystems)return Promise.resolve();if(n.keySystems[Eu])return Qt.log.debug("eme",`Ignoring 'encrypted' event, using legacy fairplay keySystem ${Eu}`),Promise.resolve();let f=t.initData;return WW(n.keySystems).then(p=>{const m=p.keySystem;return n.keySystems[m]&&n.keySystems[m].pssh&&(f=n.keySystems[m].pssh),uX(r,f)||!f?Promise.resolve():(r.push({initData:f}),nX({player:u,video:t.target,initDataType:t.initDataType,initData:f,keySystemAccess:p,options:n,removeSession:cX.bind(null,r),eventBus:l,emeError:d}))}).catch(p=>{const m={errorType:ka.EMEFailedToRequestMediaKeySystemAccess,config:gU(n.keySystems)};d(p,m)})}const dX=(u,t,n,r)=>!t.keySystems||!t.keySystems[Eu]||!u.initData?Promise.resolve():YW({video:u.target,initData:u.initData,options:t,eventBus:n,emeError:r}),_U=(u,t,n,r,l)=>{if(!t.keySystems||!t.keySystems[Yu]||n.reduce((f,p)=>f||p.playready,!1))return;let d=u.initData;t.keySystems[Yu]&&t.keySystems[Yu].pssh&&(d=t.keySystems[Yu].pssh),d&&(n.push({playready:!0,initData:d}),sX({video:u.target,initData:d,options:t,eventBus:r,emeError:l}))},Sy=u=>f1(u.currentSource(),u.eme.options),rg=u=>{const t=u.src();t!==u.eme.activeSrc&&(u.eme.activeSrc=t,u.eme.sessions=[])},fX=u=>(t,n)=>{const r={code:5};typeof t=="string"?r.message=t:t&&(t.message&&(r.message=t.message),t.cause&&(t.cause.length||t.cause.byteLength)&&(r.cause=t.cause),t.keySystem&&(r.keySystem=t.keySystem),r.originalError=t),n&&(r.metadata=n),u.error(r)},YP=(u,t)=>{if(u.$(".vjs-tech").tagName.toLowerCase()==="video"){if(rg(u),St.MediaKeys){const n=()=>{const r={initDataType:"cenc",initData:null,target:u.tech_.el_};rg(u),iw(u,r,Sy(u),u.eme.sessions,u.tech_,t)};if(Qt.browser.IS_FIREFOX){let r;u.on("ended",()=>{r=!1,u.one(["seek","play"],l=>{!r&&u.eme.sessions.length===0&&(n(),r=!0)})}),u.on("play",()=>{const d=u.eme.options.limitRenewalsMaxPauseDuration;u.eme.sessions.length===0&&typeof d=="number"&&(r=!0,n())})}u.tech_.el_.addEventListener("encrypted",r=>{Qt.log.debug("eme","Received an 'encrypted' event"),rg(u),iw(u,r,Sy(u),u.eme.sessions,u.tech_,t)})}else if(St.WebKitMediaKeys)u.eme.initLegacyFairplay();else if(St.MSMediaKeys){u.tech_.el_.addEventListener("msneedkey",r=>{Qt.log.debug("eme","Received an 'msneedkey' event"),rg(u);try{_U(r,Sy(u),u.eme.sessions,u.tech_,t)}catch(l){t(l)}});const n=r=>{t(r)};u.tech_.on("mskeyerror",n),u.on("dispose",()=>{u.tech_.off("mskeyerror",n)})}}},p1=function(u={}){const t=this,n=fX(t);t.ready(()=>YP(t,n)),t.eme={setupEmeListeners(){YP(t,n)},initializeMediaKeys(r={},l=function(){},d=!1){const f=f1(t.currentSource(),u,r),p={initDataType:"cenc",initData:null,target:t.tech_.el_};if(rg(t),St.MediaKeys)iw(t,p,f,t.eme.sessions,t.tech_,n).then(()=>l()).catch(m=>{l(m),d||n(m)});else if(St.MSMediaKeys){const m=y=>{t.tech_.off("mskeyadded",m),t.tech_.off("mskeyerror",m),y.type==="mskeyerror"?(l(y.target.error),d||n(y.message)):l()};t.tech_.one("mskeyadded",m),t.tech_.one("mskeyerror",m);try{_U(p,f,t.eme.sessions,t.tech_,n)}catch(y){t.tech_.off("mskeyadded",m),t.tech_.off("mskeyerror",m),l(y),d||n(y)}}},initLegacyFairplay(){const r=p=>{Qt.log.debug("eme","Received a 'webkitneedkey' event"),rg(t),dX(p,Sy(t),t.tech_,n).catch(m=>{n(m)})},l=p=>{const m=Sy(t).firstWebkitneedkeyTimeout||1e3,y=t.src();t.eme.webkitneedkey_=t.eme.webkitneedkey_||{},t.eme.webkitneedkey_.src!==y&&(t.eme.webkitneedkey_={handledFirstEvent:!1,src:y}),t.eme.webkitneedkey_.handledFirstEvent?r(p):(t.clearTimeout(t.eme.webkitneedkey_.timeout),t.eme.webkitneedkey_.timeout=t.setTimeout(()=>{t.eme.webkitneedkey_.handledFirstEvent=!0,t.eme.webkitneedkey_.timeout=null,r(p)},m))};let d=t.tech_.el_;d.addEventListener("webkitneedkey",l);const f=()=>{t.off("dispose",f),d!==null&&d.removeEventListener("webkitneedkey",l),d=null};return t.on("dispose",f),f},detectSupportedCDMs:oX,options:u}};Qt.registerPlugin("eme",p1);p1.Error=ka;p1.VERSION=lX;var hX=Ka('<div class=player-container><div class="player-label player-name-label">VideoJS w/VHS</div><div class="player-label player-status-label"></div><div class="player-label player-time-label"></div><div data-vjs-player><video muted width=320 height=240>'),pX=Ka("<div>");const gX={muted:!0,autoplay:!0,controls:!1,children:[]};function mX(u){let t,n;const[r,l]=Va(null);let d=null,f=null,p=null;const[m,y]=Va([]),b=async()=>{n=Qt(t,gX),n.eme(),n.on("error",()=>{const w=n.error();console.error("VideoJS: Error code",w==null?void 0:w.code,"object",w),l(`error: ${(w==null?void 0:w.code)??"unknown"}`)});for(const w of["suspend","loadedmetadata","loadeddata","durationchange","liveedgechange","timeupdate","progress","stalled","abort","canplay","canplaythrough","seeking","seeked","play","playing","pause","ended","waiting","error"])n.on(w,()=>{const T=(()=>{var U;if(n.error())return`error ${((U=n.error())==null?void 0:U.code)??"unknown"}`;if(n.readyState()<3&&!n.paused())return"buffering";if(n.hasStarted())return n.ended()?"ended":n.paused()?n.currentTime()!==0?"paused":void 0:"playing"})();if(T==null||T===p)return;const k=performance.now();if(p!=="playing"&&f!=null){const U=((k-f)/1e3).toFixed(2);y(Y=>[`${p} for ${U}s`,...Y])}f=k,p=T,l(T)});t.muted=!0,t.addEventListener("loadeddata",()=>{if(d!==null){const T=((performance.now()-d)/1e3).toFixed(2);y(k=>[` loaded in ${T}s`,...k])}})},_=async(w,T)=>{if(y([]),l("loading"),f=null,p=null,!!n){if(w==null){l(null),n.reset();return}try{d=performance.now();const k={src:w};T&&(k.keySystems={"com.widevine.alpha":T}),n.src(k),n.play()}catch(k){console.error("VideoJS: Error code",k.code,"object",k),l(`error: ${k.code||"unknown"}`)}}},A=async()=>{try{n==null||n.dispose()}catch(w){console.error("VideoJS: Error destroying VideoJS player:",w)}};return Mf(()=>b()),zh(()=>_(u.playbackUrl,u.licenseUrl)),jh(()=>A()),(()=>{var w=hX(),T=w.firstChild,k=T.nextSibling,U=k.nextSibling,Y=U.nextSibling,se=Y.firstChild;T.style.setProperty("background","blue"),ls(k,r),ls(U,xl(Od,{get each(){return m()},children:Re=>(()=>{var Be=pX();return ls(Be,Re),Be})()}));var te=t;return typeof te=="function"?jy(te,se):t=se,w})()}var yX=Ka("<div class=player-instance>"),vX=Ka("<div class=player-grid-container><div class=player-selection><div class=player-checkboxes></div></div><div class=player-grid>"),TX=Ka("<label class=player-checkbox-label><input type=checkbox>"),EX=Ka("<div class=player-grid-row>"),bX=Ka('<div class="player-cell filled">');const uA=3,$T=[{id:"videojs-vhs",component:mX,label:"Video.js (VHS)"},{id:"shaka",component:IV,label:"Shaka Player"},{id:"dashjs",component:I5,label:"dash.js"},{id:"hlsjs",component:bV,label:"hls.js"},{id:"videojs-shaka",component:BW,label:"Video.js (Shaka)"}],_X=$T.map(u=>({...u,instanceId:`instance-${u.id}`}));function SX(u){const[t,n]=Va({});Mf(()=>{try{const m=localStorage.getItem("enabledPlayers");if(m)n(JSON.parse(m));else{const y=$T.reduce((b,_)=>(b[_.id]=!0,b),{});n(y),localStorage.setItem("enabledPlayers",JSON.stringify(y))}}catch(m){console.error("Failed to load player preferences:",m)}}),zh(()=>{localStorage.setItem("enabledPlayers",JSON.stringify(t()))});const r=(m,y)=>{n(b=>{if(y!=null&&y.altKey){const A={};for(const w of $T)A[w.id]=!1;return A[m]=!0,A}return{...b,[m]:!b[m]}})},l=cA(()=>{const m=t();return _X.filter(y=>m[y.id])}),d=cA(()=>{const m=l(),y=Math.ceil(m.length/uA),b=[];for(let _=0;_<y;_++){const A=[];for(let w=0;w<uA;w++){const T=_*uA+w;T<m.length&&A.push(m[T])}b.push(A)}return b}),f=m=>!m||!m.component?null:xl(m.component,{get playbackUrl(){return u.playbackUrl},get licenseUrl(){return u.licenseUrl}}),p=m=>(()=>{var y=yX();return ls(y,()=>f(m)),y})();return(()=>{var m=vX(),y=m.firstChild,b=y.firstChild,_=y.nextSibling;return ls(b,xl(Od,{each:$T,children:A=>(()=>{var w=TX(),T=w.firstChild;return T.$$click=k=>r(A.id,k),ls(w,()=>A.label||A.id,null),Dh(()=>T.checked=t()[A.id]||!1),w})()})),ls(_,xl(Od,{get each(){return d()},children:(A,w)=>(()=>{var T=EX();return ls(T,xl(Od,{each:A,children:(k,U)=>(()=>{var Y=bX();return XR(Y,"data-row",w),XR(Y,"data-col",U),ls(Y,xl(p,k)),Y})()})),T})()})),m})()}nM(["click"]);var xX=Ka("<div class=status-panel><div><strong>Service Worker:</strong> </div><div class=status-stats><div><strong>Cache size:</strong> </div><div><strong>Files cached:</strong> </div><div><strong>Cache hits:</strong> ");function AX(){const[u,t]=Va("Checking service worker status..."),[n,r]=Va({size:0,count:0,hits:0});Mf(()=>{"serviceWorker"in navigator?navigator.serviceWorker.ready.then(()=>{t("Media caching service worker active"),navigator.serviceWorker.addEventListener("message",f=>{f.data&&f.data.type==="CACHE_STATS"&&r(f.data.stats)}),navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"GET_CACHE_STATS"})}).catch(f=>{t(`Service worker error: ${f.message}`)}):t("Service workers not supported in this browser");const d=setInterval(()=>{navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"GET_CACHE_STATS"})},2e3);return()=>clearInterval(d)});const l=d=>{if(d===0)return"0 Bytes";const f=1024,p=["Bytes","KB","MB","GB"],m=Math.floor(Math.log(d)/Math.log(f));return`${Number.parseFloat((d/f**m).toFixed(2))} ${p[m]}`};return(()=>{var d=xX(),f=d.firstChild,p=f.firstChild;p.nextSibling;var m=f.nextSibling,y=m.firstChild,b=y.firstChild;b.nextSibling;var _=y.nextSibling,A=_.firstChild;A.nextSibling;var w=_.nextSibling,T=w.firstChild;return T.nextSibling,ls(f,u,null),ls(y,()=>l(n().size),null),ls(_,()=>n().count,null),ls(w,()=>n().hits,null),d})()}var wX=Ka('<div class=main-container><div class=stream-list-container></div><form class=url-form><div class=input-group><label for=playback-url>Playback URL: </label><input id=playback-url type=text class=url-input><button type=submit class=btn>Play</button></div><div class=input-group><label for=license-url>License URL (Widevine): </label><input id=license-url type=text class=url-input><button type=button class="btn btn-secondary">Stop'),IX=Ka("<div><span></span><button type=button class=stream-item><strong></strong> </button><button type=button class=delete-btn>&times;");const CX=[{name:"Big Buck Bunny",playbackUrl:"https://dash.akamaized.net/akamai/bbb_30fps/bbb_30fps.mpd",licenseUrl:""},{name:"Big Buck Bunny",playbackUrl:"https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8",licenseUrl:""},{name:"Sintel",playbackUrl:"https://bitdash-a.akamaihd.net/content/sintel/hls/playlist.m3u8",licenseUrl:""},{name:"Tears of Steel",playbackUrl:"https://media.axprod.net/TestVectors/v7-Clear/Manifest_1080p.mpd",licenseUrl:""},{name:"Tears of Steel",playbackUrl:"https://cdn.bitmovin.com/content/demos/4k/38e843e0-1998-11e9-8a92-c734cd79b4dc/manifest.m3u8",licenseUrl:""},{name:"Forbidden Planet",playbackUrl:"http://sample.vodobox.com/planete_interdite/planete_interdite_alternate.m3u8",licenseUrl:""}];function kX(){const[u,t]=Va(null),[n,r]=Va(""),[l,d]=Va(""),[f,p]=Va([...CX]);Mf(()=>{var U,Y;const w=localStorage.getItem("playbackUrl"),T=localStorage.getItem("licenseUrl"),k=localStorage.getItem("dynamicSources");k&&p(JSON.parse(k)),w?(r(w),d(T||""),t({playbackUrl:w,licenseUrl:T||""})):(r(((U=u())==null?void 0:U.playbackUrl)||""),d(((Y=u())==null?void 0:Y.licenseUrl)||"")),document.addEventListener("paste",A),jh(()=>{document.removeEventListener("paste",A)})});const m=w=>{w.preventDefault();const T={name:"Custom Stream",playbackUrl:n(),licenseUrl:l()};if(!f().some(U=>U.playbackUrl===T.playbackUrl)&&T.playbackUrl){const U=[...f(),T];p(U),localStorage.setItem("dynamicSources",JSON.stringify(U))}t({playbackUrl:n()||null,licenseUrl:l()||null}),localStorage.setItem("playbackUrl",n()),localStorage.setItem("licenseUrl",l())},y=(w,T)=>{r(w),d(T),t({playbackUrl:w,licenseUrl:T}),localStorage.setItem("playbackUrl",w),localStorage.setItem("licenseUrl",T)},b=()=>{t(null)},_=w=>{const T=f().filter(k=>k.playbackUrl!==w);p(T),localStorage.setItem("dynamicSources",JSON.stringify(T))},A=w=>{var k,U,Y,se,te,Re;w.preventDefault();const T=(k=w.clipboardData)==null?void 0:k.getData("text");if(T)try{const Be=JSON.parse(T);if(Array.isArray(Be)&&Be.every(j=>j!=null&&typeof j=="object"&&j.playbackUrl)){const j=Be.map(Z=>({name:Z.name||"Custom Stream",playbackUrl:Z.playbackUrl,licenseUrl:Z.licenseUrl||""})),M=[...f(),...j];p(M),localStorage.setItem("dynamicSources",JSON.stringify(M))}else(U=Be.payload)!=null&&U.playbackUrl?(r(Be.payload.playbackUrl),(Re=(te=(se=(Y=Be.payload)==null?void 0:Y.drm)==null?void 0:se.la)==null?void 0:te.WIDEVINE)!=null&&Re.licenseUrl?d(Be.payload.drm.la.WIDEVINE.licenseUrl):d("")):(r(T),d(""))}catch{r(T),d("")}};return[xl(AX,{}),(()=>{var w=wX(),T=w.firstChild,k=T.nextSibling,U=k.firstChild,Y=U.firstChild,se=Y.nextSibling,te=U.nextSibling,Re=te.firstChild,Be=Re.nextSibling,j=Be.nextSibling;return ls(T,xl(Od,{get each(){return f()},children:M=>{const Z=M.playbackUrl.includes(".m3u8")?"hls":"dash";return(()=>{var K=IX(),x=K.firstChild,ue=x.nextSibling,$e=ue.firstChild;$e.nextSibling;var xe=ue.nextSibling;return QR(x,`stream-type-label ${Z}`),ls(x,Z),ue.$$click=()=>y(M.playbackUrl,M.licenseUrl),ls($e,()=>M.name),ls(ue,()=>M.playbackUrl,null),xe.$$click=()=>_(M.playbackUrl),Dh(()=>{var lt;return QR(K,`stream-item-container ${((lt=u())==null?void 0:lt.playbackUrl)===M.playbackUrl?"active":""}`)}),K})()}})),k.addEventListener("submit",m),dT(se,"paste",M=>M.stopPropagation()),dT(se,"input",M=>r(M.target.value)),dT(Be,"paste",M=>M.stopPropagation()),dT(Be,"input",M=>d(M.target.value)),j.$$click=b,Dh(()=>se.value=n()),Dh(()=>Be.value=l()),w})(),xl(SX,{get playbackUrl(){var w;return(w=u())==null?void 0:w.playbackUrl},get licenseUrl(){var w;return(w=u())==null?void 0:w.licenseUrl}})]}nM(["click"]);"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/media-cache-worker.js").then(u=>{console.log("Media caching service worker registered:",u.scope)}).catch(u=>{console.error("Service worker registration failed:",u)})});const DX=document.getElementById("root");v5(()=>xl(kX,{}),DX)});export default RX();
